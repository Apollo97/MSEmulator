(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{340:function(t,r,e){"use strict";e.r(r),e.d(r,"ChatBalloon",function(){return a});e(333);var i=e(351);class a{constructor(){this._raw=null}async load(t){const r=[this.constructor._base_path,t].join("/");Object.defineProperty(this,"_raw",{value:await $get.data(r)}),this.nw=new i.a(this._raw.nw),this.n=new i.a(this._raw.n),this.ne=new i.a(this._raw.ne),this.w=new i.a(this._raw.w),this.c=new i.a(this._raw.c),this.e=new i.a(this._raw.e),this.sw=new i.a(this._raw.sw),this.s=new i.a(this._raw.s),this.se=new i.a(this._raw.se),this.arrow=new i.a(this._raw.arrow),a.cache[t]=this}draw(t,r,e,i){let a=[];for(let t=0;t<r.length;t+=12){let e=r.slice(t,t+12);a.push(e)}if(!a.length)return;const s=this.c.height,h=t.ctx;h.font="12px 微軟正黑體",h.textAlign="center",h.textBaseline="top";const n=a.map(t=>h.measureText(t).width+0+0).sort((t,r)=>r-t)[0],w=Math.ceil(n/this.n.width)*this.n.width,o=w/2,c=a.length*s+0+0;e=Math.trunc(e-o),i=Math.trunc(i-c-this.arrow.height),this.nw.draw2(e,i),this.n._drawPattern(e,i,w,this.n.height),this.ne.draw2(e+w,i);const d=this.w.width-this.w.x;this.w._drawPattern(e+d,i,this.w.width,c),this.c._drawPattern(e+d,i,w,c),this.e._drawPattern(e+d+w,i,this.e.width,c);const u=this.arrow.width/2,l=o-u;this.sw.draw2(e,i+c),this.s._drawPattern(e,i+c,l,this.s.height),this.s._drawPattern(e+o+u,i+c,l,this.s.height),this.se.draw2(e+w,i+c),this.arrow.draw2i(e-u+o,i+c);for(let t=0,r=i;t<a.length;++t,r+=s){let i=a[t];h.fillStyle="black",h.fillText(i,e+o+0,r+0)}}static get _base_path(){return"/UI/ChatBalloon"}}a.cache={},window.$images_ChatBalloon=a.cache},351:function(t,r,e){"use strict";e.d(r,"b",function(){return s}),e.d(r,"a",function(){return h});var i=e(332),a=(e(333),e(335));class s extends a.Graph{constructor(t,r){t?(super(r,{width:t.__w,height:t.__h}),this._raw=t,r?this._url=r:!1!==s.isTexture(t)&&(this._url=t[""])):super()}static isTexture(t){if(t)if(t.hasOwnProperty("")){if("string"==typeof t[""])return!0}else if(!t.__isEmpty)throw console.group("no texture"),console.warn(t),console.groupEnd(),new Error("no texture");return!1}static isTextureHasData(t){return t&&"string"==typeof t[""]&&t[""].startsWith("data:image/")}set z(t){this._order=t}get z(){return this._order}_get(t,r,e){if(this._raw){if(r in this._raw)return e(this._raw[r])}else;return t}draw(){this._engine.drawGraph(this)}draw2(t,r){this._engine.drawGraph2(this,t-this.x,r-this.y)}draw2i(t,r){this._engine.drawGraph2(this,Math.trunc(t-this.x+.5),Math.trunc(r-this.y+.5))}}class h extends s{constructor(t,r){super(t,r);var e=this._get(new i.Vec2(0,0),"origin",i.Vec2.get);this.x=e.x,this.y=e.y,this.z=this._get(0,"z",Number),this.delay=this._get(100,"delay",Number)}drawPattern(t,r,e,i){if(!this.isLoaded())return;const a=this._engine.ctx;a.save();try{a.rect(t,r,e,i),a.clip();let s=t,h=t+e,n=r+i;for(let t=r;t<n;t+=this.height)for(let r=s;r<h;r+=this.width)this.draw2(r,t)}catch(t){console.error(t)}a.restore()}drawHorizontalPattern(t,r,e){if(!this.isLoaded())return;const i=this._engine.ctx;i.save();try{const i=t+e;for(let e=t;e<i;e+=this.width)this.draw2(e,r)}catch(t){console.error(t)}i.restore()}drawVerticalPattern(t,r,e){if(!this.isLoaded())return;const i=this._engine.ctx;i.save();try{const i=r+e;for(let e=r;e<i;e+=this.height)this.draw2(t,e)}catch(t){console.error(t)}i.restore()}_drawPattern(t,r,e,i){if(!this.isLoaded())return;this._engine.ctx;const a=t,s=t+e,h=r+i;for(let t=r;t<h;t+=this.height)for(let r=a;r<s;r+=this.width)this.draw2(r,t)}_drawHorizontalPattern(t,r,e){if(!this.isLoaded())return;this._engine.ctx;const i=t+e;for(let e=t;e<i;e+=this.width)this.draw2(e,r)}_drawVerticalPattern(t,r,e){if(!this.isLoaded())return;this._engine.ctx;const i=r+e;for(let e=r;e<i;e+=this.height)this.draw2(t,e)}drawPattern4i(t,r,e,i){this.drawPattern(Math.trunc(t+.5),Math.trunc(r+.5),Math.trunc(e+.5),Math.trunc(i+.5))}drawHorizontalPattern3i(t,r,e){this.drawHorizontalPattern(Math.trunc(t+.5),Math.trunc(r+.5),Math.trunc(e+.5))}drawVerticalPattern3i(t,r,e){this.drawVerticalPattern(Math.trunc(t+.5),Math.trunc(r+.5),Math.trunc(e+.5))}_drawPattern4i(t,r,e,i){this._drawPattern(Math.trunc(t+.5),Math.trunc(r+.5),Math.trunc(e+.5),Math.trunc(i+.5))}_drawHorizontalPattern3i(t,r,e){this._drawHorizontalPattern(Math.trunc(t+.5),Math.trunc(r+.5),Math.trunc(e+.5))}_drawVerticalPattern3i(t,r,e){this._drawVerticalPattern(Math.trunc(t+.5),Math.trunc(r+.5),Math.trunc(e+.5))}}}}]);
//# sourceMappingURL=15.js.map