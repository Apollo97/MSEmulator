(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[4],{

/***/ "./public/javascripts/resource.js":
/*!****************************************!*\
  !*** ./public/javascripts/resource.js ***!
  \****************************************/
/*! exports provided: ItemCategoryInfo, ResourceManager, $get, ItemAttrNormalize, CharacterRenderConfig */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ItemCategoryInfo\", function() { return ItemCategoryInfo; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ResourceManager\", function() { return ResourceManager; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"$get\", function() { return $get; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ItemAttrNormalize\", function() { return ItemAttrNormalize; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CharacterRenderConfig\", function() { return CharacterRenderConfig; });\n﻿\r\nconst $failed_urls = [];\r\n\r\nconst $archive = {};\r\n\r\n\r\nwindow.character_emotion_list = [\"blink\", \"hit\", \"smile\", \"troubled\", \"cry\", \"angry\", \"bewildered\", \"stunned\",\r\n\t\"vomit\", \"oops\", \"cheers\", \"chu\", \"wink\", \"pain\", \"glitter\", \"despair\", \"love\", \"shine\", \"blaze\", \"hum\",\r\n\t\"bowing\", \"hot\", \"dam\", \"qBlue\"];\r\n\r\nwindow.character_action_list = [\"walk1\", \"walk2\", \"stand1\", \"stand2\", \"alert\", \"swingO1\", \"swingO2\", \"swingO3\", \"swingOF\", \"swingT1\",\r\n\t\"swingT2\", \"swingT3\", \"swingTF\", \"swingP1\", \"swingP2\", \"swingPF\", \"stabO1\", \"stabO2\", \"stabOF\", \"stabT1\",\r\n\t\"stabT2\", \"stabTF\", \"shoot1\", \"shoot2\", \"shootF\", \"proneStab\", \"prone\", \"heal\", \"fly\", \"jump\", \"sit\", \"ladder\",\r\n\t\"rope\"/*, \"dead\", \"ghostwalk\", \"ghoststand\", \"ghostjump\", \"ghostproneStab\", \"ghostladder\", \"ghostrope\", \"ghostfly\",\r\n\t\t\"ghostsit\"*/];\r\n\r\nclass ItemCategoryInfo {\r\n\t/**\r\n\t * @param {string} id_prefix\r\n\t * @param {string} path\r\n\t * @param {boolean} isOnFace\r\n\t * @param {string} slot - property name\r\n\t * @param {string} categoryName\r\n\t * @param {string} type\r\n\t * @param {string} [stringPath]\r\n\t */\r\n\tconstructor(id_prefix, imgDir, listPath, slot, categoryName, type, stringPath) {\r\n\t\tthis.id_prefix = id_prefix;\r\n\r\n\t\t/** data path */\r\n\t\tthis.path = imgDir;\r\n\r\n\t\t/** equip window */\r\n\t\tthis.slot = slot;\r\n\r\n\t\t/** item list file name */\r\n\t\tthis.listPath = listPath;\r\n\r\n\t\t/** display category name */\r\n\t\tthis.categoryName = categoryName;\r\n\r\n\t\t/** renderer */\r\n\t\tthis.FragmentType = null;\r\n\r\n\t\t/** @type {string} */\r\n\t\tthis.dataDir = null;\r\n\t\t/** @type {string} */\r\n\t\tthis.stringDir = null;\r\n\t\t/** @type {string} */\r\n\t\tthis.iconPath = null;\r\n\t\t/** @type {string} */\r\n\t\tthis.iconRawPath = null;\r\n\t\t{\r\n\t\t\tlet dataDir, stringDir, iconPath, iconRawPath;\r\n\r\n\t\t\tswitch (slot) {\r\n\t\t\t\tcase \"head\":\r\n\t\t\t\t\ticonPath = \"stand1/0/head\";\r\n\t\t\t\t\ticonRawPath = \"stand1/0/head\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"body\":\r\n\t\t\t\t\ticonPath = \"stand1/0/body\";\r\n\t\t\t\t\ticonRawPath = \"stand1/0/body\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"hair\":\r\n\t\t\t\t\ticonPath = \"stand1/0/hair\";\r\n\t\t\t\t\ticonRawPath = \"stand1/0/hair\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"face\":\r\n\t\t\t\t\ticonPath = \"blink/0/face\";\r\n\t\t\t\t\ticonRawPath = \"blink/0/face\";\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault: // typeId: 0|1|2|3|4\r\n\t\t\t\t\ticonPath = \"info/icon\";\r\n\t\t\t\t\ticonRawPath = \"info/iconRaw\";\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (id_prefix == \"5\") {\r\n\t\t\t\tdataDir = `/Item/${imgDir}/${id_prefix}/`;\r\n\t\t\t\tstringDir = \"/String/Pet/\";\r\n\t\t\t\talert(\"Pet\");\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tswitch (id_prefix[1]) {\r\n\t\t\t\t\tcase \"0\":\r\n\t\t\t\t\t\tif (Math.trunc(id_prefix) <= 1) {\r\n\t\t\t\t\t\t\tdataDir = \"/Character/\";\r\n\t\t\t\t\t\t\tstringDir = null;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tcase \"1\":\r\n\t\t\t\t\t\tlet s = imgDir + (imgDir ? \"/\" : \"\");\r\n\t\t\t\t\t\tdataDir = \"/Character/\" + s;\r\n\t\t\t\t\t\tstringDir = \"/String/Eqp/Eqp/\" + (stringPath || s);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"2\":\r\n\t\t\t\t\t\tdataDir = `/Item/${imgDir}/${id_prefix}/`;\r\n\t\t\t\t\t\tstringDir = \"/String/Consume/\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"3\":\r\n\t\t\t\t\t\tdataDir = `/Item/${imgDir}/${id_prefix}/`;\r\n\t\t\t\t\t\tstringDir = \"/String/Ins/\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"4\":\r\n\t\t\t\t\t\tdataDir = `/Item/${imgDir}/${id_prefix}/`;\r\n\t\t\t\t\t\tstringDir = \"/String/Etc/\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase \"5\":\r\n\t\t\t\t\t\tdataDir = `/Item/${imgDir}/${id_prefix}/`;\r\n\t\t\t\t\t\tstringDir = \"/String/Cash/\";\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\tthrow new Error(\"unknow item type, param: %o\", [id_prefix, imgDir, listPath, slot, categoryName, type]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tObject.defineProperties(this, {\r\n\t\t\t\t\"type\": {\r\n\t\t\t\t\tvalue: type,\r\n\t\t\t\t},\r\n\t\t\t\t\"dataDir\": {\r\n\t\t\t\t\tvalue: dataDir,\r\n\t\t\t\t},\r\n\t\t\t\t\"stringDir\": {\r\n\t\t\t\t\tvalue: stringDir,\r\n\t\t\t\t},\r\n\t\t\t\t\"iconPath\": {\r\n\t\t\t\t\tvalue: iconPath,\r\n\t\t\t\t},\r\n\t\t\t\t\"iconRawPath\": {\r\n\t\t\t\t\tvalue: iconRawPath,\r\n\t\t\t\t},\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * load equip or item, name and desc\r\n\t * @param {string} itemId\r\n\t * @returns {{info:{icon:{[\"\"]:string},iconRaw:{[\"\"]:string}},name:string,desc:string,[prop:string]:any}}\r\n\t */\r\n\tstatic async getItem(itemId) {\r\n\t\t/** @type {ItemCategoryInfo} */\r\n\t\tlet info = ItemCategoryInfo.get(itemId);\r\n\t\tif (!info) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\r\n\t\tlet id = itemId.padStart(8, \"0\");\r\n\t\tif (id[0] != \"0\") {\r\n\t\t\tthrow new Error(\"itemId: \" + itemId);\r\n\t\t}\r\n\r\n\t\tlet results;\r\n\t\ttry {\r\n\t\t\tresults = await Promise.all([\r\n\t\t\t\t$get.data(info.dataDir + itemId),\r\n\t\t\t\tinfo.stringDir ? $get.data(info.stringDir + Number(itemId)).then(\r\n\t\t\t\t\ta => a, // have name or desc\r\n\t\t\t\t\t() => { return { name: \"<\" + itemId + \">\" }; } // no name and desc\r\n\t\t\t\t) : { name: \"<\" + itemId + \">\" } // no name and desc\r\n\t\t\t]);\r\n\t\t}\r\n\t\tcatch (ex) {\r\n\t\t\tthrow new ex;\r\n\t\t}\r\n\r\n\t\tlet data = Object.assign(results[0], results[1]);\r\n\t\t\r\n\t\tdata.id = itemId;\r\n\r\n\t\tif (data.info) {\r\n\t\t\t{//editor mode data\r\n\t\t\t\tdata.info.id = itemId;\r\n\t\t\t\tdata.info.name = data.name;\r\n\t\t\t\tif (data.desc) {\r\n\t\t\t\t\tdata.info.desc = data.desc;\r\n\t\t\t\t}\r\n\t\t\t\tdata.info.__v = window.DATA_TAG + window.DATA_VERSION;\r\n\t\t\t}\r\n\r\n\t\t\tif (!data.info.icon) {\r\n\t\t\t\tdata.info.icon = {};\r\n\t\t\t}\r\n\t\t\tif (!data.info.iconRaw) {\r\n\t\t\t\tdata.info.iconRaw = {};\r\n\t\t\t}\r\n\t\t\tif (!data.info.icon[\"\"]) {\r\n\t\t\t\tdata.info.icon[\"\"] = ItemCategoryInfo.getIconUrl(itemId);\r\n\t\t\t}\r\n\t\t\tif (data.info.iconRaw[\"\"]) {\r\n\t\t\t\tdata.info.iconRaw[\"\"] = ItemCategoryInfo.getIconRawUrl(itemId);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn data;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string} id\r\n\t * @returns {string|null}\r\n\t */\r\n\tstatic getIconRawUrl(id) {\r\n\t\t/** @type {ItemCategoryInfo} */\r\n\t\tlet info = ItemCategoryInfo.get(id);\r\n\t\tif (!info) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (id[0] == \"0\") {\r\n\t\t\t//TODO: return path, not url\r\n\t\t\treturn info.dataDir + id + \"/\" + info.iconRawPath;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string} id\r\n\t * @returns {string|null}\r\n\t */\r\n\tstatic getIconUrl(id) {\r\n\t\t/** @type {ItemCategoryInfo} */\r\n\t\tlet info = ItemCategoryInfo.get(id);\r\n\t\tif (!info) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tif (id[0] == \"0\") {\r\n\t\t\t//TODO: return path, not url\r\n\t\t\treturn info.dataDir + id + \"/\" + info.iconPath;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string} id - 4+ digit string\r\n\t * @returns {ItemCategoryInfo}\r\n\t */\r\n\tstatic get(id) {\r\n\t\tlet info;\r\n\r\n\t\tif (id == null || id == \"\") {\r\n\t\t\tdebugger;\r\n\t\t\tthrow new TypeError();\r\n\t\t}\r\n\r\n\t\tif (id[0] == \"0\") {\r\n\t\t\tif (id.length == 4) {\r\n\t\t\t\tinfo = ItemCategoryInfo._info[id];\r\n\t\t\t\tif (info) {\r\n\t\t\t\t\treturn info;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if (id.length == 6) {\r\n\t\t\t\treturn ItemCategoryInfo._info[id];\r\n\t\t\t}\r\n\t\t\telse if (id.length == 3) {\r\n\t\t\t\treturn ItemCategoryInfo._info[id];\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tinfo = ItemCategoryInfo._info[id.slice(0, 4)];\r\n\t\t\t\tif (info) {\r\n\t\t\t\t\treturn info;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tinfo = ItemCategoryInfo._info[id.slice(0, 6)];\r\n\t\t\t\t\tif (info) {\r\n\t\t\t\t\t\treturn info;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tinfo = ItemCategoryInfo._info[id.slice(0, 3)];//019\r\n\t\t\t\t\t\tif (info) {\r\n\t\t\t\t\t\t\treturn info;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tconsole.warn(\"unknow item type, itemId: \" + id);\r\n\t\treturn null;\r\n\t}\r\n\r\n\tstatic getTypeId() {\r\n\t\treturn Math.trunc(_id / 1000000);\r\n\t}\r\n\r\n\tstatic getCategory() {\r\n\t\treturn Math.trunc(_id / 10000);// % 100;// 0105 // 01 + 05 // type + category\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string} id - char[4]: type; char[4+]: itemId\r\n\t * @returns {boolean}\r\n\t */\r\n\tstatic isItem(id) {\r\n\t\tlet type = Math.trunc(id / 1000000);//id.startsWith(\"00\");\r\n\t\treturn type != 0;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string} id - char[4]: type; char[4+]: itemId\r\n\t * @returns {boolean}\r\n\t */\r\n\tstatic isEquip(id) {\r\n\t\tif (!id) {\r\n\t\t\tthrow TypeError();\r\n\t\t}\r\n\t\tlet _id = Number(id);\r\n\r\n\t\tif (!Number.isSafeInteger(_id)) {\r\n\t\t\tthrow TypeError();\r\n\t\t}\r\n\r\n\t\t//let cate = Number(id.length == 4 ? id : id.slice(0, 4));\r\n\t\t//return (cate >= \"0100\" && cate < \"0180\");\r\n\r\n\t\t//let cate = Math.trunc(_id / 10000);\r\n\t\t//if (cate >= 180 && cate < 2000) {\r\n\t\t//\tconsole.warn(\"?? equip: \" + id);\r\n\t\t//\tdebugger;\r\n\t\t//}\r\n\r\n\t\tlet type = Math.trunc(_id / 1000000);\r\n\r\n\t\treturn type == 1;\r\n\t}\r\n\r\n\tstatic isChair(id) {\r\n\t\tif (!id) {\r\n\t\t\tthrow TypeError();\r\n\t\t}\r\n\t\tlet _id = Number(id);\r\n\r\n\t\tif (!Number.isSafeInteger(_id)) {\r\n\t\t\tthrow TypeError();\r\n\t\t}\r\n\r\n\t\tlet cate = Math.trunc(_id / 10000);\r\n\r\n\t\treturn cate == 301;//0301xxxx\r\n\t}\r\n\r\n\t/**\r\n\t * 1~4 digit number\r\n\t * @param {string} itemId\r\n\t */\r\n\tstatic getSubCategory(itemId) {\r\n\t\treturn Math.trunc(itemId / 10000);\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string} itemId\r\n\t */\r\n\tstatic isCashWeapon(itemId) {\r\n\t\treturn Math.trunc(itemId / 10000) == 170;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string} job\r\n\t * @returns {string}\r\n\t */\r\n\tstatic getJobWeaponCategory(job) {\r\n\t\t//TODO: getJobWeaponCategory\r\n\t\tconsole.warn(\"getJobWeaponCategory: 未完成\");\r\n\t}\r\n}\r\nwindow.$ItemCategoryInfo = ItemCategoryInfo;\r\nItemCategoryInfo.type = {\r\n\tEquip: \"Equip\",\r\n\tConsume: \"Consume\",\r\n\tEtc: \"Etc\",\r\n\tInstall: \"Install\",\r\n\tCash: \"Cash\"\r\n};\r\nItemCategoryInfo.typeName = {\r\n\t0: \"Equip\",\r\n\t1: \"Consume\",\r\n\t2: \"Etc\",\r\n\t3: \"Install\",\r\n\t4: \"Cash\"\r\n};\r\nItemCategoryInfo.typeId = {\r\n\tEquip: 0,\r\n\tConsume: 1,\r\n\tEtc: 2,\r\n\tInstall: 3,\r\n\tCash: 4,\r\n};\r\nItemCategoryInfo._info = {\r\n\t\"0000\": new ItemCategoryInfo(\"0000\", \"\",\t\t\t\"body\",\t\t\t\t\"body\",\t\t\t\"<body>\", \"Equip\"),\r\n\t\"0001\": new ItemCategoryInfo(\"0001\", \"\",\t\t\t\"head\",\t\t\t\t\"head\",\t\t\t\"<head>\", \"Equip\"),\r\n\r\n\t\"0002\": new ItemCategoryInfo(\"0002\", \"Face\",\t\t\"Face\",\t\t\t\t\"face\",\t\t\t\"臉型\", \"Equip\"),\r\n\t\"0003\": new ItemCategoryInfo(\"0003\", \"Hair\",\t\t\"Hair\",\t\t\t\t\"hair\",\t\t\t\"髮型\", \"Equip\"),\r\n\t\"0004\": new ItemCategoryInfo(\"0004\", \"Hair\",\t\t\"Hair\",\t\t\t\t\"hair\",\t\t\t\"髮型\", \"Equip\"),\r\n\r\n\t\"0100\": new ItemCategoryInfo(\"0100\", \"Cap\",\t\t\t\"Cap\",\t\t\t\t\"cap\",\t\t\t\"帽子\", \"Equip\"),\r\n\t\"0101\": new ItemCategoryInfo(\"0101\", \"Accessory\",\t\"accessoryFace\",\t\"accessoryFace\", \"臉飾\", \"Equip\"),\r\n\t\"0102\": new ItemCategoryInfo(\"0102\", \"Accessory\",\t\"accessoryEyes\",\t\"accessoryEyes\", \"眼飾\", \"Equip\"),\r\n\t\"0103\": new ItemCategoryInfo(\"0103\", \"Accessory\",\t\"accessoryEars\",\t\"accessoryEars\", \"耳環\", \"Equip\"),\r\n\t\"0104\": new ItemCategoryInfo(\"0104\", \"Coat\",\t\t\"Coat\",\t\t\t\t\"coat\",\t\t\t\"上衣\", \"Equip\"),\r\n\t\"0105\": new ItemCategoryInfo(\"0105\", \"Longcoat\",\t\"Longcoat\",\t\t\t\"longcoat\",\t\t\"套服\", \"Equip\"),\r\n\t\"0106\": new ItemCategoryInfo(\"0106\", \"Pants\",\t\t\"Pants\",\t\t\t\"pants\",\t\t\"褲子\", \"Equip\"),\r\n\t\"0107\": new ItemCategoryInfo(\"0107\", \"Shoes\",\t\t\"Shoes\",\t\t\t\"shoes\",\t\t\"鞋子\", \"Equip\"),\r\n\t\"0108\": new ItemCategoryInfo(\"0108\", \"Glove\",\t\t\"Glove\",\t\t\t\"glove\",\t\t\"手套\", \"Equip\"),\r\n\t\"0109\": new ItemCategoryInfo(\"0109\", \"Shield\",\t\t\"Shield\",\t\t\t\"shield\",\t\t\"盾牌\", \"Equip\"),\r\n\t\"0110\": new ItemCategoryInfo(\"0110\", \"Cape\",\t\t\"Cape\",\t\t\t\t\"cape\",\t\t\t\"披風\", \"Equip\"),\r\n\r\n\t\"0121\": new ItemCategoryInfo(\"0121\", \"Weapon\", \"閃亮克魯\", \"weapon\", \"閃亮克魯\", \"Equip\"),\r\n\t\"0122\": new ItemCategoryInfo(\"0122\", \"Weapon\", \"靈魂射手\", \"weapon\", \"靈魂射手\", \"Equip\"),\r\n\t\"0123\": new ItemCategoryInfo(\"0123\", \"Weapon\", \"魔劍\", \"weapon\", \"魔劍\", \"Equip\"),\r\n\t\"0124\": new ItemCategoryInfo(\"0124\", \"Weapon\", \"能量劍\", \"weapon\", \"能量劍\", \"Equip\"),\r\n\t\"0125\": new ItemCategoryInfo(\"0125\", \"Weapon\", \"幻獸棒\", \"weapon\", \"幻獸棒\", \"Equip\"),\r\n\t\"0126\": new ItemCategoryInfo(\"0126\", \"Weapon\", \"ESP限制器\", \"weapon\", \"ESP限制器\", \"Equip\"),\r\n\t\"0127\": new ItemCategoryInfo(\"0127\", \"Weapon\", \"鎖鏈\", \"weapon\", \"鎖鏈\", \"Equip\"),\r\n\t\"0128\": new ItemCategoryInfo(\"0128\", \"Weapon\", \"魔力護腕\", \"weapon\", \"魔力護腕\", \"Equip\"),\r\n\r\n\t\"0130\": new ItemCategoryInfo(\"0130\", \"Weapon\", \"單手劍\", \"weapon\", \"單手劍\", \"Equip\"),\r\n\t\"0131\": new ItemCategoryInfo(\"0131\", \"Weapon\", \"單手斧\", \"weapon\", \"單手斧\", \"Equip\"),\r\n\t\"0132\": new ItemCategoryInfo(\"0132\", \"Weapon\", \"單手錘\", \"weapon\", \"單手錘\", \"Equip\"),\r\n\t\"0133\": new ItemCategoryInfo(\"0133\", \"Weapon\", \"短劍\", \"weapon\", \"短劍\", \"Equip\"),\r\n\t\"0134\": new ItemCategoryInfo(\"0134\", \"Weapon\", \"雙刀\", \"weapon\", \"雙刀\", \"Equip\"),\r\n\t\"013526\": new ItemCategoryInfo(\"013526\", \"Weapon\", \"靈魂之環\", \"weapon\", \"靈魂之環\", \"Equip\"),\r\n\t\"013530\": new ItemCategoryInfo(\"013530\", \"Weapon\", \"控制器\", \"weapon\", \"控制器\", \"Equip\"),\r\n\t\"0136\": new ItemCategoryInfo(\"0136\", \"Weapon\", \"手杖\", \"weapon\", \"手杖\", \"Equip\"),\r\n\t\"0137\": new ItemCategoryInfo(\"0137\", \"Weapon\", \"短杖\", \"weapon\", \"短杖\", \"Equip\"),\r\n\t\"0138\": new ItemCategoryInfo(\"0138\", \"Weapon\", \"長杖\", \"weapon\", \"長杖\", \"Equip\"),\r\n\t\r\n\t\"0140\": new ItemCategoryInfo(\"0140\", \"Weapon\", \"雙手劍\", \"weapon\", \"雙手劍\", \"Equip\"),\r\n\t\"0141\": new ItemCategoryInfo(\"0141\", \"Weapon\", \"雙手斧\", \"weapon\", \"雙手斧\", \"Equip\"),\r\n\t\"0142\": new ItemCategoryInfo(\"0142\", \"Weapon\", \"雙手棍\", \"weapon\", \"雙手棍\", \"Equip\"),\r\n\t\"0143\": new ItemCategoryInfo(\"0143\", \"Weapon\", \"槍\", \"weapon\", \"槍\", \"Equip\"),\r\n\t\"0144\": new ItemCategoryInfo(\"0144\", \"Weapon\", \"矛\", \"weapon\", \"矛\", \"Equip\"),\r\n\t\"0145\": new ItemCategoryInfo(\"0145\", \"Weapon\", \"弓\", \"weapon\", \"弓\", \"Equip\"),\r\n\t\"0146\": new ItemCategoryInfo(\"0146\", \"Weapon\", \"弩\", \"weapon\", \"弩\", \"Equip\"),\r\n\t\"0147\": new ItemCategoryInfo(\"0147\", \"Weapon\", \"拳套\", \"weapon\", \"拳套\", \"Equip\"),\r\n\t\"0148\": new ItemCategoryInfo(\"0148\", \"Weapon\", \"指虎\", \"weapon\", \"指虎\", \"Equip\"),\r\n\t\"0149\": new ItemCategoryInfo(\"0149\", \"Weapon\", \"火槍\", \"weapon\", \"火槍\", \"Equip\"),\r\n\t\"0150\": new ItemCategoryInfo(\"0150\", \"Weapon\", \"鏟\", \"weapon\", \"鏟\", \"Equip\"),\r\n\t\"0151\": new ItemCategoryInfo(\"0151\", \"Weapon\", \"鎬\", \"weapon\", \"鎬\", \"Equip\"),\r\n\t\"0152\": new ItemCategoryInfo(\"0152\", \"Weapon\", \"雙弩槍\", \"weapon\", \"雙弩槍\", \"Equip\"),\r\n\t\"0153\": new ItemCategoryInfo(\"0153\", \"Weapon\", \"加農砲\", \"weapon\", \"加農砲\", \"Equip\"),\r\n\t\"0154\": new ItemCategoryInfo(\"0154\", \"Weapon\", \"太刀\", \"weapon\", \"太刀\", \"Equip\"),\r\n\t\"0155\": new ItemCategoryInfo(\"0155\", \"Weapon\", \"扇子\", \"weapon\", \"扇子\", \"Equip\"),\r\n\t\"0156\": new ItemCategoryInfo(\"0156\", \"Weapon\", \"琉\", \"weapon\", \"琉\", \"Equip\"),\r\n\t\"0157\": new ItemCategoryInfo(\"0157\", \"Weapon\", \"璃\", \"weapon\", \"璃\", \"Equip\"),\r\n\t\"0158\": new ItemCategoryInfo(\"0158\", \"Weapon\", \"重拳槍\", \"weapon\", \"重拳槍\", \"Equip\"),\r\n\t\"0170\": new ItemCategoryInfo(\"0170\", \"Weapon\", \"0170\", \"weapon\", \"點裝武器\", \"Equip\"),\r\n\t\"019\": new ItemCategoryInfo(\"019\", \"TamingMob\", \"TamingMob\", \"tamingMob\", \"騎寵\", \"Equip\", \"Taming/\"),\r\n\r\n\t\"0301\": new ItemCategoryInfo(\"0301\", \"Install\", \"Chair\", \"install\", \"椅子\", \"Item\"),\r\n};\r\n\r\nItemCategoryInfo._categoryList = (function (info_map) {\r\n\tlet list = [];\r\n\tlet set = new Set();\r\n\tfor (let i in info_map) {\r\n\t\tlet cat = info_map[i];\r\n\t\tlet key = cat.categoryName || cat.listPath;\r\n\r\n\t\tif (!set.has(key)) {\r\n\t\t\tset.add(key);\r\n\r\n\t\t\tlist.push({\r\n\t\t\t\tkey: key,\r\n\t\t\t\tvalue: i,\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\treturn list;\r\n})(ItemCategoryInfo._info);\r\n\r\nclass ResourceManager {\r\n\tstatic isEquipExist(id, cateInfo) {\r\n\t\tconst dp = cateInfo.listPath;\r\n\t\tconst es = ResourceManager.equip_map[dp];\r\n\t\treturn !es || es.has(id);\r\n\t}\r\n\t\r\n\t/**\r\n\t * @param {string} url\r\n\t */\r\n\tstatic async loadArchive(url) {\r\n\t\t$setValue($archive, \"/\", JSON.parse(await ResourceManager.get(url)));\r\n\t}\r\n\t\r\n\t/**\r\n\t * @param {string} url\r\n\t */\r\n\tstatic get(url) {\r\n\t\treturn new Promise(function (resolve, reject) {\r\n\t\t\tlet xhr = new XMLHttpRequest();\r\n\t\t\txhr.open(\"GET\", url, true);\r\n\r\n\t\t\txhr.timeout = 10 * 60 * 1000;//20000;\r\n\r\n\t\t\txhr.onload = function () {\r\n\t\t\t\tif (this.status == 404 || this.status == 500) {\r\n\t\t\t\t\t$failed_urls.push(url);\r\n\t\t\t\t\tdebugger;\r\n\t\t\t\t\t//resolve(null);\r\n\t\t\t\t\treject(this.status + \": \" + url);\r\n\t\t\t\t}\r\n\t\t\t\telse if (this.status == 200) {\r\n\t\t\t\t\tresolve(this.responseText);\r\n\t\t\t\t}\r\n\t\t\t\telse if (this.status == 304) {\r\n\t\t\t\t\tdebugger\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\txhr.ontimeout = function (e) {\r\n\t\t\t\tdebugger;\r\n\t\t\t\t// XMLHttpRequest 超时。在此做某事。\r\n\t\t\t\t//resolve(null);\r\n\t\t\t\treject(\"timeout: \" + url);\r\n\t\t\t};\r\n\r\n\t\t\txhr.onabort = function (e) {\r\n\t\t\t\treject(\"abort: \" + url);\r\n\t\t\t};\r\n\r\n\t\t\txhr.send();\r\n\t\t});\r\n\t}\r\n\r\n\tstatic get root_path() {\r\n\t\treturn window.$ROOT_PATH;\r\n\t}\r\n\r\n\tstatic get archive() {\r\n\t\treturn $archive;\r\n\t}\r\n\r\n\tstatic get failed_urls() {\r\n\t\treturn $failed_urls;\r\n\t}\r\n}\r\nwindow.$ResourceManager = ResourceManager;\r\n\r\n/**\r\n * @param {{}} obj\r\n * @param {string} path\r\n * @param {any} value\r\n */\r\nfunction $setValue(obj, path, value) {\r\n\tif (path.endsWith(\"/\")) {\r\n\t\tpath = path.slice(0, path.length - 1);\r\n\t}\r\n\tlet ps = path.split(\"/\");\r\n\tlet i, target = obj, lastIndex = ps.length - 1;\r\n\tfor (i = 0; i < lastIndex; ++i) {\r\n\t\tlet key = ps[i];\r\n\t\tif (target[key] == null) {\r\n\t\t\ttarget[key] = {};\r\n\t\t}\r\n\t\ttarget = target[key];\r\n\t}\r\n\tlet origin_value = target[ps[lastIndex]];\r\n\tif (origin_value instanceof Promise) {\r\n\t\tdelete target[ps[lastIndex]];\r\n\t\ttarget[ps[lastIndex]] = value;\r\n\t}\r\n\telse if (origin_value && typeof origin_value == \"object\") {\r\n\t\t//if (value instanceof Promise) {\r\n\t\t//\tdebugger;\r\n\t\t//}\r\n\t\t//else {\r\n\t\t\tfor (let key in value) {\r\n\t\t\t\torigin_value[key] = value[key] || origin_value[key];\r\n\t\t\t}\r\n\t\t//}\r\n\t}\r\n\telse if (typeof value != \"undefined\") {\r\n\t\ttarget[ps[lastIndex]] = value;\r\n\t}\r\n}\r\nfunction $getValue(obj, path) {\r\n\tif (path.endsWith(\"/\")) {\r\n\t\tpath = path.slice(0, path.length - 1);\r\n\t}\r\n\tlet ps = path.split(\"/\");\r\n\tlet i, target = obj, lastIndex = ps.length - 1;\r\n\tfor (i = 0; i < lastIndex; ++i) {\r\n\t\tlet key = ps[i];\r\n\t\tif (target[key]) {\r\n\t\t\t\ttarget = target[key];\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn undefined;\r\n\t\t}\r\n\t}\r\n\treturn target[ps[lastIndex]];\r\n}\r\n\r\nconst symbol_isPack = Symbol(\"$pack\");\r\n\r\nconst url_startsWith_protocol = RegExp.prototype.test.bind(/^(([a-zA-Z^\\:]+)(\\:.*)$|\\/\\/)/);\r\nfunction _setValueByPath(path, value, is_pack) {\r\n\tif (url_startsWith_protocol(path)) {\r\n\t\treturn;\r\n\t}\r\n\telse if (window.$ROOT_PATH != \"\" && path.startsWith(window.$ROOT_PATH)) {\r\n\t\tif (is_pack) {\r\n\t\t\tvalue[symbol_isPack] = true;\r\n\t\t}\r\n\t\tpath = path.slice(window.$ROOT_PATH.length);\r\n\t\treturn $setValue($archive, path, value);\r\n\t}\r\n\telse {\r\n\t\treturn $setValue($archive, path, value);\r\n\t}\r\n}\r\nfunction _getValueFromArchiveByPath(path, value) {\r\n\tlet _path = _getDataPathByUrl(path);\r\n\tif (_path) {\r\n\t\treturn $getValue($archive, _path);\r\n\t}\r\n\treturn undefined;\r\n}\r\nfunction _getDataPathByUrl(path) {\r\n\tif (!url_startsWith_protocol(path)) {\r\n\t\tif (window.$ROOT_PATH != \"\" && path.startsWith(window.$ROOT_PATH)) {\r\n\t\t\treturn path.slice(window.$ROOT_PATH.length);\r\n\t\t}\r\n\t}\r\n\treturn undefined;\r\n}\r\n\r\n/**\r\n * @returns {Promise<any>|any}\r\n */\r\nfunction $getValueAsync(obj, path) {\r\n\tif (path.endsWith(\"/\")) {\r\n\t\tpath = path.slice(0, path.length - 1);\r\n\t}\r\n\t\r\n\t// try get value sync\r\n\tlet value = $getValue(obj, path);\r\n\t\r\n\t// if value exist\r\n\tif (value) {\r\n\t\tif (value instanceof Promise) {\r\n\t\t\t// ??\r\n\t\t\treturn new Promise(async function (resolve, reject) {\r\n\t\t\t\tawait value;\r\n\t\t\t\tresolve(await $getValueAsync(obj, path));\r\n\t\t\t});\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn value;\r\n\t\t}\r\n\t}\r\n\telse {// if value not exist, try await parent node\r\n\t\tlet ps = path.split(\"/\");\r\n\t\tlet i, target = obj, lastIndex = ps.length - 1;\r\n\t\tfor (i = 0; i < lastIndex; ++i) {\r\n\t\t\tlet key = ps[i];\r\n\t\t\tif (target[key] instanceof Promise) {\r\n\t\t\t\treturn new Promise(async function (resolve, reject) {\r\n\t\t\t\t\tawait target[key];\r\n\t\t\t\t\tresolve(await $getValueAsync(obj, path));\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif (target[key]) {\r\n\t\t\t\t\ttarget = target[key];\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn undefined;\r\n\t\t\t}\r\n\t\t}\r\n\t\tlet result = target[ps[lastIndex]];\r\n\t\tif (result instanceof Promise) {\r\n\t\t\treturn new Promise(async function (resolve, reject) {\r\n\t\t\t\tawait result;\r\n\t\t\t\tresolve(await $getValueAsync(obj, path));\r\n\t\t\t});\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn result;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n/**\r\n * @param {string} url\r\n * @returns {Promise<any>}\r\n */\r\nlet $get = function $get(url) {\r\n\treturn ResourceManager.get(url);\r\n}\r\n/**\r\n * @param {string} path\r\n * @returns {Promise<any>}\r\n */\r\n$get.pack = async function $get_pack(path) {\r\n\tlet _path = _getDataPathByUrl(path);\r\n\tlet obj;\r\n\r\n\tif (_path) {\r\n\t\tobj = $getValueAsync($archive, _path);\r\n\t}\r\n\r\n\tif (obj instanceof Promise) {\r\n\t\treturn await obj;\r\n\t}\r\n\telse if (obj && obj[symbol_isPack]) {\r\n\t\treturn obj;\r\n\t}\r\n\telse {\r\n\t\tif (true) {\r\n\t\t\tif (obj && !obj[symbol_isPack]) {\r\n\t\t\t\tthrow new TypeError(\"data: \" + path);\r\n\t\t\t}\r\n\t\t}\r\n\t\tconst url = $get.packUrl(path);\r\n\r\n\t\tlet task = (async function () {\r\n\t\t\tlet jsonText = await ResourceManager.get(url);\r\n\r\n\t\t\tobj = JSON.parse(jsonText);\r\n\r\n\t\t\t_setValueByPath(path, obj, true);\r\n\r\n\t\t\treturn obj;\r\n\t\t})();\r\n\t\t_setValueByPath(path, task, true);\r\n\r\n\t\treturn await task;\r\n\t}\r\n}\r\n/**\r\n * @param {string} path\r\n * @returns {Promise<any>}\r\n */\r\n$get.packSync = function get_packSync(path) {\r\n\tlet obj = _getValueFromArchiveByPath(path);\r\n\tif (obj) {\r\n\t\treturn obj;\r\n\t}\r\n\treturn undefined;\r\n}\r\n/**\r\n * @param {string} path\r\n * @returns {Promise<any>}\r\n */\r\n$get.data = async function $get_data(path) {\r\n\tlet _path = _getDataPathByUrl(path);\r\n\tlet obj;\r\n\r\n\tif (_path) {\r\n\t\tobj = $getValueAsync($archive, _path);\r\n\t}\r\n\r\n\tif (obj instanceof Promise) {\r\n\t\treturn await obj;\r\n\t}\r\n\telse if (obj) {\r\n\t\treturn obj;\r\n\t}\r\n\telse {\r\n\t\tconst url = $get.dataUrl(path);\r\n\r\n\t\tlet task = (async function () {\r\n\t\t\tlet jsonText = await ResourceManager.get(url);\r\n\r\n\t\t\tobj = JSON.parse(jsonText);\r\n\r\n\t\t\t_setValueByPath(path, obj, false);\r\n\r\n\t\t\treturn obj;\r\n\t\t})();\r\n\t\t_setValueByPath(path, task, false);\r\n\r\n\t\treturn await task;\r\n\t}\r\n}\r\n/**\r\n * @param {string} path\r\n * @returns {any}\r\n */\r\n$get.dataSync = function get_dataSync(path) {\r\n\tlet obj = _getValueFromArchiveByPath(path);\r\n\tif (obj) {\r\n\t\treturn obj;\r\n\t}\r\n\treturn undefined;\r\n}\r\n/**\r\n * @param {string} path\r\n * @returns {Promise<any>}\r\n */\r\n$get.list = async function $get_list(path) {\r\n\tlet _path = _getDataPathByUrl(path);\r\n\tlet obj;\r\n\r\n\tif (_path) {\r\n\t\tobj = $getValueAsync($archive, _path);\r\n\t}\r\n\r\n\tif (obj instanceof Promise) {\r\n\t\treturn await obj;\r\n\t}\r\n\telse if (obj) {\r\n\t\treturn obj;\r\n\t}\r\n\telse {\r\n\t\tconst url = $get.listUrl(path);\r\n\r\n\t\tlet task = (async function () {\r\n\t\t\tlet jsonText = await ResourceManager.get(url);\r\n\r\n\t\t\tobj = JSON.parse(jsonText);\r\n\r\n\t\t\t_setValueByPath(path, obj, false);\r\n\r\n\t\t\treturn obj;\r\n\t\t})();\r\n\t\t_setValueByPath(path, task, false);\r\n\r\n\t\treturn await task;\r\n\t}\r\n}\r\n/**\r\n * @param {string} path\r\n * @returns {Promise<any>}\r\n */\r\n$get.listSync = function $get_listSync(path) {\r\n\tlet obj = _getValueFromArchiveByPath(path);\r\n\tif (obj) {\r\n\t\treturn Object.keys(obj);\r\n\t}\r\n\treturn undefined;\r\n}\r\n\r\n/**\r\n * @param {string} path\r\n * @returns {string}\r\n */\r\n$get.dataUrl = function $get_dataUrl(path) {\r\n\tif (url_startsWith_protocol(path)) {\r\n\t\treturn path;\r\n\t}\r\n\telse if (!path.startsWith(\"data\")) {\r\n\t\treturn `${window.$ROOT_PATH}data${path}.json`;\r\n\t}\r\n\tthrow new Error(\"Not game data: \" + path);\r\n}\r\n/**\r\n * @param {string} path\r\n * @returns {string}\r\n */\r\n$get.packUrl = function $get_packUrl(path) {\r\n\tif (url_startsWith_protocol(path)) {\r\n\t\treturn path;\r\n\t}\r\n\telse if (!path.startsWith(\"pack\")) {\r\n\t\treturn `${window.$ROOT_PATH}pack${path}.json`;\r\n\t}\r\n\tthrow new Error(\"Not game pack: \" + path);\r\n}\r\n$get.listUrl = function $get_listUrl(path) {\r\n\tif (url_startsWith_protocol(path)) {\r\n\t\treturn path;\r\n\t}\r\n\telse if (!path.startsWith(\"ls\")) {\r\n\t\treturn `${window.$ROOT_PATH}ls${path}.json`;\r\n\t}\r\n\tthrow new Error(path);\r\n}\r\n/**\r\n * @param {string} path\r\n * @returns {string}\r\n */\r\n$get.imageUrl = function $get_imagesUrl(path) {\r\n\tif (url_startsWith_protocol(path)) {\r\n\t\treturn path;\r\n\t}\r\n\telse if (!path.startsWith(\"images\")) {\r\n\t\treturn `${window.$ROOT_PATH}images${path}.png`;\r\n\t}\r\n\tthrow new Error(\"Not game images: \" + path);\r\n}\r\n/**\r\n * @param {string} path\r\n * @returns {string}\r\n */\r\n$get.soundMp3Url = function $get_soundMp3Url(path) {\r\n\tif (url_startsWith_protocol(path)) {\r\n\t\treturn path;\r\n\t}\r\n\telse if (!path.startsWith(\"sound\")) {\r\n\t\treturn `${window.$ROOT_PATH}sound${path}.mp3`;\r\n\t}\r\n\tthrow new Error(\"Not game sound: \" + path);\r\n}\r\n/**\r\n * @param {string} path\r\n * @returns {string}\r\n */\r\n$get.soundWavUrl = function $get_soundWavUrl(path) {\r\n\tif (url_startsWith_protocol(path)) {\r\n\t\treturn path;\r\n\t}\r\n\telse if (!path.startsWith(\"sound\")) {\r\n\t\treturn `${window.$ROOT_PATH}sound${path}.wav`;\r\n\t}\r\n\tthrow new Error(\"Not game sound: \" + path);\r\n}\r\n\r\n/**\r\n * @param {string} path\r\n * @returns {string}\r\n */\r\n$get.assetUrl = function $get_assetUrl(path) {\r\n\treturn `${window.$ROOT_PATH}${path}`;\r\n}\r\n$get.asset = function $get_asset(path) {\r\n\treturn $get($get.assetUrl(path));\r\n}\r\n\r\nwindow.$get = $get;\r\n\r\n\r\nclass ItemAttrNormalize {\r\n\tstatic head(item) {\r\n\t\titem.gender = 2;\r\n\t}\r\n\tstatic body(item) {\r\n\t\titem.gender = 2;\r\n\t}\r\n\tstatic Face(item) {\r\n\t\tconst g = Math.trunc((item.id % 10000) / 1000);\r\n\t\titem.gender = g == 1 || g == 4 ? 1 : 0;\r\n\t}\r\n\tstatic Hair(item) {\r\n\t\tconst g = Math.trunc((item.id % 10000) / 1000);\r\n\t\titem.gender = g == 1 || g == 2 || g == 4 || g == 7 ? 1 : 0;\r\n\t}\r\n\tstatic Cap(item) {\r\n\t\tItemAttrNormalize._equip(item);\r\n\t}\r\n\tstatic accessoryFace(item) {\r\n\t\tItemAttrNormalize._equip(item);\r\n\t}\r\n\tstatic accessoryEyes(item) {\r\n\t\tItemAttrNormalize._equip(item);\r\n\t}\r\n\tstatic accessoryEars(item) {\r\n\t\tItemAttrNormalize._equip(item);\r\n\t}\r\n\tstatic Coat(item) {\r\n\t\tItemAttrNormalize._equip(item);\r\n\t}\r\n\tstatic Longcoat(item) {\r\n\t\tItemAttrNormalize._equip(item);\r\n\t}\r\n\tstatic Pants(item) {\r\n\t\tItemAttrNormalize._equip(item);\r\n\t}\r\n\tstatic Shoes(item) {\r\n\t\tItemAttrNormalize._equip(item);\r\n\t}\r\n\tstatic Glove(item) {\r\n\t\tItemAttrNormalize._equip(item);\r\n\t}\r\n\tstatic Shield(item) {\r\n\t\tItemAttrNormalize._equip(item);\r\n\t}\r\n\tstatic Cape(item) {\r\n\t\tItemAttrNormalize._equip(item);\r\n\t}\r\n\tstatic _equip(item) {\r\n\t\tconst g = Math.trunc((item.id % 10000) / 1000);\r\n\t\titem.gender = g == 0 ? 0 : (g == 1 ? 1 : 2);\r\n\t}\r\n}\r\n\r\nconst regexp_getHairStyleID = /(\\d{4,7})\\d$/;\r\nconst regexp_getFaceStyleID = /(\\d{2,5})\\d(\\d{2})$/;\r\n\r\nconst regexp_getHairColor = /\\d{4,7}(\\d)$/;\r\nconst regexp_getFaceColor = /\\d{2,5}(\\d)\\d{2}$/;\r\n\r\nclass CharacterRenderConfig {\r\n\t/**\r\n\t * @param {string} style id\r\n\t * @returns {string[]}\r\n\t */\r\n\tstatic * enumHairColor(style) {\r\n\t\tlet m = style.match(regexp_getHairStyleID);\r\n\t\tfor (let i = 0; i < 10; ++i) {\r\n\t\t\tlet id = m[1] + i;\r\n\t\t\tyield id;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string} style id\r\n\t * @returns {string[]}\r\n\t */\r\n\tstatic * enumFaceColor(style) {\r\n\t\tlet m = style.match(regexp_getFaceStyleID);\r\n\t\tfor (let i = 0; i < 10; ++i) {\r\n\t\t\tlet id = m[1] + i + m[2];\r\n\t\t\tyield id;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string} style\r\n\t * @param {number} color\r\n\t * @returns {string}\r\n\t */\r\n\tstatic getColorHairID(style, color) {\r\n\t\tlet m = style.match(regexp_getHairStyleID);\r\n\t\tlet id = m[1] + (color % 10);\r\n\t\treturn id;\r\n\t}\r\n\t/**\r\n\t * @param {string} style\r\n\t * @param {number} color\r\n\t * @returns {string}\r\n\t */\r\n\tstatic getColorFaceID(style, color) {\r\n\t\tlet m = style.match(regexp_getFaceStyleID);\r\n\t\tlet id = m[1] + (color % 10) + m[2];\r\n\t\treturn id;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string} id_1\r\n\t * @param {string} id_2\r\n\t * @returns {boolean}\r\n\t */\r\n\tstatic isHairStyleEqual(id_1, id_2) {\r\n\t\treturn CharacterRenderConfig.getColorHairID(id_1, 0) == CharacterRenderConfig.getColorHairID(id_2, 0);\r\n\t}\r\n\t/**\r\n\t * @param {string} id_1\r\n\t * @param {string} id_2\r\n\t * @returns {boolean}\r\n\t */\r\n\tstatic isFaceStyleEqual(id_1, id_2) {\r\n\t\treturn CharacterRenderConfig.getColorFaceID(id_1, 0) == CharacterRenderConfig.getColorFaceID(id_2, 0);\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string} id\r\n\t * @returns {string}\r\n\t */\r\n\tstatic getHairColor(id) {\r\n\t\tif (id) {\r\n\t\t\tid = String(id);\r\n\t\t\tlet m = id.match(regexp_getHairColor);\r\n\t\t\tif (m) {\r\n\t\t\t\treturn m[1];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string} id\r\n\t * @returns {string}\r\n\t */\r\n\tstatic getFaceColor(id) {\r\n\t\tif (id) {\r\n\t\t\tid = String(id);\r\n\t\t\tlet m = id.match(regexp_getFaceColor);\r\n\t\t\tif (m) {\r\n\t\t\t\treturn m[1];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nvar _external_data = {\r\n\t\"requiredJobs\": [\r\n\t\t\"Beginner\"\r\n\t],\r\n\t\"requiredLevel\": 0,\r\n\t\"isCash\": true,\r\n\t\"name\": \"Blue Beanie\",\r\n\t\"desc\": null,\r\n\t\"id\": 1000000,\r\n\t\"requiredGender\": 0,\r\n\t\"typeInfo\": {\r\n\t\t\"overallCategory\": \"Equip\",\r\n\t\t\"category\": \"Armor\",\r\n\t\t\"subCategory\": \"Hat\"\r\n\t}\r\n};\r\n\r\nvar ItemTypeInfo = {\r\n\t\"Equip\": {\r\n\t\t\"Hat\": \"Cap\",\r\n\t\t\"Cape\": \"Cape\",\r\n\t\t\"Top\": \"Coat\",\r\n\t\t\"Overall\": \"Longcoat\",\r\n\t\t\"Glove\": \"Glove\",\r\n\t\t\"Bottom\": \"Pants\",\r\n\r\n\t\t\"Shield\": \"Shield\",\r\n\t\t\"Shoes\": \"Shoes\",\r\n\t\t\"Eye Decoration\": \"accessoryEyes\",\r\n\t\t\"Earrings\": \"accessoryEars\",\r\n\t\t//\"Ring\": \"\",\r\n\r\n\t\t//\"Pendant\": \"\",\r\n\t\t\"Face Accessory\": \"accessoryFace\",\r\n\t\t//\"Belt\": \"\",\r\n\t\t//\"Medal\": \"\",\r\n\t\t//\"Shoulder Accessory\": \"\",\r\n\t\t//\"Badge\": \"\",\r\n\r\n\t\t//\"Dragon Equipment\": \"\",\r\n\t\t//\"Mechanic Equipment\": \"\",\r\n\t\t//\"Pet Equipment\": \"\",\r\n\t\t//\"Android\": \"\",\r\n\t\t//\"Mechanical Heart\": \"\",\r\n\t\t//\"Bits\": \"\",\r\n\r\n\t\t\"Face\": \"Face\",\r\n\t\t\"Hair\": \"Hair\",\r\n\t},\r\n};\r\n\r\nResourceManager.external = {\r\n\tequip: {\r\n\t},\r\n};\r\n\r\nResourceManager.equip_map = {\r\n};\r\n\r\nfor (let i in ItemTypeInfo.Equip) {\r\n\tlet cate = ItemTypeInfo.Equip[i];\r\n\r\n\tResourceManager.external.equip[cate] = [];\r\n\tResourceManager.equip_map[cate] = null;\r\n}\r\nfor (let i = 0; i < 9; ++i) {\r\n\tlet cate = \"Face\" + i;\r\n\tResourceManager.external.equip[cate] = [];\r\n\tResourceManager.equip_map[cate] = null;\r\n}\r\nfor (let i = 0; i < 8; ++i) {\r\n\tlet cate = \"Hair\" + i;\r\n\tResourceManager.external.equip[cate] = [];\r\n\tResourceManager.equip_map[cate] = null;\r\n}\r\n\r\nasync function load_external_resource(url) {\r\n\turl = url || \"/items.json\";\r\n\tlet raw;\r\n\r\n\ttry {\r\n\t\traw = ResourceManager._external_raw = JSON.parse(await $get.asset(\"equip.json\"));\r\n\t\tif (!raw) {\r\n\t\t\tdebugger;\r\n\t\t\tthrow Error(\"'/equip' is empty\");\r\n\t\t}\r\n\t}\r\n\tcatch (ex) {\r\n\t\traw = ResourceManager._external_raw = JSON.parse(await $get(\"//labs.maplestory.io/api/gms/latest/item/category/equip\"));\r\n\t\tif (!raw) {\r\n\t\t\tdebugger;\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\t\r\n\tfor (let i = 0; i < raw.length; ++i) {\r\n\t\tconst item = raw[i];\r\n\t\tconst id = String(item.id).padStart(8, \"0\");\r\n\t\t\r\n\t\ttry {\r\n\t\t\tif (!(item.typeInfo && ItemTypeInfo[item.typeInfo.overallCategory])) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tlet clz = item.typeInfo.overallCategory.toLowerCase();\r\n\t\t\tlet cate = ItemTypeInfo[item.typeInfo.overallCategory][item.typeInfo.subCategory];\r\n\t\t\tif (!cate) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\telse if (cate == \"Face\") {\r\n\t\t\t\tcate += CharacterRenderConfig.getFaceColor(id);\r\n\t\t\t}\r\n\t\t\telse if (cate == \"Hair\") {\r\n\t\t\t\tcate += CharacterRenderConfig.getHairColor(id);\r\n\t\t\t}\r\n\r\n\t\t\tlet it = {\r\n\t\t\t\tid: id,\r\n\t\t\t\tname: item.name,\r\n\t\t\t\tdesc: item.desc,\r\n\t\t\t\tcash: item.isCash ? 1 : 0,\r\n\t\t\t\ticon: {\r\n\t\t\t\t\t\"\": `//labs.maplestory.io/api/gms/latest/item/${item.id}/icon`,\r\n\t\t\t\t},\r\n\t\t\t};\r\n\r\n\t\t\tResourceManager.external[clz][cate].push(it);\r\n\t\t}\r\n\t\tcatch (ex) {\r\n\t\t\tconsole.error(\"external resource: id(\" + id + \")\");\r\n\t\t\tconsole.error(ex);\r\n\t\t\tdebugger;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction update_external_equip_list() {\r\n\tconst url = \"https://labs.maplestory.io/api/gms/latest/item/category/equip\";\r\n\tload_external_resource(url).then(() => {\r\n\t\t_concat_external_resource(category, origin_data);\r\n\t\tconcat_external_resource = _concat_external_resource;\r\n\t\tconsole.log(\"done: update_external_equip_list\");\r\n\t});\r\n}\r\n\r\nlet external_resource_promise = load_external_resource();\r\n\r\nwindow.concat_external_resource = _concat_external_resource_p;\r\n\r\nwindow.trigger_update_external_equip_list = function () {\r\n\texternal_resource_promise = load_external_resource();\r\n\twindow.concat_external_resource = _concat_external_resource_p;\r\n}\r\n\r\nasync function _concat_external_resource_p(category, origin_data) {\r\n\tawait external_resource_promise;\r\n\t_concat_external_resource(category, origin_data);\r\n\tconcat_external_resource = _concat_external_resource;\r\n}\r\n\r\nfunction _concat_external_resource(category, origin_data) {\r\n\ttry {\r\n\t\tconst list = ResourceManager.external.equip[category];\r\n\t\tif (!list) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet id_map = ResourceManager.equip_map[category];\r\n\r\n\t\tif (!id_map) {\r\n\t\t\tid_map = new Map();\r\n\t\t\t\r\n\t\t\torigin_data.forEach(item => {\r\n\t\t\t\tid_map.set(item.id, item);\r\n\t\t\t});\r\n\r\n\t\t\tResourceManager.equip_map[category] = id_map;\r\n\t\t}\r\n\r\n\t\tlist.forEach((item) => {\r\n\t\t\tlet id = item.id;\r\n\t\t\tif (!id_map.has(id)) {\r\n\t\t\t\titem.$foreign = true;\r\n\t\t\t\torigin_data.push(item);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tlet ori_item = id_map.get(id);\r\n\t\t\t\tori_item._name = item.name || \"\";\r\n\t\t\t\tori_item._desc = item.desc || \"\";\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\tcatch (ex) {\r\n\t\tconsole.error(ex);\r\n\t\tdebugger;\r\n\t}\r\n}\r\n\r\nwindow.load_extern_item_data = async function (id) {\r\n\tlet _raw = JSON.parse(await $get(`//labs.maplestory.io/api/gms/latest/item/${id}`));\r\n\tlet raw = {};\r\n\r\n\tlet default_ = _raw.frameBooks.default ? _raw.frameBooks.default.frames[0]:null;\r\n\r\n\tfor (let i in _raw.frameBooks) {\r\n\t\tlet _act = _raw.frameBooks[i];\r\n\t\tlet act = [];\r\n\r\n\t\tfor (let j = 0; j < _act.frames.length; ++j) {\r\n\t\t\tlet frame = _act.frames[j] || default_;\r\n\t\t\tif (!frame || !frame.effects) {\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\tlet _frags = frame.effects;\r\n\t\t\tlet frags = {};\r\n\t\t\tfor (let k in _frags) {\r\n\t\t\t\tlet _frag = _frags[k];\r\n\t\t\t\tif (_frag.image) {\r\n\t\t\t\t\tfrags[k] = {\r\n\t\t\t\t\t\t\"\": \"data:image/png;base64,\" + _frag.image,\r\n\t\t\t\t\t\t\"origin\": _frag.originOrZero || _frag.origin || _frag.center,\r\n\t\t\t\t\t\t\"map\": _frag.mapOffset,\r\n\t\t\t\t\t\t\"z\": _frag.position\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tact[j] = frags;\r\n\t\t}\r\n\r\n\t\traw[i] = act;\r\n\t}\r\n\r\n\traw.info = {\r\n\t\tislot: _raw.metaInfo.equip.islot,\r\n\t\tvslot: _raw.metaInfo.equip.vslot,\r\n\t\ticon: _raw.metaInfo.icon ? (\"data:image/png;base64,\" + _raw.metaInfo.icon.iconRaw) : \"\",\r\n\t\tcash: (_raw.metaInfo.cash && _raw.metaInfo.cash.cash) ? 1 : 0,\r\n\t};\r\n\r\n\treturn raw;\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wdWJsaWMvamF2YXNjcmlwdHMvcmVzb3VyY2UuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9wdWJsaWMvamF2YXNjcmlwdHMvcmVzb3VyY2UuanM/MjNmZSJdLCJzb3VyY2VzQ29udGVudCI6WyLvu79cclxuY29uc3QgJGZhaWxlZF91cmxzID0gW107XHJcblxyXG5jb25zdCAkYXJjaGl2ZSA9IHt9O1xyXG5cclxuXHJcbndpbmRvdy5jaGFyYWN0ZXJfZW1vdGlvbl9saXN0ID0gW1wiYmxpbmtcIiwgXCJoaXRcIiwgXCJzbWlsZVwiLCBcInRyb3VibGVkXCIsIFwiY3J5XCIsIFwiYW5ncnlcIiwgXCJiZXdpbGRlcmVkXCIsIFwic3R1bm5lZFwiLFxyXG5cdFwidm9taXRcIiwgXCJvb3BzXCIsIFwiY2hlZXJzXCIsIFwiY2h1XCIsIFwid2lua1wiLCBcInBhaW5cIiwgXCJnbGl0dGVyXCIsIFwiZGVzcGFpclwiLCBcImxvdmVcIiwgXCJzaGluZVwiLCBcImJsYXplXCIsIFwiaHVtXCIsXHJcblx0XCJib3dpbmdcIiwgXCJob3RcIiwgXCJkYW1cIiwgXCJxQmx1ZVwiXTtcclxuXHJcbndpbmRvdy5jaGFyYWN0ZXJfYWN0aW9uX2xpc3QgPSBbXCJ3YWxrMVwiLCBcIndhbGsyXCIsIFwic3RhbmQxXCIsIFwic3RhbmQyXCIsIFwiYWxlcnRcIiwgXCJzd2luZ08xXCIsIFwic3dpbmdPMlwiLCBcInN3aW5nTzNcIiwgXCJzd2luZ09GXCIsIFwic3dpbmdUMVwiLFxyXG5cdFwic3dpbmdUMlwiLCBcInN3aW5nVDNcIiwgXCJzd2luZ1RGXCIsIFwic3dpbmdQMVwiLCBcInN3aW5nUDJcIiwgXCJzd2luZ1BGXCIsIFwic3RhYk8xXCIsIFwic3RhYk8yXCIsIFwic3RhYk9GXCIsIFwic3RhYlQxXCIsXHJcblx0XCJzdGFiVDJcIiwgXCJzdGFiVEZcIiwgXCJzaG9vdDFcIiwgXCJzaG9vdDJcIiwgXCJzaG9vdEZcIiwgXCJwcm9uZVN0YWJcIiwgXCJwcm9uZVwiLCBcImhlYWxcIiwgXCJmbHlcIiwgXCJqdW1wXCIsIFwic2l0XCIsIFwibGFkZGVyXCIsXHJcblx0XCJyb3BlXCIvKiwgXCJkZWFkXCIsIFwiZ2hvc3R3YWxrXCIsIFwiZ2hvc3RzdGFuZFwiLCBcImdob3N0anVtcFwiLCBcImdob3N0cHJvbmVTdGFiXCIsIFwiZ2hvc3RsYWRkZXJcIiwgXCJnaG9zdHJvcGVcIiwgXCJnaG9zdGZseVwiLFxyXG5cdFx0XCJnaG9zdHNpdFwiKi9dO1xyXG5cclxuZXhwb3J0IGNsYXNzIEl0ZW1DYXRlZ29yeUluZm8ge1xyXG5cdC8qKlxyXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBpZF9wcmVmaXhcclxuXHQgKiBAcGFyYW0ge3N0cmluZ30gcGF0aFxyXG5cdCAqIEBwYXJhbSB7Ym9vbGVhbn0gaXNPbkZhY2VcclxuXHQgKiBAcGFyYW0ge3N0cmluZ30gc2xvdCAtIHByb3BlcnR5IG5hbWVcclxuXHQgKiBAcGFyYW0ge3N0cmluZ30gY2F0ZWdvcnlOYW1lXHJcblx0ICogQHBhcmFtIHtzdHJpbmd9IHR5cGVcclxuXHQgKiBAcGFyYW0ge3N0cmluZ30gW3N0cmluZ1BhdGhdXHJcblx0ICovXHJcblx0Y29uc3RydWN0b3IoaWRfcHJlZml4LCBpbWdEaXIsIGxpc3RQYXRoLCBzbG90LCBjYXRlZ29yeU5hbWUsIHR5cGUsIHN0cmluZ1BhdGgpIHtcclxuXHRcdHRoaXMuaWRfcHJlZml4ID0gaWRfcHJlZml4O1xyXG5cclxuXHRcdC8qKiBkYXRhIHBhdGggKi9cclxuXHRcdHRoaXMucGF0aCA9IGltZ0RpcjtcclxuXHJcblx0XHQvKiogZXF1aXAgd2luZG93ICovXHJcblx0XHR0aGlzLnNsb3QgPSBzbG90O1xyXG5cclxuXHRcdC8qKiBpdGVtIGxpc3QgZmlsZSBuYW1lICovXHJcblx0XHR0aGlzLmxpc3RQYXRoID0gbGlzdFBhdGg7XHJcblxyXG5cdFx0LyoqIGRpc3BsYXkgY2F0ZWdvcnkgbmFtZSAqL1xyXG5cdFx0dGhpcy5jYXRlZ29yeU5hbWUgPSBjYXRlZ29yeU5hbWU7XHJcblxyXG5cdFx0LyoqIHJlbmRlcmVyICovXHJcblx0XHR0aGlzLkZyYWdtZW50VHlwZSA9IG51bGw7XHJcblxyXG5cdFx0LyoqIEB0eXBlIHtzdHJpbmd9ICovXHJcblx0XHR0aGlzLmRhdGFEaXIgPSBudWxsO1xyXG5cdFx0LyoqIEB0eXBlIHtzdHJpbmd9ICovXHJcblx0XHR0aGlzLnN0cmluZ0RpciA9IG51bGw7XHJcblx0XHQvKiogQHR5cGUge3N0cmluZ30gKi9cclxuXHRcdHRoaXMuaWNvblBhdGggPSBudWxsO1xyXG5cdFx0LyoqIEB0eXBlIHtzdHJpbmd9ICovXHJcblx0XHR0aGlzLmljb25SYXdQYXRoID0gbnVsbDtcclxuXHRcdHtcclxuXHRcdFx0bGV0IGRhdGFEaXIsIHN0cmluZ0RpciwgaWNvblBhdGgsIGljb25SYXdQYXRoO1xyXG5cclxuXHRcdFx0c3dpdGNoIChzbG90KSB7XHJcblx0XHRcdFx0Y2FzZSBcImhlYWRcIjpcclxuXHRcdFx0XHRcdGljb25QYXRoID0gXCJzdGFuZDEvMC9oZWFkXCI7XHJcblx0XHRcdFx0XHRpY29uUmF3UGF0aCA9IFwic3RhbmQxLzAvaGVhZFwiO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0Y2FzZSBcImJvZHlcIjpcclxuXHRcdFx0XHRcdGljb25QYXRoID0gXCJzdGFuZDEvMC9ib2R5XCI7XHJcblx0XHRcdFx0XHRpY29uUmF3UGF0aCA9IFwic3RhbmQxLzAvYm9keVwiO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0Y2FzZSBcImhhaXJcIjpcclxuXHRcdFx0XHRcdGljb25QYXRoID0gXCJzdGFuZDEvMC9oYWlyXCI7XHJcblx0XHRcdFx0XHRpY29uUmF3UGF0aCA9IFwic3RhbmQxLzAvaGFpclwiO1xyXG5cdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0Y2FzZSBcImZhY2VcIjpcclxuXHRcdFx0XHRcdGljb25QYXRoID0gXCJibGluay8wL2ZhY2VcIjtcclxuXHRcdFx0XHRcdGljb25SYXdQYXRoID0gXCJibGluay8wL2ZhY2VcIjtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdGRlZmF1bHQ6IC8vIHR5cGVJZDogMHwxfDJ8M3w0XHJcblx0XHRcdFx0XHRpY29uUGF0aCA9IFwiaW5mby9pY29uXCI7XHJcblx0XHRcdFx0XHRpY29uUmF3UGF0aCA9IFwiaW5mby9pY29uUmF3XCI7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdGlmIChpZF9wcmVmaXggPT0gXCI1XCIpIHtcclxuXHRcdFx0XHRkYXRhRGlyID0gYC9JdGVtLyR7aW1nRGlyfS8ke2lkX3ByZWZpeH0vYDtcclxuXHRcdFx0XHRzdHJpbmdEaXIgPSBcIi9TdHJpbmcvUGV0L1wiO1xyXG5cdFx0XHRcdGFsZXJ0KFwiUGV0XCIpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdHN3aXRjaCAoaWRfcHJlZml4WzFdKSB7XHJcblx0XHRcdFx0XHRjYXNlIFwiMFwiOlxyXG5cdFx0XHRcdFx0XHRpZiAoTWF0aC50cnVuYyhpZF9wcmVmaXgpIDw9IDEpIHtcclxuXHRcdFx0XHRcdFx0XHRkYXRhRGlyID0gXCIvQ2hhcmFjdGVyL1wiO1xyXG5cdFx0XHRcdFx0XHRcdHN0cmluZ0RpciA9IG51bGw7XHJcblx0XHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGNhc2UgXCIxXCI6XHJcblx0XHRcdFx0XHRcdGxldCBzID0gaW1nRGlyICsgKGltZ0RpciA/IFwiL1wiIDogXCJcIik7XHJcblx0XHRcdFx0XHRcdGRhdGFEaXIgPSBcIi9DaGFyYWN0ZXIvXCIgKyBzO1xyXG5cdFx0XHRcdFx0XHRzdHJpbmdEaXIgPSBcIi9TdHJpbmcvRXFwL0VxcC9cIiArIChzdHJpbmdQYXRoIHx8IHMpO1xyXG5cdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdGNhc2UgXCIyXCI6XHJcblx0XHRcdFx0XHRcdGRhdGFEaXIgPSBgL0l0ZW0vJHtpbWdEaXJ9LyR7aWRfcHJlZml4fS9gO1xyXG5cdFx0XHRcdFx0XHRzdHJpbmdEaXIgPSBcIi9TdHJpbmcvQ29uc3VtZS9cIjtcclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRjYXNlIFwiM1wiOlxyXG5cdFx0XHRcdFx0XHRkYXRhRGlyID0gYC9JdGVtLyR7aW1nRGlyfS8ke2lkX3ByZWZpeH0vYDtcclxuXHRcdFx0XHRcdFx0c3RyaW5nRGlyID0gXCIvU3RyaW5nL0lucy9cIjtcclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRjYXNlIFwiNFwiOlxyXG5cdFx0XHRcdFx0XHRkYXRhRGlyID0gYC9JdGVtLyR7aW1nRGlyfS8ke2lkX3ByZWZpeH0vYDtcclxuXHRcdFx0XHRcdFx0c3RyaW5nRGlyID0gXCIvU3RyaW5nL0V0Yy9cIjtcclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHRjYXNlIFwiNVwiOlxyXG5cdFx0XHRcdFx0XHRkYXRhRGlyID0gYC9JdGVtLyR7aW1nRGlyfS8ke2lkX3ByZWZpeH0vYDtcclxuXHRcdFx0XHRcdFx0c3RyaW5nRGlyID0gXCIvU3RyaW5nL0Nhc2gvXCI7XHJcblx0XHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdFx0ZGVmYXVsdDpcclxuXHRcdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKFwidW5rbm93IGl0ZW0gdHlwZSwgcGFyYW06ICVvXCIsIFtpZF9wcmVmaXgsIGltZ0RpciwgbGlzdFBhdGgsIHNsb3QsIGNhdGVnb3J5TmFtZSwgdHlwZV0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcywge1xyXG5cdFx0XHRcdFwidHlwZVwiOiB7XHJcblx0XHRcdFx0XHR2YWx1ZTogdHlwZSxcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdFwiZGF0YURpclwiOiB7XHJcblx0XHRcdFx0XHR2YWx1ZTogZGF0YURpcixcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdFwic3RyaW5nRGlyXCI6IHtcclxuXHRcdFx0XHRcdHZhbHVlOiBzdHJpbmdEaXIsXHJcblx0XHRcdFx0fSxcclxuXHRcdFx0XHRcImljb25QYXRoXCI6IHtcclxuXHRcdFx0XHRcdHZhbHVlOiBpY29uUGF0aCxcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHRcdFwiaWNvblJhd1BhdGhcIjoge1xyXG5cdFx0XHRcdFx0dmFsdWU6IGljb25SYXdQYXRoLFxyXG5cdFx0XHRcdH0sXHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHQvKipcclxuXHQgKiBsb2FkIGVxdWlwIG9yIGl0ZW0sIG5hbWUgYW5kIGRlc2NcclxuXHQgKiBAcGFyYW0ge3N0cmluZ30gaXRlbUlkXHJcblx0ICogQHJldHVybnMge3tpbmZvOntpY29uOntbXCJcIl06c3RyaW5nfSxpY29uUmF3OntbXCJcIl06c3RyaW5nfX0sbmFtZTpzdHJpbmcsZGVzYzpzdHJpbmcsW3Byb3A6c3RyaW5nXTphbnl9fVxyXG5cdCAqL1xyXG5cdHN0YXRpYyBhc3luYyBnZXRJdGVtKGl0ZW1JZCkge1xyXG5cdFx0LyoqIEB0eXBlIHtJdGVtQ2F0ZWdvcnlJbmZvfSAqL1xyXG5cdFx0bGV0IGluZm8gPSBJdGVtQ2F0ZWdvcnlJbmZvLmdldChpdGVtSWQpO1xyXG5cdFx0aWYgKCFpbmZvKSB7XHJcblx0XHRcdHJldHVybiBudWxsO1xyXG5cdFx0fVxyXG5cclxuXHRcdGxldCBpZCA9IGl0ZW1JZC5wYWRTdGFydCg4LCBcIjBcIik7XHJcblx0XHRpZiAoaWRbMF0gIT0gXCIwXCIpIHtcclxuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiaXRlbUlkOiBcIiArIGl0ZW1JZCk7XHJcblx0XHR9XHJcblxyXG5cdFx0bGV0IHJlc3VsdHM7XHJcblx0XHR0cnkge1xyXG5cdFx0XHRyZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwoW1xyXG5cdFx0XHRcdCRnZXQuZGF0YShpbmZvLmRhdGFEaXIgKyBpdGVtSWQpLFxyXG5cdFx0XHRcdGluZm8uc3RyaW5nRGlyID8gJGdldC5kYXRhKGluZm8uc3RyaW5nRGlyICsgTnVtYmVyKGl0ZW1JZCkpLnRoZW4oXHJcblx0XHRcdFx0XHRhID0+IGEsIC8vIGhhdmUgbmFtZSBvciBkZXNjXHJcblx0XHRcdFx0XHQoKSA9PiB7IHJldHVybiB7IG5hbWU6IFwiPFwiICsgaXRlbUlkICsgXCI+XCIgfTsgfSAvLyBubyBuYW1lIGFuZCBkZXNjXHJcblx0XHRcdFx0KSA6IHsgbmFtZTogXCI8XCIgKyBpdGVtSWQgKyBcIj5cIiB9IC8vIG5vIG5hbWUgYW5kIGRlc2NcclxuXHRcdFx0XSk7XHJcblx0XHR9XHJcblx0XHRjYXRjaCAoZXgpIHtcclxuXHRcdFx0dGhyb3cgbmV3IGV4O1xyXG5cdFx0fVxyXG5cclxuXHRcdGxldCBkYXRhID0gT2JqZWN0LmFzc2lnbihyZXN1bHRzWzBdLCByZXN1bHRzWzFdKTtcclxuXHRcdFxyXG5cdFx0ZGF0YS5pZCA9IGl0ZW1JZDtcclxuXHJcblx0XHRpZiAoZGF0YS5pbmZvKSB7XHJcblx0XHRcdHsvL2VkaXRvciBtb2RlIGRhdGFcclxuXHRcdFx0XHRkYXRhLmluZm8uaWQgPSBpdGVtSWQ7XHJcblx0XHRcdFx0ZGF0YS5pbmZvLm5hbWUgPSBkYXRhLm5hbWU7XHJcblx0XHRcdFx0aWYgKGRhdGEuZGVzYykge1xyXG5cdFx0XHRcdFx0ZGF0YS5pbmZvLmRlc2MgPSBkYXRhLmRlc2M7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGRhdGEuaW5mby5fX3YgPSB3aW5kb3cuREFUQV9UQUcgKyB3aW5kb3cuREFUQV9WRVJTSU9OO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoIWRhdGEuaW5mby5pY29uKSB7XHJcblx0XHRcdFx0ZGF0YS5pbmZvLmljb24gPSB7fTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIWRhdGEuaW5mby5pY29uUmF3KSB7XHJcblx0XHRcdFx0ZGF0YS5pbmZvLmljb25SYXcgPSB7fTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoIWRhdGEuaW5mby5pY29uW1wiXCJdKSB7XHJcblx0XHRcdFx0ZGF0YS5pbmZvLmljb25bXCJcIl0gPSBJdGVtQ2F0ZWdvcnlJbmZvLmdldEljb25VcmwoaXRlbUlkKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoZGF0YS5pbmZvLmljb25SYXdbXCJcIl0pIHtcclxuXHRcdFx0XHRkYXRhLmluZm8uaWNvblJhd1tcIlwiXSA9IEl0ZW1DYXRlZ29yeUluZm8uZ2V0SWNvblJhd1VybChpdGVtSWQpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIGRhdGE7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBAcGFyYW0ge3N0cmluZ30gaWRcclxuXHQgKiBAcmV0dXJucyB7c3RyaW5nfG51bGx9XHJcblx0ICovXHJcblx0c3RhdGljIGdldEljb25SYXdVcmwoaWQpIHtcclxuXHRcdC8qKiBAdHlwZSB7SXRlbUNhdGVnb3J5SW5mb30gKi9cclxuXHRcdGxldCBpbmZvID0gSXRlbUNhdGVnb3J5SW5mby5nZXQoaWQpO1xyXG5cdFx0aWYgKCFpbmZvKSB7XHJcblx0XHRcdHJldHVybiBudWxsO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGlkWzBdID09IFwiMFwiKSB7XHJcblx0XHRcdC8vVE9ETzogcmV0dXJuIHBhdGgsIG5vdCB1cmxcclxuXHRcdFx0cmV0dXJuIGluZm8uZGF0YURpciArIGlkICsgXCIvXCIgKyBpbmZvLmljb25SYXdQYXRoO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQHBhcmFtIHtzdHJpbmd9IGlkXHJcblx0ICogQHJldHVybnMge3N0cmluZ3xudWxsfVxyXG5cdCAqL1xyXG5cdHN0YXRpYyBnZXRJY29uVXJsKGlkKSB7XHJcblx0XHQvKiogQHR5cGUge0l0ZW1DYXRlZ29yeUluZm99ICovXHJcblx0XHRsZXQgaW5mbyA9IEl0ZW1DYXRlZ29yeUluZm8uZ2V0KGlkKTtcclxuXHRcdGlmICghaW5mbykge1xyXG5cdFx0XHRyZXR1cm4gbnVsbDtcclxuXHRcdH1cclxuXHRcdGlmIChpZFswXSA9PSBcIjBcIikge1xyXG5cdFx0XHQvL1RPRE86IHJldHVybiBwYXRoLCBub3QgdXJsXHJcblx0XHRcdHJldHVybiBpbmZvLmRhdGFEaXIgKyBpZCArIFwiL1wiICsgaW5mby5pY29uUGF0aDtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBpZCAtIDQrIGRpZ2l0IHN0cmluZ1xyXG5cdCAqIEByZXR1cm5zIHtJdGVtQ2F0ZWdvcnlJbmZvfVxyXG5cdCAqL1xyXG5cdHN0YXRpYyBnZXQoaWQpIHtcclxuXHRcdGxldCBpbmZvO1xyXG5cclxuXHRcdGlmIChpZCA9PSBudWxsIHx8IGlkID09IFwiXCIpIHtcclxuXHRcdFx0ZGVidWdnZXI7XHJcblx0XHRcdHRocm93IG5ldyBUeXBlRXJyb3IoKTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoaWRbMF0gPT0gXCIwXCIpIHtcclxuXHRcdFx0aWYgKGlkLmxlbmd0aCA9PSA0KSB7XHJcblx0XHRcdFx0aW5mbyA9IEl0ZW1DYXRlZ29yeUluZm8uX2luZm9baWRdO1xyXG5cdFx0XHRcdGlmIChpbmZvKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gaW5mbztcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSBpZiAoaWQubGVuZ3RoID09IDYpIHtcclxuXHRcdFx0XHRyZXR1cm4gSXRlbUNhdGVnb3J5SW5mby5faW5mb1tpZF07XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSBpZiAoaWQubGVuZ3RoID09IDMpIHtcclxuXHRcdFx0XHRyZXR1cm4gSXRlbUNhdGVnb3J5SW5mby5faW5mb1tpZF07XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0aW5mbyA9IEl0ZW1DYXRlZ29yeUluZm8uX2luZm9baWQuc2xpY2UoMCwgNCldO1xyXG5cdFx0XHRcdGlmIChpbmZvKSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gaW5mbztcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0XHRpbmZvID0gSXRlbUNhdGVnb3J5SW5mby5faW5mb1tpZC5zbGljZSgwLCA2KV07XHJcblx0XHRcdFx0XHRpZiAoaW5mbykge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gaW5mbztcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRpbmZvID0gSXRlbUNhdGVnb3J5SW5mby5faW5mb1tpZC5zbGljZSgwLCAzKV07Ly8wMTlcclxuXHRcdFx0XHRcdFx0aWYgKGluZm8pIHtcclxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gaW5mbztcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0Y29uc29sZS53YXJuKFwidW5rbm93IGl0ZW0gdHlwZSwgaXRlbUlkOiBcIiArIGlkKTtcclxuXHRcdHJldHVybiBudWxsO1xyXG5cdH1cclxuXHJcblx0c3RhdGljIGdldFR5cGVJZCgpIHtcclxuXHRcdHJldHVybiBNYXRoLnRydW5jKF9pZCAvIDEwMDAwMDApO1xyXG5cdH1cclxuXHJcblx0c3RhdGljIGdldENhdGVnb3J5KCkge1xyXG5cdFx0cmV0dXJuIE1hdGgudHJ1bmMoX2lkIC8gMTAwMDApOy8vICUgMTAwOy8vIDAxMDUgLy8gMDEgKyAwNSAvLyB0eXBlICsgY2F0ZWdvcnlcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBpZCAtIGNoYXJbNF06IHR5cGU7IGNoYXJbNCtdOiBpdGVtSWRcclxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuXHQgKi9cclxuXHRzdGF0aWMgaXNJdGVtKGlkKSB7XHJcblx0XHRsZXQgdHlwZSA9IE1hdGgudHJ1bmMoaWQgLyAxMDAwMDAwKTsvL2lkLnN0YXJ0c1dpdGgoXCIwMFwiKTtcclxuXHRcdHJldHVybiB0eXBlICE9IDA7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBAcGFyYW0ge3N0cmluZ30gaWQgLSBjaGFyWzRdOiB0eXBlOyBjaGFyWzQrXTogaXRlbUlkXHJcblx0ICogQHJldHVybnMge2Jvb2xlYW59XHJcblx0ICovXHJcblx0c3RhdGljIGlzRXF1aXAoaWQpIHtcclxuXHRcdGlmICghaWQpIHtcclxuXHRcdFx0dGhyb3cgVHlwZUVycm9yKCk7XHJcblx0XHR9XHJcblx0XHRsZXQgX2lkID0gTnVtYmVyKGlkKTtcclxuXHJcblx0XHRpZiAoIU51bWJlci5pc1NhZmVJbnRlZ2VyKF9pZCkpIHtcclxuXHRcdFx0dGhyb3cgVHlwZUVycm9yKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly9sZXQgY2F0ZSA9IE51bWJlcihpZC5sZW5ndGggPT0gNCA/IGlkIDogaWQuc2xpY2UoMCwgNCkpO1xyXG5cdFx0Ly9yZXR1cm4gKGNhdGUgPj0gXCIwMTAwXCIgJiYgY2F0ZSA8IFwiMDE4MFwiKTtcclxuXHJcblx0XHQvL2xldCBjYXRlID0gTWF0aC50cnVuYyhfaWQgLyAxMDAwMCk7XHJcblx0XHQvL2lmIChjYXRlID49IDE4MCAmJiBjYXRlIDwgMjAwMCkge1xyXG5cdFx0Ly9cdGNvbnNvbGUud2FybihcIj8/IGVxdWlwOiBcIiArIGlkKTtcclxuXHRcdC8vXHRkZWJ1Z2dlcjtcclxuXHRcdC8vfVxyXG5cclxuXHRcdGxldCB0eXBlID0gTWF0aC50cnVuYyhfaWQgLyAxMDAwMDAwKTtcclxuXHJcblx0XHRyZXR1cm4gdHlwZSA9PSAxO1xyXG5cdH1cclxuXHJcblx0c3RhdGljIGlzQ2hhaXIoaWQpIHtcclxuXHRcdGlmICghaWQpIHtcclxuXHRcdFx0dGhyb3cgVHlwZUVycm9yKCk7XHJcblx0XHR9XHJcblx0XHRsZXQgX2lkID0gTnVtYmVyKGlkKTtcclxuXHJcblx0XHRpZiAoIU51bWJlci5pc1NhZmVJbnRlZ2VyKF9pZCkpIHtcclxuXHRcdFx0dGhyb3cgVHlwZUVycm9yKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0bGV0IGNhdGUgPSBNYXRoLnRydW5jKF9pZCAvIDEwMDAwKTtcclxuXHJcblx0XHRyZXR1cm4gY2F0ZSA9PSAzMDE7Ly8wMzAxeHh4eFxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogMX40IGRpZ2l0IG51bWJlclxyXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBpdGVtSWRcclxuXHQgKi9cclxuXHRzdGF0aWMgZ2V0U3ViQ2F0ZWdvcnkoaXRlbUlkKSB7XHJcblx0XHRyZXR1cm4gTWF0aC50cnVuYyhpdGVtSWQgLyAxMDAwMCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBAcGFyYW0ge3N0cmluZ30gaXRlbUlkXHJcblx0ICovXHJcblx0c3RhdGljIGlzQ2FzaFdlYXBvbihpdGVtSWQpIHtcclxuXHRcdHJldHVybiBNYXRoLnRydW5jKGl0ZW1JZCAvIDEwMDAwKSA9PSAxNzA7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBAcGFyYW0ge3N0cmluZ30gam9iXHJcblx0ICogQHJldHVybnMge3N0cmluZ31cclxuXHQgKi9cclxuXHRzdGF0aWMgZ2V0Sm9iV2VhcG9uQ2F0ZWdvcnkoam9iKSB7XHJcblx0XHQvL1RPRE86IGdldEpvYldlYXBvbkNhdGVnb3J5XHJcblx0XHRjb25zb2xlLndhcm4oXCJnZXRKb2JXZWFwb25DYXRlZ29yeTog5pyq5a6M5oiQXCIpO1xyXG5cdH1cclxufVxyXG53aW5kb3cuJEl0ZW1DYXRlZ29yeUluZm8gPSBJdGVtQ2F0ZWdvcnlJbmZvO1xyXG5JdGVtQ2F0ZWdvcnlJbmZvLnR5cGUgPSB7XHJcblx0RXF1aXA6IFwiRXF1aXBcIixcclxuXHRDb25zdW1lOiBcIkNvbnN1bWVcIixcclxuXHRFdGM6IFwiRXRjXCIsXHJcblx0SW5zdGFsbDogXCJJbnN0YWxsXCIsXHJcblx0Q2FzaDogXCJDYXNoXCJcclxufTtcclxuSXRlbUNhdGVnb3J5SW5mby50eXBlTmFtZSA9IHtcclxuXHQwOiBcIkVxdWlwXCIsXHJcblx0MTogXCJDb25zdW1lXCIsXHJcblx0MjogXCJFdGNcIixcclxuXHQzOiBcIkluc3RhbGxcIixcclxuXHQ0OiBcIkNhc2hcIlxyXG59O1xyXG5JdGVtQ2F0ZWdvcnlJbmZvLnR5cGVJZCA9IHtcclxuXHRFcXVpcDogMCxcclxuXHRDb25zdW1lOiAxLFxyXG5cdEV0YzogMixcclxuXHRJbnN0YWxsOiAzLFxyXG5cdENhc2g6IDQsXHJcbn07XHJcbkl0ZW1DYXRlZ29yeUluZm8uX2luZm8gPSB7XHJcblx0XCIwMDAwXCI6IG5ldyBJdGVtQ2F0ZWdvcnlJbmZvKFwiMDAwMFwiLCBcIlwiLFx0XHRcdFwiYm9keVwiLFx0XHRcdFx0XCJib2R5XCIsXHRcdFx0XCI8Ym9keT5cIiwgXCJFcXVpcFwiKSxcclxuXHRcIjAwMDFcIjogbmV3IEl0ZW1DYXRlZ29yeUluZm8oXCIwMDAxXCIsIFwiXCIsXHRcdFx0XCJoZWFkXCIsXHRcdFx0XHRcImhlYWRcIixcdFx0XHRcIjxoZWFkPlwiLCBcIkVxdWlwXCIpLFxyXG5cclxuXHRcIjAwMDJcIjogbmV3IEl0ZW1DYXRlZ29yeUluZm8oXCIwMDAyXCIsIFwiRmFjZVwiLFx0XHRcIkZhY2VcIixcdFx0XHRcdFwiZmFjZVwiLFx0XHRcdFwi6IeJ5Z6LXCIsIFwiRXF1aXBcIiksXHJcblx0XCIwMDAzXCI6IG5ldyBJdGVtQ2F0ZWdvcnlJbmZvKFwiMDAwM1wiLCBcIkhhaXJcIixcdFx0XCJIYWlyXCIsXHRcdFx0XHRcImhhaXJcIixcdFx0XHRcIumrruWei1wiLCBcIkVxdWlwXCIpLFxyXG5cdFwiMDAwNFwiOiBuZXcgSXRlbUNhdGVnb3J5SW5mbyhcIjAwMDRcIiwgXCJIYWlyXCIsXHRcdFwiSGFpclwiLFx0XHRcdFx0XCJoYWlyXCIsXHRcdFx0XCLpq67lnotcIiwgXCJFcXVpcFwiKSxcclxuXHJcblx0XCIwMTAwXCI6IG5ldyBJdGVtQ2F0ZWdvcnlJbmZvKFwiMDEwMFwiLCBcIkNhcFwiLFx0XHRcdFwiQ2FwXCIsXHRcdFx0XHRcImNhcFwiLFx0XHRcdFwi5bi95a2QXCIsIFwiRXF1aXBcIiksXHJcblx0XCIwMTAxXCI6IG5ldyBJdGVtQ2F0ZWdvcnlJbmZvKFwiMDEwMVwiLCBcIkFjY2Vzc29yeVwiLFx0XCJhY2Nlc3NvcnlGYWNlXCIsXHRcImFjY2Vzc29yeUZhY2VcIiwgXCLoh4npo75cIiwgXCJFcXVpcFwiKSxcclxuXHRcIjAxMDJcIjogbmV3IEl0ZW1DYXRlZ29yeUluZm8oXCIwMTAyXCIsIFwiQWNjZXNzb3J5XCIsXHRcImFjY2Vzc29yeUV5ZXNcIixcdFwiYWNjZXNzb3J5RXllc1wiLCBcIuecvOmjvlwiLCBcIkVxdWlwXCIpLFxyXG5cdFwiMDEwM1wiOiBuZXcgSXRlbUNhdGVnb3J5SW5mbyhcIjAxMDNcIiwgXCJBY2Nlc3NvcnlcIixcdFwiYWNjZXNzb3J5RWFyc1wiLFx0XCJhY2Nlc3NvcnlFYXJzXCIsIFwi6ICz55KwXCIsIFwiRXF1aXBcIiksXHJcblx0XCIwMTA0XCI6IG5ldyBJdGVtQ2F0ZWdvcnlJbmZvKFwiMDEwNFwiLCBcIkNvYXRcIixcdFx0XCJDb2F0XCIsXHRcdFx0XHRcImNvYXRcIixcdFx0XHRcIuS4iuiho1wiLCBcIkVxdWlwXCIpLFxyXG5cdFwiMDEwNVwiOiBuZXcgSXRlbUNhdGVnb3J5SW5mbyhcIjAxMDVcIiwgXCJMb25nY29hdFwiLFx0XCJMb25nY29hdFwiLFx0XHRcdFwibG9uZ2NvYXRcIixcdFx0XCLlpZfmnI1cIiwgXCJFcXVpcFwiKSxcclxuXHRcIjAxMDZcIjogbmV3IEl0ZW1DYXRlZ29yeUluZm8oXCIwMTA2XCIsIFwiUGFudHNcIixcdFx0XCJQYW50c1wiLFx0XHRcdFwicGFudHNcIixcdFx0XCLopLLlrZBcIiwgXCJFcXVpcFwiKSxcclxuXHRcIjAxMDdcIjogbmV3IEl0ZW1DYXRlZ29yeUluZm8oXCIwMTA3XCIsIFwiU2hvZXNcIixcdFx0XCJTaG9lc1wiLFx0XHRcdFwic2hvZXNcIixcdFx0XCLpnovlrZBcIiwgXCJFcXVpcFwiKSxcclxuXHRcIjAxMDhcIjogbmV3IEl0ZW1DYXRlZ29yeUluZm8oXCIwMTA4XCIsIFwiR2xvdmVcIixcdFx0XCJHbG92ZVwiLFx0XHRcdFwiZ2xvdmVcIixcdFx0XCLmiYvlpZdcIiwgXCJFcXVpcFwiKSxcclxuXHRcIjAxMDlcIjogbmV3IEl0ZW1DYXRlZ29yeUluZm8oXCIwMTA5XCIsIFwiU2hpZWxkXCIsXHRcdFwiU2hpZWxkXCIsXHRcdFx0XCJzaGllbGRcIixcdFx0XCLnm77niYxcIiwgXCJFcXVpcFwiKSxcclxuXHRcIjAxMTBcIjogbmV3IEl0ZW1DYXRlZ29yeUluZm8oXCIwMTEwXCIsIFwiQ2FwZVwiLFx0XHRcIkNhcGVcIixcdFx0XHRcdFwiY2FwZVwiLFx0XHRcdFwi5oqr6aKoXCIsIFwiRXF1aXBcIiksXHJcblxyXG5cdFwiMDEyMVwiOiBuZXcgSXRlbUNhdGVnb3J5SW5mbyhcIjAxMjFcIiwgXCJXZWFwb25cIiwgXCLploPkuq7lhYvpra9cIiwgXCJ3ZWFwb25cIiwgXCLploPkuq7lhYvpra9cIiwgXCJFcXVpcFwiKSxcclxuXHRcIjAxMjJcIjogbmV3IEl0ZW1DYXRlZ29yeUluZm8oXCIwMTIyXCIsIFwiV2VhcG9uXCIsIFwi6Z2I6a2C5bCE5omLXCIsIFwid2VhcG9uXCIsIFwi6Z2I6a2C5bCE5omLXCIsIFwiRXF1aXBcIiksXHJcblx0XCIwMTIzXCI6IG5ldyBJdGVtQ2F0ZWdvcnlJbmZvKFwiMDEyM1wiLCBcIldlYXBvblwiLCBcIumtlOWKjVwiLCBcIndlYXBvblwiLCBcIumtlOWKjVwiLCBcIkVxdWlwXCIpLFxyXG5cdFwiMDEyNFwiOiBuZXcgSXRlbUNhdGVnb3J5SW5mbyhcIjAxMjRcIiwgXCJXZWFwb25cIiwgXCLog73ph4/lio1cIiwgXCJ3ZWFwb25cIiwgXCLog73ph4/lio1cIiwgXCJFcXVpcFwiKSxcclxuXHRcIjAxMjVcIjogbmV3IEl0ZW1DYXRlZ29yeUluZm8oXCIwMTI1XCIsIFwiV2VhcG9uXCIsIFwi5bm754245qOSXCIsIFwid2VhcG9uXCIsIFwi5bm754245qOSXCIsIFwiRXF1aXBcIiksXHJcblx0XCIwMTI2XCI6IG5ldyBJdGVtQ2F0ZWdvcnlJbmZvKFwiMDEyNlwiLCBcIldlYXBvblwiLCBcIkVTUOmZkOWItuWZqFwiLCBcIndlYXBvblwiLCBcIkVTUOmZkOWItuWZqFwiLCBcIkVxdWlwXCIpLFxyXG5cdFwiMDEyN1wiOiBuZXcgSXRlbUNhdGVnb3J5SW5mbyhcIjAxMjdcIiwgXCJXZWFwb25cIiwgXCLpjpbpj4hcIiwgXCJ3ZWFwb25cIiwgXCLpjpbpj4hcIiwgXCJFcXVpcFwiKSxcclxuXHRcIjAxMjhcIjogbmV3IEl0ZW1DYXRlZ29yeUluZm8oXCIwMTI4XCIsIFwiV2VhcG9uXCIsIFwi6a2U5Yqb6K236IWVXCIsIFwid2VhcG9uXCIsIFwi6a2U5Yqb6K236IWVXCIsIFwiRXF1aXBcIiksXHJcblxyXG5cdFwiMDEzMFwiOiBuZXcgSXRlbUNhdGVnb3J5SW5mbyhcIjAxMzBcIiwgXCJXZWFwb25cIiwgXCLllq7miYvlio1cIiwgXCJ3ZWFwb25cIiwgXCLllq7miYvlio1cIiwgXCJFcXVpcFwiKSxcclxuXHRcIjAxMzFcIjogbmV3IEl0ZW1DYXRlZ29yeUluZm8oXCIwMTMxXCIsIFwiV2VhcG9uXCIsIFwi5Zau5omL5panXCIsIFwid2VhcG9uXCIsIFwi5Zau5omL5panXCIsIFwiRXF1aXBcIiksXHJcblx0XCIwMTMyXCI6IG5ldyBJdGVtQ2F0ZWdvcnlJbmZvKFwiMDEzMlwiLCBcIldlYXBvblwiLCBcIuWWruaJi+mMmFwiLCBcIndlYXBvblwiLCBcIuWWruaJi+mMmFwiLCBcIkVxdWlwXCIpLFxyXG5cdFwiMDEzM1wiOiBuZXcgSXRlbUNhdGVnb3J5SW5mbyhcIjAxMzNcIiwgXCJXZWFwb25cIiwgXCLnn63lio1cIiwgXCJ3ZWFwb25cIiwgXCLnn63lio1cIiwgXCJFcXVpcFwiKSxcclxuXHRcIjAxMzRcIjogbmV3IEl0ZW1DYXRlZ29yeUluZm8oXCIwMTM0XCIsIFwiV2VhcG9uXCIsIFwi6ZuZ5YiAXCIsIFwid2VhcG9uXCIsIFwi6ZuZ5YiAXCIsIFwiRXF1aXBcIiksXHJcblx0XCIwMTM1MjZcIjogbmV3IEl0ZW1DYXRlZ29yeUluZm8oXCIwMTM1MjZcIiwgXCJXZWFwb25cIiwgXCLpnYjprYLkuYvnkrBcIiwgXCJ3ZWFwb25cIiwgXCLpnYjprYLkuYvnkrBcIiwgXCJFcXVpcFwiKSxcclxuXHRcIjAxMzUzMFwiOiBuZXcgSXRlbUNhdGVnb3J5SW5mbyhcIjAxMzUzMFwiLCBcIldlYXBvblwiLCBcIuaOp+WItuWZqFwiLCBcIndlYXBvblwiLCBcIuaOp+WItuWZqFwiLCBcIkVxdWlwXCIpLFxyXG5cdFwiMDEzNlwiOiBuZXcgSXRlbUNhdGVnb3J5SW5mbyhcIjAxMzZcIiwgXCJXZWFwb25cIiwgXCLmiYvmnZZcIiwgXCJ3ZWFwb25cIiwgXCLmiYvmnZZcIiwgXCJFcXVpcFwiKSxcclxuXHRcIjAxMzdcIjogbmV3IEl0ZW1DYXRlZ29yeUluZm8oXCIwMTM3XCIsIFwiV2VhcG9uXCIsIFwi55+t5p2WXCIsIFwid2VhcG9uXCIsIFwi55+t5p2WXCIsIFwiRXF1aXBcIiksXHJcblx0XCIwMTM4XCI6IG5ldyBJdGVtQ2F0ZWdvcnlJbmZvKFwiMDEzOFwiLCBcIldlYXBvblwiLCBcIumVt+adllwiLCBcIndlYXBvblwiLCBcIumVt+adllwiLCBcIkVxdWlwXCIpLFxyXG5cdFxyXG5cdFwiMDE0MFwiOiBuZXcgSXRlbUNhdGVnb3J5SW5mbyhcIjAxNDBcIiwgXCJXZWFwb25cIiwgXCLpm5nmiYvlio1cIiwgXCJ3ZWFwb25cIiwgXCLpm5nmiYvlio1cIiwgXCJFcXVpcFwiKSxcclxuXHRcIjAxNDFcIjogbmV3IEl0ZW1DYXRlZ29yeUluZm8oXCIwMTQxXCIsIFwiV2VhcG9uXCIsIFwi6ZuZ5omL5panXCIsIFwid2VhcG9uXCIsIFwi6ZuZ5omL5panXCIsIFwiRXF1aXBcIiksXHJcblx0XCIwMTQyXCI6IG5ldyBJdGVtQ2F0ZWdvcnlJbmZvKFwiMDE0MlwiLCBcIldlYXBvblwiLCBcIumbmeaJi+ajjVwiLCBcIndlYXBvblwiLCBcIumbmeaJi+ajjVwiLCBcIkVxdWlwXCIpLFxyXG5cdFwiMDE0M1wiOiBuZXcgSXRlbUNhdGVnb3J5SW5mbyhcIjAxNDNcIiwgXCJXZWFwb25cIiwgXCLmp41cIiwgXCJ3ZWFwb25cIiwgXCLmp41cIiwgXCJFcXVpcFwiKSxcclxuXHRcIjAxNDRcIjogbmV3IEl0ZW1DYXRlZ29yeUluZm8oXCIwMTQ0XCIsIFwiV2VhcG9uXCIsIFwi55+bXCIsIFwid2VhcG9uXCIsIFwi55+bXCIsIFwiRXF1aXBcIiksXHJcblx0XCIwMTQ1XCI6IG5ldyBJdGVtQ2F0ZWdvcnlJbmZvKFwiMDE0NVwiLCBcIldlYXBvblwiLCBcIuW8k1wiLCBcIndlYXBvblwiLCBcIuW8k1wiLCBcIkVxdWlwXCIpLFxyXG5cdFwiMDE0NlwiOiBuZXcgSXRlbUNhdGVnb3J5SW5mbyhcIjAxNDZcIiwgXCJXZWFwb25cIiwgXCLlvKlcIiwgXCJ3ZWFwb25cIiwgXCLlvKlcIiwgXCJFcXVpcFwiKSxcclxuXHRcIjAxNDdcIjogbmV3IEl0ZW1DYXRlZ29yeUluZm8oXCIwMTQ3XCIsIFwiV2VhcG9uXCIsIFwi5ouz5aWXXCIsIFwid2VhcG9uXCIsIFwi5ouz5aWXXCIsIFwiRXF1aXBcIiksXHJcblx0XCIwMTQ4XCI6IG5ldyBJdGVtQ2F0ZWdvcnlJbmZvKFwiMDE0OFwiLCBcIldlYXBvblwiLCBcIuaMh+iZjlwiLCBcIndlYXBvblwiLCBcIuaMh+iZjlwiLCBcIkVxdWlwXCIpLFxyXG5cdFwiMDE0OVwiOiBuZXcgSXRlbUNhdGVnb3J5SW5mbyhcIjAxNDlcIiwgXCJXZWFwb25cIiwgXCLngavmp41cIiwgXCJ3ZWFwb25cIiwgXCLngavmp41cIiwgXCJFcXVpcFwiKSxcclxuXHRcIjAxNTBcIjogbmV3IEl0ZW1DYXRlZ29yeUluZm8oXCIwMTUwXCIsIFwiV2VhcG9uXCIsIFwi6Y+fXCIsIFwid2VhcG9uXCIsIFwi6Y+fXCIsIFwiRXF1aXBcIiksXHJcblx0XCIwMTUxXCI6IG5ldyBJdGVtQ2F0ZWdvcnlJbmZvKFwiMDE1MVwiLCBcIldlYXBvblwiLCBcIumOrFwiLCBcIndlYXBvblwiLCBcIumOrFwiLCBcIkVxdWlwXCIpLFxyXG5cdFwiMDE1MlwiOiBuZXcgSXRlbUNhdGVnb3J5SW5mbyhcIjAxNTJcIiwgXCJXZWFwb25cIiwgXCLpm5nlvKnmp41cIiwgXCJ3ZWFwb25cIiwgXCLpm5nlvKnmp41cIiwgXCJFcXVpcFwiKSxcclxuXHRcIjAxNTNcIjogbmV3IEl0ZW1DYXRlZ29yeUluZm8oXCIwMTUzXCIsIFwiV2VhcG9uXCIsIFwi5Yqg6L6y56CyXCIsIFwid2VhcG9uXCIsIFwi5Yqg6L6y56CyXCIsIFwiRXF1aXBcIiksXHJcblx0XCIwMTU0XCI6IG5ldyBJdGVtQ2F0ZWdvcnlJbmZvKFwiMDE1NFwiLCBcIldlYXBvblwiLCBcIuWkquWIgFwiLCBcIndlYXBvblwiLCBcIuWkquWIgFwiLCBcIkVxdWlwXCIpLFxyXG5cdFwiMDE1NVwiOiBuZXcgSXRlbUNhdGVnb3J5SW5mbyhcIjAxNTVcIiwgXCJXZWFwb25cIiwgXCLmiYflrZBcIiwgXCJ3ZWFwb25cIiwgXCLmiYflrZBcIiwgXCJFcXVpcFwiKSxcclxuXHRcIjAxNTZcIjogbmV3IEl0ZW1DYXRlZ29yeUluZm8oXCIwMTU2XCIsIFwiV2VhcG9uXCIsIFwi55CJXCIsIFwid2VhcG9uXCIsIFwi55CJXCIsIFwiRXF1aXBcIiksXHJcblx0XCIwMTU3XCI6IG5ldyBJdGVtQ2F0ZWdvcnlJbmZvKFwiMDE1N1wiLCBcIldlYXBvblwiLCBcIueSg1wiLCBcIndlYXBvblwiLCBcIueSg1wiLCBcIkVxdWlwXCIpLFxyXG5cdFwiMDE1OFwiOiBuZXcgSXRlbUNhdGVnb3J5SW5mbyhcIjAxNThcIiwgXCJXZWFwb25cIiwgXCLph43mi7Pmp41cIiwgXCJ3ZWFwb25cIiwgXCLph43mi7Pmp41cIiwgXCJFcXVpcFwiKSxcclxuXHRcIjAxNzBcIjogbmV3IEl0ZW1DYXRlZ29yeUluZm8oXCIwMTcwXCIsIFwiV2VhcG9uXCIsIFwiMDE3MFwiLCBcIndlYXBvblwiLCBcIum7nuijneatpuWZqFwiLCBcIkVxdWlwXCIpLFxyXG5cdFwiMDE5XCI6IG5ldyBJdGVtQ2F0ZWdvcnlJbmZvKFwiMDE5XCIsIFwiVGFtaW5nTW9iXCIsIFwiVGFtaW5nTW9iXCIsIFwidGFtaW5nTW9iXCIsIFwi6aiO5a+1XCIsIFwiRXF1aXBcIiwgXCJUYW1pbmcvXCIpLFxyXG5cclxuXHRcIjAzMDFcIjogbmV3IEl0ZW1DYXRlZ29yeUluZm8oXCIwMzAxXCIsIFwiSW5zdGFsbFwiLCBcIkNoYWlyXCIsIFwiaW5zdGFsbFwiLCBcIuakheWtkFwiLCBcIkl0ZW1cIiksXHJcbn07XHJcblxyXG5JdGVtQ2F0ZWdvcnlJbmZvLl9jYXRlZ29yeUxpc3QgPSAoZnVuY3Rpb24gKGluZm9fbWFwKSB7XHJcblx0bGV0IGxpc3QgPSBbXTtcclxuXHRsZXQgc2V0ID0gbmV3IFNldCgpO1xyXG5cdGZvciAobGV0IGkgaW4gaW5mb19tYXApIHtcclxuXHRcdGxldCBjYXQgPSBpbmZvX21hcFtpXTtcclxuXHRcdGxldCBrZXkgPSBjYXQuY2F0ZWdvcnlOYW1lIHx8IGNhdC5saXN0UGF0aDtcclxuXHJcblx0XHRpZiAoIXNldC5oYXMoa2V5KSkge1xyXG5cdFx0XHRzZXQuYWRkKGtleSk7XHJcblxyXG5cdFx0XHRsaXN0LnB1c2goe1xyXG5cdFx0XHRcdGtleToga2V5LFxyXG5cdFx0XHRcdHZhbHVlOiBpLFxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9XHJcblx0cmV0dXJuIGxpc3Q7XHJcbn0pKEl0ZW1DYXRlZ29yeUluZm8uX2luZm8pO1xyXG5cclxuZXhwb3J0IGNsYXNzIFJlc291cmNlTWFuYWdlciB7XHJcblx0c3RhdGljIGlzRXF1aXBFeGlzdChpZCwgY2F0ZUluZm8pIHtcclxuXHRcdGNvbnN0IGRwID0gY2F0ZUluZm8ubGlzdFBhdGg7XHJcblx0XHRjb25zdCBlcyA9IFJlc291cmNlTWFuYWdlci5lcXVpcF9tYXBbZHBdO1xyXG5cdFx0cmV0dXJuICFlcyB8fCBlcy5oYXMoaWQpO1xyXG5cdH1cclxuXHRcclxuXHQvKipcclxuXHQgKiBAcGFyYW0ge3N0cmluZ30gdXJsXHJcblx0ICovXHJcblx0c3RhdGljIGFzeW5jIGxvYWRBcmNoaXZlKHVybCkge1xyXG5cdFx0JHNldFZhbHVlKCRhcmNoaXZlLCBcIi9cIiwgSlNPTi5wYXJzZShhd2FpdCBSZXNvdXJjZU1hbmFnZXIuZ2V0KHVybCkpKTtcclxuXHR9XHJcblx0XHJcblx0LyoqXHJcblx0ICogQHBhcmFtIHtzdHJpbmd9IHVybFxyXG5cdCAqL1xyXG5cdHN0YXRpYyBnZXQodXJsKSB7XHJcblx0XHRyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG5cdFx0XHRsZXQgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcblx0XHRcdHhoci5vcGVuKFwiR0VUXCIsIHVybCwgdHJ1ZSk7XHJcblxyXG5cdFx0XHR4aHIudGltZW91dCA9IDEwICogNjAgKiAxMDAwOy8vMjAwMDA7XHJcblxyXG5cdFx0XHR4aHIub25sb2FkID0gZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdGlmICh0aGlzLnN0YXR1cyA9PSA0MDQgfHwgdGhpcy5zdGF0dXMgPT0gNTAwKSB7XHJcblx0XHRcdFx0XHQkZmFpbGVkX3VybHMucHVzaCh1cmwpO1xyXG5cdFx0XHRcdFx0ZGVidWdnZXI7XHJcblx0XHRcdFx0XHQvL3Jlc29sdmUobnVsbCk7XHJcblx0XHRcdFx0XHRyZWplY3QodGhpcy5zdGF0dXMgKyBcIjogXCIgKyB1cmwpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlIGlmICh0aGlzLnN0YXR1cyA9PSAyMDApIHtcclxuXHRcdFx0XHRcdHJlc29sdmUodGhpcy5yZXNwb25zZVRleHQpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbHNlIGlmICh0aGlzLnN0YXR1cyA9PSAzMDQpIHtcclxuXHRcdFx0XHRcdGRlYnVnZ2VyXHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0eGhyLm9udGltZW91dCA9IGZ1bmN0aW9uIChlKSB7XHJcblx0XHRcdFx0ZGVidWdnZXI7XHJcblx0XHRcdFx0Ly8gWE1MSHR0cFJlcXVlc3Qg6LaF5pe244CC5Zyo5q2k5YGa5p+Q5LqL44CCXHJcblx0XHRcdFx0Ly9yZXNvbHZlKG51bGwpO1xyXG5cdFx0XHRcdHJlamVjdChcInRpbWVvdXQ6IFwiICsgdXJsKTtcclxuXHRcdFx0fTtcclxuXHJcblx0XHRcdHhoci5vbmFib3J0ID0gZnVuY3Rpb24gKGUpIHtcclxuXHRcdFx0XHRyZWplY3QoXCJhYm9ydDogXCIgKyB1cmwpO1xyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0eGhyLnNlbmQoKTtcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0c3RhdGljIGdldCByb290X3BhdGgoKSB7XHJcblx0XHRyZXR1cm4gd2luZG93LiRST09UX1BBVEg7XHJcblx0fVxyXG5cclxuXHRzdGF0aWMgZ2V0IGFyY2hpdmUoKSB7XHJcblx0XHRyZXR1cm4gJGFyY2hpdmU7XHJcblx0fVxyXG5cclxuXHRzdGF0aWMgZ2V0IGZhaWxlZF91cmxzKCkge1xyXG5cdFx0cmV0dXJuICRmYWlsZWRfdXJscztcclxuXHR9XHJcbn1cclxud2luZG93LiRSZXNvdXJjZU1hbmFnZXIgPSBSZXNvdXJjZU1hbmFnZXI7XHJcblxyXG4vKipcclxuICogQHBhcmFtIHt7fX0gb2JqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoXHJcbiAqIEBwYXJhbSB7YW55fSB2YWx1ZVxyXG4gKi9cclxuZnVuY3Rpb24gJHNldFZhbHVlKG9iaiwgcGF0aCwgdmFsdWUpIHtcclxuXHRpZiAocGF0aC5lbmRzV2l0aChcIi9cIikpIHtcclxuXHRcdHBhdGggPSBwYXRoLnNsaWNlKDAsIHBhdGgubGVuZ3RoIC0gMSk7XHJcblx0fVxyXG5cdGxldCBwcyA9IHBhdGguc3BsaXQoXCIvXCIpO1xyXG5cdGxldCBpLCB0YXJnZXQgPSBvYmosIGxhc3RJbmRleCA9IHBzLmxlbmd0aCAtIDE7XHJcblx0Zm9yIChpID0gMDsgaSA8IGxhc3RJbmRleDsgKytpKSB7XHJcblx0XHRsZXQga2V5ID0gcHNbaV07XHJcblx0XHRpZiAodGFyZ2V0W2tleV0gPT0gbnVsbCkge1xyXG5cdFx0XHR0YXJnZXRba2V5XSA9IHt9O1xyXG5cdFx0fVxyXG5cdFx0dGFyZ2V0ID0gdGFyZ2V0W2tleV07XHJcblx0fVxyXG5cdGxldCBvcmlnaW5fdmFsdWUgPSB0YXJnZXRbcHNbbGFzdEluZGV4XV07XHJcblx0aWYgKG9yaWdpbl92YWx1ZSBpbnN0YW5jZW9mIFByb21pc2UpIHtcclxuXHRcdGRlbGV0ZSB0YXJnZXRbcHNbbGFzdEluZGV4XV07XHJcblx0XHR0YXJnZXRbcHNbbGFzdEluZGV4XV0gPSB2YWx1ZTtcclxuXHR9XHJcblx0ZWxzZSBpZiAob3JpZ2luX3ZhbHVlICYmIHR5cGVvZiBvcmlnaW5fdmFsdWUgPT0gXCJvYmplY3RcIikge1xyXG5cdFx0Ly9pZiAodmFsdWUgaW5zdGFuY2VvZiBQcm9taXNlKSB7XHJcblx0XHQvL1x0ZGVidWdnZXI7XHJcblx0XHQvL31cclxuXHRcdC8vZWxzZSB7XHJcblx0XHRcdGZvciAobGV0IGtleSBpbiB2YWx1ZSkge1xyXG5cdFx0XHRcdG9yaWdpbl92YWx1ZVtrZXldID0gdmFsdWVba2V5XSB8fCBvcmlnaW5fdmFsdWVba2V5XTtcclxuXHRcdFx0fVxyXG5cdFx0Ly99XHJcblx0fVxyXG5cdGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSAhPSBcInVuZGVmaW5lZFwiKSB7XHJcblx0XHR0YXJnZXRbcHNbbGFzdEluZGV4XV0gPSB2YWx1ZTtcclxuXHR9XHJcbn1cclxuZnVuY3Rpb24gJGdldFZhbHVlKG9iaiwgcGF0aCkge1xyXG5cdGlmIChwYXRoLmVuZHNXaXRoKFwiL1wiKSkge1xyXG5cdFx0cGF0aCA9IHBhdGguc2xpY2UoMCwgcGF0aC5sZW5ndGggLSAxKTtcclxuXHR9XHJcblx0bGV0IHBzID0gcGF0aC5zcGxpdChcIi9cIik7XHJcblx0bGV0IGksIHRhcmdldCA9IG9iaiwgbGFzdEluZGV4ID0gcHMubGVuZ3RoIC0gMTtcclxuXHRmb3IgKGkgPSAwOyBpIDwgbGFzdEluZGV4OyArK2kpIHtcclxuXHRcdGxldCBrZXkgPSBwc1tpXTtcclxuXHRcdGlmICh0YXJnZXRba2V5XSkge1xyXG5cdFx0XHRcdHRhcmdldCA9IHRhcmdldFtrZXldO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdHJldHVybiB1bmRlZmluZWQ7XHJcblx0XHR9XHJcblx0fVxyXG5cdHJldHVybiB0YXJnZXRbcHNbbGFzdEluZGV4XV07XHJcbn1cclxuXHJcbmNvbnN0IHN5bWJvbF9pc1BhY2sgPSBTeW1ib2woXCIkcGFja1wiKTtcclxuXHJcbmNvbnN0IHVybF9zdGFydHNXaXRoX3Byb3RvY29sID0gUmVnRXhwLnByb3RvdHlwZS50ZXN0LmJpbmQoL14oKFthLXpBLVpeXFw6XSspKFxcOi4qKSR8XFwvXFwvKS8pO1xyXG5mdW5jdGlvbiBfc2V0VmFsdWVCeVBhdGgocGF0aCwgdmFsdWUsIGlzX3BhY2spIHtcclxuXHRpZiAodXJsX3N0YXJ0c1dpdGhfcHJvdG9jb2wocGF0aCkpIHtcclxuXHRcdHJldHVybjtcclxuXHR9XHJcblx0ZWxzZSBpZiAod2luZG93LiRST09UX1BBVEggIT0gXCJcIiAmJiBwYXRoLnN0YXJ0c1dpdGgod2luZG93LiRST09UX1BBVEgpKSB7XHJcblx0XHRpZiAoaXNfcGFjaykge1xyXG5cdFx0XHR2YWx1ZVtzeW1ib2xfaXNQYWNrXSA9IHRydWU7XHJcblx0XHR9XHJcblx0XHRwYXRoID0gcGF0aC5zbGljZSh3aW5kb3cuJFJPT1RfUEFUSC5sZW5ndGgpO1xyXG5cdFx0cmV0dXJuICRzZXRWYWx1ZSgkYXJjaGl2ZSwgcGF0aCwgdmFsdWUpO1xyXG5cdH1cclxuXHRlbHNlIHtcclxuXHRcdHJldHVybiAkc2V0VmFsdWUoJGFyY2hpdmUsIHBhdGgsIHZhbHVlKTtcclxuXHR9XHJcbn1cclxuZnVuY3Rpb24gX2dldFZhbHVlRnJvbUFyY2hpdmVCeVBhdGgocGF0aCwgdmFsdWUpIHtcclxuXHRsZXQgX3BhdGggPSBfZ2V0RGF0YVBhdGhCeVVybChwYXRoKTtcclxuXHRpZiAoX3BhdGgpIHtcclxuXHRcdHJldHVybiAkZ2V0VmFsdWUoJGFyY2hpdmUsIF9wYXRoKTtcclxuXHR9XHJcblx0cmV0dXJuIHVuZGVmaW5lZDtcclxufVxyXG5mdW5jdGlvbiBfZ2V0RGF0YVBhdGhCeVVybChwYXRoKSB7XHJcblx0aWYgKCF1cmxfc3RhcnRzV2l0aF9wcm90b2NvbChwYXRoKSkge1xyXG5cdFx0aWYgKHdpbmRvdy4kUk9PVF9QQVRIICE9IFwiXCIgJiYgcGF0aC5zdGFydHNXaXRoKHdpbmRvdy4kUk9PVF9QQVRIKSkge1xyXG5cdFx0XHRyZXR1cm4gcGF0aC5zbGljZSh3aW5kb3cuJFJPT1RfUEFUSC5sZW5ndGgpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRyZXR1cm4gdW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogQHJldHVybnMge1Byb21pc2U8YW55Pnxhbnl9XHJcbiAqL1xyXG5mdW5jdGlvbiAkZ2V0VmFsdWVBc3luYyhvYmosIHBhdGgpIHtcclxuXHRpZiAocGF0aC5lbmRzV2l0aChcIi9cIikpIHtcclxuXHRcdHBhdGggPSBwYXRoLnNsaWNlKDAsIHBhdGgubGVuZ3RoIC0gMSk7XHJcblx0fVxyXG5cdFxyXG5cdC8vIHRyeSBnZXQgdmFsdWUgc3luY1xyXG5cdGxldCB2YWx1ZSA9ICRnZXRWYWx1ZShvYmosIHBhdGgpO1xyXG5cdFxyXG5cdC8vIGlmIHZhbHVlIGV4aXN0XHJcblx0aWYgKHZhbHVlKSB7XHJcblx0XHRpZiAodmFsdWUgaW5zdGFuY2VvZiBQcm9taXNlKSB7XHJcblx0XHRcdC8vID8/XHJcblx0XHRcdHJldHVybiBuZXcgUHJvbWlzZShhc3luYyBmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcblx0XHRcdFx0YXdhaXQgdmFsdWU7XHJcblx0XHRcdFx0cmVzb2x2ZShhd2FpdCAkZ2V0VmFsdWVBc3luYyhvYmosIHBhdGgpKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0cmV0dXJuIHZhbHVlO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRlbHNlIHsvLyBpZiB2YWx1ZSBub3QgZXhpc3QsIHRyeSBhd2FpdCBwYXJlbnQgbm9kZVxyXG5cdFx0bGV0IHBzID0gcGF0aC5zcGxpdChcIi9cIik7XHJcblx0XHRsZXQgaSwgdGFyZ2V0ID0gb2JqLCBsYXN0SW5kZXggPSBwcy5sZW5ndGggLSAxO1xyXG5cdFx0Zm9yIChpID0gMDsgaSA8IGxhc3RJbmRleDsgKytpKSB7XHJcblx0XHRcdGxldCBrZXkgPSBwc1tpXTtcclxuXHRcdFx0aWYgKHRhcmdldFtrZXldIGluc3RhbmNlb2YgUHJvbWlzZSkge1xyXG5cdFx0XHRcdHJldHVybiBuZXcgUHJvbWlzZShhc3luYyBmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcblx0XHRcdFx0XHRhd2FpdCB0YXJnZXRba2V5XTtcclxuXHRcdFx0XHRcdHJlc29sdmUoYXdhaXQgJGdldFZhbHVlQXN5bmMob2JqLCBwYXRoKSk7XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKHRhcmdldFtrZXldKSB7XHJcblx0XHRcdFx0XHR0YXJnZXQgPSB0YXJnZXRba2V5XTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIHtcclxuXHRcdFx0XHRyZXR1cm4gdW5kZWZpbmVkO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRsZXQgcmVzdWx0ID0gdGFyZ2V0W3BzW2xhc3RJbmRleF1dO1xyXG5cdFx0aWYgKHJlc3VsdCBpbnN0YW5jZW9mIFByb21pc2UpIHtcclxuXHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuXHRcdFx0XHRhd2FpdCByZXN1bHQ7XHJcblx0XHRcdFx0cmVzb2x2ZShhd2FpdCAkZ2V0VmFsdWVBc3luYyhvYmosIHBhdGgpKTtcclxuXHRcdFx0fSk7XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0cmV0dXJuIHJlc3VsdDtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gdXJsXHJcbiAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59XHJcbiAqL1xyXG5leHBvcnQgbGV0ICRnZXQgPSBmdW5jdGlvbiAkZ2V0KHVybCkge1xyXG5cdHJldHVybiBSZXNvdXJjZU1hbmFnZXIuZ2V0KHVybCk7XHJcbn1cclxuLyoqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoXHJcbiAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59XHJcbiAqL1xyXG4kZ2V0LnBhY2sgPSBhc3luYyBmdW5jdGlvbiAkZ2V0X3BhY2socGF0aCkge1xyXG5cdGxldCBfcGF0aCA9IF9nZXREYXRhUGF0aEJ5VXJsKHBhdGgpO1xyXG5cdGxldCBvYmo7XHJcblxyXG5cdGlmIChfcGF0aCkge1xyXG5cdFx0b2JqID0gJGdldFZhbHVlQXN5bmMoJGFyY2hpdmUsIF9wYXRoKTtcclxuXHR9XHJcblxyXG5cdGlmIChvYmogaW5zdGFuY2VvZiBQcm9taXNlKSB7XHJcblx0XHRyZXR1cm4gYXdhaXQgb2JqO1xyXG5cdH1cclxuXHRlbHNlIGlmIChvYmogJiYgb2JqW3N5bWJvbF9pc1BhY2tdKSB7XHJcblx0XHRyZXR1cm4gb2JqO1xyXG5cdH1cclxuXHRlbHNlIHtcclxuXHRcdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gXCJwcm9kdWN0aW9uXCIpIHtcclxuXHRcdFx0aWYgKG9iaiAmJiAhb2JqW3N5bWJvbF9pc1BhY2tdKSB7XHJcblx0XHRcdFx0dGhyb3cgbmV3IFR5cGVFcnJvcihcImRhdGE6IFwiICsgcGF0aCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGNvbnN0IHVybCA9ICRnZXQucGFja1VybChwYXRoKTtcclxuXHJcblx0XHRsZXQgdGFzayA9IChhc3luYyBmdW5jdGlvbiAoKSB7XHJcblx0XHRcdGxldCBqc29uVGV4dCA9IGF3YWl0IFJlc291cmNlTWFuYWdlci5nZXQodXJsKTtcclxuXHJcblx0XHRcdG9iaiA9IEpTT04ucGFyc2UoanNvblRleHQpO1xyXG5cclxuXHRcdFx0X3NldFZhbHVlQnlQYXRoKHBhdGgsIG9iaiwgdHJ1ZSk7XHJcblxyXG5cdFx0XHRyZXR1cm4gb2JqO1xyXG5cdFx0fSkoKTtcclxuXHRcdF9zZXRWYWx1ZUJ5UGF0aChwYXRoLCB0YXNrLCB0cnVlKTtcclxuXHJcblx0XHRyZXR1cm4gYXdhaXQgdGFzaztcclxuXHR9XHJcbn1cclxuLyoqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoXHJcbiAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59XHJcbiAqL1xyXG4kZ2V0LnBhY2tTeW5jID0gZnVuY3Rpb24gZ2V0X3BhY2tTeW5jKHBhdGgpIHtcclxuXHRsZXQgb2JqID0gX2dldFZhbHVlRnJvbUFyY2hpdmVCeVBhdGgocGF0aCk7XHJcblx0aWYgKG9iaikge1xyXG5cdFx0cmV0dXJuIG9iajtcclxuXHR9XHJcblx0cmV0dXJuIHVuZGVmaW5lZDtcclxufVxyXG4vKipcclxuICogQHBhcmFtIHtzdHJpbmd9IHBhdGhcclxuICogQHJldHVybnMge1Byb21pc2U8YW55Pn1cclxuICovXHJcbiRnZXQuZGF0YSA9IGFzeW5jIGZ1bmN0aW9uICRnZXRfZGF0YShwYXRoKSB7XHJcblx0bGV0IF9wYXRoID0gX2dldERhdGFQYXRoQnlVcmwocGF0aCk7XHJcblx0bGV0IG9iajtcclxuXHJcblx0aWYgKF9wYXRoKSB7XHJcblx0XHRvYmogPSAkZ2V0VmFsdWVBc3luYygkYXJjaGl2ZSwgX3BhdGgpO1xyXG5cdH1cclxuXHJcblx0aWYgKG9iaiBpbnN0YW5jZW9mIFByb21pc2UpIHtcclxuXHRcdHJldHVybiBhd2FpdCBvYmo7XHJcblx0fVxyXG5cdGVsc2UgaWYgKG9iaikge1xyXG5cdFx0cmV0dXJuIG9iajtcclxuXHR9XHJcblx0ZWxzZSB7XHJcblx0XHRjb25zdCB1cmwgPSAkZ2V0LmRhdGFVcmwocGF0aCk7XHJcblxyXG5cdFx0bGV0IHRhc2sgPSAoYXN5bmMgZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRsZXQganNvblRleHQgPSBhd2FpdCBSZXNvdXJjZU1hbmFnZXIuZ2V0KHVybCk7XHJcblxyXG5cdFx0XHRvYmogPSBKU09OLnBhcnNlKGpzb25UZXh0KTtcclxuXHJcblx0XHRcdF9zZXRWYWx1ZUJ5UGF0aChwYXRoLCBvYmosIGZhbHNlKTtcclxuXHJcblx0XHRcdHJldHVybiBvYmo7XHJcblx0XHR9KSgpO1xyXG5cdFx0X3NldFZhbHVlQnlQYXRoKHBhdGgsIHRhc2ssIGZhbHNlKTtcclxuXHJcblx0XHRyZXR1cm4gYXdhaXQgdGFzaztcclxuXHR9XHJcbn1cclxuLyoqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoXHJcbiAqIEByZXR1cm5zIHthbnl9XHJcbiAqL1xyXG4kZ2V0LmRhdGFTeW5jID0gZnVuY3Rpb24gZ2V0X2RhdGFTeW5jKHBhdGgpIHtcclxuXHRsZXQgb2JqID0gX2dldFZhbHVlRnJvbUFyY2hpdmVCeVBhdGgocGF0aCk7XHJcblx0aWYgKG9iaikge1xyXG5cdFx0cmV0dXJuIG9iajtcclxuXHR9XHJcblx0cmV0dXJuIHVuZGVmaW5lZDtcclxufVxyXG4vKipcclxuICogQHBhcmFtIHtzdHJpbmd9IHBhdGhcclxuICogQHJldHVybnMge1Byb21pc2U8YW55Pn1cclxuICovXHJcbiRnZXQubGlzdCA9IGFzeW5jIGZ1bmN0aW9uICRnZXRfbGlzdChwYXRoKSB7XHJcblx0bGV0IF9wYXRoID0gX2dldERhdGFQYXRoQnlVcmwocGF0aCk7XHJcblx0bGV0IG9iajtcclxuXHJcblx0aWYgKF9wYXRoKSB7XHJcblx0XHRvYmogPSAkZ2V0VmFsdWVBc3luYygkYXJjaGl2ZSwgX3BhdGgpO1xyXG5cdH1cclxuXHJcblx0aWYgKG9iaiBpbnN0YW5jZW9mIFByb21pc2UpIHtcclxuXHRcdHJldHVybiBhd2FpdCBvYmo7XHJcblx0fVxyXG5cdGVsc2UgaWYgKG9iaikge1xyXG5cdFx0cmV0dXJuIG9iajtcclxuXHR9XHJcblx0ZWxzZSB7XHJcblx0XHRjb25zdCB1cmwgPSAkZ2V0Lmxpc3RVcmwocGF0aCk7XHJcblxyXG5cdFx0bGV0IHRhc2sgPSAoYXN5bmMgZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRsZXQganNvblRleHQgPSBhd2FpdCBSZXNvdXJjZU1hbmFnZXIuZ2V0KHVybCk7XHJcblxyXG5cdFx0XHRvYmogPSBKU09OLnBhcnNlKGpzb25UZXh0KTtcclxuXHJcblx0XHRcdF9zZXRWYWx1ZUJ5UGF0aChwYXRoLCBvYmosIGZhbHNlKTtcclxuXHJcblx0XHRcdHJldHVybiBvYmo7XHJcblx0XHR9KSgpO1xyXG5cdFx0X3NldFZhbHVlQnlQYXRoKHBhdGgsIHRhc2ssIGZhbHNlKTtcclxuXHJcblx0XHRyZXR1cm4gYXdhaXQgdGFzaztcclxuXHR9XHJcbn1cclxuLyoqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoXHJcbiAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59XHJcbiAqL1xyXG4kZ2V0Lmxpc3RTeW5jID0gZnVuY3Rpb24gJGdldF9saXN0U3luYyhwYXRoKSB7XHJcblx0bGV0IG9iaiA9IF9nZXRWYWx1ZUZyb21BcmNoaXZlQnlQYXRoKHBhdGgpO1xyXG5cdGlmIChvYmopIHtcclxuXHRcdHJldHVybiBPYmplY3Qua2V5cyhvYmopO1xyXG5cdH1cclxuXHRyZXR1cm4gdW5kZWZpbmVkO1xyXG59XHJcblxyXG4vKipcclxuICogQHBhcmFtIHtzdHJpbmd9IHBhdGhcclxuICogQHJldHVybnMge3N0cmluZ31cclxuICovXHJcbiRnZXQuZGF0YVVybCA9IGZ1bmN0aW9uICRnZXRfZGF0YVVybChwYXRoKSB7XHJcblx0aWYgKHVybF9zdGFydHNXaXRoX3Byb3RvY29sKHBhdGgpKSB7XHJcblx0XHRyZXR1cm4gcGF0aDtcclxuXHR9XHJcblx0ZWxzZSBpZiAoIXBhdGguc3RhcnRzV2l0aChcImRhdGFcIikpIHtcclxuXHRcdHJldHVybiBgJHt3aW5kb3cuJFJPT1RfUEFUSH1kYXRhJHtwYXRofS5qc29uYDtcclxuXHR9XHJcblx0dGhyb3cgbmV3IEVycm9yKFwiTm90IGdhbWUgZGF0YTogXCIgKyBwYXRoKTtcclxufVxyXG4vKipcclxuICogQHBhcmFtIHtzdHJpbmd9IHBhdGhcclxuICogQHJldHVybnMge3N0cmluZ31cclxuICovXHJcbiRnZXQucGFja1VybCA9IGZ1bmN0aW9uICRnZXRfcGFja1VybChwYXRoKSB7XHJcblx0aWYgKHVybF9zdGFydHNXaXRoX3Byb3RvY29sKHBhdGgpKSB7XHJcblx0XHRyZXR1cm4gcGF0aDtcclxuXHR9XHJcblx0ZWxzZSBpZiAoIXBhdGguc3RhcnRzV2l0aChcInBhY2tcIikpIHtcclxuXHRcdHJldHVybiBgJHt3aW5kb3cuJFJPT1RfUEFUSH1wYWNrJHtwYXRofS5qc29uYDtcclxuXHR9XHJcblx0dGhyb3cgbmV3IEVycm9yKFwiTm90IGdhbWUgcGFjazogXCIgKyBwYXRoKTtcclxufVxyXG4kZ2V0Lmxpc3RVcmwgPSBmdW5jdGlvbiAkZ2V0X2xpc3RVcmwocGF0aCkge1xyXG5cdGlmICh1cmxfc3RhcnRzV2l0aF9wcm90b2NvbChwYXRoKSkge1xyXG5cdFx0cmV0dXJuIHBhdGg7XHJcblx0fVxyXG5cdGVsc2UgaWYgKCFwYXRoLnN0YXJ0c1dpdGgoXCJsc1wiKSkge1xyXG5cdFx0cmV0dXJuIGAke3dpbmRvdy4kUk9PVF9QQVRIfWxzJHtwYXRofS5qc29uYDtcclxuXHR9XHJcblx0dGhyb3cgbmV3IEVycm9yKHBhdGgpO1xyXG59XHJcbi8qKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gcGF0aFxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfVxyXG4gKi9cclxuJGdldC5pbWFnZVVybCA9IGZ1bmN0aW9uICRnZXRfaW1hZ2VzVXJsKHBhdGgpIHtcclxuXHRpZiAodXJsX3N0YXJ0c1dpdGhfcHJvdG9jb2wocGF0aCkpIHtcclxuXHRcdHJldHVybiBwYXRoO1xyXG5cdH1cclxuXHRlbHNlIGlmICghcGF0aC5zdGFydHNXaXRoKFwiaW1hZ2VzXCIpKSB7XHJcblx0XHRyZXR1cm4gYCR7d2luZG93LiRST09UX1BBVEh9aW1hZ2VzJHtwYXRofS5wbmdgO1xyXG5cdH1cclxuXHR0aHJvdyBuZXcgRXJyb3IoXCJOb3QgZ2FtZSBpbWFnZXM6IFwiICsgcGF0aCk7XHJcbn1cclxuLyoqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoXHJcbiAqIEByZXR1cm5zIHtzdHJpbmd9XHJcbiAqL1xyXG4kZ2V0LnNvdW5kTXAzVXJsID0gZnVuY3Rpb24gJGdldF9zb3VuZE1wM1VybChwYXRoKSB7XHJcblx0aWYgKHVybF9zdGFydHNXaXRoX3Byb3RvY29sKHBhdGgpKSB7XHJcblx0XHRyZXR1cm4gcGF0aDtcclxuXHR9XHJcblx0ZWxzZSBpZiAoIXBhdGguc3RhcnRzV2l0aChcInNvdW5kXCIpKSB7XHJcblx0XHRyZXR1cm4gYCR7d2luZG93LiRST09UX1BBVEh9c291bmQke3BhdGh9Lm1wM2A7XHJcblx0fVxyXG5cdHRocm93IG5ldyBFcnJvcihcIk5vdCBnYW1lIHNvdW5kOiBcIiArIHBhdGgpO1xyXG59XHJcbi8qKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gcGF0aFxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfVxyXG4gKi9cclxuJGdldC5zb3VuZFdhdlVybCA9IGZ1bmN0aW9uICRnZXRfc291bmRXYXZVcmwocGF0aCkge1xyXG5cdGlmICh1cmxfc3RhcnRzV2l0aF9wcm90b2NvbChwYXRoKSkge1xyXG5cdFx0cmV0dXJuIHBhdGg7XHJcblx0fVxyXG5cdGVsc2UgaWYgKCFwYXRoLnN0YXJ0c1dpdGgoXCJzb3VuZFwiKSkge1xyXG5cdFx0cmV0dXJuIGAke3dpbmRvdy4kUk9PVF9QQVRIfXNvdW5kJHtwYXRofS53YXZgO1xyXG5cdH1cclxuXHR0aHJvdyBuZXcgRXJyb3IoXCJOb3QgZ2FtZSBzb3VuZDogXCIgKyBwYXRoKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBwYXRoXHJcbiAqIEByZXR1cm5zIHtzdHJpbmd9XHJcbiAqL1xyXG4kZ2V0LmFzc2V0VXJsID0gZnVuY3Rpb24gJGdldF9hc3NldFVybChwYXRoKSB7XHJcblx0cmV0dXJuIGAke3dpbmRvdy4kUk9PVF9QQVRIfSR7cGF0aH1gO1xyXG59XHJcbiRnZXQuYXNzZXQgPSBmdW5jdGlvbiAkZ2V0X2Fzc2V0KHBhdGgpIHtcclxuXHRyZXR1cm4gJGdldCgkZ2V0LmFzc2V0VXJsKHBhdGgpKTtcclxufVxyXG5cclxud2luZG93LiRnZXQgPSAkZ2V0O1xyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBJdGVtQXR0ck5vcm1hbGl6ZSB7XHJcblx0c3RhdGljIGhlYWQoaXRlbSkge1xyXG5cdFx0aXRlbS5nZW5kZXIgPSAyO1xyXG5cdH1cclxuXHRzdGF0aWMgYm9keShpdGVtKSB7XHJcblx0XHRpdGVtLmdlbmRlciA9IDI7XHJcblx0fVxyXG5cdHN0YXRpYyBGYWNlKGl0ZW0pIHtcclxuXHRcdGNvbnN0IGcgPSBNYXRoLnRydW5jKChpdGVtLmlkICUgMTAwMDApIC8gMTAwMCk7XHJcblx0XHRpdGVtLmdlbmRlciA9IGcgPT0gMSB8fCBnID09IDQgPyAxIDogMDtcclxuXHR9XHJcblx0c3RhdGljIEhhaXIoaXRlbSkge1xyXG5cdFx0Y29uc3QgZyA9IE1hdGgudHJ1bmMoKGl0ZW0uaWQgJSAxMDAwMCkgLyAxMDAwKTtcclxuXHRcdGl0ZW0uZ2VuZGVyID0gZyA9PSAxIHx8IGcgPT0gMiB8fCBnID09IDQgfHwgZyA9PSA3ID8gMSA6IDA7XHJcblx0fVxyXG5cdHN0YXRpYyBDYXAoaXRlbSkge1xyXG5cdFx0SXRlbUF0dHJOb3JtYWxpemUuX2VxdWlwKGl0ZW0pO1xyXG5cdH1cclxuXHRzdGF0aWMgYWNjZXNzb3J5RmFjZShpdGVtKSB7XHJcblx0XHRJdGVtQXR0ck5vcm1hbGl6ZS5fZXF1aXAoaXRlbSk7XHJcblx0fVxyXG5cdHN0YXRpYyBhY2Nlc3NvcnlFeWVzKGl0ZW0pIHtcclxuXHRcdEl0ZW1BdHRyTm9ybWFsaXplLl9lcXVpcChpdGVtKTtcclxuXHR9XHJcblx0c3RhdGljIGFjY2Vzc29yeUVhcnMoaXRlbSkge1xyXG5cdFx0SXRlbUF0dHJOb3JtYWxpemUuX2VxdWlwKGl0ZW0pO1xyXG5cdH1cclxuXHRzdGF0aWMgQ29hdChpdGVtKSB7XHJcblx0XHRJdGVtQXR0ck5vcm1hbGl6ZS5fZXF1aXAoaXRlbSk7XHJcblx0fVxyXG5cdHN0YXRpYyBMb25nY29hdChpdGVtKSB7XHJcblx0XHRJdGVtQXR0ck5vcm1hbGl6ZS5fZXF1aXAoaXRlbSk7XHJcblx0fVxyXG5cdHN0YXRpYyBQYW50cyhpdGVtKSB7XHJcblx0XHRJdGVtQXR0ck5vcm1hbGl6ZS5fZXF1aXAoaXRlbSk7XHJcblx0fVxyXG5cdHN0YXRpYyBTaG9lcyhpdGVtKSB7XHJcblx0XHRJdGVtQXR0ck5vcm1hbGl6ZS5fZXF1aXAoaXRlbSk7XHJcblx0fVxyXG5cdHN0YXRpYyBHbG92ZShpdGVtKSB7XHJcblx0XHRJdGVtQXR0ck5vcm1hbGl6ZS5fZXF1aXAoaXRlbSk7XHJcblx0fVxyXG5cdHN0YXRpYyBTaGllbGQoaXRlbSkge1xyXG5cdFx0SXRlbUF0dHJOb3JtYWxpemUuX2VxdWlwKGl0ZW0pO1xyXG5cdH1cclxuXHRzdGF0aWMgQ2FwZShpdGVtKSB7XHJcblx0XHRJdGVtQXR0ck5vcm1hbGl6ZS5fZXF1aXAoaXRlbSk7XHJcblx0fVxyXG5cdHN0YXRpYyBfZXF1aXAoaXRlbSkge1xyXG5cdFx0Y29uc3QgZyA9IE1hdGgudHJ1bmMoKGl0ZW0uaWQgJSAxMDAwMCkgLyAxMDAwKTtcclxuXHRcdGl0ZW0uZ2VuZGVyID0gZyA9PSAwID8gMCA6IChnID09IDEgPyAxIDogMik7XHJcblx0fVxyXG59XHJcblxyXG5jb25zdCByZWdleHBfZ2V0SGFpclN0eWxlSUQgPSAvKFxcZHs0LDd9KVxcZCQvO1xyXG5jb25zdCByZWdleHBfZ2V0RmFjZVN0eWxlSUQgPSAvKFxcZHsyLDV9KVxcZChcXGR7Mn0pJC87XHJcblxyXG5jb25zdCByZWdleHBfZ2V0SGFpckNvbG9yID0gL1xcZHs0LDd9KFxcZCkkLztcclxuY29uc3QgcmVnZXhwX2dldEZhY2VDb2xvciA9IC9cXGR7Miw1fShcXGQpXFxkezJ9JC87XHJcblxyXG5leHBvcnQgY2xhc3MgQ2hhcmFjdGVyUmVuZGVyQ29uZmlnIHtcclxuXHQvKipcclxuXHQgKiBAcGFyYW0ge3N0cmluZ30gc3R5bGUgaWRcclxuXHQgKiBAcmV0dXJucyB7c3RyaW5nW119XHJcblx0ICovXHJcblx0c3RhdGljICogZW51bUhhaXJDb2xvcihzdHlsZSkge1xyXG5cdFx0bGV0IG0gPSBzdHlsZS5tYXRjaChyZWdleHBfZ2V0SGFpclN0eWxlSUQpO1xyXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgKytpKSB7XHJcblx0XHRcdGxldCBpZCA9IG1bMV0gKyBpO1xyXG5cdFx0XHR5aWVsZCBpZDtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBzdHlsZSBpZFxyXG5cdCAqIEByZXR1cm5zIHtzdHJpbmdbXX1cclxuXHQgKi9cclxuXHRzdGF0aWMgKiBlbnVtRmFjZUNvbG9yKHN0eWxlKSB7XHJcblx0XHRsZXQgbSA9IHN0eWxlLm1hdGNoKHJlZ2V4cF9nZXRGYWNlU3R5bGVJRCk7XHJcblx0XHRmb3IgKGxldCBpID0gMDsgaSA8IDEwOyArK2kpIHtcclxuXHRcdFx0bGV0IGlkID0gbVsxXSArIGkgKyBtWzJdO1xyXG5cdFx0XHR5aWVsZCBpZDtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBzdHlsZVxyXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBjb2xvclxyXG5cdCAqIEByZXR1cm5zIHtzdHJpbmd9XHJcblx0ICovXHJcblx0c3RhdGljIGdldENvbG9ySGFpcklEKHN0eWxlLCBjb2xvcikge1xyXG5cdFx0bGV0IG0gPSBzdHlsZS5tYXRjaChyZWdleHBfZ2V0SGFpclN0eWxlSUQpO1xyXG5cdFx0bGV0IGlkID0gbVsxXSArIChjb2xvciAlIDEwKTtcclxuXHRcdHJldHVybiBpZDtcclxuXHR9XHJcblx0LyoqXHJcblx0ICogQHBhcmFtIHtzdHJpbmd9IHN0eWxlXHJcblx0ICogQHBhcmFtIHtudW1iZXJ9IGNvbG9yXHJcblx0ICogQHJldHVybnMge3N0cmluZ31cclxuXHQgKi9cclxuXHRzdGF0aWMgZ2V0Q29sb3JGYWNlSUQoc3R5bGUsIGNvbG9yKSB7XHJcblx0XHRsZXQgbSA9IHN0eWxlLm1hdGNoKHJlZ2V4cF9nZXRGYWNlU3R5bGVJRCk7XHJcblx0XHRsZXQgaWQgPSBtWzFdICsgKGNvbG9yICUgMTApICsgbVsyXTtcclxuXHRcdHJldHVybiBpZDtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBpZF8xXHJcblx0ICogQHBhcmFtIHtzdHJpbmd9IGlkXzJcclxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuXHQgKi9cclxuXHRzdGF0aWMgaXNIYWlyU3R5bGVFcXVhbChpZF8xLCBpZF8yKSB7XHJcblx0XHRyZXR1cm4gQ2hhcmFjdGVyUmVuZGVyQ29uZmlnLmdldENvbG9ySGFpcklEKGlkXzEsIDApID09IENoYXJhY3RlclJlbmRlckNvbmZpZy5nZXRDb2xvckhhaXJJRChpZF8yLCAwKTtcclxuXHR9XHJcblx0LyoqXHJcblx0ICogQHBhcmFtIHtzdHJpbmd9IGlkXzFcclxuXHQgKiBAcGFyYW0ge3N0cmluZ30gaWRfMlxyXG5cdCAqIEByZXR1cm5zIHtib29sZWFufVxyXG5cdCAqL1xyXG5cdHN0YXRpYyBpc0ZhY2VTdHlsZUVxdWFsKGlkXzEsIGlkXzIpIHtcclxuXHRcdHJldHVybiBDaGFyYWN0ZXJSZW5kZXJDb25maWcuZ2V0Q29sb3JGYWNlSUQoaWRfMSwgMCkgPT0gQ2hhcmFjdGVyUmVuZGVyQ29uZmlnLmdldENvbG9yRmFjZUlEKGlkXzIsIDApO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQHBhcmFtIHtzdHJpbmd9IGlkXHJcblx0ICogQHJldHVybnMge3N0cmluZ31cclxuXHQgKi9cclxuXHRzdGF0aWMgZ2V0SGFpckNvbG9yKGlkKSB7XHJcblx0XHRpZiAoaWQpIHtcclxuXHRcdFx0aWQgPSBTdHJpbmcoaWQpO1xyXG5cdFx0XHRsZXQgbSA9IGlkLm1hdGNoKHJlZ2V4cF9nZXRIYWlyQ29sb3IpO1xyXG5cdFx0XHRpZiAobSkge1xyXG5cdFx0XHRcdHJldHVybiBtWzFdO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBAcGFyYW0ge3N0cmluZ30gaWRcclxuXHQgKiBAcmV0dXJucyB7c3RyaW5nfVxyXG5cdCAqL1xyXG5cdHN0YXRpYyBnZXRGYWNlQ29sb3IoaWQpIHtcclxuXHRcdGlmIChpZCkge1xyXG5cdFx0XHRpZCA9IFN0cmluZyhpZCk7XHJcblx0XHRcdGxldCBtID0gaWQubWF0Y2gocmVnZXhwX2dldEZhY2VDb2xvcik7XHJcblx0XHRcdGlmIChtKSB7XHJcblx0XHRcdFx0cmV0dXJuIG1bMV07XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcbnZhciBfZXh0ZXJuYWxfZGF0YSA9IHtcclxuXHRcInJlcXVpcmVkSm9ic1wiOiBbXHJcblx0XHRcIkJlZ2lubmVyXCJcclxuXHRdLFxyXG5cdFwicmVxdWlyZWRMZXZlbFwiOiAwLFxyXG5cdFwiaXNDYXNoXCI6IHRydWUsXHJcblx0XCJuYW1lXCI6IFwiQmx1ZSBCZWFuaWVcIixcclxuXHRcImRlc2NcIjogbnVsbCxcclxuXHRcImlkXCI6IDEwMDAwMDAsXHJcblx0XCJyZXF1aXJlZEdlbmRlclwiOiAwLFxyXG5cdFwidHlwZUluZm9cIjoge1xyXG5cdFx0XCJvdmVyYWxsQ2F0ZWdvcnlcIjogXCJFcXVpcFwiLFxyXG5cdFx0XCJjYXRlZ29yeVwiOiBcIkFybW9yXCIsXHJcblx0XHRcInN1YkNhdGVnb3J5XCI6IFwiSGF0XCJcclxuXHR9XHJcbn07XHJcblxyXG52YXIgSXRlbVR5cGVJbmZvID0ge1xyXG5cdFwiRXF1aXBcIjoge1xyXG5cdFx0XCJIYXRcIjogXCJDYXBcIixcclxuXHRcdFwiQ2FwZVwiOiBcIkNhcGVcIixcclxuXHRcdFwiVG9wXCI6IFwiQ29hdFwiLFxyXG5cdFx0XCJPdmVyYWxsXCI6IFwiTG9uZ2NvYXRcIixcclxuXHRcdFwiR2xvdmVcIjogXCJHbG92ZVwiLFxyXG5cdFx0XCJCb3R0b21cIjogXCJQYW50c1wiLFxyXG5cclxuXHRcdFwiU2hpZWxkXCI6IFwiU2hpZWxkXCIsXHJcblx0XHRcIlNob2VzXCI6IFwiU2hvZXNcIixcclxuXHRcdFwiRXllIERlY29yYXRpb25cIjogXCJhY2Nlc3NvcnlFeWVzXCIsXHJcblx0XHRcIkVhcnJpbmdzXCI6IFwiYWNjZXNzb3J5RWFyc1wiLFxyXG5cdFx0Ly9cIlJpbmdcIjogXCJcIixcclxuXHJcblx0XHQvL1wiUGVuZGFudFwiOiBcIlwiLFxyXG5cdFx0XCJGYWNlIEFjY2Vzc29yeVwiOiBcImFjY2Vzc29yeUZhY2VcIixcclxuXHRcdC8vXCJCZWx0XCI6IFwiXCIsXHJcblx0XHQvL1wiTWVkYWxcIjogXCJcIixcclxuXHRcdC8vXCJTaG91bGRlciBBY2Nlc3NvcnlcIjogXCJcIixcclxuXHRcdC8vXCJCYWRnZVwiOiBcIlwiLFxyXG5cclxuXHRcdC8vXCJEcmFnb24gRXF1aXBtZW50XCI6IFwiXCIsXHJcblx0XHQvL1wiTWVjaGFuaWMgRXF1aXBtZW50XCI6IFwiXCIsXHJcblx0XHQvL1wiUGV0IEVxdWlwbWVudFwiOiBcIlwiLFxyXG5cdFx0Ly9cIkFuZHJvaWRcIjogXCJcIixcclxuXHRcdC8vXCJNZWNoYW5pY2FsIEhlYXJ0XCI6IFwiXCIsXHJcblx0XHQvL1wiQml0c1wiOiBcIlwiLFxyXG5cclxuXHRcdFwiRmFjZVwiOiBcIkZhY2VcIixcclxuXHRcdFwiSGFpclwiOiBcIkhhaXJcIixcclxuXHR9LFxyXG59O1xyXG5cclxuUmVzb3VyY2VNYW5hZ2VyLmV4dGVybmFsID0ge1xyXG5cdGVxdWlwOiB7XHJcblx0fSxcclxufTtcclxuXHJcblJlc291cmNlTWFuYWdlci5lcXVpcF9tYXAgPSB7XHJcbn07XHJcblxyXG5mb3IgKGxldCBpIGluIEl0ZW1UeXBlSW5mby5FcXVpcCkge1xyXG5cdGxldCBjYXRlID0gSXRlbVR5cGVJbmZvLkVxdWlwW2ldO1xyXG5cclxuXHRSZXNvdXJjZU1hbmFnZXIuZXh0ZXJuYWwuZXF1aXBbY2F0ZV0gPSBbXTtcclxuXHRSZXNvdXJjZU1hbmFnZXIuZXF1aXBfbWFwW2NhdGVdID0gbnVsbDtcclxufVxyXG5mb3IgKGxldCBpID0gMDsgaSA8IDk7ICsraSkge1xyXG5cdGxldCBjYXRlID0gXCJGYWNlXCIgKyBpO1xyXG5cdFJlc291cmNlTWFuYWdlci5leHRlcm5hbC5lcXVpcFtjYXRlXSA9IFtdO1xyXG5cdFJlc291cmNlTWFuYWdlci5lcXVpcF9tYXBbY2F0ZV0gPSBudWxsO1xyXG59XHJcbmZvciAobGV0IGkgPSAwOyBpIDwgODsgKytpKSB7XHJcblx0bGV0IGNhdGUgPSBcIkhhaXJcIiArIGk7XHJcblx0UmVzb3VyY2VNYW5hZ2VyLmV4dGVybmFsLmVxdWlwW2NhdGVdID0gW107XHJcblx0UmVzb3VyY2VNYW5hZ2VyLmVxdWlwX21hcFtjYXRlXSA9IG51bGw7XHJcbn1cclxuXHJcbmFzeW5jIGZ1bmN0aW9uIGxvYWRfZXh0ZXJuYWxfcmVzb3VyY2UodXJsKSB7XHJcblx0dXJsID0gdXJsIHx8IFwiL2l0ZW1zLmpzb25cIjtcclxuXHRsZXQgcmF3O1xyXG5cclxuXHR0cnkge1xyXG5cdFx0cmF3ID0gUmVzb3VyY2VNYW5hZ2VyLl9leHRlcm5hbF9yYXcgPSBKU09OLnBhcnNlKGF3YWl0ICRnZXQuYXNzZXQoXCJlcXVpcC5qc29uXCIpKTtcclxuXHRcdGlmICghcmF3KSB7XHJcblx0XHRcdGRlYnVnZ2VyO1xyXG5cdFx0XHR0aHJvdyBFcnJvcihcIicvZXF1aXAnIGlzIGVtcHR5XCIpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRjYXRjaCAoZXgpIHtcclxuXHRcdHJhdyA9IFJlc291cmNlTWFuYWdlci5fZXh0ZXJuYWxfcmF3ID0gSlNPTi5wYXJzZShhd2FpdCAkZ2V0KFwiLy9sYWJzLm1hcGxlc3RvcnkuaW8vYXBpL2dtcy9sYXRlc3QvaXRlbS9jYXRlZ29yeS9lcXVpcFwiKSk7XHJcblx0XHRpZiAoIXJhdykge1xyXG5cdFx0XHRkZWJ1Z2dlcjtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHRmb3IgKGxldCBpID0gMDsgaSA8IHJhdy5sZW5ndGg7ICsraSkge1xyXG5cdFx0Y29uc3QgaXRlbSA9IHJhd1tpXTtcclxuXHRcdGNvbnN0IGlkID0gU3RyaW5nKGl0ZW0uaWQpLnBhZFN0YXJ0KDgsIFwiMFwiKTtcclxuXHRcdFxyXG5cdFx0dHJ5IHtcclxuXHRcdFx0aWYgKCEoaXRlbS50eXBlSW5mbyAmJiBJdGVtVHlwZUluZm9baXRlbS50eXBlSW5mby5vdmVyYWxsQ2F0ZWdvcnldKSkge1xyXG5cdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRsZXQgY2x6ID0gaXRlbS50eXBlSW5mby5vdmVyYWxsQ2F0ZWdvcnkudG9Mb3dlckNhc2UoKTtcclxuXHRcdFx0bGV0IGNhdGUgPSBJdGVtVHlwZUluZm9baXRlbS50eXBlSW5mby5vdmVyYWxsQ2F0ZWdvcnldW2l0ZW0udHlwZUluZm8uc3ViQ2F0ZWdvcnldO1xyXG5cdFx0XHRpZiAoIWNhdGUpIHtcclxuXHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIGlmIChjYXRlID09IFwiRmFjZVwiKSB7XHJcblx0XHRcdFx0Y2F0ZSArPSBDaGFyYWN0ZXJSZW5kZXJDb25maWcuZ2V0RmFjZUNvbG9yKGlkKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIGlmIChjYXRlID09IFwiSGFpclwiKSB7XHJcblx0XHRcdFx0Y2F0ZSArPSBDaGFyYWN0ZXJSZW5kZXJDb25maWcuZ2V0SGFpckNvbG9yKGlkKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0bGV0IGl0ID0ge1xyXG5cdFx0XHRcdGlkOiBpZCxcclxuXHRcdFx0XHRuYW1lOiBpdGVtLm5hbWUsXHJcblx0XHRcdFx0ZGVzYzogaXRlbS5kZXNjLFxyXG5cdFx0XHRcdGNhc2g6IGl0ZW0uaXNDYXNoID8gMSA6IDAsXHJcblx0XHRcdFx0aWNvbjoge1xyXG5cdFx0XHRcdFx0XCJcIjogYC8vbGFicy5tYXBsZXN0b3J5LmlvL2FwaS9nbXMvbGF0ZXN0L2l0ZW0vJHtpdGVtLmlkfS9pY29uYCxcclxuXHRcdFx0XHR9LFxyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0UmVzb3VyY2VNYW5hZ2VyLmV4dGVybmFsW2Nsel1bY2F0ZV0ucHVzaChpdCk7XHJcblx0XHR9XHJcblx0XHRjYXRjaCAoZXgpIHtcclxuXHRcdFx0Y29uc29sZS5lcnJvcihcImV4dGVybmFsIHJlc291cmNlOiBpZChcIiArIGlkICsgXCIpXCIpO1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKGV4KTtcclxuXHRcdFx0ZGVidWdnZXI7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVfZXh0ZXJuYWxfZXF1aXBfbGlzdCgpIHtcclxuXHRjb25zdCB1cmwgPSBcImh0dHBzOi8vbGFicy5tYXBsZXN0b3J5LmlvL2FwaS9nbXMvbGF0ZXN0L2l0ZW0vY2F0ZWdvcnkvZXF1aXBcIjtcclxuXHRsb2FkX2V4dGVybmFsX3Jlc291cmNlKHVybCkudGhlbigoKSA9PiB7XHJcblx0XHRfY29uY2F0X2V4dGVybmFsX3Jlc291cmNlKGNhdGVnb3J5LCBvcmlnaW5fZGF0YSk7XHJcblx0XHRjb25jYXRfZXh0ZXJuYWxfcmVzb3VyY2UgPSBfY29uY2F0X2V4dGVybmFsX3Jlc291cmNlO1xyXG5cdFx0Y29uc29sZS5sb2coXCJkb25lOiB1cGRhdGVfZXh0ZXJuYWxfZXF1aXBfbGlzdFwiKTtcclxuXHR9KTtcclxufVxyXG5cclxubGV0IGV4dGVybmFsX3Jlc291cmNlX3Byb21pc2UgPSBsb2FkX2V4dGVybmFsX3Jlc291cmNlKCk7XHJcblxyXG53aW5kb3cuY29uY2F0X2V4dGVybmFsX3Jlc291cmNlID0gX2NvbmNhdF9leHRlcm5hbF9yZXNvdXJjZV9wO1xyXG5cclxud2luZG93LnRyaWdnZXJfdXBkYXRlX2V4dGVybmFsX2VxdWlwX2xpc3QgPSBmdW5jdGlvbiAoKSB7XHJcblx0ZXh0ZXJuYWxfcmVzb3VyY2VfcHJvbWlzZSA9IGxvYWRfZXh0ZXJuYWxfcmVzb3VyY2UoKTtcclxuXHR3aW5kb3cuY29uY2F0X2V4dGVybmFsX3Jlc291cmNlID0gX2NvbmNhdF9leHRlcm5hbF9yZXNvdXJjZV9wO1xyXG59XHJcblxyXG5hc3luYyBmdW5jdGlvbiBfY29uY2F0X2V4dGVybmFsX3Jlc291cmNlX3AoY2F0ZWdvcnksIG9yaWdpbl9kYXRhKSB7XHJcblx0YXdhaXQgZXh0ZXJuYWxfcmVzb3VyY2VfcHJvbWlzZTtcclxuXHRfY29uY2F0X2V4dGVybmFsX3Jlc291cmNlKGNhdGVnb3J5LCBvcmlnaW5fZGF0YSk7XHJcblx0Y29uY2F0X2V4dGVybmFsX3Jlc291cmNlID0gX2NvbmNhdF9leHRlcm5hbF9yZXNvdXJjZTtcclxufVxyXG5cclxuZnVuY3Rpb24gX2NvbmNhdF9leHRlcm5hbF9yZXNvdXJjZShjYXRlZ29yeSwgb3JpZ2luX2RhdGEpIHtcclxuXHR0cnkge1xyXG5cdFx0Y29uc3QgbGlzdCA9IFJlc291cmNlTWFuYWdlci5leHRlcm5hbC5lcXVpcFtjYXRlZ29yeV07XHJcblx0XHRpZiAoIWxpc3QpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cdFx0bGV0IGlkX21hcCA9IFJlc291cmNlTWFuYWdlci5lcXVpcF9tYXBbY2F0ZWdvcnldO1xyXG5cclxuXHRcdGlmICghaWRfbWFwKSB7XHJcblx0XHRcdGlkX21hcCA9IG5ldyBNYXAoKTtcclxuXHRcdFx0XHJcblx0XHRcdG9yaWdpbl9kYXRhLmZvckVhY2goaXRlbSA9PiB7XHJcblx0XHRcdFx0aWRfbWFwLnNldChpdGVtLmlkLCBpdGVtKTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHRSZXNvdXJjZU1hbmFnZXIuZXF1aXBfbWFwW2NhdGVnb3J5XSA9IGlkX21hcDtcclxuXHRcdH1cclxuXHJcblx0XHRsaXN0LmZvckVhY2goKGl0ZW0pID0+IHtcclxuXHRcdFx0bGV0IGlkID0gaXRlbS5pZDtcclxuXHRcdFx0aWYgKCFpZF9tYXAuaGFzKGlkKSkge1xyXG5cdFx0XHRcdGl0ZW0uJGZvcmVpZ24gPSB0cnVlO1xyXG5cdFx0XHRcdG9yaWdpbl9kYXRhLnB1c2goaXRlbSk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0bGV0IG9yaV9pdGVtID0gaWRfbWFwLmdldChpZCk7XHJcblx0XHRcdFx0b3JpX2l0ZW0uX25hbWUgPSBpdGVtLm5hbWUgfHwgXCJcIjtcclxuXHRcdFx0XHRvcmlfaXRlbS5fZGVzYyA9IGl0ZW0uZGVzYyB8fCBcIlwiO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHR9XHJcblx0Y2F0Y2ggKGV4KSB7XHJcblx0XHRjb25zb2xlLmVycm9yKGV4KTtcclxuXHRcdGRlYnVnZ2VyO1xyXG5cdH1cclxufVxyXG5cclxud2luZG93LmxvYWRfZXh0ZXJuX2l0ZW1fZGF0YSA9IGFzeW5jIGZ1bmN0aW9uIChpZCkge1xyXG5cdGxldCBfcmF3ID0gSlNPTi5wYXJzZShhd2FpdCAkZ2V0KGAvL2xhYnMubWFwbGVzdG9yeS5pby9hcGkvZ21zL2xhdGVzdC9pdGVtLyR7aWR9YCkpO1xyXG5cdGxldCByYXcgPSB7fTtcclxuXHJcblx0bGV0IGRlZmF1bHRfID0gX3Jhdy5mcmFtZUJvb2tzLmRlZmF1bHQgPyBfcmF3LmZyYW1lQm9va3MuZGVmYXVsdC5mcmFtZXNbMF06bnVsbDtcclxuXHJcblx0Zm9yIChsZXQgaSBpbiBfcmF3LmZyYW1lQm9va3MpIHtcclxuXHRcdGxldCBfYWN0ID0gX3Jhdy5mcmFtZUJvb2tzW2ldO1xyXG5cdFx0bGV0IGFjdCA9IFtdO1xyXG5cclxuXHRcdGZvciAobGV0IGogPSAwOyBqIDwgX2FjdC5mcmFtZXMubGVuZ3RoOyArK2opIHtcclxuXHRcdFx0bGV0IGZyYW1lID0gX2FjdC5mcmFtZXNbal0gfHwgZGVmYXVsdF87XHJcblx0XHRcdGlmICghZnJhbWUgfHwgIWZyYW1lLmVmZmVjdHMpIHtcclxuXHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRsZXQgX2ZyYWdzID0gZnJhbWUuZWZmZWN0cztcclxuXHRcdFx0bGV0IGZyYWdzID0ge307XHJcblx0XHRcdGZvciAobGV0IGsgaW4gX2ZyYWdzKSB7XHJcblx0XHRcdFx0bGV0IF9mcmFnID0gX2ZyYWdzW2tdO1xyXG5cdFx0XHRcdGlmIChfZnJhZy5pbWFnZSkge1xyXG5cdFx0XHRcdFx0ZnJhZ3Nba10gPSB7XHJcblx0XHRcdFx0XHRcdFwiXCI6IFwiZGF0YTppbWFnZS9wbmc7YmFzZTY0LFwiICsgX2ZyYWcuaW1hZ2UsXHJcblx0XHRcdFx0XHRcdFwib3JpZ2luXCI6IF9mcmFnLm9yaWdpbk9yWmVybyB8fCBfZnJhZy5vcmlnaW4gfHwgX2ZyYWcuY2VudGVyLFxyXG5cdFx0XHRcdFx0XHRcIm1hcFwiOiBfZnJhZy5tYXBPZmZzZXQsXHJcblx0XHRcdFx0XHRcdFwielwiOiBfZnJhZy5wb3NpdGlvblxyXG5cdFx0XHRcdFx0fTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGFjdFtqXSA9IGZyYWdzO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJhd1tpXSA9IGFjdDtcclxuXHR9XHJcblxyXG5cdHJhdy5pbmZvID0ge1xyXG5cdFx0aXNsb3Q6IF9yYXcubWV0YUluZm8uZXF1aXAuaXNsb3QsXHJcblx0XHR2c2xvdDogX3Jhdy5tZXRhSW5mby5lcXVpcC52c2xvdCxcclxuXHRcdGljb246IF9yYXcubWV0YUluZm8uaWNvbiA/IChcImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxcIiArIF9yYXcubWV0YUluZm8uaWNvbi5pY29uUmF3KSA6IFwiXCIsXHJcblx0XHRjYXNoOiAoX3Jhdy5tZXRhSW5mby5jYXNoICYmIF9yYXcubWV0YUluZm8uY2FzaC5jYXNoKSA/IDEgOiAwLFxyXG5cdH07XHJcblxyXG5cdHJldHVybiByYXc7XHJcbn1cclxuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./public/javascripts/resource.js\n");

/***/ })

}]);