(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{341:function(t,r,i){"use strict";i.r(r);i(332);var e=i(348);class s{constructor(){this._raw=null}async _load(t){Object.defineProperty(this,"_raw",{value:await $get.data(t)})}_load_top(){this.nw=new e.a(this._raw.nw),this.n=new e.a(this._raw.n),this.ne=new e.a(this._raw.ne)}_load_center(){this.w=new e.a(this._raw.w),this.c=new e.a(this._raw.c),this.e=new e.a(this._raw.e)}_load_bottom(){this.sw=new e.a(this._raw.sw),this.s=new e.a(this._raw.s),this.se=new e.a(this._raw.se)}_load_arrow(){this.arrow=new e.a(this._raw.arrow)}_load_color(t){const r=Number("clr"in this._raw?this._raw.clr:t),i=(((4278190080&r)>>>24|(16777215&r)<<8)>>>0).toString(16).padStart(8,"0");this.color=-1!=this._raw.clr&&this._raw.clr?"#"+i:"white"}_draw_top(t,r,i,e,s){const h=2*e;this.nw.draw2(r,i),this.n._drawPatterncx(x,i,h,this.n.height),this.ne.draw2(r+h,i)}_draw_center(t,r,i,e,s){const h=2*e,a=this.w.width-this.w.x;this.w._drawPattern(r+a,i,this.w.width,s),this.c._drawPattern(r+a,i,h,s),this.e._drawPattern(r+a+h,i,this.e.width,s)}_draw_bottom(t,r,i,e,s){const h=2*e;this.sw.draw2(r,i+s),this.s._drawPattern(r,i+s,e,this.s.height),this.se.draw2(r+h,i+s)}_draw_bottom_and_arrow(t,r,i,e,s){const h=2*e,a=1&this.arrow.width,n=Math.trunc(this.arrow.width/2),w=e-n;this.sw.draw2(r,i+s),this.s._drawPattern(r,i+s,w,this.s.height),this.s._drawPattern(r+e+n+a,i+s,w-a,this.s.height),this.se.draw2(r+h,i+s),this.arrow.draw2(r-n+e,i+s)}}i.d(r,"NameLabel",function(){return h});class h extends s{constructor(){super(),this.style=null,this.color=null,this.w=null,this.c=null,this.e=null}async load(t){if(null==t)throw new TypeError;if(h.cache[t]){let r=h.cache[t];Object.assign(this,r)}else{const r=[this._base_path,t].join("/");this.style=t;let i=this._load(r);h.cache[t]=this,this.$promise=i,await i,delete this.$promise,this._load_center(),this._load_color("white")}}draw(t,r,i,e){const s=t.ctx;s.fillStyle=this.color,s.font="12px 微軟正黑體",s.textAlign="center",s.textBaseline="hanging";let h=this.c.height,a=s.measureText(r).width;const n=i-(a=Math.max(2*this.c.width,a))/2,w=e+Math.min(this.w.y,this.e.y);this.w.draw2(n,w),this.c._drawPattern(n,w,a-this.e.x,h),this.e.draw2(n+a,w),s.fillText(r,i,w)}get _base_path(){return"/UI/NameTag"}static get(t){let r=h.cache[t];return r||(r=new h).load(t),r}}h.cache=window.$images_NameLabel||{},window.$images_NameLabel=h.cache},348:function(t,r,i){"use strict";i.d(r,"b",function(){return h}),i.d(r,"a",function(){return a});var e=i(333),s=(i(332),i(335));class h extends s.Graph{constructor(t,r){t?(super(r,{width:t.__w,height:t.__h}),this._raw=t,r?this._url=r:!1!==h.isTexture(t)&&(this._url=t[""])):super()}static isTexture(t){if(t)if(t.hasOwnProperty("")){if("string"==typeof t[""])return!0}else if(!t.__isEmpty)throw console.group("no texture"),console.warn(t),console.groupEnd(),new Error("no texture");return!1}static isTextureHasData(t){return t&&"string"==typeof t[""]&&t[""].startsWith("data:image/")}set z(t){this._order=t}get z(){return this._order}_get(t,r,i){if(this._raw){if(r in this._raw)return i(this._raw[r])}else;return t}draw(){this._engine.drawGraph(this)}draw2(t,r){this._engine.drawGraph2(this,t-this.x,r-this.y)}draw2i(t,r){this._engine.drawGraph2(this,Math.trunc(t-this.x+.5),Math.trunc(r-this.y+.5))}}class a extends h{constructor(t,r){super(t,r);var i=this._get(new e.Vec2(0,0),"origin",e.Vec2.get);this.x=i.x,this.y=i.y,this.z=this._get(0,"z",Number),this.delay=this._get(100,"delay",Number)}drawPattern(t,r,i,e){if(!this.isLoaded())return;const s=this._engine.ctx;s.save();try{s.rect(t,r,i,e),s.clip();let h=t,a=t+i,n=r+e;for(let t=r;t<n;t+=this.height)for(let r=h;r<a;r+=this.width)this.draw2(r,t)}catch(t){console.error(t)}s.restore()}drawHorizontalPattern(t,r,i){if(!this.isLoaded())return;const e=this._engine.ctx;e.save();try{const e=t+i;for(let i=t;i<e;i+=this.width)this.draw2(i,r)}catch(t){console.error(t)}e.restore()}drawVerticalPattern(t,r,i){if(!this.isLoaded())return;const e=this._engine.ctx;e.save();try{const e=r+i;for(let i=r;i<e;i+=this.height)this.draw2(t,i)}catch(t){console.error(t)}e.restore()}_drawPattern(t,r,i,e){if(!this.isLoaded())return;const s=Math.trunc(i/this.width)*this.width,h=Math.trunc(e/this.height)*this.height,a=t,n=r,w=t+s,o=r+e;let c,d;if(e>=this.height){for(c=n;c<o;c+=this.height)if(i>=this.width){for(d=a;d<w;d+=this.width)this.draw2(d,c);let t=i-s;t>0&&this._engine._drawImage(this,0,0,t,this.height,d-this.x,c-this.y,t,this.height)}else this._engine._drawImage(this,0,0,i,this.height,a-this.x,c-this.y,i,this.height);let t=e-h;t>0&&(console.error(new Error("未完成")),this._engine._drawImage(this,0,0,this.width,t,a-this.x,c-this.y,this.width,t))}else console.error(new Error("未完成")),this._engine._drawImage(this,0,0,this.width,e,a-this.x,n-this.y,this.width,e)}_drawHorizontalPattern(t,r,i){if(!this.isLoaded())return;this._engine.ctx;const e=t+i;for(let i=t;i<e;i+=this.width)this.draw2(i,r)}_drawVerticalPattern(t,r,i){if(!this.isLoaded())return;this._engine.ctx;const e=r+i;for(let i=r;i<e;i+=this.height)this.draw2(t,i)}drawPattern4i(t,r,i,e){this.drawPattern(Math.trunc(t+.5),Math.trunc(r+.5),Math.trunc(i+.5),Math.trunc(e+.5))}drawHorizontalPattern3i(t,r,i){this.drawHorizontalPattern(Math.trunc(t+.5),Math.trunc(r+.5),Math.trunc(i+.5))}drawVerticalPattern3i(t,r,i){this.drawVerticalPattern(Math.trunc(t+.5),Math.trunc(r+.5),Math.trunc(i+.5))}_drawPattern4i(t,r,i,e){this._drawPattern(Math.trunc(t+.5),Math.trunc(r+.5),Math.trunc(i+.5),Math.trunc(e+.5))}_drawHorizontalPattern3i(t,r,i){this._drawHorizontalPattern(Math.trunc(t+.5),Math.trunc(r+.5),Math.trunc(i+.5))}_drawVerticalPattern3i(t,r,i){this._drawVerticalPattern(Math.trunc(t+.5),Math.trunc(r+.5),Math.trunc(i+.5))}}}}]);
//# sourceMappingURL=18.js.map