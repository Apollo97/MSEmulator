(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{327:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "GlobalVar", function() { return GlobalVar; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "$gv", function() { return $gv; });\n/* harmony import */ var _public_javascripts_resource_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(345);\n/* harmony import */ var _IRenderer_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(331);\n/* harmony import */ var _Engine_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(334);\n/* harmony import */ var _math_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(332);\n/* harmony import */ var _Physics_DebugDraw_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(368);\n\ufeff\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass GlobalVar {\r\n\tconstructor() {\r\n\t\tlet isMobile = /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);\r\n\t\tif (isMobile) {\r\n\t\t\tthis.is_mobile = true;\r\n\t\t}\r\n\r\n\t\tif (isMobile) {\r\n\t\t\tthis.m_is_run = false;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.m_is_run = true;\r\n\t\t}\r\n\r\n\t\t{\r\n\t\t\tthis.MAX_FPS = 60;\r\n\t\t\tthis.FRAME_ELAPSED = 1000 / 60;\r\n\t\t\tthis.CANVAS_SCALE = 32;\r\n\t\t}\r\n\r\n\t\t{\r\n\t\t\tif (true) {\r\n\t\t\t\tthis.m_editor_mode = false;\r\n\r\n\t\t\t\tthis.m_display_foothold = false;\r\n\r\n\t\t\t\tthis.m_display_physics_debug = false;\r\n\t\t\t}\r\n\t\t\telse {}\r\n\t\t\tthis.m_display_debug_info = false;\r\n\r\n\t\t\tthis.m_debugDraw = new _Physics_DebugDraw_js__WEBPACK_IMPORTED_MODULE_4__[/* default */ "a"](/*renderer_ctx2d*/);\r\n\r\n\t\t\tthis.m_display_selected_object = false;\r\n\t\t\tthis.m_selected_object = null;\r\n\t\t\tthis.m_hover_object = null;\r\n\t\t}\r\n\r\n\t\t{\r\n\t\t\tthis.m_viewRect = new _math_js__WEBPACK_IMPORTED_MODULE_3__["Rectangle"](0, -768 / 2, 1366, 768);\r\n\r\n\t\t\tif (true) {\r\n\t\t\t\tthis.m_is_rendering_map = true;\r\n\t\t\t}\r\n\t\t\telse {}\r\n\r\n\t\t\tif (true) {\r\n\t\t\t\tthis.m_display_back = true;\r\n\t\t\t\tthis.m_display_front = true;\r\n\t\t\t\tthis.m_display_mapobj = true;\r\n\t\t\t\tthis.m_display_maptile = true;\r\n\t\t\t\tthis.m_display_particle_system = true;\r\n\r\n\t\t\t\tthis.m_display_skeletal_anim = true;\r\n\t\t\t}\r\n\t\t\telse {}\r\n\r\n\t\t\tthis.m_display_portal = true;\r\n\r\n\t\t\tif (true) {\r\n\t\t\t\tthis.m_display_name_label = true;\r\n\t\t\t}\r\n\t\t\telse {}\r\n\r\n\t\t\tthis.m_display_player = true;\r\n\t\t\tthis.m_display_other_player = true;\r\n\t\t\tthis.m_display_life = true;\r\n\t\t\tthis.m_display_npc = true;//??\r\n\t\t\tthis.m_display_mob = true;//??\r\n\r\n\t\t\t//this.m_display_skill;\r\n\t\t\t//this.m_display_mob_skill;\r\n\t\t\t//this.m_display_mob_effect = true;\r\n\t\t\t//this.m_display_mob_etc = true;\r\n\t\t}\r\n\t\t\r\n\t\t{\r\n\t\t\tthis.NameLabel_default_style = "214";\r\n\r\n\t\t\tthis.ChatBalloon_default_style = "212";\r\n\t\t\tthis.ChatBalloon_display_duration = 5000;\r\n\t\t}\r\n\t\t\r\n\t\t{\r\n\t\t\tthis.input_keyDown = {};\r\n\t\t\tthis.input_keyUp = {};\r\n\r\n\t\t\tthis.mouse_move = 0;\r\n\t\t\tthis.mouse_x = 0;\r\n\t\t\tthis.mouse_y = 0;\r\n\t\t\tthis.mouse_dl = 0;\r\n\t\t\tthis.mouse_ul = 0;\r\n\t\t\tthis.mouse_dm = 0;\r\n\t\t\tthis.mouse_um = 0;\r\n\t\t\tthis.mouse_dr = 0;\r\n\t\t\tthis.mouse_ur = 0;\r\n\t\t}\r\n\r\n\t\t{\r\n\t\t\tlet SceneObjectMgr = {};\r\n\r\n\t\t\tSceneObjectMgr.layeredObjects = [];\r\n\t\t\tfor (let i = 0; i < 12; ++i) {\r\n\t\t\t\tlet lo = SceneObjectMgr.layeredObjects[i] = {};\r\n\t\t\t\tObject.defineProperty(lo, "length", {\r\n\t\t\t\t\tenumerable: false,\r\n\t\t\t\t\twritable: true,\r\n\t\t\t\t\tvalue: 0,\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tSceneObjectMgr.Update = function (stamp) {\r\n\t\t\t\tfor (let layer = 0; layer < SceneObjectMgr.layeredObjects.length; ++layer) {\r\n\t\t\t\t\tconst lo = SceneObjectMgr.layeredObjects[layer];\r\n\t\t\t\t\tfor (let uid in lo) {\r\n\t\t\t\t\t\tlet obj = lo[uid];\r\n\t\t\t\t\t\tobj.update(stamp);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tSceneObjectMgr.RenderLayer = function (engine, layer) {\r\n\t\t\t\tconst lo = SceneObjectMgr.layeredObjects[layer];\r\n\t\t\t\tfor (let uid in lo) {\r\n\t\t\t\t\tlet obj = lo[uid];\r\n\t\t\t\t\tobj.render(engine);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tSceneObjectMgr.addToScene = function (layer, obj) {\r\n\t\t\t\tif (Number.isSafeInteger(layer) && layer in SceneObjectMgr.layeredObjects) {\r\n\t\t\t\t\tconst lo = SceneObjectMgr.layeredObjects[layer];\r\n\r\n\t\t\t\t\tobj.$layer = layer;\r\n\t\t\t\t\tobj.$objectid = lo.length;\r\n\r\n\t\t\t\t\tlo[obj.$objectid] = obj;\r\n\r\n\t\t\t\t\tlo.length++;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tthrow new TypeError("layer");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tSceneObjectMgr.destroy = function (obj) {\r\n\t\t\t\tconst layer = obj.$layer;\r\n\t\t\t\tconst uid = obj.$objectid;\r\n\t\t\t\tconst lo = SceneObjectMgr.layeredObjects[layer];\r\n\r\n\t\t\t\tobj.destroy();\r\n\r\n\t\t\t\tdelete lo[uid];\r\n\t\t\t}\r\n\r\n\t\t\tthis.SceneObjectMgr = SceneObjectMgr;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nconst $gv = new GlobalVar();\r\n\r\nwindow.$gv = $gv;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiMzI3LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2dhbWUvaW5pdC5qcz9lOGI2Il0sInNvdXJjZXNDb250ZW50IjpbIu+7v1xyXG5cclxuaW1wb3J0IHsgfSBmcm9tICcuLi8uLi9wdWJsaWMvamF2YXNjcmlwdHMvcmVzb3VyY2UuanMnO1xyXG5cclxuaW1wb3J0IHsgSUdyYXBoIH0gZnJvbSBcIi4vSVJlbmRlcmVyLmpzXCI7XHJcbmltcG9ydCB7IGVuZ2luZSB9IGZyb20gJy4vRW5naW5lLmpzJztcclxuaW1wb3J0IHsgVmVjMiwgUmVjdGFuZ2xlIH0gZnJvbSAnLi9tYXRoLmpzJztcclxuaW1wb3J0IERlYnVnRHJhdyBmcm9tICcuL1BoeXNpY3MvRGVidWdEcmF3LmpzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBHbG9iYWxWYXIge1xyXG5cdGNvbnN0cnVjdG9yKCkge1xyXG5cdFx0bGV0IGlzTW9iaWxlID0gL2lQaG9uZXxpUGFkfGlQb2R8QW5kcm9pZC9pLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCk7XHJcblx0XHRpZiAoaXNNb2JpbGUpIHtcclxuXHRcdFx0dGhpcy5pc19tb2JpbGUgPSB0cnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmIChpc01vYmlsZSkge1xyXG5cdFx0XHR0aGlzLm1faXNfcnVuID0gZmFsc2U7XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0dGhpcy5tX2lzX3J1biA9IHRydWU7XHJcblx0XHR9XHJcblxyXG5cdFx0e1xyXG5cdFx0XHR0aGlzLk1BWF9GUFMgPSA2MDtcclxuXHRcdFx0dGhpcy5GUkFNRV9FTEFQU0VEID0gMTAwMCAvIDYwO1xyXG5cdFx0XHR0aGlzLkNBTlZBU19TQ0FMRSA9IDMyO1xyXG5cdFx0fVxyXG5cclxuXHRcdHtcclxuXHRcdFx0aWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicpIHtcclxuXHRcdFx0XHR0aGlzLm1fZWRpdG9yX21vZGUgPSBmYWxzZTtcclxuXHJcblx0XHRcdFx0dGhpcy5tX2Rpc3BsYXlfZm9vdGhvbGQgPSBmYWxzZTtcclxuXHJcblx0XHRcdFx0dGhpcy5tX2Rpc3BsYXlfcGh5c2ljc19kZWJ1ZyA9IGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdHRoaXMubV9lZGl0b3JfbW9kZSA9IGZhbHNlO1xyXG5cclxuXHRcdFx0XHR0aGlzLm1fZGlzcGxheV9mb290aG9sZCA9IGZhbHNlO1xyXG5cclxuXHRcdFx0XHR0aGlzLm1fZGlzcGxheV9waHlzaWNzX2RlYnVnID0gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0XHR0aGlzLm1fZGlzcGxheV9kZWJ1Z19pbmZvID0gZmFsc2U7XHJcblxyXG5cdFx0XHR0aGlzLm1fZGVidWdEcmF3ID0gbmV3IERlYnVnRHJhdygvKnJlbmRlcmVyX2N0eDJkKi8pO1xyXG5cclxuXHRcdFx0dGhpcy5tX2Rpc3BsYXlfc2VsZWN0ZWRfb2JqZWN0ID0gZmFsc2U7XHJcblx0XHRcdHRoaXMubV9zZWxlY3RlZF9vYmplY3QgPSBudWxsO1xyXG5cdFx0XHR0aGlzLm1faG92ZXJfb2JqZWN0ID0gbnVsbDtcclxuXHRcdH1cclxuXHJcblx0XHR7XHJcblx0XHRcdHRoaXMubV92aWV3UmVjdCA9IG5ldyBSZWN0YW5nbGUoMCwgLTc2OCAvIDIsIDEzNjYsIDc2OCk7XHJcblxyXG5cdFx0XHRpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJykge1xyXG5cdFx0XHRcdHRoaXMubV9pc19yZW5kZXJpbmdfbWFwID0gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRlbHNlIHtcclxuXHRcdFx0XHR0aGlzLm1faXNfcmVuZGVyaW5nX21hcCA9IHRydWU7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nKSB7XHJcblx0XHRcdFx0dGhpcy5tX2Rpc3BsYXlfYmFjayA9IHRydWU7XHJcblx0XHRcdFx0dGhpcy5tX2Rpc3BsYXlfZnJvbnQgPSB0cnVlO1xyXG5cdFx0XHRcdHRoaXMubV9kaXNwbGF5X21hcG9iaiA9IHRydWU7XHJcblx0XHRcdFx0dGhpcy5tX2Rpc3BsYXlfbWFwdGlsZSA9IHRydWU7XHJcblx0XHRcdFx0dGhpcy5tX2Rpc3BsYXlfcGFydGljbGVfc3lzdGVtID0gdHJ1ZTtcclxuXHJcblx0XHRcdFx0dGhpcy5tX2Rpc3BsYXlfc2tlbGV0YWxfYW5pbSA9IHRydWU7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0dGhpcy5tX2Rpc3BsYXlfYmFjayA9IGZhbHNlO1xyXG5cdFx0XHRcdHRoaXMubV9kaXNwbGF5X2Zyb250ID0gZmFsc2U7XHJcblx0XHRcdFx0dGhpcy5tX2Rpc3BsYXlfbWFwb2JqID0gZmFsc2U7XHJcblx0XHRcdFx0dGhpcy5tX2Rpc3BsYXlfbWFwdGlsZSA9IGZhbHNlO1xyXG5cdFx0XHRcdHRoaXMubV9kaXNwbGF5X3BhcnRpY2xlX3N5c3RlbSA9IGZhbHNlO1xyXG5cclxuXHRcdFx0XHR0aGlzLm1fZGlzcGxheV9za2VsZXRhbF9hbmltID0gZmFsc2U7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRoaXMubV9kaXNwbGF5X3BvcnRhbCA9IHRydWU7XHJcblxyXG5cdFx0XHRpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJykge1xyXG5cdFx0XHRcdHRoaXMubV9kaXNwbGF5X25hbWVfbGFiZWwgPSB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdHRoaXMubV9kaXNwbGF5X25hbWVfbGFiZWwgPSBmYWxzZTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5tX2Rpc3BsYXlfcGxheWVyID0gdHJ1ZTtcclxuXHRcdFx0dGhpcy5tX2Rpc3BsYXlfb3RoZXJfcGxheWVyID0gdHJ1ZTtcclxuXHRcdFx0dGhpcy5tX2Rpc3BsYXlfbGlmZSA9IHRydWU7XHJcblx0XHRcdHRoaXMubV9kaXNwbGF5X25wYyA9IHRydWU7Ly8/P1xyXG5cdFx0XHR0aGlzLm1fZGlzcGxheV9tb2IgPSB0cnVlOy8vPz9cclxuXHJcblx0XHRcdC8vdGhpcy5tX2Rpc3BsYXlfc2tpbGw7XHJcblx0XHRcdC8vdGhpcy5tX2Rpc3BsYXlfbW9iX3NraWxsO1xyXG5cdFx0XHQvL3RoaXMubV9kaXNwbGF5X21vYl9lZmZlY3QgPSB0cnVlO1xyXG5cdFx0XHQvL3RoaXMubV9kaXNwbGF5X21vYl9ldGMgPSB0cnVlO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHR7XHJcblx0XHRcdHRoaXMuTmFtZUxhYmVsX2RlZmF1bHRfc3R5bGUgPSBcIjIxNFwiO1xyXG5cclxuXHRcdFx0dGhpcy5DaGF0QmFsbG9vbl9kZWZhdWx0X3N0eWxlID0gXCIyMTJcIjtcclxuXHRcdFx0dGhpcy5DaGF0QmFsbG9vbl9kaXNwbGF5X2R1cmF0aW9uID0gNTAwMDtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0e1xyXG5cdFx0XHR0aGlzLmlucHV0X2tleURvd24gPSB7fTtcclxuXHRcdFx0dGhpcy5pbnB1dF9rZXlVcCA9IHt9O1xyXG5cclxuXHRcdFx0dGhpcy5tb3VzZV9tb3ZlID0gMDtcclxuXHRcdFx0dGhpcy5tb3VzZV94ID0gMDtcclxuXHRcdFx0dGhpcy5tb3VzZV95ID0gMDtcclxuXHRcdFx0dGhpcy5tb3VzZV9kbCA9IDA7XHJcblx0XHRcdHRoaXMubW91c2VfdWwgPSAwO1xyXG5cdFx0XHR0aGlzLm1vdXNlX2RtID0gMDtcclxuXHRcdFx0dGhpcy5tb3VzZV91bSA9IDA7XHJcblx0XHRcdHRoaXMubW91c2VfZHIgPSAwO1xyXG5cdFx0XHR0aGlzLm1vdXNlX3VyID0gMDtcclxuXHRcdH1cclxuXHJcblx0XHR7XHJcblx0XHRcdGxldCBTY2VuZU9iamVjdE1nciA9IHt9O1xyXG5cclxuXHRcdFx0U2NlbmVPYmplY3RNZ3IubGF5ZXJlZE9iamVjdHMgPSBbXTtcclxuXHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCAxMjsgKytpKSB7XHJcblx0XHRcdFx0bGV0IGxvID0gU2NlbmVPYmplY3RNZ3IubGF5ZXJlZE9iamVjdHNbaV0gPSB7fTtcclxuXHRcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobG8sIFwibGVuZ3RoXCIsIHtcclxuXHRcdFx0XHRcdGVudW1lcmFibGU6IGZhbHNlLFxyXG5cdFx0XHRcdFx0d3JpdGFibGU6IHRydWUsXHJcblx0XHRcdFx0XHR2YWx1ZTogMCxcclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0U2NlbmVPYmplY3RNZ3IuVXBkYXRlID0gZnVuY3Rpb24gKHN0YW1wKSB7XHJcblx0XHRcdFx0Zm9yIChsZXQgbGF5ZXIgPSAwOyBsYXllciA8IFNjZW5lT2JqZWN0TWdyLmxheWVyZWRPYmplY3RzLmxlbmd0aDsgKytsYXllcikge1xyXG5cdFx0XHRcdFx0Y29uc3QgbG8gPSBTY2VuZU9iamVjdE1nci5sYXllcmVkT2JqZWN0c1tsYXllcl07XHJcblx0XHRcdFx0XHRmb3IgKGxldCB1aWQgaW4gbG8pIHtcclxuXHRcdFx0XHRcdFx0bGV0IG9iaiA9IGxvW3VpZF07XHJcblx0XHRcdFx0XHRcdG9iai51cGRhdGUoc3RhbXApO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRTY2VuZU9iamVjdE1nci5SZW5kZXJMYXllciA9IGZ1bmN0aW9uIChlbmdpbmUsIGxheWVyKSB7XHJcblx0XHRcdFx0Y29uc3QgbG8gPSBTY2VuZU9iamVjdE1nci5sYXllcmVkT2JqZWN0c1tsYXllcl07XHJcblx0XHRcdFx0Zm9yIChsZXQgdWlkIGluIGxvKSB7XHJcblx0XHRcdFx0XHRsZXQgb2JqID0gbG9bdWlkXTtcclxuXHRcdFx0XHRcdG9iai5yZW5kZXIoZW5naW5lKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdFNjZW5lT2JqZWN0TWdyLmFkZFRvU2NlbmUgPSBmdW5jdGlvbiAobGF5ZXIsIG9iaikge1xyXG5cdFx0XHRcdGlmIChOdW1iZXIuaXNTYWZlSW50ZWdlcihsYXllcikgJiYgbGF5ZXIgaW4gU2NlbmVPYmplY3RNZ3IubGF5ZXJlZE9iamVjdHMpIHtcclxuXHRcdFx0XHRcdGNvbnN0IGxvID0gU2NlbmVPYmplY3RNZ3IubGF5ZXJlZE9iamVjdHNbbGF5ZXJdO1xyXG5cclxuXHRcdFx0XHRcdG9iai4kbGF5ZXIgPSBsYXllcjtcclxuXHRcdFx0XHRcdG9iai4kb2JqZWN0aWQgPSBsby5sZW5ndGg7XHJcblxyXG5cdFx0XHRcdFx0bG9bb2JqLiRvYmplY3RpZF0gPSBvYmo7XHJcblxyXG5cdFx0XHRcdFx0bG8ubGVuZ3RoKys7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0dGhyb3cgbmV3IFR5cGVFcnJvcihcImxheWVyXCIpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRTY2VuZU9iamVjdE1nci5kZXN0cm95ID0gZnVuY3Rpb24gKG9iaikge1xyXG5cdFx0XHRcdGNvbnN0IGxheWVyID0gb2JqLiRsYXllcjtcclxuXHRcdFx0XHRjb25zdCB1aWQgPSBvYmouJG9iamVjdGlkO1xyXG5cdFx0XHRcdGNvbnN0IGxvID0gU2NlbmVPYmplY3RNZ3IubGF5ZXJlZE9iamVjdHNbbGF5ZXJdO1xyXG5cclxuXHRcdFx0XHRvYmouZGVzdHJveSgpO1xyXG5cclxuXHRcdFx0XHRkZWxldGUgbG9bdWlkXTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5TY2VuZU9iamVjdE1nciA9IFNjZW5lT2JqZWN0TWdyO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IGNvbnN0ICRndiA9IG5ldyBHbG9iYWxWYXIoKTtcclxuXHJcbndpbmRvdy4kZ3YgPSAkZ3Y7XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFNQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///327\n')},422:function(module,exports,__webpack_require__){eval("\ufeff\r\nlet LoginPacket = __webpack_require__(423);\r\nlet ChatPacket = __webpack_require__(424);\r\nlet CharacterPacket = __webpack_require__(425);\r\n\r\nlet ex = Object.assign({},\r\n\tLoginPacket,\r\n\tChatPacket,\r\n\tCharacterPacket\r\n);\r\n\r\nmodule.exports = ex;\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDIyLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL0NvbW1vbi9QYWNrZXQvaW5kZXguanM/OTU5ZCJdLCJzb3VyY2VzQ29udGVudCI6WyLvu79cclxubGV0IExvZ2luUGFja2V0ID0gcmVxdWlyZShcIi4vTG9naW5QYWNrZXQuanNcIik7XHJcbmxldCBDaGF0UGFja2V0ID0gcmVxdWlyZShcIi4vQ2hhdFBhY2tldC5qc1wiKTtcclxubGV0IENoYXJhY3RlclBhY2tldCA9IHJlcXVpcmUoXCIuL0NoYXJhY3RlclBhY2tldC5qc1wiKTtcclxuXHJcbmxldCBleCA9IE9iamVjdC5hc3NpZ24oe30sXHJcblx0TG9naW5QYWNrZXQsXHJcblx0Q2hhdFBhY2tldCxcclxuXHRDaGFyYWN0ZXJQYWNrZXRcclxuKTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gZXg7XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///422\n")},423:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "$RequestPacket_SelectChara", function() { return $RequestPacket_SelectChara; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "$ResponsePacket_SelectChara", function() { return $ResponsePacket_SelectChara; });\n/* harmony import */ var _Common_PlayerData__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(369);\n/* harmony import */ var _Common_PlayerData__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_Common_PlayerData__WEBPACK_IMPORTED_MODULE_0__);\n\ufeff\r\n\r\n\r\nclass $RequestPacket_SelectChara {\r\n\tconstructor() {\r\n\t\t/** @type {string} */\r\n\t\tthis.charaId = undefined;\r\n\t}\r\n}\r\nclass $ResponsePacket_SelectChara {\r\n\tconstructor() {\r\n\t\t/** @type {$PlayerData} */\r\n\t\tthis.charaData = null;\r\n\r\n\t\t/** @type {$RemotePlayerData[]} */\r\n\t\tthis.remoteCharacters = null;\r\n\t}\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDIzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL0NvbW1vbi9QYWNrZXQvTG9naW5QYWNrZXQuanM/OTdiNiJdLCJzb3VyY2VzQ29udGVudCI6WyLvu79cclxuaW1wb3J0IHsgQ2hhcmFjdGVyU3RhdCwgJFJlbW90ZVBsYXllckRhdGEsICRQbGF5ZXJEYXRhIH0gZnJvbSBcIi4uLy4uL0NvbW1vbi9QbGF5ZXJEYXRhXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgJFJlcXVlc3RQYWNrZXRfU2VsZWN0Q2hhcmEge1xyXG5cdGNvbnN0cnVjdG9yKCkge1xyXG5cdFx0LyoqIEB0eXBlIHtzdHJpbmd9ICovXHJcblx0XHR0aGlzLmNoYXJhSWQgPSB1bmRlZmluZWQ7XHJcblx0fVxyXG59XHJcbmV4cG9ydCBjbGFzcyAkUmVzcG9uc2VQYWNrZXRfU2VsZWN0Q2hhcmEge1xyXG5cdGNvbnN0cnVjdG9yKCkge1xyXG5cdFx0LyoqIEB0eXBlIHskUGxheWVyRGF0YX0gKi9cclxuXHRcdHRoaXMuY2hhcmFEYXRhID0gbnVsbDtcclxuXHJcblx0XHQvKiogQHR5cGUgeyRSZW1vdGVQbGF5ZXJEYXRhW119ICovXHJcblx0XHR0aGlzLnJlbW90ZUNoYXJhY3RlcnMgPSBudWxsO1xyXG5cdH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///423\n')},424:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "$Packet_CharacterChat", function() { return $Packet_CharacterChat; });\n\ufeff\r\n\r\nclass $Packet_CharacterChat {\r\n\tconstructor() {\r\n\t\t/** @type {number} - chat type */\r\n\t\tthis.type = null;\r\n\r\n\t\t/** @type {number} - ChatBalloon style */\r\n\t\tthis.$style = null;\r\n\r\n\t\t/** @type {string} - chat text */\r\n\t\tthis.text = null;\r\n\t}\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDI0LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL0NvbW1vbi9QYWNrZXQvQ2hhdFBhY2tldC5qcz8wYjFiIl0sInNvdXJjZXNDb250ZW50IjpbIu+7v1xyXG5cclxuZXhwb3J0IGNsYXNzICRQYWNrZXRfQ2hhcmFjdGVyQ2hhdCB7XHJcblx0Y29uc3RydWN0b3IoKSB7XHJcblx0XHQvKiogQHR5cGUge251bWJlcn0gLSBjaGF0IHR5cGUgKi9cclxuXHRcdHRoaXMudHlwZSA9IG51bGw7XHJcblxyXG5cdFx0LyoqIEB0eXBlIHtudW1iZXJ9IC0gQ2hhdEJhbGxvb24gc3R5bGUgKi9cclxuXHRcdHRoaXMuJHN0eWxlID0gbnVsbDtcclxuXHJcblx0XHQvKiogQHR5cGUge3N0cmluZ30gLSBjaGF0IHRleHQgKi9cclxuXHRcdHRoaXMudGV4dCA9IG51bGw7XHJcblx0fVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///424\n')},425:function(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Client_PMovePath__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(353);\n/* harmony import */ var _game_SceneCharacter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(352);\n\ufeff\r\n\r\n\r\n\r\n\r\n//export class $Packet_CharacterMove {\r\n//\tconstructor() {\r\n//\t\t/** @type {string} */\r\n//\t\tthis.id = undefined;\r\n\r\n//\t\t/** @type {CharacterMoveElem[]} */\r\n//\t\tthis.path = [];\r\n\r\n//\t\t/** @type {number} - time stamp */\r\n//\t\tthis.stamp = (new Date().getTime());\r\n//\t}\r\n\r\n//\t/**\r\n//\t * @param {SceneCharacter} chara\r\n//\t */\r\n//\tcapture(chara) {\r\n//\t\tconst phy = chara.$physics;\r\n//\t\tconst body = phy.body;\r\n//\t\tconst crr = chara.renderer;\r\n\r\n//\t\t/** @type {CharacterMoveElem} */\r\n//\t\tlet elem;\r\n\r\n//\t\tif (crr._$old_action != crr._action) {\r\n//\t\t\telem = new CharacterMoveElem();\r\n\r\n//\t\t\telem.action = crr._action;\r\n//\t\t\t//elem.action_frame = crr._action_frame;\r\n//\t\t}\r\n\r\n//\t\tif (crr._$old_emotion != crr._emotion) {\r\n//\t\t\telem = elem || new CharacterMoveElem();\r\n\r\n//\t\t\telem.emotion = crr._emotion;\r\n//\t\t\t//elem.emotion_frame = crr._emotion_frame;\r\n//\t\t}\r\n\r\n//\t\tif (0) {\r\n//\t\t\tconst isAwake = body.IsAwake();\r\n//\t\t\tif (isAwake) {\r\n//\t\t\t\telem = elem || new CharacterMoveElem();\r\n\r\n//\t\t\t\tlet pos = phy.getPosition();\r\n//\t\t\t\t//let vel = body.GetLinearVelocity();\r\n\r\n//\t\t\t\telem.isAwake = isAwake;\r\n\r\n//\t\t\t\telem.x = pos.x;\r\n//\t\t\t\telem.y = pos.y;\r\n//\t\t\t\t//elem.vx = vel.x;\r\n//\t\t\t\t//elem.vy = vel.y;\r\n//\t\t\t\t//elem.fx = force.x;\r\n//\t\t\t\t//elem.fy = force.y;\r\n\r\n//\t\t\t\telem.pState = phy.state;\r\n\r\n//\t\t\t\t//elem.elapsed = (new Date().getTime()) - this.stamp;\r\n//\t\t\t}\r\n//\t\t}\r\n\r\n//\t\tconst pState = phy.$getOutputState();\r\n//\t\tif (pState) {\r\n//\t\t\telem = elem || new CharacterMoveElem();\r\n//\t\t}\r\n\r\n//\t\tconst vel = chara.$physics.body.GetLinearVelocity();\r\n//\t\tif (vel.x != 0 || vel.y != 0) {\r\n//\t\t\telem = elem || new CharacterMoveElem();\r\n//\t\t\t//elem.vx = vel.x;\r\n//\t\t\t//elem.vy = vel.y;\r\n//\t\t}\r\n\r\n//\t\tconst rot = chara.$physics.body.GetAngularVelocity();\r\n//\t\tif (rot != 0) {\r\n//\t\t\telem = elem || new CharacterMoveElem();\r\n//\t\t\t//elem.va = rot;\r\n//\t\t}\r\n\r\n//\t\tif (elem) {\r\n//\t\t\tconst pos = phy.getPosition();\r\n//\t\t\telem.x = pos.x;\r\n//\t\t\telem.y = pos.y;\r\n\t\t\t\r\n//\t\t\telem.isAwake = true;\r\n\r\n//\t\t\telem.pState = pState;\r\n\r\n//\t\t\tthis.path.push(elem);\r\n//\t\t}\r\n//\t}\r\n//}\r\n\r\nclass $CharacterMoveItemElem {\r\n\tconstructor() {\r\n\t\t/** @type {number} */\r\n\t\tthis.from = null;\r\n\r\n\t\t/** @type {number} */\r\n\t\tthis.to = null;\r\n\r\n\t\t/** @type {string} - equip id */\r\n\t\tthis.item = null;\r\n\t}\r\n}\r\nclass $Packet_CharacterMoveItem {\r\n\tconstructor() {\r\n\t\t/** @type {$CharacterMoveItemElem} */\r\n\t\tthis.elem = [];\r\n\t}\r\n}\r\n\r\nclass $Packet_CharacterSkill {\r\n\tconstructor() {\r\n\t\t/** @type {string} */\r\n\t\tthis.skillId = null;\r\n\t}\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDI1LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL0NvbW1vbi9QYWNrZXQvQ2hhcmFjdGVyUGFja2V0LmpzP2JhNzQiXSwic291cmNlc0NvbnRlbnQiOlsi77u/XHJcbmltcG9ydCB7IENoYXJhY3Rlck1vdmVFbGVtIH0gZnJvbSBcIi4uLy4uL0NsaWVudC9QTW92ZVBhdGhcIjtcclxuaW1wb3J0IHsgU2NlbmVDaGFyYWN0ZXIgfSBmcm9tIFwiLi4vLi4vZ2FtZS9TY2VuZUNoYXJhY3RlclwiO1xyXG5cclxuXHJcbi8vZXhwb3J0IGNsYXNzICRQYWNrZXRfQ2hhcmFjdGVyTW92ZSB7XHJcbi8vXHRjb25zdHJ1Y3RvcigpIHtcclxuLy9cdFx0LyoqIEB0eXBlIHtzdHJpbmd9ICovXHJcbi8vXHRcdHRoaXMuaWQgPSB1bmRlZmluZWQ7XHJcblxyXG4vL1x0XHQvKiogQHR5cGUge0NoYXJhY3Rlck1vdmVFbGVtW119ICovXHJcbi8vXHRcdHRoaXMucGF0aCA9IFtdO1xyXG5cclxuLy9cdFx0LyoqIEB0eXBlIHtudW1iZXJ9IC0gdGltZSBzdGFtcCAqL1xyXG4vL1x0XHR0aGlzLnN0YW1wID0gKG5ldyBEYXRlKCkuZ2V0VGltZSgpKTtcclxuLy9cdH1cclxuXHJcbi8vXHQvKipcclxuLy9cdCAqIEBwYXJhbSB7U2NlbmVDaGFyYWN0ZXJ9IGNoYXJhXHJcbi8vXHQgKi9cclxuLy9cdGNhcHR1cmUoY2hhcmEpIHtcclxuLy9cdFx0Y29uc3QgcGh5ID0gY2hhcmEuJHBoeXNpY3M7XHJcbi8vXHRcdGNvbnN0IGJvZHkgPSBwaHkuYm9keTtcclxuLy9cdFx0Y29uc3QgY3JyID0gY2hhcmEucmVuZGVyZXI7XHJcblxyXG4vL1x0XHQvKiogQHR5cGUge0NoYXJhY3Rlck1vdmVFbGVtfSAqL1xyXG4vL1x0XHRsZXQgZWxlbTtcclxuXHJcbi8vXHRcdGlmIChjcnIuXyRvbGRfYWN0aW9uICE9IGNyci5fYWN0aW9uKSB7XHJcbi8vXHRcdFx0ZWxlbSA9IG5ldyBDaGFyYWN0ZXJNb3ZlRWxlbSgpO1xyXG5cclxuLy9cdFx0XHRlbGVtLmFjdGlvbiA9IGNyci5fYWN0aW9uO1xyXG4vL1x0XHRcdC8vZWxlbS5hY3Rpb25fZnJhbWUgPSBjcnIuX2FjdGlvbl9mcmFtZTtcclxuLy9cdFx0fVxyXG5cclxuLy9cdFx0aWYgKGNyci5fJG9sZF9lbW90aW9uICE9IGNyci5fZW1vdGlvbikge1xyXG4vL1x0XHRcdGVsZW0gPSBlbGVtIHx8IG5ldyBDaGFyYWN0ZXJNb3ZlRWxlbSgpO1xyXG5cclxuLy9cdFx0XHRlbGVtLmVtb3Rpb24gPSBjcnIuX2Vtb3Rpb247XHJcbi8vXHRcdFx0Ly9lbGVtLmVtb3Rpb25fZnJhbWUgPSBjcnIuX2Vtb3Rpb25fZnJhbWU7XHJcbi8vXHRcdH1cclxuXHJcbi8vXHRcdGlmICgwKSB7XHJcbi8vXHRcdFx0Y29uc3QgaXNBd2FrZSA9IGJvZHkuSXNBd2FrZSgpO1xyXG4vL1x0XHRcdGlmIChpc0F3YWtlKSB7XHJcbi8vXHRcdFx0XHRlbGVtID0gZWxlbSB8fCBuZXcgQ2hhcmFjdGVyTW92ZUVsZW0oKTtcclxuXHJcbi8vXHRcdFx0XHRsZXQgcG9zID0gcGh5LmdldFBvc2l0aW9uKCk7XHJcbi8vXHRcdFx0XHQvL2xldCB2ZWwgPSBib2R5LkdldExpbmVhclZlbG9jaXR5KCk7XHJcblxyXG4vL1x0XHRcdFx0ZWxlbS5pc0F3YWtlID0gaXNBd2FrZTtcclxuXHJcbi8vXHRcdFx0XHRlbGVtLnggPSBwb3MueDtcclxuLy9cdFx0XHRcdGVsZW0ueSA9IHBvcy55O1xyXG4vL1x0XHRcdFx0Ly9lbGVtLnZ4ID0gdmVsLng7XHJcbi8vXHRcdFx0XHQvL2VsZW0udnkgPSB2ZWwueTtcclxuLy9cdFx0XHRcdC8vZWxlbS5meCA9IGZvcmNlLng7XHJcbi8vXHRcdFx0XHQvL2VsZW0uZnkgPSBmb3JjZS55O1xyXG5cclxuLy9cdFx0XHRcdGVsZW0ucFN0YXRlID0gcGh5LnN0YXRlO1xyXG5cclxuLy9cdFx0XHRcdC8vZWxlbS5lbGFwc2VkID0gKG5ldyBEYXRlKCkuZ2V0VGltZSgpKSAtIHRoaXMuc3RhbXA7XHJcbi8vXHRcdFx0fVxyXG4vL1x0XHR9XHJcblxyXG4vL1x0XHRjb25zdCBwU3RhdGUgPSBwaHkuJGdldE91dHB1dFN0YXRlKCk7XHJcbi8vXHRcdGlmIChwU3RhdGUpIHtcclxuLy9cdFx0XHRlbGVtID0gZWxlbSB8fCBuZXcgQ2hhcmFjdGVyTW92ZUVsZW0oKTtcclxuLy9cdFx0fVxyXG5cclxuLy9cdFx0Y29uc3QgdmVsID0gY2hhcmEuJHBoeXNpY3MuYm9keS5HZXRMaW5lYXJWZWxvY2l0eSgpO1xyXG4vL1x0XHRpZiAodmVsLnggIT0gMCB8fCB2ZWwueSAhPSAwKSB7XHJcbi8vXHRcdFx0ZWxlbSA9IGVsZW0gfHwgbmV3IENoYXJhY3Rlck1vdmVFbGVtKCk7XHJcbi8vXHRcdFx0Ly9lbGVtLnZ4ID0gdmVsLng7XHJcbi8vXHRcdFx0Ly9lbGVtLnZ5ID0gdmVsLnk7XHJcbi8vXHRcdH1cclxuXHJcbi8vXHRcdGNvbnN0IHJvdCA9IGNoYXJhLiRwaHlzaWNzLmJvZHkuR2V0QW5ndWxhclZlbG9jaXR5KCk7XHJcbi8vXHRcdGlmIChyb3QgIT0gMCkge1xyXG4vL1x0XHRcdGVsZW0gPSBlbGVtIHx8IG5ldyBDaGFyYWN0ZXJNb3ZlRWxlbSgpO1xyXG4vL1x0XHRcdC8vZWxlbS52YSA9IHJvdDtcclxuLy9cdFx0fVxyXG5cclxuLy9cdFx0aWYgKGVsZW0pIHtcclxuLy9cdFx0XHRjb25zdCBwb3MgPSBwaHkuZ2V0UG9zaXRpb24oKTtcclxuLy9cdFx0XHRlbGVtLnggPSBwb3MueDtcclxuLy9cdFx0XHRlbGVtLnkgPSBwb3MueTtcclxuXHRcdFx0XHJcbi8vXHRcdFx0ZWxlbS5pc0F3YWtlID0gdHJ1ZTtcclxuXHJcbi8vXHRcdFx0ZWxlbS5wU3RhdGUgPSBwU3RhdGU7XHJcblxyXG4vL1x0XHRcdHRoaXMucGF0aC5wdXNoKGVsZW0pO1xyXG4vL1x0XHR9XHJcbi8vXHR9XHJcbi8vfVxyXG5cclxuY2xhc3MgJENoYXJhY3Rlck1vdmVJdGVtRWxlbSB7XHJcblx0Y29uc3RydWN0b3IoKSB7XHJcblx0XHQvKiogQHR5cGUge251bWJlcn0gKi9cclxuXHRcdHRoaXMuZnJvbSA9IG51bGw7XHJcblxyXG5cdFx0LyoqIEB0eXBlIHtudW1iZXJ9ICovXHJcblx0XHR0aGlzLnRvID0gbnVsbDtcclxuXHJcblx0XHQvKiogQHR5cGUge3N0cmluZ30gLSBlcXVpcCBpZCAqL1xyXG5cdFx0dGhpcy5pdGVtID0gbnVsbDtcclxuXHR9XHJcbn1cclxuY2xhc3MgJFBhY2tldF9DaGFyYWN0ZXJNb3ZlSXRlbSB7XHJcblx0Y29uc3RydWN0b3IoKSB7XHJcblx0XHQvKiogQHR5cGUgeyRDaGFyYWN0ZXJNb3ZlSXRlbUVsZW19ICovXHJcblx0XHR0aGlzLmVsZW0gPSBbXTtcclxuXHR9XHJcbn1cclxuXHJcbmNsYXNzICRQYWNrZXRfQ2hhcmFjdGVyU2tpbGwge1xyXG5cdGNvbnN0cnVjdG9yKCkge1xyXG5cdFx0LyoqIEB0eXBlIHtzdHJpbmd9ICovXHJcblx0XHR0aGlzLnNraWxsSWQgPSBudWxsO1xyXG5cdH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///425\n")},478:function(module,exports){eval("/* (ignored) *///# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDc4LmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vL3dzIChpZ25vcmVkKT83N2EwIl0sInNvdXJjZXNDb250ZW50IjpbIi8qIChpZ25vcmVkKSAqLyJdLCJtYXBwaW5ncyI6IkFBQUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///478\n")},483:function(module,__webpack_exports__,__webpack_require__){"use strict";eval('__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./src/game/init.js\nvar init = __webpack_require__(327);\n\n// EXTERNAL MODULE: ./src/game/math.js\nvar math = __webpack_require__(332);\n\n// EXTERNAL MODULE: ./src/game/IRenderer.js\nvar IRenderer = __webpack_require__(331);\n\n// EXTERNAL MODULE: ./src/game/Engine.js + 1 modules\nvar Engine = __webpack_require__(334);\n\n// EXTERNAL MODULE: ./src/game/Animation.js\nvar Animation = __webpack_require__(333);\n\n// EXTERNAL MODULE: ./src/game/Map.js + 3 modules\nvar Map = __webpack_require__(354);\n\n// EXTERNAL MODULE: ./src/game/SceneCharacter.js + 3 modules\nvar SceneCharacter = __webpack_require__(352);\n\n// EXTERNAL MODULE: ./node_modules/socket.io-client/lib/index.js\nvar lib = __webpack_require__(469);\nvar lib_default = /*#__PURE__*/__webpack_require__.n(lib);\n\n// EXTERNAL MODULE: ./src/Client/PMovePath.js\nvar PMovePath = __webpack_require__(353);\n\n// EXTERNAL MODULE: ./src/Common/Packet/index.js\nvar Packet = __webpack_require__(422);\n\n// EXTERNAL MODULE: ./src/index.js\nvar src = __webpack_require__(374);\n\n// CONCATENATED MODULE: ./src/Client/Client.js\n\ufeff\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n//debug\r\n//debug\r\n\r\n//debug\r\n\r\nclass $Socket {\r\n\t/**\r\n\t * socket.emit(eventName[, ...args])\r\n\t * return server answer\r\n\t * @param {string} eventName\r\n\t * @param {any} data\r\n\t * @returns {Promise<any>}\r\n\t */\r\n\temit(eventName, data) {\r\n\t}\r\n\ton(eventName, callback) {\r\n\t}\r\n\tonce(eventName, data) {\r\n\t}\r\n}\r\n\r\nclass Client_Client {\r\n\tconstructor() {\r\n\t\t/** @type {$Socket} */\r\n\t\tthis.socket = null;\r\n\r\n\t\t/** @type {{[id:string]:SceneCharacter}} */\r\n\t\tthis.charaMap = {};\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string} charaId\r\n\t * @param {function(SceneCharacter)} cbfunc\r\n\t */\r\n\t_findChara(charaId, cbfunc) {\r\n\t\tif (false) {}\r\n\t\t/** @type {SceneCharacter} */\r\n\t\tlet chara = this.charaMap[charaId];\r\n\r\n\t\tif (chara) {\r\n\t\t\tcbfunc.call(this, chara);\r\n\t\t}\r\n\t\t//else {\r\n\t\t//\talert(`chara[\'${charaId}\'] not exist`);\r\n\t\t//}\r\n\t}\r\n\t/**\r\n\t * _addRemoteCharaPacketListener(eventName, fnAck(...))\r\n\t * @param {string} eventName\r\n\t * @param {function(...any, function(...any):void)} listener\r\n\t */\r\n\t_addRemoteCharaPacketListener(eventName, listener) {\r\n\t\tthis.socket.on(eventName, (...args) => {\r\n\t\t\t/** @type {string} */\r\n\t\t\tlet charaId = args[0].id;\r\n\r\n\t\t\t/** @type {SceneCharacter} */\r\n\t\t\tlet chara = this.charaMap[charaId];\r\n\r\n\t\t\tif (chara) {\r\n\t\t\t\tlistener.call(this, chara, ...args);//listener(chara, packet[, ...packet], fnAck)\r\n\t\t\t}\r\n\t\t\t//else {\r\n\t\t\t//\talert(`chara[\'${charaId}\'] not exist`);\r\n\t\t\t//}\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t * @type {string} server_href\r\n\t * @returns {Promise<$Socket>}\r\n\t */\r\n\tasync connect(server_href) {\r\n\t\treturn await new Promise((resolve, reject) => {\r\n\t\t\tlet socket;\r\n\t\t\t\r\n\t\t\tsocket = lib_default()(server_href);\r\n\t\t\t\r\n\t\t\tsocket.on("connect", () => {\r\n\t\t\t\tthis.socket = socket;\r\n\t\t\t\t\r\n\t\t\t\twindow.$io = this.socket;\r\n\t\t\t\t\r\n\t\t\t\tconst emit = socket.$emit = socket.emit;\r\n\t\t\t\t\r\n\t\t\t\tsocket.emit = function (eventName, data) {\r\n\t\t\t\t\t//let cbfunc = arguments[arguments.length - 1];\r\n\t\t\t\t\t//if (typeof cbfunc == \'function\') {\r\n\t\t\t\t\t//\temit(eventName, data, cbfunc);\r\n\t\t\t\t\t//}\r\n\t\t\t\t\t//else {\r\n\t\t\t\t\t\treturn new Promise(function (resolve, reject) {\r\n\t\t\t\t\t\t\temit.call(socket, eventName, data, function (...args) {\r\n\t\t\t\t\t\t\t\tresolve.apply(this, args);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t//}\r\n\t\t\t\t};\r\n\t\t\t\t\r\n\t\t\t\tresolve(socket);\r\n\t\t\t});\r\n\t\t\tsocket.on("disconnect", () => {\r\n\t\t\t\t//window.location.reload();\r\n\t\t\t});\r\n\t\t\tsocket.on("connect_error", error => {\r\n\t\t\t\tsocket.disconnect();\r\n\t\t\t\treject(error);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\t/** @type {SceneMap} */\r\n\tget $scene_map() {\r\n\t\treturn window.scene_map;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string} account\r\n\t * @param {string} password\r\n\t */\r\n\tasync login(account, password) {\r\n\t\tlet result = await this.socket.emit("login", {\r\n\t\t\taccount: "aaa",\r\n\t\t\tpassword: "aaa",\r\n\t\t});\r\n\t\tif (result) {\r\n\t\t\tconsole.info("login");\r\n\t\t}\r\n\t\telse {\r\n\t\t\tconsole.info("login failed");\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * @param {number} world\r\n\t * @param {number} channel\r\n\t */\r\n\tasync selectWorld(world, channel) {\r\n\t\tlet result = await this.socket.emit("selectWorld", {\r\n\t\t\tworld: 0,\r\n\t\t\tchannel: 0,\r\n\t\t});\r\n\t\tif (result) {\r\n\t\t\tconsole.info("selectWorld");\r\n\t\t}\r\n\t\telse {\r\n\t\t\tconsole.info("selectWorld failed");\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * @param {any} charID\r\n\t */\r\n\tasync selectChara(charID) {\r\n\t\t/** @type {$RequestPacket_SelectChara} */\r\n\t\tlet req = new Packet["$RequestPacket_SelectChara"]();\r\n\t\t\r\n\t\t/** @type {$Packet_SelectChara} */\r\n\t\tlet ackPacket = await this.socket.emit("selectChara", {\r\n\t\t\tid: 123,\r\n\t\t});\r\n\t\tconst charaData = ackPacket.charaData;\r\n\t\tconst remoteCharacters = ackPacket.remoteCharacters;\r\n\r\n\t\tif (charaData) {\r\n\t\t\ttry {\r\n\t\t\t\tawait this.$scene_map.load(charaData.mapId);\r\n\t\t\t\t\r\n\t\t\t\tlet task1 = this._CreateMyCharacter(charaData);\r\n\t\t\t\tlet task2 = this.onEnterRemoteChara(remoteCharacters);\r\n\t\t\t\t\r\n\t\t\t\tawait Promise.all([task1, task2]);\r\n\t\t\t}\r\n\t\t\tcatch (ex) {\r\n\t\t\t\tconsole.error(ex);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\talert("selectChara: chara not exist");\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * online mode\r\n\t */\r\n\tasync _CreateMyCharacter(charaData) {\r\n\t\t/** @type {SceneCharacter} */\r\n\t\tlet chara = await src["app"].store.dispatch(\'_createChara\', {\r\n\t\t\templace: {\r\n\t\t\t\tid: charaData.id,\r\n\t\t\t\tcode: charaData.equips_code,\r\n\t\t\t}\r\n\t\t});\r\n\t\tthis.chara = chara;\r\n\r\n\t\tchara._$data = chara._$data || {\r\n\t\t\tguildId: "",//guildId == guildName\r\n\t\t\tpartyId: "",//partyId == partyName\r\n\t\t}\r\n\t}\r\n\t/**\r\n\t * offline mode\r\n\t * @param {{id:string,equips_code:string}} charaData\r\n\t */\r\n\tstatic async _CreateMyCharacter(charaData) {//??\r\n\t\t/** @type {SceneCharacter} */\r\n\t\tlet chara = await src["app"].store.dispatch(\'_createChara\', {\r\n\t\t\templace: {\r\n\t\t\t\tid: charaData.id,\r\n\t\t\t\tcode: charaData.equips_code,\r\n\t\t\t}\r\n\t\t});\r\n\t\tchara = chara;\r\n\r\n\t\tchara._$data = chara._$data || {\r\n\t\t\tguildId: "",//guildId == guildName\r\n\t\t\tpartyId: "",//partyId == partyName\r\n\t\t}\r\n\r\n\t\treturn chara;\r\n\t}\r\n\t/**\r\n\t * @param {$RemotePlayerData[]} packet - characters\r\n\t * @returns {Promise<void>}\r\n\t */\r\n\tonEnterRemoteChara(packet) {\r\n\t\tconst characters = packet;\r\n\r\n\t\tlet tasks = characters.map(charaData => {\r\n\t\t\treturn src["app"].store.dispatch(\'_createChara\', {\r\n\t\t\t\tremote_chara: {\r\n\t\t\t\t\tid: charaData.id,\r\n\t\t\t\t\tcode: charaData.equips_code,\r\n\t\t\t\t}\r\n\t\t\t}).then((...args) => {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst world = this.$scene_map.controller;\r\n\r\n\t\t\t\t\t/** @type {SceneRemoteCharacter} */\r\n\t\t\t\t\tlet chara = args[0];\r\n\r\n\t\t\t\t\tthis.charaMap[chara.id] = chara;\r\n\t\t\t\t}\r\n\t\t\t\tcatch (ex) {\r\n\t\t\t\t\talert(err.message);\r\n\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t\treturn Promise.all(tasks);\r\n\t}\r\n\r\n\t/**\r\n\t * @param {{ id: string }} packet\r\n\t */\r\n\tonLeaveRemoteChara(packet) {\r\n\t\tconst remoteId = packet.id;\r\n\r\n\t\tsrc["app"].store.dispatch(\'deleteCharacter\', {\r\n\t\t\tid: remoteId,\r\n\t\t\tleave: true,\r\n\t\t}).then(() => {\r\n\t\t\tconsole.log("onLeaveRemoteChara[%o]", remoteId);\r\n\t\t}, (reason) => {\r\n\t\t\tconsole.log("onLeaveRemoteChara[%o]: %o", remoteId, reason);\r\n\t\t});\r\n\t\tdelete this.charaMap[packet.id];\r\n\t}\r\n\r\n\t/**\r\n\t * @param {MobMoveElem} packet\r\n\t */\r\n\tonMobMove(packet) {\r\n\t\t/** @type {SceneMap} */\r\n\t\tlet scene_map = window.scene_map;\r\n\r\n\t\tif (!this.chara) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (this.chara.$objectid == packet.controllerOwner) {\r\n\t\t}\r\n\t\telse if (true) {\r\n\t\t\tconst elements = packet.elements;\r\n\t\t\tscene_map.lifeMgr.entities.forEach(life => {\r\n\t\t\t\tconst elem = elements[life.$objectid];\r\n\t\t\t\tif (life.spawn.type == "m" && elem) {\r\n\t\t\t\t\t/** @type {MapMob} *///SceneMob\r\n\t\t\t\t\tconst mob = life;\r\n\t\t\t\t\tmob.$controllerOwner = packet.controllerOwner;\r\n\t\t\t\t\tmob.$move(elem);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\telse {}\r\n\t}\r\n\r\n\t/**\r\n\t * @param {SceneCharacter} chara\r\n\t * @param {$Packet_RemoteChat} packet\r\n\t * @param {function(...any):void} fnAck\r\n\t */\r\n\tonRemoteChat(chara, packet, fnAck) {\r\n\t\tchara.chatCtrl.style = packet.style;\r\n\t\tchara.chatCtrl.enter(packet.text);\r\n\t\tapp.vue.$refs.statusBar.pushChatHistory(packet.type, packet.style, packet.text);\r\n\t}\r\n\t/**\r\n\t * @param {SceneCharacter} chara\r\n\t * @param {$Packet_CharacterMove} packet\r\n\t * @param {function(...any):void} fnAck\r\n\t */\r\n\tonRemoteCharaMove(chara, packet, fnAck) {\r\n\t\tchara.$move(packet);\r\n\t}\r\n\t/**\r\n\t * @param {SceneCharacter} chara\r\n\t * @param {$Packet_RemoteCharaAnim} packet\r\n\t * @param {function(...any):void} fnAck\r\n\t */\r\n\tonRemoteCharaAnim(chara, packet, fnAck) {\r\n\t\tchara.$anim(packet);\r\n\t}\r\n\r\n\t/**\r\n\t * @param {SceneCharacter} chara\r\n\t * @param {} packet\r\n\t * @param {function(...any):void} fnAck\r\n\t */\r\n\tonRemoteCharaSkill(chara, packet, fnAck) {\r\n\t\tchara.invokeSkill(packet.skillId);\r\n\t}\r\n\r\n\t/**\r\n\t * @param {SceneCharacter} chara\r\n\t * @param {} packet\r\n\t * @param {function(...any):void} fnAck\r\n\t */\r\n\tonRemoteAvatarModified(chara, packet, fnAck) {\r\n\t\tchara.renderer.use(packet.itemId);\r\n\t}\r\n\r\n\tasync $test() {\r\n\t\tthis.socket.on("enterRemoteChara", this.onEnterRemoteChara.bind(this));\r\n\t\tthis.socket.on("leaveRemoteChara", this.onLeaveRemoteChara.bind(this));\r\n\r\n\t\tthis.socket.on("mobMove", this.onMobMove.bind(this));\r\n\r\n\t\tthis._addRemoteCharaPacketListener("remoteChat", this.onRemoteChat);\r\n\t\tthis._addRemoteCharaPacketListener("remoteCharaMove", this.onRemoteCharaMove);\r\n\t\tthis._addRemoteCharaPacketListener("remoteCharaAnim", this.onRemoteCharaAnim);\r\n\t\tthis._addRemoteCharaPacketListener("remoteCharaSkill", this.onRemoteCharaSkill);\r\n\t\tthis._addRemoteCharaPacketListener("remoteAvatarModified", this.onRemoteAvatarModified);\r\n\r\n\t\tawait this.login("aaa", "aaa");\r\n\r\n\t\tawait this.selectWorld(0, 0);\r\n\r\n\t\tawait this.selectChara(0);\r\n\t}\r\n}\r\n\r\n\r\n\r\n\n// CONCATENATED MODULE: ./src/game/GameState.js\n\ufeff\r\n\r\n\r\n\r\n//debug\r\n\r\n//debug\r\n\r\n\r\nclass GameState {\r\n\tconstructor(scene, chara) {\r\n\t\t/** @type {string} */\r\n\t\tthis.map_id = scene.map_id;\r\n\r\n\t\tif (chara.renderer) {\r\n\t\t\t/** @type {string} */\r\n\t\t\tthis.chara = chara.renderer._stringify(false);\r\n\t\t\turl += "&chara=" + this.chara;\r\n\t\t}\r\n\t}\r\n}\r\n\r\nclass GameState_GameStateManager {\r\n\tconstructor() {\r\n\t\tthrow new Error("");\r\n\t}\r\n\r\n\t/**\r\n\t * @param {SceneMap} scene\r\n\t * @param {SceneCharacter} chara\r\n\t */\r\n\tstatic PushState(scene, chara) {\r\n\t\tif (!scene) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet state = {};\r\n\t\tlet url = "?map=" + scene.map_id;\r\n\r\n\t\tstate.map_id = scene.map_id;\r\n\r\n\t\tif (chara && chara.renderer) {\r\n\t\t\tstate.chara = chara.renderer._stringify(false);\r\n\t\t\turl += "&chara=" + state.chara;\r\n\t\t}\r\n\r\n\t\thistory.pushState(state, scene._window_title, url);\r\n\r\n\t\tdocument.title = scene._window_title;\r\n\t}\r\n\t/**\r\n\t * @param {string} map_id\r\n\t * @param {string} chara_code\r\n\t */\r\n\tstatic PushStateString(map_id, chara_code) {\r\n\t\tif (!map_id) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tlet state = {};\r\n\r\n\t\tlet url = "?map=" + map_id;\r\n\t\tstate.map_id = map_id;\r\n\r\n\t\tif (chara_code) {\r\n\t\t\tstate.chara = chara_code;\r\n\t\t\turl += "&chara=" + state.chara;\r\n\t\t}\r\n\r\n\t\thistory.pushState(state, scene._window_title, url);\r\n\r\n\t\tdocument.title = scene._window_title;\r\n\t}\r\n\tstatic async PopState(state) {\r\n\t\tif (!state) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tif (state.chara && window.chara && window.chara.renderer) {\r\n\t\t\tlet _old_c = window.chara.renderer._stringify(false);\r\n\t\t\tif (state.chara != _old_c) {\r\n\t\t\t\twindow.chara.renderer._parse(state.chara);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tClient_Client._CreateMyCharacter({\r\n\t\t\t\tid: "chara_1",\r\n\t\t\t\tequips_code: state.chara,\r\n\t\t\t});\r\n\t\t\t//await gApp.store.dispatch(\'_createChara\', {\r\n\t\t\t//\templace: {\r\n\t\t\t//\t\tid: "chara_1",\r\n\t\t\t//\t\tcode: state.chara,\r\n\t\t\t//\t}\r\n\t\t\t//});\r\n\t\t}\r\n\r\n\t\tif (scene_map && scene_map.map_id != state.map_id) {\r\n\t\t\tawait scene_map.load(state.map_id);\r\n\t\t}\r\n\t}\r\n}\r\n\n// EXTERNAL MODULE: ./src/game/Skill.js\nvar Skill = __webpack_require__(358);\n\n// EXTERNAL MODULE: ./src/game/MobSkill/238.FairyDust.js\nvar _238_FairyDust = __webpack_require__(376);\n\n// EXTERNAL MODULE: ./src/game/Renderer/DamageNumber.js\nvar DamageNumber = __webpack_require__(377);\n\n// EXTERNAL MODULE: ./src/game/Renderer/SceneRenderer.js\nvar SceneRenderer = __webpack_require__(367);\n\n// CONCATENATED MODULE: ./src/game/Cursor.js\n\r\n\r\nclass CursorPicker {\r\n\tconstructor() {\r\n\t\t/** @type {string} */\r\n\t\tthis.type = null;\r\n\t\t/** @type {any} */\r\n\t\tthis.data = null;\r\n\t}\r\n}\r\n\r\n\r\nclass CursorAnimationFrame {\r\n\tconstructor() {\r\n\t\t/** @type {string} */\r\n\t\tthis.url = null;\r\n\t\t/** @type {number} */\r\n\t\tthis.x = 0;\r\n\t\t/** @type {number} */\r\n\t\tthis.y = 0;\r\n\t\t/** @type {number} - time in millisecond */\r\n\t\tthis.delay = 0;\r\n\t}\r\n}\r\n\r\nclass CursorAnimationData {\r\n\tconstructor() {\r\n\t\t/** @type {CursorAnimationFrame[]} */\r\n\t\tthis.frames = [];\r\n\r\n\t\t/** @type {number} - time in millisecond */\r\n\t\tthis.duration = 0;\r\n\t}\r\n\t/**\r\n\t * @param {string} url\r\n\t * @returns {Promise<number>} - index\r\n\t */\r\n\tasync addFrameFromUrl(url) {\r\n\t\tlet raw = await $get.data(url);\r\n\t\treturn this.addFrame("images" + url, raw.origin.x, raw.origin.y, raw.delay);\r\n\t}\r\n\t/**\r\n\t * @param {string} url\r\n\t * @param {number} x\r\n\t * @param {number} y\r\n\t * @param {number} delay\r\n\t * @returns {number} - index\r\n\t */\r\n\taddFrame(url, x, y, delay) {\r\n\t\tif (!url) {\r\n\t\t\tthrow new TypeError();\r\n\t\t}\r\n\t\tconst i = this.frames.length;\r\n\t\tlet frame = new CursorAnimationFrame();\r\n\r\n\t\tframe.url = url;\r\n\t\tframe.x = x | 0;\r\n\t\tframe.y = y | 0;\r\n\t\tframe.delay = delay | 0;\r\n\r\n\t\tthis.frames.push(frame);\r\n\r\n\t\tthis.duration += frame.delay; \r\n\r\n\t\treturn i;\r\n\t}\r\n\tasync load(url) {\r\n\t\tlet raw = await $get.data(url);\r\n\r\n\t\tfor (let i = 0, frame = raw[i]; frame; ++i, frame = raw[i]) {\r\n\t\t\tlet img = {};\r\n\r\n\t\t\tthis.addFrame(\r\n\t\t\t\t["images", url, i].join("/"),\r\n\t\t\t\tframe.origin.x,\r\n\t\t\t\tframe.origin.y,\r\n\t\t\t\tframe.delay\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\nclass Cursor  {\r\n\tconstructor(/*raw, url*/) {\r\n\t\t///** @type {Animation} */\r\n\t\t//this.ani = null;\r\n\t}\r\n\t//async createAnimation(url) {\r\n\t//\tlet raw = await $get.data(url);\r\n\t//\tthis.ani = new Animation(raw, url);\r\n\t//\tawait this.ani.load();\r\n\t//}\r\n\r\n\t/**\r\n\t * @param {CursorAnimationData} data\r\n\t * @param {string} selector\r\n\t * @param {string} keyword\r\n\t */\r\n\tstatic createToCSS(data, selector, keyword) {\r\n\t\tconst id = "Cursor" + Math.trunc(Math.random() * 0xFFFFFFFF).toString(16);\r\n\r\n\t\tconst { frames, duration } = data;\r\n\r\n\t\tlet cssText = `${selector}:hover {\\n`;\r\n\r\n\t\tcssText += `cursor: url(${frames[0].url}) ${frames[0].x} ${frames[0].y}, ${keyword};\\n`;\r\n\r\n\t\tif (duration) {\r\n\t\t\tcssText += `animation-name: ${id}_keyframes;\\n`;\r\n\t\t\tcssText += `animation-duration: ${duration}ms;\\n`;\r\n\t\t\tcssText += `animation-iteration-count: infinite;\\n`;\r\n\t\t\tcssText += "}\\n";\r\n\r\n\t\t\tlet tt = 0;\r\n\t\t\t{\r\n\t\t\t\tcssText += `@keyframes ${id}_keyframes {\\n`;\r\n\r\n\t\t\t\tfor (let i = 0; i < frames.length; ++i) {\r\n\t\t\t\t\tconst frame = frames[i];\r\n\r\n\t\t\t\t\tlet start = Math.trunc((tt / duration) * 100);\r\n\r\n\t\t\t\t\tcssText += `${start}% { cursor: url(${frames[i].url}) ${frames[i].x} ${frames[i].y}, ${keyword}; }\\n`;\r\n\r\n\t\t\t\t\ttt += frame.delay;\r\n\t\t\t\t}\r\n\t\t\t\t//cssText += `100% { cursor: url(${frames[0].url}) ${frames[0].x} ${frames[0].y}; }\\n`;\r\n\r\n\t\t\t\tcssText += "}\\n";\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tcssText += "}";\r\n\t\t}\r\n\t\t\r\n\t\tvar x = document.createElement("STYLE");\r\n\t\tvar t = document.createTextNode(cssText);\r\n\t\tx.id = id;\r\n\t\tx.appendChild(t);\r\n\t\tdocument.head.appendChild(x);\r\n\r\n\t\treturn x;\r\n\t}\r\n}\r\n\n// EXTERNAL MODULE: ./src/ui/UIAnimationManager.js\nvar UIAnimationManager = __webpack_require__(416);\n\n// CONCATENATED MODULE: ./src/game/main.js\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "Game", function() { return main_Game; });\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n//import { SceneCharacter } from \'./SceneCharacter.js\';\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n//debug\r\n//debug\r\n\r\n\r\n\r\n\r\n\r\n\r\nSceneRenderer["a" /* sceneRenderer */].addLayerBack(12);\r\n\r\nwindow.SCREEN_PRINTLN = function (getText, getValue) {\r\n\tif (arguments.length == 2) {\r\n\t\twindow._SCREEN_PRINTLN.push({ getText, getValue });\r\n\t}\r\n\telse if (arguments.length == 1) {\r\n\t\twindow._SCREEN_PRINTLN.push(arguments[0]);\r\n\t}\r\n}\r\nwindow._SCREEN_PRINTLN = [];\r\n\r\nvar animationRequestID = null;\r\n\r\nwindow.addEventListener("popstate", function (e) {\r\n\tGameState_GameStateManager.PopState(e.state);\r\n});\r\n\r\n\r\n///////////////////////////////////////////////////////////////////////////////\r\n//\r\n///////////////////////////////////////////////////////////////////////////////\r\n\r\nfunction createCursor_clickable() {\r\n\tlet data = new CursorAnimationData();\r\n\r\n\tlet task1 = data.addFrameFromUrl("/UI/Basic/Cursor/0/0").then(function (i) {\r\n\t\tdata.frames[i].delay = 200;\r\n\t});\r\n\r\n\tlet task2 = data.addFrameFromUrl("/UI/Basic/Cursor/12/0").then(function (i) {\r\n\t\tdata.frames[i].delay = 200;\r\n\t});\r\n\r\n\treturn Promise.all([task1, task2]).then(function () {\r\n\t\tdata.duration = 400;\r\n\r\n\t\tCursor.createToCSS(data, ".ui-clickable", "pointer");\r\n\t});\r\n}\r\n\r\ncreateCursor_clickable();\r\n\r\n///////////////////////////////////////////////////////////////////////////////\r\n//\r\n///////////////////////////////////////////////////////////////////////////////\r\n\r\n\r\n/**\r\n * @param {KeyboardEvent} e\r\n */\r\nwindow.onkeydown = function (e) {\r\n\tif (e.target != document.body) {\r\n\t\treturn;\r\n\t}\r\n\tlet k = e.key;\r\n\r\n\tif (k != null && !$gv.input_keyDown[k]) {\r\n\t\t$gv.input_keyDown[k] != null ? (++$gv.input_keyDown[k]) : ($gv.input_keyDown[k] = 1);\r\n\t}\r\n\r\n\tif (e.code == \'Space\') {\r\n\t\t$("#m_is_run").click();\r\n\t}\r\n\tif (e.code == "F2") {\r\n\t\t$gv.m_editor_mode = !$gv.m_editor_mode;\r\n\t}\r\n}\r\n\r\nwindow.onkeyup = function (e) {\r\n\tif (e.target != document.body) {\r\n\t\treturn;\r\n\t}\r\n\tlet k = e.key;\r\n\r\n\tif (k != null && $gv.input_keyDown[k]) {\r\n\t\t$gv.input_keyDown[k] = 0;\r\n\t\t$gv.input_keyUp[k] = 1;\r\n\t}\r\n}\r\n\r\nObject.defineProperty(window, "$m_is_run", {\r\n\tget: function () {\r\n\t\treturn $("#m_is_run").attr("checked");\r\n\t}, \r\n\tset: function (value) {\r\n\t\t$("#m_is_run").attr("checked", !value);\r\n\t\t$("#m_is_run").click();\r\n\t}\r\n});\r\n\r\n/**\r\n * @param {MouseEvent} e\r\n */\r\nwindow.onmousedown = function (e) {\r\n\tif ($gv.m_editor_mode) {\r\n\t\tif (!e.target.classList.contains("Editor")) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\tif (e.which == 1) {\r\n\t\t$gv.mouse_dl = 1;\r\n\t\t$gv.mouse_ul = 0;\r\n\t}\r\n\telse if (e.which == 2) {\r\n\t\t$gv.mouse_dm = 1;\r\n\t\t$gv.mouse_um = 0;\r\n\t}\r\n\telse if (e.which == 3) {\r\n\t\t$gv.mouse_dr = 1;\r\n\t\t$gv.mouse_ur = 0;\r\n\t}\r\n\t$gv.mouse_x = e.pageX;\r\n\t$gv.mouse_y = e.pageY;\r\n}\r\n\r\n/**\r\n * @param {MouseEvent} e\r\n */\r\nwindow.onmouseup = function (e) {\r\n\tif ($gv.m_editor_mode) {\r\n\t\tif (!e.target.classList.contains("Editor")) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\tif (e.which == 1) {\r\n\t\t$gv.mouse_dl = 0;\r\n\t\t$gv.mouse_ul = 1;\r\n\t}\r\n\telse if (e.which == 2) {\r\n\t\t$gv.mouse_dm = 0;\r\n\t\t$gv.mouse_um = 1;\r\n\t}\r\n\telse if (e.which == 3) {\r\n\t\t$gv.mouse_dr = 0;\r\n\t\t$gv.mouse_ur = 1;\r\n\t}\r\n\t$gv.mouse_x = e.pageX;\r\n\t$gv.mouse_y = e.pageY;\r\n}\r\n\r\n/**\r\n * @param {MouseEvent} e\r\n */\r\nwindow.onmousemove = function (e) {\r\n\tif ($gv.m_editor_mode) {\r\n\t\tif (!e.target.classList.contains("Editor")) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\t$gv.mouse_x = e.pageX;\r\n\t$gv.mouse_y = e.pageY;\r\n\t$gv.mouse_move = 1;\r\n}\r\n\r\n///////////////////////////////////////////////////////////////////////////////\r\n//\r\n///////////////////////////////////////////////////////////////////////////////\r\n\r\n\r\nclass main_Game {\r\n\tconstructor() {\r\n\t\tthis.timer = 0;\r\n\t\tthis.timer_ = 0;\r\n\t\tthis._dTimer = 0;\r\n\t\tthis.fps_arr = [];\r\n\t\tthis.frame_s_arr = [];\r\n\t\t\r\n\t\t//this.chara = null;\r\n\t\t\r\n\t\t/** @type {SceneMap} */\r\n\t\tthis.scene_map = new Map["c" /* SceneMap */]();\r\n\r\n\t\twindow.scene_map = this.scene_map;\r\n\t\t$gv.scene_map = window;\r\n\r\n\t\tscene_map.onload = function () {\r\n\t\t\tGameState_GameStateManager.PushState(this, window.chara);\r\n\t\t}\r\n\t\t\r\n\t\tthis._loop = this._loop.bind(this);\r\n\t\t\r\n\t\tdocument.getElementById("m_is_run").onchange = (function (e) {\r\n\t\t\tthis.m_is_run = e.target.checked ? true : false;\r\n\t\t\tif (this.m_is_run) {\r\n\t\t\t\tanimationRequestID = requestAnimationFrame(this._loop);\r\n\t\t\t\tdocument.getElementById("Screenshot").innerHTML = "";\r\n\t\t\t}\r\n\t\t}).bind(this);\r\n\r\n\t\tthis._$moveViewportSpeed = 10;//debug\r\n\t}\r\n\t\r\n\tmoveViewport(inBound) {\r\n\t\tconst scene_map = this.scene_map;\r\n\r\n\t\tconst speed = $gv.input_keyDown[\'z\'] ? (this._$moveViewportSpeed * 10) : this._$moveViewportSpeed;\r\n\r\n\t\t//$gv.m_viewRect = scene_map.viewArea(new Vec2($gv.m_viewRect.left, $gv.m_viewRect.top));\r\n\r\n\t\tif ($gv.input_keyDown[\'ArrowLeft\'] > 0) {\r\n\t\t\t$gv.m_viewRect.left -= speed;\r\n\t\t}\r\n\t\tif ($gv.input_keyDown[\'ArrowRight\'] > 0) {\r\n\t\t\t$gv.m_viewRect.left += speed;\r\n\t\t}\r\n\t\tif ($gv.input_keyDown[\'ArrowUp\'] > 0) {\r\n\t\t\t$gv.m_viewRect.top -= speed;\r\n\t\t}\r\n\t\tif ($gv.input_keyDown[\'ArrowDown\'] > 0) {\r\n\t\t\t$gv.m_viewRect.top += speed;\r\n\t\t}\r\n\r\n\t\tlet { left, top, right, bottom } = scene_map.mapBound;\r\n\r\n\t\tif (inBound) {\r\n\t\t\tif ($gv.m_viewRect.left < left) {\r\n\t\t\t\t$gv.m_viewRect.left = left;\r\n\t\t\t}\r\n\t\t\tif ($gv.m_viewRect.right > right) {\r\n\t\t\t\t$gv.m_viewRect.left = right - $gv.m_viewRect.width;\r\n\t\t\t}\r\n\t\t\tif ($gv.m_viewRect.top < top) {\r\n\t\t\t\t$gv.m_viewRect.top = top;\r\n\t\t\t}\r\n\t\t\tif ($gv.m_viewRect.bottom > bottom) {\r\n\t\t\t\t$gv.m_viewRect.top = bottom - $gv.m_viewRect.height;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * @param {string} server\r\n\t */\r\n\tasync _$startClient(server) {\r\n\t\tif (scene_map) {\r\n\t\t\tlet client = new Client_Client();\r\n\t\t\t\r\n\t\t\ttry {\r\n\t\t\t\tawait client.connect(server);\r\n\t\t\t\tconsole.log("start client");\r\n\t\t\t}\r\n\t\t\tcatch (err) {\r\n\t\t\t\tconsole.error(err);\r\n\t\t\t\tconsole.log("start offline");\r\n\t\t\t\tthis._$start_offline();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tsrc["app"].client = client;\r\n\t\t\tclient.$test();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tdebugger;\r\n\t\t}\r\n\t}\r\n\t_$start_offline() {\r\n\t\tlet params = _parseUrlParameter();\r\n\t\tlet map_id;\r\n\t\r\n\t\tif (true) {\r\n\t\t\tmap_id = params["map"] || window.DEFAULT_MAP_ID;\r\n\t\t}\r\n\t\telse {}\r\n\t\r\n\t\tlet chara_code = params["chara"] || "c,00002012,00012012,00026509|00026509,00034873|00034873,01051429,01072392";\r\n\t\r\n\t\tGameState_GameStateManager.PopState({\r\n\t\t\tmap_id: map_id,\r\n\t\t\tchara: chara_code,\r\n\t\t});\r\n\t}\r\n\r\n\t/** @type {boolean} */\r\n\tget _isMapReady() {\r\n\t\tconst scene_map = this.scene_map;\r\n\t\treturn scene_map && scene_map.isLoaded();\r\n\t}\r\n\t\r\n\tasync run() {\r\n\t\tconsole.log("begin render");\r\n\t\tthis._loop(0);//start render\r\n\t}\r\n\t\r\n\tasync forceUpdateScreen() {\r\n\t\tconst chara = this.chara;\r\n\t\t\r\n\t\tthis._updateScene(0);\r\n\t\t\r\n\t\tchara.renderer.__forceUpdate(0);\r\n\t\t\r\n\t\tif (this.m_is_run) {\r\n\t\t\tawait chara.renderer.waitLoaded();\r\n\t\t\tchara.renderer.__require_update = true;//update once\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tawait chara.renderer.waitLoaded();\r\n\t\tawait chara.renderer._waitFrameTexturesLoaded();\r\n\t\tawait IRenderer["IGraph"].waitAllLoaded();\r\n\t\t\r\n\t\tdocument.getElementById("Screenshot").innerHTML = "";\r\n\t\t\r\n\t\tchara.renderer.__require_update = true;//update once\r\n\t\t\r\n\t\tthis._loop(0);\r\n\t}\r\n\r\n\t/**\r\n\t * @param {number} stamp\r\n\t */\r\n\t_calcFPS(stamp) {\r\n\t\ttry {\r\n\t\t\tif ((this.timer - this.timer_) >= 1000) {\r\n\t\t\t\tif (this.fps_arr.length) {\r\n\t\t\t\t\tlet sum = this.fps_arr.reduce(function (a, b) { return a + b; });\r\n\t\t\t\t\tlet avg = sum / this.fps_arr.length;\r\n\t\t\t\t\t\r\n\t\t\t\t\t$gv.FPS = avg;\r\n\t\t\t\t\t\r\n\t\t\t\t\tdocument.getElementById("FPS").innerHTML = avg.toFixed(2);\r\n\t\t\t\t}\r\n\t\t\t\tif (this.frame_s_arr.length) {\r\n\t\t\t\t\tlet sum = this.frame_s_arr.reduce(function (a, b) { return a + b; });\r\n\t\t\t\t\tlet avg = sum / this.frame_s_arr.length;\r\n\t\t\t\t\t\r\n\t\t\t\t\t$gv.frameCount = avg;\r\n\t\t\t\t\t\r\n\t\t\t\t\tdocument.getElementById("frame").innerHTML = avg.toFixed(2);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.frame_s_arr = [];\r\n\t\t\t\tthis.fps_arr = [];\r\n\r\n\t\t\t\tthis.timer_ = this.timer;\r\n\t\t\t}\r\n\t\t\telse if (stamp > 0 && Number.isFinite(stamp)) {\r\n\t\t\t\tthis.fps_arr.push(1000 / stamp);\r\n\t\t\t\tthis.frame_s_arr.push(stamp);\r\n\t\t\t}\r\n\t\t}\r\n\t\tcatch (ex) {\r\n\t\t\tdebugger;\r\n\t\t\tdocument.getElementById("FPS").innerHTML = "-";\r\n\t\t\tdocument.getElementById("frame").innerHTML = "-";\r\n\t\t\tthis.fps_arr = [];\r\n\t\t\tthis.frame_s_arr = [];\r\n\t\t}\r\n\t}\r\n\r\n\t_requestNextFrame() {\r\n\t\tif (this.m_is_run) {\r\n\t\t\tanimationRequestID = requestAnimationFrame(this._loop);\r\n\t\t}\r\n\t\telse {\r\n\t\t\t//async\r\n\t\t\tsetTimeout(function () {\r\n\t\t\t\tlet elem = new Image();\r\n\t\t\t\telem.src = Engine["engine"]._canvas.toDataURL();\r\n\t\t\t\tEngine["engine"].ctx.clearRect(0, 0, Engine["engine"].ctx.width, Engine["engine"].ctx.height);\r\n\t\t\t\tdocument.getElementById("Screenshot").appendChild(elem);\r\n\t\t\t}, 0);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @param {number} stamp\r\n\t */\r\n\t_updateScene(stamp) {\r\n\t\t/** @type {SceneCharacter} */\r\n\t\tconst chara = this.chara;\r\n\r\n\t\t/** @type {SceneCharacter[]} */\r\n\t\tconst charaList = this.charaList;\r\n\r\n\t\t{\r\n\t\t\tif (this._isMapReady) {\r\n\t\t\t\tscene_map.update(stamp);//include world.update\r\n\t\t\t}\r\n\r\n\t\t\t// before world.update ??\r\n\t\t\tfor (let i = 0; i < charaList.length; ++i) {\r\n\t\t\t\tcharaList[i].update(stamp);\r\n\t\t\t}\r\n\r\n\t\t\t$gv.SceneObjectMgr.Update(stamp);\r\n\r\n\t\t\tSkill["a" /* EffectManager */].Update(stamp);\r\n\t\t}\r\n\t\tif (window.$io) {\r\n\t\t\tconst client = src["app"].client;//not offline character\r\n\r\n\t\t\tif (client && client.chara) {\r\n\t\t\t\t/** @type {SceneCharacter} */\r\n\t\t\t\tconst ch = client.chara;\r\n\r\n\t\t\t\tch.$emitMovePacket();\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tSceneRenderer["a" /* sceneRenderer */].update(stamp);\r\n\t\t\r\n\t\tDamageNumber["a" /* damageNumberLayer */].update(stamp);\r\n\t}\r\n\t\r\n\t_renderScene() {\r\n\t\tif (this._isMapReady) {\r\n\t\t\tthis._render_map_ready();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis._render_map_loading();\r\n\t\t}\r\n\t}\r\n\t_render_map_ready() {\r\n\t\t/** @type {SceneCharacter} */\r\n\t\tconst chara = this.chara;\r\n\r\n\t\t/** @type {SceneCharacter[]} */\r\n\t\tconst charaList = this.charaList;\r\n\t\t\r\n\t\tEngine["engine"].beginScene();\r\n\t\t{\r\n\t\t\tEngine["engine"].loadIdentity();\r\n\t\t\tEngine["engine"].clearDrawScreen();\r\n\t\t\t\r\n\t\t\t$gv.m_viewRect.size = Engine["engine"].screen_size;\r\n\t\t\tif (!$gv.m_editor_mode) {\r\n\t\t\t\tif (chara && chara.renderer) {\r\n\t\t\t\t\t$gv.m_viewRect.setCenter(chara.renderer.x, chara.renderer.y);\r\n\t\t\t\t}\r\n\t\t\t\telse if (scene_map.controller.player) {\r\n\t\t\t\t\tconst pos = scene_map.controller.player.getPosition();\r\n\t\t\t\t\tconst px = Math.trunc(pos.x * $gv.CANVAS_SCALE + 0.5);\r\n\t\t\t\t\tconst py = Math.trunc(pos.y * $gv.CANVAS_SCALE + 0.5);\r\n\t\t\t\t\t$gv.m_viewRect.setCenter(px, py);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif ($gv.m_editor_mode) {\r\n\t\t\t\tthis.moveViewport(false);\r\n\t\t\t}\r\n\t\t\tif ($gv.m_is_rendering_map) {\r\n\t\t\t\tscene_map.beginRender(Engine["engine"]);\r\n\t\t\t\t{\r\n\t\t\t\t\tscene_map.renderBackground(Engine["engine"]);\r\n\t\t\t\t\t//if ($gv.m_display_life && scene_map._raw.info.mirror_Bottom) {\r\n\t\t\t\t\t//\tengine.ctx.setTransform(1, 0, 0, 1, 0, 0);\r\n\t\t\t\t\t//\tengine.ctx.translate(Math.trunc(-$gv.m_viewRect.x), Math.trunc(-$gv.m_viewRect.y));\r\n\t\t\t\t\t//\tengine.ctx.scale(1, -1);\r\n\t\t\t\t\t//\tfor (let i = 0; i < scene_map.layeredObject.length; ++i) {\r\n\t\t\t\t\t//\t\tscene_map.renderLife(engine, i);\r\n\t\t\t\t\t//\t}\r\n\t\t\t\t\t//}\r\n\t\t\t\t\tfor (let i = 0; i < scene_map.layeredObject.length; ++i) {\r\n\t\t\t\t\t\tscene_map.renderLayeredObject(Engine["engine"], i);\r\n\t\t\t\t\t\tscene_map.renderLayeredTile(Engine["engine"], i);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tscene_map.applyCamera(Engine["engine"]);\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif ($gv.m_display_other_player) {\r\n\t\t\t\t\t\t\t\tfor (let chara_index = 0; chara_index < charaList.length; ++chara_index) {\r\n\t\t\t\t\t\t\t\t\tif (charaList[chara_index] == chara) {\r\n\t\t\t\t\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\telse if (charaList[chara_index].$layer == i) {\r\n\t\t\t\t\t\t\t\t\t\tcharaList[chara_index].render(Engine["engine"]);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tscene_map.renderLife(Engine["engine"], i);\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif ($gv.m_display_player && chara) {\r\n\t\t\t\t\t\t\t\tif ((chara.$layer == null || chara.$layer == i) && chara.renderer) {\r\n\t\t\t\t\t\t\t\t\tchara.render(Engine["engine"]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t$gv.SceneObjectMgr.RenderLayer(Engine["engine"], i);\r\n\t\t\t\t\t\t\t//\r\n\t\t\t\t\t\t\tSceneRenderer["a" /* sceneRenderer */].renderLayer(Engine["engine"], i);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tscene_map.applyCamera(Engine["engine"]);\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tfor (let i = scene_map.layeredObject.length; i < 12; ++i) {\r\n\t\t\t\t\t\t\t$gv.SceneObjectMgr.RenderLayer(Engine["engine"], i);\r\n\t\t\t\t\t\t\t//\r\n\t\t\t\t\t\t\tSceneRenderer["a" /* sceneRenderer */].renderLayer(Engine["engine"], i);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tscene_map.endRender(Engine["engine"]);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t//TODO: layer\r\n\t\t\t\t\r\n\t\t\t\tfor (let i = 0; i < SceneRenderer["a" /* sceneRenderer */].layers.length; ++i) {\r\n\t\t\t\t\tSceneRenderer["a" /* sceneRenderer */].renderLayer(Engine["engine"], i);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif ($gv.m_display_other_player || $gv.m_display_player) {\r\n\t\t\t\t\tscene_map.applyCamera(Engine["engine"]);\r\n\t\t\t\t\t\r\n\t\t\t\t\tfor (let i = 0; i < charaList.length; ++i) {\r\n\t\t\t\t\t\tif (charaList[i] != chara && $gv.m_display_other_player) {\r\n\t\t\t\t\t\t\tcharaList[i].render(Engine["engine"]);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ($gv.m_display_player && chara) {\r\n\t\t\t\t\t\tchara.render(Engine["engine"]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tSkill["a" /* EffectManager */].Render(Engine["engine"]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tDamageNumber["a" /* damageNumberLayer */].render(Engine["engine"]);\r\n\r\n\t\t\tfor (let i = 0; i < charaList.length; ++i) {\r\n\t\t\t\tcharaList[i]._$drawName(Engine["engine"]);\r\n\t\t\t}\r\n\t\t\tfor (let i = 0; i < charaList.length; ++i) {\r\n\t\t\t\tcharaList[i]._$drawChatBalloon(Engine["engine"]);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif ($gv.m_is_rendering_map) {\r\n\t\t\t\tscene_map.beginRender(Engine["engine"]);\r\n\t\t\t\t{\r\n\t\t\t\t\tscene_map.applyCamera(Engine["engine"]);\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tscene_map.renderPortal(Engine["engine"]);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tscene_map.renderFrontground(Engine["engine"]);\r\n\t\t\t\t}\r\n\t\t\t\tscene_map.endRender(Engine["engine"]);\r\n\t\t\t\t\r\n\t\t\t\tscene_map.renderParticle(Engine["engine"]);\r\n\r\n\t\t\t\tscene_map.applyCamera(Engine["engine"]);\r\n\t\t\t\t{\r\n\t\t\t\t\tSkill["a" /* EffectManager */].Render(Engine["engine"]);\r\n\t\t\t\t}\r\n\t\t\t\tEngine["engine"].loadIdentity();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t{\r\n\t\t\t\tscene_map.applyCamera(Engine["engine"]);\r\n\t\t\t\t\r\n\t\t\t\tif ($gv.m_display_debug_info) {\r\n\t\t\t\t\t/** @type {CanvasRenderingContext2D} */\r\n\t\t\t\t\tconst ctx = Engine["engine"].ctx;\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tctx.beginPath();\r\n\r\n\t\t\t\t\t\tctx.fillStyle = "white";\r\n\t\t\t\t\t\tctx.fillRect(0, 0, 96, 50);\r\n\r\n\t\t\t\t\t\tctx.fillStyle = "black";\r\n\t\t\t\t\t\tctx.fillText("map origin", 5, 14, 96);\r\n\r\n\t\t\t\t\t\tctx.fillText("view-x: " + $gv.m_viewRect.x.toFixed(0), 5, 30, 96);\r\n\r\n\t\t\t\t\t\tctx.fillText("view-y: " + $gv.m_viewRect.y.toFixed(0), 5, 46, 96);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tscene_map.controller.render(Engine["engine"]);\r\n\t\t\t\t\r\n\t\t\t\tEngine["engine"].loadIdentity();\r\n\t\t\t\t\r\n\t\t\t\tif ($gv.m_display_debug_info) {\r\n\t\t\t\t\tthis._render_debug_info();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tEngine["engine"].endScene();\r\n\t}\r\n\t_render_map_loading() {\r\n\t\tconst ctx = Engine["engine"].ctx;\r\n\t\tconst screen_width = Engine["engine"].screen_size.x;\r\n\t\tconst screen_height = Engine["engine"].screen_size.y;\r\n\t\tconst scr_hw = screen_width * 0.5;\r\n\t\tconst scr_hh = screen_height * 0.5;\r\n\t\t\r\n\t\tctx.font = "2em 微軟正黑體";\r\n\t\tctx.textAlign = "center";\r\n\t\tctx.textBaseline = "center";\r\n\t\t\r\n\t\tctx.fillStyle = "white";\r\n\t\tctx.fillText("loading...", scr_hw, scr_hh);\r\n\t\t\r\n\t\tctx.strokeStyle = "black";\r\n\t\tctx.fillText("loading...", scr_hw, scr_hh);\r\n\t}\r\n\r\n\t_render_debug_info() {\r\n\t\tif (!(scene_map.controller && scene_map.controller.player)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t/** @type {CanvasRenderingContext2D} */\r\n\t\tconst ctx = Engine["engine"].ctx;\r\n\r\n\t\tconst ta = ctx.textAlign, tb = ctx.textBaseline, lw = ctx.lineWidth;\r\n\t\tctx.textBaseline = "top";\r\n\t\tctx.lineWidth = 2.5;\r\n\t\tctx.strokeStyle = "#000";\r\n\t\tlet x = 400, y = 5;\r\n\t\tfor (let line of window._SCREEN_PRINTLN) {\r\n\t\t\tconst val = line.getValue();\r\n\t\t\tconst text = line.getText();\r\n\r\n\t\t\tctx.fillStyle = "#FFF";\r\n\t\t\t{\r\n\t\t\t\tctx.textAlign = "right";\r\n\t\t\t\tctx.strokeText(text, x - 2, y);\r\n\t\t\t\tctx.fillText(text, x - 2, y);\r\n\r\n\t\t\t\tctx.textAlign = "center";\r\n\t\t\t\tctx.strokeText(":", x, y);\r\n\t\t\t\tctx.fillText(":", x, y);\r\n\r\n\t\t\t\tctx.textAlign = "left";\r\n\t\t\t\tctx.strokeText(val, x + 2, y);\r\n\t\t\t\tctx.fillText(val, x + 2, y);\r\n\t\t\t}\r\n\r\n\t\t\tif ("_val" in line) {\r\n\t\t\t\tlet _val;\r\n\t\t\t\tif (line._val != val) {\r\n\t\t\t\t\t_val = line._val;//display new value\r\n\t\t\t\t\tline.__val = line._val;\r\n\t\t\t\t\tline._val = val;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t_val = line.__val;//display old value\r\n\t\t\t\t}\r\n\t\t\t\tif (_val != val) {\r\n\t\t\t\t\tctx.fillStyle = "#0FF";\r\n\t\t\t\t}\r\n\r\n\t\t\t\tctx.fillStyle = "#FFF";\r\n\t\t\t\t{\r\n\t\t\t\t\tctx.textAlign = "right";\r\n\t\t\t\t\tctx.strokeText(text, x - 2 + 200, y);\r\n\t\t\t\t\tctx.fillText(text, x - 2 + 200, y);\r\n\r\n\t\t\t\t\tctx.textAlign = "center";\r\n\t\t\t\t\tctx.strokeText(":", x + 200, y);\r\n\t\t\t\t\tctx.fillText(":", x + 200, y);\r\n\r\n\t\t\t\t\tctx.textAlign = "left";\r\n\t\t\t\t\tctx.strokeText(_val, x + 2 + 200, y);\r\n\t\t\t\t\tctx.fillText(_val, x + 2 + 200, y);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tline.__val = val;\r\n\t\t\t\tline._val = val;\r\n\t\t\t}\r\n\r\n\t\t\ty += 16;\r\n\t\t}\r\n\t\tctx.textAlign = ta;\r\n\t\tctx.textBaseline = tb;\r\n\t\tctx.lineWidth = lw;\r\n\t}\r\n\t\r\n\t/**\r\n\t * @param {DOMHighResTimeStamp} timeStamp\r\n\t */\r\n\t_loop(timeStamp) {\r\n\t\tconst scene_map = this.scene_map;\r\n\t\tconst stamp = timeStamp - this.timer;\r\n\t\t\r\n\t\tthis.timer = timeStamp;\r\n\r\n\t\tthis._requestNextFrame();\r\n\r\n\t\tthis._calcFPS(stamp);\r\n\t\r\n\t\tthis._updateScene(stamp);\r\n\r\n\t\tthis._renderScene();\r\n\t\t\r\n\t\tfor (let i in $gv.input_keyDown) {\r\n\t\t\tif ($gv.input_keyDown[i] > 0) {\r\n\t\t\t\t++$gv.input_keyDown[i];\r\n\t\t\t}\r\n\t\t}\r\n\t\tfor (let i in $gv.input_keyUp) {\r\n\t\t\t$gv.input_keyUp[i] = 0;\r\n\t\t}\r\n\t\t\r\n\t\tUIAnimationManager["b" /* uiAnimationManager */].update(stamp);\r\n\t}\r\n\t\r\n\tget chara() {\r\n\t\treturn window.chara;\r\n\t}\r\n\t//set chara(value) {\r\n\t//\twindow.chara = value;\r\n\t//}\r\n\r\n\tget charaList() {\r\n\t\treturn src["app"].store.state.charaList;\r\n\t}\r\n\t\r\n\tget m_is_run() {\r\n\t\treturn window.m_is_run;\r\n\t}\r\n\tset m_is_run(value) {\r\n\t\twindow.m_is_run = value;\r\n\t}\r\n}\r\n\r\n\r\n///////////////////////////////////////////////////////////////////////////////\r\n//\r\n///////////////////////////////////////////////////////////////////////////////\r\n\r\nfunction _parseUrlParameter() {\r\n\tlet sPageURL = decodeURIComponent(window.location.search.substring(1));\r\n\tlet sURLVariables = sPageURL.split("&");\r\n\tlet params = {};\r\n\r\n\tfor (let i = 0; i < sURLVariables.length; ++i) {\r\n\t\tlet sParameter = sURLVariables[i].split("=");\r\n\r\n\t\tparams[sParameter[0]] = sParameter[1];\r\n\t}\r\n\r\n\treturn params;\r\n};\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNDgzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL0NsaWVudC9DbGllbnQuanM/YzRmNSIsIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZS9HYW1lU3RhdGUuanM/ODI1MCIsIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZS9DdXJzb3IuanM/ZjI2MiIsIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZS9tYWluLmpzPzk2ZWYiXSwic291cmNlc0NvbnRlbnQiOlsi77u/XHJcbmltcG9ydCBpbyBmcm9tIFwic29ja2V0LmlvLWNsaWVudFwiO1xyXG5cclxuaW1wb3J0IHsgR2FtZVN0YXRlTWFuYWdlciB9IGZyb20gXCIuLi9nYW1lL0dhbWVTdGF0ZS5qc1wiO1xyXG5cclxuaW1wb3J0IHsgU2NlbmVNYXAgfSBmcm9tIFwiLi4vZ2FtZS9NYXAuanNcIjtcclxuaW1wb3J0IHsgU2NlbmVDaGFyYWN0ZXIsIFNjZW5lUmVtb3RlQ2hhcmFjdGVyIH0gZnJvbSBcIi4uL2dhbWUvU2NlbmVDaGFyYWN0ZXIuanNcIjtcclxuXHJcbmltcG9ydCB7IENoYXJhY3Rlck1vdmVFbGVtLCBNb2JNb3ZlRWxlbSB9IGZyb20gXCIuLi9DbGllbnQvUE1vdmVQYXRoLmpzXCI7Ly9kZWJ1Z1xyXG5pbXBvcnQgeyAkUmVxdWVzdFBhY2tldF9TZWxlY3RDaGFyYSwgJFJlc3BvbnNlUGFja2V0X1NlbGVjdENoYXJhLFxyXG5cdFx0ICRQYWNrZXRfUmVtb3RlQ2hhdCxcclxuXHRcdCAkUGFja2V0X0NoYXJhY3Rlck1vdmUsXHJcblx0XHR9IGZyb20gXCIuLi9Db21tb24vUGFja2V0XCI7Ly9kZWJ1Z1xyXG5cclxuaW1wb3J0IHsgYXBwIGFzIGdBcHAgfSBmcm9tIFwiLi4vaW5kZXguanNcIjsvL2RlYnVnXHJcblxyXG5jbGFzcyAkU29ja2V0IHtcclxuXHQvKipcclxuXHQgKiBzb2NrZXQuZW1pdChldmVudE5hbWVbLCAuLi5hcmdzXSlcclxuXHQgKiByZXR1cm4gc2VydmVyIGFuc3dlclxyXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBldmVudE5hbWVcclxuXHQgKiBAcGFyYW0ge2FueX0gZGF0YVxyXG5cdCAqIEByZXR1cm5zIHtQcm9taXNlPGFueT59XHJcblx0ICovXHJcblx0ZW1pdChldmVudE5hbWUsIGRhdGEpIHtcclxuXHR9XHJcblx0b24oZXZlbnROYW1lLCBjYWxsYmFjaykge1xyXG5cdH1cclxuXHRvbmNlKGV2ZW50TmFtZSwgZGF0YSkge1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIENsaWVudCB7XHJcblx0Y29uc3RydWN0b3IoKSB7XHJcblx0XHQvKiogQHR5cGUgeyRTb2NrZXR9ICovXHJcblx0XHR0aGlzLnNvY2tldCA9IG51bGw7XHJcblxyXG5cdFx0LyoqIEB0eXBlIHt7W2lkOnN0cmluZ106U2NlbmVDaGFyYWN0ZXJ9fSAqL1xyXG5cdFx0dGhpcy5jaGFyYU1hcCA9IHt9O1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQHBhcmFtIHtzdHJpbmd9IGNoYXJhSWRcclxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9uKFNjZW5lQ2hhcmFjdGVyKX0gY2JmdW5jXHJcblx0ICovXHJcblx0X2ZpbmRDaGFyYShjaGFyYUlkLCBjYmZ1bmMpIHtcclxuXHRcdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcblx0XHRcdGlmICh0eXBlb2YgY2JmdW5jICE9ICdmdW5jdGlvbicpIHtcclxuXHRcdFx0XHRjb25zb2xlLmVycm9yKG5ldyBUeXBlRXJyb3IoKSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdC8qKiBAdHlwZSB7U2NlbmVDaGFyYWN0ZXJ9ICovXHJcblx0XHRsZXQgY2hhcmEgPSB0aGlzLmNoYXJhTWFwW2NoYXJhSWRdO1xyXG5cclxuXHRcdGlmIChjaGFyYSkge1xyXG5cdFx0XHRjYmZ1bmMuY2FsbCh0aGlzLCBjaGFyYSk7XHJcblx0XHR9XHJcblx0XHQvL2Vsc2Uge1xyXG5cdFx0Ly9cdGFsZXJ0KGBjaGFyYVsnJHtjaGFyYUlkfSddIG5vdCBleGlzdGApO1xyXG5cdFx0Ly99XHJcblx0fVxyXG5cdC8qKlxyXG5cdCAqIF9hZGRSZW1vdGVDaGFyYVBhY2tldExpc3RlbmVyKGV2ZW50TmFtZSwgZm5BY2soLi4uKSlcclxuXHQgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnROYW1lXHJcblx0ICogQHBhcmFtIHtmdW5jdGlvbiguLi5hbnksIGZ1bmN0aW9uKC4uLmFueSk6dm9pZCl9IGxpc3RlbmVyXHJcblx0ICovXHJcblx0X2FkZFJlbW90ZUNoYXJhUGFja2V0TGlzdGVuZXIoZXZlbnROYW1lLCBsaXN0ZW5lcikge1xyXG5cdFx0dGhpcy5zb2NrZXQub24oZXZlbnROYW1lLCAoLi4uYXJncykgPT4ge1xyXG5cdFx0XHQvKiogQHR5cGUge3N0cmluZ30gKi9cclxuXHRcdFx0bGV0IGNoYXJhSWQgPSBhcmdzWzBdLmlkO1xyXG5cclxuXHRcdFx0LyoqIEB0eXBlIHtTY2VuZUNoYXJhY3Rlcn0gKi9cclxuXHRcdFx0bGV0IGNoYXJhID0gdGhpcy5jaGFyYU1hcFtjaGFyYUlkXTtcclxuXHJcblx0XHRcdGlmIChjaGFyYSkge1xyXG5cdFx0XHRcdGxpc3RlbmVyLmNhbGwodGhpcywgY2hhcmEsIC4uLmFyZ3MpOy8vbGlzdGVuZXIoY2hhcmEsIHBhY2tldFssIC4uLnBhY2tldF0sIGZuQWNrKVxyXG5cdFx0XHR9XHJcblx0XHRcdC8vZWxzZSB7XHJcblx0XHRcdC8vXHRhbGVydChgY2hhcmFbJyR7Y2hhcmFJZH0nXSBub3QgZXhpc3RgKTtcclxuXHRcdFx0Ly99XHJcblx0XHR9KTtcclxuXHR9XHJcblx0XHJcblx0LyoqXHJcblx0ICogQHR5cGUge3N0cmluZ30gc2VydmVyX2hyZWZcclxuXHQgKiBAcmV0dXJucyB7UHJvbWlzZTwkU29ja2V0Pn1cclxuXHQgKi9cclxuXHRhc3luYyBjb25uZWN0KHNlcnZlcl9ocmVmKSB7XHJcblx0XHRyZXR1cm4gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG5cdFx0XHRsZXQgc29ja2V0O1xyXG5cdFx0XHRcclxuXHRcdFx0c29ja2V0ID0gaW8oc2VydmVyX2hyZWYpO1xyXG5cdFx0XHRcclxuXHRcdFx0c29ja2V0Lm9uKFwiY29ubmVjdFwiLCAoKSA9PiB7XHJcblx0XHRcdFx0dGhpcy5zb2NrZXQgPSBzb2NrZXQ7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0d2luZG93LiRpbyA9IHRoaXMuc29ja2V0O1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGNvbnN0IGVtaXQgPSBzb2NrZXQuJGVtaXQgPSBzb2NrZXQuZW1pdDtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRzb2NrZXQuZW1pdCA9IGZ1bmN0aW9uIChldmVudE5hbWUsIGRhdGEpIHtcclxuXHRcdFx0XHRcdC8vbGV0IGNiZnVuYyA9IGFyZ3VtZW50c1thcmd1bWVudHMubGVuZ3RoIC0gMV07XHJcblx0XHRcdFx0XHQvL2lmICh0eXBlb2YgY2JmdW5jID09ICdmdW5jdGlvbicpIHtcclxuXHRcdFx0XHRcdC8vXHRlbWl0KGV2ZW50TmFtZSwgZGF0YSwgY2JmdW5jKTtcclxuXHRcdFx0XHRcdC8vfVxyXG5cdFx0XHRcdFx0Ly9lbHNlIHtcclxuXHRcdFx0XHRcdFx0cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuXHRcdFx0XHRcdFx0XHRlbWl0LmNhbGwoc29ja2V0LCBldmVudE5hbWUsIGRhdGEsIGZ1bmN0aW9uICguLi5hcmdzKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRyZXNvbHZlLmFwcGx5KHRoaXMsIGFyZ3MpO1xyXG5cdFx0XHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdC8vfVxyXG5cdFx0XHRcdH07XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0cmVzb2x2ZShzb2NrZXQpO1xyXG5cdFx0XHR9KTtcclxuXHRcdFx0c29ja2V0Lm9uKFwiZGlzY29ubmVjdFwiLCAoKSA9PiB7XHJcblx0XHRcdFx0Ly93aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHRzb2NrZXQub24oXCJjb25uZWN0X2Vycm9yXCIsIGVycm9yID0+IHtcclxuXHRcdFx0XHRzb2NrZXQuZGlzY29ubmVjdCgpO1xyXG5cdFx0XHRcdHJlamVjdChlcnJvcik7XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHQvKiogQHR5cGUge1NjZW5lTWFwfSAqL1xyXG5cdGdldCAkc2NlbmVfbWFwKCkge1xyXG5cdFx0cmV0dXJuIHdpbmRvdy5zY2VuZV9tYXA7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBAcGFyYW0ge3N0cmluZ30gYWNjb3VudFxyXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBwYXNzd29yZFxyXG5cdCAqL1xyXG5cdGFzeW5jIGxvZ2luKGFjY291bnQsIHBhc3N3b3JkKSB7XHJcblx0XHRsZXQgcmVzdWx0ID0gYXdhaXQgdGhpcy5zb2NrZXQuZW1pdChcImxvZ2luXCIsIHtcclxuXHRcdFx0YWNjb3VudDogXCJhYWFcIixcclxuXHRcdFx0cGFzc3dvcmQ6IFwiYWFhXCIsXHJcblx0XHR9KTtcclxuXHRcdGlmIChyZXN1bHQpIHtcclxuXHRcdFx0Y29uc29sZS5pbmZvKFwibG9naW5cIik7XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0Y29uc29sZS5pbmZvKFwibG9naW4gZmFpbGVkXCIpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHQvKipcclxuXHQgKiBAcGFyYW0ge251bWJlcn0gd29ybGRcclxuXHQgKiBAcGFyYW0ge251bWJlcn0gY2hhbm5lbFxyXG5cdCAqL1xyXG5cdGFzeW5jIHNlbGVjdFdvcmxkKHdvcmxkLCBjaGFubmVsKSB7XHJcblx0XHRsZXQgcmVzdWx0ID0gYXdhaXQgdGhpcy5zb2NrZXQuZW1pdChcInNlbGVjdFdvcmxkXCIsIHtcclxuXHRcdFx0d29ybGQ6IDAsXHJcblx0XHRcdGNoYW5uZWw6IDAsXHJcblx0XHR9KTtcclxuXHRcdGlmIChyZXN1bHQpIHtcclxuXHRcdFx0Y29uc29sZS5pbmZvKFwic2VsZWN0V29ybGRcIik7XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0Y29uc29sZS5pbmZvKFwic2VsZWN0V29ybGQgZmFpbGVkXCIpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHQvKipcclxuXHQgKiBAcGFyYW0ge2FueX0gY2hhcklEXHJcblx0ICovXHJcblx0YXN5bmMgc2VsZWN0Q2hhcmEoY2hhcklEKSB7XHJcblx0XHQvKiogQHR5cGUgeyRSZXF1ZXN0UGFja2V0X1NlbGVjdENoYXJhfSAqL1xyXG5cdFx0bGV0IHJlcSA9IG5ldyAkUmVxdWVzdFBhY2tldF9TZWxlY3RDaGFyYSgpO1xyXG5cdFx0XHJcblx0XHQvKiogQHR5cGUgeyRQYWNrZXRfU2VsZWN0Q2hhcmF9ICovXHJcblx0XHRsZXQgYWNrUGFja2V0ID0gYXdhaXQgdGhpcy5zb2NrZXQuZW1pdChcInNlbGVjdENoYXJhXCIsIHtcclxuXHRcdFx0aWQ6IDEyMyxcclxuXHRcdH0pO1xyXG5cdFx0Y29uc3QgY2hhcmFEYXRhID0gYWNrUGFja2V0LmNoYXJhRGF0YTtcclxuXHRcdGNvbnN0IHJlbW90ZUNoYXJhY3RlcnMgPSBhY2tQYWNrZXQucmVtb3RlQ2hhcmFjdGVycztcclxuXHJcblx0XHRpZiAoY2hhcmFEYXRhKSB7XHJcblx0XHRcdHRyeSB7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy4kc2NlbmVfbWFwLmxvYWQoY2hhcmFEYXRhLm1hcElkKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRsZXQgdGFzazEgPSB0aGlzLl9DcmVhdGVNeUNoYXJhY3RlcihjaGFyYURhdGEpO1xyXG5cdFx0XHRcdGxldCB0YXNrMiA9IHRoaXMub25FbnRlclJlbW90ZUNoYXJhKHJlbW90ZUNoYXJhY3RlcnMpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGF3YWl0IFByb21pc2UuYWxsKFt0YXNrMSwgdGFzazJdKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRjYXRjaCAoZXgpIHtcclxuXHRcdFx0XHRjb25zb2xlLmVycm9yKGV4KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdGFsZXJ0KFwic2VsZWN0Q2hhcmE6IGNoYXJhIG5vdCBleGlzdFwiKTtcclxuXHRcdH1cclxuXHR9XHJcblx0LyoqXHJcblx0ICogb25saW5lIG1vZGVcclxuXHQgKi9cclxuXHRhc3luYyBfQ3JlYXRlTXlDaGFyYWN0ZXIoY2hhcmFEYXRhKSB7XHJcblx0XHQvKiogQHR5cGUge1NjZW5lQ2hhcmFjdGVyfSAqL1xyXG5cdFx0bGV0IGNoYXJhID0gYXdhaXQgZ0FwcC5zdG9yZS5kaXNwYXRjaCgnX2NyZWF0ZUNoYXJhJywge1xyXG5cdFx0XHRlbXBsYWNlOiB7XHJcblx0XHRcdFx0aWQ6IGNoYXJhRGF0YS5pZCxcclxuXHRcdFx0XHRjb2RlOiBjaGFyYURhdGEuZXF1aXBzX2NvZGUsXHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0dGhpcy5jaGFyYSA9IGNoYXJhO1xyXG5cclxuXHRcdGNoYXJhLl8kZGF0YSA9IGNoYXJhLl8kZGF0YSB8fCB7XHJcblx0XHRcdGd1aWxkSWQ6IFwiXCIsLy9ndWlsZElkID09IGd1aWxkTmFtZVxyXG5cdFx0XHRwYXJ0eUlkOiBcIlwiLC8vcGFydHlJZCA9PSBwYXJ0eU5hbWVcclxuXHRcdH1cclxuXHR9XHJcblx0LyoqXHJcblx0ICogb2ZmbGluZSBtb2RlXHJcblx0ICogQHBhcmFtIHt7aWQ6c3RyaW5nLGVxdWlwc19jb2RlOnN0cmluZ319IGNoYXJhRGF0YVxyXG5cdCAqL1xyXG5cdHN0YXRpYyBhc3luYyBfQ3JlYXRlTXlDaGFyYWN0ZXIoY2hhcmFEYXRhKSB7Ly8/P1xyXG5cdFx0LyoqIEB0eXBlIHtTY2VuZUNoYXJhY3Rlcn0gKi9cclxuXHRcdGxldCBjaGFyYSA9IGF3YWl0IGdBcHAuc3RvcmUuZGlzcGF0Y2goJ19jcmVhdGVDaGFyYScsIHtcclxuXHRcdFx0ZW1wbGFjZToge1xyXG5cdFx0XHRcdGlkOiBjaGFyYURhdGEuaWQsXHJcblx0XHRcdFx0Y29kZTogY2hhcmFEYXRhLmVxdWlwc19jb2RlLFxyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdGNoYXJhID0gY2hhcmE7XHJcblxyXG5cdFx0Y2hhcmEuXyRkYXRhID0gY2hhcmEuXyRkYXRhIHx8IHtcclxuXHRcdFx0Z3VpbGRJZDogXCJcIiwvL2d1aWxkSWQgPT0gZ3VpbGROYW1lXHJcblx0XHRcdHBhcnR5SWQ6IFwiXCIsLy9wYXJ0eUlkID09IHBhcnR5TmFtZVxyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBjaGFyYTtcclxuXHR9XHJcblx0LyoqXHJcblx0ICogQHBhcmFtIHskUmVtb3RlUGxheWVyRGF0YVtdfSBwYWNrZXQgLSBjaGFyYWN0ZXJzXHJcblx0ICogQHJldHVybnMge1Byb21pc2U8dm9pZD59XHJcblx0ICovXHJcblx0b25FbnRlclJlbW90ZUNoYXJhKHBhY2tldCkge1xyXG5cdFx0Y29uc3QgY2hhcmFjdGVycyA9IHBhY2tldDtcclxuXHJcblx0XHRsZXQgdGFza3MgPSBjaGFyYWN0ZXJzLm1hcChjaGFyYURhdGEgPT4ge1xyXG5cdFx0XHRyZXR1cm4gZ0FwcC5zdG9yZS5kaXNwYXRjaCgnX2NyZWF0ZUNoYXJhJywge1xyXG5cdFx0XHRcdHJlbW90ZV9jaGFyYToge1xyXG5cdFx0XHRcdFx0aWQ6IGNoYXJhRGF0YS5pZCxcclxuXHRcdFx0XHRcdGNvZGU6IGNoYXJhRGF0YS5lcXVpcHNfY29kZSxcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pLnRoZW4oKC4uLmFyZ3MpID0+IHtcclxuXHRcdFx0XHR0cnkge1xyXG5cdFx0XHRcdFx0Y29uc3Qgd29ybGQgPSB0aGlzLiRzY2VuZV9tYXAuY29udHJvbGxlcjtcclxuXHJcblx0XHRcdFx0XHQvKiogQHR5cGUge1NjZW5lUmVtb3RlQ2hhcmFjdGVyfSAqL1xyXG5cdFx0XHRcdFx0bGV0IGNoYXJhID0gYXJnc1swXTtcclxuXHJcblx0XHRcdFx0XHR0aGlzLmNoYXJhTWFwW2NoYXJhLmlkXSA9IGNoYXJhO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRjYXRjaCAoZXgpIHtcclxuXHRcdFx0XHRcdGFsZXJ0KGVyci5tZXNzYWdlKTtcclxuXHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fSk7XHJcblx0XHRyZXR1cm4gUHJvbWlzZS5hbGwodGFza3MpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQHBhcmFtIHt7IGlkOiBzdHJpbmcgfX0gcGFja2V0XHJcblx0ICovXHJcblx0b25MZWF2ZVJlbW90ZUNoYXJhKHBhY2tldCkge1xyXG5cdFx0Y29uc3QgcmVtb3RlSWQgPSBwYWNrZXQuaWQ7XHJcblxyXG5cdFx0Z0FwcC5zdG9yZS5kaXNwYXRjaCgnZGVsZXRlQ2hhcmFjdGVyJywge1xyXG5cdFx0XHRpZDogcmVtb3RlSWQsXHJcblx0XHRcdGxlYXZlOiB0cnVlLFxyXG5cdFx0fSkudGhlbigoKSA9PiB7XHJcblx0XHRcdGNvbnNvbGUubG9nKFwib25MZWF2ZVJlbW90ZUNoYXJhWyVvXVwiLCByZW1vdGVJZCk7XHJcblx0XHR9LCAocmVhc29uKSA9PiB7XHJcblx0XHRcdGNvbnNvbGUubG9nKFwib25MZWF2ZVJlbW90ZUNoYXJhWyVvXTogJW9cIiwgcmVtb3RlSWQsIHJlYXNvbik7XHJcblx0XHR9KTtcclxuXHRcdGRlbGV0ZSB0aGlzLmNoYXJhTWFwW3BhY2tldC5pZF07XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBAcGFyYW0ge01vYk1vdmVFbGVtfSBwYWNrZXRcclxuXHQgKi9cclxuXHRvbk1vYk1vdmUocGFja2V0KSB7XHJcblx0XHQvKiogQHR5cGUge1NjZW5lTWFwfSAqL1xyXG5cdFx0bGV0IHNjZW5lX21hcCA9IHdpbmRvdy5zY2VuZV9tYXA7XHJcblxyXG5cdFx0aWYgKCF0aGlzLmNoYXJhKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAodGhpcy5jaGFyYS4kb2JqZWN0aWQgPT0gcGFja2V0LmNvbnRyb2xsZXJPd25lcikge1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSBpZiAodHJ1ZSkge1xyXG5cdFx0XHRjb25zdCBlbGVtZW50cyA9IHBhY2tldC5lbGVtZW50cztcclxuXHRcdFx0c2NlbmVfbWFwLmxpZmVNZ3IuZW50aXRpZXMuZm9yRWFjaChsaWZlID0+IHtcclxuXHRcdFx0XHRjb25zdCBlbGVtID0gZWxlbWVudHNbbGlmZS4kb2JqZWN0aWRdO1xyXG5cdFx0XHRcdGlmIChsaWZlLnNwYXduLnR5cGUgPT0gXCJtXCIgJiYgZWxlbSkge1xyXG5cdFx0XHRcdFx0LyoqIEB0eXBlIHtNYXBNb2J9ICovLy9TY2VuZU1vYlxyXG5cdFx0XHRcdFx0Y29uc3QgbW9iID0gbGlmZTtcclxuXHRcdFx0XHRcdG1vYi4kY29udHJvbGxlck93bmVyID0gcGFja2V0LmNvbnRyb2xsZXJPd25lcjtcclxuXHRcdFx0XHRcdG1vYi4kbW92ZShlbGVtKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdGxldCBhcnIgPSBuZXcgSW50MzJBcnJheShwYWNrZXQuZWxlbWVudHMpO1xyXG5cdFx0XHRsZXQgZWxlbWVudHMgPSB7fTtcclxuXHJcblx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgYXJyLmxlbmd0aDsgaSArPSAzKSB7XHJcblx0XHRcdFx0ZWxlbWVudHNbYXJyW2ldXSA9IHtcclxuXHRcdFx0XHRcdHg6IGFycltpICsgMV0gLyAkZ3YuQ0FOVkFTX1NDQUxFLFxyXG5cdFx0XHRcdFx0eTogYXJyW2kgKyAyXSAvICRndi5DQU5WQVNfU0NBTEUsXHJcblx0XHRcdFx0fTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0c2NlbmVfbWFwLmxpZmVNZ3IuZW50aXRpZXMuZm9yRWFjaChsaWZlID0+IHtcclxuXHRcdFx0XHRjb25zdCBlbGVtID0gZWxlbWVudHNbbGlmZS4kb2JqZWN0aWRdO1xyXG5cdFx0XHRcdGlmIChsaWZlLnNwYXduLnR5cGUgPT0gXCJtXCIgJiYgZWxlbSkge1xyXG5cdFx0XHRcdFx0LyoqIEB0eXBlIHtNYXBNb2J9ICovLy9TY2VuZU1vYlxyXG5cdFx0XHRcdFx0Y29uc3QgbW9iID0gbGlmZTtcclxuXHRcdFx0XHRcdG1vYi4kY29udHJvbGxlck93bmVyID0gcGFja2V0LmNvbnRyb2xsZXJPd25lcjtcclxuXHRcdFx0XHRcdG1vYi4kbW92ZShlbGVtKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQHBhcmFtIHtTY2VuZUNoYXJhY3Rlcn0gY2hhcmFcclxuXHQgKiBAcGFyYW0geyRQYWNrZXRfUmVtb3RlQ2hhdH0gcGFja2V0XHJcblx0ICogQHBhcmFtIHtmdW5jdGlvbiguLi5hbnkpOnZvaWR9IGZuQWNrXHJcblx0ICovXHJcblx0b25SZW1vdGVDaGF0KGNoYXJhLCBwYWNrZXQsIGZuQWNrKSB7XHJcblx0XHRjaGFyYS5jaGF0Q3RybC5zdHlsZSA9IHBhY2tldC5zdHlsZTtcclxuXHRcdGNoYXJhLmNoYXRDdHJsLmVudGVyKHBhY2tldC50ZXh0KTtcclxuXHRcdGFwcC52dWUuJHJlZnMuc3RhdHVzQmFyLnB1c2hDaGF0SGlzdG9yeShwYWNrZXQudHlwZSwgcGFja2V0LnN0eWxlLCBwYWNrZXQudGV4dCk7XHJcblx0fVxyXG5cdC8qKlxyXG5cdCAqIEBwYXJhbSB7U2NlbmVDaGFyYWN0ZXJ9IGNoYXJhXHJcblx0ICogQHBhcmFtIHskUGFja2V0X0NoYXJhY3Rlck1vdmV9IHBhY2tldFxyXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb24oLi4uYW55KTp2b2lkfSBmbkFja1xyXG5cdCAqL1xyXG5cdG9uUmVtb3RlQ2hhcmFNb3ZlKGNoYXJhLCBwYWNrZXQsIGZuQWNrKSB7XHJcblx0XHRjaGFyYS4kbW92ZShwYWNrZXQpO1xyXG5cdH1cclxuXHQvKipcclxuXHQgKiBAcGFyYW0ge1NjZW5lQ2hhcmFjdGVyfSBjaGFyYVxyXG5cdCAqIEBwYXJhbSB7JFBhY2tldF9SZW1vdGVDaGFyYUFuaW19IHBhY2tldFxyXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb24oLi4uYW55KTp2b2lkfSBmbkFja1xyXG5cdCAqL1xyXG5cdG9uUmVtb3RlQ2hhcmFBbmltKGNoYXJhLCBwYWNrZXQsIGZuQWNrKSB7XHJcblx0XHRjaGFyYS4kYW5pbShwYWNrZXQpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQHBhcmFtIHtTY2VuZUNoYXJhY3Rlcn0gY2hhcmFcclxuXHQgKiBAcGFyYW0ge30gcGFja2V0XHJcblx0ICogQHBhcmFtIHtmdW5jdGlvbiguLi5hbnkpOnZvaWR9IGZuQWNrXHJcblx0ICovXHJcblx0b25SZW1vdGVDaGFyYVNraWxsKGNoYXJhLCBwYWNrZXQsIGZuQWNrKSB7XHJcblx0XHRjaGFyYS5pbnZva2VTa2lsbChwYWNrZXQuc2tpbGxJZCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBAcGFyYW0ge1NjZW5lQ2hhcmFjdGVyfSBjaGFyYVxyXG5cdCAqIEBwYXJhbSB7fSBwYWNrZXRcclxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9uKC4uLmFueSk6dm9pZH0gZm5BY2tcclxuXHQgKi9cclxuXHRvblJlbW90ZUF2YXRhck1vZGlmaWVkKGNoYXJhLCBwYWNrZXQsIGZuQWNrKSB7XHJcblx0XHRjaGFyYS5yZW5kZXJlci51c2UocGFja2V0Lml0ZW1JZCk7XHJcblx0fVxyXG5cclxuXHRhc3luYyAkdGVzdCgpIHtcclxuXHRcdHRoaXMuc29ja2V0Lm9uKFwiZW50ZXJSZW1vdGVDaGFyYVwiLCB0aGlzLm9uRW50ZXJSZW1vdGVDaGFyYS5iaW5kKHRoaXMpKTtcclxuXHRcdHRoaXMuc29ja2V0Lm9uKFwibGVhdmVSZW1vdGVDaGFyYVwiLCB0aGlzLm9uTGVhdmVSZW1vdGVDaGFyYS5iaW5kKHRoaXMpKTtcclxuXHJcblx0XHR0aGlzLnNvY2tldC5vbihcIm1vYk1vdmVcIiwgdGhpcy5vbk1vYk1vdmUuYmluZCh0aGlzKSk7XHJcblxyXG5cdFx0dGhpcy5fYWRkUmVtb3RlQ2hhcmFQYWNrZXRMaXN0ZW5lcihcInJlbW90ZUNoYXRcIiwgdGhpcy5vblJlbW90ZUNoYXQpO1xyXG5cdFx0dGhpcy5fYWRkUmVtb3RlQ2hhcmFQYWNrZXRMaXN0ZW5lcihcInJlbW90ZUNoYXJhTW92ZVwiLCB0aGlzLm9uUmVtb3RlQ2hhcmFNb3ZlKTtcclxuXHRcdHRoaXMuX2FkZFJlbW90ZUNoYXJhUGFja2V0TGlzdGVuZXIoXCJyZW1vdGVDaGFyYUFuaW1cIiwgdGhpcy5vblJlbW90ZUNoYXJhQW5pbSk7XHJcblx0XHR0aGlzLl9hZGRSZW1vdGVDaGFyYVBhY2tldExpc3RlbmVyKFwicmVtb3RlQ2hhcmFTa2lsbFwiLCB0aGlzLm9uUmVtb3RlQ2hhcmFTa2lsbCk7XHJcblx0XHR0aGlzLl9hZGRSZW1vdGVDaGFyYVBhY2tldExpc3RlbmVyKFwicmVtb3RlQXZhdGFyTW9kaWZpZWRcIiwgdGhpcy5vblJlbW90ZUF2YXRhck1vZGlmaWVkKTtcclxuXHJcblx0XHRhd2FpdCB0aGlzLmxvZ2luKFwiYWFhXCIsIFwiYWFhXCIpO1xyXG5cclxuXHRcdGF3YWl0IHRoaXMuc2VsZWN0V29ybGQoMCwgMCk7XHJcblxyXG5cdFx0YXdhaXQgdGhpcy5zZWxlY3RDaGFyYSgwKTtcclxuXHR9XHJcbn1cclxuXHJcblxyXG5cclxuIiwi77u/XHJcbmltcG9ydCB7IFNjZW5lTWFwIH0gZnJvbSBcIi4vTWFwLmpzXCI7XHJcbmltcG9ydCB7IFNjZW5lQ2hhcmFjdGVyIH0gZnJvbSBcIi4vU2NlbmVDaGFyYWN0ZXIuanNcIjtcclxuXHJcbmltcG9ydCB7IENsaWVudCB9IGZyb20gXCIuLi9DbGllbnQvQ2xpZW50LmpzXCI7Ly9kZWJ1Z1xyXG5cclxuaW1wb3J0IHsgYXBwIGFzIGdBcHAgfSBmcm9tIFwiLi4vaW5kZXguanNcIjsvL2RlYnVnXHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIEdhbWVTdGF0ZSB7XHJcblx0Y29uc3RydWN0b3Ioc2NlbmUsIGNoYXJhKSB7XHJcblx0XHQvKiogQHR5cGUge3N0cmluZ30gKi9cclxuXHRcdHRoaXMubWFwX2lkID0gc2NlbmUubWFwX2lkO1xyXG5cclxuXHRcdGlmIChjaGFyYS5yZW5kZXJlcikge1xyXG5cdFx0XHQvKiogQHR5cGUge3N0cmluZ30gKi9cclxuXHRcdFx0dGhpcy5jaGFyYSA9IGNoYXJhLnJlbmRlcmVyLl9zdHJpbmdpZnkoZmFsc2UpO1xyXG5cdFx0XHR1cmwgKz0gXCImY2hhcmE9XCIgKyB0aGlzLmNoYXJhO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEdhbWVTdGF0ZU1hbmFnZXIge1xyXG5cdGNvbnN0cnVjdG9yKCkge1xyXG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiXCIpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQHBhcmFtIHtTY2VuZU1hcH0gc2NlbmVcclxuXHQgKiBAcGFyYW0ge1NjZW5lQ2hhcmFjdGVyfSBjaGFyYVxyXG5cdCAqL1xyXG5cdHN0YXRpYyBQdXNoU3RhdGUoc2NlbmUsIGNoYXJhKSB7XHJcblx0XHRpZiAoIXNjZW5lKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHRcdGxldCBzdGF0ZSA9IHt9O1xyXG5cdFx0bGV0IHVybCA9IFwiP21hcD1cIiArIHNjZW5lLm1hcF9pZDtcclxuXHJcblx0XHRzdGF0ZS5tYXBfaWQgPSBzY2VuZS5tYXBfaWQ7XHJcblxyXG5cdFx0aWYgKGNoYXJhICYmIGNoYXJhLnJlbmRlcmVyKSB7XHJcblx0XHRcdHN0YXRlLmNoYXJhID0gY2hhcmEucmVuZGVyZXIuX3N0cmluZ2lmeShmYWxzZSk7XHJcblx0XHRcdHVybCArPSBcIiZjaGFyYT1cIiArIHN0YXRlLmNoYXJhO1xyXG5cdFx0fVxyXG5cclxuXHRcdGhpc3RvcnkucHVzaFN0YXRlKHN0YXRlLCBzY2VuZS5fd2luZG93X3RpdGxlLCB1cmwpO1xyXG5cclxuXHRcdGRvY3VtZW50LnRpdGxlID0gc2NlbmUuX3dpbmRvd190aXRsZTtcclxuXHR9XHJcblx0LyoqXHJcblx0ICogQHBhcmFtIHtzdHJpbmd9IG1hcF9pZFxyXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBjaGFyYV9jb2RlXHJcblx0ICovXHJcblx0c3RhdGljIFB1c2hTdGF0ZVN0cmluZyhtYXBfaWQsIGNoYXJhX2NvZGUpIHtcclxuXHRcdGlmICghbWFwX2lkKSB7XHJcblx0XHRcdHJldHVybjtcclxuXHRcdH1cclxuXHRcdGxldCBzdGF0ZSA9IHt9O1xyXG5cclxuXHRcdGxldCB1cmwgPSBcIj9tYXA9XCIgKyBtYXBfaWQ7XHJcblx0XHRzdGF0ZS5tYXBfaWQgPSBtYXBfaWQ7XHJcblxyXG5cdFx0aWYgKGNoYXJhX2NvZGUpIHtcclxuXHRcdFx0c3RhdGUuY2hhcmEgPSBjaGFyYV9jb2RlO1xyXG5cdFx0XHR1cmwgKz0gXCImY2hhcmE9XCIgKyBzdGF0ZS5jaGFyYTtcclxuXHRcdH1cclxuXHJcblx0XHRoaXN0b3J5LnB1c2hTdGF0ZShzdGF0ZSwgc2NlbmUuX3dpbmRvd190aXRsZSwgdXJsKTtcclxuXHJcblx0XHRkb2N1bWVudC50aXRsZSA9IHNjZW5lLl93aW5kb3dfdGl0bGU7XHJcblx0fVxyXG5cdHN0YXRpYyBhc3luYyBQb3BTdGF0ZShzdGF0ZSkge1xyXG5cdFx0aWYgKCFzdGF0ZSkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGlmIChzdGF0ZS5jaGFyYSAmJiB3aW5kb3cuY2hhcmEgJiYgd2luZG93LmNoYXJhLnJlbmRlcmVyKSB7XHJcblx0XHRcdGxldCBfb2xkX2MgPSB3aW5kb3cuY2hhcmEucmVuZGVyZXIuX3N0cmluZ2lmeShmYWxzZSk7XHJcblx0XHRcdGlmIChzdGF0ZS5jaGFyYSAhPSBfb2xkX2MpIHtcclxuXHRcdFx0XHR3aW5kb3cuY2hhcmEucmVuZGVyZXIuX3BhcnNlKHN0YXRlLmNoYXJhKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdENsaWVudC5fQ3JlYXRlTXlDaGFyYWN0ZXIoe1xyXG5cdFx0XHRcdGlkOiBcImNoYXJhXzFcIixcclxuXHRcdFx0XHRlcXVpcHNfY29kZTogc3RhdGUuY2hhcmEsXHJcblx0XHRcdH0pO1xyXG5cdFx0XHQvL2F3YWl0IGdBcHAuc3RvcmUuZGlzcGF0Y2goJ19jcmVhdGVDaGFyYScsIHtcclxuXHRcdFx0Ly9cdGVtcGxhY2U6IHtcclxuXHRcdFx0Ly9cdFx0aWQ6IFwiY2hhcmFfMVwiLFxyXG5cdFx0XHQvL1x0XHRjb2RlOiBzdGF0ZS5jaGFyYSxcclxuXHRcdFx0Ly9cdH1cclxuXHRcdFx0Ly99KTtcclxuXHRcdH1cclxuXHJcblx0XHRpZiAoc2NlbmVfbWFwICYmIHNjZW5lX21hcC5tYXBfaWQgIT0gc3RhdGUubWFwX2lkKSB7XHJcblx0XHRcdGF3YWl0IHNjZW5lX21hcC5sb2FkKHN0YXRlLm1hcF9pZCk7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcbiIsIlxyXG5cclxuZXhwb3J0IGNsYXNzIEN1cnNvclBpY2tlciB7XHJcblx0Y29uc3RydWN0b3IoKSB7XHJcblx0XHQvKiogQHR5cGUge3N0cmluZ30gKi9cclxuXHRcdHRoaXMudHlwZSA9IG51bGw7XHJcblx0XHQvKiogQHR5cGUge2FueX0gKi9cclxuXHRcdHRoaXMuZGF0YSA9IG51bGw7XHJcblx0fVxyXG59XHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIEN1cnNvckFuaW1hdGlvbkZyYW1lIHtcclxuXHRjb25zdHJ1Y3RvcigpIHtcclxuXHRcdC8qKiBAdHlwZSB7c3RyaW5nfSAqL1xyXG5cdFx0dGhpcy51cmwgPSBudWxsO1xyXG5cdFx0LyoqIEB0eXBlIHtudW1iZXJ9ICovXHJcblx0XHR0aGlzLnggPSAwO1xyXG5cdFx0LyoqIEB0eXBlIHtudW1iZXJ9ICovXHJcblx0XHR0aGlzLnkgPSAwO1xyXG5cdFx0LyoqIEB0eXBlIHtudW1iZXJ9IC0gdGltZSBpbiBtaWxsaXNlY29uZCAqL1xyXG5cdFx0dGhpcy5kZWxheSA9IDA7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQ3Vyc29yQW5pbWF0aW9uRGF0YSB7XHJcblx0Y29uc3RydWN0b3IoKSB7XHJcblx0XHQvKiogQHR5cGUge0N1cnNvckFuaW1hdGlvbkZyYW1lW119ICovXHJcblx0XHR0aGlzLmZyYW1lcyA9IFtdO1xyXG5cclxuXHRcdC8qKiBAdHlwZSB7bnVtYmVyfSAtIHRpbWUgaW4gbWlsbGlzZWNvbmQgKi9cclxuXHRcdHRoaXMuZHVyYXRpb24gPSAwO1xyXG5cdH1cclxuXHQvKipcclxuXHQgKiBAcGFyYW0ge3N0cmluZ30gdXJsXHJcblx0ICogQHJldHVybnMge1Byb21pc2U8bnVtYmVyPn0gLSBpbmRleFxyXG5cdCAqL1xyXG5cdGFzeW5jIGFkZEZyYW1lRnJvbVVybCh1cmwpIHtcclxuXHRcdGxldCByYXcgPSBhd2FpdCAkZ2V0LmRhdGEodXJsKTtcclxuXHRcdHJldHVybiB0aGlzLmFkZEZyYW1lKFwiaW1hZ2VzXCIgKyB1cmwsIHJhdy5vcmlnaW4ueCwgcmF3Lm9yaWdpbi55LCByYXcuZGVsYXkpO1xyXG5cdH1cclxuXHQvKipcclxuXHQgKiBAcGFyYW0ge3N0cmluZ30gdXJsXHJcblx0ICogQHBhcmFtIHtudW1iZXJ9IHhcclxuXHQgKiBAcGFyYW0ge251bWJlcn0geVxyXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBkZWxheVxyXG5cdCAqIEByZXR1cm5zIHtudW1iZXJ9IC0gaW5kZXhcclxuXHQgKi9cclxuXHRhZGRGcmFtZSh1cmwsIHgsIHksIGRlbGF5KSB7XHJcblx0XHRpZiAoIXVybCkge1xyXG5cdFx0XHR0aHJvdyBuZXcgVHlwZUVycm9yKCk7XHJcblx0XHR9XHJcblx0XHRjb25zdCBpID0gdGhpcy5mcmFtZXMubGVuZ3RoO1xyXG5cdFx0bGV0IGZyYW1lID0gbmV3IEN1cnNvckFuaW1hdGlvbkZyYW1lKCk7XHJcblxyXG5cdFx0ZnJhbWUudXJsID0gdXJsO1xyXG5cdFx0ZnJhbWUueCA9IHggfCAwO1xyXG5cdFx0ZnJhbWUueSA9IHkgfCAwO1xyXG5cdFx0ZnJhbWUuZGVsYXkgPSBkZWxheSB8IDA7XHJcblxyXG5cdFx0dGhpcy5mcmFtZXMucHVzaChmcmFtZSk7XHJcblxyXG5cdFx0dGhpcy5kdXJhdGlvbiArPSBmcmFtZS5kZWxheTsgXHJcblxyXG5cdFx0cmV0dXJuIGk7XHJcblx0fVxyXG5cdGFzeW5jIGxvYWQodXJsKSB7XHJcblx0XHRsZXQgcmF3ID0gYXdhaXQgJGdldC5kYXRhKHVybCk7XHJcblxyXG5cdFx0Zm9yIChsZXQgaSA9IDAsIGZyYW1lID0gcmF3W2ldOyBmcmFtZTsgKytpLCBmcmFtZSA9IHJhd1tpXSkge1xyXG5cdFx0XHRsZXQgaW1nID0ge307XHJcblxyXG5cdFx0XHR0aGlzLmFkZEZyYW1lKFxyXG5cdFx0XHRcdFtcImltYWdlc1wiLCB1cmwsIGldLmpvaW4oXCIvXCIpLFxyXG5cdFx0XHRcdGZyYW1lLm9yaWdpbi54LFxyXG5cdFx0XHRcdGZyYW1lLm9yaWdpbi55LFxyXG5cdFx0XHRcdGZyYW1lLmRlbGF5XHJcblx0XHRcdCk7XHJcblx0XHR9XHJcblx0fVxyXG59XHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIEN1cnNvciAge1xyXG5cdGNvbnN0cnVjdG9yKC8qcmF3LCB1cmwqLykge1xyXG5cdFx0Ly8vKiogQHR5cGUge0FuaW1hdGlvbn0gKi9cclxuXHRcdC8vdGhpcy5hbmkgPSBudWxsO1xyXG5cdH1cclxuXHQvL2FzeW5jIGNyZWF0ZUFuaW1hdGlvbih1cmwpIHtcclxuXHQvL1x0bGV0IHJhdyA9IGF3YWl0ICRnZXQuZGF0YSh1cmwpO1xyXG5cdC8vXHR0aGlzLmFuaSA9IG5ldyBBbmltYXRpb24ocmF3LCB1cmwpO1xyXG5cdC8vXHRhd2FpdCB0aGlzLmFuaS5sb2FkKCk7XHJcblx0Ly99XHJcblxyXG5cdC8qKlxyXG5cdCAqIEBwYXJhbSB7Q3Vyc29yQW5pbWF0aW9uRGF0YX0gZGF0YVxyXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBzZWxlY3RvclxyXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXl3b3JkXHJcblx0ICovXHJcblx0c3RhdGljIGNyZWF0ZVRvQ1NTKGRhdGEsIHNlbGVjdG9yLCBrZXl3b3JkKSB7XHJcblx0XHRjb25zdCBpZCA9IFwiQ3Vyc29yXCIgKyBNYXRoLnRydW5jKE1hdGgucmFuZG9tKCkgKiAweEZGRkZGRkZGKS50b1N0cmluZygxNik7XHJcblxyXG5cdFx0Y29uc3QgeyBmcmFtZXMsIGR1cmF0aW9uIH0gPSBkYXRhO1xyXG5cclxuXHRcdGxldCBjc3NUZXh0ID0gYCR7c2VsZWN0b3J9OmhvdmVyIHtcXG5gO1xyXG5cclxuXHRcdGNzc1RleHQgKz0gYGN1cnNvcjogdXJsKCR7ZnJhbWVzWzBdLnVybH0pICR7ZnJhbWVzWzBdLnh9ICR7ZnJhbWVzWzBdLnl9LCAke2tleXdvcmR9O1xcbmA7XHJcblxyXG5cdFx0aWYgKGR1cmF0aW9uKSB7XHJcblx0XHRcdGNzc1RleHQgKz0gYGFuaW1hdGlvbi1uYW1lOiAke2lkfV9rZXlmcmFtZXM7XFxuYDtcclxuXHRcdFx0Y3NzVGV4dCArPSBgYW5pbWF0aW9uLWR1cmF0aW9uOiAke2R1cmF0aW9ufW1zO1xcbmA7XHJcblx0XHRcdGNzc1RleHQgKz0gYGFuaW1hdGlvbi1pdGVyYXRpb24tY291bnQ6IGluZmluaXRlO1xcbmA7XHJcblx0XHRcdGNzc1RleHQgKz0gXCJ9XFxuXCI7XHJcblxyXG5cdFx0XHRsZXQgdHQgPSAwO1xyXG5cdFx0XHR7XHJcblx0XHRcdFx0Y3NzVGV4dCArPSBgQGtleWZyYW1lcyAke2lkfV9rZXlmcmFtZXMge1xcbmA7XHJcblxyXG5cdFx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgZnJhbWVzLmxlbmd0aDsgKytpKSB7XHJcblx0XHRcdFx0XHRjb25zdCBmcmFtZSA9IGZyYW1lc1tpXTtcclxuXHJcblx0XHRcdFx0XHRsZXQgc3RhcnQgPSBNYXRoLnRydW5jKCh0dCAvIGR1cmF0aW9uKSAqIDEwMCk7XHJcblxyXG5cdFx0XHRcdFx0Y3NzVGV4dCArPSBgJHtzdGFydH0lIHsgY3Vyc29yOiB1cmwoJHtmcmFtZXNbaV0udXJsfSkgJHtmcmFtZXNbaV0ueH0gJHtmcmFtZXNbaV0ueX0sICR7a2V5d29yZH07IH1cXG5gO1xyXG5cclxuXHRcdFx0XHRcdHR0ICs9IGZyYW1lLmRlbGF5O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQvL2Nzc1RleHQgKz0gYDEwMCUgeyBjdXJzb3I6IHVybCgke2ZyYW1lc1swXS51cmx9KSAke2ZyYW1lc1swXS54fSAke2ZyYW1lc1swXS55fTsgfVxcbmA7XHJcblxyXG5cdFx0XHRcdGNzc1RleHQgKz0gXCJ9XFxuXCI7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHRjc3NUZXh0ICs9IFwifVwiO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHR2YXIgeCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJTVFlMRVwiKTtcclxuXHRcdHZhciB0ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzVGV4dCk7XHJcblx0XHR4LmlkID0gaWQ7XHJcblx0XHR4LmFwcGVuZENoaWxkKHQpO1xyXG5cdFx0ZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZCh4KTtcclxuXHJcblx0XHRyZXR1cm4geDtcclxuXHR9XHJcbn1cclxuIiwiXHJcbmltcG9ydCB7IH0gZnJvbSAnLi9pbml0LmpzJztcclxuaW1wb3J0IHsgVmVjMiwgUmVjdGFuZ2xlIH0gZnJvbSAnLi9tYXRoLmpzJztcclxuaW1wb3J0IHsgSUdyYXBoLCBJUmVuZGVyZXIgfSBmcm9tICcuL0lSZW5kZXJlci5qcyc7XHJcbmltcG9ydCB7IGVuZ2luZSwgR3JhcGggfSBmcm9tICcuL0VuZ2luZS5qcyc7XHJcbmltcG9ydCB7IEFuaW1hdGlvbiB9IGZyb20gJy4vQW5pbWF0aW9uLmpzJztcclxuXHJcbmltcG9ydCB7IEdhbWVTdGF0ZU1hbmFnZXIgfSBmcm9tICcuL0dhbWVTdGF0ZS5qcyc7XHJcbmltcG9ydCB7IFNjZW5lTWFwIH0gZnJvbSAnLi9NYXAuanMnO1xyXG4vL2ltcG9ydCB7IFNjZW5lQ2hhcmFjdGVyIH0gZnJvbSAnLi9TY2VuZUNoYXJhY3Rlci5qcyc7XHJcblxyXG5pbXBvcnQgeyBFZmZlY3RNYW5hZ2VyIH0gZnJvbSBcIi4vU2tpbGwuanNcIjtcclxuaW1wb3J0IHsgfSBmcm9tIFwiLi9Nb2JTa2lsbC8yMzguRmFpcnlEdXN0LmpzXCI7XHJcblxyXG5pbXBvcnQgeyBkYW1hZ2VOdW1iZXJMYXllciB9IGZyb20gXCIuL1JlbmRlcmVyL0RhbWFnZU51bWJlci5qc1wiO1xyXG5pbXBvcnQgeyBzY2VuZVJlbmRlcmVyLCBTY2VuZVJlbmRlcmVyIH0gZnJvbSBcIi4vUmVuZGVyZXIvU2NlbmVSZW5kZXJlci5qc1wiO1xyXG5cclxuaW1wb3J0IHsgQ3Vyc29yLCBDdXJzb3JBbmltYXRpb25EYXRhIH0gZnJvbSBcIi4vQ3Vyc29yLmpzXCI7XHJcblxyXG5pbXBvcnQgeyBTY2VuZUNoYXJhY3RlciB9IGZyb20gXCIuL1NjZW5lQ2hhcmFjdGVyLmpzXCI7Ly9kZWJ1Z1xyXG5pbXBvcnQgeyBhcHAgYXMgZ0FwcCB9IGZyb20gXCIuLi9pbmRleC5qc1wiOy8vZGVidWdcclxuXHJcbmltcG9ydCB7IHVpQW5pbWF0aW9uTWFuYWdlciB9IGZyb20gJy4uL3VpL1VJQW5pbWF0aW9uTWFuYWdlci5qcyc7XHJcblxyXG5pbXBvcnQgeyBDbGllbnQgfSBmcm9tIFwiLi4vQ2xpZW50L0NsaWVudC5qc1wiO1xyXG5cclxuXHJcbnNjZW5lUmVuZGVyZXIuYWRkTGF5ZXJCYWNrKDEyKTtcclxuXHJcbndpbmRvdy5TQ1JFRU5fUFJJTlRMTiA9IGZ1bmN0aW9uIChnZXRUZXh0LCBnZXRWYWx1ZSkge1xyXG5cdGlmIChhcmd1bWVudHMubGVuZ3RoID09IDIpIHtcclxuXHRcdHdpbmRvdy5fU0NSRUVOX1BSSU5UTE4ucHVzaCh7IGdldFRleHQsIGdldFZhbHVlIH0pO1xyXG5cdH1cclxuXHRlbHNlIGlmIChhcmd1bWVudHMubGVuZ3RoID09IDEpIHtcclxuXHRcdHdpbmRvdy5fU0NSRUVOX1BSSU5UTE4ucHVzaChhcmd1bWVudHNbMF0pO1xyXG5cdH1cclxufVxyXG53aW5kb3cuX1NDUkVFTl9QUklOVExOID0gW107XHJcblxyXG52YXIgYW5pbWF0aW9uUmVxdWVzdElEID0gbnVsbDtcclxuXHJcbndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicG9wc3RhdGVcIiwgZnVuY3Rpb24gKGUpIHtcclxuXHRHYW1lU3RhdGVNYW5hZ2VyLlBvcFN0YXRlKGUuc3RhdGUpO1xyXG59KTtcclxuXHJcblxyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcbi8vXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZUN1cnNvcl9jbGlja2FibGUoKSB7XHJcblx0bGV0IGRhdGEgPSBuZXcgQ3Vyc29yQW5pbWF0aW9uRGF0YSgpO1xyXG5cclxuXHRsZXQgdGFzazEgPSBkYXRhLmFkZEZyYW1lRnJvbVVybChcIi9VSS9CYXNpYy9DdXJzb3IvMC8wXCIpLnRoZW4oZnVuY3Rpb24gKGkpIHtcclxuXHRcdGRhdGEuZnJhbWVzW2ldLmRlbGF5ID0gMjAwO1xyXG5cdH0pO1xyXG5cclxuXHRsZXQgdGFzazIgPSBkYXRhLmFkZEZyYW1lRnJvbVVybChcIi9VSS9CYXNpYy9DdXJzb3IvMTIvMFwiKS50aGVuKGZ1bmN0aW9uIChpKSB7XHJcblx0XHRkYXRhLmZyYW1lc1tpXS5kZWxheSA9IDIwMDtcclxuXHR9KTtcclxuXHJcblx0cmV0dXJuIFByb21pc2UuYWxsKFt0YXNrMSwgdGFzazJdKS50aGVuKGZ1bmN0aW9uICgpIHtcclxuXHRcdGRhdGEuZHVyYXRpb24gPSA0MDA7XHJcblxyXG5cdFx0Q3Vyc29yLmNyZWF0ZVRvQ1NTKGRhdGEsIFwiLnVpLWNsaWNrYWJsZVwiLCBcInBvaW50ZXJcIik7XHJcblx0fSk7XHJcbn1cclxuXHJcbmNyZWF0ZUN1cnNvcl9jbGlja2FibGUoKTtcclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuLy9cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuXHJcbi8qKlxyXG4gKiBAcGFyYW0ge0tleWJvYXJkRXZlbnR9IGVcclxuICovXHJcbndpbmRvdy5vbmtleWRvd24gPSBmdW5jdGlvbiAoZSkge1xyXG5cdGlmIChlLnRhcmdldCAhPSBkb2N1bWVudC5ib2R5KSB7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cdGxldCBrID0gZS5rZXk7XHJcblxyXG5cdGlmIChrICE9IG51bGwgJiYgISRndi5pbnB1dF9rZXlEb3duW2tdKSB7XHJcblx0XHQkZ3YuaW5wdXRfa2V5RG93bltrXSAhPSBudWxsID8gKCsrJGd2LmlucHV0X2tleURvd25ba10pIDogKCRndi5pbnB1dF9rZXlEb3duW2tdID0gMSk7XHJcblx0fVxyXG5cclxuXHRpZiAoZS5jb2RlID09ICdTcGFjZScpIHtcclxuXHRcdCQoXCIjbV9pc19ydW5cIikuY2xpY2soKTtcclxuXHR9XHJcblx0aWYgKGUuY29kZSA9PSBcIkYyXCIpIHtcclxuXHRcdCRndi5tX2VkaXRvcl9tb2RlID0gISRndi5tX2VkaXRvcl9tb2RlO1xyXG5cdH1cclxufVxyXG5cclxud2luZG93Lm9ua2V5dXAgPSBmdW5jdGlvbiAoZSkge1xyXG5cdGlmIChlLnRhcmdldCAhPSBkb2N1bWVudC5ib2R5KSB7XHJcblx0XHRyZXR1cm47XHJcblx0fVxyXG5cdGxldCBrID0gZS5rZXk7XHJcblxyXG5cdGlmIChrICE9IG51bGwgJiYgJGd2LmlucHV0X2tleURvd25ba10pIHtcclxuXHRcdCRndi5pbnB1dF9rZXlEb3duW2tdID0gMDtcclxuXHRcdCRndi5pbnB1dF9rZXlVcFtrXSA9IDE7XHJcblx0fVxyXG59XHJcblxyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkod2luZG93LCBcIiRtX2lzX3J1blwiLCB7XHJcblx0Z2V0OiBmdW5jdGlvbiAoKSB7XHJcblx0XHRyZXR1cm4gJChcIiNtX2lzX3J1blwiKS5hdHRyKFwiY2hlY2tlZFwiKTtcclxuXHR9LCBcclxuXHRzZXQ6IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG5cdFx0JChcIiNtX2lzX3J1blwiKS5hdHRyKFwiY2hlY2tlZFwiLCAhdmFsdWUpO1xyXG5cdFx0JChcIiNtX2lzX3J1blwiKS5jbGljaygpO1xyXG5cdH1cclxufSk7XHJcblxyXG4vKipcclxuICogQHBhcmFtIHtNb3VzZUV2ZW50fSBlXHJcbiAqL1xyXG53aW5kb3cub25tb3VzZWRvd24gPSBmdW5jdGlvbiAoZSkge1xyXG5cdGlmICgkZ3YubV9lZGl0b3JfbW9kZSkge1xyXG5cdFx0aWYgKCFlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJFZGl0b3JcIikpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRpZiAoZS53aGljaCA9PSAxKSB7XHJcblx0XHQkZ3YubW91c2VfZGwgPSAxO1xyXG5cdFx0JGd2Lm1vdXNlX3VsID0gMDtcclxuXHR9XHJcblx0ZWxzZSBpZiAoZS53aGljaCA9PSAyKSB7XHJcblx0XHQkZ3YubW91c2VfZG0gPSAxO1xyXG5cdFx0JGd2Lm1vdXNlX3VtID0gMDtcclxuXHR9XHJcblx0ZWxzZSBpZiAoZS53aGljaCA9PSAzKSB7XHJcblx0XHQkZ3YubW91c2VfZHIgPSAxO1xyXG5cdFx0JGd2Lm1vdXNlX3VyID0gMDtcclxuXHR9XHJcblx0JGd2Lm1vdXNlX3ggPSBlLnBhZ2VYO1xyXG5cdCRndi5tb3VzZV95ID0gZS5wYWdlWTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEBwYXJhbSB7TW91c2VFdmVudH0gZVxyXG4gKi9cclxud2luZG93Lm9ubW91c2V1cCA9IGZ1bmN0aW9uIChlKSB7XHJcblx0aWYgKCRndi5tX2VkaXRvcl9tb2RlKSB7XHJcblx0XHRpZiAoIWUudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIkVkaXRvclwiKSkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblx0fVxyXG5cdGlmIChlLndoaWNoID09IDEpIHtcclxuXHRcdCRndi5tb3VzZV9kbCA9IDA7XHJcblx0XHQkZ3YubW91c2VfdWwgPSAxO1xyXG5cdH1cclxuXHRlbHNlIGlmIChlLndoaWNoID09IDIpIHtcclxuXHRcdCRndi5tb3VzZV9kbSA9IDA7XHJcblx0XHQkZ3YubW91c2VfdW0gPSAxO1xyXG5cdH1cclxuXHRlbHNlIGlmIChlLndoaWNoID09IDMpIHtcclxuXHRcdCRndi5tb3VzZV9kciA9IDA7XHJcblx0XHQkZ3YubW91c2VfdXIgPSAxO1xyXG5cdH1cclxuXHQkZ3YubW91c2VfeCA9IGUucGFnZVg7XHJcblx0JGd2Lm1vdXNlX3kgPSBlLnBhZ2VZO1xyXG59XHJcblxyXG4vKipcclxuICogQHBhcmFtIHtNb3VzZUV2ZW50fSBlXHJcbiAqL1xyXG53aW5kb3cub25tb3VzZW1vdmUgPSBmdW5jdGlvbiAoZSkge1xyXG5cdGlmICgkZ3YubV9lZGl0b3JfbW9kZSkge1xyXG5cdFx0aWYgKCFlLnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJFZGl0b3JcIikpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cdH1cclxuXHQkZ3YubW91c2VfeCA9IGUucGFnZVg7XHJcblx0JGd2Lm1vdXNlX3kgPSBlLnBhZ2VZO1xyXG5cdCRndi5tb3VzZV9tb3ZlID0gMTtcclxufVxyXG5cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG4vL1xyXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIEdhbWUge1xyXG5cdGNvbnN0cnVjdG9yKCkge1xyXG5cdFx0dGhpcy50aW1lciA9IDA7XHJcblx0XHR0aGlzLnRpbWVyXyA9IDA7XHJcblx0XHR0aGlzLl9kVGltZXIgPSAwO1xyXG5cdFx0dGhpcy5mcHNfYXJyID0gW107XHJcblx0XHR0aGlzLmZyYW1lX3NfYXJyID0gW107XHJcblx0XHRcclxuXHRcdC8vdGhpcy5jaGFyYSA9IG51bGw7XHJcblx0XHRcclxuXHRcdC8qKiBAdHlwZSB7U2NlbmVNYXB9ICovXHJcblx0XHR0aGlzLnNjZW5lX21hcCA9IG5ldyBTY2VuZU1hcCgpO1xyXG5cclxuXHRcdHdpbmRvdy5zY2VuZV9tYXAgPSB0aGlzLnNjZW5lX21hcDtcclxuXHRcdCRndi5zY2VuZV9tYXAgPSB3aW5kb3c7XHJcblxyXG5cdFx0c2NlbmVfbWFwLm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0R2FtZVN0YXRlTWFuYWdlci5QdXNoU3RhdGUodGhpcywgd2luZG93LmNoYXJhKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0dGhpcy5fbG9vcCA9IHRoaXMuX2xvb3AuYmluZCh0aGlzKTtcclxuXHRcdFxyXG5cdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJtX2lzX3J1blwiKS5vbmNoYW5nZSA9IChmdW5jdGlvbiAoZSkge1xyXG5cdFx0XHR0aGlzLm1faXNfcnVuID0gZS50YXJnZXQuY2hlY2tlZCA/IHRydWUgOiBmYWxzZTtcclxuXHRcdFx0aWYgKHRoaXMubV9pc19ydW4pIHtcclxuXHRcdFx0XHRhbmltYXRpb25SZXF1ZXN0SUQgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5fbG9vcCk7XHJcblx0XHRcdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJTY3JlZW5zaG90XCIpLmlubmVySFRNTCA9IFwiXCI7XHJcblx0XHRcdH1cclxuXHRcdH0pLmJpbmQodGhpcyk7XHJcblxyXG5cdFx0dGhpcy5fJG1vdmVWaWV3cG9ydFNwZWVkID0gMTA7Ly9kZWJ1Z1xyXG5cdH1cclxuXHRcclxuXHRtb3ZlVmlld3BvcnQoaW5Cb3VuZCkge1xyXG5cdFx0Y29uc3Qgc2NlbmVfbWFwID0gdGhpcy5zY2VuZV9tYXA7XHJcblxyXG5cdFx0Y29uc3Qgc3BlZWQgPSAkZ3YuaW5wdXRfa2V5RG93blsneiddID8gKHRoaXMuXyRtb3ZlVmlld3BvcnRTcGVlZCAqIDEwKSA6IHRoaXMuXyRtb3ZlVmlld3BvcnRTcGVlZDtcclxuXHJcblx0XHQvLyRndi5tX3ZpZXdSZWN0ID0gc2NlbmVfbWFwLnZpZXdBcmVhKG5ldyBWZWMyKCRndi5tX3ZpZXdSZWN0LmxlZnQsICRndi5tX3ZpZXdSZWN0LnRvcCkpO1xyXG5cclxuXHRcdGlmICgkZ3YuaW5wdXRfa2V5RG93blsnQXJyb3dMZWZ0J10gPiAwKSB7XHJcblx0XHRcdCRndi5tX3ZpZXdSZWN0LmxlZnQgLT0gc3BlZWQ7XHJcblx0XHR9XHJcblx0XHRpZiAoJGd2LmlucHV0X2tleURvd25bJ0Fycm93UmlnaHQnXSA+IDApIHtcclxuXHRcdFx0JGd2Lm1fdmlld1JlY3QubGVmdCArPSBzcGVlZDtcclxuXHRcdH1cclxuXHRcdGlmICgkZ3YuaW5wdXRfa2V5RG93blsnQXJyb3dVcCddID4gMCkge1xyXG5cdFx0XHQkZ3YubV92aWV3UmVjdC50b3AgLT0gc3BlZWQ7XHJcblx0XHR9XHJcblx0XHRpZiAoJGd2LmlucHV0X2tleURvd25bJ0Fycm93RG93biddID4gMCkge1xyXG5cdFx0XHQkZ3YubV92aWV3UmVjdC50b3AgKz0gc3BlZWQ7XHJcblx0XHR9XHJcblxyXG5cdFx0bGV0IHsgbGVmdCwgdG9wLCByaWdodCwgYm90dG9tIH0gPSBzY2VuZV9tYXAubWFwQm91bmQ7XHJcblxyXG5cdFx0aWYgKGluQm91bmQpIHtcclxuXHRcdFx0aWYgKCRndi5tX3ZpZXdSZWN0LmxlZnQgPCBsZWZ0KSB7XHJcblx0XHRcdFx0JGd2Lm1fdmlld1JlY3QubGVmdCA9IGxlZnQ7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCRndi5tX3ZpZXdSZWN0LnJpZ2h0ID4gcmlnaHQpIHtcclxuXHRcdFx0XHQkZ3YubV92aWV3UmVjdC5sZWZ0ID0gcmlnaHQgLSAkZ3YubV92aWV3UmVjdC53aWR0aDtcclxuXHRcdFx0fVxyXG5cdFx0XHRpZiAoJGd2Lm1fdmlld1JlY3QudG9wIDwgdG9wKSB7XHJcblx0XHRcdFx0JGd2Lm1fdmlld1JlY3QudG9wID0gdG9wO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmICgkZ3YubV92aWV3UmVjdC5ib3R0b20gPiBib3R0b20pIHtcclxuXHRcdFx0XHQkZ3YubV92aWV3UmVjdC50b3AgPSBib3R0b20gLSAkZ3YubV92aWV3UmVjdC5oZWlnaHQ7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0LyoqXHJcblx0ICogQHBhcmFtIHtzdHJpbmd9IHNlcnZlclxyXG5cdCAqL1xyXG5cdGFzeW5jIF8kc3RhcnRDbGllbnQoc2VydmVyKSB7XHJcblx0XHRpZiAoc2NlbmVfbWFwKSB7XHJcblx0XHRcdGxldCBjbGllbnQgPSBuZXcgQ2xpZW50KCk7XHJcblx0XHRcdFxyXG5cdFx0XHR0cnkge1xyXG5cdFx0XHRcdGF3YWl0IGNsaWVudC5jb25uZWN0KHNlcnZlcik7XHJcblx0XHRcdFx0Y29uc29sZS5sb2coXCJzdGFydCBjbGllbnRcIik7XHJcblx0XHRcdH1cclxuXHRcdFx0Y2F0Y2ggKGVycikge1xyXG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuXHRcdFx0XHRjb25zb2xlLmxvZyhcInN0YXJ0IG9mZmxpbmVcIik7XHJcblx0XHRcdFx0dGhpcy5fJHN0YXJ0X29mZmxpbmUoKTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdGdBcHAuY2xpZW50ID0gY2xpZW50O1xyXG5cdFx0XHRjbGllbnQuJHRlc3QoKTtcclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHRkZWJ1Z2dlcjtcclxuXHRcdH1cclxuXHR9XHJcblx0XyRzdGFydF9vZmZsaW5lKCkge1xyXG5cdFx0bGV0IHBhcmFtcyA9IF9wYXJzZVVybFBhcmFtZXRlcigpO1xyXG5cdFx0bGV0IG1hcF9pZDtcclxuXHRcclxuXHRcdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nKSB7XHJcblx0XHRcdG1hcF9pZCA9IHBhcmFtc1tcIm1hcFwiXSB8fCB3aW5kb3cuREVGQVVMVF9NQVBfSUQ7XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0bWFwX2lkID0gcGFyYW1zW1wibWFwXCJdIHx8IFwiMDAwMDAwMDAwXCI7Ly80NTAwMDMwMDBcclxuXHRcdH1cclxuXHRcclxuXHRcdGxldCBjaGFyYV9jb2RlID0gcGFyYW1zW1wiY2hhcmFcIl0gfHwgXCJjLDAwMDAyMDEyLDAwMDEyMDEyLDAwMDI2NTA5fDAwMDI2NTA5LDAwMDM0ODczfDAwMDM0ODczLDAxMDUxNDI5LDAxMDcyMzkyXCI7XHJcblx0XHJcblx0XHRHYW1lU3RhdGVNYW5hZ2VyLlBvcFN0YXRlKHtcclxuXHRcdFx0bWFwX2lkOiBtYXBfaWQsXHJcblx0XHRcdGNoYXJhOiBjaGFyYV9jb2RlLFxyXG5cdFx0fSk7XHJcblx0fVxyXG5cclxuXHQvKiogQHR5cGUge2Jvb2xlYW59ICovXHJcblx0Z2V0IF9pc01hcFJlYWR5KCkge1xyXG5cdFx0Y29uc3Qgc2NlbmVfbWFwID0gdGhpcy5zY2VuZV9tYXA7XHJcblx0XHRyZXR1cm4gc2NlbmVfbWFwICYmIHNjZW5lX21hcC5pc0xvYWRlZCgpO1xyXG5cdH1cclxuXHRcclxuXHRhc3luYyBydW4oKSB7XHJcblx0XHRjb25zb2xlLmxvZyhcImJlZ2luIHJlbmRlclwiKTtcclxuXHRcdHRoaXMuX2xvb3AoMCk7Ly9zdGFydCByZW5kZXJcclxuXHR9XHJcblx0XHJcblx0YXN5bmMgZm9yY2VVcGRhdGVTY3JlZW4oKSB7XHJcblx0XHRjb25zdCBjaGFyYSA9IHRoaXMuY2hhcmE7XHJcblx0XHRcclxuXHRcdHRoaXMuX3VwZGF0ZVNjZW5lKDApO1xyXG5cdFx0XHJcblx0XHRjaGFyYS5yZW5kZXJlci5fX2ZvcmNlVXBkYXRlKDApO1xyXG5cdFx0XHJcblx0XHRpZiAodGhpcy5tX2lzX3J1bikge1xyXG5cdFx0XHRhd2FpdCBjaGFyYS5yZW5kZXJlci53YWl0TG9hZGVkKCk7XHJcblx0XHRcdGNoYXJhLnJlbmRlcmVyLl9fcmVxdWlyZV91cGRhdGUgPSB0cnVlOy8vdXBkYXRlIG9uY2VcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cdFx0YXdhaXQgY2hhcmEucmVuZGVyZXIud2FpdExvYWRlZCgpO1xyXG5cdFx0YXdhaXQgY2hhcmEucmVuZGVyZXIuX3dhaXRGcmFtZVRleHR1cmVzTG9hZGVkKCk7XHJcblx0XHRhd2FpdCBJR3JhcGgud2FpdEFsbExvYWRlZCgpO1xyXG5cdFx0XHJcblx0XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIlNjcmVlbnNob3RcIikuaW5uZXJIVE1MID0gXCJcIjtcclxuXHRcdFxyXG5cdFx0Y2hhcmEucmVuZGVyZXIuX19yZXF1aXJlX3VwZGF0ZSA9IHRydWU7Ly91cGRhdGUgb25jZVxyXG5cdFx0XHJcblx0XHR0aGlzLl9sb29wKDApO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQHBhcmFtIHtudW1iZXJ9IHN0YW1wXHJcblx0ICovXHJcblx0X2NhbGNGUFMoc3RhbXApIHtcclxuXHRcdHRyeSB7XHJcblx0XHRcdGlmICgodGhpcy50aW1lciAtIHRoaXMudGltZXJfKSA+PSAxMDAwKSB7XHJcblx0XHRcdFx0aWYgKHRoaXMuZnBzX2Fyci5sZW5ndGgpIHtcclxuXHRcdFx0XHRcdGxldCBzdW0gPSB0aGlzLmZwc19hcnIucmVkdWNlKGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBhICsgYjsgfSk7XHJcblx0XHRcdFx0XHRsZXQgYXZnID0gc3VtIC8gdGhpcy5mcHNfYXJyLmxlbmd0aDtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0JGd2LkZQUyA9IGF2ZztcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJGUFNcIikuaW5uZXJIVE1MID0gYXZnLnRvRml4ZWQoMik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGlmICh0aGlzLmZyYW1lX3NfYXJyLmxlbmd0aCkge1xyXG5cdFx0XHRcdFx0bGV0IHN1bSA9IHRoaXMuZnJhbWVfc19hcnIucmVkdWNlKGZ1bmN0aW9uIChhLCBiKSB7IHJldHVybiBhICsgYjsgfSk7XHJcblx0XHRcdFx0XHRsZXQgYXZnID0gc3VtIC8gdGhpcy5mcmFtZV9zX2Fyci5sZW5ndGg7XHJcblx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdCRndi5mcmFtZUNvdW50ID0gYXZnO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImZyYW1lXCIpLmlubmVySFRNTCA9IGF2Zy50b0ZpeGVkKDIpO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0dGhpcy5mcmFtZV9zX2FyciA9IFtdO1xyXG5cdFx0XHRcdHRoaXMuZnBzX2FyciA9IFtdO1xyXG5cclxuXHRcdFx0XHR0aGlzLnRpbWVyXyA9IHRoaXMudGltZXI7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSBpZiAoc3RhbXAgPiAwICYmIE51bWJlci5pc0Zpbml0ZShzdGFtcCkpIHtcclxuXHRcdFx0XHR0aGlzLmZwc19hcnIucHVzaCgxMDAwIC8gc3RhbXApO1xyXG5cdFx0XHRcdHRoaXMuZnJhbWVfc19hcnIucHVzaChzdGFtcCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdGNhdGNoIChleCkge1xyXG5cdFx0XHRkZWJ1Z2dlcjtcclxuXHRcdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJGUFNcIikuaW5uZXJIVE1MID0gXCItXCI7XHJcblx0XHRcdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZnJhbWVcIikuaW5uZXJIVE1MID0gXCItXCI7XHJcblx0XHRcdHRoaXMuZnBzX2FyciA9IFtdO1xyXG5cdFx0XHR0aGlzLmZyYW1lX3NfYXJyID0gW107XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRfcmVxdWVzdE5leHRGcmFtZSgpIHtcclxuXHRcdGlmICh0aGlzLm1faXNfcnVuKSB7XHJcblx0XHRcdGFuaW1hdGlvblJlcXVlc3RJRCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLl9sb29wKTtcclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHQvL2FzeW5jXHJcblx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdGxldCBlbGVtID0gbmV3IEltYWdlKCk7XHJcblx0XHRcdFx0ZWxlbS5zcmMgPSBlbmdpbmUuX2NhbnZhcy50b0RhdGFVUkwoKTtcclxuXHRcdFx0XHRlbmdpbmUuY3R4LmNsZWFyUmVjdCgwLCAwLCBlbmdpbmUuY3R4LndpZHRoLCBlbmdpbmUuY3R4LmhlaWdodCk7XHJcblx0XHRcdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJTY3JlZW5zaG90XCIpLmFwcGVuZENoaWxkKGVsZW0pO1xyXG5cdFx0XHR9LCAwKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBzdGFtcFxyXG5cdCAqL1xyXG5cdF91cGRhdGVTY2VuZShzdGFtcCkge1xyXG5cdFx0LyoqIEB0eXBlIHtTY2VuZUNoYXJhY3Rlcn0gKi9cclxuXHRcdGNvbnN0IGNoYXJhID0gdGhpcy5jaGFyYTtcclxuXHJcblx0XHQvKiogQHR5cGUge1NjZW5lQ2hhcmFjdGVyW119ICovXHJcblx0XHRjb25zdCBjaGFyYUxpc3QgPSB0aGlzLmNoYXJhTGlzdDtcclxuXHJcblx0XHR7XHJcblx0XHRcdGlmICh0aGlzLl9pc01hcFJlYWR5KSB7XHJcblx0XHRcdFx0c2NlbmVfbWFwLnVwZGF0ZShzdGFtcCk7Ly9pbmNsdWRlIHdvcmxkLnVwZGF0ZVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBiZWZvcmUgd29ybGQudXBkYXRlID8/XHJcblx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgY2hhcmFMaXN0Lmxlbmd0aDsgKytpKSB7XHJcblx0XHRcdFx0Y2hhcmFMaXN0W2ldLnVwZGF0ZShzdGFtcCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdCRndi5TY2VuZU9iamVjdE1nci5VcGRhdGUoc3RhbXApO1xyXG5cclxuXHRcdFx0RWZmZWN0TWFuYWdlci5VcGRhdGUoc3RhbXApO1xyXG5cdFx0fVxyXG5cdFx0aWYgKHdpbmRvdy4kaW8pIHtcclxuXHRcdFx0Y29uc3QgY2xpZW50ID0gZ0FwcC5jbGllbnQ7Ly9ub3Qgb2ZmbGluZSBjaGFyYWN0ZXJcclxuXHJcblx0XHRcdGlmIChjbGllbnQgJiYgY2xpZW50LmNoYXJhKSB7XHJcblx0XHRcdFx0LyoqIEB0eXBlIHtTY2VuZUNoYXJhY3Rlcn0gKi9cclxuXHRcdFx0XHRjb25zdCBjaCA9IGNsaWVudC5jaGFyYTtcclxuXHJcblx0XHRcdFx0Y2guJGVtaXRNb3ZlUGFja2V0KCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0c2NlbmVSZW5kZXJlci51cGRhdGUoc3RhbXApO1xyXG5cdFx0XHJcblx0XHRkYW1hZ2VOdW1iZXJMYXllci51cGRhdGUoc3RhbXApO1xyXG5cdH1cclxuXHRcclxuXHRfcmVuZGVyU2NlbmUoKSB7XHJcblx0XHRpZiAodGhpcy5faXNNYXBSZWFkeSkge1xyXG5cdFx0XHR0aGlzLl9yZW5kZXJfbWFwX3JlYWR5KCk7XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0dGhpcy5fcmVuZGVyX21hcF9sb2FkaW5nKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cdF9yZW5kZXJfbWFwX3JlYWR5KCkge1xyXG5cdFx0LyoqIEB0eXBlIHtTY2VuZUNoYXJhY3Rlcn0gKi9cclxuXHRcdGNvbnN0IGNoYXJhID0gdGhpcy5jaGFyYTtcclxuXHJcblx0XHQvKiogQHR5cGUge1NjZW5lQ2hhcmFjdGVyW119ICovXHJcblx0XHRjb25zdCBjaGFyYUxpc3QgPSB0aGlzLmNoYXJhTGlzdDtcclxuXHRcdFxyXG5cdFx0ZW5naW5lLmJlZ2luU2NlbmUoKTtcclxuXHRcdHtcclxuXHRcdFx0ZW5naW5lLmxvYWRJZGVudGl0eSgpO1xyXG5cdFx0XHRlbmdpbmUuY2xlYXJEcmF3U2NyZWVuKCk7XHJcblx0XHRcdFxyXG5cdFx0XHQkZ3YubV92aWV3UmVjdC5zaXplID0gZW5naW5lLnNjcmVlbl9zaXplO1xyXG5cdFx0XHRpZiAoISRndi5tX2VkaXRvcl9tb2RlKSB7XHJcblx0XHRcdFx0aWYgKGNoYXJhICYmIGNoYXJhLnJlbmRlcmVyKSB7XHJcblx0XHRcdFx0XHQkZ3YubV92aWV3UmVjdC5zZXRDZW50ZXIoY2hhcmEucmVuZGVyZXIueCwgY2hhcmEucmVuZGVyZXIueSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2UgaWYgKHNjZW5lX21hcC5jb250cm9sbGVyLnBsYXllcikge1xyXG5cdFx0XHRcdFx0Y29uc3QgcG9zID0gc2NlbmVfbWFwLmNvbnRyb2xsZXIucGxheWVyLmdldFBvc2l0aW9uKCk7XHJcblx0XHRcdFx0XHRjb25zdCBweCA9IE1hdGgudHJ1bmMocG9zLnggKiAkZ3YuQ0FOVkFTX1NDQUxFICsgMC41KTtcclxuXHRcdFx0XHRcdGNvbnN0IHB5ID0gTWF0aC50cnVuYyhwb3MueSAqICRndi5DQU5WQVNfU0NBTEUgKyAwLjUpO1xyXG5cdFx0XHRcdFx0JGd2Lm1fdmlld1JlY3Quc2V0Q2VudGVyKHB4LCBweSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoJGd2Lm1fZWRpdG9yX21vZGUpIHtcclxuXHRcdFx0XHR0aGlzLm1vdmVWaWV3cG9ydChmYWxzZSk7XHJcblx0XHRcdH1cclxuXHRcdFx0aWYgKCRndi5tX2lzX3JlbmRlcmluZ19tYXApIHtcclxuXHRcdFx0XHRzY2VuZV9tYXAuYmVnaW5SZW5kZXIoZW5naW5lKTtcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRzY2VuZV9tYXAucmVuZGVyQmFja2dyb3VuZChlbmdpbmUpO1xyXG5cdFx0XHRcdFx0Ly9pZiAoJGd2Lm1fZGlzcGxheV9saWZlICYmIHNjZW5lX21hcC5fcmF3LmluZm8ubWlycm9yX0JvdHRvbSkge1xyXG5cdFx0XHRcdFx0Ly9cdGVuZ2luZS5jdHguc2V0VHJhbnNmb3JtKDEsIDAsIDAsIDEsIDAsIDApO1xyXG5cdFx0XHRcdFx0Ly9cdGVuZ2luZS5jdHgudHJhbnNsYXRlKE1hdGgudHJ1bmMoLSRndi5tX3ZpZXdSZWN0LngpLCBNYXRoLnRydW5jKC0kZ3YubV92aWV3UmVjdC55KSk7XHJcblx0XHRcdFx0XHQvL1x0ZW5naW5lLmN0eC5zY2FsZSgxLCAtMSk7XHJcblx0XHRcdFx0XHQvL1x0Zm9yIChsZXQgaSA9IDA7IGkgPCBzY2VuZV9tYXAubGF5ZXJlZE9iamVjdC5sZW5ndGg7ICsraSkge1xyXG5cdFx0XHRcdFx0Ly9cdFx0c2NlbmVfbWFwLnJlbmRlckxpZmUoZW5naW5lLCBpKTtcclxuXHRcdFx0XHRcdC8vXHR9XHJcblx0XHRcdFx0XHQvL31cclxuXHRcdFx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgc2NlbmVfbWFwLmxheWVyZWRPYmplY3QubGVuZ3RoOyArK2kpIHtcclxuXHRcdFx0XHRcdFx0c2NlbmVfbWFwLnJlbmRlckxheWVyZWRPYmplY3QoZW5naW5lLCBpKTtcclxuXHRcdFx0XHRcdFx0c2NlbmVfbWFwLnJlbmRlckxheWVyZWRUaWxlKGVuZ2luZSwgaSk7XHJcblx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRzY2VuZV9tYXAuYXBwbHlDYW1lcmEoZW5naW5lKTtcclxuXHRcdFx0XHRcdFx0e1xyXG5cdFx0XHRcdFx0XHRcdGlmICgkZ3YubV9kaXNwbGF5X290aGVyX3BsYXllcikge1xyXG5cdFx0XHRcdFx0XHRcdFx0Zm9yIChsZXQgY2hhcmFfaW5kZXggPSAwOyBjaGFyYV9pbmRleCA8IGNoYXJhTGlzdC5sZW5ndGg7ICsrY2hhcmFfaW5kZXgpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKGNoYXJhTGlzdFtjaGFyYV9pbmRleF0gPT0gY2hhcmEpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHRlbHNlIGlmIChjaGFyYUxpc3RbY2hhcmFfaW5kZXhdLiRsYXllciA9PSBpKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2hhcmFMaXN0W2NoYXJhX2luZGV4XS5yZW5kZXIoZW5naW5lKTtcclxuXHRcdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0XHRzY2VuZV9tYXAucmVuZGVyTGlmZShlbmdpbmUsIGkpO1xyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdGlmICgkZ3YubV9kaXNwbGF5X3BsYXllciAmJiBjaGFyYSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKChjaGFyYS4kbGF5ZXIgPT0gbnVsbCB8fCBjaGFyYS4kbGF5ZXIgPT0gaSkgJiYgY2hhcmEucmVuZGVyZXIpIHtcclxuXHRcdFx0XHRcdFx0XHRcdFx0Y2hhcmEucmVuZGVyKGVuZ2luZSk7XHJcblx0XHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0XHRcdCRndi5TY2VuZU9iamVjdE1nci5SZW5kZXJMYXllcihlbmdpbmUsIGkpO1xyXG5cdFx0XHRcdFx0XHRcdC8vXHJcblx0XHRcdFx0XHRcdFx0c2NlbmVSZW5kZXJlci5yZW5kZXJMYXllcihlbmdpbmUsIGkpO1xyXG5cdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRzY2VuZV9tYXAuYXBwbHlDYW1lcmEoZW5naW5lKTtcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0Zm9yIChsZXQgaSA9IHNjZW5lX21hcC5sYXllcmVkT2JqZWN0Lmxlbmd0aDsgaSA8IDEyOyArK2kpIHtcclxuXHRcdFx0XHRcdFx0XHQkZ3YuU2NlbmVPYmplY3RNZ3IuUmVuZGVyTGF5ZXIoZW5naW5lLCBpKTtcclxuXHRcdFx0XHRcdFx0XHQvL1xyXG5cdFx0XHRcdFx0XHRcdHNjZW5lUmVuZGVyZXIucmVuZGVyTGF5ZXIoZW5naW5lLCBpKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRzY2VuZV9tYXAuZW5kUmVuZGVyKGVuZ2luZSk7XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0Ly9UT0RPOiBsYXllclxyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgc2NlbmVSZW5kZXJlci5sYXllcnMubGVuZ3RoOyArK2kpIHtcclxuXHRcdFx0XHRcdHNjZW5lUmVuZGVyZXIucmVuZGVyTGF5ZXIoZW5naW5lLCBpKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYgKCRndi5tX2Rpc3BsYXlfb3RoZXJfcGxheWVyIHx8ICRndi5tX2Rpc3BsYXlfcGxheWVyKSB7XHJcblx0XHRcdFx0XHRzY2VuZV9tYXAuYXBwbHlDYW1lcmEoZW5naW5lKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBjaGFyYUxpc3QubGVuZ3RoOyArK2kpIHtcclxuXHRcdFx0XHRcdFx0aWYgKGNoYXJhTGlzdFtpXSAhPSBjaGFyYSAmJiAkZ3YubV9kaXNwbGF5X290aGVyX3BsYXllcikge1xyXG5cdFx0XHRcdFx0XHRcdGNoYXJhTGlzdFtpXS5yZW5kZXIoZW5naW5lKTtcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0aWYgKCRndi5tX2Rpc3BsYXlfcGxheWVyICYmIGNoYXJhKSB7XHJcblx0XHRcdFx0XHRcdGNoYXJhLnJlbmRlcihlbmdpbmUpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRFZmZlY3RNYW5hZ2VyLlJlbmRlcihlbmdpbmUpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0ZGFtYWdlTnVtYmVyTGF5ZXIucmVuZGVyKGVuZ2luZSk7XHJcblxyXG5cdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGNoYXJhTGlzdC5sZW5ndGg7ICsraSkge1xyXG5cdFx0XHRcdGNoYXJhTGlzdFtpXS5fJGRyYXdOYW1lKGVuZ2luZSk7XHJcblx0XHRcdH1cclxuXHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBjaGFyYUxpc3QubGVuZ3RoOyArK2kpIHtcclxuXHRcdFx0XHRjaGFyYUxpc3RbaV0uXyRkcmF3Q2hhdEJhbGxvb24oZW5naW5lKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0aWYgKCRndi5tX2lzX3JlbmRlcmluZ19tYXApIHtcclxuXHRcdFx0XHRzY2VuZV9tYXAuYmVnaW5SZW5kZXIoZW5naW5lKTtcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRzY2VuZV9tYXAuYXBwbHlDYW1lcmEoZW5naW5lKTtcclxuXHRcdFx0XHRcdHtcclxuXHRcdFx0XHRcdFx0c2NlbmVfbWFwLnJlbmRlclBvcnRhbChlbmdpbmUpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRzY2VuZV9tYXAucmVuZGVyRnJvbnRncm91bmQoZW5naW5lKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0c2NlbmVfbWFwLmVuZFJlbmRlcihlbmdpbmUpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdHNjZW5lX21hcC5yZW5kZXJQYXJ0aWNsZShlbmdpbmUpO1xyXG5cclxuXHRcdFx0XHRzY2VuZV9tYXAuYXBwbHlDYW1lcmEoZW5naW5lKTtcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRFZmZlY3RNYW5hZ2VyLlJlbmRlcihlbmdpbmUpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlbmdpbmUubG9hZElkZW50aXR5KCk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdHtcclxuXHRcdFx0XHRzY2VuZV9tYXAuYXBwbHlDYW1lcmEoZW5naW5lKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAoJGd2Lm1fZGlzcGxheV9kZWJ1Z19pbmZvKSB7XHJcblx0XHRcdFx0XHQvKiogQHR5cGUge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gKi9cclxuXHRcdFx0XHRcdGNvbnN0IGN0eCA9IGVuZ2luZS5jdHg7XHJcblx0XHRcdFx0XHR7XHJcblx0XHRcdFx0XHRcdGN0eC5iZWdpblBhdGgoKTtcclxuXHJcblx0XHRcdFx0XHRcdGN0eC5maWxsU3R5bGUgPSBcIndoaXRlXCI7XHJcblx0XHRcdFx0XHRcdGN0eC5maWxsUmVjdCgwLCAwLCA5NiwgNTApO1xyXG5cclxuXHRcdFx0XHRcdFx0Y3R4LmZpbGxTdHlsZSA9IFwiYmxhY2tcIjtcclxuXHRcdFx0XHRcdFx0Y3R4LmZpbGxUZXh0KFwibWFwIG9yaWdpblwiLCA1LCAxNCwgOTYpO1xyXG5cclxuXHRcdFx0XHRcdFx0Y3R4LmZpbGxUZXh0KFwidmlldy14OiBcIiArICRndi5tX3ZpZXdSZWN0LngudG9GaXhlZCgwKSwgNSwgMzAsIDk2KTtcclxuXHJcblx0XHRcdFx0XHRcdGN0eC5maWxsVGV4dChcInZpZXcteTogXCIgKyAkZ3YubV92aWV3UmVjdC55LnRvRml4ZWQoMCksIDUsIDQ2LCA5Nik7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdHNjZW5lX21hcC5jb250cm9sbGVyLnJlbmRlcihlbmdpbmUpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGVuZ2luZS5sb2FkSWRlbnRpdHkoKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRpZiAoJGd2Lm1fZGlzcGxheV9kZWJ1Z19pbmZvKSB7XHJcblx0XHRcdFx0XHR0aGlzLl9yZW5kZXJfZGVidWdfaW5mbygpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0ZW5naW5lLmVuZFNjZW5lKCk7XHJcblx0fVxyXG5cdF9yZW5kZXJfbWFwX2xvYWRpbmcoKSB7XHJcblx0XHRjb25zdCBjdHggPSBlbmdpbmUuY3R4O1xyXG5cdFx0Y29uc3Qgc2NyZWVuX3dpZHRoID0gZW5naW5lLnNjcmVlbl9zaXplLng7XHJcblx0XHRjb25zdCBzY3JlZW5faGVpZ2h0ID0gZW5naW5lLnNjcmVlbl9zaXplLnk7XHJcblx0XHRjb25zdCBzY3JfaHcgPSBzY3JlZW5fd2lkdGggKiAwLjU7XHJcblx0XHRjb25zdCBzY3JfaGggPSBzY3JlZW5faGVpZ2h0ICogMC41O1xyXG5cdFx0XHJcblx0XHRjdHguZm9udCA9IFwiMmVtIOW+rui7n+ato+m7kemrlFwiO1xyXG5cdFx0Y3R4LnRleHRBbGlnbiA9IFwiY2VudGVyXCI7XHJcblx0XHRjdHgudGV4dEJhc2VsaW5lID0gXCJjZW50ZXJcIjtcclxuXHRcdFxyXG5cdFx0Y3R4LmZpbGxTdHlsZSA9IFwid2hpdGVcIjtcclxuXHRcdGN0eC5maWxsVGV4dChcImxvYWRpbmcuLi5cIiwgc2NyX2h3LCBzY3JfaGgpO1xyXG5cdFx0XHJcblx0XHRjdHguc3Ryb2tlU3R5bGUgPSBcImJsYWNrXCI7XHJcblx0XHRjdHguZmlsbFRleHQoXCJsb2FkaW5nLi4uXCIsIHNjcl9odywgc2NyX2hoKTtcclxuXHR9XHJcblxyXG5cdF9yZW5kZXJfZGVidWdfaW5mbygpIHtcclxuXHRcdGlmICghKHNjZW5lX21hcC5jb250cm9sbGVyICYmIHNjZW5lX21hcC5jb250cm9sbGVyLnBsYXllcikpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cdFx0LyoqIEB0eXBlIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9ICovXHJcblx0XHRjb25zdCBjdHggPSBlbmdpbmUuY3R4O1xyXG5cclxuXHRcdGNvbnN0IHRhID0gY3R4LnRleHRBbGlnbiwgdGIgPSBjdHgudGV4dEJhc2VsaW5lLCBsdyA9IGN0eC5saW5lV2lkdGg7XHJcblx0XHRjdHgudGV4dEJhc2VsaW5lID0gXCJ0b3BcIjtcclxuXHRcdGN0eC5saW5lV2lkdGggPSAyLjU7XHJcblx0XHRjdHguc3Ryb2tlU3R5bGUgPSBcIiMwMDBcIjtcclxuXHRcdGxldCB4ID0gNDAwLCB5ID0gNTtcclxuXHRcdGZvciAobGV0IGxpbmUgb2Ygd2luZG93Ll9TQ1JFRU5fUFJJTlRMTikge1xyXG5cdFx0XHRjb25zdCB2YWwgPSBsaW5lLmdldFZhbHVlKCk7XHJcblx0XHRcdGNvbnN0IHRleHQgPSBsaW5lLmdldFRleHQoKTtcclxuXHJcblx0XHRcdGN0eC5maWxsU3R5bGUgPSBcIiNGRkZcIjtcclxuXHRcdFx0e1xyXG5cdFx0XHRcdGN0eC50ZXh0QWxpZ24gPSBcInJpZ2h0XCI7XHJcblx0XHRcdFx0Y3R4LnN0cm9rZVRleHQodGV4dCwgeCAtIDIsIHkpO1xyXG5cdFx0XHRcdGN0eC5maWxsVGV4dCh0ZXh0LCB4IC0gMiwgeSk7XHJcblxyXG5cdFx0XHRcdGN0eC50ZXh0QWxpZ24gPSBcImNlbnRlclwiO1xyXG5cdFx0XHRcdGN0eC5zdHJva2VUZXh0KFwiOlwiLCB4LCB5KTtcclxuXHRcdFx0XHRjdHguZmlsbFRleHQoXCI6XCIsIHgsIHkpO1xyXG5cclxuXHRcdFx0XHRjdHgudGV4dEFsaWduID0gXCJsZWZ0XCI7XHJcblx0XHRcdFx0Y3R4LnN0cm9rZVRleHQodmFsLCB4ICsgMiwgeSk7XHJcblx0XHRcdFx0Y3R4LmZpbGxUZXh0KHZhbCwgeCArIDIsIHkpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoXCJfdmFsXCIgaW4gbGluZSkge1xyXG5cdFx0XHRcdGxldCBfdmFsO1xyXG5cdFx0XHRcdGlmIChsaW5lLl92YWwgIT0gdmFsKSB7XHJcblx0XHRcdFx0XHRfdmFsID0gbGluZS5fdmFsOy8vZGlzcGxheSBuZXcgdmFsdWVcclxuXHRcdFx0XHRcdGxpbmUuX192YWwgPSBsaW5lLl92YWw7XHJcblx0XHRcdFx0XHRsaW5lLl92YWwgPSB2YWw7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdFx0X3ZhbCA9IGxpbmUuX192YWw7Ly9kaXNwbGF5IG9sZCB2YWx1ZVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRpZiAoX3ZhbCAhPSB2YWwpIHtcclxuXHRcdFx0XHRcdGN0eC5maWxsU3R5bGUgPSBcIiMwRkZcIjtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGN0eC5maWxsU3R5bGUgPSBcIiNGRkZcIjtcclxuXHRcdFx0XHR7XHJcblx0XHRcdFx0XHRjdHgudGV4dEFsaWduID0gXCJyaWdodFwiO1xyXG5cdFx0XHRcdFx0Y3R4LnN0cm9rZVRleHQodGV4dCwgeCAtIDIgKyAyMDAsIHkpO1xyXG5cdFx0XHRcdFx0Y3R4LmZpbGxUZXh0KHRleHQsIHggLSAyICsgMjAwLCB5KTtcclxuXHJcblx0XHRcdFx0XHRjdHgudGV4dEFsaWduID0gXCJjZW50ZXJcIjtcclxuXHRcdFx0XHRcdGN0eC5zdHJva2VUZXh0KFwiOlwiLCB4ICsgMjAwLCB5KTtcclxuXHRcdFx0XHRcdGN0eC5maWxsVGV4dChcIjpcIiwgeCArIDIwMCwgeSk7XHJcblxyXG5cdFx0XHRcdFx0Y3R4LnRleHRBbGlnbiA9IFwibGVmdFwiO1xyXG5cdFx0XHRcdFx0Y3R4LnN0cm9rZVRleHQoX3ZhbCwgeCArIDIgKyAyMDAsIHkpO1xyXG5cdFx0XHRcdFx0Y3R4LmZpbGxUZXh0KF92YWwsIHggKyAyICsgMjAwLCB5KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0bGluZS5fX3ZhbCA9IHZhbDtcclxuXHRcdFx0XHRsaW5lLl92YWwgPSB2YWw7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHkgKz0gMTY7XHJcblx0XHR9XHJcblx0XHRjdHgudGV4dEFsaWduID0gdGE7XHJcblx0XHRjdHgudGV4dEJhc2VsaW5lID0gdGI7XHJcblx0XHRjdHgubGluZVdpZHRoID0gbHc7XHJcblx0fVxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIEBwYXJhbSB7RE9NSGlnaFJlc1RpbWVTdGFtcH0gdGltZVN0YW1wXHJcblx0ICovXHJcblx0X2xvb3AodGltZVN0YW1wKSB7XHJcblx0XHRjb25zdCBzY2VuZV9tYXAgPSB0aGlzLnNjZW5lX21hcDtcclxuXHRcdGNvbnN0IHN0YW1wID0gdGltZVN0YW1wIC0gdGhpcy50aW1lcjtcclxuXHRcdFxyXG5cdFx0dGhpcy50aW1lciA9IHRpbWVTdGFtcDtcclxuXHJcblx0XHR0aGlzLl9yZXF1ZXN0TmV4dEZyYW1lKCk7XHJcblxyXG5cdFx0dGhpcy5fY2FsY0ZQUyhzdGFtcCk7XHJcblx0XHJcblx0XHR0aGlzLl91cGRhdGVTY2VuZShzdGFtcCk7XHJcblxyXG5cdFx0dGhpcy5fcmVuZGVyU2NlbmUoKTtcclxuXHRcdFxyXG5cdFx0Zm9yIChsZXQgaSBpbiAkZ3YuaW5wdXRfa2V5RG93bikge1xyXG5cdFx0XHRpZiAoJGd2LmlucHV0X2tleURvd25baV0gPiAwKSB7XHJcblx0XHRcdFx0KyskZ3YuaW5wdXRfa2V5RG93bltpXTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0Zm9yIChsZXQgaSBpbiAkZ3YuaW5wdXRfa2V5VXApIHtcclxuXHRcdFx0JGd2LmlucHV0X2tleVVwW2ldID0gMDtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0dWlBbmltYXRpb25NYW5hZ2VyLnVwZGF0ZShzdGFtcCk7XHJcblx0fVxyXG5cdFxyXG5cdGdldCBjaGFyYSgpIHtcclxuXHRcdHJldHVybiB3aW5kb3cuY2hhcmE7XHJcblx0fVxyXG5cdC8vc2V0IGNoYXJhKHZhbHVlKSB7XHJcblx0Ly9cdHdpbmRvdy5jaGFyYSA9IHZhbHVlO1xyXG5cdC8vfVxyXG5cclxuXHRnZXQgY2hhcmFMaXN0KCkge1xyXG5cdFx0cmV0dXJuIGdBcHAuc3RvcmUuc3RhdGUuY2hhcmFMaXN0O1xyXG5cdH1cclxuXHRcclxuXHRnZXQgbV9pc19ydW4oKSB7XHJcblx0XHRyZXR1cm4gd2luZG93Lm1faXNfcnVuO1xyXG5cdH1cclxuXHRzZXQgbV9pc19ydW4odmFsdWUpIHtcclxuXHRcdHdpbmRvdy5tX2lzX3J1biA9IHZhbHVlO1xyXG5cdH1cclxufVxyXG5cclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cclxuLy9cclxuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuZnVuY3Rpb24gX3BhcnNlVXJsUGFyYW1ldGVyKCkge1xyXG5cdGxldCBzUGFnZVVSTCA9IGRlY29kZVVSSUNvbXBvbmVudCh3aW5kb3cubG9jYXRpb24uc2VhcmNoLnN1YnN0cmluZygxKSk7XHJcblx0bGV0IHNVUkxWYXJpYWJsZXMgPSBzUGFnZVVSTC5zcGxpdChcIiZcIik7XHJcblx0bGV0IHBhcmFtcyA9IHt9O1xyXG5cclxuXHRmb3IgKGxldCBpID0gMDsgaSA8IHNVUkxWYXJpYWJsZXMubGVuZ3RoOyArK2kpIHtcclxuXHRcdGxldCBzUGFyYW1ldGVyID0gc1VSTFZhcmlhYmxlc1tpXS5zcGxpdChcIj1cIik7XHJcblxyXG5cdFx0cGFyYW1zW3NQYXJhbWV0ZXJbMF1dID0gc1BhcmFtZXRlclsxXTtcclxuXHR9XHJcblxyXG5cdHJldHVybiBwYXJhbXM7XHJcbn07XHJcblxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQW9CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDM1lBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7Ozs7Ozs7Ozs7Ozs7QUNuR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7OztBQ2hKQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///483\n')}}]);