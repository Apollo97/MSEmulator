(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{334:function(t,r,e){"use strict";e.r(r),e.d(r,"AnimationBase",function(){return a}),e.d(r,"Animation",function(){return h});e(332),e(333);var i=e(351);window.m_draw_animation_texture_info=!1;class s{constructor(t,r){this._raw=t,this._url=r,this.frame=0,this.time=0,this.delta=0,this.textures=[],this.is_loop=!0,this.is_end=!1,this._url}getTotalTime(){return this.textures.reduce((t,r)=>t+r.delay,0)}clone(){let t=new this.constructor(this._raw,this._url);return t.textures=this.textures,t}load(){throw new Error("Not implement")}update(t){throw new Error("Not implement")}_resetFrame(){this.frame=0,this.time=0}reset(){this.frame=0,this.time=0,this.is_end=!1}get texture(){throw new Error("Not implement")}destroy(){this.is_loop=!1,this.is_end=!0}}class a extends s{constructor(t,r){super(t,r)}async load(){for(let t=0;t in this._raw;++t){let r=this._url+"/"+t,e=new i.a(this._raw[t]);e._url=r,this.textures[t]=e}this.textures[0]&&(this.textures[0].isLoaded()||this.textures[0].__loadTexture())}isEnd(){return this.is_end}_update(t){const r=this.textures.length;r>0&&(this.time=this.time+t,this.time>this.texture.delay&&(this.frame=++this.frame%r,this.time=0)),this.delta+=t}update(t){const r=this.textures.length;if(r>0&&(this.time=this.time+t,this.time>this.texture.delay)){if(this.frame=this.frame+1,this.frame>=r){if(!this.is_loop)return this.frame=r-1,void(this.is_end=!0);this.reset()}this.time=0}this.delta+=t}draw(t,r,e,i,s){let a=this.texture;t.drawRotaGraph(a,r,e,i,s)}get texture(){return this.textures[this.frame]}}class h extends a{constructor(t,r){super(t,r),this.draw=this._draw_and_preload}_draw_and_preload(t,r,e,i,s){let a;for(a=this.frame;a>=0;--a){let h=this.textures[a];if(h.isLoaded()){t.drawRotaGraph(h,r,e,i,s);break}}let h=this.textures[++a];h?h.isLoaded()||h.__loadTexture():delete this.draw}}},351:function(t,r,e){"use strict";e.d(r,"b",function(){return a}),e.d(r,"a",function(){return h});var i=e(332),s=(e(333),e(335));class a extends s.Graph{constructor(t,r){t?(super(r,{width:t.__w,height:t.__h}),this._raw=t,r?this._url=r:!1!==a.isTexture(t)&&(this._url=t[""])):super()}static isTexture(t){if(t)if(t.hasOwnProperty("")){if("string"==typeof t[""])return!0}else if(!t.__isEmpty)throw console.group("no texture"),console.warn(t),console.groupEnd(),new Error("no texture");return!1}static isTextureHasData(t){return t&&"string"==typeof t[""]&&t[""].startsWith("data:image/")}set z(t){this._order=t}get z(){return this._order}_get(t,r,e){if(this._raw){if(r in this._raw)return e(this._raw[r])}else;return t}draw(){this._engine.drawGraph(this)}draw2(t,r){this._engine.drawGraph2(this,t-this.x,r-this.y)}draw2i(t,r){this._engine.drawGraph2(this,Math.trunc(t-this.x+.5),Math.trunc(r-this.y+.5))}}class h extends a{constructor(t,r){super(t,r);var e=this._get(new i.Vec2(0,0),"origin",i.Vec2.get);this.x=e.x,this.y=e.y,this.z=this._get(0,"z",Number),this.delay=this._get(100,"delay",Number)}drawPattern(t,r,e,i){if(!this.isLoaded())return;const s=this._engine.ctx;s.save();try{s.rect(t,r,e,i),s.clip();let a=t,h=t+e,n=r+i;for(let t=r;t<n;t+=this.height)for(let r=a;r<h;r+=this.width)this.draw2(r,t)}catch(t){console.error(t)}s.restore()}drawHorizontalPattern(t,r,e){if(!this.isLoaded())return;const i=this._engine.ctx;i.save();try{const i=t+e;for(let e=t;e<i;e+=this.width)this.draw2(e,r)}catch(t){console.error(t)}i.restore()}drawVerticalPattern(t,r,e){if(!this.isLoaded())return;const i=this._engine.ctx;i.save();try{const i=r+e;for(let e=r;e<i;e+=this.height)this.draw2(t,e)}catch(t){console.error(t)}i.restore()}_drawPattern(t,r,e,i){if(!this.isLoaded())return;this._engine.ctx;const s=t,a=t+e,h=r+i;for(let t=r;t<h;t+=this.height)for(let r=s;r<a;r+=this.width)this.draw2(r,t)}_drawHorizontalPattern(t,r,e){if(!this.isLoaded())return;this._engine.ctx;const i=t+e;for(let e=t;e<i;e+=this.width)this.draw2(e,r)}_drawVerticalPattern(t,r,e){if(!this.isLoaded())return;this._engine.ctx;const i=r+e;for(let e=r;e<i;e+=this.height)this.draw2(t,e)}drawPattern4i(t,r,e,i){this.drawPattern(Math.trunc(t+.5),Math.trunc(r+.5),Math.trunc(e+.5),Math.trunc(i+.5))}drawHorizontalPattern3i(t,r,e){this.drawHorizontalPattern(Math.trunc(t+.5),Math.trunc(r+.5),Math.trunc(e+.5))}drawVerticalPattern3i(t,r,e){this.drawVerticalPattern(Math.trunc(t+.5),Math.trunc(r+.5),Math.trunc(e+.5))}_drawPattern4i(t,r,e,i){this._drawPattern(Math.trunc(t+.5),Math.trunc(r+.5),Math.trunc(e+.5),Math.trunc(i+.5))}_drawHorizontalPattern3i(t,r,e){this._drawHorizontalPattern(Math.trunc(t+.5),Math.trunc(r+.5),Math.trunc(e+.5))}_drawVerticalPattern3i(t,r,e){this._drawVerticalPattern(Math.trunc(t+.5),Math.trunc(r+.5),Math.trunc(e+.5))}}}}]);
//# sourceMappingURL=16.js.map