(window["webpackJsonp"] = window["webpackJsonp"] || []).push([[0],{

/***/ "./src/game/IRenderer.js":
/*!*******************************!*\
  !*** ./src/game/IRenderer.js ***!
  \*******************************/
/*! exports provided: ColorRGB, ColorHSV, _ImageFilter, ImageFilter, IGraph, IRenderer, ImageDataHelper */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ColorRGB\", function() { return ColorRGB; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ColorHSV\", function() { return ColorHSV; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"_ImageFilter\", function() { return _ImageFilter; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ImageFilter\", function() { return ImageFilter; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"IGraph\", function() { return IGraph; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"IRenderer\", function() { return IRenderer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"ImageDataHelper\", function() { return ImageDataHelper; });\n/* harmony import */ var _math_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./math.js */ \"./src/game/math.js\");\nï»¿\r\n\r\n\r\nfunction colorInt24Parse2(col) {\r\n\treturn \"#\" + [((col >> 16) & 0xFF), ((col >> 8) & 0xFF), (col & 0xFF)].map(a=>a.toString(16).padStart(2, \"0\")).join(\"\");\r\n}\r\nfunction colorInt24Parse(col) {\r\n\treturn \"#\" + [((col >> 16) & 0xFF), ((col >> 8) & 0xFF), (col & 0xFF)].map(a=>a.toString(16).padStart(2, \"0\")).join(\"\");\r\n}\r\n\r\n\r\n/**\r\n * @interface\r\n */\r\nclass IColor {\r\n\ttoFilter() {\r\n\t}\r\n\ttoFilterLimit() {\r\n\t}\r\n}\r\n\r\n/**\r\n * @implements {IColor}\r\n */\r\nclass ColorRGB {\r\n\tconstructor(r = 0, g = 0, b = 0) {\r\n\t\t/** @type {number} - int value: 0 ~ 255 */\r\n\t\tthis.r = r;\r\n\r\n\t\t/** @type {number} - int value: 0 ~ 255 */\r\n\t\tthis.g = g;\r\n\r\n\t\t/** @type {number} - int value: 0 ~ 255 */\r\n\t\tthis.b = b;\r\n\t}\r\n\tclone() {\r\n\t\treturn new this.constructor(this.r, this.g, this.b);\r\n\t}\r\n\tselfAdd(rgb) {\r\n\t\tthis.r += rgb.r;\r\n\t\tthis.g += rgb.g;\r\n\t\tthis.b += rgb.b;\r\n\t\treturn this;\r\n\t}\r\n\tselfSub(rgb) {\r\n\t\tthis.r += rgb.r;\r\n\t\tthis.g += rgb.g;\r\n\t\tthis.b += rgb.b;\r\n\t\treturn this;\r\n\t}\r\n\tselfScale(s) {\r\n\t\tthis.r *= s;\r\n\t\tthis.g *= s;\r\n\t\tthis.b *= s;\r\n\t\treturn this;\r\n\t}\r\n\tstatic add(rgb, rgb2) {\r\n\t\treturn new ColorRGB(rgb.r + rgb2.r, rgb.g + rgb2.g, rgb.b + rgb2.b);\r\n\t}\r\n\tstatic sub(rgb, rgb2) {\r\n\t\treturn new ColorRGB(rgb.r - rgb2.r, rgb.g - rgb2.g, rgb.b - rgb2.b);\r\n\t}\r\n\tstatic scale(rgb, s) {\r\n\t\treturn new ColorRGB(rgb.r * s, rgb.g * s, rgb.b * s);\r\n\t}\r\n\ttoString() {\r\n\t\tconst r = Math.trunc(this.r);\r\n\t\tconst g = Math.trunc(this.g);\r\n\t\tconst b = Math.trunc(this.b);\r\n\t\treturn \"rgb(\" + r + \",\" + g + \",\" + b + \")\";\r\n\t}\r\n\tstatic fromInt24(col) {\r\n\t\treturn new ColorRGB((col >> 16) & 0xFF, (col >> 8) & 0xFF, col & 0xFF);\r\n\t}\r\n\t/**\r\n\t * source: https://gist.github.com/mjackson/5311256#file-color-conversion-algorithms-js-L84\r\n\t * Converts an RGB color value to HSV. Conversion formula\r\n\t * adapted from http://en.wikipedia.org/wiki/HSV_color_space.\r\n\t * Assumes r, g, and b are contained in the set [0, 255] and\r\n\t * returns h, s, and v in the set [0, 1].\r\n\t *\r\n\t * @returns {ColorHSV}\r\n\t */\r\n\ttoHSV() {\r\n\t\tlet r = this.r /= 255, g = this.g /= 255, b = this.b /= 255;\r\n\r\n\t\tlet max = Math.max(r, g, b), min = Math.min(r, g, b);\r\n\t\tlet h, s, v = max;\r\n\r\n\t\tlet d = max - min;\r\n\t\ts = max == 0 ? 0 : d / max;\r\n\r\n\t\tif (max == min) {\r\n\t\t\th = 0; // achromatic\r\n\t\t} else {\r\n\t\t\tswitch (max) {\r\n\t\t\t\tcase r: h = (g - b) / d + (g < b ? 6 : 0); break;\r\n\t\t\t\tcase g: h = (b - r) / d + 2; break;\r\n\t\t\t\tcase b: h = (r - g) / d + 4; break;\r\n\t\t\t}\r\n\r\n\t\t\th /= 6;\r\n\t\t}\r\n\r\n\t\treturn new ColorHSV(h, s, v);\r\n\t}\r\n\t/**\r\n\t * source: https://gist.github.com/mjackson/5311256#file-color-conversion-algorithms-js-L119\r\n\t * Converts an HSV color value to RGB. Conversion formula\r\n\t * adapted from http://en.wikipedia.org/wiki/HSV_color_space.\r\n\t * Assumes h, s, and v are contained in the set [0, 1] and\r\n\t * returns r, g, and b in the set [0, 255].\r\n\t *\r\n\t * @param {number} h The hue\r\n\t * @param {number} s The saturation\r\n\t * @param {number} v The value\r\n\t */\r\n\tfromHsv(h, s, v) {\r\n\t\tlet r, g, b;\r\n\r\n\t\tlet i = Math.floor(h * 6);\r\n\t\tlet f = h * 6 - i;\r\n\t\tlet p = v * (1 - s);\r\n\t\tlet q = v * (1 - f * s);\r\n\t\tlet t = v * (1 - (1 - f) * s);\r\n\r\n\t\tswitch (i % 6) {\r\n\t\t\tcase 0: r = v, g = t, b = p; break;\r\n\t\t\tcase 1: r = q, g = v, b = p; break;\r\n\t\t\tcase 2: r = p, g = v, b = t; break;\r\n\t\t\tcase 3: r = p, g = q, b = v; break;\r\n\t\t\tcase 4: r = t, g = p, b = v; break;\r\n\t\t\tcase 5: r = v, g = p, b = q; break;\r\n\t\t}\r\n\r\n\t\tthis.r = r * 255;\r\n\t\tthis.g = g * 255;\r\n\t\tthis.b = b * 255;\r\n\t}\r\n\tstatic fromHsv(h, s, v) {\r\n\t\tlet r, g, b;\r\n\r\n\t\tlet i = Math.floor(h * 6);\r\n\t\tlet f = h * 6 - i;\r\n\t\tlet p = v * (1 - s);\r\n\t\tlet q = v * (1 - f * s);\r\n\t\tlet t = v * (1 - (1 - f) * s);\r\n\r\n\t\tswitch (i % 6) {\r\n\t\t\tcase 0: r = v, g = t, b = p; break;\r\n\t\t\tcase 1: r = q, g = v, b = p; break;\r\n\t\t\tcase 2: r = p, g = v, b = t; break;\r\n\t\t\tcase 3: r = p, g = q, b = v; break;\r\n\t\t\tcase 4: r = t, g = p, b = v; break;\r\n\t\t\tcase 5: r = v, g = p, b = q; break;\r\n\t\t}\r\n\r\n\t\treturn new ColorRGB(r * 255, g * 255, b * 255);\r\n\t}\r\n\ttoFilter() {\r\n\t\tlet { h, s, v } = this.toHSV();\r\n\t\treturn `hue-rotate(${h*Math.PI*2}rad) saturate(${s}) brightness(${v})`;\r\n\t}\r\n\ttoFilterLimit() {\r\n\t\treturn `hue-rotate(${h * 360}deg) saturate(${Object(_math_js__WEBPACK_IMPORTED_MODULE_0__[\"clamp\"])(Math.trunc(s * 100), 0, 100)}%) brightness(${Object(_math_js__WEBPACK_IMPORTED_MODULE_0__[\"clamp\"])(Math.trunc(v * 100), 0, 100)}%)`;\r\n\t}\r\n\ttoFilter_HueRotate() {\r\n\t\tconst { h, s, v } = this;\r\n\t\t//return `hue-rotate(${h*Math.PI*2}rad)`;\r\n\t\treturn `hue-rotate(${h * 360}deg)`;\r\n\t}\r\n}\r\n\r\n/**\r\n * @implements {IColor}\r\n */\r\nclass ColorHSV {\r\n\tconstructor(h = 0, s = 0, v = 0) {\r\n\t\t/** @type {number} - float value: 0 ~ 1 */\r\n\t\tthis.h = h;\r\n\r\n\t\t/** @type {number} - float value: 0 ~ 1 */\r\n\t\tthis.s = s;\r\n\r\n\t\t/** @type {number} - float value: 0 ~ 1 */\r\n\t\tthis.v = v;\r\n\t}\r\n\tclone() {\r\n\t\treturn new this.constructor(this.h, this.s, this.v);\r\n\t}\r\n\tselfAdd(hsv) {\r\n\t\tthis.h += hsv.h;\r\n\t\tthis.s += hsv.s;\r\n\t\tthis.v += hsv.v;\r\n\t\treturn this;\r\n\t}\r\n\tselfSub(hsv) {\r\n\t\tthis.h += hsv.h;\r\n\t\tthis.s += hsv.s;\r\n\t\tthis.v += hsv.v;\r\n\t\treturn this;\r\n\t}\r\n\tselfScale(s) {\r\n\t\tthis.h *= s;\r\n\t\tthis.s *= s;\r\n\t\tthis.v *= s;\r\n\t\treturn this;\r\n\t}\r\n\tstatic add(hsv, hsv2) {\r\n\t\treturn new ColorHSV(hsv.s + hsv2.s, hsv.s + hsv2.s, hsv.v + hsv2.v);\r\n\t}\r\n\tstatic sub(hsv, hsv2) {\r\n\t\treturn new ColorHSV(hsv.s - hsv2.s, hsv.s - hsv2.s, hsv.v - hsv2.v);\r\n\t}\r\n\tstatic scale(hsv, s) {\r\n\t\treturn new ColorHSV(hsv.h * s, hsv.s * s, hsv.v * s);\r\n\t}\r\n\ttoString() {\r\n\t\tconst { h, s, v } = this;\r\n\t\treturn \"hsv(\" + h + \",\" + s + \",\" + v + \")\";\r\n\t}\r\n\r\n\t//toRgb() {\r\n\t//}\r\n\t//fromRgb(r, g, b) {\r\n\t//}\r\n\r\n\t//static fromRgb(r, g, b) {\r\n\t//}\r\n\r\n\ttoFilter() {\r\n\t\tconst { h, s, v } = this;\r\n\t\treturn `hue-rotate(${h*Math.PI*2}rad) saturate(${s}) brightness(${v})`;\r\n\t}\r\n\ttoFilterLimit() {\r\n\t\treturn `hue-rotate(${h * 360}deg) saturate(${Object(_math_js__WEBPACK_IMPORTED_MODULE_0__[\"clamp\"])(Math.trunc(s * 100), 0, 100)}%) brightness(${Object(_math_js__WEBPACK_IMPORTED_MODULE_0__[\"clamp\"])(Math.trunc(v * 100), 0, 100)}%)`;\r\n\t}\r\n\ttoFilter_HueRotate() {\r\n\t\tconst { h, s, v } = this;\r\n\t\t//return `hue-rotate(${h*Math.PI*2}rad)`;\r\n\t\treturn `hue-rotate(${h * 360}deg)`;\r\n\t}\r\n}\r\n\r\nclass _ImageFilter {\r\n\t/**\r\n\t * @param {number} hue 0 ~ 360\r\n\t * @param {number} sat 0 ~ 100\r\n\t * @param {number} bri 0 ~ 100\r\n\t * @param {number} contrast 0 ~ 100\r\n\t */\r\n\tconstructor(hue = 0, sat = 100, bri = 100, contrast = 100) {\r\n\t\tthis._hue = hue;\r\n\t\tthis._sat = sat;\r\n\t\tthis._bri = bri;\r\n\t\tthis._contrast = contrast;\r\n\t}\r\n\t/** @returns {number} */\r\n\tget hue() {\r\n\t\treturn this._hue;\r\n\t}\r\n\tset hue(value) {\r\n\t\tthis._hue = value % 360;\r\n\t\tif ((this._hue % 360 == 0) && this._sat == 100 && this._bri == 100 && this._contrast == 100) {\r\n\t\t\tthis.reset();\r\n\t\t}\r\n\t}\r\n\t/** @returns {number} */\r\n\tget sat() {\r\n\t\treturn this._sat;\r\n\t}\r\n\tset sat(value) {\r\n\t\tthis._sat = Math.max(0, value);\r\n\t\tif ((this._hue % 360 == 0) && this._sat == 100 && this._bri == 100 && this._contrast == 100) {\r\n\t\t\tthis.reset();\r\n\t\t}\r\n\t}\r\n\t/** @returns {number} */\r\n\tget bri() {\r\n\t\treturn this._bri;\r\n\t}\r\n\tset bri(value) {\r\n\t\tthis._bri = Math.max(0, value);\r\n\t\tif ((this._hue % 360 == 0) && this._sat == 100 && this._bri == 100 && this._contrast == 100) {\r\n\t\t\tthis.reset();\r\n\t\t}\r\n\t}\r\n\r\n\t/** @returns {number} */\r\n\tget contrast() {\r\n\t\treturn this._contrast;\r\n\t}\r\n\tset contrast(value) {\r\n\t\tthis._contrast = Math.max(0, value);\r\n\t\tif ((this._hue % 360 == 0) && this._sat == 100 && this._bri == 100 && this._contrast == 100) {\r\n\t\t\tthis.reset();\r\n\t\t}\r\n\t}\r\n\r\n\ttoRgb() {\r\n\t\treturn ColorRGB.fromHsv(this._hue / 360, this._sat / 100, this._bri / 100);\r\n\t}\r\n\r\n\ttoString() {\r\n\t\treturn `hue-rotate(${this._hue}deg) saturate(${this._sat}%) brightness(${this._bri}%) contrast(${this._contrast}%)`;// + ImageFilter.globalFilter\r\n\t}\r\n}\r\n\r\n/**\r\n * default no filter\r\n */\r\nclass ImageFilter extends _ImageFilter {\r\n\t/**\r\n\t * @param {number} hue 0 ~ 360\r\n\t * @param {number} sat 0 ~ 100\r\n\t * @param {number} bri 0 ~ 100\r\n\t * @param {number} contrast 0 ~ 100\r\n\t */\r\n\tconstructor(hue = 0, sat = 100, bri = 100, contrast = 100) {\r\n\t\tsuper(hue, sat, bri, contrast);\r\n\t\tif (arguments.length) {\r\n\t\t\tthis.__proto__ = _ImageFilter.prototype;\r\n\t\t}\r\n\t}\r\n\t/** @returns {number} */\r\n\tget hue() {\r\n\t\treturn 0;\r\n\t}\r\n\tset hue(value) {\r\n\t\tthis._hue = value % 360;\r\n\t\tthis.__proto__ = _ImageFilter.prototype;\r\n\t}\r\n\t/** @returns {number} */\r\n\tget sat() {\r\n\t\treturn 100;\r\n\t}\r\n\tset sat(value) {\r\n\t\tthis._sat = Math.max(0, value);\r\n\t\tthis.__proto__ = _ImageFilter.prototype;\r\n\t}\r\n\t/** @returns {number} */\r\n\tget bri() {\r\n\t\treturn 100;\r\n\t}\r\n\tset bri(value) {\r\n\t\tthis._bri = Math.max(0, value);\r\n\t\tthis.__proto__ = _ImageFilter.prototype;\r\n\t}\r\n\r\n\t/** @returns {number} */\r\n\tget contrast() {\r\n\t\treturn 100;\r\n\t}\r\n\tset contrast(value) {\r\n\t\tthis._contrast = Math.max(0, value);\r\n\t\tthis.__proto__ = _ImageFilter.prototype;\r\n\t}\r\n\r\n\ttoRgb() {\r\n\t\treturn new ColorRGB(255, 255, 255);\r\n\t}\r\n\r\n\ttoString() {\r\n\t\treturn \"none\";//ImageFilter.globalFilter ? ImageFilter.globalFilter : \"none\";\r\n\t}\r\n\r\n\tget isEmpty() {\r\n\t\treturn true;\r\n\t}\r\n}\r\n\r\n_ImageFilter.prototype.reset = function () {\r\n\tthis._hue = 0;\r\n\tthis._sat = 100;\r\n\tthis._bri = 100;\r\n\tthis._contrast = 100;\r\n\tthis.__proto__ = ImageFilter.prototype;\r\n}\r\n\r\n/**\r\n * @param {number} hue 0 ~ 360\r\n * @param {number} sat 0 ~ 100\r\n * @param {number} bri 0 ~ 100\r\n * @param {number} contrast 0 ~ 100\r\n */\r\n_ImageFilter.prototype.set = function (hue, sat, bri, contrast) {\r\n\tif ((hue % 360 == 0) && sat == 100 && bri == 100 && contrast == 100) {\r\n\t\tthis.reset();\r\n\t}\r\n\telse {\r\n\t\tthis.hue = hue;\r\n\t\tthis.sat = sat;\r\n\t\tthis.bri = bri;\r\n\t\tthis._contrast = contrast;\r\n\t}\r\n}\r\n\r\n/**\r\n * @abstract\r\n */\r\nclass IGraph {\r\n\tconstructor(url, info) {\r\n\t\t/** @type {number} */\r\n\t\tlet width;\r\n\t\t/** @type {number} */\r\n\t\tlet height;\r\n\t\t\r\n\t\t/** @type {Promise} if loaded will delete */\r\n\t\tthis.$promise = undefined;\r\n\t\t\r\n\t\t/** @type {WebGLBuffer} */\r\n\t\tthis._vbo = undefined;\r\n\r\n\t\t/** @type {number} - origin.x */\r\n\t\tthis.x = 0;\r\n\t\t/** @type {number} - origin.y */\r\n\t\tthis.y = 0;\r\n\r\n\t\tif (info) {\r\n\t\t\tif (info.width > 0) {\r\n\t\t\t\twidth = Number(info.width);\r\n\t\t\t}\r\n\t\t\tif (info.height > 0) {\r\n\t\t\t\theight = Number(info.height);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\twidth = 0;\r\n\t\t\theight = 0;\r\n\t\t}\r\n\t\t/** @type {number} */\r\n\t\tthis.width = width;\r\n\t\t/** @type {number} */\r\n\t\tthis.height = height;\r\n\t\t//\r\n\t\tObject.defineProperty(this, \"width\", {\r\n\t\t\tconfigurable: true,\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function () {\r\n\t\t\t\tthis._isLoaded_or_doload();\r\n\t\t\t\treturn width;\r\n\t\t\t},\r\n\t\t\tset: function (value) {\r\n\t\t\t\tdebugger;//not override\r\n\t\t\t}\r\n\t\t});\r\n\t\tObject.defineProperty(this, \"height\", {\r\n\t\t\tconfigurable: true,\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function () {\r\n\t\t\t\tthis._isLoaded_or_doload();\r\n\t\t\t\treturn height;\r\n\t\t\t},\r\n\t\t\tset: function (value) {\r\n\t\t\t\tdebugger;//not override\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\t/** @type {WebGLTexture} */\r\n\t\t/** this.texture = null; */\r\n\t\tObject.defineProperty(this, \"texture\", {\r\n\t\t\tconfigurable: true,\r\n\t\t\tenumerable: true,\r\n\t\t\tget: function () {\r\n\t\t\t\tthis.__isLoading_or_doload();\r\n\t\t\t\treturn null;\r\n\t\t\t},\r\n\t\t\tset: function (value) {\r\n\t\t\t\tdebugger;//not override\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tthis.isLoaded = this._isLoaded_or_doload;\r\n\r\n\t\t/** @type {function():void} */\r\n\t\t//this._onload = null;\r\n\r\n\t\t/** @type {string} */\r\n\t\tthis._url = \"\";\r\n\t\tif (url) {\r\n\t\t\tthis.src = url;\r\n\t\t}\r\n\t}\r\n\t_dispose() {\r\n\t\t//only check is loaded\r\n\t\tif (this._isLoaded()) {\r\n\t\t\t//this._engine.deleteGraph(this);\r\n\r\n\t\t\tif (this._gl) {\r\n\t\t\t\talert(\"gl.deleteTexture(this.texture)\");\r\n\t\t\t\tthis._gl.deleteTexture(this.texture);\r\n\t\t\t}\r\n\t\t\tthis.texture = null;\r\n\t\t}\r\n\t}\r\n\r\n\tdraw() {\r\n\t\tthrow new Error(\"Not Implement\");\r\n\t}\r\n\r\n\t/**\r\n\t * @param {number} x\r\n\t * @param {number} y\r\n\t */\r\n\tdraw2(x, y) {\r\n\t\tthrow new Error(\"Not Implement\");\r\n\t}\r\n\r\n\t/**\r\n\t * @returns {IRenderer}\r\n\t */\r\n\tget _engine() {\r\n\t\tthrow new Error(\"Not Implement\");\r\n\t}\r\n\t/**\r\n\t * @returns {WebGLRenderingContext}\r\n\t */\r\n\tget _gl() {\r\n\t\tthrow new Error(\"Not Implement\");\r\n\t}\r\n\t/**\r\n\t * @returns {CanvasRenderingContext2D}\r\n\t */\r\n\tget _ctx() {\r\n\t\tthrow new Error(\"Not Implement\");\r\n\t}\r\n\r\n\t//get width() { return this.matrix[0]; }\r\n\t//set width(val) { this.matrix[0] = val; }\r\n\r\n\t//get height() { return this.matrix[5]; }\r\n\t//set height(val) { this.matrix[5] = val; }\r\n\r\n\t//get x() { return this.matrix[12]; }\r\n\t//set x(val) { this.matrix[12] = val; }\r\n\r\n\t//get y() { return this.matrix[13]; }\r\n\t//set y(val) { this.matrix[13] = val; }\r\n\r\n\t/** ?? */\r\n\tget z() { return 0; }\r\n\t//get z() { return this.matrix[14]; }\r\n\t//set z(val) { this.matrix[14] = val; }\r\n\r\n\t/** ?? */\r\n\tset src(url) {\r\n\t\tdebugger;//this.src is broken;\r\n\t\t\r\n\t\tthis._dispose();\r\n\t\tthis._url = url;\r\n\t}\r\n\r\n\t_isLoaded() {\r\n\t\treturn this.texture != null;\r\n\t}\r\n\t_isLoaded_or_doload() {\r\n\t\tif (!this.texture) {\r\n\t\t\tthis.__loadTexture();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\t__isLoading_or_doload() {\r\n\t\tif (this.$promise === null) {\r\n\t\t\tthis.__loadTexture();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\r\n\t__loadTexture() {\r\n\t\tif (this.$promise) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (this._url == \"\") {\r\n\t\t\tdebugger;\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tlet image = new Image();\r\n\r\n\t\tthis.$promise = new Promise((resolve, reject) => {\r\n\t\t\tconst engine = this._engine;\r\n\r\n\t\t\timage.addEventListener(\"load\", e => {\r\n\t\t\t\tif (!e.target.naturalWidth || !e.target.naturalHeight) {\r\n\t\t\t\t\tdebugger;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.isLoaded = this._isLoaded;//end\r\n\r\n\t\t\t\tdelete this.width;\r\n\t\t\t\tthis.width = e.target.naturalWidth;\r\n\r\n\t\t\t\tdelete this.height;\r\n\t\t\t\tthis.height = e.target.naturalHeight;\r\n\r\n\t\t\t\tdelete this.texture;\r\n\t\t\t\tthis.texture = engine._handleImageLoaded(e.target, this);\r\n\t\t\t\t\t\r\n\t\t\t\tdelete this.$promise;\r\n\r\n\t\t\t\tresolve(this);\r\n\t\t\t}, false);\r\n\r\n\t\t\timage.addEventListener(\"error\", e => {\r\n\t\t\t\tthis.isLoaded = this._isLoaded;//no try again\r\n\r\n\t\t\t\tif (this._graph_rect) {\r\n\t\t\t\t\tdelete this.texture;\r\n\t\t\t\t\tthis.texture = this._graph_rect;\r\n\t\t\t\t}\r\n\t\t\t\tconsole.error(\"404: \" + image.src);\r\n\r\n\t\t\t\tresolve(this);\r\n\t\t\t}, false);\r\n\t\t});\r\n\r\n\t\tIGraph.$all_promise.push(this.$promise);\r\n\r\n\t\timage.src = $get.imageUrl(this._url);\r\n\t}\r\n\r\n\tstatic async waitAllLoaded(cbfunc) {\r\n\t\tlet tasks = IGraph.$all_promise;\r\n\t\tconsole.log(\"image loaded: \" + IGraph.$all_promise.length);\r\n\t\tIGraph.$all_promise = [];\r\n\t\tawait Promise.all(tasks);\r\n\t\tif (cbfunc) {\r\n\t\t\tcbfunc();\r\n\t\t}\r\n\t}\r\n}\r\nIGraph.$all_promise = [];\r\n\r\nclass IRenderer {\r\n\tconstructor() {\r\n\t\t/** @type {IGraph} */\r\n\t\tthis._GraphType = null;\r\n\r\n\t\t/**\r\n\t\t * @type {CanvasRenderingContext2D}\r\n\t\t */\r\n\t\tthis.ctx = null;\r\n\t\t\r\n\t\tthis._globalAlpha = 1;\r\n\t\tthis._globalAlphaStack = [];\r\n\t\t\r\n\t\t/** @type {Vec2} */\r\n\t\tthis.screen_size = new _math_js__WEBPACK_IMPORTED_MODULE_0__[\"Vec2\"](0, 0);\r\n\t}\r\n\r\n\t/**\r\n\t * @param {string} id\r\n\t */\r\n\tinit(id) {\r\n\t\tthrow new Error(\"Not implement\");\r\n\t}\r\n\r\n\t/** @type {IGraph} */\r\n\tget Graph() {\r\n\t\tthrow new Error(\"Not implement\");\r\n\t\treturn new IGraph();\r\n\t}\r\n\r\n\t/**\r\n\t * swap Canvas and Canvas2\r\n\t * if (imageSmoothingEnabled) this._ctx2.imageSmoothingEnabled = true;\r\n\t * @param {boolean} imageSmoothingEnabled\r\n\t */\r\n\t$swapCanvas(imageSmoothingEnabled) {\r\n\t\tthrow new Error(\"Not implement\");\r\n\t}\r\n\r\n\t/** @type {HTMLCanvasElement} */\r\n\tget _canvas() {\r\n\t\tthrow new Error(\"Not implement\");\r\n\t}\r\n\r\n\t/**\r\n\t * @param {HTMLImageElement} image\r\n\t * @param {IGraph} graph\r\n\t * @param {Object} texture\r\n\t */\r\n\t_handleImageLoaded(image, graph) {\r\n\t\tthrow new Error(\"Not implement\");\r\n\t\treturn null;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {number} r\r\n\t * @param {number} dx\r\n\t * @param {number} dy\r\n\t * @param {number} sx\r\n\t * @param {number} sy\r\n\t */\r\n\tsetRotationTranslationScale(r, dx, dy, sx, sy) {\r\n\t\tthrow new Error(\"Not implement\");\r\n\t}\r\n\t\r\n\t/**\r\n\t * @param {number} m11\r\n\t * @param {number} m12\r\n\t * @param {number} m21\r\n\t * @param {number} m22\r\n\t * @param {number} dx\r\n\t * @param {number} dy\r\n\t */\r\n\tsetTransform(m11, m12, m21, m22, dx, dy) {\r\n\t\tthrow new Error(\"Not implement\");\r\n\t}\r\n\r\n\tloadIdentity() {\r\n\t\tthrow new Error(\"Not implement\");\r\n\t}\r\n\tpushMatrix() {\r\n\t\tthrow new Error(\"Not implement\");\r\n\t}\r\n\tpopMatrix() {\r\n\t\tthrow new Error(\"Not implement\");\r\n\t}\r\n\t/**\r\n\t * @param {number} x\r\n\t * @param {number} y\r\n\t */\r\n\ttranslate(x, y) {\r\n\t\tthrow new Error(\"Not implement\");\r\n\t}\r\n\t/**\r\n\t * @param {number} x\r\n\t * @param {number} y\r\n\t * @param {number} z\r\n\t */\r\n\ttranslate3d(x, y, z) {\r\n\t\talert(\"'translate3d' is deprecated\");\r\n\t\tthrow new Error(\"'translate3d' is deprecated\");\r\n\t}\r\n\t/**\r\n\t * @param {number} x\r\n\t * @param {number} y\r\n\t */\r\n\tscale(x, y) {\r\n\t\tthrow new Error(\"Not implement\");\r\n\t}\r\n\t/**\r\n\t * @param {number} x\r\n\t * @param {number} y\r\n\t * @param {number} z\r\n\t */\r\n\tscale3d(x, y, z) {\r\n\t\talert(\"'scale3d' is deprecated\");\r\n\t\tthrow new Error(\"'scale3d' is deprecated\");\r\n\t}\r\n\t/**\r\n\t * @param {number} r - rad\r\n\t */\r\n\trotate(r) {\r\n\t\tthrow new Error(\"Not implement\");\r\n\t}\r\n\r\n\t/** @type {number[]} */\r\n\tget color() {\r\n\t\tthrow new Error(\"Not implement\");\r\n\t}\r\n\r\n\t/** @type {number[]} - 4fv */\r\n\tset color(f4v) {\r\n\t\tthrow new Error(\"Not implement\");\r\n\t}\r\n\r\n\t/**\r\n\t * @param {vec4} f4v - vec4: array\r\n\t */\r\n\tColor4fv(f4v) {\r\n\t\talert(\"'Color4fv' is deprecated\");\r\n\t\tthrow new Error(\"'Color4fv' is deprecated\");\r\n\t}\r\n\r\n\t/**\r\n\t * @type {number} global alpha\r\n\t */\r\n\tget globalAlpha() {\r\n\t\tthrow new Error(\"Not implement\");\r\n\t}\r\n\tset globalAlpha(value) {\r\n\t\tthrow new Error(\"Not implement\");\r\n\t}\r\n\r\n\tpushGlobalAlpha() {\r\n\t\tthrow new Error(\"Not implement\");\r\n\t}\r\n\r\n\tpopGlobalAlpha(value) {\r\n\t\tthrow new Error(\"Not implement\");\r\n\t}\r\n\r\n\tclearDrawScreen() {\r\n\t\tthrow new Error(\"Not implement\");\r\n\t}\r\n\r\n\t/**\r\n\t * @param {IGraph} graph\r\n\t */\r\n\tdrawGraph(graph) {\r\n\t\tthrow new Error(\"Not implement\");\r\n\t}\r\n\t/**\r\n\t * @param {IGraph} graph\r\n\t * @param {number} x\r\n\t * @param {number} y\r\n\t * @param {number} z\r\n\t */\r\n\tdrawGraph2(graph, x, y, z) {\r\n\t\tthrow new Error(\"Not implement\");\r\n\t}\r\n\r\n\t/**\r\n\t * @param {number} x\r\n\t * @param {number} y\r\n\t * @param {number} w\r\n\t * @param {number} h\r\n\t */\r\n\tdrawRect(x, y, w, h) {\r\n\t\tif (arguments.length != 4) {\r\n\t\t\tconsole.error(\"drawRect(x, y, w, h) need 4 param\");\r\n\t\t}\r\n\t\tthrow new Error(\"Not implement\");\r\n\t}\r\n\t\r\n\t/**\r\n\t * @param {IGraph} graph\r\n\t * @param {number} x\r\n\t * @param {number} y\r\n\t * @param {ColorRGB} color\r\n\t */\r\n\tdrawColoredGraph(graph, x, y, color) {\r\n\t\tthrow new Error(\"Not implement\");\r\n\t}\r\n}\r\n\r\nclass ImageDataHelper {\r\n\tconstructor() {\r\n\t\tthis.canvas = document.createElement('canvas');\r\n\t\tthis.ctx = this.canvas.getContext('2d');\r\n\t}\r\n\r\n\t/**\r\n\t * @param {number} width\r\n\t * @param {number} height\r\n\t */\r\n\tresize(width, height) {\r\n\t\tcanvas.width = width;\r\n\t\tcanvas.height = height;\r\n\t}\r\n\r\n\tclear() {\r\n\t\tthis.ctx.clearRect(0, 0, this.canvas.width, this.height);\r\n\t}\r\n\t\r\n\t/**\r\n\t * @param {HTMLImageElement} image\r\n\t * @returns {ImageData}\r\n\t */\r\n\timageToImagedata(image) {\r\n\t\tconst canvas = this.canvas;\r\n\t\tconst ctx = this.ctx;\r\n\r\n\t\tcanvas.width = image.width;\r\n\t\tcanvas.height = image.height;\r\n\t\tctx.drawImage(image, 0, 0);\r\n\r\n\t\treturn ctx.getImageData(0, 0, image.width, image.height);\r\n\t}\r\n\r\n\t/**\r\n\t * @param {ImageData} imagedata\r\n\t * @returns {string}\r\n\t */\r\n\timagedataToDataURL(imagedata) {\r\n\t\tconst canvas = this.canvas;\r\n\t\tconst ctx = this.ctx;\r\n\r\n\t\tcanvas.width = imagedata.width;\r\n\t\tcanvas.height = imagedata.height;\r\n\t\tctx.putImageData(imagedata, 0, 0);\r\n\t\t\r\n\t\treturn canvas.toDataURL();\r\n\t}\r\n\r\n\t/**\r\n\t * @param {ImageData} imagedata\r\n\t * @returns {HTMLImageElement}\r\n\t */\r\n\timagedataToImage(imagedata) {\r\n\t\tconst canvas = this.canvas;\r\n\t\tconst ctx = this.ctx;\r\n\r\n\t\tcanvas.width = imagedata.width;\r\n\t\tcanvas.height = imagedata.height;\r\n\t\tctx.putImageData(imagedata, 0, 0);\r\n\r\n\t\tlet image = new Image();\r\n\t\timage.src = canvas.toDataURL();\r\n\t\treturn image;\r\n\t}\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2FtZS9JUmVuZGVyZXIuanMuanMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvZ2FtZS9JUmVuZGVyZXIuanM/Nzg5MyJdLCJzb3VyY2VzQ29udGVudCI6WyLvu79cclxuaW1wb3J0IHsgVmVjMiwgY2xhbXAgfSBmcm9tICcuL21hdGguanMnO1xyXG5cclxuZnVuY3Rpb24gY29sb3JJbnQyNFBhcnNlMihjb2wpIHtcclxuXHRyZXR1cm4gXCIjXCIgKyBbKChjb2wgPj4gMTYpICYgMHhGRiksICgoY29sID4+IDgpICYgMHhGRiksIChjb2wgJiAweEZGKV0ubWFwKGE9PmEudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsIFwiMFwiKSkuam9pbihcIlwiKTtcclxufVxyXG5mdW5jdGlvbiBjb2xvckludDI0UGFyc2UoY29sKSB7XHJcblx0cmV0dXJuIFwiI1wiICsgWygoY29sID4+IDE2KSAmIDB4RkYpLCAoKGNvbCA+PiA4KSAmIDB4RkYpLCAoY29sICYgMHhGRildLm1hcChhPT5hLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLCBcIjBcIikpLmpvaW4oXCJcIik7XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogQGludGVyZmFjZVxyXG4gKi9cclxuY2xhc3MgSUNvbG9yIHtcclxuXHR0b0ZpbHRlcigpIHtcclxuXHR9XHJcblx0dG9GaWx0ZXJMaW1pdCgpIHtcclxuXHR9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAaW1wbGVtZW50cyB7SUNvbG9yfVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIENvbG9yUkdCIHtcclxuXHRjb25zdHJ1Y3RvcihyID0gMCwgZyA9IDAsIGIgPSAwKSB7XHJcblx0XHQvKiogQHR5cGUge251bWJlcn0gLSBpbnQgdmFsdWU6IDAgfiAyNTUgKi9cclxuXHRcdHRoaXMuciA9IHI7XHJcblxyXG5cdFx0LyoqIEB0eXBlIHtudW1iZXJ9IC0gaW50IHZhbHVlOiAwIH4gMjU1ICovXHJcblx0XHR0aGlzLmcgPSBnO1xyXG5cclxuXHRcdC8qKiBAdHlwZSB7bnVtYmVyfSAtIGludCB2YWx1ZTogMCB+IDI1NSAqL1xyXG5cdFx0dGhpcy5iID0gYjtcclxuXHR9XHJcblx0Y2xvbmUoKSB7XHJcblx0XHRyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5yLCB0aGlzLmcsIHRoaXMuYik7XHJcblx0fVxyXG5cdHNlbGZBZGQocmdiKSB7XHJcblx0XHR0aGlzLnIgKz0gcmdiLnI7XHJcblx0XHR0aGlzLmcgKz0gcmdiLmc7XHJcblx0XHR0aGlzLmIgKz0gcmdiLmI7XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9XHJcblx0c2VsZlN1YihyZ2IpIHtcclxuXHRcdHRoaXMuciArPSByZ2IucjtcclxuXHRcdHRoaXMuZyArPSByZ2IuZztcclxuXHRcdHRoaXMuYiArPSByZ2IuYjtcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH1cclxuXHRzZWxmU2NhbGUocykge1xyXG5cdFx0dGhpcy5yICo9IHM7XHJcblx0XHR0aGlzLmcgKj0gcztcclxuXHRcdHRoaXMuYiAqPSBzO1xyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fVxyXG5cdHN0YXRpYyBhZGQocmdiLCByZ2IyKSB7XHJcblx0XHRyZXR1cm4gbmV3IENvbG9yUkdCKHJnYi5yICsgcmdiMi5yLCByZ2IuZyArIHJnYjIuZywgcmdiLmIgKyByZ2IyLmIpO1xyXG5cdH1cclxuXHRzdGF0aWMgc3ViKHJnYiwgcmdiMikge1xyXG5cdFx0cmV0dXJuIG5ldyBDb2xvclJHQihyZ2IuciAtIHJnYjIuciwgcmdiLmcgLSByZ2IyLmcsIHJnYi5iIC0gcmdiMi5iKTtcclxuXHR9XHJcblx0c3RhdGljIHNjYWxlKHJnYiwgcykge1xyXG5cdFx0cmV0dXJuIG5ldyBDb2xvclJHQihyZ2IuciAqIHMsIHJnYi5nICogcywgcmdiLmIgKiBzKTtcclxuXHR9XHJcblx0dG9TdHJpbmcoKSB7XHJcblx0XHRjb25zdCByID0gTWF0aC50cnVuYyh0aGlzLnIpO1xyXG5cdFx0Y29uc3QgZyA9IE1hdGgudHJ1bmModGhpcy5nKTtcclxuXHRcdGNvbnN0IGIgPSBNYXRoLnRydW5jKHRoaXMuYik7XHJcblx0XHRyZXR1cm4gXCJyZ2IoXCIgKyByICsgXCIsXCIgKyBnICsgXCIsXCIgKyBiICsgXCIpXCI7XHJcblx0fVxyXG5cdHN0YXRpYyBmcm9tSW50MjQoY29sKSB7XHJcblx0XHRyZXR1cm4gbmV3IENvbG9yUkdCKChjb2wgPj4gMTYpICYgMHhGRiwgKGNvbCA+PiA4KSAmIDB4RkYsIGNvbCAmIDB4RkYpO1xyXG5cdH1cclxuXHQvKipcclxuXHQgKiBzb3VyY2U6IGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL21qYWNrc29uLzUzMTEyNTYjZmlsZS1jb2xvci1jb252ZXJzaW9uLWFsZ29yaXRobXMtanMtTDg0XHJcblx0ICogQ29udmVydHMgYW4gUkdCIGNvbG9yIHZhbHVlIHRvIEhTVi4gQ29udmVyc2lvbiBmb3JtdWxhXHJcblx0ICogYWRhcHRlZCBmcm9tIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvSFNWX2NvbG9yX3NwYWNlLlxyXG5cdCAqIEFzc3VtZXMgciwgZywgYW5kIGIgYXJlIGNvbnRhaW5lZCBpbiB0aGUgc2V0IFswLCAyNTVdIGFuZFxyXG5cdCAqIHJldHVybnMgaCwgcywgYW5kIHYgaW4gdGhlIHNldCBbMCwgMV0uXHJcblx0ICpcclxuXHQgKiBAcmV0dXJucyB7Q29sb3JIU1Z9XHJcblx0ICovXHJcblx0dG9IU1YoKSB7XHJcblx0XHRsZXQgciA9IHRoaXMuciAvPSAyNTUsIGcgPSB0aGlzLmcgLz0gMjU1LCBiID0gdGhpcy5iIC89IDI1NTtcclxuXHJcblx0XHRsZXQgbWF4ID0gTWF0aC5tYXgociwgZywgYiksIG1pbiA9IE1hdGgubWluKHIsIGcsIGIpO1xyXG5cdFx0bGV0IGgsIHMsIHYgPSBtYXg7XHJcblxyXG5cdFx0bGV0IGQgPSBtYXggLSBtaW47XHJcblx0XHRzID0gbWF4ID09IDAgPyAwIDogZCAvIG1heDtcclxuXHJcblx0XHRpZiAobWF4ID09IG1pbikge1xyXG5cdFx0XHRoID0gMDsgLy8gYWNocm9tYXRpY1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0c3dpdGNoIChtYXgpIHtcclxuXHRcdFx0XHRjYXNlIHI6IGggPSAoZyAtIGIpIC8gZCArIChnIDwgYiA/IDYgOiAwKTsgYnJlYWs7XHJcblx0XHRcdFx0Y2FzZSBnOiBoID0gKGIgLSByKSAvIGQgKyAyOyBicmVhaztcclxuXHRcdFx0XHRjYXNlIGI6IGggPSAociAtIGcpIC8gZCArIDQ7IGJyZWFrO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRoIC89IDY7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIG5ldyBDb2xvckhTVihoLCBzLCB2KTtcclxuXHR9XHJcblx0LyoqXHJcblx0ICogc291cmNlOiBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9tamFja3Nvbi81MzExMjU2I2ZpbGUtY29sb3ItY29udmVyc2lvbi1hbGdvcml0aG1zLWpzLUwxMTlcclxuXHQgKiBDb252ZXJ0cyBhbiBIU1YgY29sb3IgdmFsdWUgdG8gUkdCLiBDb252ZXJzaW9uIGZvcm11bGFcclxuXHQgKiBhZGFwdGVkIGZyb20gaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9IU1ZfY29sb3Jfc3BhY2UuXHJcblx0ICogQXNzdW1lcyBoLCBzLCBhbmQgdiBhcmUgY29udGFpbmVkIGluIHRoZSBzZXQgWzAsIDFdIGFuZFxyXG5cdCAqIHJldHVybnMgciwgZywgYW5kIGIgaW4gdGhlIHNldCBbMCwgMjU1XS5cclxuXHQgKlxyXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBoIFRoZSBodWVcclxuXHQgKiBAcGFyYW0ge251bWJlcn0gcyBUaGUgc2F0dXJhdGlvblxyXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSB2IFRoZSB2YWx1ZVxyXG5cdCAqL1xyXG5cdGZyb21Ic3YoaCwgcywgdikge1xyXG5cdFx0bGV0IHIsIGcsIGI7XHJcblxyXG5cdFx0bGV0IGkgPSBNYXRoLmZsb29yKGggKiA2KTtcclxuXHRcdGxldCBmID0gaCAqIDYgLSBpO1xyXG5cdFx0bGV0IHAgPSB2ICogKDEgLSBzKTtcclxuXHRcdGxldCBxID0gdiAqICgxIC0gZiAqIHMpO1xyXG5cdFx0bGV0IHQgPSB2ICogKDEgLSAoMSAtIGYpICogcyk7XHJcblxyXG5cdFx0c3dpdGNoIChpICUgNikge1xyXG5cdFx0XHRjYXNlIDA6IHIgPSB2LCBnID0gdCwgYiA9IHA7IGJyZWFrO1xyXG5cdFx0XHRjYXNlIDE6IHIgPSBxLCBnID0gdiwgYiA9IHA7IGJyZWFrO1xyXG5cdFx0XHRjYXNlIDI6IHIgPSBwLCBnID0gdiwgYiA9IHQ7IGJyZWFrO1xyXG5cdFx0XHRjYXNlIDM6IHIgPSBwLCBnID0gcSwgYiA9IHY7IGJyZWFrO1xyXG5cdFx0XHRjYXNlIDQ6IHIgPSB0LCBnID0gcCwgYiA9IHY7IGJyZWFrO1xyXG5cdFx0XHRjYXNlIDU6IHIgPSB2LCBnID0gcCwgYiA9IHE7IGJyZWFrO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuciA9IHIgKiAyNTU7XHJcblx0XHR0aGlzLmcgPSBnICogMjU1O1xyXG5cdFx0dGhpcy5iID0gYiAqIDI1NTtcclxuXHR9XHJcblx0c3RhdGljIGZyb21Ic3YoaCwgcywgdikge1xyXG5cdFx0bGV0IHIsIGcsIGI7XHJcblxyXG5cdFx0bGV0IGkgPSBNYXRoLmZsb29yKGggKiA2KTtcclxuXHRcdGxldCBmID0gaCAqIDYgLSBpO1xyXG5cdFx0bGV0IHAgPSB2ICogKDEgLSBzKTtcclxuXHRcdGxldCBxID0gdiAqICgxIC0gZiAqIHMpO1xyXG5cdFx0bGV0IHQgPSB2ICogKDEgLSAoMSAtIGYpICogcyk7XHJcblxyXG5cdFx0c3dpdGNoIChpICUgNikge1xyXG5cdFx0XHRjYXNlIDA6IHIgPSB2LCBnID0gdCwgYiA9IHA7IGJyZWFrO1xyXG5cdFx0XHRjYXNlIDE6IHIgPSBxLCBnID0gdiwgYiA9IHA7IGJyZWFrO1xyXG5cdFx0XHRjYXNlIDI6IHIgPSBwLCBnID0gdiwgYiA9IHQ7IGJyZWFrO1xyXG5cdFx0XHRjYXNlIDM6IHIgPSBwLCBnID0gcSwgYiA9IHY7IGJyZWFrO1xyXG5cdFx0XHRjYXNlIDQ6IHIgPSB0LCBnID0gcCwgYiA9IHY7IGJyZWFrO1xyXG5cdFx0XHRjYXNlIDU6IHIgPSB2LCBnID0gcCwgYiA9IHE7IGJyZWFrO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiBuZXcgQ29sb3JSR0IociAqIDI1NSwgZyAqIDI1NSwgYiAqIDI1NSk7XHJcblx0fVxyXG5cdHRvRmlsdGVyKCkge1xyXG5cdFx0bGV0IHsgaCwgcywgdiB9ID0gdGhpcy50b0hTVigpO1xyXG5cdFx0cmV0dXJuIGBodWUtcm90YXRlKCR7aCpNYXRoLlBJKjJ9cmFkKSBzYXR1cmF0ZSgke3N9KSBicmlnaHRuZXNzKCR7dn0pYDtcclxuXHR9XHJcblx0dG9GaWx0ZXJMaW1pdCgpIHtcclxuXHRcdHJldHVybiBgaHVlLXJvdGF0ZSgke2ggKiAzNjB9ZGVnKSBzYXR1cmF0ZSgke2NsYW1wKE1hdGgudHJ1bmMocyAqIDEwMCksIDAsIDEwMCl9JSkgYnJpZ2h0bmVzcygke2NsYW1wKE1hdGgudHJ1bmModiAqIDEwMCksIDAsIDEwMCl9JSlgO1xyXG5cdH1cclxuXHR0b0ZpbHRlcl9IdWVSb3RhdGUoKSB7XHJcblx0XHRjb25zdCB7IGgsIHMsIHYgfSA9IHRoaXM7XHJcblx0XHQvL3JldHVybiBgaHVlLXJvdGF0ZSgke2gqTWF0aC5QSSoyfXJhZClgO1xyXG5cdFx0cmV0dXJuIGBodWUtcm90YXRlKCR7aCAqIDM2MH1kZWcpYDtcclxuXHR9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBAaW1wbGVtZW50cyB7SUNvbG9yfVxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIENvbG9ySFNWIHtcclxuXHRjb25zdHJ1Y3RvcihoID0gMCwgcyA9IDAsIHYgPSAwKSB7XHJcblx0XHQvKiogQHR5cGUge251bWJlcn0gLSBmbG9hdCB2YWx1ZTogMCB+IDEgKi9cclxuXHRcdHRoaXMuaCA9IGg7XHJcblxyXG5cdFx0LyoqIEB0eXBlIHtudW1iZXJ9IC0gZmxvYXQgdmFsdWU6IDAgfiAxICovXHJcblx0XHR0aGlzLnMgPSBzO1xyXG5cclxuXHRcdC8qKiBAdHlwZSB7bnVtYmVyfSAtIGZsb2F0IHZhbHVlOiAwIH4gMSAqL1xyXG5cdFx0dGhpcy52ID0gdjtcclxuXHR9XHJcblx0Y2xvbmUoKSB7XHJcblx0XHRyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy5oLCB0aGlzLnMsIHRoaXMudik7XHJcblx0fVxyXG5cdHNlbGZBZGQoaHN2KSB7XHJcblx0XHR0aGlzLmggKz0gaHN2Lmg7XHJcblx0XHR0aGlzLnMgKz0gaHN2LnM7XHJcblx0XHR0aGlzLnYgKz0gaHN2LnY7XHJcblx0XHRyZXR1cm4gdGhpcztcclxuXHR9XHJcblx0c2VsZlN1Yihoc3YpIHtcclxuXHRcdHRoaXMuaCArPSBoc3YuaDtcclxuXHRcdHRoaXMucyArPSBoc3YucztcclxuXHRcdHRoaXMudiArPSBoc3YudjtcclxuXHRcdHJldHVybiB0aGlzO1xyXG5cdH1cclxuXHRzZWxmU2NhbGUocykge1xyXG5cdFx0dGhpcy5oICo9IHM7XHJcblx0XHR0aGlzLnMgKj0gcztcclxuXHRcdHRoaXMudiAqPSBzO1xyXG5cdFx0cmV0dXJuIHRoaXM7XHJcblx0fVxyXG5cdHN0YXRpYyBhZGQoaHN2LCBoc3YyKSB7XHJcblx0XHRyZXR1cm4gbmV3IENvbG9ySFNWKGhzdi5zICsgaHN2Mi5zLCBoc3YucyArIGhzdjIucywgaHN2LnYgKyBoc3YyLnYpO1xyXG5cdH1cclxuXHRzdGF0aWMgc3ViKGhzdiwgaHN2Mikge1xyXG5cdFx0cmV0dXJuIG5ldyBDb2xvckhTVihoc3YucyAtIGhzdjIucywgaHN2LnMgLSBoc3YyLnMsIGhzdi52IC0gaHN2Mi52KTtcclxuXHR9XHJcblx0c3RhdGljIHNjYWxlKGhzdiwgcykge1xyXG5cdFx0cmV0dXJuIG5ldyBDb2xvckhTVihoc3YuaCAqIHMsIGhzdi5zICogcywgaHN2LnYgKiBzKTtcclxuXHR9XHJcblx0dG9TdHJpbmcoKSB7XHJcblx0XHRjb25zdCB7IGgsIHMsIHYgfSA9IHRoaXM7XHJcblx0XHRyZXR1cm4gXCJoc3YoXCIgKyBoICsgXCIsXCIgKyBzICsgXCIsXCIgKyB2ICsgXCIpXCI7XHJcblx0fVxyXG5cclxuXHQvL3RvUmdiKCkge1xyXG5cdC8vfVxyXG5cdC8vZnJvbVJnYihyLCBnLCBiKSB7XHJcblx0Ly99XHJcblxyXG5cdC8vc3RhdGljIGZyb21SZ2IociwgZywgYikge1xyXG5cdC8vfVxyXG5cclxuXHR0b0ZpbHRlcigpIHtcclxuXHRcdGNvbnN0IHsgaCwgcywgdiB9ID0gdGhpcztcclxuXHRcdHJldHVybiBgaHVlLXJvdGF0ZSgke2gqTWF0aC5QSSoyfXJhZCkgc2F0dXJhdGUoJHtzfSkgYnJpZ2h0bmVzcygke3Z9KWA7XHJcblx0fVxyXG5cdHRvRmlsdGVyTGltaXQoKSB7XHJcblx0XHRyZXR1cm4gYGh1ZS1yb3RhdGUoJHtoICogMzYwfWRlZykgc2F0dXJhdGUoJHtjbGFtcChNYXRoLnRydW5jKHMgKiAxMDApLCAwLCAxMDApfSUpIGJyaWdodG5lc3MoJHtjbGFtcChNYXRoLnRydW5jKHYgKiAxMDApLCAwLCAxMDApfSUpYDtcclxuXHR9XHJcblx0dG9GaWx0ZXJfSHVlUm90YXRlKCkge1xyXG5cdFx0Y29uc3QgeyBoLCBzLCB2IH0gPSB0aGlzO1xyXG5cdFx0Ly9yZXR1cm4gYGh1ZS1yb3RhdGUoJHtoKk1hdGguUEkqMn1yYWQpYDtcclxuXHRcdHJldHVybiBgaHVlLXJvdGF0ZSgke2ggKiAzNjB9ZGVnKWA7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgX0ltYWdlRmlsdGVyIHtcclxuXHQvKipcclxuXHQgKiBAcGFyYW0ge251bWJlcn0gaHVlIDAgfiAzNjBcclxuXHQgKiBAcGFyYW0ge251bWJlcn0gc2F0IDAgfiAxMDBcclxuXHQgKiBAcGFyYW0ge251bWJlcn0gYnJpIDAgfiAxMDBcclxuXHQgKiBAcGFyYW0ge251bWJlcn0gY29udHJhc3QgMCB+IDEwMFxyXG5cdCAqL1xyXG5cdGNvbnN0cnVjdG9yKGh1ZSA9IDAsIHNhdCA9IDEwMCwgYnJpID0gMTAwLCBjb250cmFzdCA9IDEwMCkge1xyXG5cdFx0dGhpcy5faHVlID0gaHVlO1xyXG5cdFx0dGhpcy5fc2F0ID0gc2F0O1xyXG5cdFx0dGhpcy5fYnJpID0gYnJpO1xyXG5cdFx0dGhpcy5fY29udHJhc3QgPSBjb250cmFzdDtcclxuXHR9XHJcblx0LyoqIEByZXR1cm5zIHtudW1iZXJ9ICovXHJcblx0Z2V0IGh1ZSgpIHtcclxuXHRcdHJldHVybiB0aGlzLl9odWU7XHJcblx0fVxyXG5cdHNldCBodWUodmFsdWUpIHtcclxuXHRcdHRoaXMuX2h1ZSA9IHZhbHVlICUgMzYwO1xyXG5cdFx0aWYgKCh0aGlzLl9odWUgJSAzNjAgPT0gMCkgJiYgdGhpcy5fc2F0ID09IDEwMCAmJiB0aGlzLl9icmkgPT0gMTAwICYmIHRoaXMuX2NvbnRyYXN0ID09IDEwMCkge1xyXG5cdFx0XHR0aGlzLnJlc2V0KCk7XHJcblx0XHR9XHJcblx0fVxyXG5cdC8qKiBAcmV0dXJucyB7bnVtYmVyfSAqL1xyXG5cdGdldCBzYXQoKSB7XHJcblx0XHRyZXR1cm4gdGhpcy5fc2F0O1xyXG5cdH1cclxuXHRzZXQgc2F0KHZhbHVlKSB7XHJcblx0XHR0aGlzLl9zYXQgPSBNYXRoLm1heCgwLCB2YWx1ZSk7XHJcblx0XHRpZiAoKHRoaXMuX2h1ZSAlIDM2MCA9PSAwKSAmJiB0aGlzLl9zYXQgPT0gMTAwICYmIHRoaXMuX2JyaSA9PSAxMDAgJiYgdGhpcy5fY29udHJhc3QgPT0gMTAwKSB7XHJcblx0XHRcdHRoaXMucmVzZXQoKTtcclxuXHRcdH1cclxuXHR9XHJcblx0LyoqIEByZXR1cm5zIHtudW1iZXJ9ICovXHJcblx0Z2V0IGJyaSgpIHtcclxuXHRcdHJldHVybiB0aGlzLl9icmk7XHJcblx0fVxyXG5cdHNldCBicmkodmFsdWUpIHtcclxuXHRcdHRoaXMuX2JyaSA9IE1hdGgubWF4KDAsIHZhbHVlKTtcclxuXHRcdGlmICgodGhpcy5faHVlICUgMzYwID09IDApICYmIHRoaXMuX3NhdCA9PSAxMDAgJiYgdGhpcy5fYnJpID09IDEwMCAmJiB0aGlzLl9jb250cmFzdCA9PSAxMDApIHtcclxuXHRcdFx0dGhpcy5yZXNldCgpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqIEByZXR1cm5zIHtudW1iZXJ9ICovXHJcblx0Z2V0IGNvbnRyYXN0KCkge1xyXG5cdFx0cmV0dXJuIHRoaXMuX2NvbnRyYXN0O1xyXG5cdH1cclxuXHRzZXQgY29udHJhc3QodmFsdWUpIHtcclxuXHRcdHRoaXMuX2NvbnRyYXN0ID0gTWF0aC5tYXgoMCwgdmFsdWUpO1xyXG5cdFx0aWYgKCh0aGlzLl9odWUgJSAzNjAgPT0gMCkgJiYgdGhpcy5fc2F0ID09IDEwMCAmJiB0aGlzLl9icmkgPT0gMTAwICYmIHRoaXMuX2NvbnRyYXN0ID09IDEwMCkge1xyXG5cdFx0XHR0aGlzLnJlc2V0KCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHR0b1JnYigpIHtcclxuXHRcdHJldHVybiBDb2xvclJHQi5mcm9tSHN2KHRoaXMuX2h1ZSAvIDM2MCwgdGhpcy5fc2F0IC8gMTAwLCB0aGlzLl9icmkgLyAxMDApO1xyXG5cdH1cclxuXHJcblx0dG9TdHJpbmcoKSB7XHJcblx0XHRyZXR1cm4gYGh1ZS1yb3RhdGUoJHt0aGlzLl9odWV9ZGVnKSBzYXR1cmF0ZSgke3RoaXMuX3NhdH0lKSBicmlnaHRuZXNzKCR7dGhpcy5fYnJpfSUpIGNvbnRyYXN0KCR7dGhpcy5fY29udHJhc3R9JSlgOy8vICsgSW1hZ2VGaWx0ZXIuZ2xvYmFsRmlsdGVyXHJcblx0fVxyXG59XHJcblxyXG4vKipcclxuICogZGVmYXVsdCBubyBmaWx0ZXJcclxuICovXHJcbmV4cG9ydCBjbGFzcyBJbWFnZUZpbHRlciBleHRlbmRzIF9JbWFnZUZpbHRlciB7XHJcblx0LyoqXHJcblx0ICogQHBhcmFtIHtudW1iZXJ9IGh1ZSAwIH4gMzYwXHJcblx0ICogQHBhcmFtIHtudW1iZXJ9IHNhdCAwIH4gMTAwXHJcblx0ICogQHBhcmFtIHtudW1iZXJ9IGJyaSAwIH4gMTAwXHJcblx0ICogQHBhcmFtIHtudW1iZXJ9IGNvbnRyYXN0IDAgfiAxMDBcclxuXHQgKi9cclxuXHRjb25zdHJ1Y3RvcihodWUgPSAwLCBzYXQgPSAxMDAsIGJyaSA9IDEwMCwgY29udHJhc3QgPSAxMDApIHtcclxuXHRcdHN1cGVyKGh1ZSwgc2F0LCBicmksIGNvbnRyYXN0KTtcclxuXHRcdGlmIChhcmd1bWVudHMubGVuZ3RoKSB7XHJcblx0XHRcdHRoaXMuX19wcm90b19fID0gX0ltYWdlRmlsdGVyLnByb3RvdHlwZTtcclxuXHRcdH1cclxuXHR9XHJcblx0LyoqIEByZXR1cm5zIHtudW1iZXJ9ICovXHJcblx0Z2V0IGh1ZSgpIHtcclxuXHRcdHJldHVybiAwO1xyXG5cdH1cclxuXHRzZXQgaHVlKHZhbHVlKSB7XHJcblx0XHR0aGlzLl9odWUgPSB2YWx1ZSAlIDM2MDtcclxuXHRcdHRoaXMuX19wcm90b19fID0gX0ltYWdlRmlsdGVyLnByb3RvdHlwZTtcclxuXHR9XHJcblx0LyoqIEByZXR1cm5zIHtudW1iZXJ9ICovXHJcblx0Z2V0IHNhdCgpIHtcclxuXHRcdHJldHVybiAxMDA7XHJcblx0fVxyXG5cdHNldCBzYXQodmFsdWUpIHtcclxuXHRcdHRoaXMuX3NhdCA9IE1hdGgubWF4KDAsIHZhbHVlKTtcclxuXHRcdHRoaXMuX19wcm90b19fID0gX0ltYWdlRmlsdGVyLnByb3RvdHlwZTtcclxuXHR9XHJcblx0LyoqIEByZXR1cm5zIHtudW1iZXJ9ICovXHJcblx0Z2V0IGJyaSgpIHtcclxuXHRcdHJldHVybiAxMDA7XHJcblx0fVxyXG5cdHNldCBicmkodmFsdWUpIHtcclxuXHRcdHRoaXMuX2JyaSA9IE1hdGgubWF4KDAsIHZhbHVlKTtcclxuXHRcdHRoaXMuX19wcm90b19fID0gX0ltYWdlRmlsdGVyLnByb3RvdHlwZTtcclxuXHR9XHJcblxyXG5cdC8qKiBAcmV0dXJucyB7bnVtYmVyfSAqL1xyXG5cdGdldCBjb250cmFzdCgpIHtcclxuXHRcdHJldHVybiAxMDA7XHJcblx0fVxyXG5cdHNldCBjb250cmFzdCh2YWx1ZSkge1xyXG5cdFx0dGhpcy5fY29udHJhc3QgPSBNYXRoLm1heCgwLCB2YWx1ZSk7XHJcblx0XHR0aGlzLl9fcHJvdG9fXyA9IF9JbWFnZUZpbHRlci5wcm90b3R5cGU7XHJcblx0fVxyXG5cclxuXHR0b1JnYigpIHtcclxuXHRcdHJldHVybiBuZXcgQ29sb3JSR0IoMjU1LCAyNTUsIDI1NSk7XHJcblx0fVxyXG5cclxuXHR0b1N0cmluZygpIHtcclxuXHRcdHJldHVybiBcIm5vbmVcIjsvL0ltYWdlRmlsdGVyLmdsb2JhbEZpbHRlciA/IEltYWdlRmlsdGVyLmdsb2JhbEZpbHRlciA6IFwibm9uZVwiO1xyXG5cdH1cclxuXHJcblx0Z2V0IGlzRW1wdHkoKSB7XHJcblx0XHRyZXR1cm4gdHJ1ZTtcclxuXHR9XHJcbn1cclxuXHJcbl9JbWFnZUZpbHRlci5wcm90b3R5cGUucmVzZXQgPSBmdW5jdGlvbiAoKSB7XHJcblx0dGhpcy5faHVlID0gMDtcclxuXHR0aGlzLl9zYXQgPSAxMDA7XHJcblx0dGhpcy5fYnJpID0gMTAwO1xyXG5cdHRoaXMuX2NvbnRyYXN0ID0gMTAwO1xyXG5cdHRoaXMuX19wcm90b19fID0gSW1hZ2VGaWx0ZXIucHJvdG90eXBlO1xyXG59XHJcblxyXG4vKipcclxuICogQHBhcmFtIHtudW1iZXJ9IGh1ZSAwIH4gMzYwXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBzYXQgMCB+IDEwMFxyXG4gKiBAcGFyYW0ge251bWJlcn0gYnJpIDAgfiAxMDBcclxuICogQHBhcmFtIHtudW1iZXJ9IGNvbnRyYXN0IDAgfiAxMDBcclxuICovXHJcbl9JbWFnZUZpbHRlci5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKGh1ZSwgc2F0LCBicmksIGNvbnRyYXN0KSB7XHJcblx0aWYgKChodWUgJSAzNjAgPT0gMCkgJiYgc2F0ID09IDEwMCAmJiBicmkgPT0gMTAwICYmIGNvbnRyYXN0ID09IDEwMCkge1xyXG5cdFx0dGhpcy5yZXNldCgpO1xyXG5cdH1cclxuXHRlbHNlIHtcclxuXHRcdHRoaXMuaHVlID0gaHVlO1xyXG5cdFx0dGhpcy5zYXQgPSBzYXQ7XHJcblx0XHR0aGlzLmJyaSA9IGJyaTtcclxuXHRcdHRoaXMuX2NvbnRyYXN0ID0gY29udHJhc3Q7XHJcblx0fVxyXG59XHJcblxyXG4vKipcclxuICogQGFic3RyYWN0XHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgSUdyYXBoIHtcclxuXHRjb25zdHJ1Y3Rvcih1cmwsIGluZm8pIHtcclxuXHRcdC8qKiBAdHlwZSB7bnVtYmVyfSAqL1xyXG5cdFx0bGV0IHdpZHRoO1xyXG5cdFx0LyoqIEB0eXBlIHtudW1iZXJ9ICovXHJcblx0XHRsZXQgaGVpZ2h0O1xyXG5cdFx0XHJcblx0XHQvKiogQHR5cGUge1Byb21pc2V9IGlmIGxvYWRlZCB3aWxsIGRlbGV0ZSAqL1xyXG5cdFx0dGhpcy4kcHJvbWlzZSA9IHVuZGVmaW5lZDtcclxuXHRcdFxyXG5cdFx0LyoqIEB0eXBlIHtXZWJHTEJ1ZmZlcn0gKi9cclxuXHRcdHRoaXMuX3ZibyA9IHVuZGVmaW5lZDtcclxuXHJcblx0XHQvKiogQHR5cGUge251bWJlcn0gLSBvcmlnaW4ueCAqL1xyXG5cdFx0dGhpcy54ID0gMDtcclxuXHRcdC8qKiBAdHlwZSB7bnVtYmVyfSAtIG9yaWdpbi55ICovXHJcblx0XHR0aGlzLnkgPSAwO1xyXG5cclxuXHRcdGlmIChpbmZvKSB7XHJcblx0XHRcdGlmIChpbmZvLndpZHRoID4gMCkge1xyXG5cdFx0XHRcdHdpZHRoID0gTnVtYmVyKGluZm8ud2lkdGgpO1xyXG5cdFx0XHR9XHJcblx0XHRcdGlmIChpbmZvLmhlaWdodCA+IDApIHtcclxuXHRcdFx0XHRoZWlnaHQgPSBOdW1iZXIoaW5mby5oZWlnaHQpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRlbHNlIHtcclxuXHRcdFx0d2lkdGggPSAwO1xyXG5cdFx0XHRoZWlnaHQgPSAwO1xyXG5cdFx0fVxyXG5cdFx0LyoqIEB0eXBlIHtudW1iZXJ9ICovXHJcblx0XHR0aGlzLndpZHRoID0gd2lkdGg7XHJcblx0XHQvKiogQHR5cGUge251bWJlcn0gKi9cclxuXHRcdHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xyXG5cdFx0Ly9cclxuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcIndpZHRoXCIsIHtcclxuXHRcdFx0Y29uZmlndXJhYmxlOiB0cnVlLFxyXG5cdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxyXG5cdFx0XHRnZXQ6IGZ1bmN0aW9uICgpIHtcclxuXHRcdFx0XHR0aGlzLl9pc0xvYWRlZF9vcl9kb2xvYWQoKTtcclxuXHRcdFx0XHRyZXR1cm4gd2lkdGg7XHJcblx0XHRcdH0sXHJcblx0XHRcdHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XHJcblx0XHRcdFx0ZGVidWdnZXI7Ly9ub3Qgb3ZlcnJpZGVcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgXCJoZWlnaHRcIiwge1xyXG5cdFx0XHRjb25maWd1cmFibGU6IHRydWUsXHJcblx0XHRcdGVudW1lcmFibGU6IHRydWUsXHJcblx0XHRcdGdldDogZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdHRoaXMuX2lzTG9hZGVkX29yX2RvbG9hZCgpO1xyXG5cdFx0XHRcdHJldHVybiBoZWlnaHQ7XHJcblx0XHRcdH0sXHJcblx0XHRcdHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XHJcblx0XHRcdFx0ZGVidWdnZXI7Ly9ub3Qgb3ZlcnJpZGVcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0LyoqIEB0eXBlIHtXZWJHTFRleHR1cmV9ICovXHJcblx0XHQvKiogdGhpcy50ZXh0dXJlID0gbnVsbDsgKi9cclxuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBcInRleHR1cmVcIiwge1xyXG5cdFx0XHRjb25maWd1cmFibGU6IHRydWUsXHJcblx0XHRcdGVudW1lcmFibGU6IHRydWUsXHJcblx0XHRcdGdldDogZnVuY3Rpb24gKCkge1xyXG5cdFx0XHRcdHRoaXMuX19pc0xvYWRpbmdfb3JfZG9sb2FkKCk7XHJcblx0XHRcdFx0cmV0dXJuIG51bGw7XHJcblx0XHRcdH0sXHJcblx0XHRcdHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XHJcblx0XHRcdFx0ZGVidWdnZXI7Ly9ub3Qgb3ZlcnJpZGVcclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5pc0xvYWRlZCA9IHRoaXMuX2lzTG9hZGVkX29yX2RvbG9hZDtcclxuXHJcblx0XHQvKiogQHR5cGUge2Z1bmN0aW9uKCk6dm9pZH0gKi9cclxuXHRcdC8vdGhpcy5fb25sb2FkID0gbnVsbDtcclxuXHJcblx0XHQvKiogQHR5cGUge3N0cmluZ30gKi9cclxuXHRcdHRoaXMuX3VybCA9IFwiXCI7XHJcblx0XHRpZiAodXJsKSB7XHJcblx0XHRcdHRoaXMuc3JjID0gdXJsO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRfZGlzcG9zZSgpIHtcclxuXHRcdC8vb25seSBjaGVjayBpcyBsb2FkZWRcclxuXHRcdGlmICh0aGlzLl9pc0xvYWRlZCgpKSB7XHJcblx0XHRcdC8vdGhpcy5fZW5naW5lLmRlbGV0ZUdyYXBoKHRoaXMpO1xyXG5cclxuXHRcdFx0aWYgKHRoaXMuX2dsKSB7XHJcblx0XHRcdFx0YWxlcnQoXCJnbC5kZWxldGVUZXh0dXJlKHRoaXMudGV4dHVyZSlcIik7XHJcblx0XHRcdFx0dGhpcy5fZ2wuZGVsZXRlVGV4dHVyZSh0aGlzLnRleHR1cmUpO1xyXG5cdFx0XHR9XHJcblx0XHRcdHRoaXMudGV4dHVyZSA9IG51bGw7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRkcmF3KCkge1xyXG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiTm90IEltcGxlbWVudFwiKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSB4XHJcblx0ICogQHBhcmFtIHtudW1iZXJ9IHlcclxuXHQgKi9cclxuXHRkcmF3Mih4LCB5KSB7XHJcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJOb3QgSW1wbGVtZW50XCIpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQHJldHVybnMge0lSZW5kZXJlcn1cclxuXHQgKi9cclxuXHRnZXQgX2VuZ2luZSgpIHtcclxuXHRcdHRocm93IG5ldyBFcnJvcihcIk5vdCBJbXBsZW1lbnRcIik7XHJcblx0fVxyXG5cdC8qKlxyXG5cdCAqIEByZXR1cm5zIHtXZWJHTFJlbmRlcmluZ0NvbnRleHR9XHJcblx0ICovXHJcblx0Z2V0IF9nbCgpIHtcclxuXHRcdHRocm93IG5ldyBFcnJvcihcIk5vdCBJbXBsZW1lbnRcIik7XHJcblx0fVxyXG5cdC8qKlxyXG5cdCAqIEByZXR1cm5zIHtDYW52YXNSZW5kZXJpbmdDb250ZXh0MkR9XHJcblx0ICovXHJcblx0Z2V0IF9jdHgoKSB7XHJcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJOb3QgSW1wbGVtZW50XCIpO1xyXG5cdH1cclxuXHJcblx0Ly9nZXQgd2lkdGgoKSB7IHJldHVybiB0aGlzLm1hdHJpeFswXTsgfVxyXG5cdC8vc2V0IHdpZHRoKHZhbCkgeyB0aGlzLm1hdHJpeFswXSA9IHZhbDsgfVxyXG5cclxuXHQvL2dldCBoZWlnaHQoKSB7IHJldHVybiB0aGlzLm1hdHJpeFs1XTsgfVxyXG5cdC8vc2V0IGhlaWdodCh2YWwpIHsgdGhpcy5tYXRyaXhbNV0gPSB2YWw7IH1cclxuXHJcblx0Ly9nZXQgeCgpIHsgcmV0dXJuIHRoaXMubWF0cml4WzEyXTsgfVxyXG5cdC8vc2V0IHgodmFsKSB7IHRoaXMubWF0cml4WzEyXSA9IHZhbDsgfVxyXG5cclxuXHQvL2dldCB5KCkgeyByZXR1cm4gdGhpcy5tYXRyaXhbMTNdOyB9XHJcblx0Ly9zZXQgeSh2YWwpIHsgdGhpcy5tYXRyaXhbMTNdID0gdmFsOyB9XHJcblxyXG5cdC8qKiA/PyAqL1xyXG5cdGdldCB6KCkgeyByZXR1cm4gMDsgfVxyXG5cdC8vZ2V0IHooKSB7IHJldHVybiB0aGlzLm1hdHJpeFsxNF07IH1cclxuXHQvL3NldCB6KHZhbCkgeyB0aGlzLm1hdHJpeFsxNF0gPSB2YWw7IH1cclxuXHJcblx0LyoqID8/ICovXHJcblx0c2V0IHNyYyh1cmwpIHtcclxuXHRcdGRlYnVnZ2VyOy8vdGhpcy5zcmMgaXMgYnJva2VuO1xyXG5cdFx0XHJcblx0XHR0aGlzLl9kaXNwb3NlKCk7XHJcblx0XHR0aGlzLl91cmwgPSB1cmw7XHJcblx0fVxyXG5cclxuXHRfaXNMb2FkZWQoKSB7XHJcblx0XHRyZXR1cm4gdGhpcy50ZXh0dXJlICE9IG51bGw7XHJcblx0fVxyXG5cdF9pc0xvYWRlZF9vcl9kb2xvYWQoKSB7XHJcblx0XHRpZiAoIXRoaXMudGV4dHVyZSkge1xyXG5cdFx0XHR0aGlzLl9fbG9hZFRleHR1cmUoKTtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHRydWU7XHJcblx0fVxyXG5cdF9faXNMb2FkaW5nX29yX2RvbG9hZCgpIHtcclxuXHRcdGlmICh0aGlzLiRwcm9taXNlID09PSBudWxsKSB7XHJcblx0XHRcdHRoaXMuX19sb2FkVGV4dHVyZSgpO1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gdHJ1ZTtcclxuXHR9XHJcblxyXG5cdF9fbG9hZFRleHR1cmUoKSB7XHJcblx0XHRpZiAodGhpcy4kcHJvbWlzZSkge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblx0XHRpZiAodGhpcy5fdXJsID09IFwiXCIpIHtcclxuXHRcdFx0ZGVidWdnZXI7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHJcblx0XHRsZXQgaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcclxuXHJcblx0XHR0aGlzLiRwcm9taXNlID0gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG5cdFx0XHRjb25zdCBlbmdpbmUgPSB0aGlzLl9lbmdpbmU7XHJcblxyXG5cdFx0XHRpbWFnZS5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLCBlID0+IHtcclxuXHRcdFx0XHRpZiAoIWUudGFyZ2V0Lm5hdHVyYWxXaWR0aCB8fCAhZS50YXJnZXQubmF0dXJhbEhlaWdodCkge1xyXG5cdFx0XHRcdFx0ZGVidWdnZXI7XHJcblx0XHRcdFx0fVxyXG5cclxuXHRcdFx0XHR0aGlzLmlzTG9hZGVkID0gdGhpcy5faXNMb2FkZWQ7Ly9lbmRcclxuXHJcblx0XHRcdFx0ZGVsZXRlIHRoaXMud2lkdGg7XHJcblx0XHRcdFx0dGhpcy53aWR0aCA9IGUudGFyZ2V0Lm5hdHVyYWxXaWR0aDtcclxuXHJcblx0XHRcdFx0ZGVsZXRlIHRoaXMuaGVpZ2h0O1xyXG5cdFx0XHRcdHRoaXMuaGVpZ2h0ID0gZS50YXJnZXQubmF0dXJhbEhlaWdodDtcclxuXHJcblx0XHRcdFx0ZGVsZXRlIHRoaXMudGV4dHVyZTtcclxuXHRcdFx0XHR0aGlzLnRleHR1cmUgPSBlbmdpbmUuX2hhbmRsZUltYWdlTG9hZGVkKGUudGFyZ2V0LCB0aGlzKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdGRlbGV0ZSB0aGlzLiRwcm9taXNlO1xyXG5cclxuXHRcdFx0XHRyZXNvbHZlKHRoaXMpO1xyXG5cdFx0XHR9LCBmYWxzZSk7XHJcblxyXG5cdFx0XHRpbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIiwgZSA9PiB7XHJcblx0XHRcdFx0dGhpcy5pc0xvYWRlZCA9IHRoaXMuX2lzTG9hZGVkOy8vbm8gdHJ5IGFnYWluXHJcblxyXG5cdFx0XHRcdGlmICh0aGlzLl9ncmFwaF9yZWN0KSB7XHJcblx0XHRcdFx0XHRkZWxldGUgdGhpcy50ZXh0dXJlO1xyXG5cdFx0XHRcdFx0dGhpcy50ZXh0dXJlID0gdGhpcy5fZ3JhcGhfcmVjdDtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0Y29uc29sZS5lcnJvcihcIjQwNDogXCIgKyBpbWFnZS5zcmMpO1xyXG5cclxuXHRcdFx0XHRyZXNvbHZlKHRoaXMpO1xyXG5cdFx0XHR9LCBmYWxzZSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRJR3JhcGguJGFsbF9wcm9taXNlLnB1c2godGhpcy4kcHJvbWlzZSk7XHJcblxyXG5cdFx0aW1hZ2Uuc3JjID0gJGdldC5pbWFnZVVybCh0aGlzLl91cmwpO1xyXG5cdH1cclxuXHJcblx0c3RhdGljIGFzeW5jIHdhaXRBbGxMb2FkZWQoY2JmdW5jKSB7XHJcblx0XHRsZXQgdGFza3MgPSBJR3JhcGguJGFsbF9wcm9taXNlO1xyXG5cdFx0Y29uc29sZS5sb2coXCJpbWFnZSBsb2FkZWQ6IFwiICsgSUdyYXBoLiRhbGxfcHJvbWlzZS5sZW5ndGgpO1xyXG5cdFx0SUdyYXBoLiRhbGxfcHJvbWlzZSA9IFtdO1xyXG5cdFx0YXdhaXQgUHJvbWlzZS5hbGwodGFza3MpO1xyXG5cdFx0aWYgKGNiZnVuYykge1xyXG5cdFx0XHRjYmZ1bmMoKTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuSUdyYXBoLiRhbGxfcHJvbWlzZSA9IFtdO1xyXG5cclxuZXhwb3J0IGNsYXNzIElSZW5kZXJlciB7XHJcblx0Y29uc3RydWN0b3IoKSB7XHJcblx0XHQvKiogQHR5cGUge0lHcmFwaH0gKi9cclxuXHRcdHRoaXMuX0dyYXBoVHlwZSA9IG51bGw7XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBAdHlwZSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfVxyXG5cdFx0ICovXHJcblx0XHR0aGlzLmN0eCA9IG51bGw7XHJcblx0XHRcclxuXHRcdHRoaXMuX2dsb2JhbEFscGhhID0gMTtcclxuXHRcdHRoaXMuX2dsb2JhbEFscGhhU3RhY2sgPSBbXTtcclxuXHRcdFxyXG5cdFx0LyoqIEB0eXBlIHtWZWMyfSAqL1xyXG5cdFx0dGhpcy5zY3JlZW5fc2l6ZSA9IG5ldyBWZWMyKDAsIDApO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQHBhcmFtIHtzdHJpbmd9IGlkXHJcblx0ICovXHJcblx0aW5pdChpZCkge1xyXG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudFwiKTtcclxuXHR9XHJcblxyXG5cdC8qKiBAdHlwZSB7SUdyYXBofSAqL1xyXG5cdGdldCBHcmFwaCgpIHtcclxuXHRcdHRocm93IG5ldyBFcnJvcihcIk5vdCBpbXBsZW1lbnRcIik7XHJcblx0XHRyZXR1cm4gbmV3IElHcmFwaCgpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogc3dhcCBDYW52YXMgYW5kIENhbnZhczJcclxuXHQgKiBpZiAoaW1hZ2VTbW9vdGhpbmdFbmFibGVkKSB0aGlzLl9jdHgyLmltYWdlU21vb3RoaW5nRW5hYmxlZCA9IHRydWU7XHJcblx0ICogQHBhcmFtIHtib29sZWFufSBpbWFnZVNtb290aGluZ0VuYWJsZWRcclxuXHQgKi9cclxuXHQkc3dhcENhbnZhcyhpbWFnZVNtb290aGluZ0VuYWJsZWQpIHtcclxuXHRcdHRocm93IG5ldyBFcnJvcihcIk5vdCBpbXBsZW1lbnRcIik7XHJcblx0fVxyXG5cclxuXHQvKiogQHR5cGUge0hUTUxDYW52YXNFbGVtZW50fSAqL1xyXG5cdGdldCBfY2FudmFzKCkge1xyXG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudFwiKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEBwYXJhbSB7SFRNTEltYWdlRWxlbWVudH0gaW1hZ2VcclxuXHQgKiBAcGFyYW0ge0lHcmFwaH0gZ3JhcGhcclxuXHQgKiBAcGFyYW0ge09iamVjdH0gdGV4dHVyZVxyXG5cdCAqL1xyXG5cdF9oYW5kbGVJbWFnZUxvYWRlZChpbWFnZSwgZ3JhcGgpIHtcclxuXHRcdHRocm93IG5ldyBFcnJvcihcIk5vdCBpbXBsZW1lbnRcIik7XHJcblx0XHRyZXR1cm4gbnVsbDtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSByXHJcblx0ICogQHBhcmFtIHtudW1iZXJ9IGR4XHJcblx0ICogQHBhcmFtIHtudW1iZXJ9IGR5XHJcblx0ICogQHBhcmFtIHtudW1iZXJ9IHN4XHJcblx0ICogQHBhcmFtIHtudW1iZXJ9IHN5XHJcblx0ICovXHJcblx0c2V0Um90YXRpb25UcmFuc2xhdGlvblNjYWxlKHIsIGR4LCBkeSwgc3gsIHN5KSB7XHJcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJOb3QgaW1wbGVtZW50XCIpO1xyXG5cdH1cclxuXHRcclxuXHQvKipcclxuXHQgKiBAcGFyYW0ge251bWJlcn0gbTExXHJcblx0ICogQHBhcmFtIHtudW1iZXJ9IG0xMlxyXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBtMjFcclxuXHQgKiBAcGFyYW0ge251bWJlcn0gbTIyXHJcblx0ICogQHBhcmFtIHtudW1iZXJ9IGR4XHJcblx0ICogQHBhcmFtIHtudW1iZXJ9IGR5XHJcblx0ICovXHJcblx0c2V0VHJhbnNmb3JtKG0xMSwgbTEyLCBtMjEsIG0yMiwgZHgsIGR5KSB7XHJcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJOb3QgaW1wbGVtZW50XCIpO1xyXG5cdH1cclxuXHJcblx0bG9hZElkZW50aXR5KCkge1xyXG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudFwiKTtcclxuXHR9XHJcblx0cHVzaE1hdHJpeCgpIHtcclxuXHRcdHRocm93IG5ldyBFcnJvcihcIk5vdCBpbXBsZW1lbnRcIik7XHJcblx0fVxyXG5cdHBvcE1hdHJpeCgpIHtcclxuXHRcdHRocm93IG5ldyBFcnJvcihcIk5vdCBpbXBsZW1lbnRcIik7XHJcblx0fVxyXG5cdC8qKlxyXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSB4XHJcblx0ICogQHBhcmFtIHtudW1iZXJ9IHlcclxuXHQgKi9cclxuXHR0cmFuc2xhdGUoeCwgeSkge1xyXG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudFwiKTtcclxuXHR9XHJcblx0LyoqXHJcblx0ICogQHBhcmFtIHtudW1iZXJ9IHhcclxuXHQgKiBAcGFyYW0ge251bWJlcn0geVxyXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSB6XHJcblx0ICovXHJcblx0dHJhbnNsYXRlM2QoeCwgeSwgeikge1xyXG5cdFx0YWxlcnQoXCIndHJhbnNsYXRlM2QnIGlzIGRlcHJlY2F0ZWRcIik7XHJcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCIndHJhbnNsYXRlM2QnIGlzIGRlcHJlY2F0ZWRcIik7XHJcblx0fVxyXG5cdC8qKlxyXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSB4XHJcblx0ICogQHBhcmFtIHtudW1iZXJ9IHlcclxuXHQgKi9cclxuXHRzY2FsZSh4LCB5KSB7XHJcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJOb3QgaW1wbGVtZW50XCIpO1xyXG5cdH1cclxuXHQvKipcclxuXHQgKiBAcGFyYW0ge251bWJlcn0geFxyXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSB5XHJcblx0ICogQHBhcmFtIHtudW1iZXJ9IHpcclxuXHQgKi9cclxuXHRzY2FsZTNkKHgsIHksIHopIHtcclxuXHRcdGFsZXJ0KFwiJ3NjYWxlM2QnIGlzIGRlcHJlY2F0ZWRcIik7XHJcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCInc2NhbGUzZCcgaXMgZGVwcmVjYXRlZFwiKTtcclxuXHR9XHJcblx0LyoqXHJcblx0ICogQHBhcmFtIHtudW1iZXJ9IHIgLSByYWRcclxuXHQgKi9cclxuXHRyb3RhdGUocikge1xyXG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudFwiKTtcclxuXHR9XHJcblxyXG5cdC8qKiBAdHlwZSB7bnVtYmVyW119ICovXHJcblx0Z2V0IGNvbG9yKCkge1xyXG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudFwiKTtcclxuXHR9XHJcblxyXG5cdC8qKiBAdHlwZSB7bnVtYmVyW119IC0gNGZ2ICovXHJcblx0c2V0IGNvbG9yKGY0dikge1xyXG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudFwiKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEBwYXJhbSB7dmVjNH0gZjR2IC0gdmVjNDogYXJyYXlcclxuXHQgKi9cclxuXHRDb2xvcjRmdihmNHYpIHtcclxuXHRcdGFsZXJ0KFwiJ0NvbG9yNGZ2JyBpcyBkZXByZWNhdGVkXCIpO1xyXG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiJ0NvbG9yNGZ2JyBpcyBkZXByZWNhdGVkXCIpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQHR5cGUge251bWJlcn0gZ2xvYmFsIGFscGhhXHJcblx0ICovXHJcblx0Z2V0IGdsb2JhbEFscGhhKCkge1xyXG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudFwiKTtcclxuXHR9XHJcblx0c2V0IGdsb2JhbEFscGhhKHZhbHVlKSB7XHJcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJOb3QgaW1wbGVtZW50XCIpO1xyXG5cdH1cclxuXHJcblx0cHVzaEdsb2JhbEFscGhhKCkge1xyXG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudFwiKTtcclxuXHR9XHJcblxyXG5cdHBvcEdsb2JhbEFscGhhKHZhbHVlKSB7XHJcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJOb3QgaW1wbGVtZW50XCIpO1xyXG5cdH1cclxuXHJcblx0Y2xlYXJEcmF3U2NyZWVuKCkge1xyXG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudFwiKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEBwYXJhbSB7SUdyYXBofSBncmFwaFxyXG5cdCAqL1xyXG5cdGRyYXdHcmFwaChncmFwaCkge1xyXG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudFwiKTtcclxuXHR9XHJcblx0LyoqXHJcblx0ICogQHBhcmFtIHtJR3JhcGh9IGdyYXBoXHJcblx0ICogQHBhcmFtIHtudW1iZXJ9IHhcclxuXHQgKiBAcGFyYW0ge251bWJlcn0geVxyXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSB6XHJcblx0ICovXHJcblx0ZHJhd0dyYXBoMihncmFwaCwgeCwgeSwgeikge1xyXG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudFwiKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSB4XHJcblx0ICogQHBhcmFtIHtudW1iZXJ9IHlcclxuXHQgKiBAcGFyYW0ge251bWJlcn0gd1xyXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBoXHJcblx0ICovXHJcblx0ZHJhd1JlY3QoeCwgeSwgdywgaCkge1xyXG5cdFx0aWYgKGFyZ3VtZW50cy5sZW5ndGggIT0gNCkge1xyXG5cdFx0XHRjb25zb2xlLmVycm9yKFwiZHJhd1JlY3QoeCwgeSwgdywgaCkgbmVlZCA0IHBhcmFtXCIpO1xyXG5cdFx0fVxyXG5cdFx0dGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudFwiKTtcclxuXHR9XHJcblx0XHJcblx0LyoqXHJcblx0ICogQHBhcmFtIHtJR3JhcGh9IGdyYXBoXHJcblx0ICogQHBhcmFtIHtudW1iZXJ9IHhcclxuXHQgKiBAcGFyYW0ge251bWJlcn0geVxyXG5cdCAqIEBwYXJhbSB7Q29sb3JSR0J9IGNvbG9yXHJcblx0ICovXHJcblx0ZHJhd0NvbG9yZWRHcmFwaChncmFwaCwgeCwgeSwgY29sb3IpIHtcclxuXHRcdHRocm93IG5ldyBFcnJvcihcIk5vdCBpbXBsZW1lbnRcIik7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgSW1hZ2VEYXRhSGVscGVyIHtcclxuXHRjb25zdHJ1Y3RvcigpIHtcclxuXHRcdHRoaXMuY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XHJcblx0XHR0aGlzLmN0eCA9IHRoaXMuY2FudmFzLmdldENvbnRleHQoJzJkJyk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBAcGFyYW0ge251bWJlcn0gd2lkdGhcclxuXHQgKiBAcGFyYW0ge251bWJlcn0gaGVpZ2h0XHJcblx0ICovXHJcblx0cmVzaXplKHdpZHRoLCBoZWlnaHQpIHtcclxuXHRcdGNhbnZhcy53aWR0aCA9IHdpZHRoO1xyXG5cdFx0Y2FudmFzLmhlaWdodCA9IGhlaWdodDtcclxuXHR9XHJcblxyXG5cdGNsZWFyKCkge1xyXG5cdFx0dGhpcy5jdHguY2xlYXJSZWN0KDAsIDAsIHRoaXMuY2FudmFzLndpZHRoLCB0aGlzLmhlaWdodCk7XHJcblx0fVxyXG5cdFxyXG5cdC8qKlxyXG5cdCAqIEBwYXJhbSB7SFRNTEltYWdlRWxlbWVudH0gaW1hZ2VcclxuXHQgKiBAcmV0dXJucyB7SW1hZ2VEYXRhfVxyXG5cdCAqL1xyXG5cdGltYWdlVG9JbWFnZWRhdGEoaW1hZ2UpIHtcclxuXHRcdGNvbnN0IGNhbnZhcyA9IHRoaXMuY2FudmFzO1xyXG5cdFx0Y29uc3QgY3R4ID0gdGhpcy5jdHg7XHJcblxyXG5cdFx0Y2FudmFzLndpZHRoID0gaW1hZ2Uud2lkdGg7XHJcblx0XHRjYW52YXMuaGVpZ2h0ID0gaW1hZ2UuaGVpZ2h0O1xyXG5cdFx0Y3R4LmRyYXdJbWFnZShpbWFnZSwgMCwgMCk7XHJcblxyXG5cdFx0cmV0dXJuIGN0eC5nZXRJbWFnZURhdGEoMCwgMCwgaW1hZ2Uud2lkdGgsIGltYWdlLmhlaWdodCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBAcGFyYW0ge0ltYWdlRGF0YX0gaW1hZ2VkYXRhXHJcblx0ICogQHJldHVybnMge3N0cmluZ31cclxuXHQgKi9cclxuXHRpbWFnZWRhdGFUb0RhdGFVUkwoaW1hZ2VkYXRhKSB7XHJcblx0XHRjb25zdCBjYW52YXMgPSB0aGlzLmNhbnZhcztcclxuXHRcdGNvbnN0IGN0eCA9IHRoaXMuY3R4O1xyXG5cclxuXHRcdGNhbnZhcy53aWR0aCA9IGltYWdlZGF0YS53aWR0aDtcclxuXHRcdGNhbnZhcy5oZWlnaHQgPSBpbWFnZWRhdGEuaGVpZ2h0O1xyXG5cdFx0Y3R4LnB1dEltYWdlRGF0YShpbWFnZWRhdGEsIDAsIDApO1xyXG5cdFx0XHJcblx0XHRyZXR1cm4gY2FudmFzLnRvRGF0YVVSTCgpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQHBhcmFtIHtJbWFnZURhdGF9IGltYWdlZGF0YVxyXG5cdCAqIEByZXR1cm5zIHtIVE1MSW1hZ2VFbGVtZW50fVxyXG5cdCAqL1xyXG5cdGltYWdlZGF0YVRvSW1hZ2UoaW1hZ2VkYXRhKSB7XHJcblx0XHRjb25zdCBjYW52YXMgPSB0aGlzLmNhbnZhcztcclxuXHRcdGNvbnN0IGN0eCA9IHRoaXMuY3R4O1xyXG5cclxuXHRcdGNhbnZhcy53aWR0aCA9IGltYWdlZGF0YS53aWR0aDtcclxuXHRcdGNhbnZhcy5oZWlnaHQgPSBpbWFnZWRhdGEuaGVpZ2h0O1xyXG5cdFx0Y3R4LnB1dEltYWdlRGF0YShpbWFnZWRhdGEsIDAsIDApO1xyXG5cclxuXHRcdGxldCBpbWFnZSA9IG5ldyBJbWFnZSgpO1xyXG5cdFx0aW1hZ2Uuc3JjID0gY2FudmFzLnRvRGF0YVVSTCgpO1xyXG5cdFx0cmV0dXJuIGltYWdlO1xyXG5cdH1cclxufVxyXG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTsiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/game/IRenderer.js\n");

/***/ }),

/***/ "./src/game/math.js":
/*!**************************!*\
  !*** ./src/game/math.js ***!
  \**************************/
/*! exports provided: Vec2, Rectangle, Randomizer, clamp */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Vec2\", function() { return Vec2; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Rectangle\", function() { return Rectangle; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Randomizer\", function() { return Randomizer; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"clamp\", function() { return clamp; });\nï»¿\r\nclass Vec2 {\r\n\t/**\r\n\t * @param {number} x\r\n\t * @param {number} y\r\n\t */\r\n\tconstructor(x, y) {\r\n\t\tif (arguments.length > 1) {\r\n\t\t\tthis.x = x;\r\n\t\t\tthis.y = y;\r\n\t\t}\r\n\t\telse if (arguments.length == 1 && x != null) {\r\n\t\t\tthis.x = x.x | 0;\r\n\t\t\tthis.y = x.y | 0;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.x = 0;\r\n\t\t\tthis.y = 0;\r\n\t\t}\r\n\t}\r\n\tstatic get() {\r\n\t\treturn new Vec2(...arguments);\r\n\t}\r\n\tstatic get empty() {\r\n\t\treturn new Vec2(0, 0);\r\n\t}\r\n\t/**\r\n\t * @returns {Vec2}\r\n\t */\r\n\tclone() {\r\n\t\treturn new this.constructor(this.x, this.y);\r\n\t}\r\n\r\n\t/**\r\n\t * @param {...Vec2} v2\r\n\t * @returns {Vec2}\r\n\t */\r\n\tadd(v2) {\r\n\t\tlet x = this.x, y = this.y;\r\n\t\tfor (let v of arguments) {\r\n\t\t\tif (v == null)\r\n\t\t\t\tcontinue;\r\n\t\t\tx = x + v.x;\r\n\t\t\ty = y + v.y;\r\n\t\t}\r\n\t\treturn new Vec2(x, y);\r\n\t}\r\n\t/**\r\n\t * @param {...Vec2} v2\r\n\t * @returns {Vec2}\r\n\t */\r\n\tsub(v2) {\r\n\t\tlet x = this.x, y = this.y;\r\n\t\tfor (let v of arguments) {\r\n\t\t\tif (v == null)\r\n\t\t\t\tcontinue;\r\n\t\t\tx = x - v.x;\r\n\t\t\ty = y - v.y;\r\n\t\t}\r\n\t\treturn new Vec2(x, y);\r\n\t}\r\n\r\n\t/** @param {Vec2} v */\r\n\tplus(v) {\r\n\t\treturn new Vec2(this.x + v.x, this.y + v.y);\r\n\t}\r\n\t/** @param {Vec2} v */\r\n\tminus(v) {\r\n\t\treturn new Vec2(this.x - v.x, this.y - v.y);\r\n\t}\r\n\r\n\t/**\r\n\t * @param {number} x\r\n\t * @param {number} y\r\n\t */\r\n\tplus2(x, y) {\r\n\t\treturn new Vec2(this.x + x, this.y + y);\r\n\t}\r\n\t/**\r\n\t * @param {number} x\r\n\t * @param {number} y\r\n\t */\r\n\tminus2(x, y) {\r\n\t\treturn new Vec2(this.x - x, this.y - y);\r\n\t}\r\n\r\n\t/**\r\n\t * @param {number} floatVar\r\n\t */\r\n\tmul(floatVar) {\r\n\t\treturn new Vec2(this.x * floatVar, this.y * floatVar);\r\n\t}\r\n\r\n\t/**\r\n\t * @param {number} s\r\n\t */\r\n\tscale(s) {\r\n\t\treturn new Vec2(this.x * s, this.y * s);\r\n\t}\r\n\r\n\trotate(ang) {\r\n\t\tlet x = Math.cos(ang) * this.x - Math.sin(ang) * this.y;\r\n\t\tlet y = Math.sin(ang) * this.x + Math.cos(ang) * this.y;\r\n\t\treturn new Vec2(x, y);\r\n\t}\r\n\r\n\tnormalize() {\r\n\t\tlet r = Math.sqrt(this.x * this.x + this.y * this.y);\r\n\t\treturn new Vec2(this.x / r, this.y / r);\r\n\t}\r\n\r\n\tlength() {\r\n\t\treturn Math.sqrt(x ** 2 + y ** 2);\r\n\t}\r\n\r\n\t/**\r\n\t * @param {Vec2} p2\r\n\t */\r\n\tdistance_sq(p2) {\r\n\t\tlet lx = this.x - p2.x;\r\n\t\tlet ly = this.y - p2.y;\r\n\t\treturn lx * lx + ly * ly;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {Vec2} p2\r\n\t */\r\n\tdistance(p2) {\r\n\t\tlet lx = this.x - p2.x;\r\n\t\tlet ly = this.y - p2.y;\r\n\t\treturn Math.sqrt(lx * lx + ly * ly);\r\n\t}\r\n}\r\n\r\nclass Rectangle {\r\n\t/**\r\n\t * Rectangle(left: number, top: number, width: number, height: number)\r\n\t * Rectangle(position: Vec2, size: Vec2)\r\n\t * Rectangle(rect: Rectangle)\r\n\t * Rectangle() => Rectangle(0, 0, 0, 0)\r\n\t */\r\n\tconstructor() {\r\n\t\tif (arguments.length == 4) {\r\n\t\t\t/** @type {number} */\r\n\t\t\tthis.left = arguments[0];//x\r\n\t\t\t/** @type {number} */\r\n\t\t\tthis.top = arguments[1];//y\r\n\t\t\t/** @type {number} */\r\n\t\t\tthis.width = arguments[2];//w\r\n\t\t\t/** @type {number} */\r\n\t\t\tthis.height = arguments[3];//h\r\n\t\t}\r\n\t\telse if (arguments.length == 2) {\r\n\t\t\t/** @type {number} */\r\n\t\t\tthis.left = arguments[0].x;\r\n\t\t\t/** @type {number} */\r\n\t\t\tthis.top = arguments[0].y;\r\n\t\t\t/** @type {number} */\r\n\t\t\tthis.width = arguments[1].x;\r\n\t\t\t/** @type {number} */\r\n\t\t\tthis.height = arguments[1].y;\r\n\t\t}\r\n\t\telse if (arguments[0] instanceof Rectangle) {\r\n\t\t\tconst r = arguments[0];\r\n\t\t\t/** @type {number} */\r\n\t\t\tthis.left = r.left;\r\n\t\t\t/** @type {number} */\r\n\t\t\tthis.top = r.top;\r\n\t\t\t/** @type {number} */\r\n\t\t\tthis.width = r.width;\r\n\t\t\t/** @type {number} */\r\n\t\t\tthis.height = r.height;\r\n\t\t}\r\n\t\telse {\r\n\t\t\t/** @type {number} */\r\n\t\t\tthis.left = 0;\r\n\t\t\t/** @type {number} */\r\n\t\t\tthis.top = 0;\r\n\t\t\t/** @type {number} */\r\n\t\t\tthis.width = 0;\r\n\t\t\t/** @type {number} */\r\n\t\t\tthis.height = 0;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * @param {Rectangle} other\r\n\t */\r\n\tcopy(other) {\r\n\t\tthis.left = other.left;\r\n\t\tthis.top = other.top;\r\n\t\tthis.width = other.width;\r\n\t\tthis.height = other.height;\r\n\t}\r\n\t\r\n\tclone() {\r\n\t\treturn new Rectangle(this);\r\n\t}\r\n\r\n\tget x() { return this.left; }\r\n\tset x(value) { this.left = value; }\r\n\r\n\tget y() { return this.top; }\r\n\tset y(value) { this.top = value; }\r\n\r\n\tget right() { return this.left + this.width; }\r\n\tset right(value) { this.width = value - this.left; }\r\n\r\n\tget bottom() { return this.top + this.height; }\r\n\tset bottom(value) { this.height = value - this.top; }\r\n\r\n\tget size() {\r\n\t\treturn new Vec2(this.width, this.height);\r\n\t}\r\n\tset size(value) {\r\n\t\tthis.width = value.width || value.x;\r\n\t\tthis.height = value.height || value.y;\r\n\t}\r\n\r\n\tget center() {\r\n\t\treturn new Vec2(this.left + this.width * 0.5, this.top + this.height * 2 / 3);\r\n\t}\r\n\tset center(value) {\r\n\t\tlet w2 = this.width * 0.5;\r\n\t\tlet h23 = this.height * 2 / 3;\r\n\r\n\t\tthis.left = value.x - w2;\r\n\t\tthis.top = value.y - h23;\r\n\t}\r\n\tsetCenter(cx, cy) {\r\n\t\tlet w2 = this.width * 0.5;\r\n\t\tlet h23 = this.height * 2 / 3;\r\n\r\n\t\tthis.left = cx - w2;\r\n\t\tthis.top = cy - h23;\r\n\t}\r\n\t\r\n\tcollide(other) {\r\n\t\treturn (this.left < other.right && this.right > other.left && this.top < other.bottom && this.bottom > other.top);\r\n\t}\r\n\t\r\n\tcollide4f(left, right, top, bottom) {\r\n\t\treturn (this.left < right && this.right > left && this.top < bottom && this.bottom > top);\r\n\t}\r\n\tcollide4f2(x, y, hwidth, hheight) {\r\n\t\tconst left = x - hwidth;\r\n\t\tconst top = y - hheight;\r\n\t\tconst right = x + hwidth;\r\n\t\tconst bottom = y + hheight;\r\n\t\treturn (this.left < right && this.right > left && this.top < bottom && this.bottom > top);\r\n\t}\r\n\tcollide2f2x(x, hwidth) {\r\n\t\tconst left = x - hwidth;\r\n\t\tconst right = x + hwidth;\r\n\t\treturn (this.left < right && this.right > left);\r\n\t}\r\n\tcollide2f2y(y, hheight) {\r\n\t\tconst top = y - hheight;\r\n\t\tconst bottom = y + hheight;\r\n\t\treturn (this.top < bottom && this.bottom > top);\r\n\t}\r\n\r\n\t/**\r\n\t * @param {number} left\r\n\t * @param {number} top\r\n\t * @param {number} right\r\n\t * @param {number} bottom\r\n\t */\r\n\tparse(left, top, right, bottom) {\r\n\t\tthis.left = left;\r\n\t\tthis.top = top;\r\n\t\tthis.right = right;\r\n\t\tthis.bottom = bottom;\r\n\t}\r\n\r\n\t/**\r\n\t * @param {number} left\r\n\t * @param {number} top\r\n\t * @param {number} right\r\n\t * @param {number} bottom\r\n\t */\r\n\tstatic parse(left, top, right, bottom) {\r\n\t\treturn new Rectangle(left, top, right - left, bottom - top);\r\n\t}\r\n}\r\n\r\nclass Randomizer {\r\n\tstatic nextInt(r) {\r\n\t\treturn Math.trunc(Math.random() * 100 % r);\r\n\t}\r\n\tstatic randInt(min, max) {\r\n\t\treturn Math.trunc(min + Math.random() * 100 % (max - min + 1));\r\n\t}\r\n\tstatic nextBoolean() {\r\n\t\treturn !(Math.trunc(Math.random() * 100) & 1);\r\n\t}\r\n}\r\n\r\nfunction clamp(value, min, max) {\r\n\treturn Math.max(min, Math.min(value, max));\r\n}\r\n\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZ2FtZS9tYXRoLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL2dhbWUvbWF0aC5qcz9hYzI0Il0sInNvdXJjZXNDb250ZW50IjpbIu+7v1xyXG5leHBvcnQgY2xhc3MgVmVjMiB7XHJcblx0LyoqXHJcblx0ICogQHBhcmFtIHtudW1iZXJ9IHhcclxuXHQgKiBAcGFyYW0ge251bWJlcn0geVxyXG5cdCAqL1xyXG5cdGNvbnN0cnVjdG9yKHgsIHkpIHtcclxuXHRcdGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xyXG5cdFx0XHR0aGlzLnggPSB4O1xyXG5cdFx0XHR0aGlzLnkgPSB5O1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PSAxICYmIHggIT0gbnVsbCkge1xyXG5cdFx0XHR0aGlzLnggPSB4LnggfCAwO1xyXG5cdFx0XHR0aGlzLnkgPSB4LnkgfCAwO1xyXG5cdFx0fVxyXG5cdFx0ZWxzZSB7XHJcblx0XHRcdHRoaXMueCA9IDA7XHJcblx0XHRcdHRoaXMueSA9IDA7XHJcblx0XHR9XHJcblx0fVxyXG5cdHN0YXRpYyBnZXQoKSB7XHJcblx0XHRyZXR1cm4gbmV3IFZlYzIoLi4uYXJndW1lbnRzKTtcclxuXHR9XHJcblx0c3RhdGljIGdldCBlbXB0eSgpIHtcclxuXHRcdHJldHVybiBuZXcgVmVjMigwLCAwKTtcclxuXHR9XHJcblx0LyoqXHJcblx0ICogQHJldHVybnMge1ZlYzJ9XHJcblx0ICovXHJcblx0Y2xvbmUoKSB7XHJcblx0XHRyZXR1cm4gbmV3IHRoaXMuY29uc3RydWN0b3IodGhpcy54LCB0aGlzLnkpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQHBhcmFtIHsuLi5WZWMyfSB2MlxyXG5cdCAqIEByZXR1cm5zIHtWZWMyfVxyXG5cdCAqL1xyXG5cdGFkZCh2Mikge1xyXG5cdFx0bGV0IHggPSB0aGlzLngsIHkgPSB0aGlzLnk7XHJcblx0XHRmb3IgKGxldCB2IG9mIGFyZ3VtZW50cykge1xyXG5cdFx0XHRpZiAodiA9PSBudWxsKVxyXG5cdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHR4ID0geCArIHYueDtcclxuXHRcdFx0eSA9IHkgKyB2Lnk7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gbmV3IFZlYzIoeCwgeSk7XHJcblx0fVxyXG5cdC8qKlxyXG5cdCAqIEBwYXJhbSB7Li4uVmVjMn0gdjJcclxuXHQgKiBAcmV0dXJucyB7VmVjMn1cclxuXHQgKi9cclxuXHRzdWIodjIpIHtcclxuXHRcdGxldCB4ID0gdGhpcy54LCB5ID0gdGhpcy55O1xyXG5cdFx0Zm9yIChsZXQgdiBvZiBhcmd1bWVudHMpIHtcclxuXHRcdFx0aWYgKHYgPT0gbnVsbClcclxuXHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0eCA9IHggLSB2Lng7XHJcblx0XHRcdHkgPSB5IC0gdi55O1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIG5ldyBWZWMyKHgsIHkpO1xyXG5cdH1cclxuXHJcblx0LyoqIEBwYXJhbSB7VmVjMn0gdiAqL1xyXG5cdHBsdXModikge1xyXG5cdFx0cmV0dXJuIG5ldyBWZWMyKHRoaXMueCArIHYueCwgdGhpcy55ICsgdi55KTtcclxuXHR9XHJcblx0LyoqIEBwYXJhbSB7VmVjMn0gdiAqL1xyXG5cdG1pbnVzKHYpIHtcclxuXHRcdHJldHVybiBuZXcgVmVjMih0aGlzLnggLSB2LngsIHRoaXMueSAtIHYueSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBAcGFyYW0ge251bWJlcn0geFxyXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSB5XHJcblx0ICovXHJcblx0cGx1czIoeCwgeSkge1xyXG5cdFx0cmV0dXJuIG5ldyBWZWMyKHRoaXMueCArIHgsIHRoaXMueSArIHkpO1xyXG5cdH1cclxuXHQvKipcclxuXHQgKiBAcGFyYW0ge251bWJlcn0geFxyXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSB5XHJcblx0ICovXHJcblx0bWludXMyKHgsIHkpIHtcclxuXHRcdHJldHVybiBuZXcgVmVjMih0aGlzLnggLSB4LCB0aGlzLnkgLSB5KTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBmbG9hdFZhclxyXG5cdCAqL1xyXG5cdG11bChmbG9hdFZhcikge1xyXG5cdFx0cmV0dXJuIG5ldyBWZWMyKHRoaXMueCAqIGZsb2F0VmFyLCB0aGlzLnkgKiBmbG9hdFZhcik7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBAcGFyYW0ge251bWJlcn0gc1xyXG5cdCAqL1xyXG5cdHNjYWxlKHMpIHtcclxuXHRcdHJldHVybiBuZXcgVmVjMih0aGlzLnggKiBzLCB0aGlzLnkgKiBzKTtcclxuXHR9XHJcblxyXG5cdHJvdGF0ZShhbmcpIHtcclxuXHRcdGxldCB4ID0gTWF0aC5jb3MoYW5nKSAqIHRoaXMueCAtIE1hdGguc2luKGFuZykgKiB0aGlzLnk7XHJcblx0XHRsZXQgeSA9IE1hdGguc2luKGFuZykgKiB0aGlzLnggKyBNYXRoLmNvcyhhbmcpICogdGhpcy55O1xyXG5cdFx0cmV0dXJuIG5ldyBWZWMyKHgsIHkpO1xyXG5cdH1cclxuXHJcblx0bm9ybWFsaXplKCkge1xyXG5cdFx0bGV0IHIgPSBNYXRoLnNxcnQodGhpcy54ICogdGhpcy54ICsgdGhpcy55ICogdGhpcy55KTtcclxuXHRcdHJldHVybiBuZXcgVmVjMih0aGlzLnggLyByLCB0aGlzLnkgLyByKTtcclxuXHR9XHJcblxyXG5cdGxlbmd0aCgpIHtcclxuXHRcdHJldHVybiBNYXRoLnNxcnQoeCAqKiAyICsgeSAqKiAyKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEBwYXJhbSB7VmVjMn0gcDJcclxuXHQgKi9cclxuXHRkaXN0YW5jZV9zcShwMikge1xyXG5cdFx0bGV0IGx4ID0gdGhpcy54IC0gcDIueDtcclxuXHRcdGxldCBseSA9IHRoaXMueSAtIHAyLnk7XHJcblx0XHRyZXR1cm4gbHggKiBseCArIGx5ICogbHk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBAcGFyYW0ge1ZlYzJ9IHAyXHJcblx0ICovXHJcblx0ZGlzdGFuY2UocDIpIHtcclxuXHRcdGxldCBseCA9IHRoaXMueCAtIHAyLng7XHJcblx0XHRsZXQgbHkgPSB0aGlzLnkgLSBwMi55O1xyXG5cdFx0cmV0dXJuIE1hdGguc3FydChseCAqIGx4ICsgbHkgKiBseSk7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgUmVjdGFuZ2xlIHtcclxuXHQvKipcclxuXHQgKiBSZWN0YW5nbGUobGVmdDogbnVtYmVyLCB0b3A6IG51bWJlciwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIpXHJcblx0ICogUmVjdGFuZ2xlKHBvc2l0aW9uOiBWZWMyLCBzaXplOiBWZWMyKVxyXG5cdCAqIFJlY3RhbmdsZShyZWN0OiBSZWN0YW5nbGUpXHJcblx0ICogUmVjdGFuZ2xlKCkgPT4gUmVjdGFuZ2xlKDAsIDAsIDAsIDApXHJcblx0ICovXHJcblx0Y29uc3RydWN0b3IoKSB7XHJcblx0XHRpZiAoYXJndW1lbnRzLmxlbmd0aCA9PSA0KSB7XHJcblx0XHRcdC8qKiBAdHlwZSB7bnVtYmVyfSAqL1xyXG5cdFx0XHR0aGlzLmxlZnQgPSBhcmd1bWVudHNbMF07Ly94XHJcblx0XHRcdC8qKiBAdHlwZSB7bnVtYmVyfSAqL1xyXG5cdFx0XHR0aGlzLnRvcCA9IGFyZ3VtZW50c1sxXTsvL3lcclxuXHRcdFx0LyoqIEB0eXBlIHtudW1iZXJ9ICovXHJcblx0XHRcdHRoaXMud2lkdGggPSBhcmd1bWVudHNbMl07Ly93XHJcblx0XHRcdC8qKiBAdHlwZSB7bnVtYmVyfSAqL1xyXG5cdFx0XHR0aGlzLmhlaWdodCA9IGFyZ3VtZW50c1szXTsvL2hcclxuXHRcdH1cclxuXHRcdGVsc2UgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMikge1xyXG5cdFx0XHQvKiogQHR5cGUge251bWJlcn0gKi9cclxuXHRcdFx0dGhpcy5sZWZ0ID0gYXJndW1lbnRzWzBdLng7XHJcblx0XHRcdC8qKiBAdHlwZSB7bnVtYmVyfSAqL1xyXG5cdFx0XHR0aGlzLnRvcCA9IGFyZ3VtZW50c1swXS55O1xyXG5cdFx0XHQvKiogQHR5cGUge251bWJlcn0gKi9cclxuXHRcdFx0dGhpcy53aWR0aCA9IGFyZ3VtZW50c1sxXS54O1xyXG5cdFx0XHQvKiogQHR5cGUge251bWJlcn0gKi9cclxuXHRcdFx0dGhpcy5oZWlnaHQgPSBhcmd1bWVudHNbMV0ueTtcclxuXHRcdH1cclxuXHRcdGVsc2UgaWYgKGFyZ3VtZW50c1swXSBpbnN0YW5jZW9mIFJlY3RhbmdsZSkge1xyXG5cdFx0XHRjb25zdCByID0gYXJndW1lbnRzWzBdO1xyXG5cdFx0XHQvKiogQHR5cGUge251bWJlcn0gKi9cclxuXHRcdFx0dGhpcy5sZWZ0ID0gci5sZWZ0O1xyXG5cdFx0XHQvKiogQHR5cGUge251bWJlcn0gKi9cclxuXHRcdFx0dGhpcy50b3AgPSByLnRvcDtcclxuXHRcdFx0LyoqIEB0eXBlIHtudW1iZXJ9ICovXHJcblx0XHRcdHRoaXMud2lkdGggPSByLndpZHRoO1xyXG5cdFx0XHQvKiogQHR5cGUge251bWJlcn0gKi9cclxuXHRcdFx0dGhpcy5oZWlnaHQgPSByLmhlaWdodDtcclxuXHRcdH1cclxuXHRcdGVsc2Uge1xyXG5cdFx0XHQvKiogQHR5cGUge251bWJlcn0gKi9cclxuXHRcdFx0dGhpcy5sZWZ0ID0gMDtcclxuXHRcdFx0LyoqIEB0eXBlIHtudW1iZXJ9ICovXHJcblx0XHRcdHRoaXMudG9wID0gMDtcclxuXHRcdFx0LyoqIEB0eXBlIHtudW1iZXJ9ICovXHJcblx0XHRcdHRoaXMud2lkdGggPSAwO1xyXG5cdFx0XHQvKiogQHR5cGUge251bWJlcn0gKi9cclxuXHRcdFx0dGhpcy5oZWlnaHQgPSAwO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQHBhcmFtIHtSZWN0YW5nbGV9IG90aGVyXHJcblx0ICovXHJcblx0Y29weShvdGhlcikge1xyXG5cdFx0dGhpcy5sZWZ0ID0gb3RoZXIubGVmdDtcclxuXHRcdHRoaXMudG9wID0gb3RoZXIudG9wO1xyXG5cdFx0dGhpcy53aWR0aCA9IG90aGVyLndpZHRoO1xyXG5cdFx0dGhpcy5oZWlnaHQgPSBvdGhlci5oZWlnaHQ7XHJcblx0fVxyXG5cdFxyXG5cdGNsb25lKCkge1xyXG5cdFx0cmV0dXJuIG5ldyBSZWN0YW5nbGUodGhpcyk7XHJcblx0fVxyXG5cclxuXHRnZXQgeCgpIHsgcmV0dXJuIHRoaXMubGVmdDsgfVxyXG5cdHNldCB4KHZhbHVlKSB7IHRoaXMubGVmdCA9IHZhbHVlOyB9XHJcblxyXG5cdGdldCB5KCkgeyByZXR1cm4gdGhpcy50b3A7IH1cclxuXHRzZXQgeSh2YWx1ZSkgeyB0aGlzLnRvcCA9IHZhbHVlOyB9XHJcblxyXG5cdGdldCByaWdodCgpIHsgcmV0dXJuIHRoaXMubGVmdCArIHRoaXMud2lkdGg7IH1cclxuXHRzZXQgcmlnaHQodmFsdWUpIHsgdGhpcy53aWR0aCA9IHZhbHVlIC0gdGhpcy5sZWZ0OyB9XHJcblxyXG5cdGdldCBib3R0b20oKSB7IHJldHVybiB0aGlzLnRvcCArIHRoaXMuaGVpZ2h0OyB9XHJcblx0c2V0IGJvdHRvbSh2YWx1ZSkgeyB0aGlzLmhlaWdodCA9IHZhbHVlIC0gdGhpcy50b3A7IH1cclxuXHJcblx0Z2V0IHNpemUoKSB7XHJcblx0XHRyZXR1cm4gbmV3IFZlYzIodGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xyXG5cdH1cclxuXHRzZXQgc2l6ZSh2YWx1ZSkge1xyXG5cdFx0dGhpcy53aWR0aCA9IHZhbHVlLndpZHRoIHx8IHZhbHVlLng7XHJcblx0XHR0aGlzLmhlaWdodCA9IHZhbHVlLmhlaWdodCB8fCB2YWx1ZS55O1xyXG5cdH1cclxuXHJcblx0Z2V0IGNlbnRlcigpIHtcclxuXHRcdHJldHVybiBuZXcgVmVjMih0aGlzLmxlZnQgKyB0aGlzLndpZHRoICogMC41LCB0aGlzLnRvcCArIHRoaXMuaGVpZ2h0ICogMiAvIDMpO1xyXG5cdH1cclxuXHRzZXQgY2VudGVyKHZhbHVlKSB7XHJcblx0XHRsZXQgdzIgPSB0aGlzLndpZHRoICogMC41O1xyXG5cdFx0bGV0IGgyMyA9IHRoaXMuaGVpZ2h0ICogMiAvIDM7XHJcblxyXG5cdFx0dGhpcy5sZWZ0ID0gdmFsdWUueCAtIHcyO1xyXG5cdFx0dGhpcy50b3AgPSB2YWx1ZS55IC0gaDIzO1xyXG5cdH1cclxuXHRzZXRDZW50ZXIoY3gsIGN5KSB7XHJcblx0XHRsZXQgdzIgPSB0aGlzLndpZHRoICogMC41O1xyXG5cdFx0bGV0IGgyMyA9IHRoaXMuaGVpZ2h0ICogMiAvIDM7XHJcblxyXG5cdFx0dGhpcy5sZWZ0ID0gY3ggLSB3MjtcclxuXHRcdHRoaXMudG9wID0gY3kgLSBoMjM7XHJcblx0fVxyXG5cdFxyXG5cdGNvbGxpZGUob3RoZXIpIHtcclxuXHRcdHJldHVybiAodGhpcy5sZWZ0IDwgb3RoZXIucmlnaHQgJiYgdGhpcy5yaWdodCA+IG90aGVyLmxlZnQgJiYgdGhpcy50b3AgPCBvdGhlci5ib3R0b20gJiYgdGhpcy5ib3R0b20gPiBvdGhlci50b3ApO1xyXG5cdH1cclxuXHRcclxuXHRjb2xsaWRlNGYobGVmdCwgcmlnaHQsIHRvcCwgYm90dG9tKSB7XHJcblx0XHRyZXR1cm4gKHRoaXMubGVmdCA8IHJpZ2h0ICYmIHRoaXMucmlnaHQgPiBsZWZ0ICYmIHRoaXMudG9wIDwgYm90dG9tICYmIHRoaXMuYm90dG9tID4gdG9wKTtcclxuXHR9XHJcblx0Y29sbGlkZTRmMih4LCB5LCBod2lkdGgsIGhoZWlnaHQpIHtcclxuXHRcdGNvbnN0IGxlZnQgPSB4IC0gaHdpZHRoO1xyXG5cdFx0Y29uc3QgdG9wID0geSAtIGhoZWlnaHQ7XHJcblx0XHRjb25zdCByaWdodCA9IHggKyBod2lkdGg7XHJcblx0XHRjb25zdCBib3R0b20gPSB5ICsgaGhlaWdodDtcclxuXHRcdHJldHVybiAodGhpcy5sZWZ0IDwgcmlnaHQgJiYgdGhpcy5yaWdodCA+IGxlZnQgJiYgdGhpcy50b3AgPCBib3R0b20gJiYgdGhpcy5ib3R0b20gPiB0b3ApO1xyXG5cdH1cclxuXHRjb2xsaWRlMmYyeCh4LCBod2lkdGgpIHtcclxuXHRcdGNvbnN0IGxlZnQgPSB4IC0gaHdpZHRoO1xyXG5cdFx0Y29uc3QgcmlnaHQgPSB4ICsgaHdpZHRoO1xyXG5cdFx0cmV0dXJuICh0aGlzLmxlZnQgPCByaWdodCAmJiB0aGlzLnJpZ2h0ID4gbGVmdCk7XHJcblx0fVxyXG5cdGNvbGxpZGUyZjJ5KHksIGhoZWlnaHQpIHtcclxuXHRcdGNvbnN0IHRvcCA9IHkgLSBoaGVpZ2h0O1xyXG5cdFx0Y29uc3QgYm90dG9tID0geSArIGhoZWlnaHQ7XHJcblx0XHRyZXR1cm4gKHRoaXMudG9wIDwgYm90dG9tICYmIHRoaXMuYm90dG9tID4gdG9wKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBsZWZ0XHJcblx0ICogQHBhcmFtIHtudW1iZXJ9IHRvcFxyXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSByaWdodFxyXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBib3R0b21cclxuXHQgKi9cclxuXHRwYXJzZShsZWZ0LCB0b3AsIHJpZ2h0LCBib3R0b20pIHtcclxuXHRcdHRoaXMubGVmdCA9IGxlZnQ7XHJcblx0XHR0aGlzLnRvcCA9IHRvcDtcclxuXHRcdHRoaXMucmlnaHQgPSByaWdodDtcclxuXHRcdHRoaXMuYm90dG9tID0gYm90dG9tO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQHBhcmFtIHtudW1iZXJ9IGxlZnRcclxuXHQgKiBAcGFyYW0ge251bWJlcn0gdG9wXHJcblx0ICogQHBhcmFtIHtudW1iZXJ9IHJpZ2h0XHJcblx0ICogQHBhcmFtIHtudW1iZXJ9IGJvdHRvbVxyXG5cdCAqL1xyXG5cdHN0YXRpYyBwYXJzZShsZWZ0LCB0b3AsIHJpZ2h0LCBib3R0b20pIHtcclxuXHRcdHJldHVybiBuZXcgUmVjdGFuZ2xlKGxlZnQsIHRvcCwgcmlnaHQgLSBsZWZ0LCBib3R0b20gLSB0b3ApO1xyXG5cdH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFJhbmRvbWl6ZXIge1xyXG5cdHN0YXRpYyBuZXh0SW50KHIpIHtcclxuXHRcdHJldHVybiBNYXRoLnRydW5jKE1hdGgucmFuZG9tKCkgKiAxMDAgJSByKTtcclxuXHR9XHJcblx0c3RhdGljIHJhbmRJbnQobWluLCBtYXgpIHtcclxuXHRcdHJldHVybiBNYXRoLnRydW5jKG1pbiArIE1hdGgucmFuZG9tKCkgKiAxMDAgJSAobWF4IC0gbWluICsgMSkpO1xyXG5cdH1cclxuXHRzdGF0aWMgbmV4dEJvb2xlYW4oKSB7XHJcblx0XHRyZXR1cm4gIShNYXRoLnRydW5jKE1hdGgucmFuZG9tKCkgKiAxMDApICYgMSk7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gY2xhbXAodmFsdWUsIG1pbiwgbWF4KSB7XHJcblx0cmV0dXJuIE1hdGgubWF4KG1pbiwgTWF0aC5taW4odmFsdWUsIG1heCkpO1xyXG59XHJcblxyXG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOyIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/game/math.js\n");

/***/ })

}]);