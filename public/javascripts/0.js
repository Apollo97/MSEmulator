(window.webpackJsonp=window.webpackJsonp||[]).push([[0,12,13],{332:function(t,e,r){"use strict";r.r(e),r.d(e,"ColorRGB",function(){return a}),r.d(e,"ColorHSV",function(){return n}),r.d(e,"_ImageFilter",function(){return o}),r.d(e,"ImageFilter",function(){return l}),r.d(e,"IGraph",function(){return c}),r.d(e,"IRenderer",function(){return d}),r.d(e,"ImageDataHelper",function(){return u});var i=r(333);class a{constructor(t=0,e=0,r=0){this.r=t,this.g=e,this.b=r}clone(){return new this.constructor(this.r,this.g,this.b)}selfAdd(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}selfSub(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}selfScale(t){return this.r*=t,this.g*=t,this.b*=t,this}static add(t,e){return new a(t.r+e.r,t.g+e.g,t.b+e.b)}static sub(t,e){return new a(t.r-e.r,t.g-e.g,t.b-e.b)}static scale(t,e){return new a(t.r*e,t.g*e,t.b*e)}toString(){return"rgb("+Math.trunc(this.r)+","+Math.trunc(this.g)+","+Math.trunc(this.b)+")"}static fromInt24(t){return new a(t>>16&255,t>>8&255,255&t)}toHSV(){let t,e,r=this.r/=255,i=this.g/=255,s=this.b/=255,h=Math.max(r,i,s),a=Math.min(r,i,s),o=h,l=h-a;if(e=0==h?0:l/h,h==a)t=0;else{switch(h){case r:t=(i-s)/l+(i<s?6:0);break;case i:t=(s-r)/l+2;break;case s:t=(r-i)/l+4}t/=6}return new n(t,e,o)}fromHsv(t,e,r){let i,s,h,a=Math.floor(6*t),n=6*t-a,o=r*(1-e),l=r*(1-n*e),c=r*(1-(1-n)*e);switch(a%6){case 0:i=r,s=c,h=o;break;case 1:i=l,s=r,h=o;break;case 2:i=o,s=r,h=c;break;case 3:i=o,s=l,h=r;break;case 4:i=c,s=o,h=r;break;case 5:i=r,s=o,h=l}this.r=255*i,this.g=255*s,this.b=255*h}static fromHsv(t,e,r){let i,s,h,n=Math.floor(6*t),o=6*t-n,l=r*(1-e),c=r*(1-o*e),d=r*(1-(1-o)*e);switch(n%6){case 0:i=r,s=d,h=l;break;case 1:i=c,s=r,h=l;break;case 2:i=l,s=r,h=d;break;case 3:i=l,s=c,h=r;break;case 4:i=d,s=l,h=r;break;case 5:i=r,s=l,h=c}return new a(255*i,255*s,255*h)}toFilter(){let{h:t,s:e,v:r}=this.toHSV();return`hue-rotate(${t*Math.PI*2}rad) saturate(${e}) brightness(${r})`}toFilterLimit(){return`hue-rotate(${360*h}deg) saturate(${Object(i.clamp)(Math.trunc(100*s),0,100)}%) brightness(${Object(i.clamp)(Math.trunc(100*v),0,100)}%)`}toFilter_HueRotate(){const{h:t,s:e,v:r}=this;return`hue-rotate(${360*t}deg)`}}class n{constructor(t=0,e=0,r=0){this.h=t,this.s=e,this.v=r}clone(){return new this.constructor(this.h,this.s,this.v)}selfAdd(t){return this.h+=t.h,this.s+=t.s,this.v+=t.v,this}selfSub(t){return this.h+=t.h,this.s+=t.s,this.v+=t.v,this}selfScale(t){return this.h*=t,this.s*=t,this.v*=t,this}static add(t,e){return new n(t.s+e.s,t.s+e.s,t.v+e.v)}static sub(t,e){return new n(t.s-e.s,t.s-e.s,t.v-e.v)}static scale(t,e){return new n(t.h*e,t.s*e,t.v*e)}toString(){const{h:t,s:e,v:r}=this;return"hsv("+t+","+e+","+r+")"}toFilter(){const{h:t,s:e,v:r}=this;return`hue-rotate(${t*Math.PI*2}rad) saturate(${e}) brightness(${r})`}toFilterLimit(){return`hue-rotate(${360*h}deg) saturate(${Object(i.clamp)(Math.trunc(100*s),0,100)}%) brightness(${Object(i.clamp)(Math.trunc(100*v),0,100)}%)`}toFilter_HueRotate(){const{h:t,s:e,v:r}=this;return`hue-rotate(${360*t}deg)`}}class o{constructor(t=0,e=100,r=100,i=100){this._hue=t,this._sat=e,this._bri=r,this._contrast=i}get hue(){return this._hue}set hue(t){this._hue=t%360,this._hue%360==0&&100==this._sat&&100==this._bri&&100==this._contrast&&this.reset()}get sat(){return this._sat}set sat(t){this._sat=Math.max(0,t),this._hue%360==0&&100==this._sat&&100==this._bri&&100==this._contrast&&this.reset()}get bri(){return this._bri}set bri(t){this._bri=Math.max(0,t),this._hue%360==0&&100==this._sat&&100==this._bri&&100==this._contrast&&this.reset()}get contrast(){return this._contrast}set contrast(t){this._contrast=Math.max(0,t),this._hue%360==0&&100==this._sat&&100==this._bri&&100==this._contrast&&this.reset()}toRgb(){return a.fromHsv(this._hue/360,this._sat/100,this._bri/100)}toString(){return`hue-rotate(${this._hue}deg) saturate(${this._sat}%) brightness(${this._bri}%) contrast(${this._contrast}%)`}}class l extends o{constructor(t=0,e=100,r=100,i=100){super(t,e,r,i),arguments.length&&(this.__proto__=o.prototype)}get hue(){return 0}set hue(t){this._hue=t%360,this.__proto__=o.prototype}get sat(){return 100}set sat(t){this._sat=Math.max(0,t),this.__proto__=o.prototype}get bri(){return 100}set bri(t){this._bri=Math.max(0,t),this.__proto__=o.prototype}get contrast(){return 100}set contrast(t){this._contrast=Math.max(0,t),this.__proto__=o.prototype}toRgb(){return new a(255,255,255)}toString(){return"none"}get isEmpty(){return!0}}o.prototype.reset=function(){this._hue=0,this._sat=100,this._bri=100,this._contrast=100,this.__proto__=l.prototype},o.prototype.set=function(t,e,r,i){t%360==0&&100==e&&100==r&&100==i?this.reset():(this.hue=t,this.sat=e,this.bri=r,this._contrast=i)};class c{constructor(t,e){let r,i;this.$promise=void 0,this._vbo=void 0,this.x=0,this.y=0,e?(e.width>0&&(r=Number(e.width)),e.height>0&&(i=Number(e.height))):(r=0,i=0),this.width=r,this.height=i,Object.defineProperty(this,"width",{configurable:!0,enumerable:!0,get:function(){return this._isLoaded_or_doload(),r},set:function(t){}}),Object.defineProperty(this,"height",{configurable:!0,enumerable:!0,get:function(){return this._isLoaded_or_doload(),i},set:function(t){}}),Object.defineProperty(this,"texture",{configurable:!0,enumerable:!0,get:function(){return this.__isLoading_or_doload(),null},set:function(t){}}),this.isLoaded=this._isLoaded_or_doload,this._url="",t&&(this.src=t)}_dispose(){this._isLoaded()&&(this._gl&&(alert("gl.deleteTexture(this.texture)"),this._gl.deleteTexture(this.texture)),this.texture=null)}draw(){throw new Error("Not Implement")}draw2(t,e){throw new Error("Not Implement")}get _engine(){throw new Error("Not Implement")}get _gl(){throw new Error("Not Implement")}get _ctx(){throw new Error("Not Implement")}get z(){return 0}set src(t){this._dispose(),this._url=t}_isLoaded(){return null!=this.texture}_isLoaded_or_doload(){return!!this.texture||(this.__loadTexture(),!1)}__isLoading_or_doload(){return null!==this.$promise||(this.__loadTexture(),!1)}__loadTexture(){if(this.$promise)return;if(""==this._url)return!1;let t=new Image;this.$promise=new Promise((e,r)=>{const i=this._engine;t.addEventListener("load",t=>{!t.target.naturalWidth||t.target.naturalHeight,this.isLoaded=this._isLoaded,delete this.width,this.width=t.target.naturalWidth,delete this.height,this.height=t.target.naturalHeight,delete this.texture,this.texture=i._handleImageLoaded(t.target,this),delete this.$promise,e(this)},!1),t.addEventListener("error",r=>{this.isLoaded=this._isLoaded,this._graph_rect&&(delete this.texture,this.texture=this._graph_rect),console.error("404: "+t.src),e(this)},!1)}),c.$all_promise.push(this.$promise),t.src=$get.imageUrl(this._url)}static async waitAllLoaded(t){let e=c.$all_promise;console.log("image loaded: "+c.$all_promise.length),c.$all_promise=[],await Promise.all(e),t&&t()}}c.$all_promise=[];class d{constructor(){this._GraphType=null,this.ctx=null,this._globalAlpha=1,this._globalAlphaStack=[],this.screen_size=new i.Vec2(0,0)}init(t){throw new Error("Not implement")}get Graph(){throw new Error("Not implement")}$swapCanvas(t){throw new Error("Not implement")}get _canvas(){throw new Error("Not implement")}_handleImageLoaded(t,e){throw new Error("Not implement")}setRotationTranslationScale(t,e,r,i,s){throw new Error("Not implement")}setTransform(t,e,r,i,s,h){throw new Error("Not implement")}loadIdentity(){throw new Error("Not implement")}pushMatrix(){throw new Error("Not implement")}popMatrix(){throw new Error("Not implement")}translate(t,e){throw new Error("Not implement")}translate3d(t,e,r){throw alert("'translate3d' is deprecated"),new Error("'translate3d' is deprecated")}scale(t,e){throw new Error("Not implement")}scale3d(t,e,r){throw alert("'scale3d' is deprecated"),new Error("'scale3d' is deprecated")}rotate(t){throw new Error("Not implement")}get color(){throw new Error("Not implement")}set color(t){throw new Error("Not implement")}Color4fv(t){throw alert("'Color4fv' is deprecated"),new Error("'Color4fv' is deprecated")}get globalAlpha(){throw new Error("Not implement")}set globalAlpha(t){throw new Error("Not implement")}pushGlobalAlpha(){throw new Error("Not implement")}popGlobalAlpha(t){throw new Error("Not implement")}clearDrawScreen(){throw new Error("Not implement")}drawGraph(t){throw new Error("Not implement")}drawGraph2(t,e,r,i){throw new Error("Not implement")}drawRect(t,e,r,i){throw 4!=arguments.length&&console.error("drawRect(x, y, w, h) need 4 param"),new Error("Not implement")}drawColoredGraph(t,e,r,i){throw new Error("Not implement")}}class u{constructor(){this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d")}resize(t,e){canvas.width=t,canvas.height=e}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.height)}imageToImagedata(t){const e=this.canvas,r=this.ctx;return e.width=t.width,e.height=t.height,r.drawImage(t,0,0),r.getImageData(0,0,t.width,t.height)}imagedataToDataURL(t){const e=this.canvas,r=this.ctx;return e.width=t.width,e.height=t.height,r.putImageData(t,0,0),e.toDataURL()}imagedataToImage(t){const e=this.canvas,r=this.ctx;e.width=t.width,e.height=t.height,r.putImageData(t,0,0);let i=new Image;return i.src=e.toDataURL(),i}}},333:function(t,e,r){"use strict";r.r(e),r.d(e,"Vec2",function(){return i}),r.d(e,"Rectangle",function(){return s}),r.d(e,"Randomizer",function(){return h}),r.d(e,"clamp",function(){return a});class i{constructor(t,e){arguments.length>1?(this.x=t,this.y=e):1==arguments.length&&null!=t?(this.x=0|t.x,this.y=0|t.y):(this.x=0,this.y=0)}static get(){return new i(...arguments)}static get empty(){return new i(0,0)}clone(){return new this.constructor(this.x,this.y)}add(t){let e=this.x,r=this.y;for(let t of arguments)null!=t&&(e+=t.x,r+=t.y);return new i(e,r)}sub(t){let e=this.x,r=this.y;for(let t of arguments)null!=t&&(e-=t.x,r-=t.y);return new i(e,r)}plus(t){return new i(this.x+t.x,this.y+t.y)}minus(t){return new i(this.x-t.x,this.y-t.y)}plus2(t,e){return new i(this.x+t,this.y+e)}minus2(t,e){return new i(this.x-t,this.y-e)}mul(t){return new i(this.x*t,this.y*t)}scale(t){return new i(this.x*t,this.y*t)}rotate(t){let e=Math.cos(t)*this.x-Math.sin(t)*this.y,r=Math.sin(t)*this.x+Math.cos(t)*this.y;return new i(e,r)}normalize(){let t=Math.sqrt(this.x*this.x+this.y*this.y);return new i(this.x/t,this.y/t)}length(){return Math.sqrt(x**2+y**2)}distance_sq(t){let e=this.x-t.x,r=this.y-t.y;return e*e+r*r}distance(t){let e=this.x-t.x,r=this.y-t.y;return Math.sqrt(e*e+r*r)}}class s{constructor(){if(4==arguments.length)this.left=arguments[0],this.top=arguments[1],this.width=arguments[2],this.height=arguments[3];else if(2==arguments.length)this.left=arguments[0].x,this.top=arguments[0].y,this.width=arguments[1].x,this.height=arguments[1].y;else if(arguments[0]instanceof s){const t=arguments[0];this.left=t.left,this.top=t.top,this.width=t.width,this.height=t.height}else this.left=0,this.top=0,this.width=0,this.height=0}copy(t){this.left=t.left,this.top=t.top,this.width=t.width,this.height=t.height}clone(){return new s(this)}get x(){return this.left}set x(t){this.left=t}get y(){return this.top}set y(t){this.top=t}get right(){return this.left+this.width}set right(t){this.width=t-this.left}get bottom(){return this.top+this.height}set bottom(t){this.height=t-this.top}get size(){return new i(this.width,this.height)}set size(t){this.width=t.width||t.x,this.height=t.height||t.y}get center(){return new i(this.left+.5*this.width,this.top+2*this.height/3)}set center(t){let e=.5*this.width,r=2*this.height/3;this.left=t.x-e,this.top=t.y-r}setCenter(t,e){let r=.5*this.width,i=2*this.height/3;this.left=t-r,this.top=e-i}collide(t){return this.left<t.right&&this.right>t.left&&this.top<t.bottom&&this.bottom>t.top}collide4f(t,e,r,i){return this.left<e&&this.right>t&&this.top<i&&this.bottom>r}collide4f2(t,e,r,i){const s=t-r,h=e-i,a=t+r,n=e+i;return this.left<a&&this.right>s&&this.top<n&&this.bottom>h}collide2f2x(t,e){const r=t-e,i=t+e;return this.left<i&&this.right>r}collide2f2y(t,e){const r=t-e,i=t+e;return this.top<i&&this.bottom>r}parse(t,e,r,i){this.left=t,this.top=e,this.right=r,this.bottom=i}static parse(t,e,r,i){return new s(t,e,r-t,i-e)}}class h{static nextInt(t){return Math.trunc(100*Math.random()%t)}static randInt(t,e){return Math.trunc(t+100*Math.random()%(e-t+1))}static nextBoolean(){return!(1&Math.trunc(100*Math.random()))}}function a(t,e,r){return Math.max(e,Math.min(t,r))}},335:function(t,e,r){"use strict";r.r(e);var i=r(494),s=(r(333),r(332));window._experimental_particle=!0;window.$mat2d=i.a,window.$mat4=i.b,window.$quat=i.c;r.d(e,"engine",function(){return h}),r.d(e,"Graph",function(){return a});const h=new class extends s.IRenderer{constructor(){super(),this.ctx=null,this._ctx2=null,this._canvas2=null,function(t){t._GraphType=class extends s.IGraph{get _engine(){return t}}}(this)}init(t){let e=document.getElementById(t),r=this._canvas2=document.getElementById(t+"2");function i(t,e,r){t.width=e,t.height=r}this.ctx=e.getContext("2d",{alpha:!0}),this._ctx2=r.getContext("2d",{alpha:!0}),this.ctx.imageSmoothingEnabled=!1,this._ctx2.imageSmoothingEnabled=!0,i(e,window.innerWidth,window.innerHeight),i(r,window.innerWidth,window.innerHeight),window.onresize=(t=>{const s=window.innerWidth,h=window.innerHeight;i(e,s,h),i(r,s,h),document.getElementById("screen_width").innerHTML=s,document.getElementById("screen_height").innerHTML=h,this.screen_size.x=s,this.screen_size.y=h}),window.onresize(),this._graph_rect=new this.Graph,this._graph_rect._url=$get.imageUrl("/1x1")}get Graph(){return this._GraphType}get _canvas(){return this.ctx.canvas}_handleImageLoaded(t,e){return t}$swapCanvas(t){t?(this.ctx.imageSmoothingEnabled=!1,this._ctx2.imageSmoothingEnabled=!0):(this.ctx.imageSmoothingEnabled=!1,this._ctx2.imageSmoothingEnabled=!1);const e=this._ctx2;this._ctx2=this.ctx,this.ctx=e}setTransform(t,e,r,i,s,h){this.ctx.setTransform(t,e,r,i,s,h)}loadIdentity(){this.ctx.setTransform(1,0,0,1,0,0)}pushMatrix(){this.ctx.save()}popMatrix(){this.ctx.restore()}translate(t,e){this.ctx.translate(t,e)}scale(t,e){this.ctx.scale(t,e)}rotate(t){this.ctx.rotate(t)}set color(t){const e=Math.trunc(255*t[0]),r=Math.trunc(255*t[1]),i=Math.trunc(255*t[2]),s=t[3].toFixed(3);this.ctx.fillStyle=`rgba(${e},${r},${i},${s})`,this.ctx.strokeStyle=this.ctx.fillStyle}get globalAlpha(){return this._globalAlpha}set globalAlpha(t){this._globalAlpha!=t&&(this._globalAlpha=t,this.ctx.globalAlpha=t)}pushGlobalAlpha(){this._globalAlphaStack.push(this.ctx.globalAlpha)}popGlobalAlpha(t){this.ctx.globalAlpha=this._globalAlphaStack.pop()}beginScene(){}endScene(){}clearDrawScreen(){const t=this.ctx.canvas;this.ctx.clearRect(0,0,t.width,t.height)}drawRect(t,e,r,i){let s=this.ctx;4==arguments.length&&(s.beginPath(),s.fillRect(t,e,r,i))}drawGraph(t){t.isLoaded()&&this.ctx.drawImage(t.texture,0,0)}drawGraph2(t,e,r,i){t.isLoaded()&&this.ctx.drawImage(t.texture,e,r)}_drawImage(t,e,r,i,s,h,a,n,o){t.isLoaded()&&this.ctx.drawImage(t.texture,e,r,i,s,h,a,n,o)}__drawMirrorImage(t,e,r=0,i=0,s=!1,h=!1){t.save(),t.setTransform(s?-1:1,0,0,h?-1:1,r+s?e.width:0,i+h?e.height:0),t.drawImage(e,0,0),t.restore()}_drawRotaGraph(t,e,r,i,s){this.translate(e,r),this.rotate(i),this.scale(s?-1:1,1),this.translate(-t.x,-t.y),this.drawGraph(t)}drawRotaGraph(t,e,r,i,s){this.pushMatrix(),this._drawRotaGraph(t,e,r,i,s),this.popMatrix()}_drawRotaClipGraph(t,e,r,i,s,h,a){const n=s.x,o=s.y,l=e-(a?-n+h.width:n),c=r-o,d=.5*h.width,u=.5*h.height;this.translate(l,c),this.translate(d,u),this.rotate(i),this.scale(a?-1:1,1),this.translate(-d,-u),this._drawImage(t,h.x,h.y,h.width,h.height,0,0,h.width,h.height)}drawRotaClipGraph(t,e,r,i,s,h,a){this.pushMatrix(),this._drawRotaClipGraph(t,e,r,i,s,h,a),this.popMatrix()}drawColoredGraph(t,e,r,i){if(t.isLoaded())if(_experimental_particle)this.ctx.filter=i.toFilter(),this.ctx.drawImage(t.texture,e-t.x,r-t.y),this.ctx.filter="none";else{const s=this._ctx2;s.globalCompositeOperation="copy",s.drawImage(t.texture,0,0),s.globalCompositeOperation="darken",s.fillStyle=i.toString(),s.beginPath(),s.rect(0,0,t.width,t.width),s.fill(),s.globalCompositeOperation="destination-atop",s.drawImage(t.texture,0,0),this.ctx.drawImage(this._canvas2,e-t.x,r-t.y)}}drawColoredGraph2(t,e,r,i,s,h){if(t.isLoaded()){const a=t.width,n=t.height,o=a*i,l=n*s;if(_experimental_particle)this.ctx.filter=h.toFilter(),this.ctx.drawImage(t.texture,0,0,a,n,e-t.x,r-t.y,o,l),this.ctx.filter="none";else{const i=this._ctx2;i.globalCompositeOperation="copy",i.drawImage(t.texture,0,0,o,o),i.globalCompositeOperation="darken",i.fillStyle=h.toString(),i.beginPath(),i.rect(0,0,o,o),i.fill(),i.globalCompositeOperation="destination-atop",i.drawImage(t.texture,0,0,o,o),this.ctx.drawImage(this._canvas2,0,0,o,l,e-t.x,r-t.y,o,l)}}}};window.$engine=h;const a=h.Graph;h.init("glcanvas"),SSAnim&&h.ctx&&SSAnim.SetRenderingContext(h.ctx)}}]);
//# sourceMappingURL=0.js.map