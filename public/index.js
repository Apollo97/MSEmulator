!function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/",i(i.s=428)}([function(t,e,i){"use strict";i.d(e,"E",function(){return s}),i.d(e,"D",function(){return r}),i.d(e,"F",function(){return o}),i.d(e,"a",function(){return a}),i.d(e,"n",function(){return l}),i.d(e,"m",function(){return c}),i.d(e,"e",function(){return u}),i.d(e,"x",function(){return h}),i.d(e,"j",function(){return d}),i.d(e,"v",function(){return m}),i.d(e,"h",function(){return p}),i.d(e,"w",function(){return f}),i.d(e,"p",function(){return _}),i.d(e,"g",function(){return g}),i.d(e,"q",function(){return v}),i.d(e,"f",function(){return y}),i.d(e,"u",function(){return x}),i.d(e,"b",function(){return b}),i.d(e,"c",function(){return A}),i.d(e,"d",function(){return w}),i.d(e,"o",function(){return S}),i.d(e,"i",function(){return C}),i.d(e,"r",function(){return B}),i.d(e,"s",function(){return V}),i.d(e,"A",function(){return M}),i.d(e,"B",function(){return k}),i.d(e,"C",function(){return D}),i.d(e,"k",function(){return $}),i.d(e,"l",function(){return L}),i.d(e,"t",function(){return R}),i.d(e,"z",function(){return N}),i.d(e,"y",function(){return q});var n=i(1);const s=n.P/180,r=180/n.P,o=2*n.P,a=Math.abs,l=Math.min,c=Math.max;function u(t,e,i){return t<e?e:t>i?i:t}function h(t,e){const i=t[0];t[0]=e[0],e[0]=i}function d(t){return isFinite(t)}function m(t){return t*t}function p(t){return 1/Math.sqrt(t)}const f=Math.sqrt,_=Math.pow;function g(t){return t*s}function v(t){return t*r}const y=Math.cos,x=Math.sin,b=Math.acos,A=Math.asin,w=Math.atan2;function S(t){return t|=t>>1&2147483647,t|=t>>2&1073741823,t|=t>>4&268435455,t|=t>>8&16777215,(t|=t>>16&65535)+1}function C(t){return t>0&&0==(t&t-1)}function B(){return 2*Math.random()-1}function V(t,e){return(e-t)*Math.random()+t}class M{constructor(t=0,e=0){this.x=t,this.y=e}Clone(){return new M(this.x,this.y)}SetZero(){return this.x=0,this.y=0,this}Set(t,e){return this.x=t,this.y=e,this}Copy(t){return this.x=t.x,this.y=t.y,this}SelfAdd(t){return this.x+=t.x,this.y+=t.y,this}SelfAddXY(t,e){return this.x+=t,this.y+=e,this}SelfSub(t){return this.x-=t.x,this.y-=t.y,this}SelfSubXY(t,e){return this.x-=t,this.y-=e,this}SelfMul(t){return this.x*=t,this.y*=t,this}SelfMulAdd(t,e){return this.x+=t*e.x,this.y+=t*e.y,this}SelfMulSub(t,e){return this.x-=t*e.x,this.y-=t*e.y,this}Dot(t){return this.x*t.x+this.y*t.y}Cross(t){return this.x*t.y-this.y*t.x}Length(){const t=this.x,e=this.y;return Math.sqrt(t*t+e*e)}LengthSquared(){const t=this.x,e=this.y;return t*t+e*e}Normalize(){const t=this.Length();if(t>=n.r){const e=1/t;this.x*=e,this.y*=e}return t}SelfNormalize(){const t=this.Length();if(t>=n.r){const e=1/t;this.x*=e,this.y*=e}return this}SelfRotate(t){const e=Math.cos(t),i=Math.sin(t),n=this.x;return this.x=e*n-i*this.y,this.y=i*n+e*this.y,this}IsValid(){return isFinite(this.x)&&isFinite(this.y)}SelfCrossVS(t){const e=this.x;return this.x=t*this.y,this.y=-t*e,this}SelfCrossSV(t){const e=this.x;return this.x=-t*this.y,this.y=t*e,this}SelfMinV(t){return this.x=l(this.x,t.x),this.y=l(this.y,t.y),this}SelfMaxV(t){return this.x=c(this.x,t.x),this.y=c(this.y,t.y),this}SelfAbs(){return this.x=a(this.x),this.y=a(this.y),this}SelfNeg(){return this.x=-this.x,this.y=-this.y,this}SelfSkew(){const t=this.x;return this.x=-this.y,this.y=t,this}static MakeArray(t){return Object(n.e)(t,t=>new M)}static AbsV(t,e){return function(t,e){return e.x=a(t.x),e.y=a(t.y),e}(t,e)}static MinV(t,e,i){return function(t,e,i){return i.x=l(t.x,e.x),i.y=l(t.y,e.y),i}(t,e,i)}static MaxV(t,e,i){return function(t,e,i){return i.x=c(t.x,e.x),i.y=c(t.y,e.y),i}(t,e,i)}static ClampV(t,e,i,n){return function(t,e,i,n){return n.x=u(t.x,e.x,i.x),n.y=u(t.y,e.y,i.y),n}(t,e,i,n)}static RotateV(t,e,i){return function(t,e,i){const n=t.x,s=t.y,r=Math.cos(e),o=Math.sin(e);return i.x=r*n-o*s,i.y=o*n+r*s,i}(t,e,i)}static DotVV(t,e){return function(t,e){return t.x*e.x+t.y*e.y}(t,e)}static CrossVV(t,e){return function(t,e){return t.x*e.y-t.y*e.x}(t,e)}static CrossVS(t,e,i){return function(t,e,i){const n=t.x;return i.x=e*t.y,i.y=-e*n,i}(t,e,i)}static CrossVOne(t,e){return function(t,e){const i=t.x;return e.x=t.y,e.y=-i,e}(t,e)}static CrossSV(t,e,i){return function(t,e,i){const n=e.x;return i.x=-t*e.y,i.y=t*n,i}(t,e,i)}static CrossOneV(t,e){return function(t,e){const i=t.x;return e.x=-t.y,e.y=i,e}(t,e)}static AddVV(t,e,i){return P(t,e,i)}static SubVV(t,e,i){return I(t,e,i)}static MulSV(t,e,i){return function(t,e,i){return i.x=e.x*t,i.y=e.y*t,i}(t,e,i)}static MulVS(t,e,i){return function(t,e,i){return i.x=t.x*e,i.y=t.y*e,i}(t,e,i)}static AddVMulSV(t,e,i,n){return function(t,e,i,n){return n.x=t.x+e*i.x,n.y=t.y+e*i.y,n}(t,e,i,n)}static SubVMulSV(t,e,i,n){return function(t,e,i,n){return n.x=t.x-e*i.x,n.y=t.y-e*i.y,n}(t,e,i,n)}static AddVCrossSV(t,e,i,n){return function(t,e,i,n){const s=i.x;return n.x=t.x-e*i.y,n.y=t.y+e*s,n}(t,e,i,n)}static MidVV(t,e,i){return function(t,e,i){return i.x=.5*(t.x+e.x),i.y=.5*(t.y+e.y),i}(t,e,i)}static ExtVV(t,e,i){return function(t,e,i){return i.x=.5*(e.x-t.x),i.y=.5*(e.y-t.y),i}(t,e,i)}static IsEqualToV(t,e){return function(t,e){return t.x===e.x&&t.y===e.y}(t,e)}static DistanceVV(t,e){return function(t,e){const i=t.x-e.x,n=t.y-e.y;return Math.sqrt(i*i+n*n)}(t,e)}static DistanceSquaredVV(t,e){return function(t,e){const i=t.x-e.x,n=t.y-e.y;return i*i+n*n}(t,e)}static NegV(t,e){return function(t,e){return e.x=-t.x,e.y=-t.y,e}(t,e)}}M.ZERO=new M(0,0),M.UNITX=new M(1,0),M.UNITY=new M(0,1),M.s_t0=new M,M.s_t1=new M,M.s_t2=new M,M.s_t3=new M;const k=new M(0,0);function P(t,e,i){return i.x=t.x+e.x,i.y=t.y+e.y,i}function I(t,e,i){return i.x=t.x-e.x,i.y=t.y-e.y,i}class D{constructor(t=0,e=0,i=0){this.x=t,this.y=e,this.z=i}Clone(){return new D(this.x,this.y,this.z)}SetZero(){return this.x=0,this.y=0,this.z=0,this}SetXYZ(t,e,i){return this.x=t,this.y=e,this.z=i,this}Copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}SelfNeg(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}SelfAdd(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}SelfAddXYZ(t,e,i){return this.x+=t,this.y+=e,this.z+=i,this}SelfSub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}SelfSubXYZ(t,e,i){return this.x-=t,this.y-=e,this.z-=i,this}SelfMul(t){return this.x*=t,this.y*=t,this.z*=t,this}static DotV3V3(t,e){return T(t,e)}static CrossV3V3(t,e,i){return E(t,e,i)}}function T(t,e){return t.x*e.x+t.y*e.y+t.z*e.z}function E(t,e,i){const n=t.x,s=t.y,r=t.z,o=e.x,a=e.y,l=e.z;return i.x=s*l-r*a,i.y=r*o-n*l,i.z=n*a-s*o,i}D.ZERO=new D(0,0,0),D.s_t0=new D;class ${constructor(){this.ex=new M(1,0),this.ey=new M(0,1)}Clone(){return(new $).Copy(this)}static FromVV(t,e){return(new $).SetVV(t,e)}static FromSSSS(t,e,i,n){return(new $).SetSSSS(t,e,i,n)}static FromAngle(t){return(new $).SetAngle(t)}SetSSSS(t,e,i,n){return this.ex.Set(t,i),this.ey.Set(e,n),this}SetVV(t,e){return this.ex.Copy(t),this.ey.Copy(e),this}SetAngle(t){const e=Math.cos(t),i=Math.sin(t);return this.ex.Set(e,i),this.ey.Set(-i,e),this}Copy(t){return this.ex.Copy(t.ex),this.ey.Copy(t.ey),this}SetIdentity(){return this.ex.Set(1,0),this.ey.Set(0,1),this}SetZero(){return this.ex.SetZero(),this.ey.SetZero(),this}GetAngle(){return Math.atan2(this.ex.y,this.ex.x)}GetInverse(t){const e=this.ex.x,i=this.ey.x,n=this.ex.y,s=this.ey.y;let r=e*s-i*n;return 0!==r&&(r=1/r),t.ex.x=r*s,t.ey.x=-r*i,t.ex.y=-r*n,t.ey.y=r*e,t}Solve(t,e,i){const n=this.ex.x,s=this.ey.x,r=this.ex.y,o=this.ey.y;let a=n*o-s*r;return 0!==a&&(a=1/a),i.x=a*(o*t-s*e),i.y=a*(n*e-r*t),i}SelfAbs(){return this.ex.SelfAbs(),this.ey.SelfAbs(),this}SelfInv(){return this.GetInverse(this)}SelfAddM(t){return this.ex.SelfAdd(t.ex),this.ey.SelfAdd(t.ey),this}SelfSubM(t){return this.ex.SelfSub(t.ex),this.ey.SelfSub(t.ey),this}static AbsM(t,e){return function(t,e){const i=t.ex,n=t.ey;return e.ex.x=a(i.x),e.ex.y=a(i.y),e.ey.x=a(n.x),e.ey.y=a(n.y),e}(t,e)}static MulMV(t,e,i){return function(t,e,i){const n=t.ex,s=t.ey,r=e.x,o=e.y;return i.x=n.x*r+s.x*o,i.y=n.y*r+s.y*o,i}(t,e,i)}static MulTMV(t,e,i){return function(t,e,i){const n=t.ex,s=t.ey,r=e.x,o=e.y;return i.x=n.x*r+n.y*o,i.y=s.x*r+s.y*o,i}(t,e,i)}static AddMM(t,e,i){return function(t,e,i){const n=t.ex,s=t.ey,r=e.ex,o=e.ey;return i.ex.x=n.x+r.x,i.ex.y=n.y+r.y,i.ey.x=s.x+o.x,i.ey.y=s.y+o.y,i}(t,e,i)}static MulMM(t,e,i){return function(t,e,i){const n=t.ex.x,s=t.ex.y,r=t.ey.x,o=t.ey.y,a=e.ex.x,l=e.ex.y,c=e.ey.x,u=e.ey.y;return i.ex.x=n*a+r*l,i.ex.y=s*a+o*l,i.ey.x=n*c+r*u,i.ey.y=s*c+o*u,i}(t,e,i)}static MulTMM(t,e,i){return function(t,e,i){const n=t.ex.x,s=t.ex.y,r=t.ey.x,o=t.ey.y,a=e.ex.x,l=e.ex.y,c=e.ey.x,u=e.ey.y;return i.ex.x=n*a+s*l,i.ex.y=r*a+o*l,i.ey.x=n*c+s*u,i.ey.y=r*c+o*u,i}(t,e,i)}}$.IDENTITY=new $;class L{constructor(){this.ex=new D(1,0,0),this.ey=new D(0,1,0),this.ez=new D(0,0,1)}Clone(){return(new L).Copy(this)}SetVVV(t,e,i){return this.ex.Copy(t),this.ey.Copy(e),this.ez.Copy(i),this}Copy(t){return this.ex.Copy(t.ex),this.ey.Copy(t.ey),this.ez.Copy(t.ez),this}SetIdentity(){return this.ex.SetXYZ(1,0,0),this.ey.SetXYZ(0,1,0),this.ez.SetXYZ(0,0,1),this}SetZero(){return this.ex.SetZero(),this.ey.SetZero(),this.ez.SetZero(),this}SelfAddM(t){return this.ex.SelfAdd(t.ex),this.ey.SelfAdd(t.ey),this.ez.SelfAdd(t.ez),this}Solve33(t,e,i,n){const s=this.ex.x,r=this.ex.y,o=this.ex.z,a=this.ey.x,l=this.ey.y,c=this.ey.z,u=this.ez.x,h=this.ez.y,d=this.ez.z;let m=s*(l*d-c*h)+r*(c*u-a*d)+o*(a*h-l*u);return 0!==m&&(m=1/m),n.x=m*(t*(l*d-c*h)+e*(c*u-a*d)+i*(a*h-l*u)),n.y=m*(s*(e*d-i*h)+r*(i*u-t*d)+o*(t*h-e*u)),n.z=m*(s*(l*i-c*e)+r*(c*t-a*i)+o*(a*e-l*t)),n}Solve22(t,e,i){const n=this.ex.x,s=this.ey.x,r=this.ex.y,o=this.ey.y;let a=n*o-s*r;return 0!==a&&(a=1/a),i.x=a*(o*t-s*e),i.y=a*(n*e-r*t),i}GetInverse22(t){const e=this.ex.x,i=this.ey.x,n=this.ex.y,s=this.ey.y;let r=e*s-i*n;0!==r&&(r=1/r),t.ex.x=r*s,t.ey.x=-r*i,t.ex.z=0,t.ex.y=-r*n,t.ey.y=r*e,t.ey.z=0,t.ez.x=0,t.ez.y=0,t.ez.z=0}GetSymInverse33(t){let e=T(this.ex,E(this.ey,this.ez,D.s_t0));0!==e&&(e=1/e);const i=this.ex.x,n=this.ey.x,s=this.ez.x,r=this.ey.y,o=this.ez.y,a=this.ez.z;t.ex.x=e*(r*a-o*o),t.ex.y=e*(s*o-n*a),t.ex.z=e*(n*o-s*r),t.ey.x=t.ex.y,t.ey.y=e*(i*a-s*s),t.ey.z=e*(s*n-i*o),t.ez.x=t.ex.z,t.ez.y=t.ey.z,t.ez.z=e*(i*r-n*n)}static MulM33V3(t,e,i){return function(t,e,i){const n=e.x,s=e.y,r=e.z;return i.x=t.ex.x*n+t.ey.x*s+t.ez.x*r,i.y=t.ex.y*n+t.ey.y*s+t.ez.y*r,i.z=t.ex.z*n+t.ey.z*s+t.ez.z*r,i}(t,e,i)}static MulM33XYZ(t,e,i,n,s){return function(t,e,i,n,s){return s.x=t.ex.x*e+t.ey.x*i+t.ez.x*n,s.y=t.ex.y*e+t.ey.y*i+t.ez.y*n,s.z=t.ex.z*e+t.ey.z*i+t.ez.z*n,s}(t,e,i,n,s)}static MulM33V2(t,e,i){return function(t,e,i){const n=e.x,s=e.y;return i.x=t.ex.x*n+t.ey.x*s,i.y=t.ex.y*n+t.ey.y*s,i}(t,e,i)}static MulM33XY(t,e,i,n){return function(t,e,i,n){return n.x=t.ex.x*e+t.ey.x*i,n.y=t.ex.y*e+t.ey.y*i,n}(t,e,i,n)}}L.IDENTITY=new L;class R{constructor(t=0){this.s=0,this.c=1,t&&(this.s=Math.sin(t),this.c=Math.cos(t))}Clone(){return(new R).Copy(this)}Copy(t){return this.s=t.s,this.c=t.c,this}SetAngle(t){return this.s=Math.sin(t),this.c=Math.cos(t),this}SetIdentity(){return this.s=0,this.c=1,this}GetAngle(){return Math.atan2(this.s,this.c)}GetXAxis(t){return t.x=this.c,t.y=this.s,t}GetYAxis(t){return t.x=-this.s,t.y=this.c,t}static MulRR(t,e,i){return F(t,e,i)}static MulTRR(t,e,i){return O(t,e,i)}static MulRV(t,e,i){return j(t,e,i)}static MulTRV(t,e,i){return G(t,e,i)}}function F(t,e,i){const n=t.c,s=t.s,r=e.c,o=e.s;return i.s=s*r+n*o,i.c=n*r-s*o,i}function O(t,e,i){const n=t.c,s=t.s,r=e.c,o=e.s;return i.s=n*o-s*r,i.c=n*r+s*o,i}function j(t,e,i){const n=t.c,s=t.s,r=e.x,o=e.y;return i.x=n*r-s*o,i.y=s*r+n*o,i}function G(t,e,i){const n=t.c,s=t.s,r=e.x,o=e.y;return i.x=n*r+s*o,i.y=-s*r+n*o,i}R.IDENTITY=new R;class N{constructor(){this.p=new M,this.q=new R}Clone(){return(new N).Copy(this)}Copy(t){return this.p.Copy(t.p),this.q.Copy(t.q),this}SetIdentity(){return this.p.SetZero(),this.q.SetIdentity(),this}SetPositionRotation(t,e){return this.p.Copy(t),this.q.Copy(e),this}SetPositionAngle(t,e){return this.p.Copy(t),this.q.SetAngle(e),this}SetPosition(t){return this.p.Copy(t),this}SetPositionXY(t,e){return this.p.Set(t,e),this}SetRotation(t){return this.q.Copy(t),this}SetRotationAngle(t){return this.q.SetAngle(t),this}GetPosition(){return this.p}GetRotation(){return this.q}GetRotationAngle(){return this.q.GetAngle()}GetAngle(){return this.q.GetAngle()}static MulXV(t,e,i){return function(t,e,i){const n=t.q.c,s=t.q.s,r=e.x,o=e.y;return i.x=n*r-s*o+t.p.x,i.y=s*r+n*o+t.p.y,i}(t,e,i)}static MulTXV(t,e,i){return function(t,e,i){const n=t.q.c,s=t.q.s,r=e.x-t.p.x,o=e.y-t.p.y;return i.x=n*r+s*o,i.y=-s*r+n*o,i}(t,e,i)}static MulXX(t,e,i){return function(t,e,i){return F(t.q,e.q,i.q),P(j(t.q,e.p,i.p),t.p,i.p),i}(t,e,i)}static MulTXX(t,e,i){return function(t,e,i){return O(t.q,e.q,i.q),G(t.q,I(e.p,t.p,i.p),i.p),i}(t,e,i)}}N.IDENTITY=new N;class q{constructor(){this.localCenter=new M,this.c0=new M,this.c=new M,this.a0=0,this.a=0,this.alpha0=0}Clone(){return(new q).Copy(this)}Copy(t){return this.localCenter.Copy(t.localCenter),this.c0.Copy(t.c0),this.c.Copy(t.c),this.a0=t.a0,this.a=t.a,this.alpha0=t.alpha0,this}GetTransform(t,e){const i=1-e;t.p.x=i*this.c0.x+e*this.c.x,t.p.y=i*this.c0.y+e*this.c.y;const n=i*this.a0+e*this.a;return t.q.SetAngle(n),t.p.SelfSub(j(t.q,this.localCenter,M.s_t0)),t}Advance(t){const e=(t-this.alpha0)/(1-this.alpha0),i=1-e;this.c0.x=i*this.c0.x+e*this.c.x,this.c0.y=i*this.c0.y+e*this.c.y,this.a0=i*this.a0+e*this.a,this.alpha0=t}Normalize(){const t=o*Math.floor(this.a0/o);this.a0-=t,this.a-=t}}},function(t,e,i){"use strict";function n(t,...e){}i.d(e,"b",function(){return n}),i.d(e,"x",function(){return s}),i.d(e,"r",function(){return r}),i.d(e,"s",function(){return o}),i.d(e,"P",function(){return a}),i.d(e,"z",function(){return l}),i.d(e,"D",function(){return c}),i.d(e,"k",function(){return u}),i.d(e,"l",function(){return h}),i.d(e,"v",function(){return d}),i.d(e,"n",function(){return m}),i.d(e,"Q",function(){return p}),i.d(e,"G",function(){return f}),i.d(e,"H",function(){return _}),i.d(e,"T",function(){return g}),i.d(e,"y",function(){return v}),i.d(e,"w",function(){return y}),i.d(e,"I",function(){return x}),i.d(e,"J",function(){return b}),i.d(e,"E",function(){return A}),i.d(e,"F",function(){return w}),i.d(e,"p",function(){return S}),i.d(e,"S",function(){return C}),i.d(e,"t",function(){return B}),i.d(e,"B",function(){return V}),i.d(e,"O",function(){return M}),i.d(e,"N",function(){return k}),i.d(e,"C",function(){return P}),i.d(e,"A",function(){return I}),i.d(e,"K",function(){return D}),i.d(e,"L",function(){return T}),i.d(e,"M",function(){return E}),i.d(e,"o",function(){return $}),i.d(e,"R",function(){return L}),i.d(e,"u",function(){return R}),i.d(e,"m",function(){return F}),i.d(e,"a",function(){return O}),i.d(e,"c",function(){return j}),i.d(e,"d",function(){return G}),i.d(e,"j",function(){return N}),i.d(e,"U",function(){return q}),i.d(e,"q",function(){return z}),i.d(e,"h",function(){return H}),i.d(e,"i",function(){return U}),i.d(e,"e",function(){return W}),i.d(e,"f",function(){return J}),i.d(e,"g",function(){return Y});const s=1e37,r=1e-5,o=r*r,a=3.14159265359,l=2,c=8,u=.1,h=2,d=.008,m=2/180*a,p=2*d,f=8,_=32,g=1,v=.2,y=8/180*a,x=2,b=x*x,A=.5*a,w=A*A,S=.2,C=.75,B=-1,V=2147483647,M=.75,k=1,P=.25,I=.5,D=2,T=D*D,E=256,$=2.5,L=.5,R=.01,F=2/180*a;function O(t){return null}function j(t){}function G(t,...e){}class N{constructor(t=0,e=0,i=0){this.major=0,this.minor=0,this.revision=0,this.major=t,this.minor=e,this.revision=i}toString(){return this.major+"."+this.minor+"."+this.revision}}const q=new N(2,3,2),z=313;function H(t){return parseInt(t,10)}function U(t){return Math.abs(parseInt(t,10))}function W(t,e){let i=[];for(let n=0;n<t;++n)i.push(e(n));return i}function J(t){const e=[];for(let i=0;i<t;++i)e.push(null);return e}function Y(t,e=0){const i=[];for(let n=0;n<t;++n)i.push(e);return i}},function(t,e,i){var n=i(9),s=i(33),r=i(26),o=i(27),a=i(34),l=function(t,e,i){var c,u,h,d,m=t&l.F,p=t&l.G,f=t&l.S,_=t&l.P,g=t&l.B,v=p?n:f?n[e]||(n[e]={}):(n[e]||{}).prototype,y=p?s:s[e]||(s[e]={}),x=y.prototype||(y.prototype={});for(c in p&&(i=e),i)h=((u=!m&&v&&void 0!==v[c])?v:i)[c],d=g&&u?a(h,n):_&&"function"==typeof h?a(Function.call,h):h,v&&o(v,c,h,t&l.U),y[c]!=h&&r(y,c,d),_&&x[c]!=h&&(x[c]=h)};n.core=s,l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,t.exports=l},function(t,e,i){const n=i(424),{FilterHelper:s}=i(59),{b2Vec2:r,b2Body:o,b2Fixture:a,b2Contact:l,b2Manifold:c,b2ContactImpulse:u,b2ContactListener:h}=n;window.$box2d=n;let d=new r;o.prototype.$type=null,o.prototype.Step=function(t){if(this._on_step)for(let e of this._on_step)e(t)},o.prototype.AfterStep=function(t){if(this._on_after_step)for(let e of this._on_after_step)e(t)},o.prototype.addStep=function(t){this._on_step=this._on_step||[],this._on_step.push(t)},o.prototype.addAfterStep=function(t){this._on_after_step=this._on_after_step||[],this._on_after_step.push(t)},o.prototype.SetLinearVelocity2=function(t,e){d.x=t,d.y=e,this.SetLinearVelocity(d,!0)},o.prototype.ApplyForceToCenter2=function(t,e){d.x=t,d.y=e,this.ApplyForceToCenter(d,!0)},o.prototype.ApplyLinearImpulseToCenter2=function(t,e){d.x=t,d.y=e,this.ApplyLinearImpulseToCenter(d,!0)},o.prototype.Acceleration=function(t,e,i){i||(i=this.GetWorldCenter());let n=r.SubVV(t,e,d),s=this.GetMass(),o=s*n.x,a=s*n.y,l=d.Set(o,a);this.ApplyLinearImpulse(l,i,!0)},o.prototype.AccelerationX=function(t,e,i){i||(i=this.GetWorldCenter());let n=t-e.x,s=this.GetMass()*n,r=d.Set(s,0);this.ApplyLinearImpulse(r,i,!0)},o.prototype.AccelerationY=function(t,e,i){i||(i=this.GetWorldCenter());let n=t-e.y,s=this.GetMass()*n,r=d.Set(0,s);this.ApplyLinearImpulse(r,i,!0)},o.prototype.ConstantVelocity=function(t,e){this.Acceleration(t,this.GetLinearVelocity(),e||this.GetWorldCenter())},o.prototype.ConstantVelocity2=function(t,e,i,n){const s=new r(t,e),o=new r(i,n),a=this.GetLinearVelocity(),l=this.GetMass();let c=new r,u=r.SubVV(s,a,c);c.x=l*u.x,c.y=l*u.y,this.ApplyLinearImpulse(c,o,!0)},o.prototype.ConstantVelocityWorldCenter2=function(t,e){const i=new r(t,e),n=this.GetLinearVelocity(),s=this.GetMass();let o=new r,a=r.SubVV(i,n,o);o.x=s*a.x,o.y=s*a.y,this.ApplyLinearImpulseToCenter(o,!0)},o.prototype.ConstantVelocityX=function(t,e){this.AccelerationX(t,this.GetLinearVelocity(),e||this.GetWorldCenter())},o.prototype.ConstantVelocityY=function(t,e){this.AccelerationY(t,this.GetLinearVelocity(),e||this.GetWorldCenter())},a.prototype.beginContact=function(t,e,i){},a.prototype.endContact=function(t,e,i){},a.prototype.preSolve=function(t,e,i,n){},a.prototype.postSolve=function(t,e,i,n){},a.prototype.getOwnerID=function(){let t=this.GetUserData();if(t&&t.owner)return t.owner.id};t.exports=Object.assign(n,{FixtureContactListener:class{beginContact(t,e,i){}endContact(t,e,i){}preSolve(t,e,i,n){}postSolve(t,e,i,n){}},FilterHelper:s})},function(t,e,i){"use strict";i.d(e,"c",function(){return r}),i.d(e,"d",function(){return o}),i.d(e,"b",function(){return _}),i.d(e,"a",function(){return b});const n=[],s={};window.character_emotion_list=["blink","hit","smile","troubled","cry","angry","bewildered","stunned","vomit","oops","cheers","chu","wink","pain","glitter","despair","love","shine","blaze","hum","bowing","hot","dam","qBlue"],window.character_action_list=["walk1","walk2","stand1","stand2","alert","swingO1","swingO2","swingO3","swingOF","swingT1","swingT2","swingT3","swingTF","swingP1","swingP2","swingPF","stabO1","stabO2","stabOF","stabT1","stabT2","stabTF","shoot1","shoot2","shootF","proneStab","prone","heal","fly","jump","sit","ladder","rope"];class r{constructor(t,e,i,n,s,r="Equip"){5!=arguments.length&&alert("ItemCategoryInfo: "+[...arguments].join(",")),this.id_prefix=t,this.path=e,this.slot=n,this.listPath=i,this.categoryName=s,this.fragmentType=null,this.dataDir=null,this.iconPath=null,this.iconRawPath=null;{let t,i,s;switch(n){case"head":i="stand1/0/head",s="stand1/0/head";break;case"body":i="stand1/0/body",s="stand1/0/body";break;case"hair":i="stand1/0/hair",s="stand1/0/hair";break;case"face":i="blink/0/face",s="blink/0/face";break;default:i="info/icon",s="info/iconRaw"}"Equip"==r?t=`/Character/${e+(e?"/":"")}`:console.error("未完成"),Object.defineProperties(this,{dataDir:{value:t},iconPath:{value:i},iconRawPath:{value:s}})}}static getDataPath(t){const e=r.get(t);if(!e)return null;if("0"==t[0])return e.dataDir+t;throw new Error("未完成")}static getIconRawUrl(t){let e=r.get(t);return e?"0"==t[0]?f.imageUrl(e.dataDir+t+"/"+e.iconRawPath):void 0:null}static getIconUrl(t){let e=r.get(t);return e?"0"==t[0]?f.imageUrl(e.dataDir+t+"/"+e.iconPath):void 0:null}static async loadString(t){let e=r.get(t);if(!e)return null;let i=`/String/Eqp/Eqp/${e.path+(e.path?"/":"")}${Number(t)}`;return await f.data(i)}static get(t){let e;if(null==t||""==t)throw new TypeError;if(4==t.length){if(e=r._info[t])return e}else{if(e=r._info[t.slice(0,4)])return e;if(e=6==t.length?r._info[t]:r._info[t.slice(0,6)])return e}return console.warn("unknow item type, itemId: "+t),null}static getTypeId(){return Math.trunc(_id/1e6)}static getCategory(){return Math.trunc(_id/1e4)}static isItem(t){return 0!=Math.trunc(t/1e6)}static isEquip(t){if(null==t||""==t)return null;let e=Number(t),i=Math.trunc(e/1e4);return i>180&&i<2e3&&console.warn("?? equip: "+t),1==Math.trunc(e/1e6)}static getSubCategory(t){return Math.trunc(t/1e4)}static isCashWeapon(t){return 170==Math.trunc(t/1e4)}static getJobWeaponCategory(t){console.warn("getJobWeaponCategory: 未完成")}}r.type={Equip:"Equip",Consume:"Consume",Etc:"Etc",Install:"Install",Cash:"Cash"},r.typeName={0:"Equip",1:"Consume",2:"Etc",3:"Install",4:"Cash"},r.typeId={Equip:0,Consume:1,Etc:2,Install:3,Cash:4},r._info={"0000":new r("0000","","body","body","<body>"),"0001":new r("0001","","head","head","<head>"),"0002":new r("0002","Face","Face","face","臉型"),"0003":new r("0003","Hair","Hair","hair","髮型"),"0004":new r("0004","Hair","Hair","hair","髮型"),"0100":new r("0100","Cap","Cap","cap","帽子"),"0101":new r("0101","Accessory","accessoryFace","accessoryFace","臉飾"),"0102":new r("0102","Accessory","accessoryEyes","accessoryEyes","眼飾"),"0103":new r("0103","Accessory","accessoryEars","accessoryEars","耳環"),"0104":new r("0104","Coat","Coat","coat","上衣"),"0105":new r("0105","Longcoat","Longcoat","longcoat","套服"),"0106":new r("0106","Pants","Pants","pants","褲子"),"0107":new r("0107","Shoes","Shoes","shoes","鞋子"),"0108":new r("0108","Glove","Glove","glove","手套"),"0109":new r("0109","Shield","Shield","shield","盾牌"),"0110":new r("0110","Cape","Cape","cape","披風"),"0121":new r("0121","Weapon","閃亮克魯","weapon","閃亮克魯"),"0122":new r("0122","Weapon","靈魂射手","weapon","靈魂射手"),"0123":new r("0123","Weapon","魔劍","weapon","魔劍"),"0124":new r("0124","Weapon","能量劍","weapon","能量劍"),"0125":new r("0125","Weapon","幻獸棒","weapon","幻獸棒"),"0126":new r("0126","Weapon","ESP限制器","weapon","ESP限制器"),"0127":new r("0127","Weapon","鎖鏈","weapon","鎖鏈"),"0128":new r("0128","Weapon","魔力護腕","weapon","魔力護腕"),"0130":new r("0130","Weapon","單手劍","weapon","單手劍"),"0131":new r("0131","Weapon","單手斧","weapon","單手斧"),"0132":new r("0132","Weapon","單手錘","weapon","單手錘"),"0133":new r("0133","Weapon","短劍","weapon","短劍"),"0134":new r("0134","Weapon","雙刀","weapon","雙刀"),"013526":new r("013526","Weapon","靈魂之環","weapon","靈魂之環"),"013530":new r("013530","Weapon","控制器","weapon","控制器"),"0136":new r("0136","Weapon","手杖","weapon","手杖"),"0137":new r("0137","Weapon","短杖","weapon","短杖"),"0138":new r("0138","Weapon","長杖","weapon","長杖"),"0140":new r("0140","Weapon","雙手劍","weapon","雙手劍"),"0141":new r("0141","Weapon","雙手斧","weapon","雙手斧"),"0142":new r("0142","Weapon","雙手棍","weapon","雙手棍"),"0143":new r("0143","Weapon","槍","weapon","槍"),"0144":new r("0144","Weapon","矛","weapon","矛"),"0145":new r("0145","Weapon","弓","weapon","弓"),"0146":new r("0146","Weapon","弩","weapon","弩"),"0147":new r("0147","Weapon","拳套","weapon","拳套"),"0148":new r("0148","Weapon","指虎","weapon","指虎"),"0149":new r("0149","Weapon","火槍","weapon","火槍"),"0150":new r("0150","Weapon","鏟","weapon","鏟"),"0151":new r("0151","Weapon","鎬","weapon","鎬"),"0152":new r("0152","Weapon","雙弩槍","weapon","雙弩槍"),"0153":new r("0153","Weapon","加農砲","weapon","加農砲"),"0154":new r("0154","Weapon","太刀","weapon","太刀"),"0155":new r("0155","Weapon","扇子","weapon","扇子"),"0156":new r("0156","Weapon","琉","weapon","琉"),"0157":new r("0157","Weapon","璃","weapon","璃"),"0158":new r("0158","Weapon","重拳槍","weapon","重拳槍"),"0170":new r("0170","Weapon","0170","weapon","點裝武器")},r._categoryList=function(t){let e=[],i=new Set;for(let n in t){let s=t[n],r=s.categoryName||s.listPath;i.has(r)||(i.add(r),e.push({key:r,value:n}))}return e}(r._info);class o{static isEquipExist(t,e){const i=e.listPath,n=o.equip_map[i];return!n||n.has(t)}static async loadArchive(t){a(s,"/",JSON.parse(await o.get(t)))}static get(t){return new Promise(function(e,i){let s=new XMLHttpRequest;s.open("GET",t,!0),s.timeout=6e5,s.onload=function(){404==this.status||500==this.status?(n.push(t),i(this.status+": "+t)):200==this.status?e(this.responseText):this.status},s.ontimeout=function(e){i("timeout: "+t)},s.onabort=function(e){i("abort: "+t)},s.send()})}static get root_path(){return window.$ROOT_PATH}static get archive(){return s}static get failed_urls(){return n}}function a(t,e,i){e.endsWith("/")&&(e=e.slice(0,e.length-1));let n,s=e.split("/"),r=t,o=s.length-1;for(n=0;n<o;++n){let t=s[n];null==r[t]&&(r[t]={}),r=r[t]}let a=r[s[o]];if(a instanceof Promise)delete r[s[o]],r[s[o]]=i;else if(a&&"object"==typeof a)for(let t in i)a[t]=i[t]||a[t];else void 0!==i&&(r[s[o]]=i)}function l(t,e){e.endsWith("/")&&(e=e.slice(0,e.length-1));let i,n=e.split("/"),s=t,r=n.length-1;for(i=0;i<r;++i){let t=n[i];if(!s[t])return;s=s[t]}return s[n[r]]}window.$ResourceManager=o;const c=Symbol("$pack"),u=RegExp.prototype.test.bind(/^([a-zA-Z^\:]+)(\:.*)$/);function h(t,e,i){return u(t)?void 0:""!=window.$ROOT_PATH&&t.startsWith(window.$ROOT_PATH)?(i&&(e[c]=!0),t=t.slice(window.$ROOT_PATH.length),a(s,t,e)):a(s,t,e)}function d(t,e){let i=m(t);if(i)return l(s,i)}function m(t){if(!u(t)&&""!=window.$ROOT_PATH&&t.startsWith(window.$ROOT_PATH))return t.slice(window.$ROOT_PATH.length)}function p(t,e){e.endsWith("/")&&(e=e.slice(0,e.length-1));let i=l(t,e);if(i)return i instanceof Promise?new Promise(async function(n,s){await i,n(await p(t,e))}):i;{let i,n=e.split("/"),s=t,r=n.length-1;for(i=0;i<r;++i){let r=n[i];if(s[r]instanceof Promise)return new Promise(async function(i,n){await s[r],i(await p(t,e))});if(!s[r])return;s=s[r]}let o=s[n[r]];return o instanceof Promise?new Promise(async function(i,n){await o,i(await p(t,e))}):o}}let f=function(t){return o.get(t)};f.pack=async function(t){let e,i=m(t);if(i&&(e=p(s,i)),e instanceof Promise)return await e;if(e&&e[c])return e;{0;const i=f.packUrl(t);let n=async function(){let n=await o.get(i);return e=JSON.parse(n),h(t,e,!0),e}();return h(t,n,!0),await n}},f.packSync=function(t){let e=d(t);if(e)return e},f.data=async function(t){let e,i=m(t);if(i&&(e=p(s,i)),e instanceof Promise)return await e;if(e)return e;{const i=f.dataUrl(t);let n=async function(){let n=await o.get(i);return e=JSON.parse(n),h(t,e,!1),e}();return h(t,n,!1),await n}},f.dataSync=function(t){let e=d(t);if(e)return e},f.list=async function(t){let e,i=m(t);if(i&&(e=p(s,i)),e instanceof Promise)return await e;if(e)return e;{const i=f.listUrl(t);let n=async function(){let n=await o.get(i);return e=JSON.parse(n),h(t,e,!1),e}();return h(t,n,!1),await n}},f.listSync=function(t){let e=d(t);if(e)return Object.keys(e)},f.dataUrl=function(t){if(u(t))return t;if(!t.startsWith("data"))return`${window.$ROOT_PATH}data${t}.json`;throw new Error("Not game data: "+t)},f.packUrl=function(t){if(u(t))return t;if(!t.startsWith("pack"))return`${window.$ROOT_PATH}pack${t}.json`;throw new Error("Not game pack: "+t)},f.listUrl=function(t){if(u(t))return t;if(!t.startsWith("ls"))return`${window.$ROOT_PATH}ls${t}.json`;throw new Error(t)},f.imageUrl=function(t){if(u(t))return t;if(!t.startsWith("images"))return`${window.$ROOT_PATH}images${t}.png`;throw new Error("Not game images: "+t)},f.soundMp3Url=function(t){if(u(t))return t;if(!t.startsWith("sound"))return`${window.$ROOT_PATH}sound${t}.mp3`;throw new Error("Not game sound: "+t)},f.soundWavUrl=function(t){if(u(t))return t;if(!t.startsWith("sound"))return`${window.$ROOT_PATH}sound${t}.wav`;throw new Error("Not game sound: "+t)},f.assetUrl=function(t){return`${window.$ROOT_PATH}${t}`},f.asset=function(t){return f(f.assetUrl(t))},window.$get=f;class _{static head(t){t.gender=2}static body(t){t.gender=2}static Face(t){const e=Math.trunc(t.id%1e4/1e3);t.gender=1==e||4==e?1:0}static Hair(t){const e=Math.trunc(t.id%1e4/1e3);t.gender=1==e||2==e||4==e||7==e?1:0}static Cap(t){_._equip(t)}static accessoryFace(t){_._equip(t)}static accessoryEyes(t){_._equip(t)}static accessoryEars(t){_._equip(t)}static Coat(t){_._equip(t)}static Longcoat(t){_._equip(t)}static Pants(t){_._equip(t)}static Shoes(t){_._equip(t)}static Glove(t){_._equip(t)}static Shield(t){_._equip(t)}static Cape(t){_._equip(t)}static _equip(t){const e=Math.trunc(t.id%1e4/1e3);t.gender=0==e?0:1==e?1:2}}const g=/(\d{4,7})\d$/,v=/(\d{2,5})\d(\d{2})$/,y=/\d{4,7}(\d)$/,x=/\d{2,5}(\d)\d{2}$/;class b{static*enumHairColor(t){let e=t.match(g);for(let t=0;t<10;++t){yield e[1]+t}}static*enumFaceColor(t){let e=t.match(v);for(let t=0;t<10;++t){yield e[1]+t+e[2]}}static getColorHairID(t,e){return t.match(g)[1]+e%10}static getColorFaceID(t,e){let i=t.match(v);return i[1]+e%10+i[2]}static isHairStyleEqual(t,e){return b.getColorHairID(t,0)==b.getColorHairID(e,0)}static isFaceStyleEqual(t,e){return b.getColorFaceID(t,0)==b.getColorFaceID(e,0)}static getHairColor(t){if(t){let e=(t=String(t)).match(y);if(e)return e[1]}}static getFaceColor(t){if(t){let e=(t=String(t)).match(x);if(e)return e[1]}}}var A={Equip:{Hat:"Cap",Cape:"Cape",Top:"Coat",Overall:"Longcoat",Glove:"Glove",Bottom:"Pants",Shield:"Shield",Shoes:"Shoes","Eye Decoration":"accessoryEyes",Earrings:"accessoryEars","Face Accessory":"accessoryFace",Face:"Face",Hair:"Hair"}};o.external={equip:{}},o.equip_map={};for(let t in A.Equip){let e=A.Equip[t];o.external.equip[e]=[],o.equip_map[e]=null}for(let t=0;t<9;++t){let e="Face"+t;o.external.equip[e]=[],o.equip_map[e]=null}for(let t=0;t<8;++t){let e="Hair"+t;o.external.equip[e]=[],o.equip_map[e]=null}async function w(t){let e;t=t||"/items.json";try{if(!(e=o._external_raw=JSON.parse(await f.asset("equip.json"))))throw Error("'/equip' is empty")}catch(t){if(!(e=o._external_raw=JSON.parse(await f("//labs.maplestory.io/api/gms/latest/item/category/equip"))))return}for(let t=0;t<e.length;++t){const i=e[t],n=String(i.id).padStart(8,"0");try{if(!i.typeInfo||!A[i.typeInfo.overallCategory])continue;let t=i.typeInfo.overallCategory.toLowerCase(),e=A[i.typeInfo.overallCategory][i.typeInfo.subCategory];if(!e)continue;"Face"==e?e+=b.getFaceColor(n):"Hair"==e&&(e+=b.getHairColor(n));let s={id:n,name:i.name,desc:i.desc,cash:i.isCash?1:0,icon:{"":`//labs.maplestory.io/api/gms/latest/item/${i.id}/icon`}};o.external[t][e].push(s)}catch(t){console.error("external resource: id("+n+")"),console.error(t)}}}let S=w();async function C(t,e){await S,B(t,e),concat_external_resource=B}function B(t,e){try{const i=o.external.equip[t];if(!i)return;let n=o.equip_map[t];n||(n=new Map,e.forEach(t=>{n.set(t.id,t)}),o.equip_map[t]=n),i.forEach(t=>{let i=t.id;if(n.has(i)){let e=n.get(i);e._name=t.name||"",e._desc=t.desc||""}else t.$foreign=!0,e.push(t)})}catch(t){console.error(t)}}window.concat_external_resource=C,window.trigger_update_external_equip_list=function(){S=w(),window.concat_external_resource=C},window.load_extern_item_data=async function(t){let e=JSON.parse(await f(`//labs.maplestory.io/api/gms/latest/item/${t}`)),i={},n=e.frameBooks.default?e.frameBooks.default.frames[0]:null;for(let t in e.frameBooks){let s=e.frameBooks[t],r=[];for(let t=0;t<s.frames.length;++t){let e=s.frames[t]||n;if(!e||!e.effects)continue;let i=e.effects,o={};for(let t in i){let e=i[t];e.image&&(o[t]={"":"data:image/png;base64,"+e.image,origin:e.originOrZero||e.origin||e.center,map:e.mapOffset,z:e.position})}r[t]=o}i[t]=r}return i.info={islot:e.metaInfo.equip.islot,vslot:e.metaInfo.equip.vslot,icon:e.metaInfo.icon?"data:image/png;base64,"+e.metaInfo.icon.iconRaw:"",cash:e.metaInfo.cash&&e.metaInfo.cash.cash?1:0},i}},function(t,e,i){"use strict";i.d(e,"e",function(){return n}),i.d(e,"d",function(){return c}),i.d(e,"f",function(){return u}),i.d(e,"i",function(){return h}),i.d(e,"j",function(){return s}),i.d(e,"h",function(){return d}),i.d(e,"p",function(){return m}),i.d(e,"k",function(){return r}),i.d(e,"g",function(){return p}),i.d(e,"c",function(){return f}),i.d(e,"l",function(){return _}),i.d(e,"m",function(){return g}),i.d(e,"a",function(){return v}),i.d(e,"n",function(){return y}),i.d(e,"b",function(){return x}),i.d(e,"o",function(){return S});var n,s,r,o=i(1),a=i(0),l=i(60);!function(t){t[t.e_vertex=0]="e_vertex",t[t.e_face=1]="e_face"}(n||(n={}));class c{constructor(){this._key=0,this._key_invalid=!1,this._indexA=0,this._indexB=0,this._typeA=0,this._typeB=0}get key(){return this._key_invalid&&(this._key_invalid=!1,this._key=this._indexA|this._indexB<<8|this._typeA<<16|this._typeB<<24),this._key}set key(t){this._key=t,this._key_invalid=!1,this._indexA=255&this._key,this._indexB=this._key>>8&255,this._typeA=this._key>>16&255,this._typeB=this._key>>24&255}get indexA(){return this._indexA}set indexA(t){this._indexA=t,this._key_invalid=!0}get indexB(){return this._indexB}set indexB(t){this._indexB=t,this._key_invalid=!0}get typeA(){return this._typeA}set typeA(t){this._typeA=t,this._key_invalid=!0}get typeB(){return this._typeB}set typeB(t){this._typeB=t,this._key_invalid=!0}}class u{constructor(){this.cf=new c}Copy(t){return this.key=t.key,this}Clone(){return(new u).Copy(this)}get key(){return this.cf.key}set key(t){this.cf.key=t}}class h{constructor(){this.localPoint=new a.A,this.normalImpulse=0,this.tangentImpulse=0,this.id=new u}static MakeArray(t){return Object(o.e)(t,t=>new h)}Reset(){this.localPoint.SetZero(),this.normalImpulse=0,this.tangentImpulse=0,this.id.key=0}Copy(t){return this.localPoint.Copy(t.localPoint),this.normalImpulse=t.normalImpulse,this.tangentImpulse=t.tangentImpulse,this.id.Copy(t.id),this}}!function(t){t[t.e_unknown=-1]="e_unknown",t[t.e_circles=0]="e_circles",t[t.e_faceA=1]="e_faceA",t[t.e_faceB=2]="e_faceB"}(s||(s={}));class d{constructor(){this.points=h.MakeArray(o.z),this.localNormal=new a.A,this.localPoint=new a.A,this.type=s.e_unknown,this.pointCount=0}Reset(){for(let t=0;t<o.z;++t)this.points[t].Reset();this.localNormal.SetZero(),this.localPoint.SetZero(),this.type=s.e_unknown,this.pointCount=0}Copy(t){this.pointCount=t.pointCount;for(let e=0;e<o.z;++e)this.points[e].Copy(t.points[e]);return this.localNormal.Copy(t.localNormal),this.localPoint.Copy(t.localPoint),this.type=t.type,this}Clone(){return(new d).Copy(this)}}class m{constructor(){this.normal=new a.A,this.points=a.A.MakeArray(o.z),this.separations=Object(o.g)(o.z)}Initialize(t,e,i,n,r){if(0!==t.pointCount)switch(t.type){case s.e_circles:{this.normal.Set(1,0);const s=a.z.MulXV(e,t.localPoint,m.Initialize_s_pointA),l=a.z.MulXV(n,t.points[0].localPoint,m.Initialize_s_pointB);a.A.DistanceSquaredVV(s,l)>o.s&&a.A.SubVV(l,s,this.normal).SelfNormalize();const c=a.A.AddVMulSV(s,i,this.normal,m.Initialize_s_cA),u=a.A.SubVMulSV(l,r,this.normal,m.Initialize_s_cB);a.A.MidVV(c,u,this.points[0]),this.separations[0]=a.A.DotVV(a.A.SubVV(u,c,a.A.s_t0),this.normal)}break;case s.e_faceA:{a.t.MulRV(e.q,t.localNormal,this.normal);const s=a.z.MulXV(e,t.localPoint,m.Initialize_s_planePoint);for(let e=0;e<t.pointCount;++e){const o=a.z.MulXV(n,t.points[e].localPoint,m.Initialize_s_clipPoint),l=i-a.A.DotVV(a.A.SubVV(o,s,a.A.s_t0),this.normal),c=a.A.AddVMulSV(o,l,this.normal,m.Initialize_s_cA),u=a.A.SubVMulSV(o,r,this.normal,m.Initialize_s_cB);a.A.MidVV(c,u,this.points[e]),this.separations[e]=a.A.DotVV(a.A.SubVV(u,c,a.A.s_t0),this.normal)}}break;case s.e_faceB:{a.t.MulRV(n.q,t.localNormal,this.normal);const s=a.z.MulXV(n,t.localPoint,m.Initialize_s_planePoint);for(let n=0;n<t.pointCount;++n){const o=a.z.MulXV(e,t.points[n].localPoint,m.Initialize_s_clipPoint),l=r-a.A.DotVV(a.A.SubVV(o,s,a.A.s_t0),this.normal),c=a.A.AddVMulSV(o,l,this.normal,m.Initialize_s_cB),u=a.A.SubVMulSV(o,i,this.normal,m.Initialize_s_cA);a.A.MidVV(u,c,this.points[n]),this.separations[n]=a.A.DotVV(a.A.SubVV(u,c,a.A.s_t0),this.normal)}this.normal.SelfNeg()}}}}function p(t,e,i,n){let s;for(s=0;s<i.pointCount;++s){const e=i.points[s].id.key;t[s]=r.b2_removeState;for(let i=0,o=n.pointCount;i<o;++i)if(n.points[i].id.key===e){t[s]=r.b2_persistState;break}}for(;s<o.z;++s)t[s]=r.b2_nullState;for(s=0;s<n.pointCount;++s){const t=n.points[s].id.key;e[s]=r.b2_addState;for(let n=0,o=i.pointCount;n<o;++n)if(i.points[n].id.key===t){e[s]=r.b2_persistState;break}}for(;s<o.z;++s)e[s]=r.b2_nullState}m.Initialize_s_pointA=new a.A,m.Initialize_s_pointB=new a.A,m.Initialize_s_cA=new a.A,m.Initialize_s_cB=new a.A,m.Initialize_s_planePoint=new a.A,m.Initialize_s_clipPoint=new a.A,function(t){t[t.b2_nullState=0]="b2_nullState",t[t.b2_addState=1]="b2_addState",t[t.b2_persistState=2]="b2_persistState",t[t.b2_removeState=3]="b2_removeState"}(r||(r={}));class f{constructor(){this.v=new a.A,this.id=new u}static MakeArray(t){return Object(o.e)(t,t=>new f)}Copy(t){return this.v.Copy(t.v),this.id.Copy(t.id),this}}class _{constructor(){this.p1=new a.A,this.p2=new a.A,this.maxFraction=1}Copy(t){return this.p1.Copy(t.p1),this.p2.Copy(t.p2),this.maxFraction=t.maxFraction,this}}class g{constructor(){this.normal=new a.A,this.fraction=0}Copy(t){return this.normal.Copy(t.normal),this.fraction=t.fraction,this}}class v{constructor(){this.lowerBound=new a.A,this.upperBound=new a.A,this.m_cache_center=new a.A,this.m_cache_extent=new a.A}Copy(t){return this.lowerBound.Copy(t.lowerBound),this.upperBound.Copy(t.upperBound),this}IsValid(){const t=this.upperBound.x-this.lowerBound.x,e=this.upperBound.y-this.lowerBound.y;let i=t>=0&&e>=0;return i=i&&this.lowerBound.IsValid()&&this.upperBound.IsValid()}GetCenter(){return a.A.MidVV(this.lowerBound,this.upperBound,this.m_cache_center)}GetExtents(){return a.A.ExtVV(this.lowerBound,this.upperBound,this.m_cache_extent)}GetPerimeter(){return 2*(this.upperBound.x-this.lowerBound.x+(this.upperBound.y-this.lowerBound.y))}Combine1(t){return this.lowerBound.x=Object(a.n)(this.lowerBound.x,t.lowerBound.x),this.lowerBound.y=Object(a.n)(this.lowerBound.y,t.lowerBound.y),this.upperBound.x=Object(a.m)(this.upperBound.x,t.upperBound.x),this.upperBound.y=Object(a.m)(this.upperBound.y,t.upperBound.y),this}Combine2(t,e){return this.lowerBound.x=Object(a.n)(t.lowerBound.x,e.lowerBound.x),this.lowerBound.y=Object(a.n)(t.lowerBound.y,e.lowerBound.y),this.upperBound.x=Object(a.m)(t.upperBound.x,e.upperBound.x),this.upperBound.y=Object(a.m)(t.upperBound.y,e.upperBound.y),this}static Combine(t,e,i){return i.Combine2(t,e),i}Contains(t){let e=!0;return e=(e=(e=(e=e&&this.lowerBound.x<=t.lowerBound.x)&&this.lowerBound.y<=t.lowerBound.y)&&t.upperBound.x<=this.upperBound.x)&&t.upperBound.y<=this.upperBound.y}RayCast(t,e){let i=-o.x,n=o.x;const s=e.p1.x,r=e.p1.y,l=e.p2.x-e.p1.x,c=e.p2.y-e.p1.y,u=Object(a.a)(l),h=Object(a.a)(c),d=t.normal;if(u<o.r){if(s<this.lowerBound.x||this.upperBound.x<s)return!1}else{const t=1/l;let e=(this.lowerBound.x-s)*t,r=(this.upperBound.x-s)*t,o=-1;if(e>r){const t=e;e=r,r=t,o=1}if(e>i&&(d.x=o,d.y=0,i=e),i>(n=Object(a.n)(n,r)))return!1}if(h<o.r){if(r<this.lowerBound.y||this.upperBound.y<r)return!1}else{const t=1/c;let e=(this.lowerBound.y-r)*t,s=(this.upperBound.y-r)*t,o=-1;if(e>s){const t=e;e=s,s=t,o=1}if(e>i&&(d.x=0,d.y=o,i=e),i>(n=Object(a.n)(n,s)))return!1}return!(i<0||e.maxFraction<i)&&(t.fraction=i,!0)}TestOverlap(t){const e=t.lowerBound.x-this.upperBound.x,i=t.lowerBound.y-this.upperBound.y,n=this.lowerBound.x-t.upperBound.x,s=this.lowerBound.y-t.upperBound.y;return!(e>0||i>0)&&!(n>0||s>0)}}function y(t,e){const i=e.lowerBound.x-t.upperBound.x,n=e.lowerBound.y-t.upperBound.y,s=t.lowerBound.x-e.upperBound.x,r=t.lowerBound.y-e.upperBound.y;return!(i>0||n>0)&&!(s>0||r>0)}function x(t,e,i,s,r){let o=0;const l=e[0],c=e[1],u=a.A.DotVV(i,l.v)-s,h=a.A.DotVV(i,c.v)-s;if(u<=0&&t[o++].Copy(l),h<=0&&t[o++].Copy(c),u*h<0){const e=u/(u-h),i=t[o].v;i.x=l.v.x+e*(c.v.x-l.v.x),i.y=l.v.y+e*(c.v.y-l.v.y);const s=t[o].id;s.cf.indexA=r,s.cf.indexB=l.id.cf.indexB,s.cf.typeA=n.e_vertex,s.cf.typeB=n.e_face,++o}return o}const b=new l.b,A=new l.f,w=new l.c;function S(t,e,i,n,s,r){const a=b.Reset();a.proxyA.SetShape(t,e),a.proxyB.SetShape(i,n),a.transformA.Copy(s),a.transformB.Copy(r),a.useRadii=!0;const c=A.Reset();c.count=0;const u=w.Reset();return Object(l.a)(u,c,a),u.distance<10*o.r}},function(t,e,i){"use strict";i.d(e,"c",function(){return n}),i.d(e,"b",function(){return s}),i.d(e,"a",function(){return r}),i.d(e,"d",function(){return o});class n{constructor(t,e){arguments.length>1?(this.x=t,this.y=e):1==arguments.length&&null!=t?(this.x=0|t.x,this.y=0|t.y):(this.x=0,this.y=0)}static get(){return new n(...arguments)}static get empty(){return new n(0,0)}clone(){return new this.constructor(this.x,this.y)}add(t){let e=this.x,i=this.y;for(let t of arguments)null!=t&&(e+=t.x,i+=t.y);return new n(e,i)}sub(t){let e=this.x,i=this.y;for(let t of arguments)null!=t&&(e-=t.x,i-=t.y);return new n(e,i)}plus(t){return new n(this.x+t.x,this.y+t.y)}minus(t){return new n(this.x-t.x,this.y-t.y)}plus2(t,e){return new n(this.x+t,this.y+e)}minus2(t,e){return new n(this.x-t,this.y-e)}mul(t){return new n(this.x*t,this.y*t)}scale(t){return new n(this.x*t,this.y*t)}rotate(t){let e=Math.cos(t)*this.x-Math.sin(t)*this.y,i=Math.sin(t)*this.x+Math.cos(t)*this.y;return new n(e,i)}normalize(){let t=Math.sqrt(this.x*this.x+this.y*this.y);return new n(this.x/t,this.y/t)}length(){return Math.sqrt(x**2+y**2)}distance_sq(t){let e=this.x-t.x,i=this.y-t.y;return e*e+i*i}distance(t){let e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)}}class s{constructor(){if(4==arguments.length)this.left=arguments[0],this.top=arguments[1],this.width=arguments[2],this.height=arguments[3];else if(2==arguments.length)this.left=arguments[0].x,this.top=arguments[0].y,this.width=arguments[1].x,this.height=arguments[1].y;else if(arguments[0]instanceof s){const t=arguments[0];this.left=t.left,this.top=t.top,this.width=t.width,this.height=t.height}else this.left=0,this.top=0,this.width=0,this.height=0}copy(t){this.left=t.left,this.top=t.top,this.width=t.width,this.height=t.height}clone(){return new s(this)}get x(){return this.left}set x(t){this.left=t}get y(){return this.top}set y(t){this.top=t}get right(){return this.left+this.width}set right(t){this.width=t-this.left}get bottom(){return this.top+this.height}set bottom(t){this.height=t-this.top}get size(){return new n(this.width,this.height)}set size(t){this.width=t.width||t.x,this.height=t.height||t.y}get center(){return new n(this.left+.5*this.width,this.top+2*this.height/3)}set center(t){let e=.5*this.width,i=2*this.height/3;this.left=t.x-e,this.top=t.y-i}setCenter(t,e){let i=.5*this.width,n=2*this.height/3;this.left=t-i,this.top=e-n}collide(t){return this.left<t.right&&this.right>t.left&&this.top<t.bottom&&this.bottom>t.top}collide4f(t,e,i,n){return this.left<e&&this.right>t&&this.top<n&&this.bottom>i}collide4f2(t,e,i,n){const s=t-i,r=e-n,o=t+i,a=e+n;return this.left<o&&this.right>s&&this.top<a&&this.bottom>r}collide2f2x(t,e){const i=t-e,n=t+e;return this.left<n&&this.right>i}collide2f2y(t,e){const i=t-e,n=t+e;return this.top<n&&this.bottom>i}parse(t,e,i,n){this.left=t,this.top=e,this.right=i,this.bottom=n}static parse(t,e,i,n){return new s(t,e,i-t,n-e)}}class r{static nextInt(t){return Math.trunc(100*Math.random()%t)}static randInt(t,e){return Math.trunc(t+100*Math.random()%(e-t+1))}static nextBoolean(){return!(1&Math.trunc(100*Math.random()))}}function o(t,e,i){return Math.max(e,Math.min(t,i))}},function(t,e,i){"use strict";var n={};i.r(n),i.d(n,"create",function(){return u}),i.d(n,"clone",function(){return h}),i.d(n,"copy",function(){return d}),i.d(n,"identity",function(){return m}),i.d(n,"fromValues",function(){return p}),i.d(n,"set",function(){return f}),i.d(n,"invert",function(){return _}),i.d(n,"determinant",function(){return g}),i.d(n,"multiply",function(){return v}),i.d(n,"rotate",function(){return y}),i.d(n,"scale",function(){return x}),i.d(n,"translate",function(){return b}),i.d(n,"fromRotation",function(){return A}),i.d(n,"fromScaling",function(){return w}),i.d(n,"fromTranslation",function(){return S}),i.d(n,"str",function(){return C}),i.d(n,"frob",function(){return B}),i.d(n,"add",function(){return V}),i.d(n,"subtract",function(){return M}),i.d(n,"multiplyScalar",function(){return k}),i.d(n,"multiplyScalarAndAdd",function(){return P}),i.d(n,"exactEquals",function(){return I}),i.d(n,"equals",function(){return D}),i.d(n,"mul",function(){return T}),i.d(n,"sub",function(){return E});var s={};i.r(s),i.d(s,"create",function(){return $}),i.d(s,"clone",function(){return L}),i.d(s,"copy",function(){return R}),i.d(s,"fromValues",function(){return F}),i.d(s,"set",function(){return O}),i.d(s,"identity",function(){return j}),i.d(s,"transpose",function(){return G}),i.d(s,"invert",function(){return N}),i.d(s,"adjoint",function(){return q}),i.d(s,"determinant",function(){return z}),i.d(s,"multiply",function(){return H}),i.d(s,"translate",function(){return U}),i.d(s,"scale",function(){return W}),i.d(s,"rotate",function(){return J}),i.d(s,"rotateX",function(){return Y}),i.d(s,"rotateY",function(){return X}),i.d(s,"rotateZ",function(){return Q}),i.d(s,"fromTranslation",function(){return Z}),i.d(s,"fromScaling",function(){return K}),i.d(s,"fromRotation",function(){return tt}),i.d(s,"fromXRotation",function(){return et}),i.d(s,"fromYRotation",function(){return it}),i.d(s,"fromZRotation",function(){return nt}),i.d(s,"fromRotationTranslation",function(){return st}),i.d(s,"fromQuat2",function(){return rt}),i.d(s,"getTranslation",function(){return ot}),i.d(s,"getScaling",function(){return at}),i.d(s,"getRotation",function(){return lt}),i.d(s,"fromRotationTranslationScale",function(){return ct}),i.d(s,"fromRotationTranslationScaleOrigin",function(){return ut}),i.d(s,"fromQuat",function(){return ht}),i.d(s,"frustum",function(){return dt}),i.d(s,"perspective",function(){return mt}),i.d(s,"perspectiveFromFieldOfView",function(){return pt}),i.d(s,"ortho",function(){return ft}),i.d(s,"lookAt",function(){return _t}),i.d(s,"targetTo",function(){return gt}),i.d(s,"str",function(){return vt}),i.d(s,"frob",function(){return yt}),i.d(s,"add",function(){return xt}),i.d(s,"subtract",function(){return bt}),i.d(s,"multiplyScalar",function(){return At}),i.d(s,"multiplyScalarAndAdd",function(){return wt}),i.d(s,"exactEquals",function(){return St}),i.d(s,"equals",function(){return Ct}),i.d(s,"mul",function(){return Bt}),i.d(s,"sub",function(){return Vt});var r={};i.r(r),i.d(r,"create",function(){return Lt}),i.d(r,"identity",function(){return Rt}),i.d(r,"setAxisAngle",function(){return Ft}),i.d(r,"getAxisAngle",function(){return Ot}),i.d(r,"multiply",function(){return jt}),i.d(r,"rotateX",function(){return Gt}),i.d(r,"rotateY",function(){return Nt}),i.d(r,"rotateZ",function(){return qt}),i.d(r,"calculateW",function(){return zt}),i.d(r,"slerp",function(){return Ht}),i.d(r,"random",function(){return Ut}),i.d(r,"invert",function(){return Wt}),i.d(r,"conjugate",function(){return Jt}),i.d(r,"fromMat3",function(){return Yt}),i.d(r,"fromEuler",function(){return Xt}),i.d(r,"str",function(){return Qt}),i.d(r,"clone",function(){return Zt}),i.d(r,"fromValues",function(){return Kt}),i.d(r,"copy",function(){return te}),i.d(r,"set",function(){return ee}),i.d(r,"add",function(){return ie}),i.d(r,"mul",function(){return ne}),i.d(r,"scale",function(){return se}),i.d(r,"dot",function(){return re}),i.d(r,"lerp",function(){return oe}),i.d(r,"length",function(){return ae}),i.d(r,"len",function(){return le}),i.d(r,"squaredLength",function(){return ce}),i.d(r,"sqrLen",function(){return ue}),i.d(r,"normalize",function(){return he}),i.d(r,"exactEquals",function(){return de}),i.d(r,"equals",function(){return me}),i.d(r,"rotationTo",function(){return pe}),i.d(r,"sqlerp",function(){return fe}),i.d(r,"setAxes",function(){return _e});var o={};i.r(o),i.d(o,"create",function(){return ge}),i.d(o,"clone",function(){return ve}),i.d(o,"fromValues",function(){return ye}),i.d(o,"copy",function(){return xe}),i.d(o,"set",function(){return be}),i.d(o,"add",function(){return Ae}),i.d(o,"subtract",function(){return we}),i.d(o,"multiply",function(){return Se}),i.d(o,"divide",function(){return Ce}),i.d(o,"ceil",function(){return Be}),i.d(o,"floor",function(){return Ve}),i.d(o,"min",function(){return Me}),i.d(o,"max",function(){return ke}),i.d(o,"round",function(){return Pe}),i.d(o,"scale",function(){return Ie}),i.d(o,"scaleAndAdd",function(){return De}),i.d(o,"distance",function(){return Te}),i.d(o,"squaredDistance",function(){return Ee}),i.d(o,"length",function(){return $e}),i.d(o,"squaredLength",function(){return Le}),i.d(o,"negate",function(){return Re}),i.d(o,"inverse",function(){return Fe}),i.d(o,"normalize",function(){return Oe}),i.d(o,"dot",function(){return je}),i.d(o,"cross",function(){return Ge}),i.d(o,"lerp",function(){return Ne}),i.d(o,"random",function(){return qe}),i.d(o,"transformMat2",function(){return ze}),i.d(o,"transformMat2d",function(){return He}),i.d(o,"transformMat3",function(){return Ue}),i.d(o,"transformMat4",function(){return We}),i.d(o,"rotate",function(){return Je}),i.d(o,"angle",function(){return Ye}),i.d(o,"str",function(){return Xe}),i.d(o,"exactEquals",function(){return Qe}),i.d(o,"equals",function(){return Ze}),i.d(o,"len",function(){return Ke}),i.d(o,"sub",function(){return ti}),i.d(o,"mul",function(){return ei}),i.d(o,"div",function(){return ii}),i.d(o,"dist",function(){return ni}),i.d(o,"sqrDist",function(){return si}),i.d(o,"sqrLen",function(){return ri}),i.d(o,"forEach",function(){return oi});const a=1e-6;let l="undefined"!=typeof Float32Array?Float32Array:Array;const c=Math.random;Math.PI;function u(){let t=new l(6);return l!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function h(t){let e=new l(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function d(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function m(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function p(t,e,i,n,s,r){let o=new l(6);return o[0]=t,o[1]=e,o[2]=i,o[3]=n,o[4]=s,o[5]=r,o}function f(t,e,i,n,s,r,o){return t[0]=e,t[1]=i,t[2]=n,t[3]=s,t[4]=r,t[5]=o,t}function _(t,e){let i=e[0],n=e[1],s=e[2],r=e[3],o=e[4],a=e[5],l=i*r-n*s;return l?(l=1/l,t[0]=r*l,t[1]=-n*l,t[2]=-s*l,t[3]=i*l,t[4]=(s*a-r*o)*l,t[5]=(n*o-i*a)*l,t):null}function g(t){return t[0]*t[3]-t[1]*t[2]}function v(t,e,i){let n=e[0],s=e[1],r=e[2],o=e[3],a=e[4],l=e[5],c=i[0],u=i[1],h=i[2],d=i[3],m=i[4],p=i[5];return t[0]=n*c+r*u,t[1]=s*c+o*u,t[2]=n*h+r*d,t[3]=s*h+o*d,t[4]=n*m+r*p+a,t[5]=s*m+o*p+l,t}function y(t,e,i){let n=e[0],s=e[1],r=e[2],o=e[3],a=e[4],l=e[5],c=Math.sin(i),u=Math.cos(i);return t[0]=n*u+r*c,t[1]=s*u+o*c,t[2]=n*-c+r*u,t[3]=s*-c+o*u,t[4]=a,t[5]=l,t}function x(t,e,i){let n=e[0],s=e[1],r=e[2],o=e[3],a=e[4],l=e[5],c=i[0],u=i[1];return t[0]=n*c,t[1]=s*c,t[2]=r*u,t[3]=o*u,t[4]=a,t[5]=l,t}function b(t,e,i){let n=e[0],s=e[1],r=e[2],o=e[3],a=e[4],l=e[5],c=i[0],u=i[1];return t[0]=n,t[1]=s,t[2]=r,t[3]=o,t[4]=n*c+r*u+a,t[5]=s*c+o*u+l,t}function A(t,e){let i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=i,t[2]=-i,t[3]=n,t[4]=0,t[5]=0,t}function w(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function S(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function C(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function B(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)}function V(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t}function M(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t}function k(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t}function P(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t[3]=e[3]+i[3]*n,t[4]=e[4]+i[4]*n,t[5]=e[5]+i[5]*n,t}function I(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function D(t,e){let i=t[0],n=t[1],s=t[2],r=t[3],o=t[4],l=t[5],c=e[0],u=e[1],h=e[2],d=e[3],m=e[4],p=e[5];return Math.abs(i-c)<=a*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(n-u)<=a*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(s-h)<=a*Math.max(1,Math.abs(s),Math.abs(h))&&Math.abs(r-d)<=a*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(o-m)<=a*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(l-p)<=a*Math.max(1,Math.abs(l),Math.abs(p))}const T=v,E=M;function $(){let t=new l(16);return l!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function L(t){let e=new l(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function R(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function F(t,e,i,n,s,r,o,a,c,u,h,d,m,p,f,_){let g=new l(16);return g[0]=t,g[1]=e,g[2]=i,g[3]=n,g[4]=s,g[5]=r,g[6]=o,g[7]=a,g[8]=c,g[9]=u,g[10]=h,g[11]=d,g[12]=m,g[13]=p,g[14]=f,g[15]=_,g}function O(t,e,i,n,s,r,o,a,l,c,u,h,d,m,p,f,_){return t[0]=e,t[1]=i,t[2]=n,t[3]=s,t[4]=r,t[5]=o,t[6]=a,t[7]=l,t[8]=c,t[9]=u,t[10]=h,t[11]=d,t[12]=m,t[13]=p,t[14]=f,t[15]=_,t}function j(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function G(t,e){if(t===e){let i=e[1],n=e[2],s=e[3],r=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=i,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=r,t[11]=e[14],t[12]=s,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function N(t,e){let i=e[0],n=e[1],s=e[2],r=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],m=e[11],p=e[12],f=e[13],_=e[14],g=e[15],v=i*a-n*o,y=i*l-s*o,x=i*c-r*o,b=n*l-s*a,A=n*c-r*a,w=s*c-r*l,S=u*f-h*p,C=u*_-d*p,B=u*g-m*p,V=h*_-d*f,M=h*g-m*f,k=d*g-m*_,P=v*k-y*M+x*V+b*B-A*C+w*S;return P?(P=1/P,t[0]=(a*k-l*M+c*V)*P,t[1]=(s*M-n*k-r*V)*P,t[2]=(f*w-_*A+g*b)*P,t[3]=(d*A-h*w-m*b)*P,t[4]=(l*B-o*k-c*C)*P,t[5]=(i*k-s*B+r*C)*P,t[6]=(_*x-p*w-g*y)*P,t[7]=(u*w-d*x+m*y)*P,t[8]=(o*M-a*B+c*S)*P,t[9]=(n*B-i*M-r*S)*P,t[10]=(p*A-f*x+g*v)*P,t[11]=(h*x-u*A-m*v)*P,t[12]=(a*C-o*V-l*S)*P,t[13]=(i*V-n*C+s*S)*P,t[14]=(f*y-p*b-_*v)*P,t[15]=(u*b-h*y+d*v)*P,t):null}function q(t,e){let i=e[0],n=e[1],s=e[2],r=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],m=e[11],p=e[12],f=e[13],_=e[14],g=e[15];return t[0]=a*(d*g-m*_)-h*(l*g-c*_)+f*(l*m-c*d),t[1]=-(n*(d*g-m*_)-h*(s*g-r*_)+f*(s*m-r*d)),t[2]=n*(l*g-c*_)-a*(s*g-r*_)+f*(s*c-r*l),t[3]=-(n*(l*m-c*d)-a*(s*m-r*d)+h*(s*c-r*l)),t[4]=-(o*(d*g-m*_)-u*(l*g-c*_)+p*(l*m-c*d)),t[5]=i*(d*g-m*_)-u*(s*g-r*_)+p*(s*m-r*d),t[6]=-(i*(l*g-c*_)-o*(s*g-r*_)+p*(s*c-r*l)),t[7]=i*(l*m-c*d)-o*(s*m-r*d)+u*(s*c-r*l),t[8]=o*(h*g-m*f)-u*(a*g-c*f)+p*(a*m-c*h),t[9]=-(i*(h*g-m*f)-u*(n*g-r*f)+p*(n*m-r*h)),t[10]=i*(a*g-c*f)-o*(n*g-r*f)+p*(n*c-r*a),t[11]=-(i*(a*m-c*h)-o*(n*m-r*h)+u*(n*c-r*a)),t[12]=-(o*(h*_-d*f)-u*(a*_-l*f)+p*(a*d-l*h)),t[13]=i*(h*_-d*f)-u*(n*_-s*f)+p*(n*d-s*h),t[14]=-(i*(a*_-l*f)-o*(n*_-s*f)+p*(n*l-s*a)),t[15]=i*(a*d-l*h)-o*(n*d-s*h)+u*(n*l-s*a),t}function z(t){let e=t[0],i=t[1],n=t[2],s=t[3],r=t[4],o=t[5],a=t[6],l=t[7],c=t[8],u=t[9],h=t[10],d=t[11],m=t[12],p=t[13],f=t[14],_=t[15];return(e*o-i*r)*(h*_-d*f)-(e*a-n*r)*(u*_-d*p)+(e*l-s*r)*(u*f-h*p)+(i*a-n*o)*(c*_-d*m)-(i*l-s*o)*(c*f-h*m)+(n*l-s*a)*(c*p-u*m)}function H(t,e,i){let n=e[0],s=e[1],r=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=e[9],m=e[10],p=e[11],f=e[12],_=e[13],g=e[14],v=e[15],y=i[0],x=i[1],b=i[2],A=i[3];return t[0]=y*n+x*a+b*h+A*f,t[1]=y*s+x*l+b*d+A*_,t[2]=y*r+x*c+b*m+A*g,t[3]=y*o+x*u+b*p+A*v,y=i[4],x=i[5],b=i[6],A=i[7],t[4]=y*n+x*a+b*h+A*f,t[5]=y*s+x*l+b*d+A*_,t[6]=y*r+x*c+b*m+A*g,t[7]=y*o+x*u+b*p+A*v,y=i[8],x=i[9],b=i[10],A=i[11],t[8]=y*n+x*a+b*h+A*f,t[9]=y*s+x*l+b*d+A*_,t[10]=y*r+x*c+b*m+A*g,t[11]=y*o+x*u+b*p+A*v,y=i[12],x=i[13],b=i[14],A=i[15],t[12]=y*n+x*a+b*h+A*f,t[13]=y*s+x*l+b*d+A*_,t[14]=y*r+x*c+b*m+A*g,t[15]=y*o+x*u+b*p+A*v,t}function U(t,e,i){let n,s,r,o,a,l,c,u,h,d,m,p,f=i[0],_=i[1],g=i[2];return e===t?(t[12]=e[0]*f+e[4]*_+e[8]*g+e[12],t[13]=e[1]*f+e[5]*_+e[9]*g+e[13],t[14]=e[2]*f+e[6]*_+e[10]*g+e[14],t[15]=e[3]*f+e[7]*_+e[11]*g+e[15]):(n=e[0],s=e[1],r=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=e[9],m=e[10],p=e[11],t[0]=n,t[1]=s,t[2]=r,t[3]=o,t[4]=a,t[5]=l,t[6]=c,t[7]=u,t[8]=h,t[9]=d,t[10]=m,t[11]=p,t[12]=n*f+a*_+h*g+e[12],t[13]=s*f+l*_+d*g+e[13],t[14]=r*f+c*_+m*g+e[14],t[15]=o*f+u*_+p*g+e[15]),t}function W(t,e,i){let n=i[0],s=i[1],r=i[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*s,t[5]=e[5]*s,t[6]=e[6]*s,t[7]=e[7]*s,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function J(t,e,i,n){let s,r,o,l,c,u,h,d,m,p,f,_,g,v,y,x,b,A,w,S,C,B,V,M,k=n[0],P=n[1],I=n[2],D=Math.sqrt(k*k+P*P+I*I);return D<a?null:(k*=D=1/D,P*=D,I*=D,s=Math.sin(i),o=1-(r=Math.cos(i)),l=e[0],c=e[1],u=e[2],h=e[3],d=e[4],m=e[5],p=e[6],f=e[7],_=e[8],g=e[9],v=e[10],y=e[11],x=k*k*o+r,b=P*k*o+I*s,A=I*k*o-P*s,w=k*P*o-I*s,S=P*P*o+r,C=I*P*o+k*s,B=k*I*o+P*s,V=P*I*o-k*s,M=I*I*o+r,t[0]=l*x+d*b+_*A,t[1]=c*x+m*b+g*A,t[2]=u*x+p*b+v*A,t[3]=h*x+f*b+y*A,t[4]=l*w+d*S+_*C,t[5]=c*w+m*S+g*C,t[6]=u*w+p*S+v*C,t[7]=h*w+f*S+y*C,t[8]=l*B+d*V+_*M,t[9]=c*B+m*V+g*M,t[10]=u*B+p*V+v*M,t[11]=h*B+f*V+y*M,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function Y(t,e,i){let n=Math.sin(i),s=Math.cos(i),r=e[4],o=e[5],a=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=r*s+c*n,t[5]=o*s+u*n,t[6]=a*s+h*n,t[7]=l*s+d*n,t[8]=c*s-r*n,t[9]=u*s-o*n,t[10]=h*s-a*n,t[11]=d*s-l*n,t}function X(t,e,i){let n=Math.sin(i),s=Math.cos(i),r=e[0],o=e[1],a=e[2],l=e[3],c=e[8],u=e[9],h=e[10],d=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=r*s-c*n,t[1]=o*s-u*n,t[2]=a*s-h*n,t[3]=l*s-d*n,t[8]=r*n+c*s,t[9]=o*n+u*s,t[10]=a*n+h*s,t[11]=l*n+d*s,t}function Q(t,e,i){let n=Math.sin(i),s=Math.cos(i),r=e[0],o=e[1],a=e[2],l=e[3],c=e[4],u=e[5],h=e[6],d=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=r*s+c*n,t[1]=o*s+u*n,t[2]=a*s+h*n,t[3]=l*s+d*n,t[4]=c*s-r*n,t[5]=u*s-o*n,t[6]=h*s-a*n,t[7]=d*s-l*n,t}function Z(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function K(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function tt(t,e,i){let n,s,r,o=i[0],l=i[1],c=i[2],u=Math.sqrt(o*o+l*l+c*c);return u<a?null:(o*=u=1/u,l*=u,c*=u,n=Math.sin(e),r=1-(s=Math.cos(e)),t[0]=o*o*r+s,t[1]=l*o*r+c*n,t[2]=c*o*r-l*n,t[3]=0,t[4]=o*l*r-c*n,t[5]=l*l*r+s,t[6]=c*l*r+o*n,t[7]=0,t[8]=o*c*r+l*n,t[9]=l*c*r-o*n,t[10]=c*c*r+s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function et(t,e){let i=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function it(t,e){let i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function nt(t,e){let i=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function st(t,e,i){let n=e[0],s=e[1],r=e[2],o=e[3],a=n+n,l=s+s,c=r+r,u=n*a,h=n*l,d=n*c,m=s*l,p=s*c,f=r*c,_=o*a,g=o*l,v=o*c;return t[0]=1-(m+f),t[1]=h+v,t[2]=d-g,t[3]=0,t[4]=h-v,t[5]=1-(u+f),t[6]=p+_,t[7]=0,t[8]=d+g,t[9]=p-_,t[10]=1-(u+m),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function rt(t,e){let i=new l(3),n=-e[0],s=-e[1],r=-e[2],o=e[3],a=e[4],c=e[5],u=e[6],h=e[7],d=n*n+s*s+r*r+o*o;return d>0?(i[0]=2*(a*o+h*n+c*r-u*s)/d,i[1]=2*(c*o+h*s+u*n-a*r)/d,i[2]=2*(u*o+h*r+a*s-c*n)/d):(i[0]=2*(a*o+h*n+c*r-u*s),i[1]=2*(c*o+h*s+u*n-a*r),i[2]=2*(u*o+h*r+a*s-c*n)),st(t,e,i),t}function ot(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function at(t,e){let i=e[0],n=e[1],s=e[2],r=e[4],o=e[5],a=e[6],l=e[8],c=e[9],u=e[10];return t[0]=Math.sqrt(i*i+n*n+s*s),t[1]=Math.sqrt(r*r+o*o+a*a),t[2]=Math.sqrt(l*l+c*c+u*u),t}function lt(t,e){let i=e[0]+e[5]+e[10],n=0;return i>0?(n=2*Math.sqrt(i+1),t[3]=.25*n,t[0]=(e[6]-e[9])/n,t[1]=(e[8]-e[2])/n,t[2]=(e[1]-e[4])/n):e[0]>e[5]&&e[0]>e[10]?(n=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/n,t[0]=.25*n,t[1]=(e[1]+e[4])/n,t[2]=(e[8]+e[2])/n):e[5]>e[10]?(n=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/n,t[0]=(e[1]+e[4])/n,t[1]=.25*n,t[2]=(e[6]+e[9])/n):(n=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/n,t[0]=(e[8]+e[2])/n,t[1]=(e[6]+e[9])/n,t[2]=.25*n),t}function ct(t,e,i,n){let s=e[0],r=e[1],o=e[2],a=e[3],l=s+s,c=r+r,u=o+o,h=s*l,d=s*c,m=s*u,p=r*c,f=r*u,_=o*u,g=a*l,v=a*c,y=a*u,x=n[0],b=n[1],A=n[2];return t[0]=(1-(p+_))*x,t[1]=(d+y)*x,t[2]=(m-v)*x,t[3]=0,t[4]=(d-y)*b,t[5]=(1-(h+_))*b,t[6]=(f+g)*b,t[7]=0,t[8]=(m+v)*A,t[9]=(f-g)*A,t[10]=(1-(h+p))*A,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t}function ut(t,e,i,n,s){let r=e[0],o=e[1],a=e[2],l=e[3],c=r+r,u=o+o,h=a+a,d=r*c,m=r*u,p=r*h,f=o*u,_=o*h,g=a*h,v=l*c,y=l*u,x=l*h,b=n[0],A=n[1],w=n[2],S=s[0],C=s[1],B=s[2],V=(1-(f+g))*b,M=(m+x)*b,k=(p-y)*b,P=(m-x)*A,I=(1-(d+g))*A,D=(_+v)*A,T=(p+y)*w,E=(_-v)*w,$=(1-(d+f))*w;return t[0]=V,t[1]=M,t[2]=k,t[3]=0,t[4]=P,t[5]=I,t[6]=D,t[7]=0,t[8]=T,t[9]=E,t[10]=$,t[11]=0,t[12]=i[0]+S-(V*S+P*C+T*B),t[13]=i[1]+C-(M*S+I*C+E*B),t[14]=i[2]+B-(k*S+D*C+$*B),t[15]=1,t}function ht(t,e){let i=e[0],n=e[1],s=e[2],r=e[3],o=i+i,a=n+n,l=s+s,c=i*o,u=n*o,h=n*a,d=s*o,m=s*a,p=s*l,f=r*o,_=r*a,g=r*l;return t[0]=1-h-p,t[1]=u+g,t[2]=d-_,t[3]=0,t[4]=u-g,t[5]=1-c-p,t[6]=m+f,t[7]=0,t[8]=d+_,t[9]=m-f,t[10]=1-c-h,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function dt(t,e,i,n,s,r,o){let a=1/(i-e),l=1/(s-n),c=1/(r-o);return t[0]=2*r*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*r*l,t[6]=0,t[7]=0,t[8]=(i+e)*a,t[9]=(s+n)*l,t[10]=(o+r)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*r*2*c,t[15]=0,t}function mt(t,e,i,n,s){let r,o=1/Math.tan(e/2);return t[0]=o/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=s&&s!==1/0?(r=1/(n-s),t[10]=(s+n)*r,t[14]=2*s*n*r):(t[10]=-1,t[14]=-2*n),t}function pt(t,e,i,n){let s=Math.tan(e.upDegrees*Math.PI/180),r=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),a=Math.tan(e.rightDegrees*Math.PI/180),l=2/(o+a),c=2/(s+r);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-(o-a)*l*.5,t[9]=(s-r)*c*.5,t[10]=n/(i-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*i/(i-n),t[15]=0,t}function ft(t,e,i,n,s,r,o){let a=1/(e-i),l=1/(n-s),c=1/(r-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+i)*a,t[13]=(s+n)*l,t[14]=(o+r)*c,t[15]=1,t}function _t(t,e,i,n){let s,r,o,l,c,u,h,d,m,p,f=e[0],_=e[1],g=e[2],v=n[0],y=n[1],x=n[2],b=i[0],A=i[1],w=i[2];return Math.abs(f-b)<a&&Math.abs(_-A)<a&&Math.abs(g-w)<a?j(t):(h=f-b,d=_-A,m=g-w,s=y*(m*=p=1/Math.sqrt(h*h+d*d+m*m))-x*(d*=p),r=x*(h*=p)-v*m,o=v*d-y*h,(p=Math.sqrt(s*s+r*r+o*o))?(s*=p=1/p,r*=p,o*=p):(s=0,r=0,o=0),l=d*o-m*r,c=m*s-h*o,u=h*r-d*s,(p=Math.sqrt(l*l+c*c+u*u))?(l*=p=1/p,c*=p,u*=p):(l=0,c=0,u=0),t[0]=s,t[1]=l,t[2]=h,t[3]=0,t[4]=r,t[5]=c,t[6]=d,t[7]=0,t[8]=o,t[9]=u,t[10]=m,t[11]=0,t[12]=-(s*f+r*_+o*g),t[13]=-(l*f+c*_+u*g),t[14]=-(h*f+d*_+m*g),t[15]=1,t)}function gt(t,e,i,n){let s=e[0],r=e[1],o=e[2],a=n[0],l=n[1],c=n[2],u=s-i[0],h=r-i[1],d=o-i[2],m=u*u+h*h+d*d;m>0&&(u*=m=1/Math.sqrt(m),h*=m,d*=m);let p=l*d-c*h,f=c*u-a*d,_=a*h-l*u;return(m=p*p+f*f+_*_)>0&&(p*=m=1/Math.sqrt(m),f*=m,_*=m),t[0]=p,t[1]=f,t[2]=_,t[3]=0,t[4]=h*_-d*f,t[5]=d*p-u*_,t[6]=u*f-h*p,t[7]=0,t[8]=u,t[9]=h,t[10]=d,t[11]=0,t[12]=s,t[13]=r,t[14]=o,t[15]=1,t}function vt(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function yt(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))}function xt(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t[4]=e[4]+i[4],t[5]=e[5]+i[5],t[6]=e[6]+i[6],t[7]=e[7]+i[7],t[8]=e[8]+i[8],t[9]=e[9]+i[9],t[10]=e[10]+i[10],t[11]=e[11]+i[11],t[12]=e[12]+i[12],t[13]=e[13]+i[13],t[14]=e[14]+i[14],t[15]=e[15]+i[15],t}function bt(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t[2]=e[2]-i[2],t[3]=e[3]-i[3],t[4]=e[4]-i[4],t[5]=e[5]-i[5],t[6]=e[6]-i[6],t[7]=e[7]-i[7],t[8]=e[8]-i[8],t[9]=e[9]-i[9],t[10]=e[10]-i[10],t[11]=e[11]-i[11],t[12]=e[12]-i[12],t[13]=e[13]-i[13],t[14]=e[14]-i[14],t[15]=e[15]-i[15],t}function At(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12]*i,t[13]=e[13]*i,t[14]=e[14]*i,t[15]=e[15]*i,t}function wt(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t[2]=e[2]+i[2]*n,t[3]=e[3]+i[3]*n,t[4]=e[4]+i[4]*n,t[5]=e[5]+i[5]*n,t[6]=e[6]+i[6]*n,t[7]=e[7]+i[7]*n,t[8]=e[8]+i[8]*n,t[9]=e[9]+i[9]*n,t[10]=e[10]+i[10]*n,t[11]=e[11]+i[11]*n,t[12]=e[12]+i[12]*n,t[13]=e[13]+i[13]*n,t[14]=e[14]+i[14]*n,t[15]=e[15]+i[15]*n,t}function St(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function Ct(t,e){let i=t[0],n=t[1],s=t[2],r=t[3],o=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=t[9],m=t[10],p=t[11],f=t[12],_=t[13],g=t[14],v=t[15],y=e[0],x=e[1],b=e[2],A=e[3],w=e[4],S=e[5],C=e[6],B=e[7],V=e[8],M=e[9],k=e[10],P=e[11],I=e[12],D=e[13],T=e[14],E=e[15];return Math.abs(i-y)<=a*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(n-x)<=a*Math.max(1,Math.abs(n),Math.abs(x))&&Math.abs(s-b)<=a*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(r-A)<=a*Math.max(1,Math.abs(r),Math.abs(A))&&Math.abs(o-w)<=a*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(l-S)<=a*Math.max(1,Math.abs(l),Math.abs(S))&&Math.abs(c-C)<=a*Math.max(1,Math.abs(c),Math.abs(C))&&Math.abs(u-B)<=a*Math.max(1,Math.abs(u),Math.abs(B))&&Math.abs(h-V)<=a*Math.max(1,Math.abs(h),Math.abs(V))&&Math.abs(d-M)<=a*Math.max(1,Math.abs(d),Math.abs(M))&&Math.abs(m-k)<=a*Math.max(1,Math.abs(m),Math.abs(k))&&Math.abs(p-P)<=a*Math.max(1,Math.abs(p),Math.abs(P))&&Math.abs(f-I)<=a*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(_-D)<=a*Math.max(1,Math.abs(_),Math.abs(D))&&Math.abs(g-T)<=a*Math.max(1,Math.abs(g),Math.abs(T))&&Math.abs(v-E)<=a*Math.max(1,Math.abs(v),Math.abs(E))}const Bt=H,Vt=bt;function Mt(){let t=new l(3);return l!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function kt(t,e,i){let n=new l(3);return n[0]=t,n[1]=e,n[2]=i,n}function Pt(t,e){let i=e[0],n=e[1],s=e[2],r=i*i+n*n+s*s;return r>0&&(r=1/Math.sqrt(r),t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r),t}function It(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function Dt(t,e,i){let n=e[0],s=e[1],r=e[2],o=i[0],a=i[1],l=i[2];return t[0]=s*l-r*a,t[1]=r*o-n*l,t[2]=n*a-s*o,t}const Tt=function(t){let e=t[0],i=t[1],n=t[2];return Math.sqrt(e*e+i*i+n*n)};!function(){let t=Mt()}();function Et(t){let e=t[0],i=t[1],n=t[2],s=t[3];return Math.sqrt(e*e+i*i+n*n+s*s)}function $t(t){let e=t[0],i=t[1],n=t[2],s=t[3];return e*e+i*i+n*n+s*s}!function(){let t=function(){let t=new l(4);return l!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}()}();function Lt(){let t=new l(4);return l!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function Rt(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Ft(t,e,i){i*=.5;let n=Math.sin(i);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(i),t}function Ot(t,e){let i=2*Math.acos(e[3]),n=Math.sin(i/2);return n>a?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=1,t[1]=0,t[2]=0),i}function jt(t,e,i){let n=e[0],s=e[1],r=e[2],o=e[3],a=i[0],l=i[1],c=i[2],u=i[3];return t[0]=n*u+o*a+s*c-r*l,t[1]=s*u+o*l+r*a-n*c,t[2]=r*u+o*c+n*l-s*a,t[3]=o*u-n*a-s*l-r*c,t}function Gt(t,e,i){i*=.5;let n=e[0],s=e[1],r=e[2],o=e[3],a=Math.sin(i),l=Math.cos(i);return t[0]=n*l+o*a,t[1]=s*l+r*a,t[2]=r*l-s*a,t[3]=o*l-n*a,t}function Nt(t,e,i){i*=.5;let n=e[0],s=e[1],r=e[2],o=e[3],a=Math.sin(i),l=Math.cos(i);return t[0]=n*l-r*a,t[1]=s*l+o*a,t[2]=r*l+n*a,t[3]=o*l-s*a,t}function qt(t,e,i){i*=.5;let n=e[0],s=e[1],r=e[2],o=e[3],a=Math.sin(i),l=Math.cos(i);return t[0]=n*l+s*a,t[1]=s*l-n*a,t[2]=r*l+o*a,t[3]=o*l-r*a,t}function zt(t,e){let i=e[0],n=e[1],s=e[2];return t[0]=i,t[1]=n,t[2]=s,t[3]=Math.sqrt(Math.abs(1-i*i-n*n-s*s)),t}function Ht(t,e,i,n){let s,r,o,l,c,u=e[0],h=e[1],d=e[2],m=e[3],p=i[0],f=i[1],_=i[2],g=i[3];return(r=u*p+h*f+d*_+m*g)<0&&(r=-r,p=-p,f=-f,_=-_,g=-g),1-r>a?(s=Math.acos(r),o=Math.sin(s),l=Math.sin((1-n)*s)/o,c=Math.sin(n*s)/o):(l=1-n,c=n),t[0]=l*u+c*p,t[1]=l*h+c*f,t[2]=l*d+c*_,t[3]=l*m+c*g,t}function Ut(t){let e=c(),i=c(),n=c(),s=Math.sqrt(1-e),r=Math.sqrt(e);return t[0]=s*Math.sin(2*Math.PI*i),t[1]=s*Math.cos(2*Math.PI*i),t[2]=r*Math.sin(2*Math.PI*n),t[3]=r*Math.cos(2*Math.PI*n),t}function Wt(t,e){let i=e[0],n=e[1],s=e[2],r=e[3],o=i*i+n*n+s*s+r*r,a=o?1/o:0;return t[0]=-i*a,t[1]=-n*a,t[2]=-s*a,t[3]=r*a,t}function Jt(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function Yt(t,e){let i,n=e[0]+e[4]+e[8];if(n>0)i=Math.sqrt(n+1),t[3]=.5*i,i=.5/i,t[0]=(e[5]-e[7])*i,t[1]=(e[6]-e[2])*i,t[2]=(e[1]-e[3])*i;else{let n=0;e[4]>e[0]&&(n=1),e[8]>e[3*n+n]&&(n=2);let s=(n+1)%3,r=(n+2)%3;i=Math.sqrt(e[3*n+n]-e[3*s+s]-e[3*r+r]+1),t[n]=.5*i,i=.5/i,t[3]=(e[3*s+r]-e[3*r+s])*i,t[s]=(e[3*s+n]+e[3*n+s])*i,t[r]=(e[3*r+n]+e[3*n+r])*i}return t}function Xt(t,e,i,n){let s=.5*Math.PI/180;e*=s,i*=s,n*=s;let r=Math.sin(e),o=Math.cos(e),a=Math.sin(i),l=Math.cos(i),c=Math.sin(n),u=Math.cos(n);return t[0]=r*l*u-o*a*c,t[1]=o*a*u+r*l*c,t[2]=o*l*c-r*a*u,t[3]=o*l*u+r*a*c,t}function Qt(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}const Zt=function(t){let e=new l(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},Kt=function(t,e,i,n){let s=new l(4);return s[0]=t,s[1]=e,s[2]=i,s[3]=n,s},te=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},ee=function(t,e,i,n,s){return t[0]=e,t[1]=i,t[2]=n,t[3]=s,t},ie=function(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t[2]=e[2]+i[2],t[3]=e[3]+i[3],t},ne=jt,se=function(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t[3]=e[3]*i,t},re=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},oe=function(t,e,i,n){let s=e[0],r=e[1],o=e[2],a=e[3];return t[0]=s+n*(i[0]-s),t[1]=r+n*(i[1]-r),t[2]=o+n*(i[2]-o),t[3]=a+n*(i[3]-a),t},ae=Et,le=ae,ce=$t,ue=ce,he=function(t,e){let i=e[0],n=e[1],s=e[2],r=e[3],o=i*i+n*n+s*s+r*r;return o>0&&(o=1/Math.sqrt(o),t[0]=i*o,t[1]=n*o,t[2]=s*o,t[3]=r*o),t},de=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},me=function(t,e){let i=t[0],n=t[1],s=t[2],r=t[3],o=e[0],l=e[1],c=e[2],u=e[3];return Math.abs(i-o)<=a*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(n-l)<=a*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(s-c)<=a*Math.max(1,Math.abs(s),Math.abs(c))&&Math.abs(r-u)<=a*Math.max(1,Math.abs(r),Math.abs(u))},pe=function(){let t=Mt(),e=kt(1,0,0),i=kt(0,1,0);return function(n,s,r){let o=It(s,r);return o<-.999999?(Dt(t,e,s),Tt(t)<1e-6&&Dt(t,i,s),Pt(t,t),Ft(n,t,Math.PI),n):o>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(Dt(t,s,r),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=1+o,he(n,n))}}(),fe=function(){let t=Lt(),e=Lt();return function(i,n,s,r,o,a){return Ht(t,n,o,a),Ht(e,s,r,a),Ht(i,t,e,2*a*(1-a)),i}}(),_e=function(){let t=function(){let t=new l(9);return l!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}();return function(e,i,n,s){return t[0]=n[0],t[3]=n[1],t[6]=n[2],t[1]=s[0],t[4]=s[1],t[7]=s[2],t[2]=-i[0],t[5]=-i[1],t[8]=-i[2],he(e,Yt(e,t))}}();function ge(){let t=new l(2);return l!=Float32Array&&(t[0]=0,t[1]=0),t}function ve(t){let e=new l(2);return e[0]=t[0],e[1]=t[1],e}function ye(t,e){let i=new l(2);return i[0]=t,i[1]=e,i}function xe(t,e){return t[0]=e[0],t[1]=e[1],t}function be(t,e,i){return t[0]=e,t[1]=i,t}function Ae(t,e,i){return t[0]=e[0]+i[0],t[1]=e[1]+i[1],t}function we(t,e,i){return t[0]=e[0]-i[0],t[1]=e[1]-i[1],t}function Se(t,e,i){return t[0]=e[0]*i[0],t[1]=e[1]*i[1],t}function Ce(t,e,i){return t[0]=e[0]/i[0],t[1]=e[1]/i[1],t}function Be(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function Ve(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function Me(t,e,i){return t[0]=Math.min(e[0],i[0]),t[1]=Math.min(e[1],i[1]),t}function ke(t,e,i){return t[0]=Math.max(e[0],i[0]),t[1]=Math.max(e[1],i[1]),t}function Pe(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function Ie(t,e,i){return t[0]=e[0]*i,t[1]=e[1]*i,t}function De(t,e,i,n){return t[0]=e[0]+i[0]*n,t[1]=e[1]+i[1]*n,t}function Te(t,e){var i=e[0]-t[0],n=e[1]-t[1];return Math.sqrt(i*i+n*n)}function Ee(t,e){var i=e[0]-t[0],n=e[1]-t[1];return i*i+n*n}function $e(t){var e=t[0],i=t[1];return Math.sqrt(e*e+i*i)}function Le(t){var e=t[0],i=t[1];return e*e+i*i}function Re(t,e){return t[0]=-e[0],t[1]=-e[1],t}function Fe(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function Oe(t,e){var i=e[0],n=e[1],s=i*i+n*n;return s>0&&(s=1/Math.sqrt(s),t[0]=e[0]*s,t[1]=e[1]*s),t}function je(t,e){return t[0]*e[0]+t[1]*e[1]}function Ge(t,e,i){var n=e[0]*i[1]-e[1]*i[0];return t[0]=t[1]=0,t[2]=n,t}function Ne(t,e,i,n){var s=e[0],r=e[1];return t[0]=s+n*(i[0]-s),t[1]=r+n*(i[1]-r),t}function qe(t,e){e=e||1;var i=2*c()*Math.PI;return t[0]=Math.cos(i)*e,t[1]=Math.sin(i)*e,t}function ze(t,e,i){var n=e[0],s=e[1];return t[0]=i[0]*n+i[2]*s,t[1]=i[1]*n+i[3]*s,t}function He(t,e,i){var n=e[0],s=e[1];return t[0]=i[0]*n+i[2]*s+i[4],t[1]=i[1]*n+i[3]*s+i[5],t}function Ue(t,e,i){var n=e[0],s=e[1];return t[0]=i[0]*n+i[3]*s+i[6],t[1]=i[1]*n+i[4]*s+i[7],t}function We(t,e,i){let n=e[0],s=e[1];return t[0]=i[0]*n+i[4]*s+i[12],t[1]=i[1]*n+i[5]*s+i[13],t}function Je(t,e,i,n){let s=e[0]-i[0],r=e[1]-i[1],o=Math.sin(n),a=Math.cos(n);return t[0]=s*a-r*o+i[0],t[1]=s*o+r*a+i[1],t}function Ye(t,e){let i=t[0],n=t[1],s=e[0],r=e[1],o=i*i+n*n;o>0&&(o=1/Math.sqrt(o));let a=s*s+r*r;a>0&&(a=1/Math.sqrt(a));let l=(i*s+n*r)*o*a;return l>1?0:l<-1?Math.PI:Math.acos(l)}function Xe(t){return"vec2("+t[0]+", "+t[1]+")"}function Qe(t,e){return t[0]===e[0]&&t[1]===e[1]}function Ze(t,e){let i=t[0],n=t[1],s=e[0],r=e[1];return Math.abs(i-s)<=a*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(n-r)<=a*Math.max(1,Math.abs(n),Math.abs(r))}const Ke=$e,ti=we,ei=Se,ii=Ce,ni=Te,si=Ee,ri=Le,oi=function(){let t=ge();return function(e,i,n,s,r,o){let a,l;for(i||(i=2),n||(n=0),l=s?Math.min(s*i+n,e.length):e.length,a=n;a<l;a+=i)t[0]=e[a],t[1]=e[a+1],r(t,t,o),e[a]=t[0],e[a+1]=t[1];return e}}();i(6);var ai=i(18);window._experimental_particle=!0;window.$mat2d=n,window.$mat4=s,window.$quat=r;i.d(e,"b",function(){return li}),i.d(e,"a",function(){return ci});const li=new class extends ai.c{constructor(){super(),this.ctx=null,this._ctx2=null,this._canvas2=null,function(t){t._GraphType=class extends ai.b{get _engine(){return t}}}(this)}init(t){let e=document.getElementById(t),i=this._canvas2=document.getElementById(t+"2");function n(t,e,i){t.width=e,t.height=i}this.ctx=e.getContext("2d",{alpha:!0}),this._ctx2=i.getContext("2d",{alpha:!0}),this.ctx.imageSmoothingEnabled=!1,this._ctx2.imageSmoothingEnabled=!0,n(e,window.innerWidth,window.innerHeight),n(i,window.innerWidth,window.innerHeight),window.onresize=(t=>{const s=window.innerWidth,r=window.innerHeight;n(e,s,r),n(i,s,r),document.getElementById("screen_width").innerHTML=s,document.getElementById("screen_height").innerHTML=r,this.screen_size.x=s,this.screen_size.y=r}),window.onresize(),this._graph_rect=new this.Graph,this._graph_rect._url="/1x1.png"}get Graph(){return this._GraphType}get _canvas(){return this.ctx.canvas}_handleImageLoaded(t,e){return t}$swapCanvas(t){t?(this.ctx.imageSmoothingEnabled=!1,this._ctx2.imageSmoothingEnabled=!0):(this.ctx.imageSmoothingEnabled=!1,this._ctx2.imageSmoothingEnabled=!1);const e=this._ctx2;this._ctx2=this.ctx,this.ctx=e}setTransform(t,e,i,n,s,r){this.ctx.setTransform(t,e,i,n,s,r)}loadIdentity(){this.ctx.setTransform(1,0,0,1,0,0)}pushMatrix(){this.ctx.save()}popMatrix(){this.ctx.restore()}translate(t,e){this.ctx.translate(t,e)}scale(t,e){this.ctx.scale(t,e)}rotate(t){this.ctx.rotate(t)}set color(t){const e=Math.trunc(255*t[0]),i=Math.trunc(255*t[1]),n=Math.trunc(255*t[2]),s=t[3].toFixed(3);this.ctx.fillStyle=`rgba(${e},${i},${n},${s})`,this.ctx.strokeStyle=this.ctx.fillStyle}get globalAlpha(){return this._globalAlpha}set globalAlpha(t){this._globalAlpha!=t&&(this._globalAlpha=t,this.ctx.globalAlpha=t)}pushGlobalAlpha(){this._globalAlphaStack.push(this.ctx.globalAlpha)}popGlobalAlpha(t){this.ctx.globalAlpha=this._globalAlphaStack.pop()}beginScene(){}endScene(){}clearDrawScreen(){const t=this.ctx.canvas;this.ctx.clearRect(0,0,t.width,t.height)}drawRect(t,e,i,n){let s=this.ctx;4==arguments.length&&(s.beginPath(),s.fillRect(t,e,i,n))}drawGraph(t){t.isLoaded()&&this.ctx.drawImage(t.texture,0,0)}drawGraph2(t,e,i,n){t.isLoaded()&&this.ctx.drawImage(t.texture,e,i)}_drawImage(t,e,i,n,s,r,o,a,l){t.isLoaded()&&this.ctx.drawImage(t.texture,e,i,n,s,r,o,a,l)}__drawMirrorImage(t,e,i=0,n=0,s=!1,r=!1){t.save(),t.setTransform(s?-1:1,0,0,r?-1:1,i+s?e.width:0,n+r?e.height:0),t.drawImage(e,0,0),t.restore()}_drawRotaGraph(t,e,i,n,s){this.translate(e,i),this.rotate(n),this.scale(s?-1:1,1),this.translate(-t.x,-t.y),this.drawGraph(t)}drawRotaGraph(t,e,i,n,s){this.pushMatrix(),this._drawRotaGraph(t,e,i,n,s),this.popMatrix()}_drawRotaClipGraph(t,e,i,n,s,r,o){const a=s.x,l=s.y,c=e-(o?-a+r.width:a),u=i-l,h=.5*r.width,d=.5*r.height;this.translate(c,u),this.translate(h,d),this.rotate(n),this.scale(o?-1:1,1),this.translate(-h,-d),this._drawImage(t,r.x,r.y,r.width,r.height,0,0,r.width,r.height)}drawRotaClipGraph(t,e,i,n,s,r,o){this.pushMatrix(),this._drawRotaClipGraph(t,e,i,n,s,r,o),this.popMatrix()}drawColoredGraph(t,e,i,n){if(t.isLoaded())if(_experimental_particle)this.ctx.filter=n.toFilter(),this.ctx.drawImage(t.texture,e-t.x,i-t.y),this.ctx.filter="none";else{const s=this._ctx2;s.globalCompositeOperation="copy",s.drawImage(t.texture,0,0),s.globalCompositeOperation="darken",s.fillStyle=n.toString(),s.beginPath(),s.rect(0,0,t.width,t.width),s.fill(),s.globalCompositeOperation="destination-atop",s.drawImage(t.texture,0,0),this.ctx.drawImage(this._canvas2,e-t.x,i-t.y)}}drawColoredGraph2(t,e,i,n,s,r){if(t.isLoaded()){const o=t.width,a=t.height,l=o*n,c=a*s;if(_experimental_particle)this.ctx.filter=r.toFilter(),this.ctx.drawImage(t.texture,0,0,o,a,e-t.x,i-t.y,l,c),this.ctx.filter="none";else{const n=this._ctx2;n.globalCompositeOperation="copy",n.drawImage(t.texture,0,0,l,l),n.globalCompositeOperation="darken",n.fillStyle=r.toString(),n.beginPath(),n.rect(0,0,l,l),n.fill(),n.globalCompositeOperation="destination-atop",n.drawImage(t.texture,0,0,l,l),this.ctx.drawImage(this._canvas2,0,0,l,c,e-t.x,i-t.y,l,c)}}}};window.$engine=li;const ci=li.Graph;li.init("glcanvas"),SSAnim&&li.ctx&&SSAnim.SetRenderingContext(li.ctx)},function(t,e,i){var n=i(11);t.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},function(t,e){var i=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,i){"use strict";i.d(e,"a",function(){return r}),i.d(e,"c",function(){return n}),i.d(e,"b",function(){return o});var n,s=i(0);class r{constructor(){this.mass=0,this.center=new s.A(0,0),this.I=0}}!function(t){t[t.e_unknown=-1]="e_unknown",t[t.e_circleShape=0]="e_circleShape",t[t.e_edgeShape=1]="e_edgeShape",t[t.e_polygonShape=2]="e_polygonShape",t[t.e_chainShape=3]="e_chainShape",t[t.e_shapeTypeCount=4]="e_shapeTypeCount"}(n||(n={}));class o{constructor(t,e){this.m_type=n.e_unknown,this.m_radius=0,this.m_type=t,this.m_radius=e}Copy(t){return this.m_radius=t.m_radius,this}GetType(){return this.m_type}}},function(t,e,i){var n=i(71)("wks"),s=i(50),r=i(9).Symbol,o="function"==typeof r;(t.exports=function(t){return n[t]||(n[t]=o&&r[t]||(o?r:s)("Symbol."+t))}).store=n},function(t,e,i){t.exports=!i(10)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e,i){var n=i(8),s=i(124),r=i(37),o=Object.defineProperty;e.f=i(14)?Object.defineProperty:function(t,e,i){if(n(t),e=r(e,!0),n(i),s)try{return o(t,e,i)}catch(t){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(t[e]=i.value),t}},function(t,e,i){var n=i(39),s=Math.min;t.exports=function(t){return t>0?s(n(t),9007199254740991):0}},function(t,e,i){"use strict";i.d(e,"b",function(){return r}),i.d(e,"a",function(){return o});var n=i(6),s=(i(18),i(7));class r extends s.a{constructor(t,e){t?(super(e,{width:t.__w,height:t.__h}),this._raw=t,e?this._url=e:!1!==r.isTexture(t)&&(this._url=t[""])):super()}static isTexture(t){if(t)if(t.hasOwnProperty("")){if("string"==typeof t[""])return!0}else if(!t.__isEmpty)throw console.group("no texture"),console.warn(t),console.groupEnd(),new Error("no texture");return!1}static isTextureHasData(t){return t&&"string"==typeof t[""]&&t[""].startsWith("data:image/")}set z(t){this._order=t}get z(){return this._order}_get(t,e,i){if(this._raw){if(e in this._raw)return i(this._raw[e])}else;return t}draw(){this._engine.drawGraph(this)}draw2(t,e){this._engine.drawGraph2(this,t-this.x,e-this.y)}draw2i(t,e){this._engine.drawGraph2(this,Math.trunc(t-this.x+.5),Math.trunc(e-this.y+.5))}}class o extends r{constructor(t,e){super(t,e);var i=this._get(new n.c(0,0),"origin",n.c.get);this.x=i.x,this.y=i.y,this.z=this._get(0,"z",Number),this.delay=this._get(100,"delay",Number)}drawPattern(t,e,i,n){if(!this.isLoaded())return;const s=this._engine.ctx;s.save();try{s.rect(t,e,i,n),s.clip();let r=t,o=t+i,a=e+n;for(let t=e;t<a;t+=this.height)for(let e=r;e<o;e+=this.width)this.draw2(e,t)}catch(t){console.error(t)}s.restore()}drawHorizontalPattern(t,e,i){if(!this.isLoaded())return;const n=this._engine.ctx;n.save();try{const n=t+i;for(let i=t;i<n;i+=this.width)this.draw2(i,e)}catch(t){console.error(t)}n.restore()}drawVerticalPattern(t,e,i){if(!this.isLoaded())return;const n=this._engine.ctx;n.save();try{const n=e+i;for(let i=e;i<n;i+=this.height)this.draw2(t,i)}catch(t){console.error(t)}n.restore()}_drawPattern(t,e,i,n){if(!this.isLoaded())return;this._engine.ctx;const s=t,r=t+i,o=e+n;for(let t=e;t<o;t+=this.height)for(let e=s;e<r;e+=this.width)this.draw2(e,t)}_drawHorizontalPattern(t,e,i){if(!this.isLoaded())return;this._engine.ctx;const n=t+i;for(let i=t;i<n;i+=this.width)this.draw2(i,e)}_drawVerticalPattern(t,e,i){if(!this.isLoaded())return;this._engine.ctx;const n=e+i;for(let i=e;i<n;i+=this.height)this.draw2(t,i)}drawPattern4i(t,e,i,n){this.drawPattern(Math.trunc(t+.5),Math.trunc(e+.5),Math.trunc(i+.5),Math.trunc(n+.5))}drawHorizontalPattern3i(t,e,i){this.drawHorizontalPattern(Math.trunc(t+.5),Math.trunc(e+.5),Math.trunc(i+.5))}drawVerticalPattern3i(t,e,i){this.drawVerticalPattern(Math.trunc(t+.5),Math.trunc(e+.5),Math.trunc(i+.5))}_drawPattern4i(t,e,i,n){this._drawPattern(Math.trunc(t+.5),Math.trunc(e+.5),Math.trunc(i+.5),Math.trunc(n+.5))}_drawHorizontalPattern3i(t,e,i){this._drawHorizontalPattern(Math.trunc(t+.5),Math.trunc(e+.5),Math.trunc(i+.5))}_drawVerticalPattern3i(t,e,i){this._drawVerticalPattern(Math.trunc(t+.5),Math.trunc(e+.5),Math.trunc(i+.5))}}},function(t,e,i){"use strict";i.d(e,"a",function(){return r}),i.d(e,"e",function(){return l}),i.d(e,"b",function(){return c}),i.d(e,"c",function(){return u}),i.d(e,"d",function(){return d});var n=i(6);class r{constructor(t=0,e=0,i=0){this.r=t,this.g=e,this.b=i}clone(){return new this.constructor(this.r,this.g,this.b)}selfAdd(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}selfSub(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}selfScale(t){return this.r*=t,this.g*=t,this.b*=t,this}static add(t,e){return new r(t.r+e.r,t.g+e.g,t.b+e.b)}static sub(t,e){return new r(t.r-e.r,t.g-e.g,t.b-e.b)}static scale(t,e){return new r(t.r*e,t.g*e,t.b*e)}toString(){return"rgb("+Math.trunc(this.r)+","+Math.trunc(this.g)+","+Math.trunc(this.b)+")"}static fromInt24(t){return new r(t>>16&255,t>>8&255,255&t)}toHSV(){let t,e,i=this.r/=255,n=this.g/=255,s=this.b/=255,r=Math.max(i,n,s),a=Math.min(i,n,s),l=r,c=r-a;if(e=0==r?0:c/r,r==a)t=0;else{switch(r){case i:t=(n-s)/c+(n<s?6:0);break;case n:t=(s-i)/c+2;break;case s:t=(i-n)/c+4}t/=6}return new o(t,e,l)}fromHsv(t,e,i){let n,s,r,o=Math.floor(6*t),a=6*t-o,l=i*(1-e),c=i*(1-a*e),u=i*(1-(1-a)*e);switch(o%6){case 0:n=i,s=u,r=l;break;case 1:n=c,s=i,r=l;break;case 2:n=l,s=i,r=u;break;case 3:n=l,s=c,r=i;break;case 4:n=u,s=l,r=i;break;case 5:n=i,s=l,r=c}this.r=255*n,this.g=255*s,this.b=255*r}static fromHsv(t,e,i){let n,s,o,a=Math.floor(6*t),l=6*t-a,c=i*(1-e),u=i*(1-l*e),h=i*(1-(1-l)*e);switch(a%6){case 0:n=i,s=h,o=c;break;case 1:n=u,s=i,o=c;break;case 2:n=c,s=i,o=h;break;case 3:n=c,s=u,o=i;break;case 4:n=h,s=c,o=i;break;case 5:n=i,s=c,o=u}return new r(255*n,255*s,255*o)}toFilter(){let{h:t,s:e,v:i}=this.toHSV();return`hue-rotate(${t*Math.PI*2}rad) saturate(${e}) brightness(${i})`}toFilterLimit(){return`hue-rotate(${360*h}deg) saturate(${Object(n.d)(Math.trunc(100*s),0,100)}%) brightness(${Object(n.d)(Math.trunc(100*v),0,100)}%)`}toFilter_HueRotate(){const{h:t,s:e,v:i}=this;return`hue-rotate(${360*t}deg)`}}class o{constructor(t=0,e=0,i=0){this.h=t,this.s=e,this.v=i}clone(){return new this.constructor(this.h,this.s,this.v)}selfAdd(t){return this.h+=t.h,this.s+=t.s,this.v+=t.v,this}selfSub(t){return this.h+=t.h,this.s+=t.s,this.v+=t.v,this}selfScale(t){return this.h*=t,this.s*=t,this.v*=t,this}static add(t,e){return new o(t.s+e.s,t.s+e.s,t.v+e.v)}static sub(t,e){return new o(t.s-e.s,t.s-e.s,t.v-e.v)}static scale(t,e){return new o(t.h*e,t.s*e,t.v*e)}toString(){const{h:t,s:e,v:i}=this;return"hsv("+t+","+e+","+i+")"}toFilter(){const{h:t,s:e,v:i}=this;return`hue-rotate(${t*Math.PI*2}rad) saturate(${e}) brightness(${i})`}toFilterLimit(){return`hue-rotate(${360*h}deg) saturate(${Object(n.d)(Math.trunc(100*s),0,100)}%) brightness(${Object(n.d)(Math.trunc(100*v),0,100)}%)`}toFilter_HueRotate(){const{h:t,s:e,v:i}=this;return`hue-rotate(${360*t}deg)`}}class a{constructor(t=0,e=100,i=100,n=100){this._hue=t,this._sat=e,this._bri=i,this._contrast=n}get hue(){return this._hue}set hue(t){this._hue=t%360,this._hue%360==0&&100==this._sat&&100==this._bri&&100==this._contrast&&this.reset()}get sat(){return this._sat}set sat(t){this._sat=Math.max(0,t),this._hue%360==0&&100==this._sat&&100==this._bri&&100==this._contrast&&this.reset()}get bri(){return this._bri}set bri(t){this._bri=Math.max(0,t),this._hue%360==0&&100==this._sat&&100==this._bri&&100==this._contrast&&this.reset()}get contrast(){return this._contrast}set contrast(t){this._contrast=Math.max(0,t),this._hue%360==0&&100==this._sat&&100==this._bri&&100==this._contrast&&this.reset()}toRgb(){return r.fromHsv(this._hue/360,this._sat/100,this._bri/100)}toString(){return`hue-rotate(${this._hue}deg) saturate(${this._sat}%) brightness(${this._bri}%) contrast(${this._contrast}%)`}}class l extends a{constructor(t=0,e=100,i=100,n=100){super(t,e,i,n),arguments.length&&(this.__proto__=a.prototype)}get hue(){return 0}set hue(t){this._hue=t%360,this.__proto__=a.prototype}get sat(){return 100}set sat(t){this._sat=Math.max(0,t),this.__proto__=a.prototype}get bri(){return 100}set bri(t){this._bri=Math.max(0,t),this.__proto__=a.prototype}get contrast(){return 100}set contrast(t){this._contrast=Math.max(0,t),this.__proto__=a.prototype}toRgb(){return new r(255,255,255)}toString(){return"none"}get isEmpty(){return!0}}a.prototype.reset=function(){this._hue=0,this._sat=100,this._bri=100,this._contrast=100,this.__proto__=l.prototype},a.prototype.set=function(t,e,i,n){t%360==0&&100==e&&100==i&&100==n?this.reset():(this.hue=t,this.sat=e,this.bri=i,this._contrast=n)};class c{constructor(t,e){let i,n;this.$promise=void 0,this._vbo=void 0,this.x=0,this.y=0,e?(e.width>0&&(i=Number(e.width)),e.height>0&&(n=Number(e.height))):(i=0,n=0),this.width=i,this.height=n,Object.defineProperty(this,"width",{configurable:!0,enumerable:!0,get:function(){return this._isLoaded_or_doload(),i},set:function(t){}}),Object.defineProperty(this,"height",{configurable:!0,enumerable:!0,get:function(){return this._isLoaded_or_doload(),n},set:function(t){}}),Object.defineProperty(this,"texture",{configurable:!0,enumerable:!0,get:function(){return this.__isLoading_or_doload(),null},set:function(t){}}),this.isLoaded=this._isLoaded_or_doload,this._url="",t&&(this.src=t)}_dispose(){this._isLoaded()&&(this._gl&&(alert("gl.deleteTexture(this.texture)"),this._gl.deleteTexture(this.texture)),this.texture=null)}draw(){throw new Error("Not Implement")}draw2(t,e){throw new Error("Not Implement")}get _engine(){throw new Error("Not Implement")}get _gl(){throw new Error("Not Implement")}get _ctx(){throw new Error("Not Implement")}get z(){return 0}set src(t){this._dispose(),this._url=t}_isLoaded(){return null!=this.texture}_isLoaded_or_doload(){return!!this.texture||(this.__loadTexture(),!1)}__isLoading_or_doload(){return null!==this.$promise||(this.__loadTexture(),!1)}__loadTexture(){if(this.$promise)return;if(""==this._url)return!1;let t=new Image;this.$promise=new Promise((e,i)=>{const n=this._engine;t.addEventListener("load",t=>{!t.target.naturalWidth||t.target.naturalHeight,this.isLoaded=this._isLoaded,delete this.width,this.width=t.target.naturalWidth,delete this.height,this.height=t.target.naturalHeight,delete this.texture,this.texture=n._handleImageLoaded(t.target,this),delete this.$promise,e(this)},!1),t.addEventListener("error",i=>{this.isLoaded=this._isLoaded,this._graph_rect&&(delete this.texture,this.texture=this._graph_rect),console.error("404: "+t.src),e(this)},!1)}),c.$all_promise.push(this.$promise),t.src=$get.imageUrl(this._url)}static async waitAllLoaded(t){let e=c.$all_promise;console.log("image loaded: "+c.$all_promise.length),c.$all_promise=[],await Promise.all(e),t&&t()}}c.$all_promise=[];class u{constructor(){this._GraphType=null,this.ctx=null,this._globalAlpha=1,this._globalAlphaStack=[],this.screen_size=new n.c(0,0)}init(t){throw new Error("Not implement")}get Graph(){throw new Error("Not implement")}$swapCanvas(t){throw new Error("Not implement")}get _canvas(){throw new Error("Not implement")}_handleImageLoaded(t,e){throw new Error("Not implement")}setRotationTranslationScale(t,e,i,n,s){throw new Error("Not implement")}setTransform(t,e,i,n,s,r){throw new Error("Not implement")}loadIdentity(){throw new Error("Not implement")}pushMatrix(){throw new Error("Not implement")}popMatrix(){throw new Error("Not implement")}translate(t,e){throw new Error("Not implement")}translate3d(t,e,i){throw alert("'translate3d' is deprecated"),new Error("'translate3d' is deprecated")}scale(t,e){throw new Error("Not implement")}scale3d(t,e,i){throw alert("'scale3d' is deprecated"),new Error("'scale3d' is deprecated")}rotate(t){throw new Error("Not implement")}get color(){throw new Error("Not implement")}set color(t){throw new Error("Not implement")}Color4fv(t){throw alert("'Color4fv' is deprecated"),new Error("'Color4fv' is deprecated")}get globalAlpha(){throw new Error("Not implement")}set globalAlpha(t){throw new Error("Not implement")}pushGlobalAlpha(){throw new Error("Not implement")}popGlobalAlpha(t){throw new Error("Not implement")}clearDrawScreen(){throw new Error("Not implement")}drawGraph(t){throw new Error("Not implement")}drawGraph2(t,e,i,n){throw new Error("Not implement")}drawRect(t,e,i,n){throw 4!=arguments.length&&console.error("drawRect(x, y, w, h) need 4 param"),new Error("Not implement")}drawColoredGraph(t,e,i,n){throw new Error("Not implement")}}class d{constructor(){this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d")}resize(t,e){canvas.width=t,canvas.height=e}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.height)}imageToImagedata(t){const e=this.canvas,i=this.ctx;return e.width=t.width,e.height=t.height,i.drawImage(t,0,0),i.getImageData(0,0,t.width,t.height)}imagedataToDataURL(t){const e=this.canvas,i=this.ctx;return e.width=t.width,e.height=t.height,i.putImageData(t,0,0),e.toDataURL()}imagedataToImage(t){const e=this.canvas,i=this.ctx;e.width=t.width,e.height=t.height,i.putImageData(t,0,0);let n=new Image;return n.src=e.toDataURL(),n}}},function(t,e,i){var n=i(38);t.exports=function(t){return Object(n(t))}},function(t,e,i){var n;
/*!
 * jQuery JavaScript Library v3.3.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2018-01-20T17:24Z
 */
/*!
 * jQuery JavaScript Library v3.3.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2018-01-20T17:24Z
 */
!function(e,i){"use strict";"object"==typeof t&&"object"==typeof t.exports?t.exports=e.document?i(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return i(t)}:i(e)}("undefined"!=typeof window?window:this,function(i,s){"use strict";var r=[],o=i.document,a=Object.getPrototypeOf,l=r.slice,c=r.concat,u=r.push,h=r.indexOf,d={},m=d.toString,p=d.hasOwnProperty,f=p.toString,_=f.call(Object),g={},v=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},y=function(t){return null!=t&&t===t.window},x={type:!0,src:!0,noModule:!0};function b(t,e,i){var n,s=(e=e||o).createElement("script");if(s.text=t,i)for(n in x)i[n]&&(s[n]=i[n]);e.head.appendChild(s).parentNode.removeChild(s)}function A(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?d[m.call(t)]||"object":typeof t}var w=function(t,e){return new w.fn.init(t,e)},S=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function C(t){var e=!!t&&"length"in t&&t.length,i=A(t);return!v(t)&&!y(t)&&("array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t)}w.fn=w.prototype={jquery:"3.3.1",constructor:w,length:0,toArray:function(){return l.call(this)},get:function(t){return null==t?l.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=w.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return w.each(this,t)},map:function(t){return this.pushStack(w.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return this.pushStack(l.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(t<0?e:0);return this.pushStack(i>=0&&i<e?[this[i]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:r.sort,splice:r.splice},w.extend=w.fn.extend=function(){var t,e,i,n,s,r,o=arguments[0]||{},a=1,l=arguments.length,c=!1;for("boolean"==typeof o&&(c=o,o=arguments[a]||{},a++),"object"==typeof o||v(o)||(o={}),a===l&&(o=this,a--);a<l;a++)if(null!=(t=arguments[a]))for(e in t)i=o[e],o!==(n=t[e])&&(c&&n&&(w.isPlainObject(n)||(s=Array.isArray(n)))?(s?(s=!1,r=i&&Array.isArray(i)?i:[]):r=i&&w.isPlainObject(i)?i:{},o[e]=w.extend(c,r,n)):void 0!==n&&(o[e]=n));return o},w.extend({expando:"jQuery"+("3.3.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,i;return!(!t||"[object Object]"!==m.call(t))&&(!(e=a(t))||"function"==typeof(i=p.call(e,"constructor")&&e.constructor)&&f.call(i)===_)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t){b(t)},each:function(t,e){var i,n=0;if(C(t))for(i=t.length;n<i&&!1!==e.call(t[n],n,t[n]);n++);else for(n in t)if(!1===e.call(t[n],n,t[n]))break;return t},trim:function(t){return null==t?"":(t+"").replace(S,"")},makeArray:function(t,e){var i=e||[];return null!=t&&(C(Object(t))?w.merge(i,"string"==typeof t?[t]:t):u.call(i,t)),i},inArray:function(t,e,i){return null==e?-1:h.call(e,t,i)},merge:function(t,e){for(var i=+e.length,n=0,s=t.length;n<i;n++)t[s++]=e[n];return t.length=s,t},grep:function(t,e,i){for(var n=[],s=0,r=t.length,o=!i;s<r;s++)!e(t[s],s)!==o&&n.push(t[s]);return n},map:function(t,e,i){var n,s,r=0,o=[];if(C(t))for(n=t.length;r<n;r++)null!=(s=e(t[r],r,i))&&o.push(s);else for(r in t)null!=(s=e(t[r],r,i))&&o.push(s);return c.apply([],o)},guid:1,support:g}),"function"==typeof Symbol&&(w.fn[Symbol.iterator]=r[Symbol.iterator]),w.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){d["[object "+e+"]"]=e.toLowerCase()});var B=
/*!
 * Sizzle CSS Selector Engine v2.3.3
 * https://sizzlejs.com/
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2016-08-08
 */
function(t){var e,i,n,s,r,o,a,l,c,u,h,d,m,p,f,_,g,v,y,x="sizzle"+1*new Date,b=t.document,A=0,w=0,S=ot(),C=ot(),B=ot(),V=function(t,e){return t===e&&(h=!0),0},M={}.hasOwnProperty,k=[],P=k.pop,I=k.push,D=k.push,T=k.slice,E=function(t,e){for(var i=0,n=t.length;i<n;i++)if(t[i]===e)return i;return-1},$="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",R="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",F="\\["+L+"*("+R+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+R+"))|)"+L+"*\\]",O=":("+R+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+F+")*)|.*)\\)|)",j=new RegExp(L+"+","g"),G=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),N=new RegExp("^"+L+"*,"+L+"*"),q=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),z=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),H=new RegExp(O),U=new RegExp("^"+R+"$"),W={ID:new RegExp("^#("+R+")"),CLASS:new RegExp("^\\.("+R+")"),TAG:new RegExp("^("+R+"|[*])"),ATTR:new RegExp("^"+F),PSEUDO:new RegExp("^"+O),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+$+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},J=/^(?:input|select|textarea|button)$/i,Y=/^h\d$/i,X=/^[^{]+\{\s*\[native \w/,Q=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Z=/[+~]/,K=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),tt=function(t,e,i){var n="0x"+e-65536;return n!=n||i?e:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},et=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,it=function(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},nt=function(){d()},st=vt(function(t){return!0===t.disabled&&("form"in t||"label"in t)},{dir:"parentNode",next:"legend"});try{D.apply(k=T.call(b.childNodes),b.childNodes),k[b.childNodes.length].nodeType}catch(t){D={apply:k.length?function(t,e){I.apply(t,T.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}function rt(t,e,n,s){var r,a,c,u,h,p,g,v=e&&e.ownerDocument,A=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==A&&9!==A&&11!==A)return n;if(!s&&((e?e.ownerDocument||e:b)!==m&&d(e),e=e||m,f)){if(11!==A&&(h=Q.exec(t)))if(r=h[1]){if(9===A){if(!(c=e.getElementById(r)))return n;if(c.id===r)return n.push(c),n}else if(v&&(c=v.getElementById(r))&&y(e,c)&&c.id===r)return n.push(c),n}else{if(h[2])return D.apply(n,e.getElementsByTagName(t)),n;if((r=h[3])&&i.getElementsByClassName&&e.getElementsByClassName)return D.apply(n,e.getElementsByClassName(r)),n}if(i.qsa&&!B[t+" "]&&(!_||!_.test(t))){if(1!==A)v=e,g=t;else if("object"!==e.nodeName.toLowerCase()){for((u=e.getAttribute("id"))?u=u.replace(et,it):e.setAttribute("id",u=x),a=(p=o(t)).length;a--;)p[a]="#"+u+" "+gt(p[a]);g=p.join(","),v=Z.test(t)&&ft(e.parentNode)||e}if(g)try{return D.apply(n,v.querySelectorAll(g)),n}catch(t){}finally{u===x&&e.removeAttribute("id")}}}return l(t.replace(G,"$1"),e,n,s)}function ot(){var t=[];return function e(i,s){return t.push(i+" ")>n.cacheLength&&delete e[t.shift()],e[i+" "]=s}}function at(t){return t[x]=!0,t}function lt(t){var e=m.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function ct(t,e){for(var i=t.split("|"),s=i.length;s--;)n.attrHandle[i[s]]=e}function ut(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function ht(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function dt(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function mt(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&st(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function pt(t){return at(function(e){return e=+e,at(function(i,n){for(var s,r=t([],i.length,e),o=r.length;o--;)i[s=r[o]]&&(i[s]=!(n[s]=i[s]))})})}function ft(t){return t&&void 0!==t.getElementsByTagName&&t}for(e in i=rt.support={},r=rt.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return!!e&&"HTML"!==e.nodeName},d=rt.setDocument=function(t){var e,s,o=t?t.ownerDocument||t:b;return o!==m&&9===o.nodeType&&o.documentElement?(p=(m=o).documentElement,f=!r(m),b!==m&&(s=m.defaultView)&&s.top!==s&&(s.addEventListener?s.addEventListener("unload",nt,!1):s.attachEvent&&s.attachEvent("onunload",nt)),i.attributes=lt(function(t){return t.className="i",!t.getAttribute("className")}),i.getElementsByTagName=lt(function(t){return t.appendChild(m.createComment("")),!t.getElementsByTagName("*").length}),i.getElementsByClassName=X.test(m.getElementsByClassName),i.getById=lt(function(t){return p.appendChild(t).id=x,!m.getElementsByName||!m.getElementsByName(x).length}),i.getById?(n.filter.ID=function(t){var e=t.replace(K,tt);return function(t){return t.getAttribute("id")===e}},n.find.ID=function(t,e){if(void 0!==e.getElementById&&f){var i=e.getElementById(t);return i?[i]:[]}}):(n.filter.ID=function(t){var e=t.replace(K,tt);return function(t){var i=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return i&&i.value===e}},n.find.ID=function(t,e){if(void 0!==e.getElementById&&f){var i,n,s,r=e.getElementById(t);if(r){if((i=r.getAttributeNode("id"))&&i.value===t)return[r];for(s=e.getElementsByName(t),n=0;r=s[n++];)if((i=r.getAttributeNode("id"))&&i.value===t)return[r]}return[]}}),n.find.TAG=i.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):i.qsa?e.querySelectorAll(t):void 0}:function(t,e){var i,n=[],s=0,r=e.getElementsByTagName(t);if("*"===t){for(;i=r[s++];)1===i.nodeType&&n.push(i);return n}return r},n.find.CLASS=i.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&f)return e.getElementsByClassName(t)},g=[],_=[],(i.qsa=X.test(m.querySelectorAll))&&(lt(function(t){p.appendChild(t).innerHTML="<a id='"+x+"'></a><select id='"+x+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&_.push("[*^$]="+L+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||_.push("\\["+L+"*(?:value|"+$+")"),t.querySelectorAll("[id~="+x+"-]").length||_.push("~="),t.querySelectorAll(":checked").length||_.push(":checked"),t.querySelectorAll("a#"+x+"+*").length||_.push(".#.+[+~]")}),lt(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=m.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&_.push("name"+L+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&_.push(":enabled",":disabled"),p.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&_.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),_.push(",.*:")})),(i.matchesSelector=X.test(v=p.matches||p.webkitMatchesSelector||p.mozMatchesSelector||p.oMatchesSelector||p.msMatchesSelector))&&lt(function(t){i.disconnectedMatch=v.call(t,"*"),v.call(t,"[s!='']:x"),g.push("!=",O)}),_=_.length&&new RegExp(_.join("|")),g=g.length&&new RegExp(g.join("|")),e=X.test(p.compareDocumentPosition),y=e||X.test(p.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},V=e?function(t,e){if(t===e)return h=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!i.sortDetached&&e.compareDocumentPosition(t)===n?t===m||t.ownerDocument===b&&y(b,t)?-1:e===m||e.ownerDocument===b&&y(b,e)?1:u?E(u,t)-E(u,e):0:4&n?-1:1)}:function(t,e){if(t===e)return h=!0,0;var i,n=0,s=t.parentNode,r=e.parentNode,o=[t],a=[e];if(!s||!r)return t===m?-1:e===m?1:s?-1:r?1:u?E(u,t)-E(u,e):0;if(s===r)return ut(t,e);for(i=t;i=i.parentNode;)o.unshift(i);for(i=e;i=i.parentNode;)a.unshift(i);for(;o[n]===a[n];)n++;return n?ut(o[n],a[n]):o[n]===b?-1:a[n]===b?1:0},m):m},rt.matches=function(t,e){return rt(t,null,null,e)},rt.matchesSelector=function(t,e){if((t.ownerDocument||t)!==m&&d(t),e=e.replace(z,"='$1']"),i.matchesSelector&&f&&!B[e+" "]&&(!g||!g.test(e))&&(!_||!_.test(e)))try{var n=v.call(t,e);if(n||i.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){}return rt(e,m,null,[t]).length>0},rt.contains=function(t,e){return(t.ownerDocument||t)!==m&&d(t),y(t,e)},rt.attr=function(t,e){(t.ownerDocument||t)!==m&&d(t);var s=n.attrHandle[e.toLowerCase()],r=s&&M.call(n.attrHandle,e.toLowerCase())?s(t,e,!f):void 0;return void 0!==r?r:i.attributes||!f?t.getAttribute(e):(r=t.getAttributeNode(e))&&r.specified?r.value:null},rt.escape=function(t){return(t+"").replace(et,it)},rt.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},rt.uniqueSort=function(t){var e,n=[],s=0,r=0;if(h=!i.detectDuplicates,u=!i.sortStable&&t.slice(0),t.sort(V),h){for(;e=t[r++];)e===t[r]&&(s=n.push(r));for(;s--;)t.splice(n[s],1)}return u=null,t},s=rt.getText=function(t){var e,i="",n=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=s(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[n++];)i+=s(e);return i},(n=rt.selectors={cacheLength:50,createPseudo:at,match:W,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(K,tt),t[3]=(t[3]||t[4]||t[5]||"").replace(K,tt),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||rt.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&rt.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return W.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&H.test(i)&&(e=o(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(K,tt).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=S[t+" "];return e||(e=new RegExp("(^|"+L+")"+t+"("+L+"|$)"))&&S(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,e,i){return function(n){var s=rt.attr(n,t);return null==s?"!="===e:!e||(s+="","="===e?s===i:"!="===e?s!==i:"^="===e?i&&0===s.indexOf(i):"*="===e?i&&s.indexOf(i)>-1:"$="===e?i&&s.slice(-i.length)===i:"~="===e?(" "+s.replace(j," ")+" ").indexOf(i)>-1:"|="===e&&(s===i||s.slice(0,i.length+1)===i+"-"))}},CHILD:function(t,e,i,n,s){var r="nth"!==t.slice(0,3),o="last"!==t.slice(-4),a="of-type"===e;return 1===n&&0===s?function(t){return!!t.parentNode}:function(e,i,l){var c,u,h,d,m,p,f=r!==o?"nextSibling":"previousSibling",_=e.parentNode,g=a&&e.nodeName.toLowerCase(),v=!l&&!a,y=!1;if(_){if(r){for(;f;){for(d=e;d=d[f];)if(a?d.nodeName.toLowerCase()===g:1===d.nodeType)return!1;p=f="only"===t&&!p&&"nextSibling"}return!0}if(p=[o?_.firstChild:_.lastChild],o&&v){for(y=(m=(c=(u=(h=(d=_)[x]||(d[x]={}))[d.uniqueID]||(h[d.uniqueID]={}))[t]||[])[0]===A&&c[1])&&c[2],d=m&&_.childNodes[m];d=++m&&d&&d[f]||(y=m=0)||p.pop();)if(1===d.nodeType&&++y&&d===e){u[t]=[A,m,y];break}}else if(v&&(y=m=(c=(u=(h=(d=e)[x]||(d[x]={}))[d.uniqueID]||(h[d.uniqueID]={}))[t]||[])[0]===A&&c[1]),!1===y)for(;(d=++m&&d&&d[f]||(y=m=0)||p.pop())&&((a?d.nodeName.toLowerCase()!==g:1!==d.nodeType)||!++y||(v&&((u=(h=d[x]||(d[x]={}))[d.uniqueID]||(h[d.uniqueID]={}))[t]=[A,y]),d!==e)););return(y-=s)===n||y%n==0&&y/n>=0}}},PSEUDO:function(t,e){var i,s=n.pseudos[t]||n.setFilters[t.toLowerCase()]||rt.error("unsupported pseudo: "+t);return s[x]?s(e):s.length>1?(i=[t,t,"",e],n.setFilters.hasOwnProperty(t.toLowerCase())?at(function(t,i){for(var n,r=s(t,e),o=r.length;o--;)t[n=E(t,r[o])]=!(i[n]=r[o])}):function(t){return s(t,0,i)}):s}},pseudos:{not:at(function(t){var e=[],i=[],n=a(t.replace(G,"$1"));return n[x]?at(function(t,e,i,s){for(var r,o=n(t,null,s,[]),a=t.length;a--;)(r=o[a])&&(t[a]=!(e[a]=r))}):function(t,s,r){return e[0]=t,n(e,null,r,i),e[0]=null,!i.pop()}}),has:at(function(t){return function(e){return rt(t,e).length>0}}),contains:at(function(t){return t=t.replace(K,tt),function(e){return(e.textContent||e.innerText||s(e)).indexOf(t)>-1}}),lang:at(function(t){return U.test(t||"")||rt.error("unsupported lang: "+t),t=t.replace(K,tt).toLowerCase(),function(e){var i;do{if(i=f?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(i=i.toLowerCase())===t||0===i.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===p},focus:function(t){return t===m.activeElement&&(!m.hasFocus||m.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:mt(!1),disabled:mt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!n.pseudos.empty(t)},header:function(t){return Y.test(t.nodeName)},input:function(t){return J.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:pt(function(){return[0]}),last:pt(function(t,e){return[e-1]}),eq:pt(function(t,e,i){return[i<0?i+e:i]}),even:pt(function(t,e){for(var i=0;i<e;i+=2)t.push(i);return t}),odd:pt(function(t,e){for(var i=1;i<e;i+=2)t.push(i);return t}),lt:pt(function(t,e,i){for(var n=i<0?i+e:i;--n>=0;)t.push(n);return t}),gt:pt(function(t,e,i){for(var n=i<0?i+e:i;++n<e;)t.push(n);return t})}}).pseudos.nth=n.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})n.pseudos[e]=ht(e);for(e in{submit:!0,reset:!0})n.pseudos[e]=dt(e);function _t(){}function gt(t){for(var e=0,i=t.length,n="";e<i;e++)n+=t[e].value;return n}function vt(t,e,i){var n=e.dir,s=e.next,r=s||n,o=i&&"parentNode"===r,a=w++;return e.first?function(e,i,s){for(;e=e[n];)if(1===e.nodeType||o)return t(e,i,s);return!1}:function(e,i,l){var c,u,h,d=[A,a];if(l){for(;e=e[n];)if((1===e.nodeType||o)&&t(e,i,l))return!0}else for(;e=e[n];)if(1===e.nodeType||o)if(u=(h=e[x]||(e[x]={}))[e.uniqueID]||(h[e.uniqueID]={}),s&&s===e.nodeName.toLowerCase())e=e[n]||e;else{if((c=u[r])&&c[0]===A&&c[1]===a)return d[2]=c[2];if(u[r]=d,d[2]=t(e,i,l))return!0}return!1}}function yt(t){return t.length>1?function(e,i,n){for(var s=t.length;s--;)if(!t[s](e,i,n))return!1;return!0}:t[0]}function xt(t,e,i,n,s){for(var r,o=[],a=0,l=t.length,c=null!=e;a<l;a++)(r=t[a])&&(i&&!i(r,n,s)||(o.push(r),c&&e.push(a)));return o}function bt(t,e,i,n,s,r){return n&&!n[x]&&(n=bt(n)),s&&!s[x]&&(s=bt(s,r)),at(function(r,o,a,l){var c,u,h,d=[],m=[],p=o.length,f=r||function(t,e,i){for(var n=0,s=e.length;n<s;n++)rt(t,e[n],i);return i}(e||"*",a.nodeType?[a]:a,[]),_=!t||!r&&e?f:xt(f,d,t,a,l),g=i?s||(r?t:p||n)?[]:o:_;if(i&&i(_,g,a,l),n)for(c=xt(g,m),n(c,[],a,l),u=c.length;u--;)(h=c[u])&&(g[m[u]]=!(_[m[u]]=h));if(r){if(s||t){if(s){for(c=[],u=g.length;u--;)(h=g[u])&&c.push(_[u]=h);s(null,g=[],c,l)}for(u=g.length;u--;)(h=g[u])&&(c=s?E(r,h):d[u])>-1&&(r[c]=!(o[c]=h))}}else g=xt(g===o?g.splice(p,g.length):g),s?s(null,o,g,l):D.apply(o,g)})}function At(t){for(var e,i,s,r=t.length,o=n.relative[t[0].type],a=o||n.relative[" "],l=o?1:0,u=vt(function(t){return t===e},a,!0),h=vt(function(t){return E(e,t)>-1},a,!0),d=[function(t,i,n){var s=!o&&(n||i!==c)||((e=i).nodeType?u(t,i,n):h(t,i,n));return e=null,s}];l<r;l++)if(i=n.relative[t[l].type])d=[vt(yt(d),i)];else{if((i=n.filter[t[l].type].apply(null,t[l].matches))[x]){for(s=++l;s<r&&!n.relative[t[s].type];s++);return bt(l>1&&yt(d),l>1&&gt(t.slice(0,l-1).concat({value:" "===t[l-2].type?"*":""})).replace(G,"$1"),i,l<s&&At(t.slice(l,s)),s<r&&At(t=t.slice(s)),s<r&&gt(t))}d.push(i)}return yt(d)}return _t.prototype=n.filters=n.pseudos,n.setFilters=new _t,o=rt.tokenize=function(t,e){var i,s,r,o,a,l,c,u=C[t+" "];if(u)return e?0:u.slice(0);for(a=t,l=[],c=n.preFilter;a;){for(o in i&&!(s=N.exec(a))||(s&&(a=a.slice(s[0].length)||a),l.push(r=[])),i=!1,(s=q.exec(a))&&(i=s.shift(),r.push({value:i,type:s[0].replace(G," ")}),a=a.slice(i.length)),n.filter)!(s=W[o].exec(a))||c[o]&&!(s=c[o](s))||(i=s.shift(),r.push({value:i,type:o,matches:s}),a=a.slice(i.length));if(!i)break}return e?a.length:a?rt.error(t):C(t,l).slice(0)},a=rt.compile=function(t,e){var i,s=[],r=[],a=B[t+" "];if(!a){for(e||(e=o(t)),i=e.length;i--;)(a=At(e[i]))[x]?s.push(a):r.push(a);(a=B(t,function(t,e){var i=e.length>0,s=t.length>0,r=function(r,o,a,l,u){var h,p,_,g=0,v="0",y=r&&[],x=[],b=c,w=r||s&&n.find.TAG("*",u),S=A+=null==b?1:Math.random()||.1,C=w.length;for(u&&(c=o===m||o||u);v!==C&&null!=(h=w[v]);v++){if(s&&h){for(p=0,o||h.ownerDocument===m||(d(h),a=!f);_=t[p++];)if(_(h,o||m,a)){l.push(h);break}u&&(A=S)}i&&((h=!_&&h)&&g--,r&&y.push(h))}if(g+=v,i&&v!==g){for(p=0;_=e[p++];)_(y,x,o,a);if(r){if(g>0)for(;v--;)y[v]||x[v]||(x[v]=P.call(l));x=xt(x)}D.apply(l,x),u&&!r&&x.length>0&&g+e.length>1&&rt.uniqueSort(l)}return u&&(A=S,c=b),y};return i?at(r):r}(r,s))).selector=t}return a},l=rt.select=function(t,e,i,s){var r,l,c,u,h,d="function"==typeof t&&t,m=!s&&o(t=d.selector||t);if(i=i||[],1===m.length){if((l=m[0]=m[0].slice(0)).length>2&&"ID"===(c=l[0]).type&&9===e.nodeType&&f&&n.relative[l[1].type]){if(!(e=(n.find.ID(c.matches[0].replace(K,tt),e)||[])[0]))return i;d&&(e=e.parentNode),t=t.slice(l.shift().value.length)}for(r=W.needsContext.test(t)?0:l.length;r--&&(c=l[r],!n.relative[u=c.type]);)if((h=n.find[u])&&(s=h(c.matches[0].replace(K,tt),Z.test(l[0].type)&&ft(e.parentNode)||e))){if(l.splice(r,1),!(t=s.length&&gt(l)))return D.apply(i,s),i;break}}return(d||a(t,m))(s,e,!f,i,!e||Z.test(t)&&ft(e.parentNode)||e),i},i.sortStable=x.split("").sort(V).join("")===x,i.detectDuplicates=!!h,d(),i.sortDetached=lt(function(t){return 1&t.compareDocumentPosition(m.createElement("fieldset"))}),lt(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||ct("type|href|height|width",function(t,e,i){if(!i)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),i.attributes&&lt(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||ct("value",function(t,e,i){if(!i&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),lt(function(t){return null==t.getAttribute("disabled")})||ct($,function(t,e,i){var n;if(!i)return!0===t[e]?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),rt}(i);w.find=B,w.expr=B.selectors,w.expr[":"]=w.expr.pseudos,w.uniqueSort=w.unique=B.uniqueSort,w.text=B.getText,w.isXMLDoc=B.isXML,w.contains=B.contains,w.escapeSelector=B.escape;var V=function(t,e,i){for(var n=[],s=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(s&&w(t).is(i))break;n.push(t)}return n},M=function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i},k=w.expr.match.needsContext;function P(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var I=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function D(t,e,i){return v(e)?w.grep(t,function(t,n){return!!e.call(t,n,t)!==i}):e.nodeType?w.grep(t,function(t){return t===e!==i}):"string"!=typeof e?w.grep(t,function(t){return h.call(e,t)>-1!==i}):w.filter(e,t,i)}w.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?w.find.matchesSelector(n,t)?[n]:[]:w.find.matches(t,w.grep(e,function(t){return 1===t.nodeType}))},w.fn.extend({find:function(t){var e,i,n=this.length,s=this;if("string"!=typeof t)return this.pushStack(w(t).filter(function(){for(e=0;e<n;e++)if(w.contains(s[e],this))return!0}));for(i=this.pushStack([]),e=0;e<n;e++)w.find(t,s[e],i);return n>1?w.uniqueSort(i):i},filter:function(t){return this.pushStack(D(this,t||[],!1))},not:function(t){return this.pushStack(D(this,t||[],!0))},is:function(t){return!!D(this,"string"==typeof t&&k.test(t)?w(t):t||[],!1).length}});var T,E=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(w.fn.init=function(t,e,i){var n,s;if(!t)return this;if(i=i||T,"string"==typeof t){if(!(n="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:E.exec(t))||!n[1]&&e)return!e||e.jquery?(e||i).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof w?e[0]:e,w.merge(this,w.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:o,!0)),I.test(n[1])&&w.isPlainObject(e))for(n in e)v(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}return(s=o.getElementById(n[2]))&&(this[0]=s,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):v(t)?void 0!==i.ready?i.ready(t):t(w):w.makeArray(t,this)}).prototype=w.fn,T=w(o);var $=/^(?:parents|prev(?:Until|All))/,L={children:!0,contents:!0,next:!0,prev:!0};function R(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}w.fn.extend({has:function(t){var e=w(t,this),i=e.length;return this.filter(function(){for(var t=0;t<i;t++)if(w.contains(this,e[t]))return!0})},closest:function(t,e){var i,n=0,s=this.length,r=[],o="string"!=typeof t&&w(t);if(!k.test(t))for(;n<s;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(o?o.index(i)>-1:1===i.nodeType&&w.find.matchesSelector(i,t))){r.push(i);break}return this.pushStack(r.length>1?w.uniqueSort(r):r)},index:function(t){return t?"string"==typeof t?h.call(w(t),this[0]):h.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(w.uniqueSort(w.merge(this.get(),w(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),w.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return V(t,"parentNode")},parentsUntil:function(t,e,i){return V(t,"parentNode",i)},next:function(t){return R(t,"nextSibling")},prev:function(t){return R(t,"previousSibling")},nextAll:function(t){return V(t,"nextSibling")},prevAll:function(t){return V(t,"previousSibling")},nextUntil:function(t,e,i){return V(t,"nextSibling",i)},prevUntil:function(t,e,i){return V(t,"previousSibling",i)},siblings:function(t){return M((t.parentNode||{}).firstChild,t)},children:function(t){return M(t.firstChild)},contents:function(t){return P(t,"iframe")?t.contentDocument:(P(t,"template")&&(t=t.content||t),w.merge([],t.childNodes))}},function(t,e){w.fn[t]=function(i,n){var s=w.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(s=w.filter(n,s)),this.length>1&&(L[t]||w.uniqueSort(s),$.test(t)&&s.reverse()),this.pushStack(s)}});var F=/[^\x20\t\r\n\f]+/g;function O(t){return t}function j(t){throw t}function G(t,e,i,n){var s;try{t&&v(s=t.promise)?s.call(t).done(e).fail(i):t&&v(s=t.then)?s.call(t,e,i):e.apply(void 0,[t].slice(n))}catch(t){i.apply(void 0,[t])}}w.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return w.each(t.match(F)||[],function(t,i){e[i]=!0}),e}(t):w.extend({},t);var e,i,n,s,r=[],o=[],a=-1,l=function(){for(s=s||t.once,n=e=!0;o.length;a=-1)for(i=o.shift();++a<r.length;)!1===r[a].apply(i[0],i[1])&&t.stopOnFalse&&(a=r.length,i=!1);t.memory||(i=!1),e=!1,s&&(r=i?[]:"")},c={add:function(){return r&&(i&&!e&&(a=r.length-1,o.push(i)),function e(i){w.each(i,function(i,n){v(n)?t.unique&&c.has(n)||r.push(n):n&&n.length&&"string"!==A(n)&&e(n)})}(arguments),i&&!e&&l()),this},remove:function(){return w.each(arguments,function(t,e){for(var i;(i=w.inArray(e,r,i))>-1;)r.splice(i,1),i<=a&&a--}),this},has:function(t){return t?w.inArray(t,r)>-1:r.length>0},empty:function(){return r&&(r=[]),this},disable:function(){return s=o=[],r=i="",this},disabled:function(){return!r},lock:function(){return s=o=[],i||e||(r=i=""),this},locked:function(){return!!s},fireWith:function(t,i){return s||(i=[t,(i=i||[]).slice?i.slice():i],o.push(i),e||l()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},w.extend({Deferred:function(t){var e=[["notify","progress",w.Callbacks("memory"),w.Callbacks("memory"),2],["resolve","done",w.Callbacks("once memory"),w.Callbacks("once memory"),0,"resolved"],["reject","fail",w.Callbacks("once memory"),w.Callbacks("once memory"),1,"rejected"]],n="pending",s={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},catch:function(t){return s.then(null,t)},pipe:function(){var t=arguments;return w.Deferred(function(i){w.each(e,function(e,n){var s=v(t[n[4]])&&t[n[4]];r[n[1]](function(){var t=s&&s.apply(this,arguments);t&&v(t.promise)?t.promise().progress(i.notify).done(i.resolve).fail(i.reject):i[n[0]+"With"](this,s?[t]:arguments)})}),t=null}).promise()},then:function(t,n,s){var r=0;function o(t,e,n,s){return function(){var a=this,l=arguments,c=function(){var i,c;if(!(t<r)){if((i=n.apply(a,l))===e.promise())throw new TypeError("Thenable self-resolution");c=i&&("object"==typeof i||"function"==typeof i)&&i.then,v(c)?s?c.call(i,o(r,e,O,s),o(r,e,j,s)):(r++,c.call(i,o(r,e,O,s),o(r,e,j,s),o(r,e,O,e.notifyWith))):(n!==O&&(a=void 0,l=[i]),(s||e.resolveWith)(a,l))}},u=s?c:function(){try{c()}catch(i){w.Deferred.exceptionHook&&w.Deferred.exceptionHook(i,u.stackTrace),t+1>=r&&(n!==j&&(a=void 0,l=[i]),e.rejectWith(a,l))}};t?u():(w.Deferred.getStackHook&&(u.stackTrace=w.Deferred.getStackHook()),i.setTimeout(u))}}return w.Deferred(function(i){e[0][3].add(o(0,i,v(s)?s:O,i.notifyWith)),e[1][3].add(o(0,i,v(t)?t:O)),e[2][3].add(o(0,i,v(n)?n:j))}).promise()},promise:function(t){return null!=t?w.extend(t,s):s}},r={};return w.each(e,function(t,i){var o=i[2],a=i[5];s[i[1]]=o.add,a&&o.add(function(){n=a},e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),o.add(i[3].fire),r[i[0]]=function(){return r[i[0]+"With"](this===r?void 0:this,arguments),this},r[i[0]+"With"]=o.fireWith}),s.promise(r),t&&t.call(r,r),r},when:function(t){var e=arguments.length,i=e,n=Array(i),s=l.call(arguments),r=w.Deferred(),o=function(t){return function(i){n[t]=this,s[t]=arguments.length>1?l.call(arguments):i,--e||r.resolveWith(n,s)}};if(e<=1&&(G(t,r.done(o(i)).resolve,r.reject,!e),"pending"===r.state()||v(s[i]&&s[i].then)))return r.then();for(;i--;)G(s[i],o(i),r.reject);return r.promise()}});var N=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;w.Deferred.exceptionHook=function(t,e){i.console&&i.console.warn&&t&&N.test(t.name)&&i.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},w.readyException=function(t){i.setTimeout(function(){throw t})};var q=w.Deferred();function z(){o.removeEventListener("DOMContentLoaded",z),i.removeEventListener("load",z),w.ready()}w.fn.ready=function(t){return q.then(t).catch(function(t){w.readyException(t)}),this},w.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--w.readyWait:w.isReady)||(w.isReady=!0,!0!==t&&--w.readyWait>0||q.resolveWith(o,[w]))}}),w.ready.then=q.then,"complete"===o.readyState||"loading"!==o.readyState&&!o.documentElement.doScroll?i.setTimeout(w.ready):(o.addEventListener("DOMContentLoaded",z),i.addEventListener("load",z));var H=function(t,e,i,n,s,r,o){var a=0,l=t.length,c=null==i;if("object"===A(i))for(a in s=!0,i)H(t,e,a,i[a],!0,r,o);else if(void 0!==n&&(s=!0,v(n)||(o=!0),c&&(o?(e.call(t,n),e=null):(c=e,e=function(t,e,i){return c.call(w(t),i)})),e))for(;a<l;a++)e(t[a],i,o?n:n.call(t[a],a,e(t[a],i)));return s?t:c?e.call(t):l?e(t[0],i):r},U=/^-ms-/,W=/-([a-z])/g;function J(t,e){return e.toUpperCase()}function Y(t){return t.replace(U,"ms-").replace(W,J)}var X=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function Q(){this.expando=w.expando+Q.uid++}Q.uid=1,Q.prototype={cache:function(t){var e=t[this.expando];return e||(e={},X(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,i){var n,s=this.cache(t);if("string"==typeof e)s[Y(e)]=i;else for(n in e)s[Y(n)]=e[n];return s},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][Y(e)]},access:function(t,e,i){return void 0===e||e&&"string"==typeof e&&void 0===i?this.get(t,e):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,n=t[this.expando];if(void 0!==n){if(void 0!==e){i=(e=Array.isArray(e)?e.map(Y):(e=Y(e))in n?[e]:e.match(F)||[]).length;for(;i--;)delete n[e[i]]}(void 0===e||w.isEmptyObject(n))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!w.isEmptyObject(e)}};var Z=new Q,K=new Q,tt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,et=/[A-Z]/g;function it(t,e,i){var n;if(void 0===i&&1===t.nodeType)if(n="data-"+e.replace(et,"-$&").toLowerCase(),"string"==typeof(i=t.getAttribute(n))){try{i=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:tt.test(t)?JSON.parse(t):t)}(i)}catch(t){}K.set(t,e,i)}else i=void 0;return i}w.extend({hasData:function(t){return K.hasData(t)||Z.hasData(t)},data:function(t,e,i){return K.access(t,e,i)},removeData:function(t,e){K.remove(t,e)},_data:function(t,e,i){return Z.access(t,e,i)},_removeData:function(t,e){Z.remove(t,e)}}),w.fn.extend({data:function(t,e){var i,n,s,r=this[0],o=r&&r.attributes;if(void 0===t){if(this.length&&(s=K.get(r),1===r.nodeType&&!Z.get(r,"hasDataAttrs"))){for(i=o.length;i--;)o[i]&&0===(n=o[i].name).indexOf("data-")&&(n=Y(n.slice(5)),it(r,n,s[n]));Z.set(r,"hasDataAttrs",!0)}return s}return"object"==typeof t?this.each(function(){K.set(this,t)}):H(this,function(e){var i;if(r&&void 0===e)return void 0!==(i=K.get(r,t))?i:void 0!==(i=it(r,t))?i:void 0;this.each(function(){K.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){K.remove(this,t)})}}),w.extend({queue:function(t,e,i){var n;if(t)return e=(e||"fx")+"queue",n=Z.get(t,e),i&&(!n||Array.isArray(i)?n=Z.access(t,e,w.makeArray(i)):n.push(i)),n||[]},dequeue:function(t,e){e=e||"fx";var i=w.queue(t,e),n=i.length,s=i.shift(),r=w._queueHooks(t,e);"inprogress"===s&&(s=i.shift(),n--),s&&("fx"===e&&i.unshift("inprogress"),delete r.stop,s.call(t,function(){w.dequeue(t,e)},r)),!n&&r&&r.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return Z.get(t,i)||Z.access(t,i,{empty:w.Callbacks("once memory").add(function(){Z.remove(t,[e+"queue",i])})})}}),w.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?w.queue(this[0],t):void 0===e?this:this.each(function(){var i=w.queue(this,t,e);w._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&w.dequeue(this,t)})},dequeue:function(t){return this.each(function(){w.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,s=w.Deferred(),r=this,o=this.length,a=function(){--n||s.resolveWith(r,[r])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";o--;)(i=Z.get(r[o],t+"queueHooks"))&&i.empty&&(n++,i.empty.add(a));return a(),s.promise(e)}});var nt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,st=new RegExp("^(?:([+-])=|)("+nt+")([a-z%]*)$","i"),rt=["Top","Right","Bottom","Left"],ot=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&w.contains(t.ownerDocument,t)&&"none"===w.css(t,"display")},at=function(t,e,i,n){var s,r,o={};for(r in e)o[r]=t.style[r],t.style[r]=e[r];for(r in s=i.apply(t,n||[]),e)t.style[r]=o[r];return s};function lt(t,e,i,n){var s,r,o=20,a=n?function(){return n.cur()}:function(){return w.css(t,e,"")},l=a(),c=i&&i[3]||(w.cssNumber[e]?"":"px"),u=(w.cssNumber[e]||"px"!==c&&+l)&&st.exec(w.css(t,e));if(u&&u[3]!==c){for(l/=2,c=c||u[3],u=+l||1;o--;)w.style(t,e,u+c),(1-r)*(1-(r=a()/l||.5))<=0&&(o=0),u/=r;u*=2,w.style(t,e,u+c),i=i||[]}return i&&(u=+u||+l||0,s=i[1]?u+(i[1]+1)*i[2]:+i[2],n&&(n.unit=c,n.start=u,n.end=s)),s}var ct={};function ut(t){var e,i=t.ownerDocument,n=t.nodeName,s=ct[n];return s||(e=i.body.appendChild(i.createElement(n)),s=w.css(e,"display"),e.parentNode.removeChild(e),"none"===s&&(s="block"),ct[n]=s,s)}function ht(t,e){for(var i,n,s=[],r=0,o=t.length;r<o;r++)(n=t[r]).style&&(i=n.style.display,e?("none"===i&&(s[r]=Z.get(n,"display")||null,s[r]||(n.style.display="")),""===n.style.display&&ot(n)&&(s[r]=ut(n))):"none"!==i&&(s[r]="none",Z.set(n,"display",i)));for(r=0;r<o;r++)null!=s[r]&&(t[r].style.display=s[r]);return t}w.fn.extend({show:function(){return ht(this,!0)},hide:function(){return ht(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){ot(this)?w(this).show():w(this).hide()})}});var dt=/^(?:checkbox|radio)$/i,mt=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,pt=/^$|^module$|\/(?:java|ecma)script/i,ft={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function _t(t,e){var i;return i=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&P(t,e)?w.merge([t],i):i}function gt(t,e){for(var i=0,n=t.length;i<n;i++)Z.set(t[i],"globalEval",!e||Z.get(e[i],"globalEval"))}ft.optgroup=ft.option,ft.tbody=ft.tfoot=ft.colgroup=ft.caption=ft.thead,ft.th=ft.td;var vt=/<|&#?\w+;/;function yt(t,e,i,n,s){for(var r,o,a,l,c,u,h=e.createDocumentFragment(),d=[],m=0,p=t.length;m<p;m++)if((r=t[m])||0===r)if("object"===A(r))w.merge(d,r.nodeType?[r]:r);else if(vt.test(r)){for(o=o||h.appendChild(e.createElement("div")),a=(mt.exec(r)||["",""])[1].toLowerCase(),l=ft[a]||ft._default,o.innerHTML=l[1]+w.htmlPrefilter(r)+l[2],u=l[0];u--;)o=o.lastChild;w.merge(d,o.childNodes),(o=h.firstChild).textContent=""}else d.push(e.createTextNode(r));for(h.textContent="",m=0;r=d[m++];)if(n&&w.inArray(r,n)>-1)s&&s.push(r);else if(c=w.contains(r.ownerDocument,r),o=_t(h.appendChild(r),"script"),c&&gt(o),i)for(u=0;r=o[u++];)pt.test(r.type||"")&&i.push(r);return h}!function(){var t=o.createDocumentFragment().appendChild(o.createElement("div")),e=o.createElement("input");e.setAttribute("type","radio"),e.setAttribute("checked","checked"),e.setAttribute("name","t"),t.appendChild(e),g.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",g.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var xt=o.documentElement,bt=/^key/,At=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,wt=/^([^.]*)(?:\.(.+)|)/;function St(){return!0}function Ct(){return!1}function Bt(){try{return o.activeElement}catch(t){}}function Vt(t,e,i,n,s,r){var o,a;if("object"==typeof e){for(a in"string"!=typeof i&&(n=n||i,i=void 0),e)Vt(t,a,i,n,e[a],r);return t}if(null==n&&null==s?(s=i,n=i=void 0):null==s&&("string"==typeof i?(s=n,n=void 0):(s=n,n=i,i=void 0)),!1===s)s=Ct;else if(!s)return t;return 1===r&&(o=s,(s=function(t){return w().off(t),o.apply(this,arguments)}).guid=o.guid||(o.guid=w.guid++)),t.each(function(){w.event.add(this,e,s,n,i)})}w.event={global:{},add:function(t,e,i,n,s){var r,o,a,l,c,u,h,d,m,p,f,_=Z.get(t);if(_)for(i.handler&&(i=(r=i).handler,s=r.selector),s&&w.find.matchesSelector(xt,s),i.guid||(i.guid=w.guid++),(l=_.events)||(l=_.events={}),(o=_.handle)||(o=_.handle=function(e){return void 0!==w&&w.event.triggered!==e.type?w.event.dispatch.apply(t,arguments):void 0}),c=(e=(e||"").match(F)||[""]).length;c--;)m=f=(a=wt.exec(e[c])||[])[1],p=(a[2]||"").split(".").sort(),m&&(h=w.event.special[m]||{},m=(s?h.delegateType:h.bindType)||m,h=w.event.special[m]||{},u=w.extend({type:m,origType:f,data:n,handler:i,guid:i.guid,selector:s,needsContext:s&&w.expr.match.needsContext.test(s),namespace:p.join(".")},r),(d=l[m])||((d=l[m]=[]).delegateCount=0,h.setup&&!1!==h.setup.call(t,n,p,o)||t.addEventListener&&t.addEventListener(m,o)),h.add&&(h.add.call(t,u),u.handler.guid||(u.handler.guid=i.guid)),s?d.splice(d.delegateCount++,0,u):d.push(u),w.event.global[m]=!0)},remove:function(t,e,i,n,s){var r,o,a,l,c,u,h,d,m,p,f,_=Z.hasData(t)&&Z.get(t);if(_&&(l=_.events)){for(c=(e=(e||"").match(F)||[""]).length;c--;)if(m=f=(a=wt.exec(e[c])||[])[1],p=(a[2]||"").split(".").sort(),m){for(h=w.event.special[m]||{},d=l[m=(n?h.delegateType:h.bindType)||m]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=r=d.length;r--;)u=d[r],!s&&f!==u.origType||i&&i.guid!==u.guid||a&&!a.test(u.namespace)||n&&n!==u.selector&&("**"!==n||!u.selector)||(d.splice(r,1),u.selector&&d.delegateCount--,h.remove&&h.remove.call(t,u));o&&!d.length&&(h.teardown&&!1!==h.teardown.call(t,p,_.handle)||w.removeEvent(t,m,_.handle),delete l[m])}else for(m in l)w.event.remove(t,m+e[c],i,n,!0);w.isEmptyObject(l)&&Z.remove(t,"handle events")}},dispatch:function(t){var e,i,n,s,r,o,a=w.event.fix(t),l=new Array(arguments.length),c=(Z.get(this,"events")||{})[a.type]||[],u=w.event.special[a.type]||{};for(l[0]=a,e=1;e<arguments.length;e++)l[e]=arguments[e];if(a.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,a)){for(o=w.event.handlers.call(this,a,c),e=0;(s=o[e++])&&!a.isPropagationStopped();)for(a.currentTarget=s.elem,i=0;(r=s.handlers[i++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!a.rnamespace.test(r.namespace)||(a.handleObj=r,a.data=r.data,void 0!==(n=((w.event.special[r.origType]||{}).handle||r.handler).apply(s.elem,l))&&!1===(a.result=n)&&(a.preventDefault(),a.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,a),a.result}},handlers:function(t,e){var i,n,s,r,o,a=[],l=e.delegateCount,c=t.target;if(l&&c.nodeType&&!("click"===t.type&&t.button>=1))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==t.type||!0!==c.disabled)){for(r=[],o={},i=0;i<l;i++)void 0===o[s=(n=e[i]).selector+" "]&&(o[s]=n.needsContext?w(s,this).index(c)>-1:w.find(s,this,null,[c]).length),o[s]&&r.push(n);r.length&&a.push({elem:c,handlers:r})}return c=this,l<e.length&&a.push({elem:c,handlers:e.slice(l)}),a},addProp:function(t,e){Object.defineProperty(w.Event.prototype,t,{enumerable:!0,configurable:!0,get:v(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[w.expando]?t:new w.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==Bt()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===Bt()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&P(this,"input"))return this.click(),!1},_default:function(t){return P(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},w.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i)},w.Event=function(t,e){if(!(this instanceof w.Event))return new w.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?St:Ct,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&w.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[w.expando]=!0},w.Event.prototype={constructor:w.Event,isDefaultPrevented:Ct,isPropagationStopped:Ct,isImmediatePropagationStopped:Ct,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=St,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=St,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=St,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},w.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&bt.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&At.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},w.event.addProp),w.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){w.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=t.relatedTarget,s=t.handleObj;return n&&(n===this||w.contains(this,n))||(t.type=s.origType,i=s.handler.apply(this,arguments),t.type=e),i}}}),w.fn.extend({on:function(t,e,i,n){return Vt(this,t,e,i,n)},one:function(t,e,i,n){return Vt(this,t,e,i,n,1)},off:function(t,e,i){var n,s;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,w(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(s in t)this.off(s,e,t[s]);return this}return!1!==e&&"function"!=typeof e||(i=e,e=void 0),!1===i&&(i=Ct),this.each(function(){w.event.remove(this,t,i,e)})}});var Mt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,kt=/<script|<style|<link/i,Pt=/checked\s*(?:[^=]|=\s*.checked.)/i,It=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Dt(t,e){return P(t,"table")&&P(11!==e.nodeType?e:e.firstChild,"tr")&&w(t).children("tbody")[0]||t}function Tt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Et(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function $t(t,e){var i,n,s,r,o,a,l,c;if(1===e.nodeType){if(Z.hasData(t)&&(r=Z.access(t),o=Z.set(e,r),c=r.events))for(s in delete o.handle,o.events={},c)for(i=0,n=c[s].length;i<n;i++)w.event.add(e,s,c[s][i]);K.hasData(t)&&(a=K.access(t),l=w.extend({},a),K.set(e,l))}}function Lt(t,e){var i=e.nodeName.toLowerCase();"input"===i&&dt.test(t.type)?e.checked=t.checked:"input"!==i&&"textarea"!==i||(e.defaultValue=t.defaultValue)}function Rt(t,e,i,n){e=c.apply([],e);var s,r,o,a,l,u,h=0,d=t.length,m=d-1,p=e[0],f=v(p);if(f||d>1&&"string"==typeof p&&!g.checkClone&&Pt.test(p))return t.each(function(s){var r=t.eq(s);f&&(e[0]=p.call(this,s,r.html())),Rt(r,e,i,n)});if(d&&(r=(s=yt(e,t[0].ownerDocument,!1,t,n)).firstChild,1===s.childNodes.length&&(s=r),r||n)){for(a=(o=w.map(_t(s,"script"),Tt)).length;h<d;h++)l=s,h!==m&&(l=w.clone(l,!0,!0),a&&w.merge(o,_t(l,"script"))),i.call(t[h],l,h);if(a)for(u=o[o.length-1].ownerDocument,w.map(o,Et),h=0;h<a;h++)l=o[h],pt.test(l.type||"")&&!Z.access(l,"globalEval")&&w.contains(u,l)&&(l.src&&"module"!==(l.type||"").toLowerCase()?w._evalUrl&&w._evalUrl(l.src):b(l.textContent.replace(It,""),u,l))}return t}function Ft(t,e,i){for(var n,s=e?w.filter(e,t):t,r=0;null!=(n=s[r]);r++)i||1!==n.nodeType||w.cleanData(_t(n)),n.parentNode&&(i&&w.contains(n.ownerDocument,n)&&gt(_t(n,"script")),n.parentNode.removeChild(n));return t}w.extend({htmlPrefilter:function(t){return t.replace(Mt,"<$1></$2>")},clone:function(t,e,i){var n,s,r,o,a=t.cloneNode(!0),l=w.contains(t.ownerDocument,t);if(!(g.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||w.isXMLDoc(t)))for(o=_t(a),n=0,s=(r=_t(t)).length;n<s;n++)Lt(r[n],o[n]);if(e)if(i)for(r=r||_t(t),o=o||_t(a),n=0,s=r.length;n<s;n++)$t(r[n],o[n]);else $t(t,a);return(o=_t(a,"script")).length>0&&gt(o,!l&&_t(t,"script")),a},cleanData:function(t){for(var e,i,n,s=w.event.special,r=0;void 0!==(i=t[r]);r++)if(X(i)){if(e=i[Z.expando]){if(e.events)for(n in e.events)s[n]?w.event.remove(i,n):w.removeEvent(i,n,e.handle);i[Z.expando]=void 0}i[K.expando]&&(i[K.expando]=void 0)}}}),w.fn.extend({detach:function(t){return Ft(this,t,!0)},remove:function(t){return Ft(this,t)},text:function(t){return H(this,function(t){return void 0===t?w.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return Rt(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Dt(this,t).appendChild(t)})},prepend:function(){return Rt(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Dt(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return Rt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return Rt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(w.cleanData(_t(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return w.clone(this,t,e)})},html:function(t){return H(this,function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!kt.test(t)&&!ft[(mt.exec(t)||["",""])[1].toLowerCase()]){t=w.htmlPrefilter(t);try{for(;i<n;i++)1===(e=this[i]||{}).nodeType&&(w.cleanData(_t(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=[];return Rt(this,arguments,function(e){var i=this.parentNode;w.inArray(this,t)<0&&(w.cleanData(_t(this)),i&&i.replaceChild(e,this))},t)}}),w.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){w.fn[t]=function(t){for(var i,n=[],s=w(t),r=s.length-1,o=0;o<=r;o++)i=o===r?this:this.clone(!0),w(s[o])[e](i),u.apply(n,i.get());return this.pushStack(n)}});var Ot=new RegExp("^("+nt+")(?!px)[a-z%]+$","i"),jt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=i),e.getComputedStyle(t)},Gt=new RegExp(rt.join("|"),"i");function Nt(t,e,i){var n,s,r,o,a=t.style;return(i=i||jt(t))&&(""!==(o=i.getPropertyValue(e)||i[e])||w.contains(t.ownerDocument,t)||(o=w.style(t,e)),!g.pixelBoxStyles()&&Ot.test(o)&&Gt.test(e)&&(n=a.width,s=a.minWidth,r=a.maxWidth,a.minWidth=a.maxWidth=a.width=o,o=i.width,a.width=n,a.minWidth=s,a.maxWidth=r)),void 0!==o?o+"":o}function qt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(u){c.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",xt.appendChild(c).appendChild(u);var t=i.getComputedStyle(u);n="1%"!==t.top,l=12===e(t.marginLeft),u.style.right="60%",a=36===e(t.right),s=36===e(t.width),u.style.position="absolute",r=36===u.offsetWidth||"absolute",xt.removeChild(c),u=null}}function e(t){return Math.round(parseFloat(t))}var n,s,r,a,l,c=o.createElement("div"),u=o.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",g.clearCloneStyle="content-box"===u.style.backgroundClip,w.extend(g,{boxSizingReliable:function(){return t(),s},pixelBoxStyles:function(){return t(),a},pixelPosition:function(){return t(),n},reliableMarginLeft:function(){return t(),l},scrollboxSize:function(){return t(),r}}))}();var zt=/^(none|table(?!-c[ea]).+)/,Ht=/^--/,Ut={position:"absolute",visibility:"hidden",display:"block"},Wt={letterSpacing:"0",fontWeight:"400"},Jt=["Webkit","Moz","ms"],Yt=o.createElement("div").style;function Xt(t){var e=w.cssProps[t];return e||(e=w.cssProps[t]=function(t){if(t in Yt)return t;for(var e=t[0].toUpperCase()+t.slice(1),i=Jt.length;i--;)if((t=Jt[i]+e)in Yt)return t}(t)||t),e}function Qt(t,e,i){var n=st.exec(e);return n?Math.max(0,n[2]-(i||0))+(n[3]||"px"):e}function Zt(t,e,i,n,s,r){var o="width"===e?1:0,a=0,l=0;if(i===(n?"border":"content"))return 0;for(;o<4;o+=2)"margin"===i&&(l+=w.css(t,i+rt[o],!0,s)),n?("content"===i&&(l-=w.css(t,"padding"+rt[o],!0,s)),"margin"!==i&&(l-=w.css(t,"border"+rt[o]+"Width",!0,s))):(l+=w.css(t,"padding"+rt[o],!0,s),"padding"!==i?l+=w.css(t,"border"+rt[o]+"Width",!0,s):a+=w.css(t,"border"+rt[o]+"Width",!0,s));return!n&&r>=0&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-r-l-a-.5))),l}function Kt(t,e,i){var n=jt(t),s=Nt(t,e,n),r="border-box"===w.css(t,"boxSizing",!1,n),o=r;if(Ot.test(s)){if(!i)return s;s="auto"}return o=o&&(g.boxSizingReliable()||s===t.style[e]),("auto"===s||!parseFloat(s)&&"inline"===w.css(t,"display",!1,n))&&(s=t["offset"+e[0].toUpperCase()+e.slice(1)],o=!0),(s=parseFloat(s)||0)+Zt(t,e,i||(r?"border":"content"),o,n,s)+"px"}function te(t,e,i,n,s){return new te.prototype.init(t,e,i,n,s)}w.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=Nt(t,"opacity");return""===i?"1":i}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var s,r,o,a=Y(e),l=Ht.test(e),c=t.style;if(l||(e=Xt(a)),o=w.cssHooks[e]||w.cssHooks[a],void 0===i)return o&&"get"in o&&void 0!==(s=o.get(t,!1,n))?s:c[e];"string"===(r=typeof i)&&(s=st.exec(i))&&s[1]&&(i=lt(t,e,s),r="number"),null!=i&&i==i&&("number"===r&&(i+=s&&s[3]||(w.cssNumber[a]?"":"px")),g.clearCloneStyle||""!==i||0!==e.indexOf("background")||(c[e]="inherit"),o&&"set"in o&&void 0===(i=o.set(t,i,n))||(l?c.setProperty(e,i):c[e]=i))}},css:function(t,e,i,n){var s,r,o,a=Y(e);return Ht.test(e)||(e=Xt(a)),(o=w.cssHooks[e]||w.cssHooks[a])&&"get"in o&&(s=o.get(t,!0,i)),void 0===s&&(s=Nt(t,e,n)),"normal"===s&&e in Wt&&(s=Wt[e]),""===i||i?(r=parseFloat(s),!0===i||isFinite(r)?r||0:s):s}}),w.each(["height","width"],function(t,e){w.cssHooks[e]={get:function(t,i,n){if(i)return!zt.test(w.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?Kt(t,e,n):at(t,Ut,function(){return Kt(t,e,n)})},set:function(t,i,n){var s,r=jt(t),o="border-box"===w.css(t,"boxSizing",!1,r),a=n&&Zt(t,e,n,o,r);return o&&g.scrollboxSize()===r.position&&(a-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(r[e])-Zt(t,e,"border",!1,r)-.5)),a&&(s=st.exec(i))&&"px"!==(s[3]||"px")&&(t.style[e]=i,i=w.css(t,e)),Qt(0,i,a)}}}),w.cssHooks.marginLeft=qt(g.reliableMarginLeft,function(t,e){if(e)return(parseFloat(Nt(t,"marginLeft"))||t.getBoundingClientRect().left-at(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),w.each({margin:"",padding:"",border:"Width"},function(t,e){w.cssHooks[t+e]={expand:function(i){for(var n=0,s={},r="string"==typeof i?i.split(" "):[i];n<4;n++)s[t+rt[n]+e]=r[n]||r[n-2]||r[0];return s}},"margin"!==t&&(w.cssHooks[t+e].set=Qt)}),w.fn.extend({css:function(t,e){return H(this,function(t,e,i){var n,s,r={},o=0;if(Array.isArray(e)){for(n=jt(t),s=e.length;o<s;o++)r[e[o]]=w.css(t,e[o],!1,n);return r}return void 0!==i?w.style(t,e,i):w.css(t,e)},t,e,arguments.length>1)}}),w.Tween=te,te.prototype={constructor:te,init:function(t,e,i,n,s,r){this.elem=t,this.prop=i,this.easing=s||w.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=r||(w.cssNumber[i]?"":"px")},cur:function(){var t=te.propHooks[this.prop];return t&&t.get?t.get(this):te.propHooks._default.get(this)},run:function(t){var e,i=te.propHooks[this.prop];return this.options.duration?this.pos=e=w.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):te.propHooks._default.set(this),this}},te.prototype.init.prototype=te.prototype,te.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=w.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){w.fx.step[t.prop]?w.fx.step[t.prop](t):1!==t.elem.nodeType||null==t.elem.style[w.cssProps[t.prop]]&&!w.cssHooks[t.prop]?t.elem[t.prop]=t.now:w.style(t.elem,t.prop,t.now+t.unit)}}},te.propHooks.scrollTop=te.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},w.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},w.fx=te.prototype.init,w.fx.step={};var ee,ie,ne=/^(?:toggle|show|hide)$/,se=/queueHooks$/;function re(){ie&&(!1===o.hidden&&i.requestAnimationFrame?i.requestAnimationFrame(re):i.setTimeout(re,w.fx.interval),w.fx.tick())}function oe(){return i.setTimeout(function(){ee=void 0}),ee=Date.now()}function ae(t,e){var i,n=0,s={height:t};for(e=e?1:0;n<4;n+=2-e)s["margin"+(i=rt[n])]=s["padding"+i]=t;return e&&(s.opacity=s.width=t),s}function le(t,e,i){for(var n,s=(ce.tweeners[e]||[]).concat(ce.tweeners["*"]),r=0,o=s.length;r<o;r++)if(n=s[r].call(i,e,t))return n}function ce(t,e,i){var n,s,r=0,o=ce.prefilters.length,a=w.Deferred().always(function(){delete l.elem}),l=function(){if(s)return!1;for(var e=ee||oe(),i=Math.max(0,c.startTime+c.duration-e),n=1-(i/c.duration||0),r=0,o=c.tweens.length;r<o;r++)c.tweens[r].run(n);return a.notifyWith(t,[c,n,i]),n<1&&o?i:(o||a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:w.extend({},e),opts:w.extend(!0,{specialEasing:{},easing:w.easing._default},i),originalProperties:e,originalOptions:i,startTime:ee||oe(),duration:i.duration,tweens:[],createTween:function(e,i){var n=w.Tween(t,c.opts,e,i,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(n),n},stop:function(e){var i=0,n=e?c.tweens.length:0;if(s)return this;for(s=!0;i<n;i++)c.tweens[i].run(1);return e?(a.notifyWith(t,[c,1,0]),a.resolveWith(t,[c,e])):a.rejectWith(t,[c,e]),this}}),u=c.props;for(!function(t,e){var i,n,s,r,o;for(i in t)if(s=e[n=Y(i)],r=t[i],Array.isArray(r)&&(s=r[1],r=t[i]=r[0]),i!==n&&(t[n]=r,delete t[i]),(o=w.cssHooks[n])&&"expand"in o)for(i in r=o.expand(r),delete t[n],r)i in t||(t[i]=r[i],e[i]=s);else e[n]=s}(u,c.opts.specialEasing);r<o;r++)if(n=ce.prefilters[r].call(c,t,u,c.opts))return v(n.stop)&&(w._queueHooks(c.elem,c.opts.queue).stop=n.stop.bind(n)),n;return w.map(u,le,c),v(c.opts.start)&&c.opts.start.call(t,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),w.fx.timer(w.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c}w.Animation=w.extend(ce,{tweeners:{"*":[function(t,e){var i=this.createTween(t,e);return lt(i.elem,t,st.exec(e),i),i}]},tweener:function(t,e){v(t)?(e=t,t=["*"]):t=t.match(F);for(var i,n=0,s=t.length;n<s;n++)i=t[n],ce.tweeners[i]=ce.tweeners[i]||[],ce.tweeners[i].unshift(e)},prefilters:[function(t,e,i){var n,s,r,o,a,l,c,u,h="width"in e||"height"in e,d=this,m={},p=t.style,f=t.nodeType&&ot(t),_=Z.get(t,"fxshow");for(n in i.queue||(null==(o=w._queueHooks(t,"fx")).unqueued&&(o.unqueued=0,a=o.empty.fire,o.empty.fire=function(){o.unqueued||a()}),o.unqueued++,d.always(function(){d.always(function(){o.unqueued--,w.queue(t,"fx").length||o.empty.fire()})})),e)if(s=e[n],ne.test(s)){if(delete e[n],r=r||"toggle"===s,s===(f?"hide":"show")){if("show"!==s||!_||void 0===_[n])continue;f=!0}m[n]=_&&_[n]||w.style(t,n)}if((l=!w.isEmptyObject(e))||!w.isEmptyObject(m))for(n in h&&1===t.nodeType&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],null==(c=_&&_.display)&&(c=Z.get(t,"display")),"none"===(u=w.css(t,"display"))&&(c?u=c:(ht([t],!0),c=t.style.display||c,u=w.css(t,"display"),ht([t]))),("inline"===u||"inline-block"===u&&null!=c)&&"none"===w.css(t,"float")&&(l||(d.done(function(){p.display=c}),null==c&&(u=p.display,c="none"===u?"":u)),p.display="inline-block")),i.overflow&&(p.overflow="hidden",d.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]})),l=!1,m)l||(_?"hidden"in _&&(f=_.hidden):_=Z.access(t,"fxshow",{display:c}),r&&(_.hidden=!f),f&&ht([t],!0),d.done(function(){for(n in f||ht([t]),Z.remove(t,"fxshow"),m)w.style(t,n,m[n])})),l=le(f?_[n]:0,n,d),n in _||(_[n]=l.start,f&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?ce.prefilters.unshift(t):ce.prefilters.push(t)}}),w.speed=function(t,e,i){var n=t&&"object"==typeof t?w.extend({},t):{complete:i||!i&&e||v(t)&&t,duration:t,easing:i&&e||e&&!v(e)&&e};return w.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in w.fx.speeds?n.duration=w.fx.speeds[n.duration]:n.duration=w.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){v(n.old)&&n.old.call(this),n.queue&&w.dequeue(this,n.queue)},n},w.fn.extend({fadeTo:function(t,e,i,n){return this.filter(ot).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var s=w.isEmptyObject(t),r=w.speed(e,i,n),o=function(){var e=ce(this,w.extend({},t),r);(s||Z.get(this,"finish"))&&e.stop(!0)};return o.finish=o,s||!1===r.queue?this.each(o):this.queue(r.queue,o)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&!1!==t&&this.queue(t||"fx",[]),this.each(function(){var e=!0,s=null!=t&&t+"queueHooks",r=w.timers,o=Z.get(this);if(s)o[s]&&o[s].stop&&n(o[s]);else for(s in o)o[s]&&o[s].stop&&se.test(s)&&n(o[s]);for(s=r.length;s--;)r[s].elem!==this||null!=t&&r[s].queue!==t||(r[s].anim.stop(i),e=!1,r.splice(s,1));!e&&i||w.dequeue(this,t)})},finish:function(t){return!1!==t&&(t=t||"fx"),this.each(function(){var e,i=Z.get(this),n=i[t+"queue"],s=i[t+"queueHooks"],r=w.timers,o=n?n.length:0;for(i.finish=!0,w.queue(this,t,[]),s&&s.stop&&s.stop.call(this,!0),e=r.length;e--;)r[e].elem===this&&r[e].queue===t&&(r[e].anim.stop(!0),r.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish})}}),w.each(["toggle","show","hide"],function(t,e){var i=w.fn[e];w.fn[e]=function(t,n,s){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(ae(e,!0),t,n,s)}}),w.each({slideDown:ae("show"),slideUp:ae("hide"),slideToggle:ae("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){w.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}}),w.timers=[],w.fx.tick=function(){var t,e=0,i=w.timers;for(ee=Date.now();e<i.length;e++)(t=i[e])()||i[e]!==t||i.splice(e--,1);i.length||w.fx.stop(),ee=void 0},w.fx.timer=function(t){w.timers.push(t),w.fx.start()},w.fx.interval=13,w.fx.start=function(){ie||(ie=!0,re())},w.fx.stop=function(){ie=null},w.fx.speeds={slow:600,fast:200,_default:400},w.fn.delay=function(t,e){return t=w.fx&&w.fx.speeds[t]||t,e=e||"fx",this.queue(e,function(e,n){var s=i.setTimeout(e,t);n.stop=function(){i.clearTimeout(s)}})},function(){var t=o.createElement("input"),e=o.createElement("select").appendChild(o.createElement("option"));t.type="checkbox",g.checkOn=""!==t.value,g.optSelected=e.selected,(t=o.createElement("input")).value="t",t.type="radio",g.radioValue="t"===t.value}();var ue,he=w.expr.attrHandle;w.fn.extend({attr:function(t,e){return H(this,w.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){w.removeAttr(this,t)})}}),w.extend({attr:function(t,e,i){var n,s,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return void 0===t.getAttribute?w.prop(t,e,i):(1===r&&w.isXMLDoc(t)||(s=w.attrHooks[e.toLowerCase()]||(w.expr.match.bool.test(e)?ue:void 0)),void 0!==i?null===i?void w.removeAttr(t,e):s&&"set"in s&&void 0!==(n=s.set(t,i,e))?n:(t.setAttribute(e,i+""),i):s&&"get"in s&&null!==(n=s.get(t,e))?n:null==(n=w.find.attr(t,e))?void 0:n)},attrHooks:{type:{set:function(t,e){if(!g.radioValue&&"radio"===e&&P(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}},removeAttr:function(t,e){var i,n=0,s=e&&e.match(F);if(s&&1===t.nodeType)for(;i=s[n++];)t.removeAttribute(i)}}),ue={set:function(t,e,i){return!1===e?w.removeAttr(t,i):t.setAttribute(i,i),i}},w.each(w.expr.match.bool.source.match(/\w+/g),function(t,e){var i=he[e]||w.find.attr;he[e]=function(t,e,n){var s,r,o=e.toLowerCase();return n||(r=he[o],he[o]=s,s=null!=i(t,e,n)?o:null,he[o]=r),s}});var de=/^(?:input|select|textarea|button)$/i,me=/^(?:a|area)$/i;function pe(t){return(t.match(F)||[]).join(" ")}function fe(t){return t.getAttribute&&t.getAttribute("class")||""}function _e(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(F)||[]}w.fn.extend({prop:function(t,e){return H(this,w.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[w.propFix[t]||t]})}}),w.extend({prop:function(t,e,i){var n,s,r=t.nodeType;if(3!==r&&8!==r&&2!==r)return 1===r&&w.isXMLDoc(t)||(e=w.propFix[e]||e,s=w.propHooks[e]),void 0!==i?s&&"set"in s&&void 0!==(n=s.set(t,i,e))?n:t[e]=i:s&&"get"in s&&null!==(n=s.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=w.find.attr(t,"tabindex");return e?parseInt(e,10):de.test(t.nodeName)||me.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),g.optSelected||(w.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),w.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){w.propFix[this.toLowerCase()]=this}),w.fn.extend({addClass:function(t){var e,i,n,s,r,o,a,l=0;if(v(t))return this.each(function(e){w(this).addClass(t.call(this,e,fe(this)))});if((e=_e(t)).length)for(;i=this[l++];)if(s=fe(i),n=1===i.nodeType&&" "+pe(s)+" "){for(o=0;r=e[o++];)n.indexOf(" "+r+" ")<0&&(n+=r+" ");s!==(a=pe(n))&&i.setAttribute("class",a)}return this},removeClass:function(t){var e,i,n,s,r,o,a,l=0;if(v(t))return this.each(function(e){w(this).removeClass(t.call(this,e,fe(this)))});if(!arguments.length)return this.attr("class","");if((e=_e(t)).length)for(;i=this[l++];)if(s=fe(i),n=1===i.nodeType&&" "+pe(s)+" "){for(o=0;r=e[o++];)for(;n.indexOf(" "+r+" ")>-1;)n=n.replace(" "+r+" "," ");s!==(a=pe(n))&&i.setAttribute("class",a)}return this},toggleClass:function(t,e){var i=typeof t,n="string"===i||Array.isArray(t);return"boolean"==typeof e&&n?e?this.addClass(t):this.removeClass(t):v(t)?this.each(function(i){w(this).toggleClass(t.call(this,i,fe(this),e),e)}):this.each(function(){var e,s,r,o;if(n)for(s=0,r=w(this),o=_e(t);e=o[s++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else void 0!==t&&"boolean"!==i||((e=fe(this))&&Z.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===t?"":Z.get(this,"__className__")||""))})},hasClass:function(t){var e,i,n=0;for(e=" "+t+" ";i=this[n++];)if(1===i.nodeType&&(" "+pe(fe(i))+" ").indexOf(e)>-1)return!0;return!1}});var ge=/\r/g;w.fn.extend({val:function(t){var e,i,n,s=this[0];return arguments.length?(n=v(t),this.each(function(i){var s;1===this.nodeType&&(null==(s=n?t.call(this,i,w(this).val()):t)?s="":"number"==typeof s?s+="":Array.isArray(s)&&(s=w.map(s,function(t){return null==t?"":t+""})),(e=w.valHooks[this.type]||w.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,s,"value")||(this.value=s))})):s?(e=w.valHooks[s.type]||w.valHooks[s.nodeName.toLowerCase()])&&"get"in e&&void 0!==(i=e.get(s,"value"))?i:"string"==typeof(i=s.value)?i.replace(ge,""):null==i?"":i:void 0}}),w.extend({valHooks:{option:{get:function(t){var e=w.find.attr(t,"value");return null!=e?e:pe(w.text(t))}},select:{get:function(t){var e,i,n,s=t.options,r=t.selectedIndex,o="select-one"===t.type,a=o?null:[],l=o?r+1:s.length;for(n=r<0?l:o?r:0;n<l;n++)if(((i=s[n]).selected||n===r)&&!i.disabled&&(!i.parentNode.disabled||!P(i.parentNode,"optgroup"))){if(e=w(i).val(),o)return e;a.push(e)}return a},set:function(t,e){for(var i,n,s=t.options,r=w.makeArray(e),o=s.length;o--;)((n=s[o]).selected=w.inArray(w.valHooks.option.get(n),r)>-1)&&(i=!0);return i||(t.selectedIndex=-1),r}}}}),w.each(["radio","checkbox"],function(){w.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=w.inArray(w(t).val(),e)>-1}},g.checkOn||(w.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),g.focusin="onfocusin"in i;var ve=/^(?:focusinfocus|focusoutblur)$/,ye=function(t){t.stopPropagation()};w.extend(w.event,{trigger:function(t,e,n,s){var r,a,l,c,u,h,d,m,f=[n||o],_=p.call(t,"type")?t.type:t,g=p.call(t,"namespace")?t.namespace.split("."):[];if(a=m=l=n=n||o,3!==n.nodeType&&8!==n.nodeType&&!ve.test(_+w.event.triggered)&&(_.indexOf(".")>-1&&(_=(g=_.split(".")).shift(),g.sort()),u=_.indexOf(":")<0&&"on"+_,(t=t[w.expando]?t:new w.Event(_,"object"==typeof t&&t)).isTrigger=s?2:3,t.namespace=g.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:w.makeArray(e,[t]),d=w.event.special[_]||{},s||!d.trigger||!1!==d.trigger.apply(n,e))){if(!s&&!d.noBubble&&!y(n)){for(c=d.delegateType||_,ve.test(c+_)||(a=a.parentNode);a;a=a.parentNode)f.push(a),l=a;l===(n.ownerDocument||o)&&f.push(l.defaultView||l.parentWindow||i)}for(r=0;(a=f[r++])&&!t.isPropagationStopped();)m=a,t.type=r>1?c:d.bindType||_,(h=(Z.get(a,"events")||{})[t.type]&&Z.get(a,"handle"))&&h.apply(a,e),(h=u&&a[u])&&h.apply&&X(a)&&(t.result=h.apply(a,e),!1===t.result&&t.preventDefault());return t.type=_,s||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(f.pop(),e)||!X(n)||u&&v(n[_])&&!y(n)&&((l=n[u])&&(n[u]=null),w.event.triggered=_,t.isPropagationStopped()&&m.addEventListener(_,ye),n[_](),t.isPropagationStopped()&&m.removeEventListener(_,ye),w.event.triggered=void 0,l&&(n[u]=l)),t.result}},simulate:function(t,e,i){var n=w.extend(new w.Event,i,{type:t,isSimulated:!0});w.event.trigger(n,null,e)}}),w.fn.extend({trigger:function(t,e){return this.each(function(){w.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];if(i)return w.event.trigger(t,e,i,!0)}}),g.focusin||w.each({focus:"focusin",blur:"focusout"},function(t,e){var i=function(t){w.event.simulate(e,t.target,w.event.fix(t))};w.event.special[e]={setup:function(){var n=this.ownerDocument||this,s=Z.access(n,e);s||n.addEventListener(t,i,!0),Z.access(n,e,(s||0)+1)},teardown:function(){var n=this.ownerDocument||this,s=Z.access(n,e)-1;s?Z.access(n,e,s):(n.removeEventListener(t,i,!0),Z.remove(n,e))}}});var xe=i.location,be=Date.now(),Ae=/\?/;w.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new i.DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||w.error("Invalid XML: "+t),e};var we=/\[\]$/,Se=/\r?\n/g,Ce=/^(?:submit|button|image|reset|file)$/i,Be=/^(?:input|select|textarea|keygen)/i;function Ve(t,e,i,n){var s;if(Array.isArray(e))w.each(e,function(e,s){i||we.test(t)?n(t,s):Ve(t+"["+("object"==typeof s&&null!=s?e:"")+"]",s,i,n)});else if(i||"object"!==A(e))n(t,e);else for(s in e)Ve(t+"["+s+"]",e[s],i,n)}w.param=function(t,e){var i,n=[],s=function(t,e){var i=v(e)?e():e;n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==i?"":i)};if(Array.isArray(t)||t.jquery&&!w.isPlainObject(t))w.each(t,function(){s(this.name,this.value)});else for(i in t)Ve(i,t[i],e,s);return n.join("&")},w.fn.extend({serialize:function(){return w.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=w.prop(this,"elements");return t?w.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!w(this).is(":disabled")&&Be.test(this.nodeName)&&!Ce.test(t)&&(this.checked||!dt.test(t))}).map(function(t,e){var i=w(this).val();return null==i?null:Array.isArray(i)?w.map(i,function(t){return{name:e.name,value:t.replace(Se,"\r\n")}}):{name:e.name,value:i.replace(Se,"\r\n")}}).get()}});var Me=/%20/g,ke=/#.*$/,Pe=/([?&])_=[^&]*/,Ie=/^(.*?):[ \t]*([^\r\n]*)$/gm,De=/^(?:GET|HEAD)$/,Te=/^\/\//,Ee={},$e={},Le="*/".concat("*"),Re=o.createElement("a");function Fe(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,s=0,r=e.toLowerCase().match(F)||[];if(v(i))for(;n=r[s++];)"+"===n[0]?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function Oe(t,e,i,n){var s={},r=t===$e;function o(a){var l;return s[a]=!0,w.each(t[a]||[],function(t,a){var c=a(e,i,n);return"string"!=typeof c||r||s[c]?r?!(l=c):void 0:(e.dataTypes.unshift(c),o(c),!1)}),l}return o(e.dataTypes[0])||!s["*"]&&o("*")}function je(t,e){var i,n,s=w.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((s[i]?t:n||(n={}))[i]=e[i]);return n&&w.extend(!0,t,n),t}Re.href=xe.href,w.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:xe.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(xe.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Le,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":w.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?je(je(t,w.ajaxSettings),e):je(w.ajaxSettings,t)},ajaxPrefilter:Fe(Ee),ajaxTransport:Fe($e),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,s,r,a,l,c,u,h,d,m,p=w.ajaxSetup({},e),f=p.context||p,_=p.context&&(f.nodeType||f.jquery)?w(f):w.event,g=w.Deferred(),v=w.Callbacks("once memory"),y=p.statusCode||{},x={},b={},A="canceled",S={readyState:0,getResponseHeader:function(t){var e;if(u){if(!a)for(a={};e=Ie.exec(r);)a[e[1].toLowerCase()]=e[2];e=a[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return u?r:null},setRequestHeader:function(t,e){return null==u&&(t=b[t.toLowerCase()]=b[t.toLowerCase()]||t,x[t]=e),this},overrideMimeType:function(t){return null==u&&(p.mimeType=t),this},statusCode:function(t){var e;if(t)if(u)S.always(t[S.status]);else for(e in t)y[e]=[y[e],t[e]];return this},abort:function(t){var e=t||A;return n&&n.abort(e),C(0,e),this}};if(g.promise(S),p.url=((t||p.url||xe.href)+"").replace(Te,xe.protocol+"//"),p.type=e.method||e.type||p.method||p.type,p.dataTypes=(p.dataType||"*").toLowerCase().match(F)||[""],null==p.crossDomain){c=o.createElement("a");try{c.href=p.url,c.href=c.href,p.crossDomain=Re.protocol+"//"+Re.host!=c.protocol+"//"+c.host}catch(t){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=w.param(p.data,p.traditional)),Oe(Ee,p,e,S),u)return S;for(d in(h=w.event&&p.global)&&0==w.active++&&w.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!De.test(p.type),s=p.url.replace(ke,""),p.hasContent?p.data&&p.processData&&0===(p.contentType||"").indexOf("application/x-www-form-urlencoded")&&(p.data=p.data.replace(Me,"+")):(m=p.url.slice(s.length),p.data&&(p.processData||"string"==typeof p.data)&&(s+=(Ae.test(s)?"&":"?")+p.data,delete p.data),!1===p.cache&&(s=s.replace(Pe,"$1"),m=(Ae.test(s)?"&":"?")+"_="+be+++m),p.url=s+m),p.ifModified&&(w.lastModified[s]&&S.setRequestHeader("If-Modified-Since",w.lastModified[s]),w.etag[s]&&S.setRequestHeader("If-None-Match",w.etag[s])),(p.data&&p.hasContent&&!1!==p.contentType||e.contentType)&&S.setRequestHeader("Content-Type",p.contentType),S.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Le+"; q=0.01":""):p.accepts["*"]),p.headers)S.setRequestHeader(d,p.headers[d]);if(p.beforeSend&&(!1===p.beforeSend.call(f,S,p)||u))return S.abort();if(A="abort",v.add(p.complete),S.done(p.success),S.fail(p.error),n=Oe($e,p,e,S)){if(S.readyState=1,h&&_.trigger("ajaxSend",[S,p]),u)return S;p.async&&p.timeout>0&&(l=i.setTimeout(function(){S.abort("timeout")},p.timeout));try{u=!1,n.send(x,C)}catch(t){if(u)throw t;C(-1,t)}}else C(-1,"No Transport");function C(t,e,o,a){var c,d,m,x,b,A=e;u||(u=!0,l&&i.clearTimeout(l),n=void 0,r=a||"",S.readyState=t>0?4:0,c=t>=200&&t<300||304===t,o&&(x=function(t,e,i){for(var n,s,r,o,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader("Content-Type"));if(n)for(s in a)if(a[s]&&a[s].test(n)){l.unshift(s);break}if(l[0]in i)r=l[0];else{for(s in i){if(!l[0]||t.converters[s+" "+l[0]]){r=s;break}o||(o=s)}r=r||o}if(r)return r!==l[0]&&l.unshift(r),i[r]}(p,S,o)),x=function(t,e,i,n){var s,r,o,a,l,c={},u=t.dataTypes.slice();if(u[1])for(o in t.converters)c[o.toLowerCase()]=t.converters[o];for(r=u.shift();r;)if(t.responseFields[r]&&(i[t.responseFields[r]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=r,r=u.shift())if("*"===r)r=l;else if("*"!==l&&l!==r){if(!(o=c[l+" "+r]||c["* "+r]))for(s in c)if((a=s.split(" "))[1]===r&&(o=c[l+" "+a[0]]||c["* "+a[0]])){!0===o?o=c[s]:!0!==c[s]&&(r=a[0],u.unshift(a[1]));break}if(!0!==o)if(o&&t.throws)e=o(e);else try{e=o(e)}catch(t){return{state:"parsererror",error:o?t:"No conversion from "+l+" to "+r}}}return{state:"success",data:e}}(p,x,S,c),c?(p.ifModified&&((b=S.getResponseHeader("Last-Modified"))&&(w.lastModified[s]=b),(b=S.getResponseHeader("etag"))&&(w.etag[s]=b)),204===t||"HEAD"===p.type?A="nocontent":304===t?A="notmodified":(A=x.state,d=x.data,c=!(m=x.error))):(m=A,!t&&A||(A="error",t<0&&(t=0))),S.status=t,S.statusText=(e||A)+"",c?g.resolveWith(f,[d,A,S]):g.rejectWith(f,[S,A,m]),S.statusCode(y),y=void 0,h&&_.trigger(c?"ajaxSuccess":"ajaxError",[S,p,c?d:m]),v.fireWith(f,[S,A]),h&&(_.trigger("ajaxComplete",[S,p]),--w.active||w.event.trigger("ajaxStop")))}return S},getJSON:function(t,e,i){return w.get(t,e,i,"json")},getScript:function(t,e){return w.get(t,void 0,e,"script")}}),w.each(["get","post"],function(t,e){w[e]=function(t,i,n,s){return v(i)&&(s=s||n,n=i,i=void 0),w.ajax(w.extend({url:t,type:e,dataType:s,data:i,success:n},w.isPlainObject(t)&&t))}}),w._evalUrl=function(t){return w.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},w.fn.extend({wrapAll:function(t){var e;return this[0]&&(v(t)&&(t=t.call(this[0])),e=w(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(t){return v(t)?this.each(function(e){w(this).wrapInner(t.call(this,e))}):this.each(function(){var e=w(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=v(t);return this.each(function(i){w(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(t){return this.parent(t).not("body").each(function(){w(this).replaceWith(this.childNodes)}),this}}),w.expr.pseudos.hidden=function(t){return!w.expr.pseudos.visible(t)},w.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},w.ajaxSettings.xhr=function(){try{return new i.XMLHttpRequest}catch(t){}};var Ge={0:200,1223:204},Ne=w.ajaxSettings.xhr();g.cors=!!Ne&&"withCredentials"in Ne,g.ajax=Ne=!!Ne,w.ajaxTransport(function(t){var e,n;if(g.cors||Ne&&!t.crossDomain)return{send:function(s,r){var o,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)a[o]=t.xhrFields[o];for(o in t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||s["X-Requested-With"]||(s["X-Requested-With"]="XMLHttpRequest"),s)a.setRequestHeader(o,s[o]);e=function(t){return function(){e&&(e=n=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?r(0,"error"):r(a.status,a.statusText):r(Ge[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=e(),n=a.onerror=a.ontimeout=e("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&i.setTimeout(function(){e&&n()})},e=e("abort");try{a.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}}),w.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),w.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return w.globalEval(t),t}}}),w.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),w.ajaxTransport("script",function(t){var e,i;if(t.crossDomain)return{send:function(n,s){e=w("<script>").prop({charset:t.scriptCharset,src:t.url}).on("load error",i=function(t){e.remove(),i=null,t&&s("error"===t.type?404:200,t.type)}),o.head.appendChild(e[0])},abort:function(){i&&i()}}});var qe=[],ze=/(=)\?(?=&|$)|\?\?/;w.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=qe.pop()||w.expando+"_"+be++;return this[t]=!0,t}}),w.ajaxPrefilter("json jsonp",function(t,e,n){var s,r,o,a=!1!==t.jsonp&&(ze.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&ze.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return s=t.jsonpCallback=v(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(ze,"$1"+s):!1!==t.jsonp&&(t.url+=(Ae.test(t.url)?"&":"?")+t.jsonp+"="+s),t.converters["script json"]=function(){return o||w.error(s+" was not called"),o[0]},t.dataTypes[0]="json",r=i[s],i[s]=function(){o=arguments},n.always(function(){void 0===r?w(i).removeProp(s):i[s]=r,t[s]&&(t.jsonpCallback=e.jsonpCallback,qe.push(s)),o&&v(r)&&r(o[0]),o=r=void 0}),"script"}),g.createHTMLDocument=function(){var t=o.implementation.createHTMLDocument("").body;return t.innerHTML="<form></form><form></form>",2===t.childNodes.length}(),w.parseHTML=function(t,e,i){return"string"!=typeof t?[]:("boolean"==typeof e&&(i=e,e=!1),e||(g.createHTMLDocument?((n=(e=o.implementation.createHTMLDocument("")).createElement("base")).href=o.location.href,e.head.appendChild(n)):e=o),s=I.exec(t),r=!i&&[],s?[e.createElement(s[1])]:(s=yt([t],e,r),r&&r.length&&w(r).remove(),w.merge([],s.childNodes)));var n,s,r},w.fn.load=function(t,e,i){var n,s,r,o=this,a=t.indexOf(" ");return a>-1&&(n=pe(t.slice(a)),t=t.slice(0,a)),v(e)?(i=e,e=void 0):e&&"object"==typeof e&&(s="POST"),o.length>0&&w.ajax({url:t,type:s||"GET",dataType:"html",data:e}).done(function(t){r=arguments,o.html(n?w("<div>").append(w.parseHTML(t)).find(n):t)}).always(i&&function(t,e){o.each(function(){i.apply(this,r||[t.responseText,e,t])})}),this},w.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){w.fn[e]=function(t){return this.on(e,t)}}),w.expr.pseudos.animated=function(t){return w.grep(w.timers,function(e){return t===e.elem}).length},w.offset={setOffset:function(t,e,i){var n,s,r,o,a,l,c=w.css(t,"position"),u=w(t),h={};"static"===c&&(t.style.position="relative"),a=u.offset(),r=w.css(t,"top"),l=w.css(t,"left"),("absolute"===c||"fixed"===c)&&(r+l).indexOf("auto")>-1?(o=(n=u.position()).top,s=n.left):(o=parseFloat(r)||0,s=parseFloat(l)||0),v(e)&&(e=e.call(t,i,w.extend({},a))),null!=e.top&&(h.top=e.top-a.top+o),null!=e.left&&(h.left=e.left-a.left+s),"using"in e?e.using.call(t,h):u.css(h)}},w.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){w.offset.setOffset(this,t,e)});var e,i,n=this[0];return n?n.getClientRects().length?(e=n.getBoundingClientRect(),i=n.ownerDocument.defaultView,{top:e.top+i.pageYOffset,left:e.left+i.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,i,n=this[0],s={top:0,left:0};if("fixed"===w.css(n,"position"))e=n.getBoundingClientRect();else{for(e=this.offset(),i=n.ownerDocument,t=n.offsetParent||i.documentElement;t&&(t===i.body||t===i.documentElement)&&"static"===w.css(t,"position");)t=t.parentNode;t&&t!==n&&1===t.nodeType&&((s=w(t).offset()).top+=w.css(t,"borderTopWidth",!0),s.left+=w.css(t,"borderLeftWidth",!0))}return{top:e.top-s.top-w.css(n,"marginTop",!0),left:e.left-s.left-w.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===w.css(t,"position");)t=t.offsetParent;return t||xt})}}),w.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var i="pageYOffset"===e;w.fn[t]=function(n){return H(this,function(t,n,s){var r;if(y(t)?r=t:9===t.nodeType&&(r=t.defaultView),void 0===s)return r?r[e]:t[n];r?r.scrollTo(i?r.pageXOffset:s,i?s:r.pageYOffset):t[n]=s},t,n,arguments.length)}}),w.each(["top","left"],function(t,e){w.cssHooks[e]=qt(g.pixelPosition,function(t,i){if(i)return i=Nt(t,e),Ot.test(i)?w(t).position()[e]+"px":i})}),w.each({Height:"height",Width:"width"},function(t,e){w.each({padding:"inner"+t,content:e,"":"outer"+t},function(i,n){w.fn[n]=function(s,r){var o=arguments.length&&(i||"boolean"!=typeof s),a=i||(!0===s||!0===r?"margin":"border");return H(this,function(e,i,s){var r;return y(e)?0===n.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+t],r["scroll"+t],e.body["offset"+t],r["offset"+t],r["client"+t])):void 0===s?w.css(e,i,a):w.style(e,i,s,a)},e,o?s:void 0,o)}})}),w.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,e){w.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}),w.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),w.fn.extend({bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)}}),w.proxy=function(t,e){var i,n,s;if("string"==typeof e&&(i=t[e],e=t,t=i),v(t))return n=l.call(arguments,2),(s=function(){return t.apply(e||this,n.concat(l.call(arguments)))}).guid=t.guid=t.guid||w.guid++,s},w.holdReady=function(t){t?w.readyWait++:w.ready(!0)},w.isArray=Array.isArray,w.parseJSON=JSON.parse,w.nodeName=P,w.isFunction=v,w.isWindow=y,w.camelCase=Y,w.type=A,w.now=Date.now,w.isNumeric=function(t){var e=w.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},void 0===(n=function(){return w}.apply(e,[]))||(t.exports=n);var He=i.jQuery,Ue=i.$;return w.noConflict=function(t){return i.$===w&&(i.$=Ue),t&&i.jQuery===w&&(i.jQuery=He),w},s||(i.jQuery=i.$=w),w})},function(t,e,i){(function(e,i){
/*!
 * Vue.js v2.5.17
 * (c) 2014-2018 Evan You
 * Released under the MIT License.
 */
t.exports=function(){"use strict";var t=Object.freeze({});function n(t){return null==t}function s(t){return null!=t}function r(t){return!0===t}function o(t){return"string"==typeof t||"number"==typeof t||"symbol"==typeof t||"boolean"==typeof t}function a(t){return null!==t&&"object"==typeof t}var l=Object.prototype.toString;function c(t){return"[object Object]"===l.call(t)}function u(t){var e=parseFloat(String(t));return 0<=e&&Math.floor(e)===e&&isFinite(t)}function h(t){return null==t?"":"object"==typeof t?JSON.stringify(t,null,2):String(t)}function d(t){var e=parseFloat(t);return isNaN(e)?t:e}function m(t,e){for(var i=Object.create(null),n=t.split(","),s=0;s<n.length;s++)i[n[s]]=!0;return e?function(t){return i[t.toLowerCase()]}:function(t){return i[t]}}var p=m("slot,component",!0),f=m("key,ref,slot,slot-scope,is");function _(t,e){if(t.length){var i=t.indexOf(e);if(-1<i)return t.splice(i,1)}}var g=Object.prototype.hasOwnProperty;function v(t,e){return g.call(t,e)}function y(t){var e=Object.create(null);return function(i){return e[i]||(e[i]=t(i))}}var x=/-(\w)/g,b=y(function(t){return t.replace(x,function(t,e){return e?e.toUpperCase():""})}),A=y(function(t){return t.charAt(0).toUpperCase()+t.slice(1)}),w=/\B([A-Z])/g,S=y(function(t){return t.replace(w,"-$1").toLowerCase()}),C=Function.prototype.bind?function(t,e){return t.bind(e)}:function(t,e){function i(i){var n=arguments.length;return n?1<n?t.apply(e,arguments):t.call(e,i):t.call(e)}return i._length=t.length,i};function B(t,e){e=e||0;for(var i=t.length-e,n=new Array(i);i--;)n[i]=t[i+e];return n}function V(t,e){for(var i in e)t[i]=e[i];return t}function M(t){for(var e={},i=0;i<t.length;i++)t[i]&&V(e,t[i]);return e}function k(t,e,i){}var P=function(t,e,i){return!1},I=function(t){return t};function D(t,e){if(t===e)return!0;var i=a(t),n=a(e);if(!i||!n)return!i&&!n&&String(t)===String(e);try{var s=Array.isArray(t),r=Array.isArray(e);if(s&&r)return t.length===e.length&&t.every(function(t,i){return D(t,e[i])});if(s||r)return!1;var o=Object.keys(t),l=Object.keys(e);return o.length===l.length&&o.every(function(i){return D(t[i],e[i])})}catch(i){return!1}}function T(t,e){for(var i=0;i<t.length;i++)if(D(t[i],e))return i;return-1}function E(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}var $="data-server-rendered",L=["component","directive","filter"],R=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured"],F={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:P,isReservedAttr:P,isUnknownElement:P,getTagNamespace:k,parsePlatformTagName:I,mustUseProp:P,_lifecycleHooks:R};function O(t,e,i,n){Object.defineProperty(t,e,{value:i,enumerable:!!n,writable:!0,configurable:!0})}var j,G=/[^\w.$]/,N="__proto__"in{},q="undefined"!=typeof window,z="undefined"!=typeof WXEnvironment&&!!WXEnvironment.platform,H=z&&WXEnvironment.platform.toLowerCase(),U=q&&window.navigator.userAgent.toLowerCase(),W=U&&/msie|trident/.test(U),J=U&&0<U.indexOf("msie 9.0"),Y=U&&0<U.indexOf("edge/"),X=(U&&U.indexOf("android"),U&&/iphone|ipad|ipod|ios/.test(U)||"ios"===H),Q=(U&&/chrome\/\d+/.test(U),{}.watch),Z=!1;if(q)try{var K={};Object.defineProperty(K,"passive",{get:function(){Z=!0}}),window.addEventListener("test-passive",null,K)}catch(y){}var tt=function(){return void 0===j&&(j=!q&&!z&&void 0!==e&&"server"===e.process.env.VUE_ENV),j},et=q&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function it(t){return"function"==typeof t&&/native code/.test(t.toString())}var nt,st="undefined"!=typeof Symbol&&it(Symbol)&&"undefined"!=typeof Reflect&&it(Reflect.ownKeys);nt="undefined"!=typeof Set&&it(Set)?Set:function(){function t(){this.set=Object.create(null)}return t.prototype.has=function(t){return!0===this.set[t]},t.prototype.add=function(t){this.set[t]=!0},t.prototype.clear=function(){this.set=Object.create(null)},t}();var rt=k,ot=0,at=function(){this.id=ot++,this.subs=[]};at.prototype.addSub=function(t){this.subs.push(t)},at.prototype.removeSub=function(t){_(this.subs,t)},at.prototype.depend=function(){at.target&&at.target.addDep(this)},at.prototype.notify=function(){for(var t=this.subs.slice(),e=0,i=t.length;e<i;e++)t[e].update()},at.target=null;var lt=[];function ct(t){at.target&&lt.push(at.target),at.target=t}function ut(){at.target=lt.pop()}var ht=function(t,e,i,n,s,r,o,a){this.tag=t,this.data=e,this.children=i,this.text=n,this.elm=s,this.ns=void 0,this.context=r,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=o,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=a,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},dt={child:{configurable:!0}};dt.child.get=function(){return this.componentInstance},Object.defineProperties(ht.prototype,dt);var mt=function(t){void 0===t&&(t="");var e=new ht;return e.text=t,e.isComment=!0,e};function pt(t){return new ht(void 0,void 0,void 0,String(t))}function ft(t){var e=new ht(t.tag,t.data,t.children,t.text,t.elm,t.context,t.componentOptions,t.asyncFactory);return e.ns=t.ns,e.isStatic=t.isStatic,e.key=t.key,e.isComment=t.isComment,e.fnContext=t.fnContext,e.fnOptions=t.fnOptions,e.fnScopeId=t.fnScopeId,e.isCloned=!0,e}var _t=Array.prototype,gt=Object.create(_t);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(t){var e=_t[t];O(gt,t,function(){for(var i=[],n=arguments.length;n--;)i[n]=arguments[n];var s,r=e.apply(this,i),o=this.__ob__;switch(t){case"push":case"unshift":s=i;break;case"splice":s=i.slice(2)}return s&&o.observeArray(s),o.dep.notify(),r})});var vt=Object.getOwnPropertyNames(gt),yt=!0;function xt(t){yt=t}var bt=function(t){this.value=t,this.dep=new at,this.vmCount=0,O(t,"__ob__",this),Array.isArray(t)?((N?function(t,e,i){t.__proto__=e}:function(t,e,i){for(var n=0,s=i.length;n<s;n++){var r=i[n];O(t,r,e[r])}})(t,gt,vt),this.observeArray(t)):this.walk(t)};function At(t,e){var i;if(a(t)&&!(t instanceof ht))return v(t,"__ob__")&&t.__ob__ instanceof bt?i=t.__ob__:yt&&!tt()&&(Array.isArray(t)||c(t))&&Object.isExtensible(t)&&!t._isVue&&(i=new bt(t)),e&&i&&i.vmCount++,i}function wt(t,e,i,n,s){var r=new at,o=Object.getOwnPropertyDescriptor(t,e);if(!o||!1!==o.configurable){var a=o&&o.get;a||2!==arguments.length||(i=t[e]);var l=o&&o.set,c=!s&&At(i);Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){var e=a?a.call(t):i;return at.target&&(r.depend(),c&&(c.dep.depend(),Array.isArray(e)&&function t(e){for(var i=void 0,n=0,s=e.length;n<s;n++)(i=e[n])&&i.__ob__&&i.__ob__.dep.depend(),Array.isArray(i)&&t(i)}(e))),e},set:function(e){var n=a?a.call(t):i;e===n||e!=e&&n!=n||(l?l.call(t,e):i=e,c=!s&&At(e),r.notify())}})}}function St(t,e,i){if(Array.isArray(t)&&u(e))return t.length=Math.max(t.length,e),t.splice(e,1,i),i;if(e in t&&!(e in Object.prototype))return t[e]=i;var n=t.__ob__;return t._isVue||n&&n.vmCount?i:n?(wt(n.value,e,i),n.dep.notify(),i):t[e]=i}function Ct(t,e){if(Array.isArray(t)&&u(e))t.splice(e,1);else{var i=t.__ob__;t._isVue||i&&i.vmCount||v(t,e)&&(delete t[e],i&&i.dep.notify())}}bt.prototype.walk=function(t){for(var e=Object.keys(t),i=0;i<e.length;i++)wt(t,e[i])},bt.prototype.observeArray=function(t){for(var e=0,i=t.length;e<i;e++)At(t[e])};var Bt=F.optionMergeStrategies;function Vt(t,e){if(!e)return t;for(var i,n,s,r=Object.keys(e),o=0;o<r.length;o++)n=t[i=r[o]],s=e[i],v(t,i)?c(n)&&c(s)&&Vt(n,s):St(t,i,s);return t}function Mt(t,e,i){return i?function(){var n="function"==typeof e?e.call(i,i):e,s="function"==typeof t?t.call(i,i):t;return n?Vt(n,s):s}:e?t?function(){return Vt("function"==typeof e?e.call(this,this):e,"function"==typeof t?t.call(this,this):t)}:e:t}function kt(t,e){return e?t?t.concat(e):Array.isArray(e)?e:[e]:t}function Pt(t,e,i,n){var s=Object.create(t||null);return e?V(s,e):s}Bt.data=function(t,e,i){return i?Mt(t,e,i):e&&"function"!=typeof e?t:Mt(t,e)},R.forEach(function(t){Bt[t]=kt}),L.forEach(function(t){Bt[t+"s"]=Pt}),Bt.watch=function(t,e,i,n){if(t===Q&&(t=void 0),e===Q&&(e=void 0),!e)return Object.create(t||null);if(!t)return e;var s={};for(var r in V(s,t),e){var o=s[r],a=e[r];o&&!Array.isArray(o)&&(o=[o]),s[r]=o?o.concat(a):Array.isArray(a)?a:[a]}return s},Bt.props=Bt.methods=Bt.inject=Bt.computed=function(t,e,i,n){if(!t)return e;var s=Object.create(null);return V(s,t),e&&V(s,e),s},Bt.provide=Mt;var It=function(t,e){return void 0===e?t:e};function Dt(t,e,i){"function"==typeof e&&(e=e.options),function(t,e){var i=t.props;if(i){var n,s,r={};if(Array.isArray(i))for(n=i.length;n--;)"string"==typeof(s=i[n])&&(r[b(s)]={type:null});else if(c(i))for(var o in i)s=i[o],r[b(o)]=c(s)?s:{type:s};t.props=r}}(e),function(t,e){var i=t.inject;if(i){var n=t.inject={};if(Array.isArray(i))for(var s=0;s<i.length;s++)n[i[s]]={from:i[s]};else if(c(i))for(var r in i){var o=i[r];n[r]=c(o)?V({from:r},o):{from:o}}}}(e),function(t){var e=t.directives;if(e)for(var i in e){var n=e[i];"function"==typeof n&&(e[i]={bind:n,update:n})}}(e);var n=e.extends;if(n&&(t=Dt(t,n,i)),e.mixins)for(var s=0,r=e.mixins.length;s<r;s++)t=Dt(t,e.mixins[s],i);var o,a={};for(o in t)l(o);for(o in e)v(t,o)||l(o);function l(n){var s=Bt[n]||It;a[n]=s(t[n],e[n],i,n)}return a}function Tt(t,e,i,n){if("string"==typeof i){var s=t[e];if(v(s,i))return s[i];var r=b(i);if(v(s,r))return s[r];var o=A(r);return v(s,o)?s[o]:s[i]||s[r]||s[o]}}function Et(t,e,i,n){var s=e[t],r=!v(i,t),o=i[t],a=Rt(Boolean,s.type);if(-1<a)if(r&&!v(s,"default"))o=!1;else if(""===o||o===S(t)){var l=Rt(String,s.type);(l<0||a<l)&&(o=!0)}if(void 0===o){o=function(t,e,i){if(v(e,"default")){var n=e.default;return t&&t.$options.propsData&&void 0===t.$options.propsData[i]&&void 0!==t._props[i]?t._props[i]:"function"==typeof n&&"Function"!==$t(e.type)?n.call(t):n}}(n,s,t);var c=yt;xt(!0),At(o),xt(c)}return o}function $t(t){var e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function Lt(t,e){return $t(t)===$t(e)}function Rt(t,e){if(!Array.isArray(e))return Lt(e,t)?0:-1;for(var i=0,n=e.length;i<n;i++)if(Lt(e[i],t))return i;return-1}function Ft(t,e,i){if(e)for(var n=e;n=n.$parent;){var s=n.$options.errorCaptured;if(s)for(var r=0;r<s.length;r++)try{if(!1===s[r].call(n,t,e,i))return}catch(t){Ot(t,n,"errorCaptured hook")}}Ot(t,e,i)}function Ot(t,e,i){if(F.errorHandler)try{return F.errorHandler.call(null,t,e,i)}catch(t){jt(t)}jt(t)}function jt(t,e,i){if(!q&&!z||"undefined"==typeof console)throw t;console.error(t)}var Gt,Nt,qt=[],zt=!1;function Ht(){zt=!1;for(var t=qt.slice(0),e=qt.length=0;e<t.length;e++)t[e]()}var Ut=!1;if(void 0!==i&&it(i))Nt=function(){i(Ht)};else if("undefined"==typeof MessageChannel||!it(MessageChannel)&&"[object MessageChannelConstructor]"!==MessageChannel.toString())Nt=function(){setTimeout(Ht,0)};else{var Wt=new MessageChannel,Jt=Wt.port2;Wt.port1.onmessage=Ht,Nt=function(){Jt.postMessage(1)}}if("undefined"!=typeof Promise&&it(Promise)){var Yt=Promise.resolve();Gt=function(){Yt.then(Ht),X&&setTimeout(k)}}else Gt=Nt;function Xt(t,e){var i;if(qt.push(function(){if(t)try{t.call(e)}catch(t){Ft(t,e,"nextTick")}else i&&i(e)}),zt||(zt=!0,Ut?Nt():Gt()),!t&&"undefined"!=typeof Promise)return new Promise(function(t){i=t})}var Qt=new nt;function Zt(t){!function t(e,i){var n,s,r=Array.isArray(e);if(!(!r&&!a(e)||Object.isFrozen(e)||e instanceof ht)){if(e.__ob__){var o=e.__ob__.dep.id;if(i.has(o))return;i.add(o)}if(r)for(n=e.length;n--;)t(e[n],i);else for(s=Object.keys(e),n=s.length;n--;)t(e[s[n]],i)}}(t,Qt),Qt.clear()}var Kt,te=y(function(t){var e="&"===t.charAt(0),i="~"===(t=e?t.slice(1):t).charAt(0),n="!"===(t=i?t.slice(1):t).charAt(0);return{name:t=n?t.slice(1):t,once:i,capture:n,passive:e}});function ee(t){function e(){var t=arguments,i=e.fns;if(!Array.isArray(i))return i.apply(null,arguments);for(var n=i.slice(),s=0;s<n.length;s++)n[s].apply(null,t)}return e.fns=t,e}function ie(t,e,i,s,r){var o,a,l,c;for(o in t)a=t[o],l=e[o],c=te(o),n(a)||(n(l)?(n(a.fns)&&(a=t[o]=ee(a)),i(c.name,a,c.once,c.capture,c.passive,c.params)):a!==l&&(l.fns=a,t[o]=l));for(o in e)n(t[o])&&s((c=te(o)).name,e[o],c.capture)}function ne(t,e,i){var o;t instanceof ht&&(t=t.data.hook||(t.data.hook={}));var a=t[e];function l(){i.apply(this,arguments),_(o.fns,l)}n(a)?o=ee([l]):s(a.fns)&&r(a.merged)?(o=a).fns.push(l):o=ee([a,l]),o.merged=!0,t[e]=o}function se(t,e,i,n,r){if(s(e)){if(v(e,i))return t[i]=e[i],r||delete e[i],!0;if(v(e,n))return t[i]=e[n],r||delete e[n],!0}return!1}function re(t){return o(t)?[pt(t)]:Array.isArray(t)?function t(e,i){var a,l,c,u,h=[];for(a=0;a<e.length;a++)n(l=e[a])||"boolean"==typeof l||(c=h.length-1,u=h[c],Array.isArray(l)?0<l.length&&(oe((l=t(l,(i||"")+"_"+a))[0])&&oe(u)&&(h[c]=pt(u.text+l[0].text),l.shift()),h.push.apply(h,l)):o(l)?oe(u)?h[c]=pt(u.text+l):""!==l&&h.push(pt(l)):oe(l)&&oe(u)?h[c]=pt(u.text+l.text):(r(e._isVList)&&s(l.tag)&&n(l.key)&&s(i)&&(l.key="__vlist"+i+"_"+a+"__"),h.push(l)));return h}(t):void 0}function oe(t){return s(t)&&s(t.text)&&!1===t.isComment}function ae(t,e){return(t.__esModule||st&&"Module"===t[Symbol.toStringTag])&&(t=t.default),a(t)?e.extend(t):t}function le(t){return t.isComment&&t.asyncFactory}function ce(t){if(Array.isArray(t))for(var e=0;e<t.length;e++){var i=t[e];if(s(i)&&(s(i.componentOptions)||le(i)))return i}}function ue(t,e,i){i?Kt.$once(t,e):Kt.$on(t,e)}function he(t,e){Kt.$off(t,e)}function de(t,e,i){Kt=t,ie(e,i||{},ue,he),Kt=void 0}function me(t,e){var i={};if(!t)return i;for(var n=0,s=t.length;n<s;n++){var r=t[n],o=r.data;if(o&&o.attrs&&o.attrs.slot&&delete o.attrs.slot,r.context!==e&&r.fnContext!==e||!o||null==o.slot)(i.default||(i.default=[])).push(r);else{var a=o.slot,l=i[a]||(i[a]=[]);"template"===r.tag?l.push.apply(l,r.children||[]):l.push(r)}}for(var c in i)i[c].every(pe)&&delete i[c];return i}function pe(t){return t.isComment&&!t.asyncFactory||" "===t.text}function fe(t,e){e=e||{};for(var i=0;i<t.length;i++)Array.isArray(t[i])?fe(t[i],e):e[t[i].key]=t[i].fn;return e}var _e=null;function ge(t){for(;t&&(t=t.$parent);)if(t._inactive)return!0;return!1}function ve(t,e){if(e){if(t._directInactive=!1,ge(t))return}else if(t._directInactive)return;if(t._inactive||null===t._inactive){t._inactive=!1;for(var i=0;i<t.$children.length;i++)ve(t.$children[i]);ye(t,"activated")}}function ye(t,e){ct();var i=t.$options[e];if(i)for(var n=0,s=i.length;n<s;n++)try{i[n].call(t)}catch(i){Ft(i,t,e+" hook")}t._hasHookEvent&&t.$emit("hook:"+e),ut()}var xe=[],be=[],Ae={},we=!1,Se=!1,Ce=0;function Be(){var t,e;for(Se=!0,xe.sort(function(t,e){return t.id-e.id}),Ce=0;Ce<xe.length;Ce++)e=(t=xe[Ce]).id,Ae[e]=null,t.run();var i=be.slice(),n=xe.slice();Ce=xe.length=be.length=0,Ae={},we=Se=!1,function(t){for(var e=0;e<t.length;e++)t[e]._inactive=!0,ve(t[e],!0)}(i),function(t){for(var e=t.length;e--;){var i=t[e],n=i.vm;n._watcher===i&&n._isMounted&&ye(n,"updated")}}(n),et&&F.devtools&&et.emit("flush")}var Ve=0,Me=function(t,e,i,n,s){this.vm=t,s&&(t._watcher=this),t._watchers.push(this),n?(this.deep=!!n.deep,this.user=!!n.user,this.lazy=!!n.lazy,this.sync=!!n.sync):this.deep=this.user=this.lazy=this.sync=!1,this.cb=i,this.id=++Ve,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new nt,this.newDepIds=new nt,this.expression="","function"==typeof e?this.getter=e:(this.getter=function(t){if(!G.test(t)){var e=t.split(".");return function(t){for(var i=0;i<e.length;i++){if(!t)return;t=t[e[i]]}return t}}}(e),this.getter||(this.getter=function(){})),this.value=this.lazy?void 0:this.get()};Me.prototype.get=function(){var t;ct(this);var e=this.vm;try{t=this.getter.call(e,e)}catch(t){if(!this.user)throw t;Ft(t,e,'getter for watcher "'+this.expression+'"')}finally{this.deep&&Zt(t),ut(),this.cleanupDeps()}return t},Me.prototype.addDep=function(t){var e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),this.depIds.has(e)||t.addSub(this))},Me.prototype.cleanupDeps=function(){for(var t=this.deps.length;t--;){var e=this.deps[t];this.newDepIds.has(e.id)||e.removeSub(this)}var i=this.depIds;this.depIds=this.newDepIds,this.newDepIds=i,this.newDepIds.clear(),i=this.deps,this.deps=this.newDeps,this.newDeps=i,this.newDeps.length=0},Me.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():function(t){var e=t.id;if(null==Ae[e]){if(Ae[e]=!0,Se){for(var i=xe.length-1;Ce<i&&xe[i].id>t.id;)i--;xe.splice(i+1,0,t)}else xe.push(t);we||(we=!0,Xt(Be))}}(this)},Me.prototype.run=function(){if(this.active){var t=this.get();if(t!==this.value||a(t)||this.deep){var e=this.value;if(this.value=t,this.user)try{this.cb.call(this.vm,t,e)}catch(t){Ft(t,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,t,e)}}},Me.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},Me.prototype.depend=function(){for(var t=this.deps.length;t--;)this.deps[t].depend()},Me.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||_(this.vm._watchers,this);for(var t=this.deps.length;t--;)this.deps[t].removeSub(this);this.active=!1}};var ke={enumerable:!0,configurable:!0,get:k,set:k};function Pe(t,e,i){ke.get=function(){return this[e][i]},ke.set=function(t){this[e][i]=t},Object.defineProperty(t,i,ke)}var Ie={lazy:!0};function De(t,e,i){var n=!tt();"function"==typeof i?(ke.get=n?Te(e):i,ke.set=k):(ke.get=i.get?n&&!1!==i.cache?Te(e):i.get:k,ke.set=i.set?i.set:k),Object.defineProperty(t,e,ke)}function Te(t){return function(){var e=this._computedWatchers&&this._computedWatchers[t];if(e)return e.dirty&&e.evaluate(),at.target&&e.depend(),e.value}}function Ee(t,e,i,n){return c(i)&&(i=(n=i).handler),"string"==typeof i&&(i=t[i]),t.$watch(e,i,n)}function $e(t,e){if(t){for(var i=Object.create(null),n=st?Reflect.ownKeys(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}):Object.keys(t),s=0;s<n.length;s++){for(var r=n[s],o=t[r].from,a=e;a;){if(a._provided&&v(a._provided,o)){i[r]=a._provided[o];break}a=a.$parent}if(!a&&"default"in t[r]){var l=t[r].default;i[r]="function"==typeof l?l.call(e):l}}return i}}function Le(t,e){var i,n,r,o,l;if(Array.isArray(t)||"string"==typeof t)for(i=new Array(t.length),n=0,r=t.length;n<r;n++)i[n]=e(t[n],n);else if("number"==typeof t)for(i=new Array(t),n=0;n<t;n++)i[n]=e(n+1,n);else if(a(t))for(o=Object.keys(t),i=new Array(o.length),n=0,r=o.length;n<r;n++)l=o[n],i[n]=e(t[l],l,n);return s(i)&&(i._isVList=!0),i}function Re(t,e,i,n){var s,r=this.$scopedSlots[t];if(r)i=i||{},n&&(i=V(V({},n),i)),s=r(i)||e;else{var o=this.$slots[t];o&&(o._rendered=!0),s=o||e}var a=i&&i.slot;return a?this.$createElement("template",{slot:a},s):s}function Fe(t){return Tt(this.$options,"filters",t)||I}function Oe(t,e){return Array.isArray(t)?-1===t.indexOf(e):t!==e}function je(t,e,i,n,s){var r=F.keyCodes[e]||i;return s&&n&&!F.keyCodes[e]?Oe(s,n):r?Oe(r,t):n?S(n)!==e:void 0}function Ge(t,e,i,n,s){if(i&&a(i)){var r;Array.isArray(i)&&(i=M(i));var o=function(o){if("class"===o||"style"===o||f(o))r=t;else{var a=t.attrs&&t.attrs.type;r=n||F.mustUseProp(e,a,o)?t.domProps||(t.domProps={}):t.attrs||(t.attrs={})}o in r||(r[o]=i[o],s&&((t.on||(t.on={}))["update:"+o]=function(t){i[o]=t}))};for(var l in i)o(l)}return t}function Ne(t,e){var i=this._staticTrees||(this._staticTrees=[]),n=i[t];return n&&!e||ze(n=i[t]=this.$options.staticRenderFns[t].call(this._renderProxy,null,this),"__static__"+t,!1),n}function qe(t,e,i){return ze(t,"__once__"+e+(i?"_"+i:""),!0),t}function ze(t,e,i){if(Array.isArray(t))for(var n=0;n<t.length;n++)t[n]&&"string"!=typeof t[n]&&He(t[n],e+"_"+n,i);else He(t,e,i)}function He(t,e,i){t.isStatic=!0,t.key=e,t.isOnce=i}function Ue(t,e){if(e&&c(e)){var i=t.on=t.on?V({},t.on):{};for(var n in e){var s=i[n],r=e[n];i[n]=s?[].concat(s,r):r}}return t}function We(t){t._o=qe,t._n=d,t._s=h,t._l=Le,t._t=Re,t._q=D,t._i=T,t._m=Ne,t._f=Fe,t._k=je,t._b=Ge,t._v=pt,t._e=mt,t._u=fe,t._g=Ue}function Je(e,i,n,s,o){var a,l=o.options;v(s,"_uid")?(a=Object.create(s))._original=s:s=(a=s)._original;var c=r(l._compiled),u=!c;this.data=e,this.props=i,this.children=n,this.parent=s,this.listeners=e.on||t,this.injections=$e(l.inject,s),this.slots=function(){return me(n,s)},c&&(this.$options=l,this.$slots=this.slots(),this.$scopedSlots=e.scopedSlots||t),l._scopeId?this._c=function(t,e,i,n){var r=ii(a,t,e,i,n,u);return r&&!Array.isArray(r)&&(r.fnScopeId=l._scopeId,r.fnContext=s),r}:this._c=function(t,e,i,n){return ii(a,t,e,i,n,u)}}function Ye(t,e,i,n){var s=ft(t);return s.fnContext=i,s.fnOptions=n,e.slot&&((s.data||(s.data={})).slot=e.slot),s}function Xe(t,e){for(var i in e)t[b(i)]=e[i]}We(Je.prototype);var Qe={init:function(t,e,i,n){if(t.componentInstance&&!t.componentInstance._isDestroyed&&t.data.keepAlive){var r=t;Qe.prepatch(r,r)}else(t.componentInstance=function(t,e,i,n){var r={_isComponent:!0,parent:e,_parentVnode:t,_parentElm:i||null,_refElm:n||null},o=t.data.inlineTemplate;return s(o)&&(r.render=o.render,r.staticRenderFns=o.staticRenderFns),new t.componentOptions.Ctor(r)}(t,_e,i,n)).$mount(e?t.elm:void 0,e)},prepatch:function(e,i){var n=i.componentOptions;!function(e,i,n,s,r){var o=!!(r||e.$options._renderChildren||s.data.scopedSlots||e.$scopedSlots!==t);if(e.$options._parentVnode=s,e.$vnode=s,e._vnode&&(e._vnode.parent=s),e.$options._renderChildren=r,e.$attrs=s.data.attrs||t,e.$listeners=n||t,i&&e.$options.props){xt(!1);for(var a=e._props,l=e.$options._propKeys||[],c=0;c<l.length;c++){var u=l[c],h=e.$options.props;a[u]=Et(u,h,i,e)}xt(!0),e.$options.propsData=i}n=n||t;var d=e.$options._parentListeners;e.$options._parentListeners=n,de(e,n,d),o&&(e.$slots=me(r,s.context),e.$forceUpdate())}(i.componentInstance=e.componentInstance,n.propsData,n.listeners,i,n.children)},insert:function(t){var e,i=t.context,n=t.componentInstance;n._isMounted||(n._isMounted=!0,ye(n,"mounted")),t.data.keepAlive&&(i._isMounted?((e=n)._inactive=!1,be.push(e)):ve(n,!0))},destroy:function(t){var e=t.componentInstance;e._isDestroyed||(t.data.keepAlive?function t(e,i){if(!(i&&(e._directInactive=!0,ge(e))||e._inactive)){e._inactive=!0;for(var n=0;n<e.$children.length;n++)t(e.$children[n]);ye(e,"deactivated")}}(e,!0):e.$destroy())}},Ze=Object.keys(Qe);function Ke(e,i,o,l,c){if(!n(e)){var u=o.$options._base;if(a(e)&&(e=u.extend(e)),"function"==typeof e){var h,d,m,p,f,_,g;if(n(e.cid)&&void 0===(e=function(t,e,i){if(r(t.error)&&s(t.errorComp))return t.errorComp;if(s(t.resolved))return t.resolved;if(r(t.loading)&&s(t.loadingComp))return t.loadingComp;if(!s(t.contexts)){var o=t.contexts=[i],l=!0,c=function(){for(var t=0,e=o.length;t<e;t++)o[t].$forceUpdate()},u=E(function(i){t.resolved=ae(i,e),l||c()}),h=E(function(e){s(t.errorComp)&&(t.error=!0,c())}),d=t(u,h);return a(d)&&("function"==typeof d.then?n(t.resolved)&&d.then(u,h):s(d.component)&&"function"==typeof d.component.then&&(d.component.then(u,h),s(d.error)&&(t.errorComp=ae(d.error,e)),s(d.loading)&&(t.loadingComp=ae(d.loading,e),0===d.delay?t.loading=!0:setTimeout(function(){n(t.resolved)&&n(t.error)&&(t.loading=!0,c())},d.delay||200)),s(d.timeout)&&setTimeout(function(){n(t.resolved)&&h(null)},d.timeout))),l=!1,t.loading?t.loadingComp:t.resolved}t.contexts.push(i)}(h=e,u,o)))return d=h,m=i,p=o,f=l,_=c,(g=mt()).asyncFactory=d,g.asyncMeta={data:m,context:p,children:f,tag:_},g;i=i||{},hi(e),s(i.model)&&function(t,e){var i=t.model&&t.model.prop||"value",n=t.model&&t.model.event||"input";(e.props||(e.props={}))[i]=e.model.value;var r=e.on||(e.on={});s(r[n])?r[n]=[e.model.callback].concat(r[n]):r[n]=e.model.callback}(e.options,i);var v=function(t,e,i){var r=e.options.props;if(!n(r)){var o={},a=t.attrs,l=t.props;if(s(a)||s(l))for(var c in r){var u=S(c);se(o,l,c,u,!0)||se(o,a,c,u,!1)}return o}}(i,e);if(r(e.options.functional))return function(e,i,n,r,o){var a=e.options,l={},c=a.props;if(s(c))for(var u in c)l[u]=Et(u,c,i||t);else s(n.attrs)&&Xe(l,n.attrs),s(n.props)&&Xe(l,n.props);var h=new Je(n,l,o,r,e),d=a.render.call(null,h._c,h);if(d instanceof ht)return Ye(d,n,h.parent,a);if(Array.isArray(d)){for(var m=re(d)||[],p=new Array(m.length),f=0;f<m.length;f++)p[f]=Ye(m[f],n,h.parent,a);return p}}(e,v,i,o,l);var y=i.on;if(i.on=i.nativeOn,r(e.options.abstract)){var x=i.slot;i={},x&&(i.slot=x)}!function(t){for(var e=t.hook||(t.hook={}),i=0;i<Ze.length;i++){var n=Ze[i];e[n]=Qe[n]}}(i);var b=e.options.name||c;return new ht("vue-component-"+e.cid+(b?"-"+b:""),i,void 0,void 0,void 0,o,{Ctor:e,propsData:v,listeners:y,tag:c,children:l},h)}}}var ti=1,ei=2;function ii(t,e,i,l,c,u){return(Array.isArray(i)||o(i))&&(c=l,l=i,i=void 0),r(u)&&(c=ei),function(t,e,i,o,l){return s(i)&&s(i.__ob__)?mt():(s(i)&&s(i.is)&&(e=i.is),e?(Array.isArray(o)&&"function"==typeof o[0]&&((i=i||{}).scopedSlots={default:o[0]},o.length=0),l===ei?o=re(o):l===ti&&(o=function(t){for(var e=0;e<t.length;e++)if(Array.isArray(t[e]))return Array.prototype.concat.apply([],t);return t}(o)),"string"==typeof e?(u=t.$vnode&&t.$vnode.ns||F.getTagNamespace(e),c=F.isReservedTag(e)?new ht(F.parsePlatformTagName(e),i,o,void 0,void 0,t):s(h=Tt(t.$options,"components",e))?Ke(h,i,t,o,e):new ht(e,i,o,void 0,void 0,t)):c=Ke(e,i,t,o),Array.isArray(c)?c:s(c)?(s(u)&&function t(e,i,o){if(e.ns=i,"foreignObject"===e.tag&&(i=void 0,o=!0),s(e.children))for(var a=0,l=e.children.length;a<l;a++){var c=e.children[a];s(c.tag)&&(n(c.ns)||r(o)&&"svg"!==c.tag)&&t(c,i,o)}}(c,u),s(i)&&function(t){a(t.style)&&Zt(t.style),a(t.class)&&Zt(t.class)}(i),c):mt()):mt());var c,u,h}(t,e,i,l,c)}var ni,si,ri,oi,ai,li,ci,ui=0;function hi(t){var e=t.options;if(t.super){var i=hi(t.super);if(i!==t.superOptions){t.superOptions=i;var n=function(t){var e,i=t.options,n=t.extendOptions,s=t.sealedOptions;for(var r in i)i[r]!==s[r]&&(e||(e={}),e[r]=di(i[r],n[r],s[r]));return e}(t);n&&V(t.extendOptions,n),(e=t.options=Dt(i,t.extendOptions)).name&&(e.components[e.name]=t)}}return e}function di(t,e,i){if(Array.isArray(t)){var n=[];i=Array.isArray(i)?i:[i],e=Array.isArray(e)?e:[e];for(var s=0;s<t.length;s++)(0<=e.indexOf(t[s])||i.indexOf(t[s])<0)&&n.push(t[s]);return n}return t}function mi(t){this._init(t)}function pi(t){return t&&(t.Ctor.options.name||t.tag)}function fi(t,e){return Array.isArray(t)?-1<t.indexOf(e):"string"==typeof t?-1<t.split(",").indexOf(e):(i=t,"[object RegExp]"===l.call(i)&&t.test(e));var i}function _i(t,e){var i=t.cache,n=t.keys,s=t._vnode;for(var r in i){var o=i[r];if(o){var a=pi(o.componentOptions);a&&!e(a)&&gi(i,r,n,s)}}}function gi(t,e,i,n){var s=t[e];!s||n&&s.tag===n.tag||s.componentInstance.$destroy(),t[e]=null,_(i,e)}mi.prototype._init=function(e){var i,n,s,r,o=this;o._uid=ui++,o._isVue=!0,e&&e._isComponent?function(t,e){var i=t.$options=Object.create(t.constructor.options),n=e._parentVnode;i.parent=e.parent,i._parentVnode=n,i._parentElm=e._parentElm,i._refElm=e._refElm;var s=n.componentOptions;i.propsData=s.propsData,i._parentListeners=s.listeners,i._renderChildren=s.children,i._componentTag=s.tag,e.render&&(i.render=e.render,i.staticRenderFns=e.staticRenderFns)}(o,e):o.$options=Dt(hi(o.constructor),e||{},o),function(t){var e=t.$options,i=e.parent;if(i&&!e.abstract){for(;i.$options.abstract&&i.$parent;)i=i.$parent;i.$children.push(t)}t.$parent=i,t.$root=i?i.$root:t,t.$children=[],t.$refs={},t._watcher=null,t._inactive=null,t._directInactive=!1,t._isMounted=!1,t._isDestroyed=!1,t._isBeingDestroyed=!1}((o._renderProxy=o)._self=o),function(t){t._events=Object.create(null),t._hasHookEvent=!1;var e=t.$options._parentListeners;e&&de(t,e)}(o),function(e){e._vnode=null,e._staticTrees=null;var i=e.$options,n=e.$vnode=i._parentVnode,s=n&&n.context;e.$slots=me(i._renderChildren,s),e.$scopedSlots=t,e._c=function(t,i,n,s){return ii(e,t,i,n,s,!1)},e.$createElement=function(t,i,n,s){return ii(e,t,i,n,s,!0)};var r=n&&n.data;wt(e,"$attrs",r&&r.attrs||t,null,!0),wt(e,"$listeners",i._parentListeners||t,null,!0)}(o),ye(o,"beforeCreate"),(n=$e((i=o).$options.inject,i))&&(xt(!1),Object.keys(n).forEach(function(t){wt(i,t,n[t])}),xt(!0)),function(t){t._watchers=[];var e=t.$options;e.props&&function(t,e){var i=t.$options.propsData||{},n=t._props={},s=t.$options._propKeys=[];t.$parent&&xt(!1);var r=function(r){s.push(r);var o=Et(r,e,i,t);wt(n,r,o),r in t||Pe(t,"_props",r)};for(var o in e)r(o);xt(!0)}(t,e.props),e.methods&&function(t,e){for(var i in t.$options.props,e)t[i]=null==e[i]?k:C(e[i],t)}(t,e.methods),e.data?function(t){var e=t.$options.data;c(e=t._data="function"==typeof e?function(t,e){ct();try{return t.call(e,e)}catch(t){return Ft(t,e,"data()"),{}}finally{ut()}}(e,t):e||{})||(e={});for(var i,n=Object.keys(e),s=t.$options.props,r=(t.$options.methods,n.length);r--;){var o=n[r];s&&v(s,o)||36!==(i=(o+"").charCodeAt(0))&&95!==i&&Pe(t,"_data",o)}At(e,!0)}(t):At(t._data={},!0),e.computed&&function(t,e){var i=t._computedWatchers=Object.create(null),n=tt();for(var s in e){var r=e[s],o="function"==typeof r?r:r.get;n||(i[s]=new Me(t,o||k,k,Ie)),s in t||De(t,s,r)}}(t,e.computed),e.watch&&e.watch!==Q&&function(t,e){for(var i in e){var n=e[i];if(Array.isArray(n))for(var s=0;s<n.length;s++)Ee(t,i,n[s]);else Ee(t,i,n)}}(t,e.watch)}(o),(r=(s=o).$options.provide)&&(s._provided="function"==typeof r?r.call(s):r),ye(o,"created"),o.$options.el&&o.$mount(o.$options.el)},ni=mi,si={get:function(){return this._data}},ri={get:function(){return this._props}},Object.defineProperty(ni.prototype,"$data",si),Object.defineProperty(ni.prototype,"$props",ri),ni.prototype.$set=St,ni.prototype.$delete=Ct,ni.prototype.$watch=function(t,e,i){if(c(e))return Ee(this,t,e,i);(i=i||{}).user=!0;var n=new Me(this,t,e,i);return i.immediate&&e.call(this,n.value),function(){n.teardown()}},ai=/^hook:/,(oi=mi).prototype.$on=function(t,e){if(Array.isArray(t))for(var i=0,n=t.length;i<n;i++)this.$on(t[i],e);else(this._events[t]||(this._events[t]=[])).push(e),ai.test(t)&&(this._hasHookEvent=!0);return this},oi.prototype.$once=function(t,e){var i=this;function n(){i.$off(t,n),e.apply(i,arguments)}return n.fn=e,i.$on(t,n),i},oi.prototype.$off=function(t,e){var i=this;if(!arguments.length)return i._events=Object.create(null),i;if(Array.isArray(t)){for(var n=0,s=t.length;n<s;n++)this.$off(t[n],e);return i}var r=i._events[t];if(!r)return i;if(!e)return i._events[t]=null,i;if(e)for(var o,a=r.length;a--;)if((o=r[a])===e||o.fn===e){r.splice(a,1);break}return i},oi.prototype.$emit=function(t){var e=this,i=e._events[t];if(i){i=1<i.length?B(i):i;for(var n=B(arguments,1),s=0,r=i.length;s<r;s++)try{i[s].apply(e,n)}catch(i){Ft(i,e,'event handler for "'+t+'"')}}return e},(li=mi).prototype._update=function(t,e){var i=this;i._isMounted&&ye(i,"beforeUpdate");var n=i.$el,s=i._vnode,r=_e;(_e=i)._vnode=t,s?i.$el=i.__patch__(s,t):(i.$el=i.__patch__(i.$el,t,e,!1,i.$options._parentElm,i.$options._refElm),i.$options._parentElm=i.$options._refElm=null),_e=r,n&&(n.__vue__=null),i.$el&&(i.$el.__vue__=i),i.$vnode&&i.$parent&&i.$vnode===i.$parent._vnode&&(i.$parent.$el=i.$el)},li.prototype.$forceUpdate=function(){this._watcher&&this._watcher.update()},li.prototype.$destroy=function(){var t=this;if(!t._isBeingDestroyed){ye(t,"beforeDestroy"),t._isBeingDestroyed=!0;var e=t.$parent;!e||e._isBeingDestroyed||t.$options.abstract||_(e.$children,t),t._watcher&&t._watcher.teardown();for(var i=t._watchers.length;i--;)t._watchers[i].teardown();t._data.__ob__&&t._data.__ob__.vmCount--,t._isDestroyed=!0,t.__patch__(t._vnode,null),ye(t,"destroyed"),t.$off(),t.$el&&(t.$el.__vue__=null),t.$vnode&&(t.$vnode.parent=null)}},We((ci=mi).prototype),ci.prototype.$nextTick=function(t){return Xt(t,this)},ci.prototype._render=function(){var e,i=this,n=i.$options,s=n.render,r=n._parentVnode;r&&(i.$scopedSlots=r.data.scopedSlots||t),i.$vnode=r;try{e=s.call(i._renderProxy,i.$createElement)}catch(n){Ft(n,i,"render"),e=i._vnode}return e instanceof ht||(e=mt()),e.parent=r,e};var vi,yi,xi,bi=[String,RegExp,Array],Ai={KeepAlive:{name:"keep-alive",abstract:!0,props:{include:bi,exclude:bi,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var t in this.cache)gi(this.cache,t,this.keys)},mounted:function(){var t=this;this.$watch("include",function(e){_i(t,function(t){return fi(e,t)})}),this.$watch("exclude",function(e){_i(t,function(t){return!fi(e,t)})})},render:function(){var t=this.$slots.default,e=ce(t),i=e&&e.componentOptions;if(i){var n=pi(i),s=this.include,r=this.exclude;if(s&&(!n||!fi(s,n))||r&&n&&fi(r,n))return e;var o=this.cache,a=this.keys,l=null==e.key?i.Ctor.cid+(i.tag?"::"+i.tag:""):e.key;o[l]?(e.componentInstance=o[l].componentInstance,_(a,l),a.push(l)):(o[l]=e,a.push(l),this.max&&a.length>parseInt(this.max)&&gi(o,a[0],a,this._vnode)),e.data.keepAlive=!0}return e||t&&t[0]}}};vi=mi,xi={get:function(){return F}},Object.defineProperty(vi,"config",xi),vi.util={warn:rt,extend:V,mergeOptions:Dt,defineReactive:wt},vi.set=St,vi.delete=Ct,vi.nextTick=Xt,vi.options=Object.create(null),L.forEach(function(t){vi.options[t+"s"]=Object.create(null)}),V((vi.options._base=vi).options.components,Ai),vi.use=function(t){var e=this._installedPlugins||(this._installedPlugins=[]);if(-1<e.indexOf(t))return this;var i=B(arguments,1);return i.unshift(this),"function"==typeof t.install?t.install.apply(t,i):"function"==typeof t&&t.apply(null,i),e.push(t),this},vi.mixin=function(t){return this.options=Dt(this.options,t),this},function(t){t.cid=0;var e=1;t.extend=function(t){t=t||{};var i=this,n=i.cid,s=t._Ctor||(t._Ctor={});if(s[n])return s[n];var r=t.name||i.options.name,o=function(t){this._init(t)};return((o.prototype=Object.create(i.prototype)).constructor=o).cid=e++,o.options=Dt(i.options,t),o.super=i,o.options.props&&function(t){var e=t.options.props;for(var i in e)Pe(t.prototype,"_props",i)}(o),o.options.computed&&function(t){var e=t.options.computed;for(var i in e)De(t.prototype,i,e[i])}(o),o.extend=i.extend,o.mixin=i.mixin,o.use=i.use,L.forEach(function(t){o[t]=i[t]}),r&&(o.options.components[r]=o),o.superOptions=i.options,o.extendOptions=t,o.sealedOptions=V({},o.options),s[n]=o}}(vi),yi=vi,L.forEach(function(t){yi[t]=function(e,i){return i?("component"===t&&c(i)&&(i.name=i.name||e,i=this.options._base.extend(i)),"directive"===t&&"function"==typeof i&&(i={bind:i,update:i}),this.options[t+"s"][e]=i):this.options[t+"s"][e]}}),Object.defineProperty(mi.prototype,"$isServer",{get:tt}),Object.defineProperty(mi.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(mi,"FunctionalRenderContext",{value:Je}),mi.version="2.5.17";var wi=m("style,class"),Si=m("input,textarea,option,select,progress"),Ci=function(t,e,i){return"value"===i&&Si(t)&&"button"!==e||"selected"===i&&"option"===t||"checked"===i&&"input"===t||"muted"===i&&"video"===t},Bi=m("contenteditable,draggable,spellcheck"),Vi=m("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),Mi="http://www.w3.org/1999/xlink",ki=function(t){return":"===t.charAt(5)&&"xlink"===t.slice(0,5)},Pi=function(t){return ki(t)?t.slice(6,t.length):""},Ii=function(t){return null==t||!1===t};function Di(t,e){return{staticClass:Ti(t.staticClass,e.staticClass),class:s(t.class)?[t.class,e.class]:e.class}}function Ti(t,e){return t?e?t+" "+e:t:e||""}function Ei(t){return Array.isArray(t)?function(t){for(var e,i="",n=0,r=t.length;n<r;n++)s(e=Ei(t[n]))&&""!==e&&(i&&(i+=" "),i+=e);return i}(t):a(t)?function(t){var e="";for(var i in t)t[i]&&(e&&(e+=" "),e+=i);return e}(t):"string"==typeof t?t:""}var $i={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},Li=m("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),Ri=m("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),Fi=function(t){return Li(t)||Ri(t)};function Oi(t){return Ri(t)?"svg":"math"===t?"math":void 0}var ji=Object.create(null),Gi=m("text,number,password,search,email,tel,url");function Ni(t){if("string"==typeof t){var e=document.querySelector(t);return e||document.createElement("div")}return t}var qi=Object.freeze({createElement:function(t,e){var i=document.createElement(t);return"select"!==t||e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&i.setAttribute("multiple","multiple"),i},createElementNS:function(t,e){return document.createElementNS($i[t],e)},createTextNode:function(t){return document.createTextNode(t)},createComment:function(t){return document.createComment(t)},insertBefore:function(t,e,i){t.insertBefore(e,i)},removeChild:function(t,e){t.removeChild(e)},appendChild:function(t,e){t.appendChild(e)},parentNode:function(t){return t.parentNode},nextSibling:function(t){return t.nextSibling},tagName:function(t){return t.tagName},setTextContent:function(t,e){t.textContent=e},setStyleScope:function(t,e){t.setAttribute(e,"")}}),zi={create:function(t,e){Hi(e)},update:function(t,e){t.data.ref!==e.data.ref&&(Hi(t,!0),Hi(e))},destroy:function(t){Hi(t,!0)}};function Hi(t,e){var i=t.data.ref;if(s(i)){var n=t.context,r=t.componentInstance||t.elm,o=n.$refs;e?Array.isArray(o[i])?_(o[i],r):o[i]===r&&(o[i]=void 0):t.data.refInFor?Array.isArray(o[i])?o[i].indexOf(r)<0&&o[i].push(r):o[i]=[r]:o[i]=r}}var Ui=new ht("",{},[]),Wi=["create","activate","update","remove","destroy"];function Ji(t,e){return t.key===e.key&&(t.tag===e.tag&&t.isComment===e.isComment&&s(t.data)===s(e.data)&&function(t,e){if("input"!==t.tag)return!0;var i,n=s(i=t.data)&&s(i=i.attrs)&&i.type,r=s(i=e.data)&&s(i=i.attrs)&&i.type;return n===r||Gi(n)&&Gi(r)}(t,e)||r(t.isAsyncPlaceholder)&&t.asyncFactory===e.asyncFactory&&n(e.asyncFactory.error))}function Yi(t,e,i){var n,r,o={};for(n=e;n<=i;++n)s(r=t[n].key)&&(o[r]=n);return o}var Xi={create:Qi,update:Qi,destroy:function(t){Qi(t,Ui)}};function Qi(t,e){(t.data.directives||e.data.directives)&&function(t,e){var i,n,s,r=t===Ui,o=e===Ui,a=Ki(t.data.directives,t.context),l=Ki(e.data.directives,e.context),c=[],u=[];for(i in l)n=a[i],s=l[i],n?(s.oldValue=n.value,tn(s,"update",e,t),s.def&&s.def.componentUpdated&&u.push(s)):(tn(s,"bind",e,t),s.def&&s.def.inserted&&c.push(s));if(c.length){var h=function(){for(var i=0;i<c.length;i++)tn(c[i],"inserted",e,t)};r?ne(e,"insert",h):h()}if(u.length&&ne(e,"postpatch",function(){for(var i=0;i<u.length;i++)tn(u[i],"componentUpdated",e,t)}),!r)for(i in a)l[i]||tn(a[i],"unbind",t,t,o)}(t,e)}var Zi=Object.create(null);function Ki(t,e){var i,n,s,r=Object.create(null);if(!t)return r;for(i=0;i<t.length;i++)(n=t[i]).modifiers||(n.modifiers=Zi),(r[(s=n,s.rawName||s.name+"."+Object.keys(s.modifiers||{}).join("."))]=n).def=Tt(e.$options,"directives",n.name);return r}function tn(t,e,i,n,s){var r=t.def&&t.def[e];if(r)try{r(i.elm,t,i,n,s)}catch(n){Ft(n,i.context,"directive "+t.name+" "+e+" hook")}}var en=[zi,Xi];function nn(t,e){var i=e.componentOptions;if(!(s(i)&&!1===i.Ctor.options.inheritAttrs||n(t.data.attrs)&&n(e.data.attrs))){var r,o,a=e.elm,l=t.data.attrs||{},c=e.data.attrs||{};for(r in s(c.__ob__)&&(c=e.data.attrs=V({},c)),c)o=c[r],l[r]!==o&&sn(a,r,o);for(r in(W||Y)&&c.value!==l.value&&sn(a,"value",c.value),l)n(c[r])&&(ki(r)?a.removeAttributeNS(Mi,Pi(r)):Bi(r)||a.removeAttribute(r))}}function sn(t,e,i){-1<t.tagName.indexOf("-")?rn(t,e,i):Vi(e)?Ii(i)?t.removeAttribute(e):(i="allowfullscreen"===e&&"EMBED"===t.tagName?"true":e,t.setAttribute(e,i)):Bi(e)?t.setAttribute(e,Ii(i)||"false"===i?"false":"true"):ki(e)?Ii(i)?t.removeAttributeNS(Mi,Pi(e)):t.setAttributeNS(Mi,e,i):rn(t,e,i)}function rn(t,e,i){if(Ii(i))t.removeAttribute(e);else{if(W&&!J&&"TEXTAREA"===t.tagName&&"placeholder"===e&&!t.__ieph){var n=function(e){e.stopImmediatePropagation(),t.removeEventListener("input",n)};t.addEventListener("input",n),t.__ieph=!0}t.setAttribute(e,i)}}var on={create:nn,update:nn};function an(t,e){var i=e.elm,r=e.data,o=t.data;if(!(n(r.staticClass)&&n(r.class)&&(n(o)||n(o.staticClass)&&n(o.class)))){var a=function(t){for(var e=t.data,i=t,n=t;s(n.componentInstance);)(n=n.componentInstance._vnode)&&n.data&&(e=Di(n.data,e));for(;s(i=i.parent);)i&&i.data&&(e=Di(e,i.data));return function(t,e){return s(t)||s(e)?Ti(t,Ei(e)):""}(e.staticClass,e.class)}(e),l=i._transitionClasses;s(l)&&(a=Ti(a,Ei(l))),a!==i._prevClass&&(i.setAttribute("class",a),i._prevClass=a)}}var ln,cn,un,hn,dn,mn,pn={create:an,update:an},fn=/[\w).+\-_$\]]/;function _n(t){var e,i,n,s,r,o=!1,a=!1,l=!1,c=!1,u=0,h=0,d=0,m=0;for(n=0;n<t.length;n++)if(i=e,e=t.charCodeAt(n),o)39===e&&92!==i&&(o=!1);else if(a)34===e&&92!==i&&(a=!1);else if(l)96===e&&92!==i&&(l=!1);else if(c)47===e&&92!==i&&(c=!1);else if(124!==e||124===t.charCodeAt(n+1)||124===t.charCodeAt(n-1)||u||h||d){switch(e){case 34:a=!0;break;case 39:o=!0;break;case 96:l=!0;break;case 40:d++;break;case 41:d--;break;case 91:h++;break;case 93:h--;break;case 123:u++;break;case 125:u--}if(47===e){for(var p=n-1,f=void 0;0<=p&&" "===(f=t.charAt(p));p--);f&&fn.test(f)||(c=!0)}}else void 0===s?(m=n+1,s=t.slice(0,n).trim()):_();function _(){(r||(r=[])).push(t.slice(m,n).trim()),m=n+1}if(void 0===s?s=t.slice(0,n).trim():0!==m&&_(),r)for(n=0;n<r.length;n++)s=gn(s,r[n]);return s}function gn(t,e){var i=e.indexOf("(");if(i<0)return'_f("'+e+'")('+t+")";var n=e.slice(0,i),s=e.slice(i+1);return'_f("'+n+'")('+t+(")"!==s?","+s:s)}function vn(t){console.error("[Vue compiler]: "+t)}function yn(t,e){return t?t.map(function(t){return t[e]}).filter(function(t){return t}):[]}function xn(t,e,i){(t.props||(t.props=[])).push({name:e,value:i}),t.plain=!1}function bn(t,e,i){(t.attrs||(t.attrs=[])).push({name:e,value:i}),t.plain=!1}function An(t,e,i){t.attrsMap[e]=i,t.attrsList.push({name:e,value:i})}function wn(e,i,n,s,r,o){var a;(s=s||t).capture&&(delete s.capture,i="!"+i),s.once&&(delete s.once,i="~"+i),s.passive&&(delete s.passive,i="&"+i),"click"===i&&(s.right?(i="contextmenu",delete s.right):s.middle&&(i="mouseup")),s.native?(delete s.native,a=e.nativeEvents||(e.nativeEvents={})):a=e.events||(e.events={});var l={value:n.trim()};s!==t&&(l.modifiers=s);var c=a[i];Array.isArray(c)?r?c.unshift(l):c.push(l):a[i]=c?r?[l,c]:[c,l]:l,e.plain=!1}function Sn(t,e,i){var n=Cn(t,":"+e)||Cn(t,"v-bind:"+e);if(null!=n)return _n(n);if(!1!==i){var s=Cn(t,e);if(null!=s)return JSON.stringify(s)}}function Cn(t,e,i){var n;if(null!=(n=t.attrsMap[e]))for(var s=t.attrsList,r=0,o=s.length;r<o;r++)if(s[r].name===e){s.splice(r,1);break}return i&&delete t.attrsMap[e],n}function Bn(t,e,i){var n=i||{},s=n.number,r="$$v";n.trim&&(r="(typeof $$v === 'string'? $$v.trim(): $$v)"),s&&(r="_n("+r+")");var o=Vn(e,r);t.model={value:"("+e+")",expression:'"'+e+'"',callback:"function ($$v) {"+o+"}"}}function Vn(t,e){var i=function(t){if(t=t.trim(),ln=t.length,t.indexOf("[")<0||t.lastIndexOf("]")<ln-1)return-1<(hn=t.lastIndexOf("."))?{exp:t.slice(0,hn),key:'"'+t.slice(hn+1)+'"'}:{exp:t,key:null};for(cn=t,hn=dn=mn=0;!kn();)Pn(un=Mn())?Dn(un):91===un&&In(un);return{exp:t.slice(0,dn),key:t.slice(dn+1,mn)}}(t);return null===i.key?t+"="+e:"$set("+i.exp+", "+i.key+", "+e+")"}function Mn(){return cn.charCodeAt(++hn)}function kn(){return ln<=hn}function Pn(t){return 34===t||39===t}function In(t){var e=1;for(dn=hn;!kn();)if(Pn(t=Mn()))Dn(t);else if(91===t&&e++,93===t&&e--,0===e){mn=hn;break}}function Dn(t){for(var e=t;!kn()&&(t=Mn())!==e;);}var Tn,En="__r",$n="__c";function Ln(t,e,i,n,s){var r,o,a,l,c;e=(r=e)._withTask||(r._withTask=function(){Ut=!0;var t=r.apply(null,arguments);return Ut=!1,t}),i&&(o=e,a=t,l=n,c=Tn,e=function t(){null!==o.apply(null,arguments)&&Rn(a,t,l,c)}),Tn.addEventListener(t,e,Z?{capture:n,passive:s}:n)}function Rn(t,e,i,n){(n||Tn).removeEventListener(t,e._withTask||e,i)}function Fn(t,e){if(!n(t.data.on)||!n(e.data.on)){var i=e.data.on||{},r=t.data.on||{};Tn=e.elm,function(t){if(s(t[En])){var e=W?"change":"input";t[e]=[].concat(t[En],t[e]||[]),delete t[En]}s(t[$n])&&(t.change=[].concat(t[$n],t.change||[]),delete t[$n])}(i),ie(i,r,Ln,Rn,e.context),Tn=void 0}}var On={create:Fn,update:Fn};function jn(t,e){if(!n(t.data.domProps)||!n(e.data.domProps)){var i,r,o,a,l=e.elm,c=t.data.domProps||{},u=e.data.domProps||{};for(i in s(u.__ob__)&&(u=e.data.domProps=V({},u)),c)n(u[i])&&(l[i]="");for(i in u){if(r=u[i],"textContent"===i||"innerHTML"===i){if(e.children&&(e.children.length=0),r===c[i])continue;1===l.childNodes.length&&l.removeChild(l.childNodes[0])}if("value"===i){var h=n(l._value=r)?"":String(r);a=h,(o=l).composing||"OPTION"!==o.tagName&&!function(t,e){var i=!0;try{i=document.activeElement!==t}catch(t){}return i&&t.value!==e}(o,a)&&!function(t,e){var i=t.value,n=t._vModifiers;if(s(n)){if(n.lazy)return!1;if(n.number)return d(i)!==d(e);if(n.trim)return i.trim()!==e.trim()}return i!==e}(o,a)||(l.value=h)}else l[i]=r}}}var Gn={create:jn,update:jn},Nn=y(function(t){var e={},i=/:(.+)/;return t.split(/;(?![^(]*\))/g).forEach(function(t){if(t){var n=t.split(i);1<n.length&&(e[n[0].trim()]=n[1].trim())}}),e});function qn(t){var e=zn(t.style);return t.staticStyle?V(t.staticStyle,e):e}function zn(t){return Array.isArray(t)?M(t):"string"==typeof t?Nn(t):t}var Hn,Un=/^--/,Wn=/\s*!important$/,Jn=function(t,e,i){if(Un.test(e))t.style.setProperty(e,i);else if(Wn.test(i))t.style.setProperty(e,i.replace(Wn,""),"important");else{var n=Xn(e);if(Array.isArray(i))for(var s=0,r=i.length;s<r;s++)t.style[n]=i[s];else t.style[n]=i}},Yn=["Webkit","Moz","ms"],Xn=y(function(t){if(Hn=Hn||document.createElement("div").style,"filter"!==(t=b(t))&&t in Hn)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),i=0;i<Yn.length;i++){var n=Yn[i]+e;if(n in Hn)return n}});function Qn(t,e){var i=e.data,r=t.data;if(!(n(i.staticStyle)&&n(i.style)&&n(r.staticStyle)&&n(r.style))){var o,a,l=e.elm,c=r.staticStyle,u=r.normalizedStyle||r.style||{},h=c||u,d=zn(e.data.style)||{};e.data.normalizedStyle=s(d.__ob__)?V({},d):d;var m=function(t,e){for(var i,n={},s=t;s.componentInstance;)(s=s.componentInstance._vnode)&&s.data&&(i=qn(s.data))&&V(n,i);(i=qn(t.data))&&V(n,i);for(var r=t;r=r.parent;)r.data&&(i=qn(r.data))&&V(n,i);return n}(e);for(a in h)n(m[a])&&Jn(l,a,"");for(a in m)(o=m[a])!==h[a]&&Jn(l,a,null==o?"":o)}}var Zn={create:Qn,update:Qn};function Kn(t,e){if(e&&(e=e.trim()))if(t.classList)-1<e.indexOf(" ")?e.split(/\s+/).forEach(function(e){return t.classList.add(e)}):t.classList.add(e);else{var i=" "+(t.getAttribute("class")||"")+" ";i.indexOf(" "+e+" ")<0&&t.setAttribute("class",(i+e).trim())}}function ts(t,e){if(e&&(e=e.trim()))if(t.classList)-1<e.indexOf(" ")?e.split(/\s+/).forEach(function(e){return t.classList.remove(e)}):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{for(var i=" "+(t.getAttribute("class")||"")+" ",n=" "+e+" ";0<=i.indexOf(n);)i=i.replace(n," ");(i=i.trim())?t.setAttribute("class",i):t.removeAttribute("class")}}function es(t){if(t){if("object"==typeof t){var e={};return!1!==t.css&&V(e,is(t.name||"v")),V(e,t),e}return"string"==typeof t?is(t):void 0}}var is=y(function(t){return{enterClass:t+"-enter",enterToClass:t+"-enter-to",enterActiveClass:t+"-enter-active",leaveClass:t+"-leave",leaveToClass:t+"-leave-to",leaveActiveClass:t+"-leave-active"}}),ns=q&&!J,ss="transition",rs="animation",os="transition",as="transitionend",ls="animation",cs="animationend";ns&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(os="WebkitTransition",as="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(ls="WebkitAnimation",cs="webkitAnimationEnd"));var us=q?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(t){return t()};function hs(t){us(function(){us(t)})}function ds(t,e){var i=t._transitionClasses||(t._transitionClasses=[]);i.indexOf(e)<0&&(i.push(e),Kn(t,e))}function ms(t,e){t._transitionClasses&&_(t._transitionClasses,e),ts(t,e)}function ps(t,e,i){var n=_s(t,e),s=n.type,r=n.timeout,o=n.propCount;if(!s)return i();var a=s===ss?as:cs,l=0,c=function(){t.removeEventListener(a,u),i()},u=function(e){e.target===t&&++l>=o&&c()};setTimeout(function(){l<o&&c()},r+1),t.addEventListener(a,u)}var fs=/\b(transform|all)(,|$)/;function _s(t,e){var i,n=window.getComputedStyle(t),s=n[os+"Delay"].split(", "),r=n[os+"Duration"].split(", "),o=gs(s,r),a=n[ls+"Delay"].split(", "),l=n[ls+"Duration"].split(", "),c=gs(a,l),u=0,h=0;return e===ss?0<o&&(i=ss,u=o,h=r.length):e===rs?0<c&&(i=rs,u=c,h=l.length):h=(i=0<(u=Math.max(o,c))?c<o?ss:rs:null)?i===ss?r.length:l.length:0,{type:i,timeout:u,propCount:h,hasTransform:i===ss&&fs.test(n[os+"Property"])}}function gs(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max.apply(null,e.map(function(e,i){return vs(e)+vs(t[i])}))}function vs(t){return 1e3*Number(t.slice(0,-1))}function ys(t,e){var i=t.elm;s(i._leaveCb)&&(i._leaveCb.cancelled=!0,i._leaveCb());var r=es(t.data.transition);if(!n(r)&&!s(i._enterCb)&&1===i.nodeType){for(var o=r.css,l=r.type,c=r.enterClass,u=r.enterToClass,h=r.enterActiveClass,m=r.appearClass,p=r.appearToClass,f=r.appearActiveClass,_=r.beforeEnter,g=r.enter,v=r.afterEnter,y=r.enterCancelled,x=r.beforeAppear,b=r.appear,A=r.afterAppear,w=r.appearCancelled,S=r.duration,C=_e,B=_e.$vnode;B&&B.parent;)C=(B=B.parent).context;var V=!C._isMounted||!t.isRootInsert;if(!V||b||""===b){var M=V&&m?m:c,k=V&&f?f:h,P=V&&p?p:u,I=V&&x||_,D=V&&"function"==typeof b?b:g,T=V&&A||v,$=V&&w||y,L=d(a(S)?S.enter:S),R=!1!==o&&!J,F=As(D),O=i._enterCb=E(function(){R&&(ms(i,P),ms(i,k)),O.cancelled?(R&&ms(i,M),$&&$(i)):T&&T(i),i._enterCb=null});t.data.show||ne(t,"insert",function(){var e=i.parentNode,n=e&&e._pending&&e._pending[t.key];n&&n.tag===t.tag&&n.elm._leaveCb&&n.elm._leaveCb(),D&&D(i,O)}),I&&I(i),R&&(ds(i,M),ds(i,k),hs(function(){ms(i,M),O.cancelled||(ds(i,P),F||(bs(L)?setTimeout(O,L):ps(i,l,O)))})),t.data.show&&(e&&e(),D&&D(i,O)),R||F||O()}}}function xs(t,e){var i=t.elm;s(i._enterCb)&&(i._enterCb.cancelled=!0,i._enterCb());var r=es(t.data.transition);if(n(r)||1!==i.nodeType)return e();if(!s(i._leaveCb)){var o=r.css,l=r.type,c=r.leaveClass,u=r.leaveToClass,h=r.leaveActiveClass,m=r.beforeLeave,p=r.leave,f=r.afterLeave,_=r.leaveCancelled,g=r.delayLeave,v=r.duration,y=!1!==o&&!J,x=As(p),b=d(a(v)?v.leave:v),A=i._leaveCb=E(function(){i.parentNode&&i.parentNode._pending&&(i.parentNode._pending[t.key]=null),y&&(ms(i,u),ms(i,h)),A.cancelled?(y&&ms(i,c),_&&_(i)):(e(),f&&f(i)),i._leaveCb=null});g?g(w):w()}function w(){A.cancelled||(t.data.show||((i.parentNode._pending||(i.parentNode._pending={}))[t.key]=t),m&&m(i),y&&(ds(i,c),ds(i,h),hs(function(){ms(i,c),A.cancelled||(ds(i,u),x||(bs(b)?setTimeout(A,b):ps(i,l,A)))})),p&&p(i,A),y||x||A())}}function bs(t){return"number"==typeof t&&!isNaN(t)}function As(t){if(n(t))return!1;var e=t.fns;return s(e)?As(Array.isArray(e)?e[0]:e):1<(t._length||t.length)}function ws(t,e){!0!==e.data.show&&ys(e)}var Ss=function(t){var e,i,a={},l=t.modules,c=t.nodeOps;for(e=0;e<Wi.length;++e)for(a[Wi[e]]=[],i=0;i<l.length;++i)s(l[i][Wi[e]])&&a[Wi[e]].push(l[i][Wi[e]]);function u(t){var e=c.parentNode(t);s(e)&&c.removeChild(e,t)}function h(t,e,i,n,o,l,u){if(s(t.elm)&&s(l)&&(t=l[u]=ft(t)),t.isRootInsert=!o,!function(t,e,i,n){var o=t.data;if(s(o)){var l=s(t.componentInstance)&&o.keepAlive;if(s(o=o.hook)&&s(o=o.init)&&o(t,!1,i,n),s(t.componentInstance))return d(t,e),r(l)&&function(t,e,i,n){for(var r,o=t;o.componentInstance;)if(o=o.componentInstance._vnode,s(r=o.data)&&s(r=r.transition)){for(r=0;r<a.activate.length;++r)a.activate[r](Ui,o);e.push(o);break}p(i,t.elm,n)}(t,e,i,n),!0}}(t,e,i,n)){var h=t.data,m=t.children,_=t.tag;s(_)?(t.elm=t.ns?c.createElementNS(t.ns,_):c.createElement(_,t),v(t),f(t,m,e),s(h)&&g(t,e)):r(t.isComment)?t.elm=c.createComment(t.text):t.elm=c.createTextNode(t.text),p(i,t.elm,n)}}function d(t,e){s(t.data.pendingInsert)&&(e.push.apply(e,t.data.pendingInsert),t.data.pendingInsert=null),t.elm=t.componentInstance.$el,_(t)?(g(t,e),v(t)):(Hi(t),e.push(t))}function p(t,e,i){s(t)&&(s(i)?i.parentNode===t&&c.insertBefore(t,e,i):c.appendChild(t,e))}function f(t,e,i){if(Array.isArray(e))for(var n=0;n<e.length;++n)h(e[n],i,t.elm,null,!0,e,n);else o(t.text)&&c.appendChild(t.elm,c.createTextNode(String(t.text)))}function _(t){for(;t.componentInstance;)t=t.componentInstance._vnode;return s(t.tag)}function g(t,i){for(var n=0;n<a.create.length;++n)a.create[n](Ui,t);s(e=t.data.hook)&&(s(e.create)&&e.create(Ui,t),s(e.insert)&&i.push(t))}function v(t){var e;if(s(e=t.fnScopeId))c.setStyleScope(t.elm,e);else for(var i=t;i;)s(e=i.context)&&s(e=e.$options._scopeId)&&c.setStyleScope(t.elm,e),i=i.parent;s(e=_e)&&e!==t.context&&e!==t.fnContext&&s(e=e.$options._scopeId)&&c.setStyleScope(t.elm,e)}function y(t,e,i,n,s,r){for(;n<=s;++n)h(i[n],r,t,e,!1,i,n)}function x(t){var e,i,n=t.data;if(s(n))for(s(e=n.hook)&&s(e=e.destroy)&&e(t),e=0;e<a.destroy.length;++e)a.destroy[e](t);if(s(e=t.children))for(i=0;i<t.children.length;++i)x(t.children[i])}function b(t,e,i,n){for(;i<=n;++i){var r=e[i];s(r)&&(s(r.tag)?(A(r),x(r)):u(r.elm))}}function A(t,e){if(s(e)||s(t.data)){var i,n=a.remove.length+1;for(s(e)?e.listeners+=n:e=function(t,e){function i(){0==--i.listeners&&u(t)}return i.listeners=e,i}(t.elm,n),s(i=t.componentInstance)&&s(i=i._vnode)&&s(i.data)&&A(i,e),i=0;i<a.remove.length;++i)a.remove[i](t,e);s(i=t.data.hook)&&s(i=i.remove)?i(t,e):e()}else u(t.elm)}function w(t,e,i,n){for(var r=i;r<n;r++){var o=e[r];if(s(o)&&Ji(t,o))return r}}function S(t,e,i,o){if(t!==e){var l=e.elm=t.elm;if(r(t.isAsyncPlaceholder))s(e.asyncFactory.resolved)?V(t.elm,e,i):e.isAsyncPlaceholder=!0;else if(r(e.isStatic)&&r(t.isStatic)&&e.key===t.key&&(r(e.isCloned)||r(e.isOnce)))e.componentInstance=t.componentInstance;else{var u,d=e.data;s(d)&&s(u=d.hook)&&s(u=u.prepatch)&&u(t,e);var m=t.children,p=e.children;if(s(d)&&_(e)){for(u=0;u<a.update.length;++u)a.update[u](t,e);s(u=d.hook)&&s(u=u.update)&&u(t,e)}n(e.text)?s(m)&&s(p)?m!==p&&function(t,e,i,r,o){for(var a,l,u,d=0,m=0,p=e.length-1,f=e[0],_=e[p],g=i.length-1,v=i[0],x=i[g],A=!o;d<=p&&m<=g;)n(f)?f=e[++d]:n(_)?_=e[--p]:Ji(f,v)?(S(f,v,r),f=e[++d],v=i[++m]):Ji(_,x)?(S(_,x,r),_=e[--p],x=i[--g]):Ji(f,x)?(S(f,x,r),A&&c.insertBefore(t,f.elm,c.nextSibling(_.elm)),f=e[++d],x=i[--g]):(Ji(_,v)?(S(_,v,r),A&&c.insertBefore(t,_.elm,f.elm),_=e[--p]):(n(a)&&(a=Yi(e,d,p)),n(l=s(v.key)?a[v.key]:w(v,e,d,p))?h(v,r,t,f.elm,!1,i,m):Ji(u=e[l],v)?(S(u,v,r),e[l]=void 0,A&&c.insertBefore(t,u.elm,f.elm)):h(v,r,t,f.elm,!1,i,m)),v=i[++m]);p<d?y(t,n(i[g+1])?null:i[g+1].elm,i,m,g,r):g<m&&b(0,e,d,p)}(l,m,p,i,o):s(p)?(s(t.text)&&c.setTextContent(l,""),y(l,null,p,0,p.length-1,i)):s(m)?b(0,m,0,m.length-1):s(t.text)&&c.setTextContent(l,""):t.text!==e.text&&c.setTextContent(l,e.text),s(d)&&s(u=d.hook)&&s(u=u.postpatch)&&u(t,e)}}}function C(t,e,i){if(r(i)&&s(t.parent))t.parent.data.pendingInsert=e;else for(var n=0;n<e.length;++n)e[n].data.hook.insert(e[n])}var B=m("attrs,class,staticClass,staticStyle,key");function V(t,e,i,n){var o,a=e.tag,l=e.data,c=e.children;if(n=n||l&&l.pre,e.elm=t,r(e.isComment)&&s(e.asyncFactory))return e.isAsyncPlaceholder=!0;if(s(l)&&(s(o=l.hook)&&s(o=o.init)&&o(e,!0),s(o=e.componentInstance)))return d(e,i),!0;if(s(a)){if(s(c))if(t.hasChildNodes())if(s(o=l)&&s(o=o.domProps)&&s(o=o.innerHTML)){if(o!==t.innerHTML)return!1}else{for(var u=!0,h=t.firstChild,m=0;m<c.length;m++){if(!h||!V(h,c[m],i,n)){u=!1;break}h=h.nextSibling}if(!u||h)return!1}else f(e,c,i);if(s(l)){var p=!1;for(var _ in l)if(!B(_)){p=!0,g(e,i);break}!p&&l.class&&Zt(l.class)}}else t.data!==e.text&&(t.data=e.text);return!0}return function(t,e,i,o,l,u){if(!n(e)){var d,m=!1,p=[];if(n(t))m=!0,h(e,p,l,u);else{var f=s(t.nodeType);if(!f&&Ji(t,e))S(t,e,p,o);else{if(f){if(1===t.nodeType&&t.hasAttribute($)&&(t.removeAttribute($),i=!0),r(i)&&V(t,e,p))return C(e,p,!0),t;d=t,t=new ht(c.tagName(d).toLowerCase(),{},[],void 0,d)}var g=t.elm,v=c.parentNode(g);if(h(e,p,g._leaveCb?null:v,c.nextSibling(g)),s(e.parent))for(var y=e.parent,A=_(e);y;){for(var w=0;w<a.destroy.length;++w)a.destroy[w](y);if(y.elm=e.elm,A){for(var B=0;B<a.create.length;++B)a.create[B](Ui,y);var M=y.data.hook.insert;if(M.merged)for(var k=1;k<M.fns.length;k++)M.fns[k]()}else Hi(y);y=y.parent}s(v)?b(0,[t],0,0):s(t.tag)&&x(t)}}return C(e,p,m),e.elm}s(t)&&x(t)}}({nodeOps:qi,modules:[on,pn,On,Gn,Zn,q?{create:ws,activate:ws,remove:function(t,e){!0!==t.data.show?xs(t,e):e()}}:{}].concat(en)});J&&document.addEventListener("selectionchange",function(){var t=document.activeElement;t&&t.vmodel&&Ds(t,"input")});var Cs={inserted:function(t,e,i,n){"select"===i.tag?(n.elm&&!n.elm._vOptions?ne(i,"postpatch",function(){Cs.componentUpdated(t,e,i)}):Bs(t,e,i.context),t._vOptions=[].map.call(t.options,ks)):("textarea"===i.tag||Gi(t.type))&&(t._vModifiers=e.modifiers,e.modifiers.lazy||(t.addEventListener("compositionstart",Ps),t.addEventListener("compositionend",Is),t.addEventListener("change",Is),J&&(t.vmodel=!0)))},componentUpdated:function(t,e,i){if("select"===i.tag){Bs(t,e,i.context);var n=t._vOptions,s=t._vOptions=[].map.call(t.options,ks);s.some(function(t,e){return!D(t,n[e])})&&(t.multiple?e.value.some(function(t){return Ms(t,s)}):e.value!==e.oldValue&&Ms(e.value,s))&&Ds(t,"change")}}};function Bs(t,e,i){Vs(t,e),(W||Y)&&setTimeout(function(){Vs(t,e)},0)}function Vs(t,e,i){var n=e.value,s=t.multiple;if(!s||Array.isArray(n)){for(var r,o,a=0,l=t.options.length;a<l;a++)if(o=t.options[a],s)r=-1<T(n,ks(o)),o.selected!==r&&(o.selected=r);else if(D(ks(o),n))return void(t.selectedIndex!==a&&(t.selectedIndex=a));s||(t.selectedIndex=-1)}}function Ms(t,e){return e.every(function(e){return!D(e,t)})}function ks(t){return"_value"in t?t._value:t.value}function Ps(t){t.target.composing=!0}function Is(t){t.target.composing&&(t.target.composing=!1,Ds(t.target,"input"))}function Ds(t,e){var i=document.createEvent("HTMLEvents");i.initEvent(e,!0,!0),t.dispatchEvent(i)}function Ts(t){return!t.componentInstance||t.data&&t.data.transition?t:Ts(t.componentInstance._vnode)}var Es={model:Cs,show:{bind:function(t,e,i){var n=e.value,s=(i=Ts(i)).data&&i.data.transition,r=t.__vOriginalDisplay="none"===t.style.display?"":t.style.display;n&&s?(i.data.show=!0,ys(i,function(){t.style.display=r})):t.style.display=n?r:"none"},update:function(t,e,i){var n=e.value;!n!=!e.oldValue&&((i=Ts(i)).data&&i.data.transition?(i.data.show=!0,n?ys(i,function(){t.style.display=t.__vOriginalDisplay}):xs(i,function(){t.style.display="none"})):t.style.display=n?t.__vOriginalDisplay:"none")},unbind:function(t,e,i,n,s){s||(t.style.display=t.__vOriginalDisplay)}}},$s={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function Ls(t){var e=t&&t.componentOptions;return e&&e.Ctor.options.abstract?Ls(ce(e.children)):t}function Rs(t){var e={},i=t.$options;for(var n in i.propsData)e[n]=t[n];var s=i._parentListeners;for(var r in s)e[b(r)]=s[r];return e}function Fs(t,e){if(/\d-keep-alive$/.test(e.tag))return t("keep-alive",{props:e.componentOptions.propsData})}var Os={name:"transition",props:$s,abstract:!0,render:function(t){var e=this,i=this.$slots.default;if(i&&(i=i.filter(function(t){return t.tag||le(t)})).length){var n=this.mode,s=i[0];if(function(t){for(;t=t.parent;)if(t.data.transition)return!0}(this.$vnode))return s;var r=Ls(s);if(!r)return s;if(this._leaving)return Fs(t,s);var a="__transition-"+this._uid+"-";r.key=null==r.key?r.isComment?a+"comment":a+r.tag:o(r.key)?0===String(r.key).indexOf(a)?r.key:a+r.key:r.key;var l,c,u=(r.data||(r.data={})).transition=Rs(this),h=this._vnode,d=Ls(h);if(r.data.directives&&r.data.directives.some(function(t){return"show"===t.name})&&(r.data.show=!0),d&&d.data&&(l=r,(c=d).key!==l.key||c.tag!==l.tag)&&!le(d)&&(!d.componentInstance||!d.componentInstance._vnode.isComment)){var m=d.data.transition=V({},u);if("out-in"===n)return this._leaving=!0,ne(m,"afterLeave",function(){e._leaving=!1,e.$forceUpdate()}),Fs(t,s);if("in-out"===n){if(le(r))return h;var p,f=function(){p()};ne(u,"afterEnter",f),ne(u,"enterCancelled",f),ne(m,"delayLeave",function(t){p=t})}}return s}}},js=V({tag:String,moveClass:String},$s);function Gs(t){t.elm._moveCb&&t.elm._moveCb(),t.elm._enterCb&&t.elm._enterCb()}function Ns(t){t.data.newPos=t.elm.getBoundingClientRect()}function qs(t){var e=t.data.pos,i=t.data.newPos,n=e.left-i.left,s=e.top-i.top;if(n||s){t.data.moved=!0;var r=t.elm.style;r.transform=r.WebkitTransform="translate("+n+"px,"+s+"px)",r.transitionDuration="0s"}}delete js.mode;var zs={Transition:Os,TransitionGroup:{props:js,render:function(t){for(var e=this.tag||this.$vnode.data.tag||"span",i=Object.create(null),n=this.prevChildren=this.children,s=this.$slots.default||[],r=this.children=[],o=Rs(this),a=0;a<s.length;a++){var l=s[a];l.tag&&null!=l.key&&0!==String(l.key).indexOf("__vlist")&&(r.push(l),((i[l.key]=l).data||(l.data={})).transition=o)}if(n){for(var c=[],u=[],h=0;h<n.length;h++){var d=n[h];d.data.transition=o,d.data.pos=d.elm.getBoundingClientRect(),i[d.key]?c.push(d):u.push(d)}this.kept=t(e,null,c),this.removed=u}return t(e,null,r)},beforeUpdate:function(){this.__patch__(this._vnode,this.kept,!1,!0),this._vnode=this.kept},updated:function(){var t=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";t.length&&this.hasMove(t[0].elm,e)&&(t.forEach(Gs),t.forEach(Ns),t.forEach(qs),this._reflow=document.body.offsetHeight,t.forEach(function(t){if(t.data.moved){var i=t.elm,n=i.style;ds(i,e),n.transform=n.WebkitTransform=n.transitionDuration="",i.addEventListener(as,i._moveCb=function t(n){n&&!/transform$/.test(n.propertyName)||(i.removeEventListener(as,t),i._moveCb=null,ms(i,e))})}}))},methods:{hasMove:function(t,e){if(!ns)return!1;if(this._hasMove)return this._hasMove;var i=t.cloneNode();t._transitionClasses&&t._transitionClasses.forEach(function(t){ts(i,t)}),Kn(i,e),i.style.display="none",this.$el.appendChild(i);var n=_s(i);return this.$el.removeChild(i),this._hasMove=n.hasTransform}}}};mi.config.mustUseProp=Ci,mi.config.isReservedTag=Fi,mi.config.isReservedAttr=wi,mi.config.getTagNamespace=Oi,mi.config.isUnknownElement=function(t){if(!q)return!0;if(Fi(t))return!1;if(t=t.toLowerCase(),null!=ji[t])return ji[t];var e=document.createElement(t);return-1<t.indexOf("-")?ji[t]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:ji[t]=/HTMLUnknownElement/.test(e.toString())},V(mi.options.directives,Es),V(mi.options.components,zs),mi.prototype.__patch__=q?Ss:k,mi.prototype.$mount=function(t,e){return t=t&&q?Ni(t):void 0,n=t,s=e,(i=this).$el=n,i.$options.render||(i.$options.render=mt),ye(i,"beforeMount"),new Me(i,function(){i._update(i._render(),s)},k,null,!0),s=!1,null==i.$vnode&&(i._isMounted=!0,ye(i,"mounted")),i;var i,n,s},q&&setTimeout(function(){F.devtools&&et&&et.emit("init",mi)},0);var Hs,Us=/\{\{((?:.|\n)+?)\}\}/g,Ws=/[-.*+?^${}()|[\]\/\\]/g,Js=y(function(t){var e=t[0].replace(Ws,"\\$&"),i=t[1].replace(Ws,"\\$&");return new RegExp(e+"((?:.|\\n)+?)"+i,"g")}),Ys={staticKeys:["staticClass"],transformNode:function(t,e){e.warn;var i=Cn(t,"class");i&&(t.staticClass=JSON.stringify(i));var n=Sn(t,"class",!1);n&&(t.classBinding=n)},genData:function(t){var e="";return t.staticClass&&(e+="staticClass:"+t.staticClass+","),t.classBinding&&(e+="class:"+t.classBinding+","),e}},Xs={staticKeys:["staticStyle"],transformNode:function(t,e){e.warn;var i=Cn(t,"style");i&&(t.staticStyle=JSON.stringify(Nn(i)));var n=Sn(t,"style",!1);n&&(t.styleBinding=n)},genData:function(t){var e="";return t.staticStyle&&(e+="staticStyle:"+t.staticStyle+","),t.styleBinding&&(e+="style:("+t.styleBinding+"),"),e}},Qs=m("area,base,br,col,embed,frame,hr,img,input,isindex,keygen,link,meta,param,source,track,wbr"),Zs=m("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr,source"),Ks=m("address,article,aside,base,blockquote,body,caption,col,colgroup,dd,details,dialog,div,dl,dt,fieldset,figcaption,figure,footer,form,h1,h2,h3,h4,h5,h6,head,header,hgroup,hr,html,legend,li,menuitem,meta,optgroup,option,param,rp,rt,source,style,summary,tbody,td,tfoot,th,thead,title,tr,track"),tr=/^\s*([^\s"'<>\/=]+)(?:\s*(=)\s*(?:"([^"]*)"+|'([^']*)'+|([^\s"'=<>`]+)))?/,er="[a-zA-Z_][\\w\\-\\.]*",ir="((?:"+er+"\\:)?"+er+")",nr=new RegExp("^<"+ir),sr=/^\s*(\/?)>/,rr=new RegExp("^<\\/"+ir+"[^>]*>"),or=/^<!DOCTYPE [^>]+>/i,ar=/^<!\--/,lr=/^<!\[/,cr=!1;"x".replace(/x(.)?/g,function(t,e){cr=""===e});var ur,hr,dr,mr,pr,fr,_r,gr,vr=m("script,style,textarea",!0),yr={},xr={"&lt;":"<","&gt;":">","&quot;":'"',"&amp;":"&","&#10;":"\n","&#9;":"\t"},br=/&(?:lt|gt|quot|amp);/g,Ar=/&(?:lt|gt|quot|amp|#10|#9);/g,wr=m("pre,textarea",!0),Sr=function(t,e){return t&&wr(t)&&"\n"===e[0]},Cr=/^@|^v-on:/,Br=/^v-|^@|^:/,Vr=/([^]*?)\s+(?:in|of)\s+([^]*)/,Mr=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,kr=/^\(|\)$/g,Pr=/:(.*)$/,Ir=/^:|^v-bind:/,Dr=/\.[^.]+/g,Tr=y(function(t){return(Hs=Hs||document.createElement("div")).innerHTML=t,Hs.textContent});function Er(t,e,i){return{type:1,tag:t,attrsList:e,attrsMap:function(t){for(var e={},i=0,n=t.length;i<n;i++)e[t[i].name]=t[i].value;return e}(e),parent:i,children:[]}}function $r(t,e){var i,n,s,r;(n=Sn(i=t,"key"))&&(i.key=n),t.plain=!t.key&&!t.attrsList.length,(r=Sn(s=t,"ref"))&&(s.ref=r,s.refInFor=function(t){for(var e=t;e;){if(void 0!==e.for)return!0;e=e.parent}return!1}(s)),function(t){if("slot"===t.tag)t.slotName=Sn(t,"name");else{var e;"template"===t.tag?(e=Cn(t,"scope"),t.slotScope=e||Cn(t,"slot-scope")):(e=Cn(t,"slot-scope"))&&(t.slotScope=e);var i=Sn(t,"slot");i&&(t.slotTarget='""'===i?'"default"':i,"template"===t.tag||t.slotScope||bn(t,"slot",i))}}(t),function(t){var e;(e=Sn(t,"is"))&&(t.component=e),null!=Cn(t,"inline-template")&&(t.inlineTemplate=!0)}(t);for(var o=0;o<dr.length;o++)t=dr[o](t,e)||t;!function(t){var e,i,n,s,r,o,a,l,c,u,h,d,m,p=t.attrsList;for(e=0,i=p.length;e<i;e++)if(n=s=p[e].name,r=p[e].value,Br.test(n))if(t.hasBindings=!0,(o=Fr(n))&&(n=n.replace(Dr,"")),Ir.test(n))n=n.replace(Ir,""),r=_n(r),a=!1,o&&(o.prop&&(a=!0,"innerHtml"===(n=b(n))&&(n="innerHTML")),o.camel&&(n=b(n)),o.sync&&wn(t,"update:"+b(n),Vn(r,"$event"))),a||!t.component&&_r(t.tag,t.attrsMap.type,n)?xn(t,n,r):bn(t,n,r);else if(Cr.test(n))n=n.replace(Cr,""),wn(t,n,r,o,!1);else{var f=(n=n.replace(Br,"")).match(Pr),_=f&&f[1];_&&(n=n.slice(0,-(_.length+1))),c=n,u=s,h=r,d=_,m=o,((l=t).directives||(l.directives=[])).push({name:c,rawName:u,value:h,arg:d,modifiers:m}),l.plain=!1}else bn(t,n,JSON.stringify(r)),!t.component&&"muted"===n&&_r(t.tag,t.attrsMap.type,n)&&xn(t,n,"true")}(t)}function Lr(t){var e;if(e=Cn(t,"v-for")){var i=function(t){var e=t.match(Vr);if(e){var i={};i.for=e[2].trim();var n=e[1].trim().replace(kr,""),s=n.match(Mr);return s?(i.alias=n.replace(Mr,""),i.iterator1=s[1].trim(),s[2]&&(i.iterator2=s[2].trim())):i.alias=n,i}}(e);i&&V(t,i)}}function Rr(t,e){t.ifConditions||(t.ifConditions=[]),t.ifConditions.push(e)}function Fr(t){var e=t.match(Dr);if(e){var i={};return e.forEach(function(t){i[t.slice(1)]=!0}),i}}var Or=/^xmlns:NS\d+/,jr=/^NS\d+:/;function Gr(t){return Er(t.tag,t.attrsList.slice(),t.parent)}var Nr,qr,zr,Hr=[Ys,Xs,{preTransformNode:function(t,e){if("input"===t.tag){var i,n=t.attrsMap;if(!n["v-model"])return;if((n[":type"]||n["v-bind:type"])&&(i=Sn(t,"type")),n.type||i||!n["v-bind"]||(i="("+n["v-bind"]+").type"),i){var s=Cn(t,"v-if",!0),r=s?"&&("+s+")":"",o=null!=Cn(t,"v-else",!0),a=Cn(t,"v-else-if",!0),l=Gr(t);Lr(l),An(l,"type","checkbox"),$r(l,e),l.processed=!0,l.if="("+i+")==='checkbox'"+r,Rr(l,{exp:l.if,block:l});var c=Gr(t);Cn(c,"v-for",!0),An(c,"type","radio"),$r(c,e),Rr(l,{exp:"("+i+")==='radio'"+r,block:c});var u=Gr(t);return Cn(u,"v-for",!0),An(u,":type",i),$r(u,e),Rr(l,{exp:s,block:u}),o?l.else=!0:a&&(l.elseif=a),l}}}}],Ur={expectHTML:!0,modules:Hr,directives:{model:function(t,e,i){var n,s,r,o,a,l,c,u,h,d,m,p,f,_,g,v,y=e.value,x=e.modifiers,b=t.tag,A=t.attrsMap.type;if(t.component)return Bn(t,y,x),!1;if("select"===b)f=t,_=y,v=(v='var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = "_value" in o ? o._value : o.value;return '+((g=x)&&g.number?"_n(val)":"val")+"});")+" "+Vn(_,"$event.target.multiple ? $$selectedVal : $$selectedVal[0]"),wn(f,"change",v,null,!0);else if("input"===b&&"checkbox"===A)l=t,c=y,h=(u=x)&&u.number,d=Sn(l,"value")||"null",m=Sn(l,"true-value")||"true",p=Sn(l,"false-value")||"false",xn(l,"checked","Array.isArray("+c+")?_i("+c+","+d+")>-1"+("true"===m?":("+c+")":":_q("+c+","+m+")")),wn(l,"change","var $$a="+c+",$$el=$event.target,$$c=$$el.checked?("+m+"):("+p+");if(Array.isArray($$a)){var $$v="+(h?"_n("+d+")":d)+",$$i=_i($$a,$$v);if($$el.checked){$$i<0&&("+Vn(c,"$$a.concat([$$v])")+")}else{$$i>-1&&("+Vn(c,"$$a.slice(0,$$i).concat($$a.slice($$i+1))")+")}}else{"+Vn(c,"$$c")+"}",null,!0);else if("input"===b&&"radio"===A)n=t,s=y,o=(r=x)&&r.number,a=Sn(n,"value")||"null",xn(n,"checked","_q("+s+","+(a=o?"_n("+a+")":a)+")"),wn(n,"change",Vn(s,a),null,!0);else if("input"===b||"textarea"===b)!function(t,e,i){var n=t.attrsMap.type,s=i||{},r=s.lazy,o=s.number,a=s.trim,l=!r&&"range"!==n,c=r?"change":"range"===n?En:"input",u="$event.target.value";a&&(u="$event.target.value.trim()"),o&&(u="_n("+u+")");var h=Vn(e,u);l&&(h="if($event.target.composing)return;"+h),xn(t,"value","("+e+")"),wn(t,c,h,null,!0),(a||o)&&wn(t,"blur","$forceUpdate()")}(t,y,x);else if(!F.isReservedTag(b))return Bn(t,y,x),!1;return!0},text:function(t,e){e.value&&xn(t,"textContent","_s("+e.value+")")},html:function(t,e){e.value&&xn(t,"innerHTML","_s("+e.value+")")}},isPreTag:function(t){return"pre"===t},isUnaryTag:Qs,mustUseProp:Ci,canBeLeftOpenTag:Zs,isReservedTag:Fi,getTagNamespace:Oi,staticKeys:(Nr=Hr,Nr.reduce(function(t,e){return t.concat(e.staticKeys||[])},[]).join(","))},Wr=y(function(t){return m("type,tag,attrsList,attrsMap,plain,parent,children,attrs"+(t?","+t:""))}),Jr=/^([\w$_]+|\([^)]*?\))\s*=>|^function\s*\(/,Yr=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['[^']*?']|\["[^"]*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*$/,Xr={esc:27,tab:9,enter:13,space:32,up:38,left:37,right:39,down:40,delete:[8,46]},Qr={esc:"Escape",tab:"Tab",enter:"Enter",space:" ",up:["Up","ArrowUp"],left:["Left","ArrowLeft"],right:["Right","ArrowRight"],down:["Down","ArrowDown"],delete:["Backspace","Delete"]},Zr=function(t){return"if("+t+")return null;"},Kr={stop:"$event.stopPropagation();",prevent:"$event.preventDefault();",self:Zr("$event.target !== $event.currentTarget"),ctrl:Zr("!$event.ctrlKey"),shift:Zr("!$event.shiftKey"),alt:Zr("!$event.altKey"),meta:Zr("!$event.metaKey"),left:Zr("'button' in $event && $event.button !== 0"),middle:Zr("'button' in $event && $event.button !== 1"),right:Zr("'button' in $event && $event.button !== 2")};function to(t,e,i){var n=e?"nativeOn:{":"on:{";for(var s in t)n+='"'+s+'":'+eo(s,t[s])+",";return n.slice(0,-1)+"}"}function eo(t,e){if(!e)return"function(){}";if(Array.isArray(e))return"["+e.map(function(e){return eo(t,e)}).join(",")+"]";var i=Yr.test(e.value),n=Jr.test(e.value);if(e.modifiers){var s="",r="",o=[];for(var a in e.modifiers)if(Kr[a])r+=Kr[a],Xr[a]&&o.push(a);else if("exact"===a){var l=e.modifiers;r+=Zr(["ctrl","shift","alt","meta"].filter(function(t){return!l[t]}).map(function(t){return"$event."+t+"Key"}).join("||"))}else o.push(a);return o.length&&(s+="if(!('button' in $event)&&"+o.map(io).join("&&")+")return null;"),r&&(s+=r),"function($event){"+s+(i?"return "+e.value+"($event)":n?"return ("+e.value+")($event)":e.value)+"}"}return i||n?e.value:"function($event){"+e.value+"}"}function io(t){var e=parseInt(t,10);if(e)return"$event.keyCode!=="+e;var i=Xr[t],n=Qr[t];return"_k($event.keyCode,"+JSON.stringify(t)+","+JSON.stringify(i)+",$event.key,"+JSON.stringify(n)+")"}var no={on:function(t,e){t.wrapListeners=function(t){return"_g("+t+","+e.value+")"}},bind:function(t,e){t.wrapData=function(i){return"_b("+i+",'"+t.tag+"',"+e.value+","+(e.modifiers&&e.modifiers.prop?"true":"false")+(e.modifiers&&e.modifiers.sync?",true":"")+")"}},cloak:k},so=function(t){this.options=t,this.warn=t.warn||vn,this.transforms=yn(t.modules,"transformCode"),this.dataGenFns=yn(t.modules,"genData"),this.directives=V(V({},no),t.directives);var e=t.isReservedTag||P;this.maybeComponent=function(t){return!e(t.tag)},this.onceId=0,this.staticRenderFns=[]};function ro(t,e){var i=new so(e);return{render:"with(this){return "+(t?oo(t,i):'_c("div")')+"}",staticRenderFns:i.staticRenderFns}}function oo(t,e){if(t.staticRoot&&!t.staticProcessed)return ao(t,e);if(t.once&&!t.onceProcessed)return lo(t,e);if(t.for&&!t.forProcessed)return h=e,d=(u=t).for,m=u.alias,p=u.iterator1?","+u.iterator1:"",f=u.iterator2?","+u.iterator2:"",u.forProcessed=!0,"_l(("+d+"),function("+m+p+f+"){return "+oo(u,h)+"})";if(t.if&&!t.ifProcessed)return co(t,e);if("template"!==t.tag||t.slotTarget){if("slot"===t.tag)return function(t,e){var i=t.slotName||'"default"',n=ho(t,e),s="_t("+i+(n?","+n:""),r=t.attrs&&"{"+t.attrs.map(function(t){return b(t.name)+":"+t.value}).join(",")+"}",o=t.attrsMap["v-bind"];return!r&&!o||n||(s+=",null"),r&&(s+=","+r),o&&(s+=(r?"":",null")+","+o),s+")"}(t,e);var i;if(t.component)o=t.component,l=e,c=(a=t).inlineTemplate?null:ho(a,l,!0),i="_c("+o+","+uo(a,l)+(c?","+c:"")+")";else{var n=t.plain?void 0:uo(t,e),s=t.inlineTemplate?null:ho(t,e,!0);i="_c('"+t.tag+"'"+(n?","+n:"")+(s?","+s:"")+")"}for(var r=0;r<e.transforms.length;r++)i=e.transforms[r](t,i);return i}return ho(t,e)||"void 0";var o,a,l,c,u,h,d,m,p,f}function ao(t,e){return t.staticProcessed=!0,e.staticRenderFns.push("with(this){return "+oo(t,e)+"}"),"_m("+(e.staticRenderFns.length-1)+(t.staticInFor?",true":"")+")"}function lo(t,e){if(t.onceProcessed=!0,t.if&&!t.ifProcessed)return co(t,e);if(t.staticInFor){for(var i="",n=t.parent;n;){if(n.for){i=n.key;break}n=n.parent}return i?"_o("+oo(t,e)+","+e.onceId+++","+i+")":oo(t,e)}return ao(t,e)}function co(t,e,i,n){return t.ifProcessed=!0,function t(e,i,n,s){if(!e.length)return s||"_e()";var r=e.shift();return r.exp?"("+r.exp+")?"+o(r.block)+":"+t(e,i,n,s):""+o(r.block);function o(t){return n?n(t,i):t.once?lo(t,i):oo(t,i)}}(t.ifConditions.slice(),e,i,n)}function uo(t,e){var i,n,s="{",r=function(t,e){var i=t.directives;if(i){var n,s,r,o,a="directives:[",l=!1;for(n=0,s=i.length;n<s;n++){r=i[n],o=!0;var c=e.directives[r.name];c&&(o=!!c(t,r,e.warn)),o&&(l=!0,a+='{name:"'+r.name+'",rawName:"'+r.rawName+'"'+(r.value?",value:("+r.value+"),expression:"+JSON.stringify(r.value):"")+(r.arg?',arg:"'+r.arg+'"':"")+(r.modifiers?",modifiers:"+JSON.stringify(r.modifiers):"")+"},")}return l?a.slice(0,-1)+"]":void 0}}(t,e);r&&(s+=r+","),t.key&&(s+="key:"+t.key+","),t.ref&&(s+="ref:"+t.ref+","),t.refInFor&&(s+="refInFor:true,"),t.pre&&(s+="pre:true,"),t.component&&(s+='tag:"'+t.tag+'",');for(var o=0;o<e.dataGenFns.length;o++)s+=e.dataGenFns[o](t);if(t.attrs&&(s+="attrs:{"+fo(t.attrs)+"},"),t.props&&(s+="domProps:{"+fo(t.props)+"},"),t.events&&(s+=to(t.events,!1,e.warn)+","),t.nativeEvents&&(s+=to(t.nativeEvents,!0,e.warn)+","),t.slotTarget&&!t.slotScope&&(s+="slot:"+t.slotTarget+","),t.scopedSlots&&(s+=(i=t.scopedSlots,n=e,"scopedSlots:_u(["+Object.keys(i).map(function(t){return function t(e,i,n){return i.for&&!i.forProcessed?(s=e,o=n,a=(r=i).for,l=r.alias,c=r.iterator1?","+r.iterator1:"",u=r.iterator2?","+r.iterator2:"",r.forProcessed=!0,"_l(("+a+"),function("+l+c+u+"){return "+t(s,r,o)+"})"):"{key:"+e+",fn:function("+String(i.slotScope)+"){return "+("template"===i.tag?i.if?i.if+"?"+(ho(i,n)||"undefined")+":undefined":ho(i,n)||"undefined":oo(i,n))+"}}";var s,r,o,a,l,c,u}(t,i[t],n)}).join(",")+"]),")),t.model&&(s+="model:{value:"+t.model.value+",callback:"+t.model.callback+",expression:"+t.model.expression+"},"),t.inlineTemplate){var a=function(t,e){var i=t.children[0];if(1===i.type){var n=ro(i,e.options);return"inlineTemplate:{render:function(){"+n.render+"},staticRenderFns:["+n.staticRenderFns.map(function(t){return"function(){"+t+"}"}).join(",")+"]}"}}(t,e);a&&(s+=a+",")}return s=s.replace(/,$/,"")+"}",t.wrapData&&(s=t.wrapData(s)),t.wrapListeners&&(s=t.wrapListeners(s)),s}function ho(t,e,i,n,s){var r=t.children;if(r.length){var o=r[0];if(1===r.length&&o.for&&"template"!==o.tag&&"slot"!==o.tag)return(n||oo)(o,e);var a=i?function(t,e){for(var i=0,n=0;n<t.length;n++){var s=t[n];if(1===s.type){if(mo(s)||s.ifConditions&&s.ifConditions.some(function(t){return mo(t.block)})){i=2;break}(e(s)||s.ifConditions&&s.ifConditions.some(function(t){return e(t.block)}))&&(i=1)}}return i}(r,e.maybeComponent):0,l=s||po;return"["+r.map(function(t){return l(t,e)}).join(",")+"]"+(a?","+a:"")}}function mo(t){return void 0!==t.for||"template"===t.tag||"slot"===t.tag}function po(t,e){return 1===t.type?oo(t,e):3===t.type&&t.isComment?(n=t,"_e("+JSON.stringify(n.text)+")"):"_v("+(2===(i=t).type?i.expression:_o(JSON.stringify(i.text)))+")";var i,n}function fo(t){for(var e="",i=0;i<t.length;i++){var n=t[i];e+='"'+n.name+'":'+_o(n.value)+","}return e.slice(0,-1)}function _o(t){return t.replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}function go(t,e){try{return new Function(t)}catch(i){return e.push({err:i,code:t}),k}}new RegExp("\\b"+"do,if,for,let,new,try,var,case,else,with,await,break,catch,class,const,super,throw,while,yield,delete,export,import,return,switch,default,extends,finally,continue,debugger,function,arguments".split(",").join("\\b|\\b")+"\\b"),new RegExp("\\b"+"delete,typeof,void".split(",").join("\\s*\\([^\\)]*\\)|\\b")+"\\s*\\([^\\)]*\\)");var vo,yo,xo=(vo=function(t,e){var i=function(t,e){ur=e.warn||vn,fr=e.isPreTag||P,_r=e.mustUseProp||P,gr=e.getTagNamespace||P,dr=yn(e.modules,"transformNode"),mr=yn(e.modules,"preTransformNode"),pr=yn(e.modules,"postTransformNode"),hr=e.delimiters;var i,n,s=[],r=!1!==e.preserveWhitespace,o=!1,a=!1;function l(t){t.pre&&(o=!1),fr(t.tag)&&(a=!1);for(var i=0;i<pr.length;i++)pr[i](t,e)}return function(t,e){for(var i,n,s=[],r=e.expectHTML,o=e.isUnaryTag||P,a=e.canBeLeftOpenTag||P,l=0;t;){if(i=t,n&&vr(n)){var c=0,u=n.toLowerCase(),h=yr[u]||(yr[u]=new RegExp("([\\s\\S]*?)(</"+u+"[^>]*>)","i")),d=t.replace(h,function(t,i,n){return c=n.length,vr(u)||"noscript"===u||(i=i.replace(/<!\--([\s\S]*?)-->/g,"$1").replace(/<!\[CDATA\[([\s\S]*?)]]>/g,"$1")),Sr(u,i)&&(i=i.slice(1)),e.chars&&e.chars(i),""});l+=t.length-d.length,t=d,B(u,l-c,l)}else{var m=t.indexOf("<");if(0===m){if(ar.test(t)){var p=t.indexOf("--\x3e");if(0<=p){e.shouldKeepComment&&e.comment(t.substring(4,p)),w(p+3);continue}}if(lr.test(t)){var f=t.indexOf("]>");if(0<=f){w(f+2);continue}}var _=t.match(or);if(_){w(_[0].length);continue}var g=t.match(rr);if(g){var v=l;w(g[0].length),B(g[1],v,l);continue}var y=S();if(y){C(y),Sr(n,t)&&w(1);continue}}var x=void 0,b=void 0,A=void 0;if(0<=m){for(b=t.slice(m);!(rr.test(b)||nr.test(b)||ar.test(b)||lr.test(b)||(A=b.indexOf("<",1))<0);)m+=A,b=t.slice(m);x=t.substring(0,m),w(m)}m<0&&(x=t,t=""),e.chars&&x&&e.chars(x)}if(t===i){e.chars&&e.chars(t);break}}function w(e){l+=e,t=t.substring(e)}function S(){var e=t.match(nr);if(e){var i,n,s={tagName:e[1],attrs:[],start:l};for(w(e[0].length);!(i=t.match(sr))&&(n=t.match(tr));)w(n[0].length),s.attrs.push(n);if(i)return s.unarySlash=i[1],w(i[0].length),s.end=l,s}}function C(t){var i=t.tagName,l=t.unarySlash;r&&("p"===n&&Ks(i)&&B(n),a(i)&&n===i&&B(i));for(var c,u,h,d=o(i)||!!l,m=t.attrs.length,p=new Array(m),f=0;f<m;f++){var _=t.attrs[f];cr&&-1===_[0].indexOf('""')&&(""===_[3]&&delete _[3],""===_[4]&&delete _[4],""===_[5]&&delete _[5]);var g=_[3]||_[4]||_[5]||"",v="a"===i&&"href"===_[1]?e.shouldDecodeNewlinesForHref:e.shouldDecodeNewlines;p[f]={name:_[1],value:(c=g,u=v,h=u?Ar:br,c.replace(h,function(t){return xr[t]}))}}d||(s.push({tag:i,lowerCasedTag:i.toLowerCase(),attrs:p}),n=i),e.start&&e.start(i,p,d,t.start,t.end)}function B(t,i,r){var o,a;if(null==i&&(i=l),null==r&&(r=l),t&&(a=t.toLowerCase()),t)for(o=s.length-1;0<=o&&s[o].lowerCasedTag!==a;o--);else o=0;if(0<=o){for(var c=s.length-1;o<=c;c--)e.end&&e.end(s[c].tag,i,r);s.length=o,n=o&&s[o-1].tag}else"br"===a?e.start&&e.start(t,[],!0,i,r):"p"===a&&(e.start&&e.start(t,[],!1,i,r),e.end&&e.end(t,i,r))}B()}(t,{warn:ur,expectHTML:e.expectHTML,isUnaryTag:e.isUnaryTag,canBeLeftOpenTag:e.canBeLeftOpenTag,shouldDecodeNewlines:e.shouldDecodeNewlines,shouldDecodeNewlinesForHref:e.shouldDecodeNewlinesForHref,shouldKeepComment:e.comments,start:function(t,r,c){var u=n&&n.ns||gr(t);W&&"svg"===u&&(r=function(t){for(var e=[],i=0;i<t.length;i++){var n=t[i];Or.test(n.name)||(n.name=n.name.replace(jr,""),e.push(n))}return e}(r));var h,d,m,p,f,_=Er(t,r,n);u&&(_.ns=u),"style"!==(h=_).tag&&("script"!==h.tag||h.attrsMap.type&&"text/javascript"!==h.attrsMap.type)||tt()||(_.forbidden=!0);for(var g=0;g<mr.length;g++)_=mr[g](_,e)||_;if(o||(null!=Cn(d=_,"v-pre")&&(d.pre=!0),_.pre&&(o=!0)),fr(_.tag)&&(a=!0),o?function(t){var e=t.attrsList.length;if(e)for(var i=t.attrs=new Array(e),n=0;n<e;n++)i[n]={name:t.attrsList[n].name,value:JSON.stringify(t.attrsList[n].value)};else t.pre||(t.plain=!0)}(_):_.processed||(Lr(_),function(t){var e=Cn(t,"v-if");if(e)t.if=e,Rr(t,{exp:e,block:t});else{null!=Cn(t,"v-else")&&(t.else=!0);var i=Cn(t,"v-else-if");i&&(t.elseif=i)}}(_),null!=Cn(m=_,"v-once")&&(m.once=!0),$r(_,e)),i?s.length||i.if&&(_.elseif||_.else)&&Rr(i,{exp:_.elseif,block:_}):i=_,n&&!_.forbidden)if(_.elseif||_.else)p=_,(f=function(t){for(var e=t.length;e--;){if(1===t[e].type)return t[e];t.pop()}}(n.children))&&f.if&&Rr(f,{exp:p.elseif,block:p});else if(_.slotScope){n.plain=!1;var v=_.slotTarget||'"default"';(n.scopedSlots||(n.scopedSlots={}))[v]=_}else n.children.push(_),_.parent=n;c?l(_):(n=_,s.push(_))},end:function(){var t=s[s.length-1],e=t.children[t.children.length-1];e&&3===e.type&&" "===e.text&&!a&&t.children.pop(),s.length-=1,n=s[s.length-1],l(t)},chars:function(t){if(n&&(!W||"textarea"!==n.tag||n.attrsMap.placeholder!==t)){var e,i,s=n.children;(t=a||t.trim()?"script"===(e=n).tag||"style"===e.tag?t:Tr(t):r&&s.length?" ":"")&&(!o&&" "!==t&&(i=function(t,e){var i=e?Js(e):Us;if(i.test(t)){for(var n,s,r,o=[],a=[],l=i.lastIndex=0;n=i.exec(t);){l<(s=n.index)&&(a.push(r=t.slice(l,s)),o.push(JSON.stringify(r)));var c=_n(n[1].trim());o.push("_s("+c+")"),a.push({"@binding":c}),l=s+n[0].length}return l<t.length&&(a.push(r=t.slice(l)),o.push(JSON.stringify(r))),{expression:o.join("+"),tokens:a}}}(t,hr))?s.push({type:2,expression:i.expression,tokens:i.tokens,text:t}):" "===t&&s.length&&" "===s[s.length-1].text||s.push({type:3,text:t}))}},comment:function(t){n.children.push({type:3,text:t,isComment:!0})}}),i}(t.trim(),e);!1!==e.optimize&&function(t,e){t&&(qr=Wr(e.staticKeys||""),zr=e.isReservedTag||P,function t(e){if(e.static=function(t){return 2!==t.type&&(3===t.type||!(!t.pre&&(t.hasBindings||t.if||t.for||p(t.tag)||!zr(t.tag)||function(t){for(;t.parent;){if("template"!==(t=t.parent).tag)return!1;if(t.for)return!0}return!1}(t)||!Object.keys(t).every(qr))))}(e),1===e.type){if(!zr(e.tag)&&"slot"!==e.tag&&null==e.attrsMap["inline-template"])return;for(var i=0,n=e.children.length;i<n;i++){var s=e.children[i];t(s),s.static||(e.static=!1)}if(e.ifConditions)for(var r=1,o=e.ifConditions.length;r<o;r++){var a=e.ifConditions[r].block;t(a),a.static||(e.static=!1)}}}(t),function t(e,i){if(1===e.type){if((e.static||e.once)&&(e.staticInFor=i),e.static&&e.children.length&&(1!==e.children.length||3!==e.children[0].type))return void(e.staticRoot=!0);if(e.staticRoot=!1,e.children)for(var n=0,s=e.children.length;n<s;n++)t(e.children[n],i||!!e.for);if(e.ifConditions)for(var r=1,o=e.ifConditions.length;r<o;r++)t(e.ifConditions[r].block,i)}}(t,!1))}(i,e);var n=ro(i,e);return{ast:i,render:n.render,staticRenderFns:n.staticRenderFns}},function(t){function e(e,i){var n=Object.create(t),s=[],r=[];if(n.warn=function(t,e){(e?r:s).push(t)},i)for(var o in i.modules&&(n.modules=(t.modules||[]).concat(i.modules)),i.directives&&(n.directives=V(Object.create(t.directives||null),i.directives)),i)"modules"!==o&&"directives"!==o&&(n[o]=i[o]);var a=vo(e,n);return a.errors=s,a.tips=r,a}return{compile:e,compileToFunctions:(i=e,n=Object.create(null),function(t,e,s){(e=V({},e)).warn,delete e.warn;var r=e.delimiters?String(e.delimiters)+t:t;if(n[r])return n[r];var o=i(t,e),a={},l=[];return a.render=go(o.render,l),a.staticRenderFns=o.staticRenderFns.map(function(t){return go(t,l)}),n[r]=a})};var i,n})(Ur).compileToFunctions;function bo(t){return(yo=yo||document.createElement("div")).innerHTML=t?'<a href="\n"/>':'<div a="\n"/>',0<yo.innerHTML.indexOf("&#10;")}var Ao=!!q&&bo(!1),wo=!!q&&bo(!0),So=y(function(t){var e=Ni(t);return e&&e.innerHTML}),Co=mi.prototype.$mount;return mi.prototype.$mount=function(t,e){if((t=t&&Ni(t))===document.body||t===document.documentElement)return this;var i=this.$options;if(!i.render){var n=i.template;if(n)if("string"==typeof n)"#"===n.charAt(0)&&(n=So(n));else{if(!n.nodeType)return this;n=n.innerHTML}else t&&(n=function(t){if(t.outerHTML)return t.outerHTML;var e=document.createElement("div");return e.appendChild(t.cloneNode(!0)),e.innerHTML}(t));if(n){var s=xo(n,{shouldDecodeNewlines:Ao,shouldDecodeNewlinesForHref:wo,delimiters:i.delimiters,comments:i.comments},this),r=s.render,o=s.staticRenderFns;i.render=r,i.staticRenderFns=o}}return Co.call(this,t,e)},mi.compile=xo,mi}()}).call(this,i(67),i(391).setImmediate)},function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var i=function(t,e){var i=t[1]||"",n=t[3];if(!n)return i;if(e&&"function"==typeof btoa){var s=function(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}(n),r=n.sources.map(function(t){return"/*# sourceURL="+n.sourceRoot+t+" */"});return[i].concat(r).concat([s]).join("\n")}return[i].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+i+"}":i}).join("")},e.i=function(t,i){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},s=0;s<this.length;s++){var r=this[s][0];"number"==typeof r&&(n[r]=!0)}for(s=0;s<t.length;s++){var o=t[s];"number"==typeof o[0]&&n[o[0]]||(i&&!o[2]?o[2]=i:i&&(o[2]="("+o[2]+") and ("+i+")"),e.push(o))}},e}},function(t,e,i){"use strict";function n(t,e){for(var i=[],n={},s=0;s<e.length;s++){var r=e[s],o=r[0],a={id:t+":"+s,css:r[1],media:r[2],sourceMap:r[3]};n[o]?n[o].parts.push(a):i.push(n[o]={id:o,parts:[a]})}return i}i.r(e),i.d(e,"default",function(){return p});var s="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!s)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var r={},o=s&&(document.head||document.getElementsByTagName("head")[0]),a=null,l=0,c=!1,u=function(){},h=null,d="data-vue-ssr-id",m="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());function p(t,e,i,s){c=i,h=s||{};var o=n(t,e);return f(o),function(e){for(var i=[],s=0;s<o.length;s++){var a=o[s];(l=r[a.id]).refs--,i.push(l)}e?f(o=n(t,e)):o=[];for(s=0;s<i.length;s++){var l;if(0===(l=i[s]).refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete r[l.id]}}}}function f(t){for(var e=0;e<t.length;e++){var i=t[e],n=r[i.id];if(n){n.refs++;for(var s=0;s<n.parts.length;s++)n.parts[s](i.parts[s]);for(;s<i.parts.length;s++)n.parts.push(g(i.parts[s]));n.parts.length>i.parts.length&&(n.parts.length=i.parts.length)}else{var o=[];for(s=0;s<i.parts.length;s++)o.push(g(i.parts[s]));r[i.id]={id:i.id,refs:1,parts:o}}}}function _(){var t=document.createElement("style");return t.type="text/css",o.appendChild(t),t}function g(t){var e,i,n=document.querySelector("style["+d+'~="'+t.id+'"]');if(n){if(c)return u;n.parentNode.removeChild(n)}if(m){var s=l++;n=a||(a=_()),e=y.bind(null,n,s,!1),i=y.bind(null,n,s,!0)}else n=_(),e=function(t,e){var i=e.css,n=e.media,s=e.sourceMap;n&&t.setAttribute("media",n);h.ssrId&&t.setAttribute(d,e.id);s&&(i+="\n/*# sourceURL="+s.sources[0]+" */",i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */");if(t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}.bind(null,n),i=function(){n.parentNode.removeChild(n)};return e(t),function(n){if(n){if(n.css===t.css&&n.media===t.media&&n.sourceMap===t.sourceMap)return;e(t=n)}else i()}}var v=function(){var t=[];return function(e,i){return t[e]=i,t.filter(Boolean).join("\n")}}();function y(t,e,i,n){var s=i?"":n.css;if(t.styleSheet)t.styleSheet.cssText=v(e,s);else{var r=document.createTextNode(s),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(r,o[e]):t.appendChild(r)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,i){var n,s,r;s=[i(20)],void 0===(r="function"==typeof(n=function(t){return t.ui=t.ui||{},t.ui.version="1.12.1"})?n.apply(e,s):n)||(t.exports=r)},function(t,e,i){var n=i(15),s=i(49);t.exports=i(14)?function(t,e,i){return n.f(t,e,s(1,i))}:function(t,e,i){return t[e]=i,t}},function(t,e,i){var n=i(9),s=i(26),r=i(29),o=i(50)("src"),a=Function.toString,l=(""+a).split("toString");i(33).inspectSource=function(t){return a.call(t)},(t.exports=function(t,e,i,a){var c="function"==typeof i;c&&(r(i,"name")||s(i,"name",e)),t[e]!==i&&(c&&(r(i,o)||s(i,o,t[e]?""+t[e]:l.join(String(e)))),t===n?t[e]=i:a?t[e]?t[e]=i:s(t,e,i):(delete t[e],s(t,e,i)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[o]||a.call(this)})},function(t,e,i){var n=i(2),s=i(10),r=i(38),o=/"/g,a=function(t,e,i,n){var s=String(r(t)),a="<"+e;return""!==i&&(a+=" "+i+'="'+String(n).replace(o,"&quot;")+'"'),a+">"+s+"</"+e+">"};t.exports=function(t,e){var i={};i[t]=e(a),n(n.P+n.F*s(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",i)}},function(t,e){var i={}.hasOwnProperty;t.exports=function(t,e){return i.call(t,e)}},function(t,e,i){var n=i(68),s=i(38);t.exports=function(t){return n(s(t))}},function(t,e,i){var n=i(69),s=i(49),r=i(30),o=i(37),a=i(29),l=i(124),c=Object.getOwnPropertyDescriptor;e.f=i(14)?c:function(t,e){if(t=r(t),e=o(e,!0),l)try{return c(t,e)}catch(t){}if(a(t,e))return s(!n.f.call(t,e),t[e])}},function(t,e,i){var n=i(29),s=i(19),r=i(94)("IE_PROTO"),o=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=s(t),n(t,r)?t[r]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?o:null}},function(t,e){var i=t.exports={version:"2.5.7"};"number"==typeof __e&&(__e=i)},function(t,e,i){var n=i(24);t.exports=function(t,e,i){if(n(t),void 0===e)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 2:return function(i,n){return t.call(e,i,n)};case 3:return function(i,n,s){return t.call(e,i,n,s)}}return function(){return t.apply(e,arguments)}}},function(t,e){var i={}.toString;t.exports=function(t){return i.call(t).slice(8,-1)}},function(t,e,i){"use strict";var n=i(10);t.exports=function(t,e){return!!t&&n(function(){e?t.call(null,function(){},1):t.call(null)})}},function(t,e,i){var n=i(11);t.exports=function(t,e){if(!n(t))return t;var i,s;if(e&&"function"==typeof(i=t.toString)&&!n(s=i.call(t)))return s;if("function"==typeof(i=t.valueOf)&&!n(s=i.call(t)))return s;if(!e&&"function"==typeof(i=t.toString)&&!n(s=i.call(t)))return s;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e){var i=Math.ceil,n=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?n:i)(t)}},function(t,e,i){var n=i(2),s=i(33),r=i(10);t.exports=function(t,e){var i=(s.Object||{})[t]||Object[t],o={};o[t]=e(i),n(n.S+n.F*r(function(){i(1)}),"Object",o)}},function(t,e,i){var n=i(34),s=i(68),r=i(19),o=i(16),a=i(111);t.exports=function(t,e){var i=1==t,l=2==t,c=3==t,u=4==t,h=6==t,d=5==t||h,m=e||a;return function(e,a,p){for(var f,_,g=r(e),v=s(g),y=n(a,p,3),x=o(v.length),b=0,A=i?m(e,x):l?m(e,0):void 0;x>b;b++)if((d||b in v)&&(_=y(f=v[b],b,g),t))if(i)A[b]=_;else if(_)switch(t){case 3:return!0;case 5:return f;case 6:return b;case 2:A.push(f)}else if(u)return!1;return h?-1:c||u?u:A}}},function(t,e,i){"use strict";if(i(14)){var n=i(45),s=i(9),r=i(10),o=i(2),a=i(82),l=i(117),c=i(34),u=i(56),h=i(49),d=i(26),m=i(58),p=i(39),f=i(16),_=i(150),g=i(52),v=i(37),y=i(29),x=i(70),b=i(11),A=i(19),w=i(108),S=i(53),C=i(32),B=i(54).f,V=i(110),M=i(50),k=i(13),P=i(41),I=i(72),D=i(79),T=i(113),E=i(63),$=i(76),L=i(55),R=i(112),F=i(140),O=i(15),j=i(31),G=O.f,N=j.f,q=s.RangeError,z=s.TypeError,H=s.Uint8Array,U=Array.prototype,W=l.ArrayBuffer,J=l.DataView,Y=P(0),X=P(2),Q=P(3),Z=P(4),K=P(5),tt=P(6),et=I(!0),it=I(!1),nt=T.values,st=T.keys,rt=T.entries,ot=U.lastIndexOf,at=U.reduce,lt=U.reduceRight,ct=U.join,ut=U.sort,ht=U.slice,dt=U.toString,mt=U.toLocaleString,pt=k("iterator"),ft=k("toStringTag"),_t=M("typed_constructor"),gt=M("def_constructor"),vt=a.CONSTR,yt=a.TYPED,xt=a.VIEW,bt=P(1,function(t,e){return Bt(D(t,t[gt]),e)}),At=r(function(){return 1===new H(new Uint16Array([1]).buffer)[0]}),wt=!!H&&!!H.prototype.set&&r(function(){new H(1).set({})}),St=function(t,e){var i=p(t);if(i<0||i%e)throw q("Wrong offset!");return i},Ct=function(t){if(b(t)&&yt in t)return t;throw z(t+" is not a typed array!")},Bt=function(t,e){if(!(b(t)&&_t in t))throw z("It is not a typed array constructor!");return new t(e)},Vt=function(t,e){return Mt(D(t,t[gt]),e)},Mt=function(t,e){for(var i=0,n=e.length,s=Bt(t,n);n>i;)s[i]=e[i++];return s},kt=function(t,e,i){G(t,e,{get:function(){return this._d[i]}})},Pt=function(t){var e,i,n,s,r,o,a=A(t),l=arguments.length,u=l>1?arguments[1]:void 0,h=void 0!==u,d=V(a);if(void 0!=d&&!w(d)){for(o=d.call(a),n=[],e=0;!(r=o.next()).done;e++)n.push(r.value);a=n}for(h&&l>2&&(u=c(u,arguments[2],2)),e=0,i=f(a.length),s=Bt(this,i);i>e;e++)s[e]=h?u(a[e],e):a[e];return s},It=function(){for(var t=0,e=arguments.length,i=Bt(this,e);e>t;)i[t]=arguments[t++];return i},Dt=!!H&&r(function(){mt.call(new H(1))}),Tt=function(){return mt.apply(Dt?ht.call(Ct(this)):Ct(this),arguments)},Et={copyWithin:function(t,e){return F.call(Ct(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return Z(Ct(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return R.apply(Ct(this),arguments)},filter:function(t){return Vt(this,X(Ct(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return K(Ct(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return tt(Ct(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){Y(Ct(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return it(Ct(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return et(Ct(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return ct.apply(Ct(this),arguments)},lastIndexOf:function(t){return ot.apply(Ct(this),arguments)},map:function(t){return bt(Ct(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return at.apply(Ct(this),arguments)},reduceRight:function(t){return lt.apply(Ct(this),arguments)},reverse:function(){for(var t,e=Ct(this).length,i=Math.floor(e/2),n=0;n<i;)t=this[n],this[n++]=this[--e],this[e]=t;return this},some:function(t){return Q(Ct(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return ut.call(Ct(this),t)},subarray:function(t,e){var i=Ct(this),n=i.length,s=g(t,n);return new(D(i,i[gt]))(i.buffer,i.byteOffset+s*i.BYTES_PER_ELEMENT,f((void 0===e?n:g(e,n))-s))}},$t=function(t,e){return Vt(this,ht.call(Ct(this),t,e))},Lt=function(t){Ct(this);var e=St(arguments[1],1),i=this.length,n=A(t),s=f(n.length),r=0;if(s+e>i)throw q("Wrong length!");for(;r<s;)this[e+r]=n[r++]},Rt={entries:function(){return rt.call(Ct(this))},keys:function(){return st.call(Ct(this))},values:function(){return nt.call(Ct(this))}},Ft=function(t,e){return b(t)&&t[yt]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},Ot=function(t,e){return Ft(t,e=v(e,!0))?h(2,t[e]):N(t,e)},jt=function(t,e,i){return!(Ft(t,e=v(e,!0))&&b(i)&&y(i,"value"))||y(i,"get")||y(i,"set")||i.configurable||y(i,"writable")&&!i.writable||y(i,"enumerable")&&!i.enumerable?G(t,e,i):(t[e]=i.value,t)};vt||(j.f=Ot,O.f=jt),o(o.S+o.F*!vt,"Object",{getOwnPropertyDescriptor:Ot,defineProperty:jt}),r(function(){dt.call({})})&&(dt=mt=function(){return ct.call(this)});var Gt=m({},Et);m(Gt,Rt),d(Gt,pt,Rt.values),m(Gt,{slice:$t,set:Lt,constructor:function(){},toString:dt,toLocaleString:Tt}),kt(Gt,"buffer","b"),kt(Gt,"byteOffset","o"),kt(Gt,"byteLength","l"),kt(Gt,"length","e"),G(Gt,ft,{get:function(){return this[yt]}}),t.exports=function(t,e,i,l){var c=t+((l=!!l)?"Clamped":"")+"Array",h="get"+t,m="set"+t,p=s[c],g=p||{},v=p&&C(p),y=!p||!a.ABV,A={},w=p&&p.prototype,V=function(t,i){G(t,i,{get:function(){return function(t,i){var n=t._d;return n.v[h](i*e+n.o,At)}(this,i)},set:function(t){return function(t,i,n){var s=t._d;l&&(n=(n=Math.round(n))<0?0:n>255?255:255&n),s.v[m](i*e+s.o,n,At)}(this,i,t)},enumerable:!0})};y?(p=i(function(t,i,n,s){u(t,p,c,"_d");var r,o,a,l,h=0,m=0;if(b(i)){if(!(i instanceof W||"ArrayBuffer"==(l=x(i))||"SharedArrayBuffer"==l))return yt in i?Mt(p,i):Pt.call(p,i);r=i,m=St(n,e);var g=i.byteLength;if(void 0===s){if(g%e)throw q("Wrong length!");if((o=g-m)<0)throw q("Wrong length!")}else if((o=f(s)*e)+m>g)throw q("Wrong length!");a=o/e}else a=_(i),r=new W(o=a*e);for(d(t,"_d",{b:r,o:m,l:o,e:a,v:new J(r)});h<a;)V(t,h++)}),w=p.prototype=S(Gt),d(w,"constructor",p)):r(function(){p(1)})&&r(function(){new p(-1)})&&$(function(t){new p,new p(null),new p(1.5),new p(t)},!0)||(p=i(function(t,i,n,s){var r;return u(t,p,c),b(i)?i instanceof W||"ArrayBuffer"==(r=x(i))||"SharedArrayBuffer"==r?void 0!==s?new g(i,St(n,e),s):void 0!==n?new g(i,St(n,e)):new g(i):yt in i?Mt(p,i):Pt.call(p,i):new g(_(i))}),Y(v!==Function.prototype?B(g).concat(B(v)):B(g),function(t){t in p||d(p,t,g[t])}),p.prototype=w,n||(w.constructor=p));var M=w[pt],k=!!M&&("values"==M.name||void 0==M.name),P=Rt.values;d(p,_t,!0),d(w,yt,c),d(w,xt,!0),d(w,gt,p),(l?new p(1)[ft]==c:ft in w)||G(w,ft,{get:function(){return c}}),A[c]=p,o(o.G+o.W+o.F*(p!=g),A),o(o.S,c,{BYTES_PER_ELEMENT:e}),o(o.S+o.F*r(function(){g.of.call(p,1)}),c,{from:Pt,of:It}),"BYTES_PER_ELEMENT"in w||d(w,"BYTES_PER_ELEMENT",e),o(o.P,c,Et),L(c),o(o.P+o.F*wt,c,{set:Lt}),o(o.P+o.F*!k,c,Rt),n||w.toString==dt||(w.toString=dt),o(o.P+o.F*r(function(){new p(1).slice()}),c,{slice:$t}),o(o.P+o.F*(r(function(){return[1,2].toLocaleString()!=new p([1,2]).toLocaleString()})||!r(function(){w.toLocaleString.call([1,2])})),c,{toLocaleString:Tt}),E[c]=k?M:P,n||k||d(w,pt,P)}}else t.exports=function(){}},function(t,e,i){var n=i(145),s=i(2),r=i(71)("metadata"),o=r.store||(r.store=new(i(148))),a=function(t,e,i){var s=o.get(t);if(!s){if(!i)return;o.set(t,s=new n)}var r=s.get(e);if(!r){if(!i)return;s.set(e,r=new n)}return r};t.exports={store:o,map:a,has:function(t,e,i){var n=a(e,i,!1);return void 0!==n&&n.has(t)},get:function(t,e,i){var n=a(e,i,!1);return void 0===n?void 0:n.get(t)},set:function(t,e,i,n){a(i,n,!0).set(t,e)},keys:function(t,e){var i=a(t,e,!1),n=[];return i&&i.forEach(function(t,e){n.push(e)}),n},key:function(t){return void 0===t||"symbol"==typeof t?t:String(t)},exp:function(t){s(s.S,"Reflect",t)}}},function(t,e,i){var n=i(50)("meta"),s=i(11),r=i(29),o=i(15).f,a=0,l=Object.isExtensible||function(){return!0},c=!i(10)(function(){return l(Object.preventExtensions({}))}),u=function(t){o(t,n,{value:{i:"O"+ ++a,w:{}}})},h=t.exports={KEY:n,NEED:!1,fastKey:function(t,e){if(!s(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!r(t,n)){if(!l(t))return"F";if(!e)return"E";u(t)}return t[n].i},getWeak:function(t,e){if(!r(t,n)){if(!l(t))return!0;if(!e)return!1;u(t)}return t[n].w},onFreeze:function(t){return c&&h.NEED&&l(t)&&!r(t,n)&&u(t),t}}},function(t,e){t.exports=!1},function(t,e,i){var n=i(13)("unscopables"),s=Array.prototype;void 0==s[n]&&i(26)(s,n,{}),t.exports=function(t){s[n][t]=!0}},function(t,e,i){"use strict";i.d(e,"a",function(){return o});i(6),i(18);var n=i(17);window.m_draw_animation_texture_info=!1;class s{constructor(t,e){this._raw=t,this._url=e,this.frame=0,this.time=0,this.delta=0,this.textures=[],this.is_loop=!0,this.is_end=!1,this._url}getTotalTime(){return this.textures.reduce((t,e)=>t+e.delay,0)}clone(){let t=new this.constructor(this._raw,this._url);return t.textures=this.textures,t}load(){throw new Error("Not implement")}update(t){throw new Error("Not implement")}_resetFrame(){this.frame=0,this.time=0}reset(){this.frame=0,this.time=0,this.is_end=!1}get texture(){throw new Error("Not implement")}destroy(){this.is_loop=!1,this.is_end=!0}}class r extends s{constructor(t,e){super(t,e)}async load(){for(let t=0;t in this._raw;++t){let e=this._url+"/"+t,i=new n.a(this._raw[t]);i._url=e,this.textures[t]=i}this.textures[0]&&(this.textures[0].isLoaded()||this.textures[0].__loadTexture())}isEnd(){return this.is_end}_update(t){const e=this.textures.length;e>0&&(this.time=this.time+t,this.time>this.texture.delay&&(this.frame=++this.frame%e,this.time=0)),this.delta+=t}update(t){const e=this.textures.length;if(e>0&&(this.time=this.time+t,this.time>this.texture.delay)){if(this.frame=this.frame+1,this.frame>=e){if(!this.is_loop)return this.frame=e-1,void(this.is_end=!0);this.reset()}this.time=0}this.delta+=t}draw(t,e,i,n,s){let r=this.texture;t.drawRotaGraph(r,e,i,n,s)}get texture(){return this.textures[this.frame]}}class o extends r{constructor(t,e){super(t,e),this.draw=this._draw_and_preload}_draw_and_preload(t,e,i,n,s){let r;for(r=this.frame;r>=0;--r){let o=this.textures[r];if(o.isLoaded()){t.drawRotaGraph(o,e,i,n,s);break}}let o=this.textures[++r];o?o.isLoaded()||o.__loadTexture():delete this.draw}}},function(t,e,i){"use strict";
/**
 * vuex v2.5.0
 * (c) 2017 Evan You
 * @license MIT
 */var n=function(t){if(Number(t.version.split(".")[0])>=2)t.mixin({beforeCreate:i});else{var e=t.prototype._init;t.prototype._init=function(t){void 0===t&&(t={}),t.init=t.init?[i].concat(t.init):i,e.call(this,t)}}function i(){var t=this.$options;t.store?this.$store="function"==typeof t.store?t.store():t.store:t.parent&&t.parent.$store&&(this.$store=t.parent.$store)}},s="undefined"!=typeof window&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function r(t,e){Object.keys(t).forEach(function(i){return e(t[i],i)})}var o=function(t,e){this.runtime=e,this._children=Object.create(null),this._rawModule=t;var i=t.state;this.state=("function"==typeof i?i():i)||{}},a={namespaced:{configurable:!0}};a.namespaced.get=function(){return!!this._rawModule.namespaced},o.prototype.addChild=function(t,e){this._children[t]=e},o.prototype.removeChild=function(t){delete this._children[t]},o.prototype.getChild=function(t){return this._children[t]},o.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)},o.prototype.forEachChild=function(t){r(this._children,t)},o.prototype.forEachGetter=function(t){this._rawModule.getters&&r(this._rawModule.getters,t)},o.prototype.forEachAction=function(t){this._rawModule.actions&&r(this._rawModule.actions,t)},o.prototype.forEachMutation=function(t){this._rawModule.mutations&&r(this._rawModule.mutations,t)},Object.defineProperties(o.prototype,a);var l=function(t){this.register([],t,!1)};l.prototype.get=function(t){return t.reduce(function(t,e){return t.getChild(e)},this.root)},l.prototype.getNamespace=function(t){var e=this.root;return t.reduce(function(t,i){return t+((e=e.getChild(i)).namespaced?i+"/":"")},"")},l.prototype.update=function(t){!function t(e,i,n){0;i.update(n);if(n.modules)for(var s in n.modules){if(!i.getChild(s))return void 0;t(e.concat(s),i.getChild(s),n.modules[s])}}([],this.root,t)},l.prototype.register=function(t,e,i){var n=this;void 0===i&&(i=!0);var s=new o(e,i);0===t.length?this.root=s:this.get(t.slice(0,-1)).addChild(t[t.length-1],s);e.modules&&r(e.modules,function(e,s){n.register(t.concat(s),e,i)})},l.prototype.unregister=function(t){var e=this.get(t.slice(0,-1)),i=t[t.length-1];e.getChild(i).runtime&&e.removeChild(i)};var c;var u=function(t){var e=this;void 0===t&&(t={}),!c&&"undefined"!=typeof window&&window.Vue&&v(window.Vue);var i=t.plugins;void 0===i&&(i=[]);var n=t.strict;void 0===n&&(n=!1);var r=t.state;void 0===r&&(r={}),"function"==typeof r&&(r=r()||{}),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new l(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._watcherVM=new c;var o=this,a=this.dispatch,u=this.commit;this.dispatch=function(t,e){return a.call(o,t,e)},this.commit=function(t,e,i){return u.call(o,t,e,i)},this.strict=n,f(this,r,[],this._modules.root),p(this,r),i.forEach(function(t){return t(e)}),c.config.devtools&&function(t){s&&(t._devtoolHook=s,s.emit("vuex:init",t),s.on("vuex:travel-to-state",function(e){t.replaceState(e)}),t.subscribe(function(t,e){s.emit("vuex:mutation",t,e)}))}(this)},h={state:{configurable:!0}};function d(t,e){return e.indexOf(t)<0&&e.push(t),function(){var i=e.indexOf(t);i>-1&&e.splice(i,1)}}function m(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var i=t.state;f(t,i,[],t._modules.root,!0),p(t,i,e)}function p(t,e,i){var n=t._vm;t.getters={};var s={};r(t._wrappedGetters,function(e,i){s[i]=function(){return e(t)},Object.defineProperty(t.getters,i,{get:function(){return t._vm[i]},enumerable:!0})});var o=c.config.silent;c.config.silent=!0,t._vm=new c({data:{$$state:e},computed:s}),c.config.silent=o,t.strict&&function(t){t._vm.$watch(function(){return this._data.$$state},function(){0},{deep:!0,sync:!0})}(t),n&&(i&&t._withCommit(function(){n._data.$$state=null}),c.nextTick(function(){return n.$destroy()}))}function f(t,e,i,n,s){var r=!i.length,o=t._modules.getNamespace(i);if(n.namespaced&&(t._modulesNamespaceMap[o]=n),!r&&!s){var a=_(e,i.slice(0,-1)),l=i[i.length-1];t._withCommit(function(){c.set(a,l,n.state)})}var u=n.context=function(t,e,i){var n=""===e,s={dispatch:n?t.dispatch:function(i,n,s){var r=g(i,n,s),o=r.payload,a=r.options,l=r.type;return a&&a.root||(l=e+l),t.dispatch(l,o)},commit:n?t.commit:function(i,n,s){var r=g(i,n,s),o=r.payload,a=r.options,l=r.type;a&&a.root||(l=e+l),t.commit(l,o,a)}};return Object.defineProperties(s,{getters:{get:n?function(){return t.getters}:function(){return function(t,e){var i={},n=e.length;return Object.keys(t.getters).forEach(function(s){if(s.slice(0,n)===e){var r=s.slice(n);Object.defineProperty(i,r,{get:function(){return t.getters[s]},enumerable:!0})}}),i}(t,e)}},state:{get:function(){return _(t.state,i)}}}),s}(t,o,i);n.forEachMutation(function(e,i){!function(t,e,i,n){(t._mutations[e]||(t._mutations[e]=[])).push(function(e){i.call(t,n.state,e)})}(t,o+i,e,u)}),n.forEachAction(function(e,i){var n=e.root?i:o+i,s=e.handler||e;!function(t,e,i,n){(t._actions[e]||(t._actions[e]=[])).push(function(e,s){var r=i.call(t,{dispatch:n.dispatch,commit:n.commit,getters:n.getters,state:n.state,rootGetters:t.getters,rootState:t.state},e,s);return function(t){return t&&"function"==typeof t.then}(r)||(r=Promise.resolve(r)),t._devtoolHook?r.catch(function(e){throw t._devtoolHook.emit("vuex:error",e),e}):r})}(t,n,s,u)}),n.forEachGetter(function(e,i){!function(t,e,i,n){if(t._wrappedGetters[e])return void 0;t._wrappedGetters[e]=function(t){return i(n.state,n.getters,t.state,t.getters)}}(t,o+i,e,u)}),n.forEachChild(function(n,r){f(t,e,i.concat(r),n,s)})}function _(t,e){return e.length?e.reduce(function(t,e){return t[e]},t):t}function g(t,e,i){return function(t){return null!==t&&"object"==typeof t}(t)&&t.type&&(i=e,e=t,t=t.type),{type:t,payload:e,options:i}}function v(t){c&&t===c||n(c=t)}h.state.get=function(){return this._vm._data.$$state},h.state.set=function(t){0},u.prototype.commit=function(t,e,i){var n=this,s=g(t,e,i),r=s.type,o=s.payload,a=(s.options,{type:r,payload:o}),l=this._mutations[r];l&&(this._withCommit(function(){l.forEach(function(t){t(o)})}),this._subscribers.forEach(function(t){return t(a,n.state)}))},u.prototype.dispatch=function(t,e){var i=this,n=g(t,e),s=n.type,r=n.payload,o={type:s,payload:r},a=this._actions[s];if(a)return this._actionSubscribers.forEach(function(t){return t(o,i.state)}),a.length>1?Promise.all(a.map(function(t){return t(r)})):a[0](r)},u.prototype.subscribe=function(t){return d(t,this._subscribers)},u.prototype.subscribeAction=function(t){return d(t,this._actionSubscribers)},u.prototype.watch=function(t,e,i){var n=this;return this._watcherVM.$watch(function(){return t(n.state,n.getters)},e,i)},u.prototype.replaceState=function(t){var e=this;this._withCommit(function(){e._vm._data.$$state=t})},u.prototype.registerModule=function(t,e,i){void 0===i&&(i={}),"string"==typeof t&&(t=[t]),this._modules.register(t,e),f(this,this.state,t,this._modules.get(t),i.preserveState),p(this,this.state)},u.prototype.unregisterModule=function(t){var e=this;"string"==typeof t&&(t=[t]),this._modules.unregister(t),this._withCommit(function(){var i=_(e.state,t.slice(0,-1));c.delete(i,t[t.length-1])}),m(this)},u.prototype.hotUpdate=function(t){this._modules.update(t),m(this,!0)},u.prototype._withCommit=function(t){var e=this._committing;this._committing=!0,t(),this._committing=e},Object.defineProperties(u.prototype,h);var y=S(function(t,e){var i={};return w(e).forEach(function(e){var n=e.key,s=e.val;i[n]=function(){var e=this.$store.state,i=this.$store.getters;if(t){var n=C(this.$store,"mapState",t);if(!n)return;e=n.context.state,i=n.context.getters}return"function"==typeof s?s.call(this,e,i):e[s]},i[n].vuex=!0}),i}),x=S(function(t,e){var i={};return w(e).forEach(function(e){var n=e.key,s=e.val;i[n]=function(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];var n=this.$store.commit;if(t){var r=C(this.$store,"mapMutations",t);if(!r)return;n=r.context.commit}return"function"==typeof s?s.apply(this,[n].concat(e)):n.apply(this.$store,[s].concat(e))}}),i}),b=S(function(t,e){var i={};return w(e).forEach(function(e){var n=e.key,s=e.val;s=t+s,i[n]=function(){if(!t||C(this.$store,"mapGetters",t))return this.$store.getters[s]},i[n].vuex=!0}),i}),A=S(function(t,e){var i={};return w(e).forEach(function(e){var n=e.key,s=e.val;i[n]=function(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];var n=this.$store.dispatch;if(t){var r=C(this.$store,"mapActions",t);if(!r)return;n=r.context.dispatch}return"function"==typeof s?s.apply(this,[n].concat(e)):n.apply(this.$store,[s].concat(e))}}),i});function w(t){return Array.isArray(t)?t.map(function(t){return{key:t,val:t}}):Object.keys(t).map(function(e){return{key:e,val:t[e]}})}function S(t){return function(e,i){return"string"!=typeof e?(i=e,e=""):"/"!==e.charAt(e.length-1)&&(e+="/"),t(e,i)}}function C(t,e,i){return t._modulesNamespaceMap[i]}var B={Store:u,install:v,version:"2.5.0",mapState:y,mapMutations:x,mapGetters:b,mapActions:A,createNamespacedHelpers:function(t){return{mapState:y.bind(null,t),mapGetters:b.bind(null,t),mapMutations:x.bind(null,t),mapActions:A.bind(null,t)}}};e.a=B},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e){var i=0,n=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++i+n).toString(36))}},function(t,e,i){var n=i(126),s=i(95);t.exports=Object.keys||function(t){return n(t,s)}},function(t,e,i){var n=i(39),s=Math.max,r=Math.min;t.exports=function(t,e){return(t=n(t))<0?s(t+e,0):r(t,e)}},function(t,e,i){var n=i(8),s=i(127),r=i(95),o=i(94)("IE_PROTO"),a=function(){},l=function(){var t,e=i(92)("iframe"),n=r.length;for(e.style.display="none",i(96).appendChild(e),e.src="javascript:",(t=e.contentWindow.document).open(),t.write("<script>document.F=Object<\/script>"),t.close(),l=t.F;n--;)delete l.prototype[r[n]];return l()};t.exports=Object.create||function(t,e){var i;return null!==t?(a.prototype=n(t),i=new a,a.prototype=null,i[o]=t):i=l(),void 0===e?i:s(i,e)}},function(t,e,i){var n=i(126),s=i(95).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,s)}},function(t,e,i){"use strict";var n=i(9),s=i(15),r=i(14),o=i(13)("species");t.exports=function(t){var e=n[t];r&&e&&!e[o]&&s.f(e,o,{configurable:!0,get:function(){return this}})}},function(t,e){t.exports=function(t,e,i,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(i+": incorrect invocation!");return t}},function(t,e,i){var n=i(34),s=i(138),r=i(108),o=i(8),a=i(16),l=i(110),c={},u={};(e=t.exports=function(t,e,i,h,d){var m,p,f,_,g=d?function(){return t}:l(t),v=n(i,h,e?2:1),y=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(r(g)){for(m=a(t.length);m>y;y++)if((_=e?v(o(p=t[y])[0],p[1]):v(t[y]))===c||_===u)return _}else for(f=g.call(t);!(p=f.next()).done;)if((_=s(f,v,p.value,e))===c||_===u)return _}).BREAK=c,e.RETURN=u},function(t,e,i){var n=i(27);t.exports=function(t,e,i){for(var s in e)n(t,s,e[s],i);return t}},function(t,e,i){"use strict";i.r(e),i.d(e,"FilterHelper",function(){return a});var n=i(89),s=i(424);let r={},o=1;class a extends n.a{ignore(t){let e=r["s_"+t];this.maskBits=(this.maskBits&~e.categoryBits)>>>0,e.maskBits=(e.maskBits&~this.categoryBits)>>>0}addCategory(t){let e=r["s_"+t];this.categoryBits=this.categoryBits|e.categoryBits}static get(t,e){let i=r["s_"+t];if(e){let t=r["s_"+e];console.warn("filter: "+e+"%o",t)}return i}static registerCategory(t){let e=r["s_"+t]=new a;return e.groupIndex=0,e.categoryBits=o,e.maskBits=4294967295,e.name=t,o<<=1,e}static get next_category(){return r}static get filter_preset(){return r}}const l=[[1,1,1,1,1,1,1,1,1,1,1,1],[1,0,0,0,0,1,1,1,0,1,1,1],[1,0,0,1,0,0,0,0,0,0,0,0],[1,0,1,0,0,0,0,0,1,0,0,1],[1,0,0,0,0,0,1,0,0,0,0,0],[1,1,0,0,0,0,1,0,0,0,0,0],[1,1,0,0,1,1,0,0,0,0,0,0],[1,1,0,0,0,0,0,0,0,0,0,0],[1,0,0,1,0,0,0,0,0,0,0,0],[1,1,0,0,0,0,0,0,0,0,0,0],[1,1,0,0,0,0,0,0,0,0,0,0],[1,1,0,1,0,0,1,0,0,0,0,0]];!function(){let t=[a.registerCategory("default"),a.registerCategory("body"),a.registerCategory("foothold"),a.registerCategory("foot"),a.registerCategory("bullet"),a.registerCategory("pvp_bullet"),a.registerCategory("mob"),a.registerCategory("mob_bullet"),a.registerCategory("portal"),a.registerCategory("ladder"),a.registerCategory("map_obj"),a.registerCategory("map_border")];for(let e=0;e<l.length;++e)for(let i=0;i<l[e].length;++i)l[e][i]||(t[e].maskBits=(t[e].maskBits&~(1<<i))>>>0)}(),function(){let t=new s.b2ContactFilter;function e(t){return{GetFilterData:()=>a.get(t),GetBody:()=>({GetType:()=>2,ShouldCollideConnected:()=>!0})}}t.ShouldCollide(e("body"),e("ladder")),t.ShouldCollide(e("ladder"),e("body")),t.ShouldCollide(e("foot"),e("portal")),t.ShouldCollide(e("portal"),e("foot"))}()},function(t,e,i){"use strict";i.d(e,"d",function(){return r}),i.d(e,"f",function(){return o}),i.d(e,"b",function(){return a}),i.d(e,"c",function(){return l}),i.d(e,"h",function(){return c}),i.d(e,"i",function(){return u}),i.d(e,"j",function(){return h}),i.d(e,"k",function(){return d}),i.d(e,"g",function(){return m}),i.d(e,"e",function(){return p}),i.d(e,"a",function(){return w});var n=i(1),s=i(0);class r{constructor(){this.m_buffer=s.A.MakeArray(2),this.m_vertices=this.m_buffer,this.m_count=0,this.m_radius=0}Reset(){return this.m_vertices=this.m_buffer,this.m_count=0,this.m_radius=0,this}SetShape(t,e){t.SetupDistanceProxy(this,e)}GetSupport(t){let e=0,i=s.A.DotVV(this.m_vertices[0],t);for(let n=1;n<this.m_count;++n){const r=s.A.DotVV(this.m_vertices[n],t);r>i&&(e=n,i=r)}return e}GetSupportVertex(t){let e=0,i=s.A.DotVV(this.m_vertices[0],t);for(let n=1;n<this.m_count;++n){const r=s.A.DotVV(this.m_vertices[n],t);r>i&&(e=n,i=r)}return this.m_vertices[e]}GetVertexCount(){return this.m_count}GetVertex(t){return this.m_vertices[t]}}class o{constructor(){this.metric=0,this.count=0,this.indexA=[0,0,0],this.indexB=[0,0,0]}Reset(){return this.metric=0,this.count=0,this}}class a{constructor(){this.proxyA=new r,this.proxyB=new r,this.transformA=new s.z,this.transformB=new s.z,this.useRadii=!1}Reset(){return this.proxyA.Reset(),this.proxyB.Reset(),this.transformA.SetIdentity(),this.transformB.SetIdentity(),this.useRadii=!1,this}}class l{constructor(){this.pointA=new s.A,this.pointB=new s.A,this.distance=0,this.iterations=0}Reset(){return this.pointA.SetZero(),this.pointB.SetZero(),this.distance=0,this.iterations=0,this}}let c=0,u=0,h=0;function d(){c=0,u=0,h=0}class m{constructor(){this.wA=new s.A,this.wB=new s.A,this.w=new s.A,this.a=0,this.indexA=0,this.indexB=0}Copy(t){return this.wA.Copy(t.wA),this.wB.Copy(t.wB),this.w.Copy(t.w),this.a=t.a,this.indexA=t.indexA,this.indexB=t.indexB,this}}class p{constructor(){this.m_v1=new m,this.m_v2=new m,this.m_v3=new m,this.m_vertices=[],this.m_count=0,this.m_vertices[0]=this.m_v1,this.m_vertices[1]=this.m_v2,this.m_vertices[2]=this.m_v3}ReadCache(t,e,i,r,o){this.m_count=t.count;const a=this.m_vertices;for(let n=0;n<this.m_count;++n){const l=a[n];l.indexA=t.indexA[n],l.indexB=t.indexB[n];const c=e.GetVertex(l.indexA),u=r.GetVertex(l.indexB);s.z.MulXV(i,c,l.wA),s.z.MulXV(o,u,l.wB),s.A.SubVV(l.wB,l.wA,l.w),l.a=0}if(this.m_count>1){const e=t.metric,i=this.GetMetric();(i<.5*e||2*e<i||i<n.r)&&(this.m_count=0)}if(0===this.m_count){const t=a[0];t.indexA=0,t.indexB=0;const n=e.GetVertex(0),l=r.GetVertex(0);s.z.MulXV(i,n,t.wA),s.z.MulXV(o,l,t.wB),s.A.SubVV(t.wB,t.wA,t.w),t.a=1,this.m_count=1}}WriteCache(t){t.metric=this.GetMetric(),t.count=this.m_count;const e=this.m_vertices;for(let i=0;i<this.m_count;++i)t.indexA[i]=e[i].indexA,t.indexB[i]=e[i].indexB}GetSearchDirection(t){switch(this.m_count){case 1:return s.A.NegV(this.m_v1.w,t);case 2:{const e=s.A.SubVV(this.m_v2.w,this.m_v1.w,t);return s.A.CrossVV(e,s.A.NegV(this.m_v1.w,s.A.s_t0))>0?s.A.CrossOneV(e,t):s.A.CrossVOne(e,t)}default:return t.SetZero()}}GetClosestPoint(t){switch(this.m_count){case 0:return t.SetZero();case 1:return t.Copy(this.m_v1.w);case 2:return t.Set(this.m_v1.a*this.m_v1.w.x+this.m_v2.a*this.m_v2.w.x,this.m_v1.a*this.m_v1.w.y+this.m_v2.a*this.m_v2.w.y);case 3:default:return t.SetZero()}}GetWitnessPoints(t,e){switch(this.m_count){case 0:break;case 1:t.Copy(this.m_v1.wA),e.Copy(this.m_v1.wB);break;case 2:t.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x,t.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y,e.x=this.m_v1.a*this.m_v1.wB.x+this.m_v2.a*this.m_v2.wB.x,e.y=this.m_v1.a*this.m_v1.wB.y+this.m_v2.a*this.m_v2.wB.y;break;case 3:e.x=t.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x+this.m_v3.a*this.m_v3.wA.x,e.y=t.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y+this.m_v3.a*this.m_v3.wA.y}}GetMetric(){switch(this.m_count){case 0:case 1:return 0;case 2:return s.A.DistanceVV(this.m_v1.w,this.m_v2.w);case 3:return s.A.CrossVV(s.A.SubVV(this.m_v2.w,this.m_v1.w,s.A.s_t0),s.A.SubVV(this.m_v3.w,this.m_v1.w,s.A.s_t1));default:return 0}}Solve2(){const t=this.m_v1.w,e=this.m_v2.w,i=s.A.SubVV(e,t,p.s_e12),n=-s.A.DotVV(t,i);if(n<=0)return this.m_v1.a=1,void(this.m_count=1);const r=s.A.DotVV(e,i);if(r<=0)return this.m_v2.a=1,this.m_count=1,void this.m_v1.Copy(this.m_v2);const o=1/(r+n);this.m_v1.a=r*o,this.m_v2.a=n*o,this.m_count=2}Solve3(){const t=this.m_v1.w,e=this.m_v2.w,i=this.m_v3.w,n=s.A.SubVV(e,t,p.s_e12),r=s.A.DotVV(t,n),o=s.A.DotVV(e,n),a=-r,l=s.A.SubVV(i,t,p.s_e13),c=s.A.DotVV(t,l),u=s.A.DotVV(i,l),h=-c,d=s.A.SubVV(i,e,p.s_e23),m=s.A.DotVV(e,d),f=s.A.DotVV(i,d),_=-m,g=s.A.CrossVV(n,l),v=g*s.A.CrossVV(e,i),y=g*s.A.CrossVV(i,t),x=g*s.A.CrossVV(t,e);if(a<=0&&h<=0)return this.m_v1.a=1,void(this.m_count=1);if(o>0&&a>0&&x<=0){const t=1/(o+a);return this.m_v1.a=o*t,this.m_v2.a=a*t,void(this.m_count=2)}if(u>0&&h>0&&y<=0){const t=1/(u+h);return this.m_v1.a=u*t,this.m_v3.a=h*t,this.m_count=2,void this.m_v2.Copy(this.m_v3)}if(o<=0&&_<=0)return this.m_v2.a=1,this.m_count=1,void this.m_v1.Copy(this.m_v2);if(u<=0&&f<=0)return this.m_v3.a=1,this.m_count=1,void this.m_v1.Copy(this.m_v3);if(f>0&&_>0&&v<=0){const t=1/(f+_);return this.m_v2.a=f*t,this.m_v3.a=_*t,this.m_count=2,void this.m_v1.Copy(this.m_v3)}const b=1/(v+y+x);this.m_v1.a=v*b,this.m_v2.a=y*b,this.m_v3.a=x*b,this.m_count=3}}p.s_e12=new s.A,p.s_e13=new s.A,p.s_e23=new s.A;const f=new p,_=[0,0,0],g=[0,0,0],v=new s.A,y=new s.A,x=new s.A,b=new s.A,A=new s.A;function w(t,e,i){++c;const r=i.proxyA,o=i.proxyB,a=i.transformA,l=i.transformB,d=f;d.ReadCache(e,r,a,o,l);const m=d.m_vertices,p=_,w=g;let S=0,C=n.x,B=C,V=0;for(;V<20;){S=d.m_count;for(let t=0;t<S;++t)p[t]=m[t].indexA,w[t]=m[t].indexB;switch(d.m_count){case 1:break;case 2:d.Solve2();break;case 3:d.Solve3()}if(3===d.m_count)break;C=B=d.GetClosestPoint(v).LengthSquared();const t=d.GetSearchDirection(y);if(t.LengthSquared()<n.s)break;const e=m[d.m_count];e.indexA=r.GetSupport(s.t.MulTRV(a.q,s.A.NegV(t,s.A.s_t0),b)),s.z.MulXV(a,r.GetVertex(e.indexA),e.wA),e.indexB=o.GetSupport(s.t.MulTRV(l.q,t,A)),s.z.MulXV(l,o.GetVertex(e.indexB),e.wB),s.A.SubVV(e.wB,e.wA,e.w),++V,++u;let i=!1;for(let t=0;t<S;++t)if(e.indexA===p[t]&&e.indexB===w[t]){i=!0;break}if(i)break;++d.m_count}if(h=Object(s.m)(h,V),d.GetWitnessPoints(t.pointA,t.pointB),t.distance=s.A.DistanceVV(t.pointA,t.pointB),t.iterations=V,d.WriteCache(e),i.useRadii){const e=r.m_radius,i=o.m_radius;if(t.distance>e+i&&t.distance>n.r){t.distance-=e+i;const n=s.A.SubVV(t.pointB,t.pointA,x);n.Normalize(),t.pointA.SelfMulAdd(e,n),t.pointB.SelfMulSub(i,n)}else{const e=s.A.MidVV(t.pointA,t.pointB,v);t.pointA.Copy(e),t.pointB.Copy(e),t.distance=0}}}},function(t,e,i){var n=i(15).f,s=i(29),r=i(13)("toStringTag");t.exports=function(t,e,i){t&&!s(t=i?t:t.prototype,r)&&n(t,r,{configurable:!0,value:e})}},function(t,e,i){var n=i(2),s=i(38),r=i(10),o=i(98),a="["+o+"]",l=RegExp("^"+a+a+"*"),c=RegExp(a+a+"*$"),u=function(t,e,i){var s={},a=r(function(){return!!o[t]()||"​"!="​"[t]()}),l=s[t]=a?e(h):o[t];i&&(s[i]=l),n(n.P+n.F*a,"String",s)},h=u.trim=function(t,e){return t=String(s(t)),1&e&&(t=t.replace(l,"")),2&e&&(t=t.replace(c,"")),t};t.exports=u},function(t,e){t.exports={}},function(t,e,i){var n=i(11);t.exports=function(t,e){if(!n(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,i){"use strict";i.d(e,"a",function(){return d}),i.d(e,"b",function(){return m});var n=i(3),s=(i(123),i(119),i(162),i(66),i(87),i(422),i(59));const r=Math.PI/180;let o=new n.b2Vec2;const a={width:25/$gv.CANVAS_SCALE,height:48/$gv.CANVAS_SCALE,density:1,get foot_width(){return.5*a.width},get foot_j_width(){return.4*a.width}};window.JUMP_FORCE=555,window.MOVEMENT_VELOCITY=125/$gv.CANVAS_SCALE,window.$LADDER_SPEED=125/$gv.CANVAS_SCALE,window.PLAYER_USE_WHEEL_WALKER=!1,window.FOOT_FRICTION=1,window.MOVEMENT_POWER=14e4,window.MOVEMENT_STOP_POWER=14e4,window.PORTAL_COOLDOWN=1e3;class l{constructor(){this._begin_jump=!1,this.jump=!0,this.jump_count=0,this._drop=!0,this.walk=!1,this.prone=!1,this.dropDown=!1,this._fly=!1,this.brake=!0,this.front=-1,this.ladder=!1,this.ladder_move_dir=0,this.invincible=0,this.freeze=!1,this.invokeSkill=!1,this.portal_cooldown=0,this.knockback=0,this.outOfControl=!1}}class c{constructor(t,e,i){this.foothold=t,this.position=e,this.priority=i}}class u{constructor(){this.disable=!1,this.chara_profile=Object.assign({},a),this.setMovementSpeed(100),this.body=null,this.foot_walk=null,this.walker=null,this._foothold=null,this.$foothold=null,this.prev_$fh=null,this._foot_at=new n.b2Vec2,this._foot_contact_list=[],this._foothold_priority=0,this.leave_$fh=null,this.portal=null,this.ladder=null,this._walker_omega=1,this.jump_force=JUMP_FORCE,this.state=new l}setPosition(t,e,i){const s=e-this.chara_profile.foot_width-.75*this.chara_profile.height*.5,r=e-this.chara_profile.foot_width;this.body.SetPositionXY(t,s);try{if(this.foot_walk&&this.foot_walk.SetPositionXY(t,r),i){const t=new n.b2Vec2(0,0);this.body.ConstantVelocity(t),this.foot_walk&&this.foot_walk.ConstantVelocity(t)}}catch(t){}}getPosition(){const t=this.foot_walk.GetPosition();return new n.b2Vec2(t.x,t.y+this.chara_profile.foot_width)}_usePortal(t){if(!t.enable||this.state.portal_cooldown>0)return!1;const e=t.mapRenderer,i=e.controller,n=t.getMap();if(t.exeScript)t.exeScript(this);else{if(!n)return console.log("portal: $o",t),!1;if(n==e.map_id){const i=t.tn.match(/(^[a-z_]+)(\d+$)/)||t.tn.match(/(^[a-z]+)\d+_\d+$/),n=i[1];if("hp"==n){let i=t.tn,n=e.portalMgr.portals.find(function(t){return i==t.pn});this._gotoPortal(n)}else{if("pt_go"!=n)return console.log(`portal.pn: ${t.pn}, portal.tn: ${t.tn}, %o`,t),!1;{const t=parseInt(i[2],10),n=e.portalMgr.portals[t];this._gotoPortal(n)}}}else i.doAfterStep(function(){e.unload(),e.load(n)})}return this.state.portal_cooldown=PORTAL_COOLDOWN,!0}_gotoPortal(t){t.mapRenderer.controller.doAfterStep(()=>{const e=t.x/$gv.CANVAS_SCALE,i=(t.y-3)/$gv.CANVAS_SCALE;this.setPosition(e,i,!0)})}contactLadder(t){this.ladder=t||null}leaveLadder(){this.body.m_world.onceUnlock(()=>{this._useLadder(!1),this.contactLadder(null,null)})}useLadder(t){this.body.m_world.onceUnlock(()=>{this._useLadder(t)})}_useLadder(t){const e=this.body.m_world;if(t){if(this.ladder&&!this.$ladder_pj){const t=this.ladder.body;(t.GetAngle()||t.GetAngularVelocity())&&(this.body.SetAngle(t.GetAngle()),this.body.SetFixedRotation(!1)),this.state.ladder=!0,this.state.jump=!1,this.state.jump_count=0,this.body.SetAwake(!0),this.body.SetLinearVelocity2(0,0),this.body.m_type=n.b2BodyType.b2_kinematicBody,this.foot_walk.SetAwake(!0),this.foot_walk.SetLinearVelocity2(0,0),this.foot_walk.m_type=n.b2BodyType.b2_kinematicBody,this.walker.SetMotorSpeed(0);let i=this.ladder.calcHeight()/$gv.CANVAS_SCALE;this.setPosition(t.GetPosition().x,this.getPosition().y);let s=new n.b2PrismaticJointDef;s.bodyA=t,s.bodyB=this.foot_walk,s.localAxisA.Set(0,1),s.lowerTranslation=-this.chara_profile.foot_width,s.upperTranslation=i+this.chara_profile.foot_width,s.enableLimit=!0,s.maxMotorForce=1e3*this._getMass();let r=e.CreateJoint(s);this.$ladder_pj=r}}else this.ladder&&this.state.ladder&&(this.state.ladder=!1,this.body.SetAwake(!0),this.body.SetLinearVelocity2(0,0),this.body.m_type=n.b2BodyType.b2_dynamicBody,this.foot_walk.SetAwake(!0),this.foot_walk.SetLinearVelocity2(0,0),this.foot_walk.m_type=n.b2BodyType.b2_dynamicBody),this.$ladder_pj&&(e.DestroyJoint(this.$ladder_pj),delete this.$ladder_pj,this.body.SetAngle(0),this.body.SetFixedRotation(!0))}actionJump(){this.state._begin_jump=!0,++this.state.jump_count}actionDropdown(){this.leave_$fh=this.$foothold,this.$foothold=null,this.state.dropDown=!0,this.body.SetAwake(!0)}control(t){if(this._isCanMove())if(this.state.ladder&&this.$ladder_pj){const e=this.ladder.body,i=window.$LADDER_SPEED||1;if(e&&(e.GetAngle()||e.GetAngularVelocity())&&(this.body.SetAngle(e.GetAngle()),this.body.SetFixedRotation(!1)),t.up&&!t.down?(this.state.ladder_move_dir=-1,this.$ladder_pj.EnableMotor(!0),this.$ladder_pj.SetMotorSpeed(-i)):t.down&&!t.up?(this.state.ladder_move_dir=1,this.$ladder_pj.EnableMotor(!0),this.$ladder_pj.SetMotorSpeed(i)):(this.state.ladder_move_dir=0,this.$ladder_pj.EnableMotor(!1),this.body.SetLinearVelocity2(0,0),this.foot_walk.SetLinearVelocity2(0,0)),t.jump){const e=this.body.m_world,n=this._getMass();t.left&&t.right?this.useLadder(!1):t.left?(this.useLadder(!1),e.doAfterStep(()=>{this.body.ApplyLinearImpulseToCenter2(-i*n,0)})):t.right&&(this.useLadder(!1),e.doAfterStep(()=>{this.body.ApplyLinearImpulseToCenter2(i*n,0)}))}}else if(this.$ladder_pj)this.useLadder(!1);else{if(this.state.outOfControl)return void this.walker.EnableMotor(!1);if(this.walker.EnableMotor(!0),this.portal&&t.up){let t=this.portal;if(this._usePortal(t))return void(this.portal=null)}if(this.ladder&&(t.down&&this.$foothold&&this.ladder.body.GetLocalPoint(this.getPosition(),o).y<=0||t.up&&!this.$foothold&&this.ladder.body.GetLocalPoint(this.getPosition(),o).y>0))return this.state.ladder_move_dir=0,void this.useLadder(!0);const e=this._walker_omega,i=this.body.GetLinearVelocity();if(this.state.jump||this.state.dropDown)this.state.prone=!1;else{if(t.down&&t.jump)return void this.actionDropdown();if(t.down)return void(this.state.prone=!0);this.state.prone=!1}if(t.left&&!t.right)this.state.walk=!0,this.state.front=-1,this.walker.SetMotorSpeed(-e),this.walker.SetMaxMotorTorque(MOVEMENT_POWER);else if(t.right&&!t.left)this.state.walk=!0,this.state.front=1,this.walker.SetMotorSpeed(e),this.walker.SetMaxMotorTorque(MOVEMENT_POWER);else{if(this.state.walk=!1,this.state.jump)this.walker.SetMotorSpeed(0);else{let t=i.x;t>50*n.b2_linearSlop?this.walker.SetMotorSpeed(-t*Math.PI/2/Math.PI/this.chara_profile.width/2):t<-50*n.b2_linearSlop?this.walker.SetMotorSpeed(-t*Math.PI/2/Math.PI/this.chara_profile.width/2):this.walker.SetMotorSpeed(0)}this.walker.SetMaxMotorTorque(MOVEMENT_STOP_POWER)}t.jump&&this._isCanJump()&&this.actionJump()}}_isCanJump(){return!this.state.jump&&!this.isDrop()}_isCanMove(){return!this.state.freeze&&!this.state.knockback}setMovementSpeed(t){if(!(Number.isSafeInteger(t)||!Number.isNaN(t)&&Number.isFinite(t)))throw new TypeError("increment_percent must is number");let e=(100+t)/100;e>0?this._setWalkerOmegaFromVelocity(MOVEMENT_VELOCITY*e):this._setWalkerOmegaFromVelocity(0)}setMovementSpeedPixel(t){let e=t/$gv.CANVAS_SCALE;this._walker_omega=e>0?e:0}_setWalkerOmegaFromVelocity(t){this._walker_omega=t/(Math.PI*this.chara_profile.width)*Math.PI}setjumpForce(t){if(!(Number.isSafeInteger(t)||!Number.isNaN(t)&&Number.isFinite(t)))throw new TypeError("increment_percent must is number");let e=(100+t)/100;if(e<=0)this.jump_force=0;else{this.body.GetWorld().GetGravity();this.jump_force=JUMP_FORCE*e}}_getMass(){return this.body.GetMass()+this.foot_walk.GetMass()}setGravityScale(t){this.body.SetGravityScale(t),this.foot_walk.SetGravityScale(t)}get _body_category(){return"body"}_create(t){let e=new n.b2Vec2(1/$gv.CANVAS_SCALE,-2/$gv.CANVAS_SCALE),i=e.y+.75*this.chara_profile.height*.5,o=new n.b2BodyDef,a=new n.b2FixtureDef,l=new n.b2PolygonShape;o.type=n.b2BodyType.b2_dynamicBody,o.bullet=!0,o.position.Set(e.x,e.y),o.userData=this,a.userData=this,this.body=t.CreateBody(o),this.body.SetFixedRotation(!0),this.body.$type="player",a.filter.Copy(s.FilterHelper.get(this._body_category)),l.SetAsBox(.5*this.chara_profile.width,.75*this.chara_profile.height*.5,n.b2Vec2.ZERO,0),a.density=this.chara_profile.density,a.friction=0,a.restitution=0,a.shape=l,this.fixture=this.body.CreateFixture(a),this.fixture.$type="player",a.filter.Copy(s.FilterHelper.get("foot"));{o.type=n.b2BodyType.b2_dynamicBody,o.position.Set(e.x,i),this.foot_walk=t.CreateBody(o);let s=new n.b2CircleShape;s.m_p.Set(0,0),s.m_radius=this.chara_profile.foot_width,a.shape=s,a.density=this.chara_profile.density,a.friction=FOOT_FRICTION,a.restitution=0;let r=this.foot_walk.CreateFixture(a);r.$type="pl_ft_walk",this._set_foot_listener(r)}this.foot_walk.$type="pl_ft_walk";{let s;(s=PLAYER_USE_WHEEL_WALKER?new n.b2WheelJointDef:new n.b2RevoluteJointDef)instanceof n.b2RevoluteJointDef&&s.Initialize(this.body,this.foot_walk,new n.b2Vec2(e.x,i)),s instanceof n.b2WheelJointDef&&s.Initialize(this.body,this.foot_walk,new n.b2Vec2(e.x,i),new n.b2Vec2(0,-1)),s.enableMotor=!0,s.maxMotorTorque=MOVEMENT_POWER,s instanceof n.b2RevoluteJointDef&&(s.enableLimit=!1,s.lowerAngle=0*r,s.upperAngle=-0*r,s.referenceAngle=0),s instanceof n.b2WheelJointDef&&(s.frequencyHz=10,s.dampingRatio=1),this.walker=t.CreateJoint(s)}this.body.addStep(this.Step.bind(this)),this.body.addAfterStep(this.AfterStep.bind(this)),this.setMovementSpeed(0),this.setjumpForce(0)}_destroy(t){this.body?(t.DestroyBody(this.body),this.body=null):console.log("this already dead"),this.foot_walk&&(t.DestroyBody(this.foot_walk),this.foot_walk=null)}_isFromSelfContact(t,e){let i=t.GetBody().GetUserData(),n=e.GetBody().GetUserData();return!!(i&&n&&i.body&&n.body&&i.body==n.body)}_ignoreSelfContact(t,e,i){return!!this._isFromSelfContact(e,i)&&(t.SetEnabled(!1),!0)}_set_foot_listener(t){t.beginContact=this.__beginContact_walker,t.endContact=this.__endContact_walker,t.preSolve=this.__preSolve_walker}__beginContact_walker(t,e,i){if(this._ignoreSelfContact(t,e,i))return;let n=i.GetUserData();if(n)switch(n.constructor.name){case"MapPortal":this._beginContactPortal(n)}}__endContact_walker(t,e,i){if(this._ignoreSelfContact(t,e,i))return;let n=i.GetUserData();if(n)switch(n.constructor.name){case"MapPortal":this._endContactPortal(n)}}__preSolve_walker(t,e,i,n){this._ignoreSelfContact(t,i,n)||"pl_ft_walk"!=i.$type||"pl_ft_walk"!=n.$type||t.SetEnabled(!1)}_beginContactPortal(t){this.portal=t,t.enable?t.script?console.log("goto map: "+t.getMap()+"; "+t.script):console.log("goto map: "+t.getMap()):console.log("contact portal: %o"+t)}_endContactPortal(t){this.portal==t&&(this.portal=null)}__priority_foothold_contact(t,e){if(t.is_wall)return 0;if(this.$foothold!=t&&!this.state.dropDown&&this._foot_at&&e.y<this._foot_at.y){if(!this.$foothold)return 2;if(!(this.$foothold.prev==t.id&&t.y1<this.$foothold.y1||this.$foothold.next==t.id&&t.y2<this.$foothold.y2))return 1}return 3}_which_foothold_contact(t,e){if(t.is_wall)return!0;let i=this.__priority_foothold_contact(t,e);if(i>0){if(!this._foothold_priority||i>=this._foothold_priority)return this._foothold=t,this._foot_at=e.Clone(),this._foothold_priority=i,!0;{let n=new c(t,e,i);this._foot_contact_list.push(n)}}return!1}isDrop(){return this.state.dropDown||this.state._drop}_endContactFoothold(){for(let t=0;t<this._endContactFootholdList.length;++t){let e=this._endContactFootholdList[t];e==this._$fallEdge?this._$fallEdge=null:e==this._foothold&&(this._foothold=null,this._foot_at=null),this.$foothold&&e==this.$foothold&&(this.prev_$fh=this.$foothold,this.$foothold=null),this.leave_$fh&&this.leave_$fh==e&&(this.leave_$fh=null)}this._endContactFootholdList.length=0}Step(t){if(this.state._drop=!1,this._foothold=null,this._foot_at=null,this._foot_contact_list.length&&(this._foot_contact_list.length=0),this.state.ladder)this.state.jump=!1,this.state.jump_count=0;else{if(this.state._begin_jump){const t=this._getMass(),e=new n.b2Vec2(0,-t*this.jump_force);this.body.ApplyForceToCenter(e)}this.state.knockback>0&&(this.state.knockback-=t,this.state.knockback>0?(this.state.outOfControl=!0,this.walker.EnableMotor(!1)):(this.state.knockback=0,this.state.outOfControl=!1,this.walker.EnableMotor(!0))),this.state.invincible>0&&(this.state.invincible-=t,this.state.invincible>0||(this.state.invincible=0)),this.state.portal_cooldown&&(this.state.portal_cooldown-=t,this.state.portal_cooldown>0||(this.state.portal_cooldown=0))}}AfterStep(){if(this.state.ladder){if(this.$ladder_pj){const t=this.$ladder_pj.GetUpperLimit(),e=this.$ladder_pj.GetLowerLimit(),i=this.$ladder_pj.GetJointTranslation();this.state.ladder_move_dir>0&&i>t?this.useLadder(!1):this.state.ladder_move_dir<0&&i<e&&this.useLadder(!1)}}else{if(!this.state.dropDown)if(this._foothold)this.$foothold=this._foothold;else if(this._foot_contact_list.length){let t=this._foot_contact_list.reduce((t,e)=>e.priority>t.priority?e:t,{priority:0});this.$foothold=t.foothold,this._foothold=t.foothold,this._foot_at=t.position,this._foothold_priority=t.priority}this.$foothold?(this.state.jump=!1,this.state.jump_count=0,this.$foothold,this._foothold):(this.state.jump=!0,this.state._begin_jump=!1,this._foothold)}}getLayer(){let t=this.$foothold?this.$foothold.layer:this.prev_$fh?this.prev_$fh.layer:this.leave_$fh?this.leave_$fh.layer:5;return this.state.ladder?t+1:t}}class h extends u{constructor(){super(...arguments),this.chara=null}forceMove(t,e){const i=this._getMass(),s=new n.b2Vec2(t*i,e*i);this.body.ApplyLinearImpulseToCenter(s)}knockback(t,e,i=1e3){let n,s;n=-t*this.state.front,s=-e,this.forceMove(n,s),this.state.knockback=i,this.state.outOfControl=!0}_create_anchor(t){let e=new n.b2MouseJointDef;return e.bodyA=t.ground.bodies[0],e.bodyB=this.body,e.target.Copy(this.getPosition()),e.maxForce=1e3*this._getMass(),t.CreateJoint(e)}moveTo(t){const e=this.body;if(0==t.elapsed)e.ConstantVelocityWorldCenter2(vx,vy);else{const i=.7,n=1-i;let s,r,o=t.x-pos.x,a=t.y-pos.y,l=o/(t.elapsed/$gv.FRAME_ELAPSED),c=a/(t.elapsed/$gv.FRAME_ELAPSED),u=e.GetLinearVelocity();t.pState.jump?this.setGravityScale(0):(this.setGravityScale(1),t.pState.walk||l?this.walker.EnableMotor(!1):this.walker.EnableMotor(!0)),s=l?t.vx?Math.sign(t.vx)==Math.sign(l)?u.x*n+t.vx*i:u.x*n+l*i:l:0,r=c?t.vy?Math.sign(t.vy)==Math.sign(c)?u.y*n+t.vy*i:u.y*n+c*i:c:0,e.ConstantVelocityWorldCenter2(s,r)}}}class d extends h{constructor(){super(...arguments)}_create(t){super._create(t),window.SCREEN_PRINTLN(()=>"x",()=>this.getPosition().x.toFixed(3)+" * "+$gv.CANVAS_SCALE+" = "+(this.getPosition().x*$gv.CANVAS_SCALE).toFixed(0)),window.SCREEN_PRINTLN(()=>"y",()=>this.getPosition().y.toFixed(3)+" * "+$gv.CANVAS_SCALE+" = "+(this.getPosition().y*$gv.CANVAS_SCALE).toFixed(0)),window.SCREEN_PRINTLN(()=>"jump",()=>this.state.jump),window.SCREEN_PRINTLN(()=>"_drop",()=>this.state._drop),window.SCREEN_PRINTLN(()=>"ddrop",()=>this.state.dropDown),window.SCREEN_PRINTLN(()=>"$fh",()=>this.$foothold?this.$foothold.id:null),window.SCREEN_PRINTLN(()=>"$fh->c",()=>this.$foothold?this.$foothold.chain:null),window.SCREEN_PRINTLN(()=>"_fh",()=>this._foothold?this._foothold.id:null),window.SCREEN_PRINTLN(()=>"p$fh",()=>this.prev_$fh?this.prev_$fh.id:null),window.SCREEN_PRINTLN(()=>"leave_$fh",()=>this.leave_$fh?this.leave_$fh.id:null),window.SCREEN_PRINTLN(()=>"(jump && !$fh)",()=>this.state.jump&&!this.$foothold),window.SCREEN_PRINTLN(()=>"vel.x",()=>(this.body.m_linearVelocity.x*$gv.CANVAS_SCALE).toFixed(0)),window.SCREEN_PRINTLN(()=>"vel.y",()=>(this.body.m_linearVelocity.y*$gv.CANVAS_SCALE).toFixed(0))}Step(t){if(super.Step(t),1!=$gv.input_keyDown.B||$gv.mouse_dl){if($gv.input_keyDown.B>0&&$gv.mouse_dl){const t=$gv.m_viewRect.center,e=$gv.m_viewRect.left+$gv.mouse_x-t.x,i=$gv.m_viewRect.top+$gv.mouse_y-t.y;this.body.SetLinearVelocity(new n.b2Vec2(e/$gv.CANVAS_SCALE,i/$gv.CANVAS_SCALE)),this.foot_walk.SetLinearVelocity(new n.b2Vec2(e/$gv.CANVAS_SCALE,i/$gv.CANVAS_SCALE))}else if($gv.mouse_dm&&$gv.mouse_dm%12==1){const t=$gv.m_viewRect.left+$gv.mouse_x,e=$gv.m_viewRect.top+$gv.mouse_y;this.setPosition(t/$gv.CANVAS_SCALE,e/$gv.CANVAS_SCALE,!0)}}else{const t=$gv.m_viewRect.left+$gv.mouse_x,e=$gv.m_viewRect.top+$gv.mouse_y;this.setPosition(t/$gv.CANVAS_SCALE,e/$gv.CANVAS_SCALE,!0)}}get renderer(){return this._$renderer}set renderer(t){this._$renderer=t}}class m extends h{constructor(){super(...arguments),this._anchor=null}_create(t){super._create(t),window.$io?this._anchor=this._create_anchor(t):this.moveTo=super.moveTo}moveTo(t){this._anchor.m_targetA.x=t.x,this._anchor.m_targetA.y=t.y}}},function(t,e,i){"use strict";i.d(e,"a",function(){return n});i(18),i(65);class n{constructor(){this.$objectid=null,this.$layer=null,this.$physics=null,Object.defineProperty(this,"$physics",{configurable:!0,enumerable:!1,writable:!0,value:null}),this.renderer=null}create(){}destroy(){}set enablePhysics(t){this.$physics&&(this.$physics.enable=t,this.$physics.state.freeze=!t)}get enablePhysics(){return!!this.$physics&&this.$physics.enable}_applyState(){throw new Error("Not implement")}update(t){this.renderer.update(t)}render(t){this.renderer.render(t)}damage(t,e){console.log(this.$objectid+" 被 "+t.$objectid+" 攻擊，減少 "+e+" HP")}knockback(t,e,i){}__drawName(t,e){const i=t.ctx,n=this.renderer;i.font="12px 微軟正黑體",i.textBaseline="middle",i.textAlign="start";const s=i.measureText(e).width+3,r=Math.trunc(n.x)-.5*s,o=Math.trunc(n.y),a=r+2,l=r,c=o,u=o+2,h=r+s,d=h+2,m=o+2+12+2,p=o+2+12;i.fillStyle="rgba(0,0,0,0.7)",i.strokeStyle="rgba(0,0,0,0.7)",i.beginPath(),i.moveTo(a,c),i.lineTo(h,c),i.arcTo(d,c,d,u,2),i.lineTo(d,p),i.arcTo(d,m,h,m,2),i.lineTo(a,m),i.arcTo(l,m,l,p,2),i.lineTo(l,u),i.arcTo(l,c,a,c,2),i.fill(),i.fillStyle="white",i.strokeStyle="white",i.fillText(e,a,.5*(c+m))}}},function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e,i){var n=i(35);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,i){var n=i(35),s=i(13)("toStringTag"),r="Arguments"==n(function(){return arguments}());t.exports=function(t){var e,i,o;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),s))?i:r?n(e):"Object"==(o=n(e))&&"function"==typeof e.callee?"Arguments":o}},function(t,e,i){var n=i(33),s=i(9),r=s["__core-js_shared__"]||(s["__core-js_shared__"]={});(t.exports=function(t,e){return r[t]||(r[t]=void 0!==e?e:{})})("versions",[]).push({version:n.version,mode:i(45)?"pure":"global",copyright:"© 2018 Denis Pushkarev (zloirock.ru)"})},function(t,e,i){var n=i(30),s=i(16),r=i(52);t.exports=function(t){return function(e,i,o){var a,l=n(e),c=s(l.length),u=r(o,c);if(t&&i!=i){for(;c>u;)if((a=l[u++])!=a)return!0}else for(;c>u;u++)if((t||u in l)&&l[u]===i)return t||u||0;return!t&&-1}}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,i){var n=i(35);t.exports=Array.isArray||function(t){return"Array"==n(t)}},function(t,e,i){var n=i(11),s=i(35),r=i(13)("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[r])?!!e:"RegExp"==s(t))}},function(t,e,i){var n=i(13)("iterator"),s=!1;try{var r=[7][n]();r.return=function(){s=!0},Array.from(r,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!s)return!1;var i=!1;try{var r=[7],o=r[n]();o.next=function(){return{done:i=!0}},r[n]=function(){return o},t(r)}catch(t){}return i}},function(t,e,i){"use strict";var n=i(8);t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,i){"use strict";var n=i(26),s=i(27),r=i(10),o=i(38),a=i(13);t.exports=function(t,e,i){var l=a(t),c=i(o,l,""[t]),u=c[0],h=c[1];r(function(){var e={};return e[l]=function(){return 7},7!=""[t](e)})&&(s(String.prototype,t,u),n(RegExp.prototype,l,2==e?function(t,e){return h.call(t,this,e)}:function(t){return h.call(t,this)}))}},function(t,e,i){var n=i(8),s=i(24),r=i(13)("species");t.exports=function(t,e){var i,o=n(t).constructor;return void 0===o||void 0==(i=n(o)[r])?e:s(i)}},function(t,e,i){var n=i(9).navigator;t.exports=n&&n.userAgent||""},function(t,e,i){"use strict";var n=i(9),s=i(2),r=i(27),o=i(58),a=i(44),l=i(57),c=i(56),u=i(11),h=i(10),d=i(76),m=i(61),p=i(99);t.exports=function(t,e,i,f,_,g){var v=n[t],y=v,x=_?"set":"add",b=y&&y.prototype,A={},w=function(t){var e=b[t];r(b,t,"delete"==t?function(t){return!(g&&!u(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!u(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!u(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,i){return e.call(this,0===t?0:t,i),this})};if("function"==typeof y&&(g||b.forEach&&!h(function(){(new y).entries().next()}))){var S=new y,C=S[x](g?{}:-0,1)!=S,B=h(function(){S.has(1)}),V=d(function(t){new y(t)}),M=!g&&h(function(){for(var t=new y,e=5;e--;)t[x](e,e);return!t.has(-0)});V||((y=e(function(e,i){c(e,y,t);var n=p(new v,e,y);return void 0!=i&&l(i,_,n[x],n),n})).prototype=b,b.constructor=y),(B||M)&&(w("delete"),w("has"),_&&w("get")),(M||C)&&w(x),g&&b.clear&&delete b.clear}else y=f.getConstructor(e,t,_,x),o(y.prototype,i),a.NEED=!0;return m(y,t),A[t]=y,s(s.G+s.W+s.F*(y!=v),A),g||f.setStrong(y,t,_),y}},function(t,e,i){for(var n,s=i(9),r=i(26),o=i(50),a=o("typed_array"),l=o("view"),c=!(!s.ArrayBuffer||!s.DataView),u=c,h=0,d="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");h<9;)(n=s[d[h++]])?(r(n.prototype,a,!0),r(n.prototype,l,!0)):u=!1;t.exports={ABV:c,CONSTR:u,TYPED:a,VIEW:l}},function(t,e,i){"use strict";t.exports=i(45)||!i(10)(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete i(9)[t]})},function(t,e,i){"use strict";var n=i(2);t.exports=function(t){n(n.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},function(t,e,i){"use strict";var n=i(2),s=i(24),r=i(34),o=i(57);t.exports=function(t){n(n.S,t,{from:function(t){var e,i,n,a,l=arguments[1];return s(this),(e=void 0!==l)&&s(l),void 0==t?new this:(i=[],e?(n=0,a=r(l,arguments[2],2),o(t,!1,function(t){i.push(a(t,n++))})):o(t,!1,i.push,i),new this(i))}})}},function(t,e,i){var n,s,r;
/*!
 * jQuery UI Widget 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */s=[i(20),i(25)],void 0===(r="function"==typeof(n=function(t){var e=0,i=Array.prototype.slice;return t.cleanData=function(e){return function(i){var n,s,r;for(r=0;null!=(s=i[r]);r++)try{(n=t._data(s,"events"))&&n.remove&&t(s).triggerHandler("remove")}catch(t){}e(i)}}(t.cleanData),t.widget=function(e,i,n){var s,r,o,a={},l=e.split(".")[0],c=l+"-"+(e=e.split(".")[1]);return n||(n=i,i=t.Widget),t.isArray(n)&&(n=t.extend.apply(null,[{}].concat(n))),t.expr[":"][c.toLowerCase()]=function(e){return!!t.data(e,c)},t[l]=t[l]||{},s=t[l][e],r=t[l][e]=function(t,e){if(!this._createWidget)return new r(t,e);arguments.length&&this._createWidget(t,e)},t.extend(r,s,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),(o=new i).options=t.widget.extend({},o.options),t.each(n,function(e,n){t.isFunction(n)?a[e]=function(){function t(){return i.prototype[e].apply(this,arguments)}function s(t){return i.prototype[e].apply(this,t)}return function(){var e,i=this._super,r=this._superApply;return this._super=t,this._superApply=s,e=n.apply(this,arguments),this._super=i,this._superApply=r,e}}():a[e]=n}),r.prototype=t.widget.extend(o,{widgetEventPrefix:s&&o.widgetEventPrefix||e},a,{constructor:r,namespace:l,widgetName:e,widgetFullName:c}),s?(t.each(s._childConstructors,function(e,i){var n=i.prototype;t.widget(n.namespace+"."+n.widgetName,r,i._proto)}),delete s._childConstructors):i._childConstructors.push(r),t.widget.bridge(e,r),r},t.widget.extend=function(e){for(var n,s,r=i.call(arguments,1),o=0,a=r.length;o<a;o++)for(n in r[o])s=r[o][n],r[o].hasOwnProperty(n)&&void 0!==s&&(t.isPlainObject(s)?e[n]=t.isPlainObject(e[n])?t.widget.extend({},e[n],s):t.widget.extend({},s):e[n]=s);return e},t.widget.bridge=function(e,n){var s=n.prototype.widgetFullName||e;t.fn[e]=function(r){var o="string"==typeof r,a=i.call(arguments,1),l=this;return o?this.length||"instance"!==r?this.each(function(){var i,n=t.data(this,s);return"instance"===r?(l=n,!1):n?t.isFunction(n[r])&&"_"!==r.charAt(0)?(i=n[r].apply(n,a))!==n&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0:t.error("no such method '"+r+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+r+"'")}):l=void 0:(a.length&&(r=t.widget.extend.apply(null,[r].concat(a))),this.each(function(){var e=t.data(this,s);e?(e.option(r||{}),e._init&&e._init()):t.data(this,s,new n(r,this))})),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(i,n){n=t(n||this.defaultElement||this)[0],this.element=t(n),this.uuid=e++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),this.classesElementLookup={},n!==this&&(t.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===n&&this.destroy()}}),this.document=t(n.style?n.ownerDocument:n.document||n),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),i),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){var e=this;this._destroy(),t.each(this.classesElementLookup,function(t,i){e._removeClass(i,t)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var n,s,r,o=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(o={},e=(n=e.split(".")).shift(),n.length){for(s=o[e]=t.widget.extend({},this.options[e]),r=0;r<n.length-1;r++)s[n[r]]=s[n[r]]||{},s=s[n[r]];if(e=n.pop(),1===arguments.length)return void 0===s[e]?null:s[e];s[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];o[e]=i}return this._setOptions(o),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return"classes"===t&&this._setOptionClasses(e),this.options[t]=e,"disabled"===t&&this._setOptionDisabled(e),this},_setOptionClasses:function(e){var i,n,s;for(i in e)s=this.classesElementLookup[i],e[i]!==this.options.classes[i]&&s&&s.length&&(n=t(s.get()),this._removeClass(s,i),n.addClass(this._classes({element:n,keys:i,classes:e,add:!0})))},_setOptionDisabled:function(t){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!t),t&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(e){var i=[],n=this;function s(s,r){var o,a;for(a=0;a<s.length;a++)o=n.classesElementLookup[s[a]]||t(),o=e.add?t(t.unique(o.get().concat(e.element.get()))):t(o.not(e.element).get()),n.classesElementLookup[s[a]]=o,i.push(s[a]),r&&e.classes[s[a]]&&i.push(e.classes[s[a]])}return e=t.extend({element:this.element,classes:this.options.classes||{}},e),this._on(e.element,{remove:"_untrackClassesElement"}),e.keys&&s(e.keys.match(/\S+/g)||[],!0),e.extra&&s(e.extra.match(/\S+/g)||[]),i.join(" ")},_untrackClassesElement:function(e){var i=this;t.each(i.classesElementLookup,function(n,s){-1!==t.inArray(e.target,s)&&(i.classesElementLookup[n]=t(s.not(e.target).get()))})},_removeClass:function(t,e,i){return this._toggleClass(t,e,i,!1)},_addClass:function(t,e,i){return this._toggleClass(t,e,i,!0)},_toggleClass:function(t,e,i,n){n="boolean"==typeof n?n:i;var s="string"==typeof t||null===t,r={extra:s?e:i,keys:s?t:e,element:s?this.element:t,add:n};return r.element.toggleClass(this._classes(r),n),this},_on:function(e,i,n){var s,r=this;"boolean"!=typeof e&&(n=i,i=e,e=!1),n?(i=s=t(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,s=this.widget()),t.each(n,function(n,o){function a(){if(e||!0!==r.options.disabled&&!t(this).hasClass("ui-state-disabled"))return("string"==typeof o?r[o]:o).apply(r,arguments)}"string"!=typeof o&&(a.guid=o.guid=o.guid||a.guid||t.guid++);var l=n.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+r.eventNamespace,u=l[2];u?s.on(c,u,a):i.on(c,a)})},_off:function(e,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.off(i).off(i),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){var i=this;return setTimeout(function(){return("string"==typeof t?i[t]:t).apply(i,arguments)},e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){this._addClass(t(e.currentTarget),null,"ui-state-hover")},mouseleave:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){this._addClass(t(e.currentTarget),null,"ui-state-focus")},focusout:function(e){this._removeClass(t(e.currentTarget),null,"ui-state-focus")}})},_trigger:function(e,i,n){var s,r,o=this.options[e];if(n=n||{},(i=t.Event(i)).type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],r=i.originalEvent)for(s in r)s in i||(i[s]=r[s]);return this.element.trigger(i,n),!(t.isFunction(o)&&!1===o.apply(this.element[0],[i].concat(n))||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(n,s,r){var o;"string"==typeof s&&(s={effect:s});var a=s?!0===s||"number"==typeof s?i:s.effect||i:e;"number"==typeof(s=s||{})&&(s={duration:s}),o=!t.isEmptyObject(s),s.complete=r,s.delay&&n.delay(s.delay),o&&t.effects&&t.effects.effect[a]?n[e](s):a!==e&&n[a]?n[a](s.duration,s.easing,r):n.queue(function(i){t(this)[e](),r&&r.call(n[0]),i()})}}),t.widget})?n.apply(e,s):n)||(t.exports=r)},function(t,e,i){"use strict";var n=i(88),s=i(6),r=i(18),o=(i(7),i(17)),a=i(163);window.MobAnimationSpeed=1,window.$mob_name={};class l extends a.a{constructor(){super()}static get __info(){return{noFlip:1,level:230,maxHP:"??????",maxMP:1e5,speed:0,PADamage:22e3,PDRate:300,MADamage:24e3,MDRate:30,acc:9999,eva:750,pushed:1e9,fs:10,summonType:1,category:1,elemAttr:"P2H2F2I2S2L2D2",mobType:"3N",firstAttack:1,hideHP:1,boss:1,hpTagColor:1,hpTagBgcolor:5,showNotRemoteDam:1,defaultHP:"측정불가",defaultMP:"측정불가",ignoreMoveImpact:1}}static async loadDescription(t){if(!l._desc[t]){let e=[l._get_desc_base_path(),Number(t)].join("/"),i=await $get.data(e);return l._desc[t]=i,i}return l._desc[t]}async load(t){return await super.load.apply(this,arguments)}isFlyMob(){return!!this._raw.flySpeed}_getFirstAttackName(){return"skill"+this._raw.info.firstAttack}update(t){t*=window.MobAnimationSpeed,super.update(t)}static get _animations(){return['"stand"','"fly"','"move"','"jump"',"`hit${$index}`","`die${$index}`","`skill${$index}`"]}static _get_desc_base_path(){return"/String/Mob"}static get _base_path(){return"/Mob"}}l._desc={},window.NpcAnimationSpeed=1;class c extends a.a{constructor(){super()}static async loadDescription(t){if(!c._desc[t]){let e=[c._get_desc_base_path(),Number(t)].join("/"),i=await $get.data(e);return c._desc[t]=i,i}return c._desc[t]}update(t){t*=window.NpcAnimationSpeed,super.update(t)}static get _animations(){return['"stand"']}static _get_desc_base_path(){return"/String/Npc"}static get _base_path(){return"/Npc"}}function u(t,e){return t-e+Math.random()*e*2}function h(t,e){const i=r.a.fromInt24(t),n=r.a.fromInt24(e),s=Math.max(0,Math.min(u(i.r,n.r),255)),o=Math.max(0,Math.min(u(i.g,n.g),255)),a=Math.max(0,Math.min(u(i.b,n.b),255));return new r.a(s,o,a)}c._desc={};class d{constructor(t){this._initParam(t),this.life=0,this.pos=new s.c(0,0),this.opacity=1,this.scale=this.startScale,this.color=new r.a(255,255,255)}_initParam(t){this.lifeMax=u(t.life,t.lifeVar);const e=u(t.angle,t.angleVar)*Math.PI/180;this.startColor=h(t.startColor,t.startColorVar),this.color_d=h(t.endColor,t.endColorVar).selfSub(this.startColor);const i=Math.max(1,t.texture.width),n=Math.max(1,t.texture.height),r=1==i?n:1==n?1:Math.min(i,n);this.startScale=u(t.startSize,t.startSizeVar)/r;const o=u(t.endSize,t.endSizeVar)/r;if(this.scale_d=o-this.startScale,this.startX=u(t.posX,t.posVarX),this.startY=u(t.posY,t.posVarY),this.emitterMode=t.emitterType?1:0,this.emitterMode)1==this.emitterMode&&alert("Particle.EMITTER_MODE.RADIUS");else{this.gravity=new s.c(t.GRAVITY.x,t.GRAVITY.y);const i=u(t.GRAVITY.speed,t.GRAVITY.speedVar);this.dir=new s.c(Math.cos(e)*i,-Math.sin(e)*i),this.radialAccel=u(t.GRAVITY.radialAccel||0,t.GRAVITY.radialAccelVar||0),this.tangentialAccel=u(t.GRAVITY.tangentialAccel||0,t.GRAVITY.tangentialAccelVar||0),this.rotationIsDir=!!t.GRAVITY.rotationIsDir}}update(t){const e=t/1e3,i=Math.max(0,Math.min(this.life/this.lifeMax,1));{let t,i=(t=this.pos.x||this.pos.y?new s.c(this.pos.x,this.pos.y).normalize():new s.c(0,0)).clone();t=t.mul(this.radialAccel);let n=i.x;i.x=-i.y,i.y=n,i=i.mul(this.tangentialAccel);let r=t.add(i);r=(r=r.add(this.gravity)).mul(e),this.dir=this.dir.add(r);let o=this.dir.mul(e);this.pos=this.pos.add(o)}this.scale=Math.max(0,this.startScale+this.scale_d*i),this.color=r.a.add(this.startColor,r.a.scale(this.color_d,i)),this.opacity=1-i,this.life+=t}isEnd(){return this.life>=this.lifeMax}draw(t,e,i,n){const s=this.scale,r=this.startX+this.pos.x+i,o=this.startY+this.pos.y+n;t.globalAlpha=this.opacity;let a=this.color.toHSV();t.drawColoredGraph2(e,r,o,s,s,a)}}class m{constructor(){this.GRAVITY=new s.c,this.life=0,this.lifeVar=0,this.duration=0,this.totalParticle=0}}class p extends m{constructor(){super(),this.x=0,this.y=0,this.particles=[],this.time=0,this.delta=0,this.delay=1/0,this.duration=-1}clone(){let t=new p;return Object.assign(t,this),t.particles=[],t.time=0,t.delta=0,t}evaluate(){let t=this.totalParticle*this.delay;for(let e=0;e<this.totalParticle;++e){const i=new d(this),n=t-e*this.delay;i.life+=n,i.update(n),i.life=n,this.particles.push(i)}}async load(t){this.particleName=t;let e=await $get.data(this._particle_path);if(Object.assign(this,e),this.GRAVITY.x=e.GRAVITY.x,this.GRAVITY.y=e.GRAVITY.y,this.life=1e3*e.life,this.lifeVar=1e3*e.lifeVar,this.duration=1e3*e.duration,this.delay=this.life/this.totalParticle,_experimental_particle){const t=this;return new Promise(function(i,n){let s=new Image;s.onload=function(){let n=new o.a(e.texture);!0===_experimental_particle?n._url=function(t){let e=new r.d,i=e.imageToImagedata(t);for(let t=0;t<i.height;++t)for(let e=0;e<4*i.width;++e)i.data[t*i.width*4+4*e+1]=0,i.data[t*i.width*4+4*e+2]=0;return e.imagedataToDataURL(i)}(this):n._url="data:image/svg+xml;utf-8,"+encodeURIComponent(`\n<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="${this.naturalWidth}" height="${this.naturalHeight}">\n\t<defs>\n\t\t<mask id="Mask">\n\t\t\t<image xlink:href="${new URL("images"+t._texture_base_path,window.location).href}"/>\n\t\t</mask>\n\t</defs>\n\t<g>\n\t\t<rect width="${this.naturalWidth}" height="${this.naturalHeight}" fill="red" mask="url(#Mask)"/>\n\t</g>\n</svg>`),t.texture=n,i()},s.src="images"+t._texture_base_path})}this.texture=new o.a(e.texture),this.texture._url="images"+this._texture_base_path}update(t){this.particles.length<this.totalParticle&&(!this.time||this.time>this.delay)&&(this.particles.push(new d(this)),this.time=0);for(let e=0;e<this.particles.length;++e){const i=this.particles[e];i.isEnd()?this.particles.splice(e,1):i.update(t)}this.time+=t,this.delta+=t}isEnd(){return this.delta>this.duration&&-1!=this.duration}render(t,e,i,n){const s=t.ctx;t.ctx.setTransform(1,0,0,1,Math.trunc(-$gv.m_viewRect.x),Math.trunc(-$gv.m_viewRect.y)),6==this.blendFuncDst&&5==this.blendFuncSrc||(s.globalCompositeOperation="lighter");for(let s=0;s<this.particles.length;++s){const r=this.particles[s],o=this.x+i,a=this.y+n,l=this.texture.width*r.scale,c=this.texture.height*r.scale;e&&!e.collide4f2(o+r.startX+r.pos.x,a+r.startY+r.pos.y,l,c)||r.draw(t,this.texture,o,a)}s.globalCompositeOperation="source-over",t.globalAlpha=1}get _particle_path(){return["/Effect/particle",this.particleName].join("/")}get _texture_base_path(){return[this._particle_path,"texture"].join("/")}}var f=i(119),_=(i(421),i(423),i(66));i.d(e,"a",function(){return I}),i.d(e,"b",function(){return D}),i.d(e,"c",function(){return R}),window.enable_skeletal_anim=!0;const g={Back:{},Obj:{},Tile:{}};async function v(t,e){if(!g[t][e]){let i=`/Map/${t}/${e}`;g[t][e]=await $get.data(i),null==g[t][e]&&console.warn("Empty package: "+i)}if(g[t][e])return g[t][e]}window.$map_sprite=g,$gv.allQuest={};class y extends o.a{constructor(t,e,i){super(t,e),i=i||y.raw_default,this.a0=this._get(-1,"a0",Number),this.a1=this._get(-1,"a1",Number),this.movetype=this._get(i.movetype,"moveType",Number),this.movew=this._get(i.movew,"moveW",Number),this.moveh=this._get(i.moveh,"moveH",Number),this.movep=this._get(i.movep,"moveP",Number),this.mover=this._get(i.mover,"moveR",Number)}draw(t,e,i,n,s,r){let o=s/this.delay,a=0<=this.a0||0<=this.a1?(0>this.a0?0:this.a0)*(1-o)+(0>this.a1?0:this.a1)*o:255,l=0;switch(this.movetype){case 1:i+=this.movew*Math.sin(0==this.movep?r/1e3:2*r*Math.PI/this.movep);break;case 2:n+=this.moveh*Math.sin(0==this.movep?r/1e3:2*r*Math.PI/this.movep);break;case 3:0!=this.mover&&(l=r/this.mover)}t.ctx;t.loadIdentity(),t.translate(Math.trunc(.5-$gv.m_viewRect.x),Math.trunc(.5-$gv.m_viewRect.y)),t.globalAlpha=Math.max(0,Math.min(a/255,1)),t._drawRotaGraph(this,i,n,l,e)}}y.raw_default={a0:-1,a1:-1,movetype:0,movew:0,moveh:0,movep:0,mover:0};class x{constructor(t){null==t&&console.error(t),this._raw=t,this.textures=[],this.frame=0,this.time=0,this.delta=0,this.quest=t.quest;for(let e in t.quest)$gv.allQuest[e]||($gv.allQuest[e]=new Set),$gv.allQuest[e].add(t.quest[e]);this._load_object_info(),this._load_back_info(),this._load_tile_info(),this.aabb=null,this.display_aabb=!1,this.aabb_color=null}_load_object_info(){this.type=this._get(0,"sign",Number),this.x=this._get(0,"x",Number),this.y=this._get(0,"y",Number),this.z=this._get(0,"z",Number),this.zM=this._get(0,"zM",Number),this.f=this._get(0,"f",Number),this.name=this._raw.name,this._url=null}_load_back_info(){this.typeb=this._get(0,"type",Number),(this.typeb<0||this.typeb>7)&&(alert("MapBackBase.typeb: "+this.typeb),console.warn("MapBackBase.typeb: "+this.typeb)),this.a=this._get(0,"a",Number),this.rx=this._get(0,"rx",Number),this.ry=this._get(0,"ry",Number),this.cx=this._get(0,"cx",Number),this.cy=this._get(0,"cy",Number),this.backTags=this._raw.backTags}_load_tile_info(){this.flow=this._get(0,"flow",Number),1&this.flow&&!this.cx&&(this.cx=1e3),2&this.flow&&!this.cy&&(this.cy=1e3)}load(){let t=this._load_texture(0,null);this.textures[0]=t;for(let e=1;e in this._texture_raw;++e)this.textures[e]=this._load_texture(e,t);this.__calc_aabb()}_load_texture(){}unload(){this.textures=[]}__calc_aabb(){if(this.textures.length>=1){let t=0;for(let e=0;e<this.textures.length;++e){t|=this.textures[e].mover}const e=this.compute_max_rectangle();if(t){const t=Math.round(Math.sqrt(e.width**2+e.height**2)),i=Math.round(.5*t);this.aabb=new s.b(this.x-i,this.y-i,t,t)}else this.aabb=e}}_get(t,e,i){return e in this._raw?i?i(this._raw[e]):this._raw[e]:t}update(t){const e=this.textures.length;e>1&&(this.time=this.time+t,this.time>this.textures[this.frame].delay&&(this.frame=++this.frame,this.time=0,this.frame>=e&&(this.frame=0))),this.delta+=t,$gv.m_editor_mode&&this.aabb&&this.$editor_mouse()}_update_and_preload(t){const e=this.textures.length;if(e>1){const i=this.textures[this.frame];this.time=this.time+t,i.isLoaded()||i.__loadTexture(),this.time>i.delay&&(this.frame=++this.frame,this.time=0,this.frame>=e&&(this.frame=0,delete this.update));const n=this.textures[this.frame+1];n&&!n.isLoaded()&&n.__loadTexture()}this.delta+=t,$gv.m_editor_mode&&this.aabb&&this.$editor_mouse()}$editor_mouse(){$gv.m_viewRect;const t=$gv.m_viewRect.left+$gv.mouse_x,e=$gv.m_viewRect.top+$gv.mouse_y;0==this.typeb&&this.aabb.collide4f2(t,e,1,1)?(this.display_aabb=!0,1!=$gv.mouse_dl||window.m_selected_object==this&&null!=window.m_selected_object?null==window.m_hover_object?(window.m_hover_object=this,this.aabb_color="rgba(0,255,0,0.25)"):this.aabb_color="rgba(0,0,255,0.25)":this.$select()):this.$unselect(),window.m_selected_object==this&&(this.display_aabb=!0,this.aabb_color="rgba(255,0,0,0.5)")}$select(){window.m_selected_object&&window.m_selected_object.$unselect(),window.m_selected_object=this,window.m_hover_object=null,$gv.mouse_dl=0}$unselect(){this.display_aabb=!1}$isRepeatX(){return 1==this.typeb||4==this.typeb}$isRepeatY(){return 2==this.typeb||5==this.typeb}compute_rectangle(t){const e=this.textures[t];if(e){const t=e.width,i=e.height;return new s.b(this.x-(this.f?-e.x+t:e.x),this.y-e.y,t,i)}}compute_max_rectangle(){if(this.textures.length>0){let{left:t,top:e,right:i,bottom:n}=this.compute_rectangle(0);for(let s=1;s<this.textures.length;++s){let r=this.compute_rectangle(s);t=Math.min(t,r.left),e=Math.min(e,r.top),i=Math.max(i,r.right),n=Math.max(n,r.bottom)}return s.b.parse(t,e,i,n)}return null}__draw_texture(t,e,i,n,s){if(0!=this.typeb||!this.aabb||this.aabb.collide(s)){let s=this.textures[e];if(e&&!s.isLoaded())for(let t=e-1;t>=0&&!(s=this.textures[e]).isLoaded();--t);s.draw(t,this.f,this.x+i,this.y+n,this.time,this.delta)}if($gv.m_display_selected_object&&$gv.m_editor_mode&&this.aabb&&this.display_aabb){const e=t.ctx,i=Math.trunc(.5-s.left+this.aabb.left),n=Math.trunc(.5-s.top+this.aabb.top);t.loadIdentity(),t.globalAlpha=1,e.beginPath(),e.rect(i,n,this.aabb.width,this.aabb.height),e.fillStyle=this.aabb_color||"rgba(20,255,20,0.5)",e.fill(),e.lineWidth=3,e.setLineDash([3,3]),e.lineDashOffset=0,e.strokeStyle="rgba(0,0,0,0.5)",e.stroke(),e.setLineDash([3,3]),e.lineDashOffset=3,e.strokeStyle="rgba(255,255,255,0.5)",e.stroke(),e.setLineDash([]),e.lineWidth=1}}__draw(t,e,i,n){this.__draw_texture(t,this.frame,e,i,n)}_draw(t,e,i,n,s,r){let o=this.textures[this.frame];if(null==o)return;let{left:a,top:l,right:c,bottom:u}=r,h=this.x-(this.f?-o.x+o.width:o.x),d=this.y-o.y,m=0==this.cx?o.width:this.cx,p=0==this.cy?o.height:this.cy,f=a-(m+(a-n-h)%m),_=l-(p+(l-s-d)%p),g=c+(m-(c-n-h)%m),v=u+(p-(u-s-d)%p);if(e)if(i)for(let e=_;e<v;e+=p)for(let i=f;i<g;i+=m)this.__draw(t,i-h,e-d,r);else for(let e=f;e<g;e+=m)this.__draw(t,e-h,s,r);else if(i)for(let e=_;e<v;e+=p)this.__draw(t,n,e-d,r);else this.__draw(t,n,s,r)}draw(t,e,i){if(!this.textures.length)return;let n=(this.rx+100)*e.x/100,s=(this.ry+100)*e.y/100;switch(this.typeb){case 0:this._draw(t,!1,!1,n,s,i);break;case 1:this._draw(t,!0,!1,n,s,i);break;case 2:this._draw(t,!1,!0,n,s,i);break;case 3:this._draw(t,!0,!0,n,s,i);break;case 4:this._draw(t,!0,!1,Math.trunc(this.delta/200*this.rx),s,i);break;case 5:this._draw(t,!1,!0,n,Math.trunc(this.delta/200*this.ry),i);break;case 6:this._draw(t,!0,!0,Math.trunc(this.delta/200*this.rx),s,i);break;case 7:this._draw(t,!0,!0,n,Math.trunc(this.delta/200*this.ry),i)}}get _texture_base_path(){throw new Error("Not implement")}}class b extends x{constructor(t){super(t),null==this._raw.cx||this._raw.ry&&-100!=this._raw.ry||(this._raw.rx?//!= null && != 0
null!=this._raw.cy?this.typeb=6:this.typeb=4:this.typeb=1),null==this._raw.cy||this._raw.rx&&-100!=this._raw.rx||(this._raw.ry?//!= null && != 0
null!=this._raw.cx?this.typeb=7:this.typeb=5:this.typeb=2),this.update=this._update_and_preload}_load_texture(t,e){let i=["/Map","Obj",this._texture_base_path,t].join("/"),n=new y(this._texture_raw[t],void 0,e);return n._url=i,n}get _texture_base_path(){return[this._raw.oS,this._raw.l0,this._raw.l1,this._raw.l2].join("/")}get _texture_raw(){try{return g.Obj[this._raw.oS][this._raw.l0][this._raw.l1][this._raw.l2]}catch(t){}return null}}class A extends b{constructor(t){super(t),this.groups=[]}async load(t){let e=new p;await e.load(t);let i=Object.keys(this._raw).map(e=>{let i=parseInt(e,10);return Number.isSafeInteger(i)?i:(console.warn("MapParticle."+t+".id: "+e),null)}).filter(t=>null!=t);for(let t of i)this.groups[t]=e.clone(),this.groups[t].x=this._raw[t].x,this.groups[t].y=this._raw[t].y,this.groups[t].evaluate()}update(t){for(let e=0;e<this.groups.length;++e){this.groups[e].update(t)}}draw(t,e,i){for(let n=0;n<this.groups.length;++n){const s=this.groups[n];let r=(this.rx+100)*e.x/100,o=(this.ry+100)*e.y/100;s.render(t,i,r,o)}}static construct(t,e){let i=[],n=[];for(let e in t.particle){let s=t.particle[e],r=new A(s);i.push(r.load(e)),n.push(r)}return e.particleList=n,i}}class w extends b{constructor(t,e){super(t),this.ssanim=null,this._fname=null}get _folder(){const t=this._raw;return`/Map/Obj/${t.oS}/${t.l0}/${t.l1}/${t.l2}`}async load(){if(!SSAnim)return null;{const t=this._raw;let e;e=new SSAnim;try{await e.load(this._folder),e.update(0)}catch(t){return void console.error(t)}if(t.spineRandomStart){let t=e.anim_length*Math.random();e.setAnimTime(t)}const i=Math.round(Math.sqrt(e.width**2+e.height**2)),n=Math.round(.5*i);this.aabb=new s.b(this.x-n,this.y-n,i,i),this.ssanim=e}}unload(){this.ssanim&&(this.ssanim.unload(),this.ssanim=null)}update(t){this.delta+=t,this.ssanim&&window.enable_skeletal_anim&&this.ssanim.update(t)}draw(t,e,i){if($gv.m_display_skeletal_anim){const e=Math.trunc(.5-$gv.m_viewRect.x+this.x),i=Math.trunc(.5-$gv.m_viewRect.y+this.y);if(t.ctx.setTransform(1,0,0,-1,e,i),this.ssanim&&this.ssanim.render(),this.display_aabb){const e=t.ctx;t.ctx.setTransform(1,0,0,1,Math.trunc(.5-$gv.m_viewRect.x),Math.trunc(.5-$gv.m_viewRect.y)),e.beginPath(),e.rect(this.x-.5*this.ssanim.width,this.y-this.ssanim.height,this.ssanim.width,this.ssanim.height),e.fillStyle="rgba(20,255,20,0.5)",e.fill()}}}}class S extends b{constructor(t,e){super(t),this._info=e,this.update=this._update_and_preload}load(){let t=new y(this._texture_raw);this.textures[0]=t,this.textures[0]._url=["/Map","Tile",this._info.tS,this._raw.u,this._raw.no].join("/"),this.__calc_aabb()}get _texture_raw(){try{return g.Tile[this._info.tS][this._raw.u][this._raw.no]}catch(t){}return null}get _texture_base_path(){return[this._info.tS,this._raw.u,this._raw.no].join("/")}}class C extends b{constructor(t,e){super(t),this.mapRenderer=e,this.tm=null,this.tn=null,this.pn=null,this.script=null,this.enable=null,this.state=null,this.skin=null,this.update=this._update_and_preload}load(){this.tm=this._get("","tm",String).padStart(9,"0"),this.tn=this._get("","tn",String),this.pn=this._get("","pn",String),this.script=this._get(null,"script",String),this.enable=""!=this.tm&&"999999999"!=this.tm,this._loadTexture()}unload(){this.body&&(this.body.GetWorld().DestroyBody(this.body),this.body=null)}getMap(){if(this.enable)return this.tm}draw(t,e,i){this.enable?super.draw(t,e,i):this.__display_mode&&super.draw(t,e,i)}_loadTexture(){"game"==this.__display_mode?this.type="p":this.type="q";const t=C._portals_raw;this.textures.length=0;const e=C._type_map[this._raw.pt];if("editor"==this.__display_mode){let i=new y(t.editor[e]);i._url=[this._texture_base_path,this.__display_mode,e].join("/"),this.textures[0]=i}else if(t.game[e]){let i=null!=this.skin?this.skin:"default";if("0"in t.game[e][i]){let n=t.game[e][i];for(let t in n){let s=new y(n[t]);s._url=[this._texture_base_path,this.__display_mode,e,i,t].join("/"),this.textures.push(s)}}else{this.state=Object.keys(t.game[e][i])[0];let n=t.game[e][i][this.state];for(let t in n){let s=new y(n[t]);s._url=[this._texture_base_path,this.__display_mode,e,i,this.state,t].join("/"),this.textures.push(s)}}}this.delta=0,this.time=0,this.frame=0}get _texture_base_path(){return"/Map/MapHelper/portal"}get _getTexturePath(){return this.__display_mode,["/Map/MapHelper/portal",this.__display_mode].join("/")}get __display_mode(){return $gv.m_editor_mode?"editor":"game"}static async Init(){C._portals_raw=await $get.data("/Map/MapHelper/portal"),C._type_map=Object.keys(C._portals_raw.editor)}}C._portals_raw={},C._type_map={},C._script={};class B{constructor(){this.portals=null,this.__display_mode=this.__display_mode}async load(t,e){let i=[];for(let n=0;n in t.portal;++n){let s=t.portal[n],r=new C(s,e);r.load(),e.controller.createPortal(r),i.push(r)}this.portals=i}unload(){for(let t=0;t<this.portals.length;++t){this.portals[t].unload()}}update(t){if(this.__display_mode!=$gv.m_editor_mode){this.__display_mode=$gv.m_editor_mode;for(let e=0;e<this.portals.length;++e){let i=this.portals[e];i._loadTexture(),i.update(t)}}else for(let e=0;e<this.portals.length;++e){this.portals[e].update(t)}}draw(t,e,i){for(let n=0;n<this.portals.length;++n){this.portals[n].draw(t,e,i)}}}class V extends x{constructor(t){super(t)}}class M extends V{constructor(t){super(t),this.update=this._update_and_preload}load(){let t=["/Map","Back",this._texture_base_path].join("/");if(this._raw.bS){this._texture_raw&&(this.textures[0]=new y(this._texture_raw),this.textures[0]._url=t)}else console.warn("MapBack path ?: "+t)}get _texture_base_path(){return[this._raw.bS,"back",this._raw.no].join("/")}get _texture_raw(){return this._raw.bS&&this._raw.no?g.Back[this._raw.bS].back[this._raw.no]:null}}class k extends V{constructor(t){super(t),this.update=this._update_and_preload}_load_texture(t,e){let i=["/Map","Back",this._texture_base_path,t].join("/"),n=new y(this._texture_raw[t]);return n._url=i,n}get _texture_base_path(){return[this._raw.bS,"ani",this._raw.no].join("/")}get _texture_raw(){try{return g.Back[this._raw.bS].ani[this._raw.no]}catch(t){}return null}}class P extends V{constructor(t){super(t),this.ssanim=null}get _folder(){const t=this._raw;return`/Map/Back/${t.bS}/spine/${t.no}`}async load(){if(!SSAnim)return null;{let t=new SSAnim;try{await t.load(this._folder),t.update(0)}catch(t){return void console.error(t)}this.ssanim=t}}unload(){this.ssanim&&(this.ssanim.unload(),this.ssanim=null)}update(t){this.ssanim&&window.enable_skeletal_anim&&this.ssanim.update(t)}draw(t,e,i){if($gv.m_display_skeletal_anim&&this.ssanim){const e=Math.trunc(.5-$gv.m_viewRect.x+this.x),i=Math.trunc(.5-$gv.m_viewRect.y+this.y);t.ctx.setTransform(1,0,0,-1,e,i),this.ssanim.render()}}}class I{constructor(t,e){Object.assign(this,t),this.spawnId=e,this.time=0,this.count=0,t instanceof I||(this.fh=t.fh-1)}increaseLife(){++this.count,this.time=0}decreaseLife(){--this.count,this.time=0}getTimeElapsedAfterLifeSpawn(){return this.time}getNowCountOfLifeWasSpawn(){return this.count}clone(){return new this.constructor(this)}}class D extends _.a{constructor(t,e){super();this.renderer=null,this.is_dead=!1,this.spawn=t,this.x=t.x,this.y=t.cy,this.z=5,this.angle=0,this.front=Number(t.f)?1:-1,this.opacity=Number(t.hide)?.5:1,this.lifeId=e}static Create(t,e,i){let n;if("m"==t.type)n=new T(t,i);else{if("n"!=t.type)return void alert("map life type: "+t.type);n=new E(t,i)}return n&&n.load(t.id,e),n}static async loadLifeDesc(t){let e,i=t.id;switch(t.type){case"m":e=l.loadDescription(i);break;case"n":e=c.loadDescription(i);break;default:return void alert("map life type: "+t.type)}return e}async load(t,e){this.renderer?await this.renderer.load(t):alert("Unknow type of life in map")}_destroy(t){throw new Error("Not implement")}die(t){throw new Error("Not implement")}update(t){this.renderer.update(t)}draw(t){t.globalAlpha=Math.max(0,Math.min(this.opacity,1)),this.renderer.draw(t,this.x,this.y,this.angle,this.front<0)}}class T extends D{constructor(t,e){super(t,e),this.renderer=new l,this.$physics=null,this.skills={},this.hp=1e5}async load(t,e){await super.load(t),this.$physics=e.createMob(this),this.$physics._loadAction(this.renderer.actions),await this._load_skill_by_mob_id(t);try{this._load_skill_info();const t=this.renderer._raw.info.attack[this.renderer._raw.info.firstAttack].info;if(this.skill_map[t]){const e=this.skill_map[t].skill_list[0];this.invokeSkill(e.skill,e.level)}}catch(t){}}damage(t,e){this.is_dead||(this.hp-=e,console.log(`Mob(${this.$objectid}) 被 ${t.$objectid} 攻擊，減少 ${e} HP，剩下 ${this.hp}`),this.hp<=0&&this.die())}knockback(t,e,i){}_applyState(t){t.jump?this.renderer.action="jump":t.walk?this.renderer.action="move":this.renderer.action="stand"}update(t){this.$physics&&(this.is_dead?this.$physics.stop():this._applyState(this.$physics.state)),this.renderer.update(t)}draw(t){$gv.m_display_mob&&super.draw(t)}_load_skill_info(){const t=this.renderer._raw;let e=t.info.attack;t.info.skill;e[1].info,t.info.skill[0].info,e[1].info,t.skill1.info;var i={};for(let e,n=1;(e="skill"+n)in t;++n){let n=t[e];n.info&&(i[n.info]={anim:e,skill_list:[]})}var n={};for(let e in t.info.skill){let s=t.info.skill[e];n[s.skill+"."+s.level]=s,i[s.info]&&(n[s.skill+"."+s.level].$anim=i[s.info].anim,i[s.info].skill_list.push(s))}this.skill_map=i,this.skill_info=n}_load_skill_by_mob_id(t){let e=[];switch(t){case"8880140":case"8880141":{const t=i(463).FlowerTrap,e=i(427).FairyDust;this.skills={1:new t,2:new t,3:new t,4:new e(null,null),5:{load(){},invoke:function(t){console.info("invoke LaserRain")}},6:{load(){},invoke:function(t){console.info("invoke ForcedTelepor")}},7:{load(){},invoke:function(t){console.info("invoke Dragon")}},8:{load(){},invoke:function(t){console.info("invoke Rush")}},9:{load(){},invoke:function(t){console.info("invoke WelcomeBarrage")}},10:new e(null,null)},this.skill_map_action=[];for(let t=1;t<=10;++t)switch(t){case 1:case 2:case 3:break;case 4:case 10:this.skill_map_action[t]="skill1";break;case 5:break;case 6:this.skill_map_action[t]="skill4";break;case 7:this.skill_map_action[t]="skill2"}}}for(let t in this.skills){const i=this.skills[t];e.push(i.load(t))}return Promise.all(e)}invokeSkill(t,e){const i=this.skills[e];if(i){const t=this.skill_map_action[e];t&&(this.renderer.action=t),i.invoke(e)}else console.warn({"unknow skill":t,level:e})}_destroy(t){let e=this.spawn;e instanceof I&&e.decreaseLife(),t.destroyMob(this),this.renderer=null}die(t=1){this.renderer.action="die"+t,this.is_dead=!0}}class E extends D{constructor(t,e){super(t,e),this.renderer=new c}draw(t){$gv.m_display_npc&&super.draw(t)}_destroy(t){this.spawn.decreaseLife(),t.destroyNpc(this),this.renderer=null}die(t){this.is_dead=!0}}let $=1;class L{constructor(t){this._raw=null,this.spawnPoints=[],this.entities=[],this.mapController=t}load(t){let e=[];this._raw=t.life;let i=Object.keys(this._raw).map(t=>{let e=parseInt(t,10);return Number.isSafeInteger(e)?e:(console.warn("MapLife.spawnId: "+t),null)}).filter(t=>null!=t);for(let t of i){let i=new I(this._raw[t],t);e.push(D.loadLifeDesc(i)),this.spawnPoints.push(i)}return Promise.all(e)}unload(){for(let t=0;t<this.entities.length;++t){const e=this.entities[t];"m"==e.spawn.type&&e.$physics._destroy(this.mapController)}this.spawnPoints=[],this.entities=[]}update(t){for(let e=0;e<this.spawnPoints.length;++e){let i=this.spawnPoints[e];i.time+=t,i.time>=1e3&&i.count<$&&(i.increaseLife(),this.spawn(i))}for(let e=0;e<this.entities.length;++e){let i=this.entities[e];if(i){if(i.renderer.action&&i.renderer.action.startsWith("die")){const t=i.renderer.actions[i.renderer.action];if(t&&t.isEnd()){this.destroyLife(i);continue}}i.update(t)}}}spawn(t){let e=0;for(;e<this.entities.length&&this.entities[e];++e);let i=D.Create(t,this.mapController,e);e<this.entities.length?this.entities[e]=i:this.entities.push(i)}spawnNpc(t,e,i,n=!1,s=0){let r=new I({type:"n",x:0|e,y:0|i,cy:0|i,id:t,fh:s,is_dummy:!0});this.spawn(r)}spawnMob(t,e,i,n=!1,s=0){let r=new I({type:"m",x:0|e,y:0|i,cy:0|i,id:t,fh:s,is_dummy:!0});this.spawn(r)}destroyLife(t){t instanceof D||(alert("MapLifeManager.killLife: can't kill non life"),console.error("MapLifeManager.killLife: can't kill non life")),t._destroy(this.mapController),delete this.entities[t.lifeId]}destroyAll(){this.entities.forEach(t=>this.destroyLife(t))}draw(t,e,i,n){for(let e=0;e<this.entities.length;++e){let i=this.entities[e];i&&(null!=i.z&&i.z==n||null==n)&&i.draw(t)}}}class R{constructor(){this.stamp=0,this.background=[],this.frontground=[],this.layeredObject=[],this.layeredTile=[],this.backTags={},this.namedObject={},this.controller=new f.a,this.lifeMgr=new L(this.controller),this.portalMgr=new B,this.particleList=null,this.mapBound=null,this.quest={},this._url=null,this.$load_tasks=[],this.$promise=null,this.$loading_status="loading",this.onload=null}static async _Init(){let t=null,e={};t=await $get.data("/String/Map");for(let i in t)for(let n in t[i])e[n]=t[i][n],e[n].$region=i;R._map_names=e,window.$MapNames=R._map_names}static Init(){return Promise.all([this._Init(),C.Init()])}isActivated(t){if(t)for(let e in t)if(this.quest[e]!=t[e])return!1;return!0}get $map_sprite(){return window.$map_sprite}async _constructBack(t){if(!("back"in t))return;let e=new Map;for(let i=0;i in t.back;++i){let n=t.back[i];const s=this._url+`back/${i}`;let r;if(0==n.ani)r=new M(n);else if(1==n.ani)r=new k(n);else{if(2!=n.ani)throw new Error("ob.ani: "+n.ani);r=new P(n)}if(r._url=s,null!=r.backTags&&(this.backTags[r.backTags]=r),2!=n.ani)if(r._raw.bS){let t="Back/"+r._raw.bS;e.has(t)||e.set(t,v("Back",r._raw.bS))}else console.warn("MapBack: map.back["+i+"].bS = "+r._raw.bS);0!=n.front?this.frontground.push(r):this.background.push(r)}await Promise.all([...e.values()]);for(let t=0;t<this.frontground.length;++t){this.frontground[t].load()}for(let t=0;t<this.background.length;++t){this.background[t].load()}}async _constructLayeredObject(t){let e=new Map;for(let i=0,n=t[i];!F(n);n=t[++i]){let t=this.__constructLayeredObject_obj(i,n,e),s=this.__constructLayeredObject_tile(i,n,e);s.sort((t,e)=>t.z-e.z),t.sort((t,e)=>t.z-e.z),this.layeredObject[i]=t,this.layeredTile[i]=s}await Promise.all([...e.values()]);for(let t=0;t<this.layeredObject.length;++t){const e=this.layeredObject[t];for(let t=0;t<e.length;++t){e[t].load()}}for(let t=0;t<this.layeredTile.length;++t){const e=this.layeredTile[t];for(let t=0;t<e.length;++t){e[t].load()}}}__constructLayeredObject_tile(t,e,i){const n=e.info;let s=[];if(n.tS){let t="Tile/"+n.tS;i.has(t)||i.set(t,v("Tile",n.tS))}else Object.keys(e.tile).length&&console.warn("["+t+"].tile = "+JSON.stringify(e.tile));for(let i=0,r=e.tile[i];!F(r);i++,r=e.tile[i]){let e=new S(r,n);e._url=this._url+`${t}/tile/${i}`,s.push(e)}return s}__constructLayeredObject_obj(t,e,i){let n=[];for(let s=0,r=e.obj[s];!F(r);s++,r=e.obj[s]){let e;if(r.spineAni){switch(r.spineAni){case"animation":break;case"idle":console.warn("spine animation: idle ??");break;default:console.groupCollapsed("unknow spine:"+r.spineAni),console.warn(`LayeredObject[${t}][${s}]`),console.warn(r),console.groupEnd()}e=new w(r)}else{let t="Obj/"+(e=new b(r))._raw.oS;i.has(t)||i.set(t,v("Obj",e._raw.oS))}e._url=this._url+`${t}/obj/${s}`,null!=e.name&&(this.namedObject[e.name]=e),n.push(e)}return n}__compute_top_bottom_border(t){let e=null,i=null;for(let n=0;n<t.length;++n){const s=t[n];for(let t=0;t<s.length;++t){let n=s[t].compute_max_rectangle();n&&null!=e&&null!=i?(e=Math.min(e,n.top),i=Math.max(i,n.bottom)):(e=n.top,i=n.bottom)}}return{top:e,bottom:i}}_compute_top_bottom_border(){let t=this.__compute_top_bottom_border(this.layeredObject),e=this.__compute_top_bottom_border(this.layeredTile);return{top:Math.min(t.top,e.top),bottom:Math.max(t.bottom,e.bottom)}}_compute_map_bound(t){if(this.mapBound&&!t)return this.mapBound;const e=this._raw.info;let i,n;if(null!=e.VRLeft&&null!=e.VRTop&&null!=e.VRRight&&null!=e.VRBottom)i=e.VRTop,n=e.VRBottom;else{let t=this._compute_top_bottom_border();i=t.top,n=t.bottom}const r=this.controller.ground._compute_left_right_border();let o=s.b.parse(r.left,i,r.right,n);return this.mapBound=o,o}get _window_title(){return this.mapName?`${[this.mapName,this.streetName].join("·")} (${this.map_id})`:`${this.map_id}`}_get_map_data_url(t){return`/Map/Map/Map${t.slice(0,1)}/${t}`}async load(t,e){if(!e&&null!=t&&this.map_id==t&&null!=this._raw)return this.isLoaded()&&this.unload(),void this._load(this._raw);const i=this._get_map_data_url(t);let n=await $get.data(i);if(n){if(n.info&&n.info.link){const t=this._get_map_data_url(n.info.link);if(!(n=await $get.data(t)))return void alert("map-link not exit")}this.isLoaded()&&this.unload(),this._url=i,this.map_id=t,this._load(n)}else alert("map not exit")}_load(t){const e=this.map_id;this.$loading_status="loading",$gv.allQuest={},this.controller.stop=!0,R._map_names[e]&&(this.mapName=R._map_names[e].mapName,this.streetName=R._map_names[e].streetName),this.$load_tasks=[],this._loadBgm(t),this.$load_tasks.push(this._constructBack(t,this)),this.$load_tasks.push(this._constructLayeredObject(t,this).then(t=>{})),this.$load_tasks.push(this.portalMgr.load(t,this).then(t=>{})),this.$load_tasks.push(this.__constructMiniMap(t,this)),this.$load_tasks.push(this.controller.load(t,this)),this.$load_tasks.push(this.lifeMgr.load(t,this)),this.$load_tasks.push(A.construct(t,this)),this.$promise=Promise.all(this.$load_tasks),this.$promise.then(t=>{const e=this._compute_map_bound(),i=e.center;$gv.m_viewRect.setCenter(i.x,i.y),this.controller._createMapBound(e),this.controller.stop=!1,this.$load_tasks=[],this.$promise=null,delete this.$loading_status,console.log("completed scene_map.waitLoaded: [...]")}),this._raw=t,this._script(),this.onload&&this.onload.call(this),console.log("End scene_map.load")}_script(){switch(this.map_id){case"450004150":case"450004450":case"450004750":this.lifeMgr.spawnMob("8880166",1e3,47,!1,0),this.lifeMgr.spawnMob("8880140",1e3,47,!1,0)}}reload(){this.unload(),this._load(this._raw)}unload(){this.$loading_status="loading";for(let t=0;t<this.background.length;++t)this.background[t].unload();this.background=[];for(let t=0;t<this.frontground.length;++t)this.frontground[t].unload();this.frontground=[];for(let t=0;t<this.layeredObject.length;++t){let e=this.layeredObject[t];for(let t=0;t<e.length;++t)e[t].unload()}this.layeredObject=[];for(let t=0;t<this.layeredTile.length;++t){let e=this.layeredTile[t];for(let t=0;t<e.length;++t)e[t].unload()}this.layeredTile=[],this.backTags={},this.particleList=null,this.controller.unload(),this.lifeMgr.unload(),this.portalMgr.unload(),g.Back={},g.Obj={},g.Tile={}}_getBgmPath(t){let e=t.info.bgm,i=e.indexOf("/");return["","Sound",e.slice(0,i)+e.slice(i)].join("/")}_loadBgm(t){const e=document.getElementById("bgm");if(e){const i=this._getBgmPath(t);this._bgm_path=i;const n=$get.soundMp3Url(i);e.innerHTML=`<source src="${n}" type="audio/mpeg">`,e.autoplay=!0}else console.error(new TypeError("#bgm"))}playBgm(){document.getElementById("bgm").play()}pauseBgm(){document.getElementById("bgm").pause()}__constructMiniMap(t){t.miniMap?(this.width=t.miniMap.width,this.height=t.miniMap.height,this.centerX=t.miniMap.centerX,this.centerY=t.miniMap.centerY):(this.width=0,this.height=0,this.centerX=0,this.centerY=0)}_miniMap_src(){return this._url+"miniMap/canvas"}async waitLoaded(){await this.$promise}isLoaded(){return(!this.$load_tasks||!this.$load_tasks.length)&&this._raw&&!this.$loading_status}update(t){window.m_hover_object=null,($gv.mouse_dm||$gv.mouse_dr)&&(window.m_selected_object=null),null!=t&&(this.stamp=t,this.lifeMgr.update(t),this.isLoaded()&&this.controller.update(t))}_addChara(t){try{let e=this.portalMgr.portals.filter(t=>"sp"==t.pn),i=e[Math.trunc(100*Math.random())%e.length];const n=t.$physics,s=i.x/$gv.CANVAS_SCALE,r=i.y/$gv.CANVAS_SCALE;n.setPosition(s,r),n.body.SetAwake(!0)}catch(t){console.error(t)}}addChara(t){this.$promise?this.$promise.then(()=>{this._addChara(t)}):this._addChara(t)}applyCamera(t){t.ctx.setTransform(1,0,0,1,Math.trunc(-$gv.m_viewRect.x),Math.trunc(-$gv.m_viewRect.y))}beginRender(t){t.pushGlobalAlpha()}endRender(t){t.popGlobalAlpha()}renderLife(t,e){if(!$gv.m_display_life)return;const i=s.c.empty,n=$gv.m_viewRect;this.lifeMgr.draw(t,i,n,e)}renderPortal(t){if(!$gv.m_display_portal)return;const e=s.c.empty,i=$gv.m_viewRect;this.portalMgr.update(this.stamp),this.portalMgr.draw(t,e,i)}renderFrontground(t){if(!$gv.m_display_front)return;const e=$gv.m_viewRect.center,i=$gv.m_viewRect;for(let n=0;n<this.frontground.length;++n){let s=this.frontground[n];this.isActivated(s.quest)&&(s.update(this.stamp),s.draw(t,e,i))}}renderLayeredObject(t,e){if(!$gv.m_display_mapobj)return;const i=s.c.empty,n=$gv.m_viewRect,r=this.layeredObject[e];for(let e=0;e<r.length;++e){let s=r[e];this.isActivated(s.quest)&&(s.update(this.stamp),s.draw(t,i,n))}}renderLayeredTile(t,e){if(!$gv.m_display_maptile)return;const i=s.c.empty,n=$gv.m_viewRect,r=this.layeredTile[e];for(let e=0;e<r.length;++e){let s=r[e];this.isActivated(s.quest)&&(s.update(this.stamp),s.draw(t,i,n))}}renderBackground(t){if(!$gv.m_display_back)return;const e=$gv.m_viewRect.center,i=$gv.m_viewRect;for(let n=0;n<this.background.length;++n){let s=this.background[n];this.isActivated(s.quest)&&(s.update(this.stamp),s.draw(t,e,i))}}renderParticle(t){if(!$gv.m_display_particle_system)return;const e=$gv.m_viewRect.center,i=$gv.m_viewRect;for(let n=0;n<this.particleList.length;++n){let s=this.particleList[n];this.isActivated(s.quest)&&(s.update(this.stamp),s.draw(t,e,i))}}}function F(t){if("object"==typeof t&&null==t)throw new Error;return void 0===t||null==t}Object(n.a)(R.Init())},function(t,e,i){"use strict";i.d(e,"a",function(){return c}),i.d(e,"b",function(){return u});var n=i(20),s=i.n(n),r=(i(394),i(396),i(404),i(406),i(408),i(410),i(411),i(412),i(413),i(417),i(418),i(419),i(420),i(21)),o=i.n(r),a=i(48);window.jQuery=s.a,window.$=s.a,o.a.config.productionTip=!1,o.a.use(a.a),window.onwheel||(window.onwheel=function(){});let l=[];function c(t){l.push(t)}function u(){let t=Promise.all(l);return l=[],t}},function(t,e,i){"use strict";i.d(e,"a",function(){return a}),i.d(e,"c",function(){return l}),i.d(e,"d",function(){return c}),i.d(e,"b",function(){return u});var n=i(1),s=i(0),r=i(5),o=i(12);class a{constructor(){this.categoryBits=1,this.maskBits=65535,this.groupIndex=0}Clone(){return(new a).Copy(this)}Copy(t){return this.categoryBits=t.categoryBits,this.maskBits=t.maskBits,this.groupIndex=t.groupIndex,this}}class l{constructor(){this.shape=null,this.userData=null,this.friction=.2,this.restitution=0,this.density=0,this.isSensor=!1,this.filter=new a}}class c{constructor(t){this.aabb=new r.a,this.childIndex=0,this.treeNode=null,this.fixture=t}}class u{constructor(t,e){this.m_density=0,this.m_next=null,this.m_friction=0,this.m_restitution=0,this.m_proxies=null,this.m_proxyCount=0,this.m_filter=new a,this.m_isSensor=!1,this.m_userData=null,this.m_body=e,this.m_shape=t.shape.Clone()}GetType(){return this.m_shape.GetType()}GetShape(){return this.m_shape}SetSensor(t){t!==this.m_isSensor&&(this.m_body.SetAwake(!0),this.m_isSensor=t)}IsSensor(){return this.m_isSensor}SetFilterData(t){this.m_filter.Copy(t),this.Refilter()}GetFilterData(){return this.m_filter}Refilter(){if(this.m_body)return;let t=this.m_body.GetContactList();for(;t;){const e=t.contact,i=e.GetFixtureA(),n=e.GetFixtureB();i!==this&&n!==this||e.FlagForFiltering(),t=t.next}const e=this.m_body.GetWorld();if(null===e)return;const i=e.m_contactManager.m_broadPhase;for(let t=0;t<this.m_proxyCount;++t)i.TouchProxy(this.m_proxies[t].treeNode)}GetBody(){return this.m_body}GetNext(){return this.m_next}GetUserData(){return this.m_userData}SetUserData(t){this.m_userData=t}TestPoint(t){return this.m_shape.TestPoint(this.m_body.GetTransform(),t)}ComputeDistance(t,e,i){return this.m_shape.ComputeDistance(this.m_body.GetTransform(),t,e,i)}RayCast(t,e,i){return this.m_shape.RayCast(t,e,this.m_body.GetTransform(),i)}GetMassData(t=new o.a){return this.m_shape.ComputeMass(t,this.m_density),t}SetDensity(t){this.m_density=t}GetDensity(){return this.m_density}GetFriction(){return this.m_friction}SetFriction(t){this.m_friction=t}GetRestitution(){return this.m_restitution}SetRestitution(t){this.m_restitution=t}GetAABB(t){return this.m_proxies[t].aabb}Dump(t,e){t("    const fd: b2FixtureDef = new b2FixtureDef();\n"),t("    fd.friction = %.15f;\n",this.m_friction),t("    fd.restitution = %.15f;\n",this.m_restitution),t("    fd.density = %.15f;\n",this.m_density),t("    fd.isSensor = %s;\n",this.m_isSensor?"true":"false"),t("    fd.filter.categoryBits = %d;\n",this.m_filter.categoryBits),t("    fd.filter.maskBits = %d;\n",this.m_filter.maskBits),t("    fd.filter.groupIndex = %d;\n",this.m_filter.groupIndex),this.m_shape.Dump(t),t("\n"),t("    fd.shape = shape;\n"),t("\n"),t("    bodies[%d].CreateFixture(fd);\n",e)}Create(t){this.m_userData=t.userData,this.m_friction=t.friction,this.m_restitution=t.restitution,this.m_next=null,this.m_filter.Copy(t.filter),this.m_isSensor=t.isSensor,this.m_proxies=Object(n.e)(this.m_shape.GetChildCount(),t=>new c(this)),this.m_proxyCount=0,this.m_density=t.density}Destroy(){}CreateProxies(t,e){this.m_proxyCount=this.m_shape.GetChildCount();for(let i=0;i<this.m_proxyCount;++i){const n=this.m_proxies[i]=new c(this);this.m_shape.ComputeAABB(n.aabb,e,i),n.treeNode=t.CreateProxy(n.aabb,n),n.childIndex=i}}DestroyProxies(t){for(let e=0;e<this.m_proxyCount;++e){const i=this.m_proxies[e];i.treeNode.userData=null,t.DestroyProxy(i.treeNode),i.treeNode=null}this.m_proxyCount=0}Synchronize(t,e,i){if(0!==this.m_proxyCount)for(let n=0;n<this.m_proxyCount;++n){const r=this.m_proxies[n],o=u.Synchronize_s_aabb1,a=u.Synchronize_s_aabb2;this.m_shape.ComputeAABB(o,e,n),this.m_shape.ComputeAABB(a,i,n),r.aabb.Combine2(o,a);const l=s.A.SubVV(i.p,e.p,u.Synchronize_s_displacement);t.MoveProxy(r.treeNode,r.aabb,l)}}}u.Synchronize_s_aabb1=new r.a,u.Synchronize_s_aabb2=new r.a,u.Synchronize_s_displacement=new s.A},function(t,e,i){"use strict";i.d(e,"a",function(){return r});var n=i(6);class s{constructor(){this.delay=0,this.move=null,this.action=0,this.frame=0}_load(t,e,i){this._raw=t,this.delay=t.delay,t.move?this.move=new n.c(t.move.x,t.move.y):this.move=new n.c(0,0),this.action=t.action||e,this.frame=t.frame||i}}class r{constructor(t){this.frames=null,this._action=null,this.time=0,this.frame=0,this.delay=0,this.loop=!1,this._is_end=!1}_load(t){this._action=t,this.frames=r.Adef[t]}reload(t){this.reset(),this._load(t)}reset(){this.time=0,this.frame=0,this._is_end=!1}update(t,e){if(!this.frames)return;const i=this.fdat;let n=0;i&&(this.time=this.time+t,i.delay<0&&(i.delay=-i.delay),i.delay>0?(n=i.delay,this.delay=0):(n=-i.delay,this.delay=n),this.time>n&&(this.frame=++this.frame,this.time=0),i.move?(e.tx=-i.move.x*e.front,e.ty=i.move.y):(e.tx=0,e.ty=0),this.isEnd()&&(e.tx=0,e.ty=0),e._action=i.action,e._action_frame=i.frame,this.frames&&null!=this.fdat?this.loop||(this._is_end=!1):this._is_end=!0,this.frames.length<=1&&(this._is_end=!0))}isEnd(){return this._is_end}getTotalTime(){return this.frames.reduce((t,e)=>t+e.delay,0)}get fdat(){return this.frames[this.frame]}static async Init(){let t=await $get.data(r._base_path),e=Object.assign({},t);delete e.info;for(let t in e){let i=e[t];e[t]=Object.values(i).map((e,i)=>{let n=new s;return n._load(e,t,i),n})}r.Adef=e,window.CharacterActionAnimationDefinition=e}static get _base_path(){return"/Character/00002000"}}r.Adef=null},function(t,e,i){"use strict";i.d(e,"b",function(){return r}),i.d(e,"a",function(){return o}),i.d(e,"c",function(){return a});i(6);var n=i(47),s=i(66);class r{constructor(){this.createDelay=0,this.collisionDelay=0,this.duration=0,this.moveSpeed=0,this.angle=0,this.flip=!1,this.x=0,this.y=0,this._speed_x=0,this._speed_y=0}}class o extends s.a{constructor(t,e){super(),t=Object.assign(new this._BallDefinition,t),this.createDelay=t.createDelay,this.collisionDelay=t.collisionDelay,this.duration=t.duration,this.moveSpeed=t.moveSpeed,this.angle=t.angle*Math.PI/180,this.x=t.x,this.y=t.y,this.moveSpeed?(this._speed_x=Math.cos(this.angle+Math.PI)*this.moveSpeed,this._speed_y=Math.sin(this.angle+Math.PI)*this.moveSpeed):(this._speed_x=0,this._speed_y=0),this.state=this.E_BEFORE_CREATE}get E_BEFORE_CREATE(){return 0}get E_CREATED(){return 1}get E_BEGIN_COLLISION(){return 2}get E_ENG_COLLISION(){return 3}create(t){this.state=this.E_CREATED,this.collisionDelay>0&&(this.enablePhysics=!1)}begin_collision(){this.enablePhysics=!0,this.state=this.E_BEGIN_COLLISION}end_collision(){this.enablePhysics=!1,this.state=this.E_ENG_COLLISION}update(t,e){this.state==this.E_BEFORE_CREATE?(this.createDelay-=t,this.createDelay<=0&&this.create()):(this.state==this.E_CREATED?(this.collisionDelay-=t,this.collisionDelay<=0&&this.begin_collision()):this.state==this.E_BEGIN_COLLISION&&this.duration>0&&(this.duration-=t,this.duration&&this.end_collision()),window.$stop||(this.x+=this._speed_x*t/1e3,this.y+=this._speed_y*t/1e3),this.renderer.update(t))}render(t){if(this.state!=this.E_BEFORE_CREATE){const e=this.flip;this.renderer.draw(t,this.x,this.y,this.angle,e)}}get _BallDefinition(){throw new Error("Not implement")}}class a{constructor(t,e){this._raw=t,this._url=e,this.level=null,this.animations={}}async load(t){this.level=t,this._raw||this._url||(this._url=[this._base_path,t].join("/"),this._raw=await $get.data(this._url));for(let t of this._anima_name_list){let e=new n.a(this._raw[t],[this._url,t].join("/"));e.is_loop=!0,e.load(),this.animations[t]=e}}invoke(){throw new Error("Not implement")}get _anima_name_list(){throw new Error("Not implement")}get _base_path(){throw new Error("Not implement")}}},function(t,e,i){var n=i(11),s=i(9).document,r=n(s)&&n(s.createElement);t.exports=function(t){return r?s.createElement(t):{}}},function(t,e,i){var n=i(9),s=i(33),r=i(45),o=i(125),a=i(15).f;t.exports=function(t){var e=s.Symbol||(s.Symbol=r?{}:n.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:o.f(t)})}},function(t,e,i){var n=i(71)("keys"),s=i(50);t.exports=function(t){return n[t]||(n[t]=s(t))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,i){var n=i(9).document;t.exports=n&&n.documentElement},function(t,e,i){var n=i(11),s=i(8),r=function(t,e){if(s(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,n){try{(n=i(34)(Function.call,i(31).f(Object.prototype,"__proto__").set,2))(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,i){return r(t,i),e?t.__proto__=i:n(t,i),t}}({},!1):void 0),check:r}},function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(t,e,i){var n=i(11),s=i(97).set;t.exports=function(t,e,i){var r,o=e.constructor;return o!==i&&"function"==typeof o&&(r=o.prototype)!==i.prototype&&n(r)&&s&&s(t,r),t}},function(t,e,i){"use strict";var n=i(39),s=i(38);t.exports=function(t){var e=String(s(this)),i="",r=n(t);if(r<0||r==1/0)throw RangeError("Count can't be negative");for(;r>0;(r>>>=1)&&(e+=e))1&r&&(i+=e);return i}},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e){var i=Math.expm1;t.exports=!i||i(10)>22025.465794806718||i(10)<22025.465794806718||-2e-17!=i(-2e-17)?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:i},function(t,e,i){var n=i(39),s=i(38);t.exports=function(t){return function(e,i){var r,o,a=String(s(e)),l=n(i),c=a.length;return l<0||l>=c?t?"":void 0:(r=a.charCodeAt(l))<55296||r>56319||l+1===c||(o=a.charCodeAt(l+1))<56320||o>57343?t?a.charAt(l):r:t?a.slice(l,l+2):o-56320+(r-55296<<10)+65536}}},function(t,e,i){"use strict";var n=i(45),s=i(2),r=i(27),o=i(26),a=i(63),l=i(105),c=i(61),u=i(32),h=i(13)("iterator"),d=!([].keys&&"next"in[].keys()),m=function(){return this};t.exports=function(t,e,i,p,f,_,g){l(i,e,p);var v,y,x,b=function(t){if(!d&&t in C)return C[t];switch(t){case"keys":case"values":return function(){return new i(this,t)}}return function(){return new i(this,t)}},A=e+" Iterator",w="values"==f,S=!1,C=t.prototype,B=C[h]||C["@@iterator"]||f&&C[f],V=B||b(f),M=f?w?b("entries"):V:void 0,k="Array"==e&&C.entries||B;if(k&&(x=u(k.call(new t)))!==Object.prototype&&x.next&&(c(x,A,!0),n||"function"==typeof x[h]||o(x,h,m)),w&&B&&"values"!==B.name&&(S=!0,V=function(){return B.call(this)}),n&&!g||!d&&!S&&C[h]||o(C,h,V),a[e]=V,a[A]=m,f)if(v={values:w?V:b("values"),keys:_?V:b("keys"),entries:M},g)for(y in v)y in C||r(C,y,v[y]);else s(s.P+s.F*(d||S),e,v);return v}},function(t,e,i){"use strict";var n=i(53),s=i(49),r=i(61),o={};i(26)(o,i(13)("iterator"),function(){return this}),t.exports=function(t,e,i){t.prototype=n(o,{next:s(1,i)}),r(t,e+" Iterator")}},function(t,e,i){var n=i(75),s=i(38);t.exports=function(t,e,i){if(n(e))throw TypeError("String#"+i+" doesn't accept regex!");return String(s(t))}},function(t,e,i){var n=i(13)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[n]=!1,!"/./"[t](e)}catch(t){}}return!0}},function(t,e,i){var n=i(63),s=i(13)("iterator"),r=Array.prototype;t.exports=function(t){return void 0!==t&&(n.Array===t||r[s]===t)}},function(t,e,i){"use strict";var n=i(15),s=i(49);t.exports=function(t,e,i){e in t?n.f(t,e,s(0,i)):t[e]=i}},function(t,e,i){var n=i(70),s=i(13)("iterator"),r=i(63);t.exports=i(33).getIteratorMethod=function(t){if(void 0!=t)return t[s]||t["@@iterator"]||r[n(t)]}},function(t,e,i){var n=i(281);t.exports=function(t,e){return new(n(t))(e)}},function(t,e,i){"use strict";var n=i(19),s=i(52),r=i(16);t.exports=function(t){for(var e=n(this),i=r(e.length),o=arguments.length,a=s(o>1?arguments[1]:void 0,i),l=o>2?arguments[2]:void 0,c=void 0===l?i:s(l,i);c>a;)e[a++]=t;return e}},function(t,e,i){"use strict";var n=i(46),s=i(141),r=i(63),o=i(30);t.exports=i(104)(Array,"Array",function(t,e){this._t=o(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,i=this._i++;return!t||i>=t.length?(this._t=void 0,s(1)):s(0,"keys"==e?i:"values"==e?t[i]:[i,t[i]])},"values"),r.Arguments=r.Array,n("keys"),n("values"),n("entries")},function(t,e,i){var n,s,r,o=i(34),a=i(131),l=i(96),c=i(92),u=i(9),h=u.process,d=u.setImmediate,m=u.clearImmediate,p=u.MessageChannel,f=u.Dispatch,_=0,g={},v=function(){var t=+this;if(g.hasOwnProperty(t)){var e=g[t];delete g[t],e()}},y=function(t){v.call(t.data)};d&&m||(d=function(t){for(var e=[],i=1;arguments.length>i;)e.push(arguments[i++]);return g[++_]=function(){a("function"==typeof t?t:Function(t),e)},n(_),_},m=function(t){delete g[t]},"process"==i(35)(h)?n=function(t){h.nextTick(o(v,t,1))}:f&&f.now?n=function(t){f.now(o(v,t,1))}:p?(r=(s=new p).port2,s.port1.onmessage=y,n=o(r.postMessage,r,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(n=function(t){u.postMessage(t+"","*")},u.addEventListener("message",y,!1)):n="onreadystatechange"in c("script")?function(t){l.appendChild(c("script")).onreadystatechange=function(){l.removeChild(this),v.call(t)}}:function(t){setTimeout(o(v,t,1),0)}),t.exports={set:d,clear:m}},function(t,e,i){var n=i(9),s=i(114).set,r=n.MutationObserver||n.WebKitMutationObserver,o=n.process,a=n.Promise,l="process"==i(35)(o);t.exports=function(){var t,e,i,c=function(){var n,s;for(l&&(n=o.domain)&&n.exit();t;){s=t.fn,t=t.next;try{s()}catch(n){throw t?i():e=void 0,n}}e=void 0,n&&n.enter()};if(l)i=function(){o.nextTick(c)};else if(!r||n.navigator&&n.navigator.standalone)if(a&&a.resolve){var u=a.resolve(void 0);i=function(){u.then(c)}}else i=function(){s.call(n,c)};else{var h=!0,d=document.createTextNode("");new r(c).observe(d,{characterData:!0}),i=function(){d.data=h=!h}}return function(n){var s={fn:n,next:void 0};e&&(e.next=s),t||(t=s,i()),e=s}}},function(t,e,i){"use strict";var n=i(24);t.exports.f=function(t){return new function(t){var e,i;this.promise=new t(function(t,n){if(void 0!==e||void 0!==i)throw TypeError("Bad Promise constructor");e=t,i=n}),this.resolve=n(e),this.reject=n(i)}(t)}},function(t,e,i){"use strict";var n=i(9),s=i(14),r=i(45),o=i(82),a=i(26),l=i(58),c=i(10),u=i(56),h=i(39),d=i(16),m=i(150),p=i(54).f,f=i(15).f,_=i(112),g=i(61),v="prototype",y="Wrong index!",x=n.ArrayBuffer,b=n.DataView,A=n.Math,w=n.RangeError,S=n.Infinity,C=x,B=A.abs,V=A.pow,M=A.floor,k=A.log,P=A.LN2,I=s?"_b":"buffer",D=s?"_l":"byteLength",T=s?"_o":"byteOffset";function E(t,e,i){var n,s,r,o=new Array(i),a=8*i-e-1,l=(1<<a)-1,c=l>>1,u=23===e?V(2,-24)-V(2,-77):0,h=0,d=t<0||0===t&&1/t<0?1:0;for((t=B(t))!=t||t===S?(s=t!=t?1:0,n=l):(n=M(k(t)/P),t*(r=V(2,-n))<1&&(n--,r*=2),(t+=n+c>=1?u/r:u*V(2,1-c))*r>=2&&(n++,r/=2),n+c>=l?(s=0,n=l):n+c>=1?(s=(t*r-1)*V(2,e),n+=c):(s=t*V(2,c-1)*V(2,e),n=0));e>=8;o[h++]=255&s,s/=256,e-=8);for(n=n<<e|s,a+=e;a>0;o[h++]=255&n,n/=256,a-=8);return o[--h]|=128*d,o}function $(t,e,i){var n,s=8*i-e-1,r=(1<<s)-1,o=r>>1,a=s-7,l=i-1,c=t[l--],u=127&c;for(c>>=7;a>0;u=256*u+t[l],l--,a-=8);for(n=u&(1<<-a)-1,u>>=-a,a+=e;a>0;n=256*n+t[l],l--,a-=8);if(0===u)u=1-o;else{if(u===r)return n?NaN:c?-S:S;n+=V(2,e),u-=o}return(c?-1:1)*n*V(2,u-e)}function L(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function R(t){return[255&t]}function F(t){return[255&t,t>>8&255]}function O(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function j(t){return E(t,52,8)}function G(t){return E(t,23,4)}function N(t,e,i){f(t[v],e,{get:function(){return this[i]}})}function q(t,e,i,n){var s=m(+i);if(s+e>t[D])throw w(y);var r=t[I]._b,o=s+t[T],a=r.slice(o,o+e);return n?a:a.reverse()}function z(t,e,i,n,s,r){var o=m(+i);if(o+e>t[D])throw w(y);for(var a=t[I]._b,l=o+t[T],c=n(+s),u=0;u<e;u++)a[l+u]=c[r?u:e-u-1]}if(o.ABV){if(!c(function(){x(1)})||!c(function(){new x(-1)})||c(function(){return new x,new x(1.5),new x(NaN),"ArrayBuffer"!=x.name})){for(var H,U=(x=function(t){return u(this,x),new C(m(t))})[v]=C[v],W=p(C),J=0;W.length>J;)(H=W[J++])in x||a(x,H,C[H]);r||(U.constructor=x)}var Y=new b(new x(2)),X=b[v].setInt8;Y.setInt8(0,2147483648),Y.setInt8(1,2147483649),!Y.getInt8(0)&&Y.getInt8(1)||l(b[v],{setInt8:function(t,e){X.call(this,t,e<<24>>24)},setUint8:function(t,e){X.call(this,t,e<<24>>24)}},!0)}else x=function(t){u(this,x,"ArrayBuffer");var e=m(t);this._b=_.call(new Array(e),0),this[D]=e},b=function(t,e,i){u(this,b,"DataView"),u(t,x,"DataView");var n=t[D],s=h(e);if(s<0||s>n)throw w("Wrong offset!");if(s+(i=void 0===i?n-s:d(i))>n)throw w("Wrong length!");this[I]=t,this[T]=s,this[D]=i},s&&(N(x,"byteLength","_l"),N(b,"buffer","_b"),N(b,"byteLength","_l"),N(b,"byteOffset","_o")),l(b[v],{getInt8:function(t){return q(this,1,t)[0]<<24>>24},getUint8:function(t){return q(this,1,t)[0]},getInt16:function(t){var e=q(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=q(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return L(q(this,4,t,arguments[1]))},getUint32:function(t){return L(q(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return $(q(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return $(q(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){z(this,1,t,R,e)},setUint8:function(t,e){z(this,1,t,R,e)},setInt16:function(t,e){z(this,2,t,F,e,arguments[2])},setUint16:function(t,e){z(this,2,t,F,e,arguments[2])},setInt32:function(t,e){z(this,4,t,O,e,arguments[2])},setUint32:function(t,e){z(this,4,t,O,e,arguments[2])},setFloat32:function(t,e){z(this,4,t,G,e,arguments[2])},setFloat64:function(t,e){z(this,8,t,j,e,arguments[2])}});g(x,"ArrayBuffer"),g(b,"DataView"),a(b[v],o.VIEW,!0),e.ArrayBuffer=x,e.DataView=b},function(t,e,i){var n,s,r;
/*!
 * jQuery UI Mouse 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */s=[i(20),i(159),i(25),i(86)],void 0===(r="function"==typeof(n=function(t){var e=!1;return t(document).on("mouseup",function(){e=!1}),t.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.on("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).on("click."+this.widgetName,function(i){if(!0===t.data(i.target,e.widgetName+".preventClickEvent"))return t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!e){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var n=this,s=1===i.which,r=!("string"!=typeof this.options.cancel||!i.target.nodeName)&&t(i.target).closest(this.options.cancel).length;return!(s&&!r&&this._mouseCapture(i)&&(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=!1!==this._mouseStart(i),!this._mouseStarted)?(i.preventDefault(),0):(!0===t.data(i.target,this.widgetName+".preventClickEvent")&&t.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return n._mouseMove(t)},this._mouseUpDelegate=function(t){return n._mouseUp(t)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),e=!0,0)))}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)if(e.originalEvent.altKey||e.originalEvent.ctrlKey||e.originalEvent.metaKey||e.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(i){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,i.target===this._mouseDownEvent.target&&t.data(i.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(i)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,e=!1,i.preventDefault()},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})?n.apply(e,s):n)||(t.exports=r)},function(t,e,i){"use strict";var n=i(3);function s(){this.viewCenter=new n.b2Vec2(0,20),this.viewRotation=new n.b2Rot(Object(n.b2DegToRad)(0))}function r(t,e,i){return i?t|e:t&~e}s.prototype.canvasScale=32,delete s.prototype.canvasScale,Object.defineProperty(s.prototype,"canvasScale",{get:function(){return $gv.CANVAS_SCALE},set:function(t){$gv.CANVAS_SCALE=t}}),s.prototype.viewZoom=1,s.prototype.viewCenter=null,s.prototype.viewRotation=null,s.prototype.drawShapes=!0,s.prototype.drawJoints=!0,s.prototype.drawAABBs=!1,s.prototype.drawCOMs=!0,s.prototype.drawControllers=!0,s.prototype.drawParticle=!0;class o extends n.b2Draw{constructor(t){super(...arguments),this.m_ctx=t;let e=this.m_settings=new s,i=n.b2DrawFlags.e_none;e.drawShapes&&(i|=n.b2DrawFlags.e_shapeBit),e.drawJoints&&(i|=n.b2DrawFlags.e_jointBit),e.drawAABBs&&(i|=n.b2DrawFlags.e_aabbBit),e.drawCOMs&&(i|=n.b2DrawFlags.e_centerOfMassBit),e.drawControllers&&(i|=n.b2DrawFlags.e_controllerBit),e.drawParticle&&(i|=n.b2DrawFlags.e_particleBit),this.SetFlags(i)}set flag_drawAll(t){this.m_drawFlags=t?n.b2DrawFlags.e_all:n.b2DrawFlags.e_noneBit}set flag_drawShape(t){this.m_drawFlags=r(this.m_drawFlags,n.b2DrawFlags.e_shapeBit,t)}set flag_drawJoint(t){this.m_drawFlags=r(this.m_drawFlags,n.b2DrawFlags.e_jointBit,t)}set flag_drawAabb(t){this.m_drawFlags=r(this.m_drawFlags,n.b2DrawFlags.e_aabbBit,t)}set flag_drawPair(t){this.m_drawFlags=r(this.m_drawFlags,n.b2DrawFlags.e_pairBit,t)}set flag_drawCenterOfMass(t){this.m_drawFlags=r(this.m_drawFlags,n.b2DrawFlags.e_centerOfMassBit,t)}set flag_drawParticle(t){this.m_drawFlags=r(this.m_drawFlags,n.b2DrawFlags.e_particleBit,t)}set flag_drawController(t){this.m_drawFlags=r(this.m_drawFlags,n.b2DrawFlags.e_controllerBit,t)}get flag_drawShape(){return this.m_drawFlags&n.b2DrawFlags.e_shapeBit}get flag_drawJoint(){return this.m_drawFlags&n.b2DrawFlags.e_jointBit}get flag_drawAabb(){return this.m_drawFlags&n.b2DrawFlags.e_aabbBit}get flag_drawPair(){return this.m_drawFlags&n.b2DrawFlags.e_pairBit}get flag_drawCenterOfMass(){return this.m_drawFlags&n.b2DrawFlags.e_centerOfMassBit}get flag_drawParticle(){return this.m_drawFlags&n.b2DrawFlags.e_particleBit}get flag_drawController(){return this.m_drawFlags&n.b2DrawFlags.e_controllerBit}}o.prototype.m_ctx=null,o.prototype.m_settings=null,o.prototype.PushTransform=function(t){let e=this.m_ctx;e.save(),e.translate(t.p.x,t.p.y),e.rotate(t.q.GetAngle())},o.prototype.PopTransform=function(t){this.m_ctx.restore()},o.prototype.DrawPolygon=function(t,e,i){if(!e)return;let n=this.m_ctx;n.beginPath(),n.moveTo(t[0].x,t[0].y);for(let i=1;i<e;i++)n.lineTo(t[i].x,t[i].y);n.closePath(),n.strokeStyle=i.MakeStyleString(1),n.stroke()},o.prototype.DrawSolidPolygon=function(t,e,i){if(!e)return;let n=this.m_ctx;n.beginPath(),n.moveTo(t[0].x,t[0].y);for(let i=1;i<e;i++)n.lineTo(t[i].x,t[i].y);n.closePath(),n.fillStyle=i.MakeStyleString(.5),n.fill(),n.strokeStyle=i.MakeStyleString(1),n.stroke()},o.prototype.DrawCircle=function(t,e,i){if(!e)return;let s=this.m_ctx;s.beginPath(),s.arc(t.x,t.y,e,0,2*n.b2_pi,!0),s.strokeStyle=i.MakeStyleString(1),s.stroke()},o.prototype.DrawSolidCircle=function(t,e,i,s){if(!e)return;let r=this.m_ctx,o=t.x,a=t.y;r.beginPath(),r.arc(o,a,e,0,2*n.b2_pi,!0),r.moveTo(o,a),r.lineTo(o+i.x*e,a+i.y*e),r.fillStyle=s.MakeStyleString(.5),r.fill(),r.strokeStyle=s.MakeStyleString(1),r.stroke()},o.prototype.DrawParticles=function(t,e,i,n){const s=this.m_ctx;if(s)if(null!==i)for(let r=0;r<n;++r){let n=t[r],o=i[r];s.fillStyle=o.MakeStyleString(.5),s.fillRect(n.x-e,n.y-e,2*e,2*e)}else{s.fillStyle="rgba(255,255,255,0.5)",s.beginPath();for(let i=0;i<n;++i){let n=t[i];s.rect(n.x-e,n.y-e,2*e,2*e)}s.fill()}},o.prototype.DrawSegment=function(t,e,i){let n=this.m_ctx;n.beginPath(),n.moveTo(t.x,t.y),n.lineTo(e.x,e.y),n.strokeStyle=i.MakeStyleString(1),n.stroke()},o.prototype.DrawTransform=function(t){let e=this.m_ctx;this.PushTransform(t),e.beginPath(),e.moveTo(0,0),e.lineTo(1,0),e.strokeStyle=n.b2Color.RED.MakeStyleString(1),e.stroke(),e.beginPath(),e.moveTo(0,0),e.lineTo(0,1),e.strokeStyle=n.b2Color.GREEN.MakeStyleString(1),e.stroke(),this.PopTransform(t)},o.prototype.DrawPoint=function(t,e,i){let n=this.m_ctx;n.fillStyle=i.MakeStyleString(),e/=this.m_settings.viewZoom;let s=(e/=this.m_settings.canvasScale)/2;n.fillRect(t.x-s,t.y-s,e,e)},o.prototype.DrawString=function(t,e,i,n){let s=this.m_ctx;const r=s.font;let a=Array.prototype.slice.call(arguments),l=goog.string.format.apply(null,a.slice(2));s.save(),s.setTransform(1,0,0,1,0,0),s.font="18pt helvetica";let c=o.prototype.DrawString.s_color;s.fillStyle=c.MakeStyleString(),s.fillText(l,t,e),s.restore(),s.font=r},o.prototype.DrawString.s_color=new n.b2Color(.9,.6,.6),o.prototype.DrawStringWorld=function(t,e,i,s){let r=o.prototype.DrawStringWorld.s_p.Set(t,e),a=this.m_settings.viewCenter;n.b2Vec2.SubVV(r,a,r);let l=this.m_settings.viewRotation;n.b2Rot.MulTRV(l,r,r);let c=this.m_settings.viewZoom;n.b2Vec2.MulSV(c,r,r);let u=this.m_settings.canvasScale;n.b2Vec2.MulSV(u,r,r),r.y*=-1;let h=o.prototype.DrawStringWorld.s_cc.Set(.5*this.m_canvas.width,.5*this.m_canvas.height);n.b2Vec2.AddVV(r,h,r);let d=this.m_ctx;const m=d.font;let p=Array.prototype.slice.call(arguments),f=goog.string.format.apply(null,p.slice(2));d.save(),d.setTransform(1,0,0,1,0,0),d.font="18pt helvetica";let _=o.prototype.DrawStringWorld.s_color;d.fillStyle=_.MakeStyleString(),d.fillText(f,r.x,r.y),d.restore(),d.font=m},o.prototype.DrawStringWorld.s_p=new n.b2Vec2,o.prototype.DrawStringWorld.s_cc=new n.b2Vec2,o.prototype.DrawStringWorld.s_color=new n.b2Color(.5,.9,.5),o.prototype.DrawAABB=function(t,e){let i=this.m_ctx;i.strokeStyle=e.MakeStyleString();let n=t.lowerBound.x,s=t.lowerBound.y,r=t.upperBound.x-t.lowerBound.x,o=t.upperBound.y-t.lowerBound.y;i.strokeRect(n,s,r,o)};var a=o,l=i(421),c=i(422),u=i(65),h=i(423),d=(i(120),i(18),i(59));i.d(e,"a",function(){return f}),window.$gravityAcc=2e3,window.$positionIterations=3,window.$velocityIterations=8,window.$particleIterations=1,window.$particleRadius=10;const m=new n.b2Vec2(0,window.$gravityAcc/$gv.CANVAS_SCALE);class p extends n.b2ContactListener{BeginContact(t){const e=t.m_fixtureA,i=t.m_fixtureB,n=t.m_indexA,s=t.m_indexB;e.beginContact.call(e.m_userData,t,e,i,n,s),i.beginContact.call(i.m_userData,t,i,e,s,n)}EndContact(t){const e=t.m_fixtureA,i=t.m_fixtureB,n=t.m_indexA,s=t.m_indexB;e.endContact.call(e.m_userData,t,e,i,n,s),i.endContact.call(i.m_userData,t,i,e,s,n)}PreSolve(t,e){const i=t.m_fixtureA,n=t.m_fixtureB,s=t.m_indexA,r=t.m_indexB;i.preSolve.call(i.m_userData,t,e,i,n,s,r),n.preSolve.call(n.m_userData,t,e,n,i,r,s)}PostSolve(t,e){const i=t.m_fixtureA,n=t.m_fixtureB,s=t.m_indexA,r=t.m_indexB;i.postSolve.call(i.m_userData,t,e,i,n,s,r),n.postSolve.call(n.m_userData,t,e,n,i,r,s)}}class f extends n.b2World{constructor(){super(m),this.m_debugDraw=new a,this.SetDebugDraw(this.m_debugDraw),this.SetContactListener(new p),this.ground=new l.a,this.ladderRope=[],this.mapBound_body=null,this.stop=!1,this.$_mouseJoint=null,this._onceAfterStep=[],this._destryBodyList=[],this._DestroyBody=this.DestroyBody,this.DestroyBody=(t=>{this.m_locked?this._destryBodyList.push(t):this._DestroyBody(t)}),this.draw_foothold_path_count=1}$test_b2ParticleSystem(){const t=n.b2ParticleFlag.b2_elasticParticle,e=new n.b2ParticleSystemDef;this.m_particleSystem=this.CreateParticleSystem(e),this.m_particleSystem.SetGravityScale(0),this.m_particleSystem.SetRadius(10/$gv.CANVAS_SCALE),this.m_particleSystem.SetDamping(.2);{const e=new n.b2CircleShape;e.m_p.Set(0,2),e.m_radius=3;const i=new n.b2ParticleGroupDef;i.flags=t,i.shape=e;const s=this.m_particleSystem.CreateParticleGroup(i);i.flags&n.b2ParticleFlag.b2_colorMixingParticle&&this.ColorParticleGroup(s,0)}window.m_particleSystem=this.m_particleSystem,this.$vbo_ps=null}async load(t){this.ground.load(t,this),this.ladderRope=c.a.load(t,this)}unload(){this.IsLocked()?console.error("world is locked, world can not unload"):(this.ground.unload(this),this.ladderRope.length=0,this.DestroyBody(this.mapBound_body))}createMob(t){let e=new h.a(t);return e._create(this),e}destroyMob(t){return t.$physics._destroy(this),t.$physics=null,!0}createNpc(t){return null}destroyNpc(t){return!1}createPortal(t){const e=t.compute_rectangle(0);if(e){const i=e.width/2/$gv.CANVAS_SCALE*.4,s=e.height/2/$gv.CANVAS_SCALE*.2;let r,o=new n.b2BodyDef,a=new n.b2FixtureDef;a.filter.Copy(d.FilterHelper.get("portal")),o.userData=t,o.type=n.b2BodyType.b2_staticBody,o.position.Set(t.x/$gv.CANVAS_SCALE,t.y/$gv.CANVAS_SCALE);let l=this.CreateBody(o);l.$type="portal",r=new n.b2PolygonShape,window.MAP_PORTAL_FULL_SIZE?r.SetAsBox(e.width/2/$gv.CANVAS_SCALE,e.height/2/$gv.CANVAS_SCALE,new n.b2Vec2(-t.textures[0].x/$gv.CANVAS_SCALE,-t.textures[0].y/$gv.CANVAS_SCALE),0):r.SetAsBox(i,s,new n.b2Vec2(0,-s),0),a.isSensor=!0,a.shape=r,a.filter=d.FilterHelper.get("portal"),a.userData=t,a.$type="portal";l.CreateFixture(a);return t.body=l,l}}_createMapBound(t){let{left:e,top:i,right:s,bottom:r}=t;e/=$gv.CANVAS_SCALE,s/=$gv.CANVAS_SCALE,i/=$gv.CANVAS_SCALE,r/=$gv.CANVAS_SCALE;let o=new n.b2BodyDef,a=new n.b2FixtureDef,l=new n.b2EdgeShape;a.$type="MapBorder",a.shape=l,a.filter.Copy(d.FilterHelper.get("map_border"));let c=this.CreateBody(o);c.$type="MapBorder",l.m_vertex1.Set(e,i),l.m_vertex2.Set(s,i),c.CreateFixture(a),l.m_vertex1.Set(e,r),l.m_vertex2.Set(s,r),c.CreateFixture(a),l.m_vertex1.Set(e,i),l.m_vertex2.Set(e,r),c.CreateFixture(a),l.m_vertex1.Set(s,i),l.m_vertex2.Set(s,r),c.CreateFixture(a),this.player&&this.player.setPosition(.5*(s+e),.5*(r+i),!0),this.mapBound_body=c}$createPlayer(t,e){t&&e||alert("$createPlayer(sceneObject, renderer)");let i=new u.a;return i._create(this),i.chara=t,i.renderer=e,this.player=i,i}$createRemotePlayer(t,e){t&&e||alert("$createRemotePlayer(sceneObject, renderer)");let i=new u.b;return i._create(this),i.renderer=e,i}onceUnlock(t){this.m_locked?this._onceAfterStep.push(t):t()}doAfterStep(t){this._onceAfterStep.push(t)}$_mouseDown(t){if(null!=this.$_mouseJoint)return;let e=new n.b2AABB,i=new n.b2Vec2;i.Set(.001,.001),n.b2Vec2.SubVV(t,i,e.lowerBound),n.b2Vec2.AddVV(t,i,e.upperBound);let s=null;if(this.QueryAABB(function(e){e.GetBody();return!e.TestPoint(t)||(s=e,!1)},e),s){let e=s.GetBody(),i=new n.b2MouseJointDef;i.bodyA=this.ground.bodies[0],i.bodyB=e,i.target.Copy(t),i.maxForce=1e3*e.GetMass(),this.$_mouseJoint=this.CreateJoint(i),e.SetAwake(!0)}}$_mouseUp(t){this.$_mouseJoint&&(this.DestroyJoint(this.$_mouseJoint),this.$_mouseJoint=null)}$_mouseMove(t){this.$_mouseJoint&&this.$_mouseJoint.SetTarget(t)}$_onMouseEvent(){const t=($gv.m_viewRect.left+$gv.mouse_x)/$gv.CANVAS_SCALE,e=($gv.m_viewRect.top+$gv.mouse_y)/$gv.CANVAS_SCALE,i=new n.b2Vec2(t,e);$gv.mouse_dl&&this.$_mouseDown(i),$gv.mouse_ul&&($gv.mouse_ul=0,this.$_mouseUp(i)),$gv.mouse_move&&($gv.mouse_move=0,this.$_mouseMove(i))}update(t){if(!this.stop){this.$_onMouseEvent();for(let e=this.GetBodyList();e;e=e.m_next)e.Step(t);super.Step(1/$gv.MAX_FPS,window.$velocityIterations,window.$positionIterations,window.$particleIterations);for(let e=this.GetBodyList();e;e=e.m_next)e.AfterStep(t);this._onceAfterStep&&(this._onceAfterStep.forEach(t=>t()),this._onceAfterStep.length=0),this._destryBodyList&&(this._destryBodyList.forEach(t=>this._DestroyBody(t)),this._destryBodyList.length=0)}}render(t){const e=t.ctx,i=window.chara?window.chara.$physics:this.player;if($gv.m_display_physics_debug){const t=this.m_debugDraw.m_settings;this.m_debugDraw.m_ctx=e;e.canvas.width,e.canvas.height;if(e.save(),e.scale(t.canvasScale,t.canvasScale),e.lineWidth/=t.canvasScale,e.scale(t.viewZoom,t.viewZoom),e.lineWidth/=t.viewZoom,this.DrawDebugData(),i&&i.body){const t=i.getPosition();e.fillStyle="#F00A",i.state.front>0?e.fillRect(t.x,t.y,1,1):i.state.front<0?e.fillRect(t.x-1,t.y,1,1):e.fillRect(t.x-.5,t.y,1,1)}e.restore()}if($gv.m_display_particleSystem)if(t.gl){const t=this.gl;if(this.$vbo_ps){const e=this.m_particleSystem.GetParticleCount(),i=this.m_particleSystem.GetPositionBuffer();let n=new Float32Array(2*e);for(let t=0;t<e;t+=2)n[t+0]=i[t].x,n[t+1]=i[t].y;t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW)}else{let e=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,e);const i=this.m_particleSystem.GetParticleCount(),n=this.m_particleSystem.GetPositionBuffer();let s=new Float32Array(2*i);for(let t=0;t<i;t+=2)s[t+0]=n[t].x,s[t+1]=n[t].y;t.bufferData(t.ARRAY_BUFFER,s,t.STATIC_DRAW),this.$vbo_ps=e}for(let e=this.m_particleSystem.m_groupList;e;e=e.m_next){let i=e.GetParticleCount(),n=e.GetBufferIndex();t.drawArrays(t.POINTS,n,i)}}else if(e)if($gv.func)$gv.func.call(this,e,t);else{const i=this.m_particleSystem.m_positionBuffer.data;this.m_particleSystem.m_colorBuffer.data,this.m_particleSystem.m_weightBuffer.data;t.pushMatrix();const n=window.$particleRadius,s=2*n;if(!this.$particle_grd){let t=e.createRadialGradient(n,n,0,n,n,s);t.addColorStop(0,"#0744"),t.addColorStop(1,"#07440"),this.$particle_grd=t}for(let r=this.m_particleSystem.m_groupList;r;r=r.m_next)for(let o=r.m_firstIndex;o<r.m_lastIndex;++o){let r=i[o].x*$gv.CANVAS_SCALE-n,a=i[o].y*$gv.CANVAS_SCALE-n;t.setTransform(1,0,0,1,$gv.m_viewRect.left+r,$gv.m_viewRect.top+a),e.beginPath(),e.fillStyle=this.$particle_grd,e.fillRect(n,n,2*s,2*s)}t.popMatrix()}if($gv.m_display_foothold){let n,s;if(e.save(),this.ground.$drawDebugInfo(t),i&&i._foothold&&i._foothold.$drawDebugInfo2(t,"#FF0"),i&&(n=i.$foothold,s=i.ladder),n&&this.draw_foothold_path_count){n.$drawDebugInfo2(t,"#F00");let s=this.draw_foothold_path_count;if(e.lineWidth=2.5,e.strokeStyle="#00FE",i.state.front>0)for(n=this.ground.footholds[n.next];n&&(n._drawLine(e),!(--s<=0));n=this.ground.footholds[n.next]);else if(i.state.front<0)for(n=this.ground.footholds[n.prev];n&&(n._drawLine(e),!(--s<=0));n=this.ground.footholds[n.prev]);}this.ladderRope.forEach(t=>{const i=t.calcWidth();e.beginPath(),e.rect(t.x-.5*i,t.y1,i,t.y2-t.y1),e.fillStyle=t==s?"#E117":"#EB17",e.fill()}),e.restore()}}}},function(t,e,i){"use strict";i.d(e,"a",function(){return M});var n=i(4),s=i(88),r=i(47),o=(i(7),i(18)),a=i(17),l=i(6),c=i(90);let u={},h={};class d extends a.b{constructor(t,e){super(t,e),this._raw.origin&&(this._raw.origin.__proto__=l.c.prototype);for(let t in this._raw.map)this._raw.map[t].__proto__=l.c.prototype;this.relative=new l.c(0,0),this.calcRelative=this._calcRelative,this.filter=new o.e,this.opacity=1,this._slot=null,this._place=null,this.classList=null}get z(){return u[this._raw.z]||1}set z(t){console.warn("Not implement")}get order(){return this.z}set order(t){console.warn(new Error("Not implement").stack)}get origin(){return this._raw.origin||l.c.empty}isHasAnchor(){return!!this._raw.map}get brow(){return this._raw.map.brow}isAnchorBrow(){return!!this._raw.map.brow}get neck(){return this._raw.map.neck}isAnchorNeck(){return!!this._raw.map.neck}get navel(){return this._raw.map.navel}isAnchorNavel(){return!!this._raw.map.navel}get hand(){return this._raw.map.hand}isAnchorHand(){return!!this._raw.map.hand}get handMove(){return this._raw.map.handMove}isAnchorHandMove(){return!!this._raw.map.handMove}get _earBelowHead(){return this._raw.map.earBelowHead}isAnchor_EarBelowHead(){return!!this._raw.map.earBelowHead}get _earOverHead(){return this._raw.map.earOverHead}isAnchor_EarOverHead(){return!!this._raw.map.earOverHead}_anchor(t,e,i){return e[i].sub(t[i]).add(e.origin.sub(t.origin))}_calcRelative(t){return this.calcRelative=this._getRelativeFunction(t),this.calcRelative(t)}_getRelativeFunction(t){return this.isHasAnchor()?this.isAnchorNeck()?this._calcRelative_neck:this.isAnchorBrow()?this._calcRelative_brow:this.isAnchorNavel()?this==t.slots.body?this._getOrigin:this._calcRelative_navel:this.isAnchorHand()?this._calcRelative_hand:this.isAnchorHandMove()?this._url.lastIndexOf("lHand")>0?this._calcRelative_handMove_lHand:this._calcRelative_handMove:void 0:this._calcRelativeEmpty}_calcRelativeEmpty(t){return l.c.empty}_getOrigin(){return this.origin}_calcRelative_neck(t){const e=t.slots.body.fragments.body.getTexture(t);return this._anchor(this,e,"neck").sub(e.origin)}_calcRelative_brow(t){const e=t.slots.body.fragments.body.getTexture(t),i=t.slots.head.fragments.head.getTexture(t);return this._anchor(this,i,"brow").add(this._anchor(i,e,"neck")).sub(e.origin)}_calcRelative_navel(t){return t.slots.body.fragments.body.getTexture(t).navel.sub(this.navel,this.origin)}_calcRelative_hand(t){const e=t.slots.body.fragments.body.getTexture(t),i=t.slots.body.fragments.arm.getTexture(t);return null==i?l.c.empty.sub(this.hand).sub(this.origin).sub(e.origin):this._anchor(this,i,"hand").sub(this._anchor(e,i,"navel")).sub(e.origin)}_calcRelative_handMove(t){return l.c.empty.sub(this.origin).sub(this.handMove)}_calcRelative_handMove_lHand(t){return l.c.empty.sub(this.origin)}update(t){this.relative=this.calcRelative(t)}render(t,e){if(!this.relative)return;const i=this.relative.x,n=this.relative.y;t.globalAlpha=this.opacity||1,this.filter.isEmpty?t.drawGraph2(this,i,n):(t.ctx.filter=this.filter.toString(),t.drawGraph2(this,i,n),t.ctx.filter="none")}}class m extends d{constructor(...t){super(...t),this.graph2=null,this.graph3=null}update(t){this.relative=this.calcRelative(t),this.graph2&&(this.graph2.relative=this.relative),this.graph3&&(this.graph3.relative=this.relative)}render(t,e){this.relative&&(t.globalAlpha=this.opacity||1,this.filter.isEmpty?this._render(t):(t.ctx.filter=this.filter.toString(),this._render(t),t.ctx.filter="none"))}_render(t){const e=this.relative.x,i=this.relative.y;t.drawGraph2(this,e,i),this.graph2&&this.graph2.opacity&&(t.globalAlpha=this.graph2.opacity,t.drawGraph2(this.graph2,e,i)),this.graph3&&this.graph3.opacity&&(t.globalAlpha=this.graph3.opacity,t.drawGraph2(this.graph3,e,i))}}class p extends r.a{constructor(t,e){super(t,e),Object.defineProperty(this,"_raw",{value:t}),this.__getAttr("z",-1),this.__getAttr("pos",1),super.load()}__getAttr(t,e){t in this._raw?this[t]=this._raw[t]:this[t]=e}render(t,e,i,n){if(e)this.draw(t,0,0,-i,n);else{const e=.25*-this.texture.height;this.draw(t,0,e,0,n)}}}class f{constructor(){this._raw=null,this.animation={},this.action=null,this.time=0,this.frame=0,this.fixed=0,this.z=-2,this.action=1,this.actionExceptRotation=0}static async Init(){try{let t=f._list,e=$get.list("/Effect/ItemEff");t.clear(),e.forEach(e=>{t.add(parseInt(e,10))})}catch(t){return!1}}static async load(t){let e=new f;return await e.load(t),e}async load(t){const e=Number(t),i=`/Effect/ItemEff/${e}/effect`;if(!f._list.has(e))return null;let n=await $get.data(i);return n?await this._load(t,i,n):null}update(t,e){e in this.animation?this.action=e:this.action="default",this.animation[this.action]&&this.animation[this.action].update(t)}render(t,e){this.animation&&this.animation[this.action]&&this.animation[this.action].render(t,this.actionExceptRotation,e.angle,e.front>0)}async _load(t,e,i){this.id=t,Object.defineProperty(this,"_raw",{value:i}),this.__construct()}__construct(){this.__getAttr("fixed",0),this.__getAttr("z",-1),this.__getAttr("action",1),this.__getAttr("actionExceptRotation",0);for(let t in this._raw)this._raw[t]&&"object"==typeof this._raw[t]&&"0"in this._raw[t]&&(this.animation[t]=new p(this._raw[t],[this._url,t].join("/")))}__getAttr(t,e){t in this._raw?this[t]=this._raw[t]:this[t]=e}}f._list=new Set;class _{constructor(t){this.textures=t}getTexture(t,e){throw new Error("Not implement")}}class g extends _{constructor(t){super(t)}getTexture(t){return this.getFrameTexture(t,t.action_frame)}getFrameTexture(t,e){if(!(t.action in this.textures))return null;let i=this.textures[t.action][e];return i||null}}class v extends _{constructor(t){super(t)}getTexture(t){return this.getFrameTexture(t,t.emotion_frame)}getFrameTexture(t,e){if(!(t.emotion in this.textures))return null;return this.textures[t.emotion][e]}}class y{constructor(t){this.equip=t}get hue(){const t=this.equip;for(let e in t.fragments)for(let i in t.fragments[e].textures)for(let n=0;n<t.fragments[e].textures[i].length;++n){let s=t.fragments[e].textures[i][n];if(s)return s.filter.hue}}set hue(t){const e=this.equip;for(let i in e.fragments)for(let n in e.fragments[i].textures)for(let s=0;s<e.fragments[i].textures[n].length;++s){let r=e.fragments[i].textures[n][s];r&&(r.filter.hue=t)}}get sat(){const t=this.equip;for(let e in t.fragments)for(let i in t.fragments[e].textures)for(let n=0;n<t.fragments[e].textures[i].length;++n){let s=t.fragments[e].textures[i][n];if(s)return s.filter.sat}}set sat(t){const e=this.equip;for(let i in e.fragments)for(let n in e.fragments[i].textures)for(let s=0;s<e.fragments[i].textures[n].length;++s){let r=e.fragments[i].textures[n][s];r&&(r.filter.sat=t)}}get bri(){const t=this.equip;for(let e in t.fragments)for(let i in t.fragments[e].textures)for(let n=0;n<t.fragments[e].textures[i].length;++n){let s=t.fragments[e].textures[i][n];if(s)return s.filter.bri}}set bri(t){const e=this.equip;for(let i in e.fragments)for(let n in e.fragments[i].textures)for(let s=0;s<e.fragments[i].textures[n].length;++s){let r=e.fragments[i].textures[n][s];r&&(r.filter.bri=t)}}get contrast(){const t=this.equip;for(let e in t.fragments)for(let i in t.fragments[e].textures)for(let n=0;n<t.fragments[e].textures[i].length;++n){let s=t.fragments[e].textures[i][n];if(s)return s.filter.contrast}}set contrast(t){const e=this.equip;for(let i in e.fragments)for(let n in e.fragments[i].textures)for(let s=0;s<e.fragments[i].textures[n].length;++s){let r=e.fragments[i].textures[n][s];r&&(r.filter.contrast=t)}}toJSON(){return{hue:this.hue,sat:this.sat,bri:this.bri,contrast:this.contrast}}}class x{constructor(){}get _animation_type(){throw new Error("Not Implement")}isLoaded(){return!1}_unload(){}getFrameCount(t){return 0}getDelay(t){return 0}toJSON(){return{id:-1}}}class b extends x{constructor(){super(),this._raw=null,this.effect=null,this.fragments=null,this._onload=null,this.id=null,this.categoryInfo=null,this.slot_order=0,this.islot={},this.vslot={},this.filter=new y(this)}toJSON(){return{id:this.id,filter:this.filter.toJSON()}}isLoaded(){return null!=this.fragments}get _onload(){return this.__onload}set _onload(t){this.__onload=t,this.isLoaded()&&this.__onload.call(this,this)}async load(t,e,i,n){let s,r;return this.id=e,this.categoryInfo=i,s=this.__load(t,e,i),i.path&&(r=$get.data(`/String/Eqp/Eqp/${i.path}/${Number(e)}`).then(t=>{t&&(this.name=t.name,this.desc=t.desc)},t=>{this.name="["+e+"]",this.desc=""})),new Promise(function(t){Promise.all([s,r]).then(function(e){t(e[0])})})}async __load(t,e,i){let s;return n.d.isEquipExist(e,i)&&(s=await $get.data(t)),!s&&load_extern_item_data&&(s=await load_extern_item_data(e)),!!s&&(Object.defineProperty(this,"_raw",{value:s}),this.__load_slot(),this.__load_fragments(),this._onload&&this._onload.call(this,this),f.load(this.id).then(t=>this.effect=t),!0)}__load_fragments(){const t=this.fragmentConstructor;let e=Object.keys(this._raw_textures),i={};for(let t of e)if("0"in this._raw_textures[t]){let e=this._base_path+t;i[t]=this.__load_frame_textures(this._raw_textures[t],e)}let n={};for(let t in i)for(let e in i[t])for(let s in i[t][e])s in n||(n[s]={}),t in n[s]||(n[s][t]=[]),n[s][t][e]=i[t][e][s];let s={};for(let e in n)s[e]=new t(n[e]);this.fragments=s}__load_frame_textures(t,e){let i=[];for(let n=0;n in t;++n){let s=`${e}/${n}`;i[n]=this.__load_place_textures(t[n],s)}return i}__load_place_textures(t,e){let i={};for(let e in t){let n=t[e];if(n){const t=this.FragmentTextureType;let s;""==n[""]?(s=new t(n),i[e]=s):"string"==typeof n[""]?(s=new t(n),i[e]=s):"hairShade"==e&&(s=new t(n[0]),i[e]=s),s&&(s._slot=this.categoryInfo.slot,s._place=e,s.classList=[s._slot,"item"+this.id,s._place,s._raw.z,"z"+s.z].join(" "))}}return i}get FragmentTextureType(){return d}__load_slot(){if(!this._raw.info.islot)return;let t=this._raw.info.islot.match(/([A-Z][a-z0-9])/g);for(let e in t){const i=t[e],n=u[i];this.islot[i]=n,n>this.slot_order&&(this.slot_order=n)}let e=this._raw.info.vslot.match(/([A-Z][a-z0-9])/g);for(let t in e){const i=e[t];this.vslot[i]=i}}_unload(){this.fragments=null,this.effect}get opacity(){for(let t in this.fragments)for(let e in this.fragments[t].textures)for(let i=0;i<this.fragments[t].textures[e].length;++i){let n=this.fragments[t].textures[e][i];if(n)return n.opacity}}set opacity(t){for(let e in this.fragments)for(let i in this.fragments[e].textures)for(let n=0;n<this.fragments[e].textures[i].length;++n){let s=this.fragments[e].textures[i][n];s&&(s.opacity=t)}}setFilter(t,e,i){for(let n in this.fragments)for(let s in this.fragments[n].textures)for(let r=0;r<this.fragments[n].textures[s].length;++r){let o=this.fragments[n].textures[s][r];o&&(o.filter.hue=t,o.filter.sat=e,o.filter.bri=i)}}getIconUrl(){return n.c.getIconUrl(this.id)}getIconRawUrl(){return n.c.getIconRawUrl(this.id)}get _raw_textures(){return this._raw}get _base_path(){return this._url}}class A extends b{constructor(){super()}get _animation_type(){return"action"}getFrameCount(t){try{return t.slots.body.fragments.body.textures[t.action].length}catch(t){return 0}}getDelay(t){try{const e=this._raw[t.action][t.action_frame].delay;if(null!=e)return!isNaN(e)&&isFinite(e),e}catch(t){}return 120}get fragmentConstructor(){return g}}class w extends A{constructor(){super()}get FragmentTextureType(){return m}}class S extends b{constructor(){super()}get _animation_type(){return"emotion"}getFrameCount(t){try{return t.slots.face.fragments.face.textures[t.emotion].length}catch(t){return 0}}getDelay(t){try{const e=this._raw[t.emotion][t.emotion_frame].delay;if(null!=e)//!isNaN(d) && isFinite(d)
return e}catch(t){}return 60}get fragmentConstructor(){return v}}n.c._info["0000"].fragmentType=class extends A{constructor(){super()}},n.c._info["0001"].fragmentType=class extends A{constructor(){super(),this.elfEarFragment=null,this.lefEarFragment=null,this.highlefEarFragment=null}__load_fragments(){super.__load_fragments(),this.fragments&&(this.fragments.ear&&(this.elfEarFragment=this.fragments.ear,delete this.fragments.ear),this.fragments.lefEar&&(this.lefEarFragment=this.fragments.lefEar,delete this.fragments.lefEar),this.fragments.highlefEar&&(this.highlefEarFragment=this.fragments.highlefEar,delete this.fragments.highlefEar))}get elfEar(){return null!=this.fragments.ear}set elfEar(t){this.elfEarFragment&&(t?this.fragments.ear=this.elfEarFragment:delete this.fragments.ear)}get lefEar(){return null!=this.fragments.lefEar}set lefEar(t){this.lefEarFragment&&(t?this.fragments.lefEar=this.lefEarFragment:delete this.fragments.lefEar)}get highlefEar(){return null!=this.fragments.highlefEar}set highlefEar(t){this.highlefEarFragment&&(t?this.fragments.highlefEar=this.highlefEarFragment:delete this.fragments.highlefEar)}},n.c._info["0002"].fragmentType=class extends S{constructor(){super()}},n.c._info["0003"].fragmentType=w,n.c._info["0004"].fragmentType=w,n.c._info["0100"].fragmentType=A,n.c._info["0101"].fragmentType=S,n.c._info["0102"].fragmentType=A,n.c._info["0103"].fragmentType=A,n.c._info["0104"].fragmentType=A,n.c._info["0105"].fragmentType=A,n.c._info["0106"].fragmentType=A,n.c._info["0107"].fragmentType=A,n.c._info["0108"].fragmentType=A,n.c._info["0109"].fragmentType=A,n.c._info["0110"].fragmentType=A,n.c._info["0170"].fragmentType=class extends A{constructor(){super(),this.use_category=null}async load(t,e,i,n){if(n||""==n)return this.use_category=n.slice(2,4),super.load(t,e,i);console.warn("no use_category")}get _raw_textures(){return this._raw[this.use_category]}get _base_path(){return this._url+this.use_category}};class C{constructor(){this._ordered_slot=[],this._hair=null,this._hair2=null,this._hairMix2=null,this._hair3=null,this._hairMix3=null,this.body=null,this.head=null,this.face=null,this.hair=null,this.cap=null,this.accessoryFace=null,this.accessoryEyes=null,this.accessoryEars=null,this.coat=null,this.longcoat=null,this.pants=null,this.shoes=null,this.glove=null,this.cape=null,this.shield=null,this.weapon=null,Object.defineProperty(this,"_ordered_slot",{configurable:!0,writable:!0,enumerable:!1,value:[]}),Object.defineProperty(this,"_hair",{writable:!0,enumerable:!1,value:null}),Object.defineProperty(this,"_hair2",{writable:!0,enumerable:!1,value:null}),Object.defineProperty(this,"_hairMix2",{writable:!0,enumerable:!1,value:null}),Object.defineProperty(this,"_hair3",{writable:!0,enumerable:!1,value:null}),Object.defineProperty(this,"_hairMix3",{writable:!0,enumerable:!1,value:null})}get hair(){return this._hair}set hair(t){this._hair=t,t&&(this._hair2&&this._hairMix2&&(this.hairColor2=this.hairColor2,this.hairMix2=this.hairMix2),this._hair3&&this._hairMix3&&(this.hairColor3=this.hairColor3,this.hairMix3=this.hairMix3))}async __loadColoredHair(t){const e=n.a.getColorHairID(this.hair.id,t),i=n.c.get(e);if(i){const t=`/Character/${i.path+(i.path?"/":"")+e}`,n=void 0;let s=new w;return await s.load(t,e,i,n),s}}get hairColor2(){if(this._hair2)return Number(n.a.getHairColor(this._hair2.id))}set hairColor2(t){if(!t)return void console.error(new TypeError);let e=n.a.getColorHairID(this.hair.id,t);this._hair2&&e==this._hair2.id||(e==this._hair.id?(this._hair2=null,this.hairMix2=0):(this.hair.$promise_hair2=this.__loadColoredHair(t),this.hair.$promise_hair2.then(t=>{delete this.hair.$promise_hair2,this._hair2=t,this._hair2&&null!=this.hairMix2&&(this.hairMix2=this.hairMix2)})))}get hairMix2(){return this._hairMix2}set hairMix2(t){t=Number(t),Promise.resolve(this.hair.$promise_hair2).then(()=>{let e=this._hair2,i=this.hair;if(e&&i){for(let n in e.fragments)for(let s in e.fragments[n].textures)for(let r=0;r<e.fragments[n].textures[s].length;++r){let o=e.fragments[n].textures[s][r],a=i.fragments[n].textures[s][r];a&&(a.graph2=o,a.graph2.opacity=t)}this._hairMix2=t}})}get hairColor3(){if(this._hair3)return Number(n.a.getHairColor(this._hair3.id))}set hairColor3(t){if(!t)return void console.error(new TypeError);let e=n.a.getColorHairID(this.hair.id,t);this._hair3&&this._hair3.id==e||(this._hair.id==e||this._hair2.id==e?(this._hair3=null,this.hairMix3=0):(this.hair.$promise_hair3=this.__loadColoredHair(t),this.hair.$promise_hair3.then(t=>{delete this.hair.$promise_hair3,this._hair3=t,this._hair3&&null!=this.hairMix3&&(this.hairMix3=this.hairMix3)})))}get hairMix3(){return this._hairMix3}set hairMix3(t){t=Number(t),Promise.resolve(this.hair.$promise_hair3).then(()=>{let e=this._hair3,i=this.hair;if(e&&i){for(let n in e.fragments)for(let s in e.fragments[n].textures)for(let r=0;r<e.fragments[n].textures[s].length;++r){let o=e.fragments[n].textures[s][r],a=i.fragments[n].textures[s][r];a&&(a.graph3=o,a.graph3.opacity=t)}this._hairMix3=t}})}async _use(t,e,i){if(!t)return;const s=n.c.get(t);if(s){let n,r=`/Character/${s.path+(s.path?"/":"")+t}`;if(e instanceof b)alert("CharacterSlots # _use: param loadedEquip ??"),n=e;else{e&&alert("CharacterSlots # _use: param loadedEquip ??"),n=new(s.fragmentType||A)}0,e||await n.load(r,t,s,i)?(this[s.slot]&&this[s.slot]._unload(),this[s.slot]=n,this._ordered_slot[n.slot_order]=n):console.warn("item("+t+") is not exist")}}_unuse(t){if(!t)return;let e,i;if(t instanceof b?(t=(i=t).id,e=i.categoryInfo):e=n.c.get(t),"head"!=e.slot&&"body"!=e.slot&&this[e.slot]&&this[e.slot].id==t){i=this[e.slot];for(let t in i.islot){let e=i.islot[t];this._ordered_slot[e]&&this._ordered_slot[e]._unload(),delete this._ordered_slot[e]}return!0}return!1}_clear(){this.face=null,this.hair=null,this.cap=null,this.accessoryFace=null,this.accessoryEyes=null,this.accessoryEars=null,this.coat=null,this.longcoat=null,this.pants=null,this.shoes=null,this.glove=null,this.cape=null,this.shield=null;let t=this.head,e=this.body;this._ordered_slot=[],t&&(this._ordered_slot[t.slot_order]=t),e&&(this._ordered_slot[e.slot_order]=e)}_stringify(){let t=["c"];if(this.body&&t.push(this.body.id),this.head&&t.push(this.head.id),this.face&&t.push(this.face.id+"|"+this.face.id),this.hair){let e=[];e.push(this.hair.id),this.hairColor2&&this.hairMix2>0&&e.push(this.hairColor2+"%"+Math.trunc(100*this.hairMix2)),this.hairColor3&&this.hairMix3>0&&e.push(this.hairColor3+"%"+Math.trunc(100*this.hairMix3)),t.push(e.join("|"))}return this.cap&&t.push(this.cap.id),this.accessoryFace&&t.push(this.accessoryFace.id),this.accessoryEyes&&t.push(this.accessoryEyes.id),this.accessoryEars&&t.push(this.accessoryEars.id),this.coat&&t.push(this.coat.id),this.longcoat&&t.push(this.longcoat.id),this.pants&&t.push(this.pants.id),this.shoes&&t.push(this.shoes.id),this.glove&&t.push(this.glove.id),this.shield&&t.push(this.shield.id),this.cape&&t.push(this.cape.id),this.weapon&&t.push(this.weapon.id),t.join(",")}toJSON(){let t=[];return this.body&&t.push(this.body.id),this.head&&t.push(this.head.id),this.face&&t.push(this.face.id),this.hair&&t.push(this.hair.id),this.cap&&t.push(this.cap.id),this.accessoryFace&&t.push(this.accessoryFace.id),this.accessoryEyes&&t.push(this.accessoryEyes.id),this.accessoryEars&&t.push(this.accessoryEars.id),this.coat&&t.push(this.coat.id),this.longcoat&&t.push(this.longcoat.id),this.pants&&t.push(this.pants.id),this.shoes&&t.push(this.shoes.id),this.glove&&t.push(this.glove.id),this.shield&&t.push(this.shield.id),this.cape&&t.push(this.cape.id),this.weapon&&t.push(this.weapon.id),t}*enumerate(){this.face&&(yield this.face),this.hair&&(yield this.hair),yield*this.enumerate_equip()}*enumerate_equip(){this.cap&&(yield this.cap),this.accessoryFace&&(yield this.accessoryFace),this.accessoryEyes&&(yield this.accessoryEyes),this.accessoryEars&&(yield this.accessoryEars),this.coat&&(yield this.coat),this.longcoat&&(yield this.longcoat),this.pants&&(yield this.pants),this.shoes&&(yield this.shoes),this.glove&&(yield this.glove),this.shield&&(yield this.shield),this.cape&&(yield this.cape),this.weapon&&(yield this.weapon)}*enumerate_face(){this.face&&(yield this.face),this.accessoryFace&&(yield this.accessoryFace)}}class B{constructor(){this.ear=void 0,this.useEquip=[],this.unuseEquip=[],this.hair2=void 0,this.hairMix2=void 0,this.weapon=void 0,this.weaponType=void 0}clear(){this.ear=void 0,this.useEquip=[],this.unuseEquip=[],this.hair2=void 0,this.hairMix2=void 0,this.weaponType=void 0}}class V{constructor(){this._$dirty=0,this.job=null,this.subJob=null,this.actani=new c.a,this.speed=1,this.fixed_speed=!1,this._action="stand1",this._action_frame=0,this._action_time=0,this._emotion="blink",this._emotion_frame=0,this._emotion_time=0,this._emotion_frame_sequence=[0,1,2,1],this.slots=new C,this.__require_update=!0,this.__frag_list=[],this.$$changeLog=new B}_clone(){alert(this.constructor.name+"::_clone");let t=new this.constructor;if(t){t.speed=0,t.x=this.x,t.y=this.y,t.angle=this.angle,t.action=this.action,t.action_frame=this.action_frame,t.emotion=this._emotion,t.emotion_frame=this.emotion_frame;for(let e in this.slots){this.slots[e]&&(t.slots[e]=this.slots[e])}return t}}_waitFrameTexturesLoaded(){let t=[];for(let e in this.slots){let i=this.slots[e];if(i){"function"!=typeof i.getFrameCount&&alert('typeof item.getFrameCount != "function"');let e=i.getFrameCount(this);for(let n in i.fragments){let s=i.fragments[n];for(let i=0;i<e;++i){let e=s.getFrameTexture(this,i);e&&!e._isLoaded_or_doload()&&t.push(e.$promise)}}}}return Promise.all(t)}initAnimation(){this.action="stand1",this._action_time=0,this._action_frame=0,this.emotion="blink",this._emotion_time=0,this._emotion_frame=0}getSpeed(){return this.fixed_speed?1:this.speed}get elfEar(){if(this.slots.head)return this.slots.head.elfEar}set elfEar(t){this.slots.head&&(this.slots.head.elfEar=t)}get lefEar(){if(this.slots.head)return this.slots.head.lefEar}set lefEar(t){this.slots.head&&(this.slots.head.lefEar=t)}get highlefEar(){if(this.slots.head)return this.slots.head.highlefEar}set highlefEar(t){this.slots.head&&(this.slots.head.highlefEar=t)}get ear(){if(this.slots.head)return this.slots.head.lefEar?"lef":this.slots.head.elfEar?"elf":this.slots.head.highlefEar?"highlef":"human"}set ear(t){this.slots.head?"elf"==t?(this.slots.head.elfEar=!0,this.slots.head.lefEar=!1,this.slots.head.highlefEar=!1,this.$$changeLog.ear=t):"lef"==t?(this.slots.head.lefEar=!0,this.slots.head.elfEar=!1,this.slots.head.highlefEar=!1,this.$$changeLog.ear=t):"highlef"==t?(this.slots.head.elfEar=!1,this.slots.head.lefEar=!1,this.slots.head.highlefEar=!0,this.$$changeLog.ear=t):(this.slots.head.elfEar=!1,this.slots.head.lefEar=!1,this.slots.head.highlefEar=!1,this.$$changeLog.ear="human"):this.$$changeLog.ear=void 0}get action(){return this._action}set action(t){this.actani._action!=t&&this.slots.body&&(this._action=t,this.actani.reload(t),this.__require_update|=!0)}get action_frame(){const t=this.action_frame_count;return t?this._action_frame%t:0}set action_frame(t){this._action_time=0,this._action_frame=t,this.__require_update|=!0}_get_action_next_frame(t){const e=this.action_frame_count;if(e){let i=this._action_frame+t;return i<0?e-1:i%e}return 0}get action_time(){return this._action_time}set action_time(t){this.action_frame_count&&(t<this.action_delay?this._action_time=t:(this._action_time=0,++this._action_frame,this.__require_update|=!0))}get action_delay(){return this.slots.body?this.slots.body.getDelay(this):180}get action_frame_count(){try{if(this.slots.body)return this.slots.body.getFrameCount(this)}catch(t){}return 0}get emotion(){return this._emotion}set emotion(t){this._emotion!=t&&this.slots.face&&this.slots.face._action_list.indexOf(t)>=0&&(this._emotion=t,this._emotion_frame=0,this._emotion_time=0,this._emotion_frame_sequence=[...k(this.emotion_frame_count)],this.__require_update|=!0)}*emotion_frame_sequence_generator(t){for(;;)for(yield*k(t);Math.random()<.5;)yield 0}get emotion_frame(){return this._emotion_frame_sequence[this._emotion_frame%this._emotion_frame_sequence.length]}set emotion_frame(t){this._emotion_frame=t,this._emotion_time=0,this.__require_update|=!0}_get_emotion_next_frame(t){let e=this._emotion_frame+t;return e=e<0?this._emotion_frame_sequence.length-1:e%this._emotion_frame_sequence.length,this._emotion_frame_sequence[e]}get emotion_time(){return this._emotion_time}set emotion_time(t){this.emotion_frame_count&&(t<this.emotion_delay?this._emotion_time=t:(this._emotion_time=0,++this._emotion_frame,this.__require_update|=!0))}get emotion_delay(){return this.slots.face?this.slots.face.getDelay(this):60}get emotion_frame_count(){try{if(this.slots.face)return this.slots.face.getFrameCount(this)}catch(t){}return 0}_update(t){this.actani?(this.actani.isEnd()&&this.actani.loop&&this.actani.reset(),this.actani.update(t,this)):this.action_time+=t,this.emotion_time+=t;for(let e in this.slots){let i=this.slots[e];i&&i.effect&&i.effect.update(t)}}update(t){t*=this.getSpeed(),this._update(t)}__forceUpdate(t){this._$dirty=-Math.random()+3.1415926535897*Math.random(),this._update(0|t),this.__update_frag_list()}_draw(t,e,i,n,s){t.pushGlobalAlpha(),this.__require_update&&(this.__update_frag_list(),this.__require_update=!1),this.__draw_list(t,this.__frag_list,e,i,n,s),t.popGlobalAlpha()}__draw_list(t,e,i,n,s,r){t.pushMatrix(),t.translate(i,n),t.rotate(window.m_a||s),r&&t.scale(-1,1);for(let e in this.slots){let i=this.slots[e];i&&i.effect&&i.effect.render(t,this)}for(let i in e){e[i].render(t,this)}t.popMatrix()}__add_equip_to_frag_list(t,e){if(null!=e&&!(e>0)){for(let i in e.vslot){t[e.vslot[i]]=[]}for(let i in e.fragments){let n=h[i];if(null!=n){let s=e.fragments[i].getTexture(this);s&&(t[n]?t[n].push(s):t[n]=[s])}else if("default"==i){let s=e.fragments[i].getTexture(this);n=e._raw.info.islot,s&&(t[n]?t[n].push(s):t[n]=[s])}else{let t=e.fragments[i].getTexture(this);t&&this.__add_frag_to_list(t)}}}}__update_frag_list(){this.__frag_list=[];let t={};for(let e=2;e<=3;++e){let i=this.slots["_hair"+e];this.__add_equip_to_frag_list(t,i)}for(let e in this.slots._ordered_slot){let i=this.slots._ordered_slot[e];this.__add_equip_to_frag_list(t,i)}let e=!1;for(let i in t){let n=t[i];for(let t in n){let i=n[t];if(e){if(i._place.startsWith("face"))continue}else i._place.startsWith("backHair")&&(e=!0);this.__add_frag_to_list(i)}}{let t=this.__frag_list[114];t&&this.__frag_list.push(t)}this._calcBoundBox()}__add_frag_to_list(t){t.update(this),this.__frag_list[t.z]=t}_calcBoundBox(){let t=0,e=0,i=0,n=0;for(let s in this.__frag_list){let r=this.__frag_list[s];if(r.texture){let s=r.relative.x,o=r.relative.y,a=s+r.width,l=o+r.height;t=Math.min(t,s),e=Math.min(e,o),i=Math.max(i,a),n=Math.max(n,l)}}return this._boundBox=new l.b(Math.trunc(t),Math.trunc(e),Math.trunc(i-t),Math.trunc(n-e)),this._boundBox}toJSON(){let t={hair2:this.slots._hair2.id,hairMix2:this.slots.hairMix2,slots:this.slots.toJSON()};return this.slots.head.elfEar?t.ear="elf":this.slots.head.lefEar?t.ear="lef":this.slots.head.highlefEar&&(t.ear="highlef"),t}}class M extends V{constructor(){super(),this.x=0,this.y=0,this.z=5,this.tx=0,this.ty=0,this.angle=0,this.front=-1,this.__load_task=[],this.render=function(t){},this._boundBox=null}static async Init(){let t=await Promise.all([$get.data("/zmap"),$get.data("/smap"),f.Init(),c.a.Init()]);u={},Object.keys(t[0]).reverse().forEach((t,e)=>u[t]=e+1),h=t[1]}load(){this.use("00002012"),this.use("00012012");let t=Promise.all([...this.__load_task]);return function(t,e){e.then(function(e){t.initAnimation(),t.render=t._render})}(this,t),t}update(t){this.waitLoaded(),super.update(t)}_render(t){const e=Math.trunc(this.x+this.tx),i=Math.trunc(this.y+this.ty);this._draw(t,e,i,this.angle,this.front>=1)}_setup_test(){this.use("00026509"),this.use("00044041"),this.use("01053169"),this.use("01071077")}async __synchronize(t){this.__forceUpdate(t),await this.waitLoaded(),await this._waitFrameTexturesLoaded()}async waitLoaded(){let t=this.__load_task;t&&t.length&&await Promise.all(t).then(()=>{this.__load_task=[]})}async use(t,e){switch(e||(e=n.c.getJobWeaponCategory(this.job)),t[0]){case"0":n.c.isCashWeapon(t)?this.$$changeLog.weapon=t:this.$$changeLog.useEquip.push(t);let i=this.slots._use(t,null,e);this.__load_task.push(i),await i,this._calcBoundBox()}}unuse(t){if("0"==t[0]){let e=this.slots._unuse(t);return e&&(this.$$changeLog.unuseEquip.push(t),this._calcBoundBox()),e}}_parse(t){if(!t)return;let e=t.split(",");this.slots._clear(),e.forEach((t,e,i)=>{if(t.indexOf("|")>=0){const e=t.split("|"),i=n.c.get(e[0]);let s;if("face"==i.slot)s=e[1],this.$$changeLog.useEquip.push(s),this.use(s);else if("hair"==i.slot){const t=this.slots;let i=e[1],n=e[2];s=e[0],this.$$changeLog.useEquip.push(s),this.use(s).then(()=>{if(i&&i.indexOf("%")>=0){let e=i.split("%");const n=e[0],s=e[1]/100;this.$$changeLog.hair2=n,this.$$changeLog.hairMix2=s,t.hairColor2=n,t.hairMix2=s}if(n&&n.indexOf("%")>=0){let e=n.split("%");const i=e[0],s=e[1]/100;this.$$changeLog.hair3=i,this.$$changeLog.hairMix3=s,t.hairColor3=e[0],t.hairMix4=e[1]/100}})}else"weapon"==i.slot&&(this.$$changeLog.weaponType=e[1],this.$$changeLog.weapon=s,this.use.apply(this,e,e[1]))}else Number.isFinite(parseInt(t,10))&&this.use(t)})}get hairColor(){return this.slots.hair?n.a.getHairColor(this.slots.hair.id):"0"}set hairColor(t){if(this.slots.hair&&t!=this.hairColor){let e=n.a.getColorHairID(this.slots.hair.id,t);this.use(e)}}get faceColor(){return this.slots.face?n.a.getFaceColor(this.slots.face.id):"0"}set faceColor(t){if(this.slots.face&&t!=this.faceColor){let e=n.a.getColorFaceID(this.slots.face.id,t);this.use(e)}}commitChange(t){if(t.ear&&(this.ear=t.ear),this.useEquip)for(let t of this.useEquip)this.use(t);if(this.unuseEquip)for(let t of this.unuseEquip)this.unuse(t);t.hair2&&t.hairMix2&&(this.slots.hairColor2=t.hair2,this.slots.hairMix2=t.hairMix2),t.hair3&&t.hairMix3,t.weapon&&t.weaponType&&this.use(t.weapon,t.weaponType)}_stringify(t){let e=this.slots._stringify();return t?`chara._parse('${e}')`:e}_outlink(){if(this.slots.body&&this.slots.body.id&&this.slots.face&&this.slots.face.id&&this.action&&this.emotion){let t="https://labs.maplestory.io/api/GMS/latest/character/center/"+this.slots.body.id+"/",e=[...this.slots.enumerate()].map(t=>parseInt(t.id,10));return e[0]=this.slots.face.id+":"+this.emotion,t+=e.join(","),t+="/"+this.action+"?showears="+(this.elfEar?"true":"false"),t+="&showLefEars="+(this.lefEar?"true":"false")}console.log("character need body, face, action, emotion")}_download(){window.open(this._outlink())}_save_as_svg(){this.__texture_to_base64().then(t=>{let e=this.id+".svg",i='<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd" >';i+='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink= "http://www.w3.org/1999/xlink">\n',i+='<g transform="translate(32, 96)">',t.forEach(function(t){if(t){let e=t.classList;i+=`\t<image class="${e}" opacity="${t.opacity}" x="${t.relative.x}" y="${t.relative.y}" width="${t.width}" height="${t.height}" xlink:href="${t._url}"></image>\n`}}),i+="</g>",i+='<text x="0" y="122" fill="transparent">'+this._stringify(!1)+"</text>",i+="</svg>",DownloadData(i,"image/svg+xml;utf8",e)})}_save_as_png(t,e){let i=this._calcBoundBox(),n=i.size,s=-i.left,r=i.height;try{t.$swapCanvas()}catch(t){return void console.error(t)}const o=t._ctx2.canvas.width,a=t._ctx2.canvas.height;t.ctx.canvas.width=n.x,t.ctx.canvas.height=n.y;try{this._draw(t,s,r,0,!1)}catch(t){console.error(t)}let l=t.ctx.canvas.toDataURL("image/png");{let t=document.createElement("a"),i=`${e?e+".":""}${this.action}[${this.action_frame}].${this.emotion}[${this.emotion_frame}].png`;t.id=i,t.download=i,t.href=l,document.body.appendChild(t),t.click(),document.body.removeChild(t)}t.ctx.canvas.width=o,t.ctx.canvas.height=a;try{t.$swapCanvas()}catch(t){console.error(t)}return l}async __texture_to_base64(){let t=[];return this.__frag_list.forEach(function(e){if(e){if(e._url.startsWith("data:")?t.push(e):t.push(async function(){return e.texture.$src=e._url,e}()),e.graph2){e.graph2._url.startsWith("data:")?t.push(e.graph2):t.push(async function(){return e.texture.$src=e._url,e.graph2}())}if(e.graph3){e.graph3._url.startsWith("data:")?t.push(e.graph3):t.push(async function(){return e.texture.$src=e._url,e.graph3}())}}}),Promise.all(t)}}function*k(t){let e=0;for(;e<t;++e)yield e;for(e-=2;e>0;--e)yield e}Object(s.a)(M.Init())},function(t,e){class i{constructor(){this.hp=8855,this.mp=5246,this.mhp=28855,this.mmp=25246,this.exp=55,this.str=123,this.luk=4,this.dex=999,this.int=4}}Symbol("job");const n=Symbol("onJobChange");class s{constructor(){this.id=void 0,this.equips_code=null}}t.exports={CharacterStat:class extends i{constructor(t){super(),this._$sceneChara=t,this.level=150,this.critRate=50,this.critDamage=80}get job(){return this[symbolStatJob]}set job(t){this[symbolStatJob]=t,this[n],_onJobChange&&_onJobChange()}onJobChange(t){this[n]=t}_getTotalAttack(){return 100}getCurrentMaxBaseDamage(){return 1.3*(4*this.dex+this.str)*(this._getTotalAttack()/100)}getCurrentMinBaseDamage(){return 1.3*(this.dex+this.str)*(this._getTotalAttack()/100)}getCritRate(){return this.critRate}getCritDamage(){return this.critDamage}getHpPercentS(){return(100*this.hp/this.mhp).toFixed(0)}getMpPercentS(){return(100*this.mp/this.mmp).toFixed(0)}getExpPercentS(){return(100*this.exp/this.getNextExp()).toFixed(2)}getNextExp(){return 100}},$RemotePlayerData:s,$PlayerData:class extends s{constructor(){super(),this.stat=void 0}getRemoteData(){return{id:this.id,mapId:this.mapId,equips_code:this.equips_code}}}}},function(t,e,i){"use strict";i.d(e,"a",function(){return s});i(18);var n=i(17);class s{constructor(){this._raw=null}async load(t){const e=[this.constructor._base_path,t].join("/");Object.defineProperty(this,"_raw",{value:await $get.data(e)}),this.nw=new n.a(this._raw.nw),this.n=new n.a(this._raw.n),this.ne=new n.a(this._raw.ne),this.w=new n.a(this._raw.w),this.c=new n.a(this._raw.c),this.e=new n.a(this._raw.e),this.sw=new n.a(this._raw.sw),this.s=new n.a(this._raw.s),this.se=new n.a(this._raw.se),this.arrow=new n.a(this._raw.arrow),s.cache[t]=this}draw(t,e,i,n){let s=[];for(let t=0;t<e.length;t+=12){let i=e.slice(t,t+12);s.push(i)}if(!s.length)return;const r=this.c.height,o=t.ctx;o.font="12px 微軟正黑體",o.textAlign="center",o.textBaseline="top";const a=s.map(t=>o.measureText(t).width+0+0).sort((t,e)=>e-t)[0],l=Math.ceil(a/this.n.width)*this.n.width,c=l/2,u=s.length*r+0+0;i=Math.trunc(i-c),n=Math.trunc(n-u-this.arrow.height),this.nw.draw2(i,n),this.n._drawPattern(i,n,l,this.n.height),this.ne.draw2(i+l,n);const h=this.w.width-this.w.x;this.w._drawPattern(i+h,n,this.w.width,u),this.c._drawPattern(i+h,n,l,u),this.e._drawPattern(i+h+l,n,this.e.width,u);const d=this.arrow.width/2,m=c-d;this.sw.draw2(i,n+u),this.s._drawPattern(i,n+u,m,this.s.height),this.s._drawPattern(i+c+d,n+u,m,this.s.height),this.se.draw2(i+l,n+u),this.arrow.draw2i(i-d+c,n+u);for(let t=0,e=n;t<s.length;++t,e+=r){let n=s[t];o.fillStyle="black",o.fillText(n,i+c+0,e+0)}}static get _base_path(){return"/UI/ChatBalloon"}}s.cache={},window.$images_ChatBalloon=s.cache},function(t,e,i){"use strict";i.d(e,"b",function(){return r}),i.d(e,"a",function(){return o}),i.d(e,"c",function(){return a});var n=i(3),s=(i(18),i(6));class r{constructor(t){this.id=t,this.footholds=[],this.bound=new s.b,this.loop=!1}init(t,e,i){let s,r,l,c;s=t.x1,r=t.y1,l=t.x2,c=t.y2;for(let i=t,n=0;null!=i;i=e[i.next],++n)if(s=Math.min(s,i.x1,i.x2),r=Math.min(r,i.y1,i.y2),l=Math.max(l,i.x1,i.x2),c=Math.max(c,i.y1,i.y2),this.footholds.push(i),i.next==t.id){this.loop=!0;break}if(this.bound.parse(s,r,l,c),this.FootholdType=i,i==o)this.footholds.forEach((t,e)=>{t.init(this,e)});else if(i==a){let t=this.bound.center,e=new n.b2Transform;e.SetPositionXY(t.x,t.y),this.footholds.forEach((t,i)=>{t.init(this,i,e)})}}getFootholdFromContact(t){return this.footholds[t]}}class o{constructor(t,e,i,n){this._raw=t,this.layer=0|i,this.group=0|n,this.id=e,this.prev=t.prev?t.prev-1:null,this.next=t.next?t.next-1:null,this.chain=null,this.childIndex=null,this.body=null,this.m_angle=0,this.m_length=0,this.next_a=void 0,this.next_a_deg=void 0,this.$showDebugInfo=!1}getFootholdFromContact(){return this}init(t,e,i){let n,s,r,o;this.chain=this,this.childIndex=e,n=this.x1/$gv.CANVAS_SCALE,s=this.y1/$gv.CANVAS_SCALE;const a=(r=this.x2/$gv.CANVAS_SCALE)-n,l=(o=this.y2/$gv.CANVAS_SCALE)-s;0==l?(this.m_angle=a<0?Math.PI:0,this.m_length=a):0==a?(this.m_angle=l<0?.5*-Math.PI:.5*Math.PI,this.m_length=l):(this.m_angle=Math.atan2(l,a),this.m_length=Math.sqrt(l**2+a**2))}GetVertex1(){return new n.b2Vec2(this.x1/$gv.CANVAS_SCALE,this.y1/$gv.CANVAS_SCALE)}GetVertex2(){return new n.b2Vec2(this.x2/$gv.CANVAS_SCALE,this.y2/$gv.CANVAS_SCALE)}GetWorldCenter(){return this.body.GetWorldCenter()}GetLocalPoint(t,e){return this.body.GetLocalPoint(t,e)}GetLinearVelocityFromWorldPoint(t,e){return this.body.GetLinearVelocityFromWorldPoint(t,e)}GetLocalVector(t,e){return this.body.GetLocalVector(t,e)}get next_fh(){return this.body.m_world.ground.footholds[this.next]}get prev_fh(){return this.body.m_world.ground.footholds[this.prev]}get x1(){return this._raw.x1}get y1(){return this._raw.y1}get x2(){return this._raw.x2}get y2(){return this._raw.y2}get is_empty(){return this.is_first&&this.is_last}get is_first(){return 0==this._raw.prev}get is_last(){return 0==this._raw.next}get is_wall(){return this.x1==this.x2}get _is_horizontal_floor(){return this.y1==this.y2}_drawLine(t){t.beginPath(),t.moveTo(this.x1,this.y1),t.lineTo(this.x2,this.y2),t.stroke()}_drawLineV01(t){this.m_hasVertex0&&(t.beginPath(),t.moveTo(this.x0,this.y0),t.lineTo(this.x1,this.y1),t.stroke())}_drawLineV23(t){this.m_hasVertex3&&(t.beginPath(),t.moveTo(this.x2,this.y2),t.lineTo(this.x3,this.y3),t.stroke())}$_text_pos(t,e,i,n){return{x:(i+t)/2,y:Math.max(n,e)}}$drawDebugInfo(t){const e=t.ctx,i=this,n=`[${i.id}](${i.x1}, ${i.y1})[${i.group}]{${i._raw.piece}}∠${i.next_a_deg}`,s=e.textAlign,r=e.textBaseline,o=this.$_text_pos(i.x1,i.y1,i.x2,i.y2);e.textAlign="center",e.textBaseline="top",e.lineWidth=5,e.strokeStyle="#000",i._drawLine(e),e.lineWidth=2.5,e.strokeStyle="#FF00FF",i._drawLine(e),e.lineWidth=2.5,e.strokeStyle="#000",e.strokeText(n,o.x,o.y),e.fillStyle="#FFF",e.fillText(n,o.x,o.y),e.textAlign=s,e.textBaseline=r}$drawDebugInfo2(t,e){const i=t.ctx,n=this,s=`${n.prev}<${n.id}>${n.next} C{${n.chain.id}} (${n.x1}, ${n.y1})(${n.x2}, ${n.y2}) L[${n.layer}] G[${n.group}] P{${n._raw.piece}}∠${n.next_a_deg}`;let r=i.textAlign,o=i.textBaseline;const a=this.$_text_pos(n.x1,n.y1,n.x2,n.y2);i.textAlign="center",i.textBaseline="top",i.lineWidth=5,i.strokeStyle="#000",n._drawLine(i),i.lineWidth=2.5,i.strokeStyle=e||"#FF00FF",n._drawLine(i),i.lineWidth=2.5,i.strokeStyle="#000",i.strokeText(s,a.x,a.y),i.fillStyle="#FFF",i.fillText(s,a.x,a.y),i.textAlign=r,i.textBaseline=o}}class a extends o{constructor(t,e,i,s){super(t,e,i,s),this.m_xf=new n.b2Transform}init(t,e,i){super.init(t,e,i),n.b2Vec2.AddVV(this.GetVertex1(),this.GetVertex2(),this.m_xf.p),n.b2Vec2.MulVS(this.m_xf.p,.5,this.m_xf.p),this.m_xf.SetRotationAngle(this.m_angle),n.b2Transform.MulTXX(this.m_xf,i,this.m_xf)}GetWorldCenter(){const t=new n.b2Transform;return n.b2Transform.MulXX(this.m_xf,this.body.m_xf,t),t.p}GetLocalPoint(t,e){const i=new n.b2Transform;return n.b2Transform.MulXX(this.m_xf,this.body.m_xf,i),n.b2Transform.MulTXV(i,t,e)}GetLinearVelocityFromWorldPoint(t,e){const i=this.body;return n.b2Vec2.AddVCrossSV(i.m_linearVelocity,i.m_angularVelocity,n.b2Vec2.SubVV(t,this.GetWorldCenter(),n.b2Vec2.s_t0),e)}GetLocalVector(t,e){const i=new n.b2Transform;return n.b2Transform.MulXX(this.m_xf,this.body.m_xf,i),n.b2Rot.MulTRV(i.q,t,e)}}},function(t,e,i){t.exports=!i(14)&&!i(10)(function(){return 7!=Object.defineProperty(i(92)("div"),"a",{get:function(){return 7}}).a})},function(t,e,i){e.f=i(13)},function(t,e,i){var n=i(29),s=i(30),r=i(72)(!1),o=i(94)("IE_PROTO");t.exports=function(t,e){var i,a=s(t),l=0,c=[];for(i in a)i!=o&&n(a,i)&&c.push(i);for(;e.length>l;)n(a,i=e[l++])&&(~r(c,i)||c.push(i));return c}},function(t,e,i){var n=i(15),s=i(8),r=i(51);t.exports=i(14)?Object.defineProperties:function(t,e){s(t);for(var i,o=r(e),a=o.length,l=0;a>l;)n.f(t,i=o[l++],e[i]);return t}},function(t,e,i){var n=i(30),s=i(54).f,r={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return o&&"[object Window]"==r.call(t)?function(t){try{return s(t)}catch(t){return o.slice()}}(t):s(n(t))}},function(t,e,i){"use strict";var n=i(51),s=i(73),r=i(69),o=i(19),a=i(68),l=Object.assign;t.exports=!l||i(10)(function(){var t={},e={},i=Symbol(),n="abcdefghijklmnopqrst";return t[i]=7,n.split("").forEach(function(t){e[t]=t}),7!=l({},t)[i]||Object.keys(l({},e)).join("")!=n})?function(t,e){for(var i=o(t),l=arguments.length,c=1,u=s.f,h=r.f;l>c;)for(var d,m=a(arguments[c++]),p=u?n(m).concat(u(m)):n(m),f=p.length,_=0;f>_;)h.call(m,d=p[_++])&&(i[d]=m[d]);return i}:l},function(t,e,i){"use strict";var n=i(24),s=i(11),r=i(131),o=[].slice,a={};t.exports=Function.bind||function(t){var e=n(this),i=o.call(arguments,1),l=function(){var n=i.concat(o.call(arguments));return this instanceof l?function(t,e,i){if(!(e in a)){for(var n=[],s=0;s<e;s++)n[s]="a["+s+"]";a[e]=Function("F,a","return new F("+n.join(",")+")")}return a[e](t,i)}(e,n.length,n):r(e,n,t)};return s(e.prototype)&&(l.prototype=e.prototype),l}},function(t,e){t.exports=function(t,e,i){var n=void 0===i;switch(e.length){case 0:return n?t():t.call(i);case 1:return n?t(e[0]):t.call(i,e[0]);case 2:return n?t(e[0],e[1]):t.call(i,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(i,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(i,e[0],e[1],e[2],e[3])}return t.apply(i,e)}},function(t,e,i){var n=i(9).parseInt,s=i(62).trim,r=i(98),o=/^[-+]?0[xX]/;t.exports=8!==n(r+"08")||22!==n(r+"0x16")?function(t,e){var i=s(String(t),3);return n(i,e>>>0||(o.test(i)?16:10))}:n},function(t,e,i){var n=i(9).parseFloat,s=i(62).trim;t.exports=1/n(i(98)+"-0")!=-1/0?function(t){var e=s(String(t),3),i=n(e);return 0===i&&"-"==e.charAt(0)?-0:i}:n},function(t,e,i){var n=i(35);t.exports=function(t,e){if("number"!=typeof t&&"Number"!=n(t))throw TypeError(e);return+t}},function(t,e,i){var n=i(11),s=Math.floor;t.exports=function(t){return!n(t)&&isFinite(t)&&s(t)===t}},function(t,e){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,e,i){var n=i(101),s=Math.pow,r=s(2,-52),o=s(2,-23),a=s(2,127)*(2-o),l=s(2,-126);t.exports=Math.fround||function(t){var e,i,s=Math.abs(t),c=n(t);return s<l?c*function(t){return t+1/r-1/r}(s/l/o)*l*o:(i=(e=(1+o/r)*s)-(e-s))>a||i!=i?c*(1/0):c*i}},function(t,e,i){var n=i(8);t.exports=function(t,e,i,s){try{return s?e(n(i)[0],i[1]):e(i)}catch(e){var r=t.return;throw void 0!==r&&n(r.call(t)),e}}},function(t,e,i){var n=i(24),s=i(19),r=i(68),o=i(16);t.exports=function(t,e,i,a,l){n(e);var c=s(t),u=r(c),h=o(c.length),d=l?h-1:0,m=l?-1:1;if(i<2)for(;;){if(d in u){a=u[d],d+=m;break}if(d+=m,l?d<0:h<=d)throw TypeError("Reduce of empty array with no initial value")}for(;l?d>=0:h>d;d+=m)d in u&&(a=e(a,u[d],d,c));return a}},function(t,e,i){"use strict";var n=i(19),s=i(52),r=i(16);t.exports=[].copyWithin||function(t,e){var i=n(this),o=r(i.length),a=s(t,o),l=s(e,o),c=arguments.length>2?arguments[2]:void 0,u=Math.min((void 0===c?o:s(c,o))-l,o-a),h=1;for(l<a&&a<l+u&&(h=-1,l+=u-1,a+=u-1);u-- >0;)l in i?i[a]=i[l]:delete i[a],a+=h,l+=h;return i}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,i){i(14)&&"g"!=/./g.flags&&i(15).f(RegExp.prototype,"flags",{configurable:!0,get:i(77)})},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,i){var n=i(8),s=i(11),r=i(116);t.exports=function(t,e){if(n(t),s(e)&&e.constructor===t)return e;var i=r.f(t);return(0,i.resolve)(e),i.promise}},function(t,e,i){"use strict";var n=i(146),s=i(64);t.exports=i(81)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=n.getEntry(s(this,"Map"),t);return e&&e.v},set:function(t,e){return n.def(s(this,"Map"),0===t?0:t,e)}},n,!0)},function(t,e,i){"use strict";var n=i(15).f,s=i(53),r=i(58),o=i(34),a=i(56),l=i(57),c=i(104),u=i(141),h=i(55),d=i(14),m=i(44).fastKey,p=i(64),f=d?"_s":"size",_=function(t,e){var i,n=m(e);if("F"!==n)return t._i[n];for(i=t._f;i;i=i.n)if(i.k==e)return i};t.exports={getConstructor:function(t,e,i,c){var u=t(function(t,n){a(t,u,e,"_i"),t._t=e,t._i=s(null),t._f=void 0,t._l=void 0,t[f]=0,void 0!=n&&l(n,i,t[c],t)});return r(u.prototype,{clear:function(){for(var t=p(this,e),i=t._i,n=t._f;n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete i[n.i];t._f=t._l=void 0,t[f]=0},delete:function(t){var i=p(this,e),n=_(i,t);if(n){var s=n.n,r=n.p;delete i._i[n.i],n.r=!0,r&&(r.n=s),s&&(s.p=r),i._f==n&&(i._f=s),i._l==n&&(i._l=r),i[f]--}return!!n},forEach:function(t){p(this,e);for(var i,n=o(t,arguments.length>1?arguments[1]:void 0,3);i=i?i.n:this._f;)for(n(i.v,i.k,this);i&&i.r;)i=i.p},has:function(t){return!!_(p(this,e),t)}}),d&&n(u.prototype,"size",{get:function(){return p(this,e)[f]}}),u},def:function(t,e,i){var n,s,r=_(t,e);return r?r.v=i:(t._l=r={i:s=m(e,!0),k:e,v:i,p:n=t._l,n:void 0,r:!1},t._f||(t._f=r),n&&(n.n=r),t[f]++,"F"!==s&&(t._i[s]=r)),t},getEntry:_,setStrong:function(t,e,i){c(t,e,function(t,i){this._t=p(t,e),this._k=i,this._l=void 0},function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?u(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,u(1))},i?"entries":"values",!i,!0),h(e)}}},function(t,e,i){"use strict";var n=i(146),s=i(64);t.exports=i(81)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return n.def(s(this,"Set"),t=0===t?0:t,t)}},n)},function(t,e,i){"use strict";var n,s=i(41)(0),r=i(27),o=i(44),a=i(129),l=i(149),c=i(11),u=i(10),h=i(64),d=o.getWeak,m=Object.isExtensible,p=l.ufstore,f={},_=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},g={get:function(t){if(c(t)){var e=d(t);return!0===e?p(h(this,"WeakMap")).get(t):e?e[this._i]:void 0}},set:function(t,e){return l.def(h(this,"WeakMap"),t,e)}},v=t.exports=i(81)("WeakMap",_,g,l,!0,!0);u(function(){return 7!=(new v).set((Object.freeze||Object)(f),7).get(f)})&&(a((n=l.getConstructor(_,"WeakMap")).prototype,g),o.NEED=!0,s(["delete","has","get","set"],function(t){var e=v.prototype,i=e[t];r(e,t,function(e,s){if(c(e)&&!m(e)){this._f||(this._f=new n);var r=this._f[t](e,s);return"set"==t?this:r}return i.call(this,e,s)})}))},function(t,e,i){"use strict";var n=i(58),s=i(44).getWeak,r=i(8),o=i(11),a=i(56),l=i(57),c=i(41),u=i(29),h=i(64),d=c(5),m=c(6),p=0,f=function(t){return t._l||(t._l=new _)},_=function(){this.a=[]},g=function(t,e){return d(t.a,function(t){return t[0]===e})};_.prototype={get:function(t){var e=g(this,t);if(e)return e[1]},has:function(t){return!!g(this,t)},set:function(t,e){var i=g(this,t);i?i[1]=e:this.a.push([t,e])},delete:function(t){var e=m(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,i,r){var c=t(function(t,n){a(t,c,e,"_i"),t._t=e,t._i=p++,t._l=void 0,void 0!=n&&l(n,i,t[r],t)});return n(c.prototype,{delete:function(t){if(!o(t))return!1;var i=s(t);return!0===i?f(h(this,e)).delete(t):i&&u(i,this._i)&&delete i[this._i]},has:function(t){if(!o(t))return!1;var i=s(t);return!0===i?f(h(this,e)).has(t):i&&u(i,this._i)}}),c},def:function(t,e,i){var n=s(r(e),!0);return!0===n?f(t).set(e,i):n[t._i]=i,t},ufstore:f}},function(t,e,i){var n=i(39),s=i(16);t.exports=function(t){if(void 0===t)return 0;var e=n(t),i=s(e);if(e!==i)throw RangeError("Wrong length!");return i}},function(t,e,i){var n=i(54),s=i(73),r=i(8),o=i(9).Reflect;t.exports=o&&o.ownKeys||function(t){var e=n.f(r(t)),i=s.f;return i?e.concat(i(t)):e}},function(t,e,i){"use strict";var n=i(74),s=i(11),r=i(16),o=i(34),a=i(13)("isConcatSpreadable");t.exports=function t(e,i,l,c,u,h,d,m){for(var p,f,_=u,g=0,v=!!d&&o(d,m,3);g<c;){if(g in l){if(p=v?v(l[g],g,i):l[g],f=!1,s(p)&&(f=void 0!==(f=p[a])?!!f:n(p)),f&&h>0)_=t(e,i,p,r(p.length),_,h-1)-1;else{if(_>=9007199254740991)throw TypeError();e[_]=p}_++}g++}return _}},function(t,e,i){var n=i(16),s=i(100),r=i(38);t.exports=function(t,e,i,o){var a=String(r(t)),l=a.length,c=void 0===i?" ":String(i),u=n(e);if(u<=l||""==c)return a;var h=u-l,d=s.call(c,Math.ceil(h/c.length));return d.length>h&&(d=d.slice(0,h)),o?d+a:a+d}},function(t,e,i){var n=i(51),s=i(30),r=i(69).f;t.exports=function(t){return function(e){for(var i,o=s(e),a=n(o),l=a.length,c=0,u=[];l>c;)r.call(o,i=a[c++])&&u.push(t?[i,o[i]]:o[i]);return u}}},function(t,e,i){var n=i(70),s=i(156);t.exports=function(t){return function(){if(n(this)!=t)throw TypeError(t+"#toJSON isn't generic");return s(this)}}},function(t,e,i){var n=i(57);t.exports=function(t,e){var i=[];return n(t,!1,i.push,i,e),i}},function(t,e){t.exports=Math.scale||function(t,e,i,n,s){return 0===arguments.length||t!=t||e!=e||i!=i||n!=n||s!=s?NaN:t===1/0||t===-1/0?t:(t-e)*(s-n)/(i-e)+n}},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAADwCAMAAADYSUr5AAABDlBMVEVEREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREREQf23IJAAAAWnRSTlMAGf8QMwQIUL+CmS8iVXFAZmAaEzLMDSE8FkJISyAeWiMnMVMshTSHgMNqyM/GOEUcvLi+fKu1pYyqqK0fsin9AZ5RJO8KBgIDj6JilEqgr23fnEdjP29/kWiyI5UtAAAM80lEQVR4Aezb3XLzOgiFYXh8//e8T8MwQeNJ8yXd5T2zF8RiCfm3jWVZvoGUf7x+X+6AfLnEUZRkCZYf7EBQAsgoEFVNilpJ2gFafgkmP9eBoM1R2cEwg0GM6WDqh5ryXur4hxIGPZFD9vTrDbIe8e2QY4FtCsF5DU0dMAygdsCn6EM8d/AQkBzsJUsw+XeuApHIGiz3RmhZlmVZluVP3Anmd92Igbojh4IAg1/z+4CkZqSQn3wjld2AFlC3kM/9St2AHB8eg/yn9ZOnEQ9yIge/Zj8bCMS/AjD3rCzi+X1ATn4W9YMdMJDe+T4gT0sw5F4FlmVZlmVZ/gTiFcBLv++zBQTmHWdxxr3jw/AD5gOcM6DKekhN17SCvmkcjfPx53oMcjg4xslAoYp127GDWoIq3jo+0PWyY5CBuYJz+hCibAM1gBoOxg4yWzS3MCd/e8Xm9HkA5yPcKu+4xmFqQdz7RRwbuoA754CjKl7EV+eDWJZlWZZl6SQZL8EPDwCiMGhADMxqcm8A0WCOqsB5AOpnJVmlETk9QItIs4H9KPPxiRgLKDjPINQPi2TVpg4iRwOS4/hbyOQAY/2aaM5HKP485Ii5g4Dw1GB9jzgPQFefOoyInt/1nt9l9AEPBaLqCXnHAIwvJLSAs8ywCoie3pfAcIiYlkCSd5YAotKPbziJ6QU0mGYwCql/oTcbkIf3AWlegtGQ8xzNcnSMazgOmA2oAL/0RmRZlmVZFvFO0nxh1jMQPwhixhD+KknfQ471F9fcnjLT92q9YAb9VYBse0otqn4qFlOAsk8NYjKkhb+O6kArkYwoOodbbSEMMyY6ouaq6W80IOlFKTqYO0AUjLro0VqFY7AftCD1ESo6eD7jJgN6hhBTfjeg63jbpUAGGRVyeofZChJDAN2fgyFdf+OVFtnkvPP0aqh/WC+DQ3uf87Usy7Isy+V/dB2m32vqm7xWv4xPM39nokzxaAC44ubdXn5rB4Ty99iIy+XBII9Jl7g8bHP8lwPA91Sve1D0yxVqfISHyi4Rarpnn6PTdxkAYDCotHczoE+xkl/3JX0JfHsHtHhQDXrWAUCohgsZv+Uc0Ka3J7vC1c8BPb6v/++/CqAEUOMvMJhateTX3Qeccb3wGaLwXzvnwaa20YXRlzMTiVjrFWIDqTgxaZveeyW99/r//8gHLPfR6D4eHtnhw2V1th5U75urkRSLvRvJ1z8wMDAwMBABonpzX7HmPh2JEhiX2sP9ACgLV2BfidFPjmaZ+lVBpTaB6Fd/ApzIuxfj6g63gJXEaV2XbLFAoPRXSUzIXsw2kS1Np16I3jsrdHuT7HVRURRURfbfCg0ZZl0xYHKjLdoL1HUdLnCBjDsBJAlQbMB1gAUAmq4R7Nw6gEwAFBdgAVCcnT1AGsBsNhPKAgIv+QBOOgES1rDFAhlZIO0OdgOfb8h1ACXJDwkbA8wR3T2eAzBvAzh78OShTgAPP/ywyHSgc/eCC8DqfyQNAOgEMAr4iDYgg4c3ZDtgWiJRTtm5FCFK5gQgQLq6DbSHwKOPpofATEVRaCaDuPm4lQCs/quPPZIPYOReEKPRaDoaIYPFYpEfA5hOSyinaQBSGkAEYhLANYBr1+yFs4tB8MyVA/kAkA9ALoDH1SqT5ipQ5wLwG+SJLcjg+vXrUGQ7IE7LchrbAC48H8D1C9CWUcWDVbWkGnUCiEI7eHL7IQMofACFC4BOB0ys/kwALvCntriWK4pcB8TplkjGKYGSzjFZVdhZoGJHle0AC6D/IQDd7UEtHwCxuz13HcD9ysCV/qdB2x8moBailS9h0HfQa9LN+xdcAJZArcMRY7Ml6pbB6u8HALp1Tqg1MDAwMHBpePpp7SVAUB6QQPuJRO14BoBnTEsgvceecMHE3Z6d9HDjWVBKXWsPc5irS9M0af0xEszGBXBelcnNzgQmV9j71GYEkvqVJACTDZC/n6eqql5ugNSY1AQIWAYBJppAkPEcPOfqB5pFWz+0CeCfDse7eH79cUpav0piMr8gWzB6QS/qJSGDSqjquLo+L+aJq4Gmye0gwKT1CfiOU0kTaMyIAJFcAP52GL187ZVXH7tWJvVTKqpvAK/x+vrjjbRAoHL+VOqFispf+2Ia2BJuvL2nTZNxYMxpQxO05UpkS7ySC0ACKXFOeZOnSesnqncAektv653CXNeTDjBX6q4DGjrX+jUgAfWNt/cuW96VsVi4eweIEaQeAVgHPP7E+sPVb4C/Hw+EEFp/j/fXHx+Yj0iOcfMHnNt0O37XPJEJINDtCN3o3mnPKE9RagHUuQAiO1z9bnsugMQ/fPvh8cMffbzzKTtOerjVL8MdAuZOn3uu9U3vM94XgBxIIUgoA1j96VkQnkkDkHKHBPCUjD4uV7/Y0UkkyHjlk4k0+eQVC4DThrBneeSY4AdROrO5+v11gP/f3t5hJKOPN77+5DRohLTC+qrWXK3lOihHpbuQulYv7BrodjIwMDAwUEItowa4Ls+nMgT6f1IBVNoDoFsmsJK0IsjQObQJPMJnn33+OR8nu3O6qX+LpOVjvPwyjy0zz1uU7Cid+xfK3L8rVIzL8otOAvBfAmioVNGYAiut/NX4AnO+3PCVqViVVGrczY27O0UG7heCgb1OjBEhmwF1brYYSyu+4GABAA1gugK2X90GaAP4+ptPP/3ma1NRirqBRrkAOo+MoEgUtAHolPRtLECcTCAJ4NXpmnSDK1ZlNgCMXLlG55CiUppAWn+gG8CnG05M9S0whsY9QIE53eUpgGQGQoBSizYAbQNIWqVaLquqSgJYsVKJrygXQEZBylxur1z9kXQMeJ+TNXwro647yzPfH8AZcAZn5uEcKFkEbrz/kVdfnb665Fw7+IKVND5cAL4DvgPguW79jYxqtWUhc9cwhDCfzzsBdI75xZoP159081llx4DlcnMAIKPii7IcUx16DEjrX7UJEKEOSlgCLGSwOuU8SQBJZ8mwF+kG8NRTu0/XINkxoIzL5ZIl2dPg4c8Cz+k5wJRaXVaTybutUYs6tAnQ+WG/nogbnwZZGJkxgHIDS5QHDnod8Jyk5wi2rigHQBIHfBEU4FOb+v3LI9EJ4GSNvVBEYiQWutnrgDuHsx9+OEu0OQ2SwqfBjzn+ycnDMDAwMFCWifz4E8BPP+ry8DP8LOMXdvyiy8KjAI/af38ACeBHGTNmSvgVqOWodShmAMyO2QAhYC3wWxvAb33+9pVRU2fuheyFvDOLm7r9+o/YABLWAiTkrwQD+Pqh3v/gZuK/F7+bZx8FPeoIEALWAgD4fZgw8fWPZdRWf6YcQRMakMHvkn7vzDC7jQHU7KjzAVh/G/BiSKZZ/dkAQqdlKCQV5oALIDKbzYg6Em3B+QA8kNQPVv+BOuC4g2ANEAJWww9tAD/4DsivwKYfZAwwPQ5+0HsFg1eyg6CpG/8OdRaQ0NGYscOa7g/TP5QfA5D81HvnDwz++S3At38Of2FxYGBgYGDgKNR4PSaM6x7vkDgkV674+vF6TACLwAdg8YR0hnocNt/o5jcxZ3IxU/72toZaXUdeqXUswCLwASTxYDtUw7Y8P0MSgE3PBdBVMO8qxw0AJtkAYCwBO5XGgJ8hCcCmG2Qrzivinu0AUs8r9+4Y4MmPAffmWYAtd8ZZYLgOGBgYGBgYoNElJvwl/v4wSAZwHi5R/YzF3zVBRlV/C5UcZP7+QX+/Q1nxj/hbrJQQxvgE8D/jTfsdSeBF6e9aL7YtAKuFxhdu0BZSzItivv5g5/P2eXZzul5QYH7HETnXhnOidlQNLAKnmQCmG0bTkRU4YjTavIBNZ8ra0+lMsel3ZgdI1gHtuLCiW74pH19AvGm/MxnTSGoYywCVLEoXwD07CFbw4vmLUKUBiLqmWz66V6l+Bn6udBkZGBgYGLD3B/R1/xBVf/frO47n8e8P6Of+Mbr+7td3BO/Bjxj82MPdg5Q35359x/D9+PcHmEPqfwj0x85/ABAAP5iDd2Wm2/rd9uSdvdNnklLHO6CN98E/HE2LufTHHxLQc36bnnek/HTT1P1PpNT//fff1AFpCX0DsF/IOH9If7gdFvn5kS8oM78PoO/+CNjny239BwygkZpcAJmfuYL6uw+ofwcsdVE/hzsEmiazQz0dnOcDbKfu75C8w1JLegZgg5ryg5oNghvPDVJ4V2Z6ZpCUd/LTzfIOS/MeHPM05td3BO/B8S5k/PqO43mOfSnr13csHxgYGBgYGNgDFxzc7xooNtDf78EA2B8ABamD9gcgdHcFABTk3QeEJPY5GjpgGAMYzgKXloGBgYGBgYERultAaC9E4s3XP9Ldwkij/xzAiEz9l6IDXL3md2cHMLKPTAAY3XpR1+/dMSAa3fpHvn5Gl6MDrH4y9V+CDsjWf1nOApn6L+F1gNV/F48BB4BR+zUwcIfzP/8S/ZOlvFfuAAAAAElFTkSuQmCC"},function(t,e,i){var n,s,r;s=[i(20),i(25)],void 0===(r="function"==typeof(n=function(t){return t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())})?n.apply(e,s):n)||(t.exports=r)},function(t,e,i){var n,s,r;
/*!
 * jQuery UI :data 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */s=[i(20),i(25)],void 0===(r="function"==typeof(n=function(t){return t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,n){return!!t.data(e,n[3])}})})?n.apply(e,s):n)||(t.exports=r)},function(t,e,i){var n,s,r;
/*!
 * jQuery UI Scroll Parent 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */s=[i(20),i(25)],void 0===(r="function"==typeof(n=function(t){return t.fn.scrollParent=function(e){var i=this.css("position"),n="absolute"===i,s=e?/(auto|scroll|hidden)/:/(auto|scroll)/,r=this.parents().filter(function(){var e=t(this);return(!n||"static"!==e.css("position"))&&s.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==i&&r.length?r:t(this[0].ownerDocument||document)}})?n.apply(e,s):n)||(t.exports=r)},function(t,e,i){"use strict";i.d(e,"a",function(){return s});i(65);class n{constructor(){this.x=null,this.y=null,this.vx=void 0,this.vy=void 0,this.fx=void 0,this.fy=void 0,this.pState=null,this.elapsed=0,this.isAwake=void 0,this.action=void 0,this.action_frame=void 0,this.emotion=void 0,this.emotion_frame=void 0}}class s extends n{}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return LifeRenderer});var _Sprite_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(17),_Animation_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(47);class LifeRenderer{constructor(){this._url="",this.id=null,this.actions={},this._action="stand",this._raw=null}get name(){return this.constructor._desc[this.id].name}getDefaultAction(){return this.actions.stand?"stand":this.actions.fly?"fly":(alert(this.constructor.name+" ("+this.id+") default must is 'stand' or 'fly'"),new Error(this.constructor.name+" ("+this.id+") default must is 'stand' or 'fly'"))}get action(){return this._action}set action(t){this._action!=t&&(this._action=t,this.actions[t]&&this.actions[t].reset())}async load(t){let e=[],i=this;if(this.id=t,this._url=[this.constructor._base_path,this.id].join("/"),!this.constructor._desc[t]){let i=this.constructor.loadDescription(t);e.push(i)}let n=$get.data(this._url).then(async function(t){i._raw=t,i._raw&&(await i._construct_actions(),i._action=i.getDefaultAction())});return e.push(n),Promise.all(e)}async _construct_actions(){for(var tasks=[],i=0;i<this.constructor._animations.length;++i)for(var t=this.constructor._animations[i],$index=1;;++$index){let action;var name=eval(t);if(!(name in this._raw))break;if(action=new _Animation_js__WEBPACK_IMPORTED_MODULE_1__.a(this._raw[name],[this._url,name].join("/")),action.is_loop=!1,tasks.push(action.load()),this.actions[name]=action,!name.endsWith($index))break}await Promise.all(tasks)}update(t){if(this.actions[this.action]){this.actions[this.action].update(t)}}draw(t,e,i,n,s){if(this.actions[this.action]){this.actions[this.action].draw(t,e,i,n,s)}}paint(t){alert("Not Implement"),render(t)}static async loadDescription(t){alert("Not Implement")}static get _animations(){throw new Error("Not implement")}static _get_desc_base_path(){throw new Error("Not implement")}static get _base_path(){throw new Error("Not implement")}}},function(t,e,i){let n=i(468),s=i(469),r=i(470),o=Object.assign({},n,s,r);t.exports=o},function(t,e,i){"use strict";i(4),i(18),i(7);var n=i(6);const s=new class{constructor(){this.m_is_run=!0,this.MAX_FPS=60,this.FRAME_ELAPSED=1e3/60,this.CANVAS_SCALE=32,this.m_editor_mode=!1,this.m_display_foothold=!1,this.m_display_selected_object=!1,this.m_selected_object=null,this.m_hover_object=null,this.m_display_physics_debug=!1,this.m_display_debug_info=!1,this.m_viewRect=new n.b(0,-384,1366,768),this.m_is_rendering_map=!0,this.m_display_back=!0,this.m_display_front=!0,this.m_display_mapobj=!0,this.m_display_maptile=!0,this.m_display_particle_system=!0,this.m_display_skeletal_anim=!0,this.m_display_portal=!0,this.m_display_player=!0,this.m_display_other_player=!0,this.m_display_life=!0,this.m_display_npc=!0,this.m_display_mob=!0,this.ChatBalloon_default_style=0,this.ChatBalloon_DisplayDuration=5e3,this.input_keyDown={},this.input_keyUp={},this.mouse_move=0,this.mouse_x=0,this.mouse_y=0,this.mouse_dl=0,this.mouse_ul=0,this.mouse_dm=0,this.mouse_um=0,this.mouse_dr=0,this.mouse_ur=0;{let t={layeredObjects:[]};for(let e=0;e<12;++e){let i=t.layeredObjects[e]={};Object.defineProperty(i,"length",{enumerable:!1,writable:!0,value:0})}t.Update=function(e){for(let i=0;i<t.layeredObjects.length;++i){const n=t.layeredObjects[i];for(let t in n)n[t].update(e)}},t.RenderLayer=function(e,i){const n=t.layeredObjects[i];for(let t in n)n[t].render(e)},t.addToScene=function(e,i){if(!(Number.isSafeInteger(e)&&e in t.layeredObjects))throw new TypeError("layer");{const n=t.layeredObjects[e];i.$layer=e,i.$objectid=n.length,n[i.$objectid]=i,n.length++}},t.destroy=function(e){const i=e.$layer,n=e.$objectid,s=t.layeredObjects[i];e.destroy(),delete s[n]},this.SceneObjectMgr=t}}};window.$gv=s},function(t,e,i){var n=i(430);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i(23).default)("4e0037c4",n,!0,{})},function(t,e,i){var n=i(432);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i(23).default)("009f3464",n,!0,{})},function(t,e,i){var n=i(434);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i(23).default)("37287e38",n,!0,{})},function(t,e,i){var n=i(436);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i(23).default)("21a09c83",n,!0,{})},function(t,e,i){var n=i(438);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i(23).default)("0a7abc9e",n,!0,{})},function(t,e,i){var n=i(440);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i(23).default)("ba39c17e",n,!0,{})},function(t,e,i){var n=i(442);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i(23).default)("1a2175c0",n,!0,{})},function(t,e,i){var n=i(444);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i(23).default)("50030122",n,!0,{})},function(t,e,i){var n=i(446);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i(23).default)("2a6bbb22",n,!0,{})},function(t,e,i){var n=i(448);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i(23).default)("c9ae3650",n,!0,{})},function(t,e,i){var n=i(450);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i(23).default)("38713d8e",n,!0,{})},function(t,e,i){var n=i(452);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i(23).default)("7b9bb866",n,!0,{})},function(t,e,i){var n=i(454);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i(23).default)("3c9f94b0",n,!0,{})},function(t,e,i){var n=i(456);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i(23).default)("62027292",n,!0,{})},function(t,e,i){var n=i(458);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i(23).default)("6eb55494",n,!0,{})},function(t,e,i){var n=i(460);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i(23).default)("166ef477",n,!0,{})},function(t,e,i){var n=i(462);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i(23).default)("21a85673",n,!0,{})},function(t,e,i){var n=i(465);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i(23).default)("613b7622",n,!0,{})},function(t,e,i){var n=i(467);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i(23).default)("4c329b45",n,!0,{})},function(t,e,i){var n=i(472);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i(23).default)("4767d049",n,!0,{})},function(t,e,i){var n=i(474);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i(23).default)("49643529",n,!0,{})},,,function(t,e,i){"use strict";(function(t){if(i(190),i(387),i(388),t._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");t._babelPolyfill=!0;var e="defineProperty";function n(t,i,n){t[i]||Object[e](t,i,{writable:!0,configurable:!0,value:n})}n(String.prototype,"padLeft","".padStart),n(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(t){[][t]&&n(Array,t,Function.call.bind([][t]))})}).call(this,i(67))},function(t,e,i){i(191),i(193),i(194),i(195),i(196),i(197),i(198),i(199),i(200),i(201),i(202),i(203),i(204),i(205),i(206),i(207),i(209),i(210),i(211),i(212),i(213),i(214),i(215),i(216),i(217),i(218),i(219),i(220),i(221),i(222),i(223),i(224),i(225),i(226),i(227),i(228),i(229),i(230),i(231),i(232),i(233),i(234),i(235),i(236),i(237),i(238),i(239),i(240),i(241),i(242),i(243),i(244),i(245),i(246),i(247),i(248),i(249),i(250),i(251),i(252),i(253),i(254),i(255),i(256),i(257),i(258),i(259),i(260),i(261),i(262),i(263),i(264),i(265),i(266),i(267),i(268),i(269),i(271),i(272),i(274),i(275),i(276),i(277),i(278),i(279),i(280),i(282),i(283),i(284),i(285),i(286),i(287),i(288),i(289),i(290),i(291),i(292),i(293),i(294),i(113),i(295),i(296),i(142),i(297),i(298),i(299),i(300),i(301),i(145),i(147),i(148),i(302),i(303),i(304),i(305),i(306),i(307),i(308),i(309),i(310),i(311),i(312),i(313),i(314),i(315),i(316),i(317),i(318),i(319),i(320),i(321),i(322),i(323),i(324),i(325),i(326),i(327),i(328),i(329),i(330),i(331),i(332),i(333),i(334),i(335),i(336),i(337),i(338),i(339),i(340),i(341),i(342),i(343),i(344),i(345),i(346),i(347),i(348),i(349),i(350),i(351),i(352),i(353),i(354),i(355),i(356),i(357),i(358),i(359),i(360),i(361),i(362),i(363),i(364),i(365),i(366),i(367),i(368),i(369),i(370),i(371),i(372),i(373),i(374),i(375),i(376),i(377),i(378),i(379),i(380),i(381),i(382),i(383),i(384),i(385),i(386),t.exports=i(33)},function(t,e,i){"use strict";var n=i(9),s=i(29),r=i(14),o=i(2),a=i(27),l=i(44).KEY,c=i(10),u=i(71),h=i(61),d=i(50),m=i(13),p=i(125),f=i(93),_=i(192),g=i(74),v=i(8),y=i(11),x=i(30),b=i(37),A=i(49),w=i(53),S=i(128),C=i(31),B=i(15),V=i(51),M=C.f,k=B.f,P=S.f,I=n.Symbol,D=n.JSON,T=D&&D.stringify,E=m("_hidden"),$=m("toPrimitive"),L={}.propertyIsEnumerable,R=u("symbol-registry"),F=u("symbols"),O=u("op-symbols"),j=Object.prototype,G="function"==typeof I,N=n.QObject,q=!N||!N.prototype||!N.prototype.findChild,z=r&&c(function(){return 7!=w(k({},"a",{get:function(){return k(this,"a",{value:7}).a}})).a})?function(t,e,i){var n=M(j,e);n&&delete j[e],k(t,e,i),n&&t!==j&&k(j,e,n)}:k,H=function(t){var e=F[t]=w(I.prototype);return e._k=t,e},U=G&&"symbol"==typeof I.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof I},W=function(t,e,i){return t===j&&W(O,e,i),v(t),e=b(e,!0),v(i),s(F,e)?(i.enumerable?(s(t,E)&&t[E][e]&&(t[E][e]=!1),i=w(i,{enumerable:A(0,!1)})):(s(t,E)||k(t,E,A(1,{})),t[E][e]=!0),z(t,e,i)):k(t,e,i)},J=function(t,e){v(t);for(var i,n=_(e=x(e)),s=0,r=n.length;r>s;)W(t,i=n[s++],e[i]);return t},Y=function(t){var e=L.call(this,t=b(t,!0));return!(this===j&&s(F,t)&&!s(O,t))&&(!(e||!s(this,t)||!s(F,t)||s(this,E)&&this[E][t])||e)},X=function(t,e){if(t=x(t),e=b(e,!0),t!==j||!s(F,e)||s(O,e)){var i=M(t,e);return!i||!s(F,e)||s(t,E)&&t[E][e]||(i.enumerable=!0),i}},Q=function(t){for(var e,i=P(x(t)),n=[],r=0;i.length>r;)s(F,e=i[r++])||e==E||e==l||n.push(e);return n},Z=function(t){for(var e,i=t===j,n=P(i?O:x(t)),r=[],o=0;n.length>o;)!s(F,e=n[o++])||i&&!s(j,e)||r.push(F[e]);return r};G||(a((I=function(){if(this instanceof I)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0),e=function(i){this===j&&e.call(O,i),s(this,E)&&s(this[E],t)&&(this[E][t]=!1),z(this,t,A(1,i))};return r&&q&&z(j,t,{configurable:!0,set:e}),H(t)}).prototype,"toString",function(){return this._k}),C.f=X,B.f=W,i(54).f=S.f=Q,i(69).f=Y,i(73).f=Z,r&&!i(45)&&a(j,"propertyIsEnumerable",Y,!0),p.f=function(t){return H(m(t))}),o(o.G+o.W+o.F*!G,{Symbol:I});for(var K="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;K.length>tt;)m(K[tt++]);for(var et=V(m.store),it=0;et.length>it;)f(et[it++]);o(o.S+o.F*!G,"Symbol",{for:function(t){return s(R,t+="")?R[t]:R[t]=I(t)},keyFor:function(t){if(!U(t))throw TypeError(t+" is not a symbol!");for(var e in R)if(R[e]===t)return e},useSetter:function(){q=!0},useSimple:function(){q=!1}}),o(o.S+o.F*!G,"Object",{create:function(t,e){return void 0===e?w(t):J(w(t),e)},defineProperty:W,defineProperties:J,getOwnPropertyDescriptor:X,getOwnPropertyNames:Q,getOwnPropertySymbols:Z}),D&&o(o.S+o.F*(!G||c(function(){var t=I();return"[null]"!=T([t])||"{}"!=T({a:t})||"{}"!=T(Object(t))})),"JSON",{stringify:function(t){for(var e,i,n=[t],s=1;arguments.length>s;)n.push(arguments[s++]);if(i=e=n[1],(y(e)||void 0!==t)&&!U(t))return g(e)||(e=function(t,e){if("function"==typeof i&&(e=i.call(this,t,e)),!U(e))return e}),n[1]=e,T.apply(D,n)}}),I.prototype[$]||i(26)(I.prototype,$,I.prototype.valueOf),h(I,"Symbol"),h(Math,"Math",!0),h(n.JSON,"JSON",!0)},function(t,e,i){var n=i(51),s=i(73),r=i(69);t.exports=function(t){var e=n(t),i=s.f;if(i)for(var o,a=i(t),l=r.f,c=0;a.length>c;)l.call(t,o=a[c++])&&e.push(o);return e}},function(t,e,i){var n=i(2);n(n.S,"Object",{create:i(53)})},function(t,e,i){var n=i(2);n(n.S+n.F*!i(14),"Object",{defineProperty:i(15).f})},function(t,e,i){var n=i(2);n(n.S+n.F*!i(14),"Object",{defineProperties:i(127)})},function(t,e,i){var n=i(30),s=i(31).f;i(40)("getOwnPropertyDescriptor",function(){return function(t,e){return s(n(t),e)}})},function(t,e,i){var n=i(19),s=i(32);i(40)("getPrototypeOf",function(){return function(t){return s(n(t))}})},function(t,e,i){var n=i(19),s=i(51);i(40)("keys",function(){return function(t){return s(n(t))}})},function(t,e,i){i(40)("getOwnPropertyNames",function(){return i(128).f})},function(t,e,i){var n=i(11),s=i(44).onFreeze;i(40)("freeze",function(t){return function(e){return t&&n(e)?t(s(e)):e}})},function(t,e,i){var n=i(11),s=i(44).onFreeze;i(40)("seal",function(t){return function(e){return t&&n(e)?t(s(e)):e}})},function(t,e,i){var n=i(11),s=i(44).onFreeze;i(40)("preventExtensions",function(t){return function(e){return t&&n(e)?t(s(e)):e}})},function(t,e,i){var n=i(11);i(40)("isFrozen",function(t){return function(e){return!n(e)||!!t&&t(e)}})},function(t,e,i){var n=i(11);i(40)("isSealed",function(t){return function(e){return!n(e)||!!t&&t(e)}})},function(t,e,i){var n=i(11);i(40)("isExtensible",function(t){return function(e){return!!n(e)&&(!t||t(e))}})},function(t,e,i){var n=i(2);n(n.S+n.F,"Object",{assign:i(129)})},function(t,e,i){var n=i(2);n(n.S,"Object",{is:i(208)})},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},function(t,e,i){var n=i(2);n(n.S,"Object",{setPrototypeOf:i(97).set})},function(t,e,i){"use strict";var n=i(70),s={};s[i(13)("toStringTag")]="z",s+""!="[object z]"&&i(27)(Object.prototype,"toString",function(){return"[object "+n(this)+"]"},!0)},function(t,e,i){var n=i(2);n(n.P,"Function",{bind:i(130)})},function(t,e,i){var n=i(15).f,s=Function.prototype,r=/^\s*function ([^ (]*)/;"name"in s||i(14)&&n(s,"name",{configurable:!0,get:function(){try{return(""+this).match(r)[1]}catch(t){return""}}})},function(t,e,i){"use strict";var n=i(11),s=i(32),r=i(13)("hasInstance"),o=Function.prototype;r in o||i(15).f(o,r,{value:function(t){if("function"!=typeof this||!n(t))return!1;if(!n(this.prototype))return t instanceof this;for(;t=s(t);)if(this.prototype===t)return!0;return!1}})},function(t,e,i){var n=i(2),s=i(132);n(n.G+n.F*(parseInt!=s),{parseInt:s})},function(t,e,i){var n=i(2),s=i(133);n(n.G+n.F*(parseFloat!=s),{parseFloat:s})},function(t,e,i){"use strict";var n=i(9),s=i(29),r=i(35),o=i(99),a=i(37),l=i(10),c=i(54).f,u=i(31).f,h=i(15).f,d=i(62).trim,m=n.Number,p=m,f=m.prototype,_="Number"==r(i(53)(f)),g="trim"in String.prototype,v=function(t){var e=a(t,!1);if("string"==typeof e&&e.length>2){var i,n,s,r=(e=g?e.trim():d(e,3)).charCodeAt(0);if(43===r||45===r){if(88===(i=e.charCodeAt(2))||120===i)return NaN}else if(48===r){switch(e.charCodeAt(1)){case 66:case 98:n=2,s=49;break;case 79:case 111:n=8,s=55;break;default:return+e}for(var o,l=e.slice(2),c=0,u=l.length;c<u;c++)if((o=l.charCodeAt(c))<48||o>s)return NaN;return parseInt(l,n)}}return+e};if(!m(" 0o1")||!m("0b1")||m("+0x1")){m=function(t){var e=arguments.length<1?0:t,i=this;return i instanceof m&&(_?l(function(){f.valueOf.call(i)}):"Number"!=r(i))?o(new p(v(e)),i,m):v(e)};for(var y,x=i(14)?c(p):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),b=0;x.length>b;b++)s(p,y=x[b])&&!s(m,y)&&h(m,y,u(p,y));m.prototype=f,f.constructor=m,i(27)(n,"Number",m)}},function(t,e,i){"use strict";var n=i(2),s=i(39),r=i(134),o=i(100),a=1..toFixed,l=Math.floor,c=[0,0,0,0,0,0],u="Number.toFixed: incorrect invocation!",h=function(t,e){for(var i=-1,n=e;++i<6;)n+=t*c[i],c[i]=n%1e7,n=l(n/1e7)},d=function(t){for(var e=6,i=0;--e>=0;)i+=c[e],c[e]=l(i/t),i=i%t*1e7},m=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==c[t]){var i=String(c[t]);e=""===e?i:e+o.call("0",7-i.length)+i}return e},p=function(t,e,i){return 0===e?i:e%2==1?p(t,e-1,i*t):p(t*t,e/2,i)};n(n.P+n.F*(!!a&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!i(10)(function(){a.call({})})),"Number",{toFixed:function(t){var e,i,n,a,l=r(this,u),c=s(t),f="",_="0";if(c<0||c>20)throw RangeError(u);if(l!=l)return"NaN";if(l<=-1e21||l>=1e21)return String(l);if(l<0&&(f="-",l=-l),l>1e-21)if(i=(e=function(t){for(var e=0,i=t;i>=4096;)e+=12,i/=4096;for(;i>=2;)e+=1,i/=2;return e}(l*p(2,69,1))-69)<0?l*p(2,-e,1):l/p(2,e,1),i*=4503599627370496,(e=52-e)>0){for(h(0,i),n=c;n>=7;)h(1e7,0),n-=7;for(h(p(10,n,1),0),n=e-1;n>=23;)d(1<<23),n-=23;d(1<<n),h(1,1),d(2),_=m()}else h(0,i),h(1<<-e,0),_=m()+o.call("0",c);return _=c>0?f+((a=_.length)<=c?"0."+o.call("0",c-a)+_:_.slice(0,a-c)+"."+_.slice(a-c)):f+_}})},function(t,e,i){"use strict";var n=i(2),s=i(10),r=i(134),o=1..toPrecision;n(n.P+n.F*(s(function(){return"1"!==o.call(1,void 0)})||!s(function(){o.call({})})),"Number",{toPrecision:function(t){var e=r(this,"Number#toPrecision: incorrect invocation!");return void 0===t?o.call(e):o.call(e,t)}})},function(t,e,i){var n=i(2);n(n.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,e,i){var n=i(2),s=i(9).isFinite;n(n.S,"Number",{isFinite:function(t){return"number"==typeof t&&s(t)}})},function(t,e,i){var n=i(2);n(n.S,"Number",{isInteger:i(135)})},function(t,e,i){var n=i(2);n(n.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,i){var n=i(2),s=i(135),r=Math.abs;n(n.S,"Number",{isSafeInteger:function(t){return s(t)&&r(t)<=9007199254740991}})},function(t,e,i){var n=i(2);n(n.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,i){var n=i(2);n(n.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,i){var n=i(2),s=i(133);n(n.S+n.F*(Number.parseFloat!=s),"Number",{parseFloat:s})},function(t,e,i){var n=i(2),s=i(132);n(n.S+n.F*(Number.parseInt!=s),"Number",{parseInt:s})},function(t,e,i){var n=i(2),s=i(136),r=Math.sqrt,o=Math.acosh;n(n.S+n.F*!(o&&710==Math.floor(o(Number.MAX_VALUE))&&o(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:s(t-1+r(t-1)*r(t+1))}})},function(t,e,i){var n=i(2),s=Math.asinh;n(n.S+n.F*!(s&&1/s(0)>0),"Math",{asinh:function t(e){return isFinite(e=+e)&&0!=e?e<0?-t(-e):Math.log(e+Math.sqrt(e*e+1)):e}})},function(t,e,i){var n=i(2),s=Math.atanh;n(n.S+n.F*!(s&&1/s(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,e,i){var n=i(2),s=i(101);n(n.S,"Math",{cbrt:function(t){return s(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,e,i){var n=i(2);n(n.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,e,i){var n=i(2),s=Math.exp;n(n.S,"Math",{cosh:function(t){return(s(t=+t)+s(-t))/2}})},function(t,e,i){var n=i(2),s=i(102);n(n.S+n.F*(s!=Math.expm1),"Math",{expm1:s})},function(t,e,i){var n=i(2);n(n.S,"Math",{fround:i(137)})},function(t,e,i){var n=i(2),s=Math.abs;n(n.S,"Math",{hypot:function(t,e){for(var i,n,r=0,o=0,a=arguments.length,l=0;o<a;)l<(i=s(arguments[o++]))?(r=r*(n=l/i)*n+1,l=i):r+=i>0?(n=i/l)*n:i;return l===1/0?1/0:l*Math.sqrt(r)}})},function(t,e,i){var n=i(2),s=Math.imul;n(n.S+n.F*i(10)(function(){return-5!=s(4294967295,5)||2!=s.length}),"Math",{imul:function(t,e){var i=+t,n=+e,s=65535&i,r=65535&n;return 0|s*r+((65535&i>>>16)*r+s*(65535&n>>>16)<<16>>>0)}})},function(t,e,i){var n=i(2);n(n.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},function(t,e,i){var n=i(2);n(n.S,"Math",{log1p:i(136)})},function(t,e,i){var n=i(2);n(n.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,i){var n=i(2);n(n.S,"Math",{sign:i(101)})},function(t,e,i){var n=i(2),s=i(102),r=Math.exp;n(n.S+n.F*i(10)(function(){return-2e-17!=!Math.sinh(-2e-17)}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(s(t)-s(-t))/2:(r(t-1)-r(-t-1))*(Math.E/2)}})},function(t,e,i){var n=i(2),s=i(102),r=Math.exp;n(n.S,"Math",{tanh:function(t){var e=s(t=+t),i=s(-t);return e==1/0?1:i==1/0?-1:(e-i)/(r(t)+r(-t))}})},function(t,e,i){var n=i(2);n(n.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,e,i){var n=i(2),s=i(52),r=String.fromCharCode,o=String.fromCodePoint;n(n.S+n.F*(!!o&&1!=o.length),"String",{fromCodePoint:function(t){for(var e,i=[],n=arguments.length,o=0;n>o;){if(e=+arguments[o++],s(e,1114111)!==e)throw RangeError(e+" is not a valid code point");i.push(e<65536?r(e):r(55296+((e-=65536)>>10),e%1024+56320))}return i.join("")}})},function(t,e,i){var n=i(2),s=i(30),r=i(16);n(n.S,"String",{raw:function(t){for(var e=s(t.raw),i=r(e.length),n=arguments.length,o=[],a=0;i>a;)o.push(String(e[a++])),a<n&&o.push(String(arguments[a]));return o.join("")}})},function(t,e,i){"use strict";i(62)("trim",function(t){return function(){return t(this,3)}})},function(t,e,i){"use strict";var n=i(103)(!0);i(104)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,i=this._i;return i>=e.length?{value:void 0,done:!0}:(t=n(e,i),this._i+=t.length,{value:t,done:!1})})},function(t,e,i){"use strict";var n=i(2),s=i(103)(!1);n(n.P,"String",{codePointAt:function(t){return s(this,t)}})},function(t,e,i){"use strict";var n=i(2),s=i(16),r=i(106),o="".endsWith;n(n.P+n.F*i(107)("endsWith"),"String",{endsWith:function(t){var e=r(this,t,"endsWith"),i=arguments.length>1?arguments[1]:void 0,n=s(e.length),a=void 0===i?n:Math.min(s(i),n),l=String(t);return o?o.call(e,l,a):e.slice(a-l.length,a)===l}})},function(t,e,i){"use strict";var n=i(2),s=i(106);n(n.P+n.F*i(107)("includes"),"String",{includes:function(t){return!!~s(this,t,"includes").indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,i){var n=i(2);n(n.P,"String",{repeat:i(100)})},function(t,e,i){"use strict";var n=i(2),s=i(16),r=i(106),o="".startsWith;n(n.P+n.F*i(107)("startsWith"),"String",{startsWith:function(t){var e=r(this,t,"startsWith"),i=s(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),n=String(t);return o?o.call(e,n,i):e.slice(i,i+n.length)===n}})},function(t,e,i){"use strict";i(28)("anchor",function(t){return function(e){return t(this,"a","name",e)}})},function(t,e,i){"use strict";i(28)("big",function(t){return function(){return t(this,"big","","")}})},function(t,e,i){"use strict";i(28)("blink",function(t){return function(){return t(this,"blink","","")}})},function(t,e,i){"use strict";i(28)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,e,i){"use strict";i(28)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,e,i){"use strict";i(28)("fontcolor",function(t){return function(e){return t(this,"font","color",e)}})},function(t,e,i){"use strict";i(28)("fontsize",function(t){return function(e){return t(this,"font","size",e)}})},function(t,e,i){"use strict";i(28)("italics",function(t){return function(){return t(this,"i","","")}})},function(t,e,i){"use strict";i(28)("link",function(t){return function(e){return t(this,"a","href",e)}})},function(t,e,i){"use strict";i(28)("small",function(t){return function(){return t(this,"small","","")}})},function(t,e,i){"use strict";i(28)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,e,i){"use strict";i(28)("sub",function(t){return function(){return t(this,"sub","","")}})},function(t,e,i){"use strict";i(28)("sup",function(t){return function(){return t(this,"sup","","")}})},function(t,e,i){var n=i(2);n(n.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,e,i){"use strict";var n=i(2),s=i(19),r=i(37);n(n.P+n.F*i(10)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var e=s(this),i=r(e);return"number"!=typeof i||isFinite(i)?e.toISOString():null}})},function(t,e,i){var n=i(2),s=i(270);n(n.P+n.F*(Date.prototype.toISOString!==s),"Date",{toISOString:s})},function(t,e,i){"use strict";var n=i(10),s=Date.prototype.getTime,r=Date.prototype.toISOString,o=function(t){return t>9?t:"0"+t};t.exports=n(function(){return"0385-07-25T07:06:39.999Z"!=r.call(new Date(-5e13-1))})||!n(function(){r.call(new Date(NaN))})?function(){if(!isFinite(s.call(this)))throw RangeError("Invalid time value");var t=this,e=t.getUTCFullYear(),i=t.getUTCMilliseconds(),n=e<0?"-":e>9999?"+":"";return n+("00000"+Math.abs(e)).slice(n?-6:-4)+"-"+o(t.getUTCMonth()+1)+"-"+o(t.getUTCDate())+"T"+o(t.getUTCHours())+":"+o(t.getUTCMinutes())+":"+o(t.getUTCSeconds())+"."+(i>99?i:"0"+o(i))+"Z"}:r},function(t,e,i){var n=Date.prototype,s=n.toString,r=n.getTime;new Date(NaN)+""!="Invalid Date"&&i(27)(n,"toString",function(){var t=r.call(this);return t==t?s.call(this):"Invalid Date"})},function(t,e,i){var n=i(13)("toPrimitive"),s=Date.prototype;n in s||i(26)(s,n,i(273))},function(t,e,i){"use strict";var n=i(8),s=i(37);t.exports=function(t){if("string"!==t&&"number"!==t&&"default"!==t)throw TypeError("Incorrect hint");return s(n(this),"number"!=t)}},function(t,e,i){var n=i(2);n(n.S,"Array",{isArray:i(74)})},function(t,e,i){"use strict";var n=i(34),s=i(2),r=i(19),o=i(138),a=i(108),l=i(16),c=i(109),u=i(110);s(s.S+s.F*!i(76)(function(t){Array.from(t)}),"Array",{from:function(t){var e,i,s,h,d=r(t),m="function"==typeof this?this:Array,p=arguments.length,f=p>1?arguments[1]:void 0,_=void 0!==f,g=0,v=u(d);if(_&&(f=n(f,p>2?arguments[2]:void 0,2)),void 0==v||m==Array&&a(v))for(i=new m(e=l(d.length));e>g;g++)c(i,g,_?f(d[g],g):d[g]);else for(h=v.call(d),i=new m;!(s=h.next()).done;g++)c(i,g,_?o(h,f,[s.value,g],!0):s.value);return i.length=g,i}})},function(t,e,i){"use strict";var n=i(2),s=i(109);n(n.S+n.F*i(10)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,e=arguments.length,i=new("function"==typeof this?this:Array)(e);e>t;)s(i,t,arguments[t++]);return i.length=e,i}})},function(t,e,i){"use strict";var n=i(2),s=i(30),r=[].join;n(n.P+n.F*(i(68)!=Object||!i(36)(r)),"Array",{join:function(t){return r.call(s(this),void 0===t?",":t)}})},function(t,e,i){"use strict";var n=i(2),s=i(96),r=i(35),o=i(52),a=i(16),l=[].slice;n(n.P+n.F*i(10)(function(){s&&l.call(s)}),"Array",{slice:function(t,e){var i=a(this.length),n=r(this);if(e=void 0===e?i:e,"Array"==n)return l.call(this,t,e);for(var s=o(t,i),c=o(e,i),u=a(c-s),h=new Array(u),d=0;d<u;d++)h[d]="String"==n?this.charAt(s+d):this[s+d];return h}})},function(t,e,i){"use strict";var n=i(2),s=i(24),r=i(19),o=i(10),a=[].sort,l=[1,2,3];n(n.P+n.F*(o(function(){l.sort(void 0)})||!o(function(){l.sort(null)})||!i(36)(a)),"Array",{sort:function(t){return void 0===t?a.call(r(this)):a.call(r(this),s(t))}})},function(t,e,i){"use strict";var n=i(2),s=i(41)(0),r=i(36)([].forEach,!0);n(n.P+n.F*!r,"Array",{forEach:function(t){return s(this,t,arguments[1])}})},function(t,e,i){var n=i(11),s=i(74),r=i(13)("species");t.exports=function(t){var e;return s(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!s(e.prototype)||(e=void 0),n(e)&&null===(e=e[r])&&(e=void 0)),void 0===e?Array:e}},function(t,e,i){"use strict";var n=i(2),s=i(41)(1);n(n.P+n.F*!i(36)([].map,!0),"Array",{map:function(t){return s(this,t,arguments[1])}})},function(t,e,i){"use strict";var n=i(2),s=i(41)(2);n(n.P+n.F*!i(36)([].filter,!0),"Array",{filter:function(t){return s(this,t,arguments[1])}})},function(t,e,i){"use strict";var n=i(2),s=i(41)(3);n(n.P+n.F*!i(36)([].some,!0),"Array",{some:function(t){return s(this,t,arguments[1])}})},function(t,e,i){"use strict";var n=i(2),s=i(41)(4);n(n.P+n.F*!i(36)([].every,!0),"Array",{every:function(t){return s(this,t,arguments[1])}})},function(t,e,i){"use strict";var n=i(2),s=i(139);n(n.P+n.F*!i(36)([].reduce,!0),"Array",{reduce:function(t){return s(this,t,arguments.length,arguments[1],!1)}})},function(t,e,i){"use strict";var n=i(2),s=i(139);n(n.P+n.F*!i(36)([].reduceRight,!0),"Array",{reduceRight:function(t){return s(this,t,arguments.length,arguments[1],!0)}})},function(t,e,i){"use strict";var n=i(2),s=i(72)(!1),r=[].indexOf,o=!!r&&1/[1].indexOf(1,-0)<0;n(n.P+n.F*(o||!i(36)(r)),"Array",{indexOf:function(t){return o?r.apply(this,arguments)||0:s(this,t,arguments[1])}})},function(t,e,i){"use strict";var n=i(2),s=i(30),r=i(39),o=i(16),a=[].lastIndexOf,l=!!a&&1/[1].lastIndexOf(1,-0)<0;n(n.P+n.F*(l||!i(36)(a)),"Array",{lastIndexOf:function(t){if(l)return a.apply(this,arguments)||0;var e=s(this),i=o(e.length),n=i-1;for(arguments.length>1&&(n=Math.min(n,r(arguments[1]))),n<0&&(n=i+n);n>=0;n--)if(n in e&&e[n]===t)return n||0;return-1}})},function(t,e,i){var n=i(2);n(n.P,"Array",{copyWithin:i(140)}),i(46)("copyWithin")},function(t,e,i){var n=i(2);n(n.P,"Array",{fill:i(112)}),i(46)("fill")},function(t,e,i){"use strict";var n=i(2),s=i(41)(5),r=!0;"find"in[]&&Array(1).find(function(){r=!1}),n(n.P+n.F*r,"Array",{find:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),i(46)("find")},function(t,e,i){"use strict";var n=i(2),s=i(41)(6),r="findIndex",o=!0;r in[]&&Array(1)[r](function(){o=!1}),n(n.P+n.F*o,"Array",{findIndex:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),i(46)(r)},function(t,e,i){i(55)("Array")},function(t,e,i){var n=i(9),s=i(99),r=i(15).f,o=i(54).f,a=i(75),l=i(77),c=n.RegExp,u=c,h=c.prototype,d=/a/g,m=/a/g,p=new c(d)!==d;if(i(14)&&(!p||i(10)(function(){return m[i(13)("match")]=!1,c(d)!=d||c(m)==m||"/a/i"!=c(d,"i")}))){c=function(t,e){var i=this instanceof c,n=a(t),r=void 0===e;return!i&&n&&t.constructor===c&&r?t:s(p?new u(n&&!r?t.source:t,e):u((n=t instanceof c)?t.source:t,n&&r?l.call(t):e),i?this:h,c)};for(var f=function(t){t in c||r(c,t,{configurable:!0,get:function(){return u[t]},set:function(e){u[t]=e}})},_=o(u),g=0;_.length>g;)f(_[g++]);h.constructor=c,c.prototype=h,i(27)(n,"RegExp",c)}i(55)("RegExp")},function(t,e,i){"use strict";i(142);var n=i(8),s=i(77),r=i(14),o=/./.toString,a=function(t){i(27)(RegExp.prototype,"toString",t,!0)};i(10)(function(){return"/a/b"!=o.call({source:"a",flags:"b"})})?a(function(){var t=n(this);return"/".concat(t.source,"/","flags"in t?t.flags:!r&&t instanceof RegExp?s.call(t):void 0)}):"toString"!=o.name&&a(function(){return o.call(this)})},function(t,e,i){i(78)("match",1,function(t,e,i){return[function(i){"use strict";var n=t(this),s=void 0==i?void 0:i[e];return void 0!==s?s.call(i,n):new RegExp(i)[e](String(n))},i]})},function(t,e,i){i(78)("replace",2,function(t,e,i){return[function(n,s){"use strict";var r=t(this),o=void 0==n?void 0:n[e];return void 0!==o?o.call(n,r,s):i.call(String(r),n,s)},i]})},function(t,e,i){i(78)("search",1,function(t,e,i){return[function(i){"use strict";var n=t(this),s=void 0==i?void 0:i[e];return void 0!==s?s.call(i,n):new RegExp(i)[e](String(n))},i]})},function(t,e,i){i(78)("split",2,function(t,e,n){"use strict";var s=i(75),r=n,o=[].push;if("c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length){var a=void 0===/()??/.exec("")[1];n=function(t,e){var i=String(this);if(void 0===t&&0===e)return[];if(!s(t))return r.call(i,t,e);var n,l,c,u,h,d=[],m=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),p=0,f=void 0===e?4294967295:e>>>0,_=new RegExp(t.source,m+"g");for(a||(n=new RegExp("^"+_.source+"$(?!\\s)",m));(l=_.exec(i))&&!((c=l.index+l[0].length)>p&&(d.push(i.slice(p,l.index)),!a&&l.length>1&&l[0].replace(n,function(){for(h=1;h<arguments.length-2;h++)void 0===arguments[h]&&(l[h]=void 0)}),l.length>1&&l.index<i.length&&o.apply(d,l.slice(1)),u=l[0].length,p=c,d.length>=f));)_.lastIndex===l.index&&_.lastIndex++;return p===i.length?!u&&_.test("")||d.push(""):d.push(i.slice(p)),d.length>f?d.slice(0,f):d}}else"0".split(void 0,0).length&&(n=function(t,e){return void 0===t&&0===e?[]:r.call(this,t,e)});return[function(i,s){var r=t(this),o=void 0==i?void 0:i[e];return void 0!==o?o.call(i,r,s):n.call(String(r),i,s)},n]})},function(t,e,i){"use strict";var n,s,r,o,a=i(45),l=i(9),c=i(34),u=i(70),h=i(2),d=i(11),m=i(24),p=i(56),f=i(57),_=i(79),g=i(114).set,v=i(115)(),y=i(116),x=i(143),b=i(80),A=i(144),w=l.TypeError,S=l.process,C=S&&S.versions,B=C&&C.v8||"",V=l.Promise,M="process"==u(S),k=function(){},P=s=y.f,I=!!function(){try{var t=V.resolve(1),e=(t.constructor={})[i(13)("species")]=function(t){t(k,k)};return(M||"function"==typeof PromiseRejectionEvent)&&t.then(k)instanceof e&&0!==B.indexOf("6.6")&&-1===b.indexOf("Chrome/66")}catch(t){}}(),D=function(t){var e;return!(!d(t)||"function"!=typeof(e=t.then))&&e},T=function(t,e){if(!t._n){t._n=!0;var i=t._c;v(function(){for(var n=t._v,s=1==t._s,r=0,o=function(e){var i,r,o,a=s?e.ok:e.fail,l=e.resolve,c=e.reject,u=e.domain;try{a?(s||(2==t._h&&L(t),t._h=1),!0===a?i=n:(u&&u.enter(),i=a(n),u&&(u.exit(),o=!0)),i===e.promise?c(w("Promise-chain cycle")):(r=D(i))?r.call(i,l,c):l(i)):c(n)}catch(t){u&&!o&&u.exit(),c(t)}};i.length>r;)o(i[r++]);t._c=[],t._n=!1,e&&!t._h&&E(t)})}},E=function(t){g.call(l,function(){var e,i,n,s=t._v,r=$(t);if(r&&(e=x(function(){M?S.emit("unhandledRejection",s,t):(i=l.onunhandledrejection)?i({promise:t,reason:s}):(n=l.console)&&n.error&&n.error("Unhandled promise rejection",s)}),t._h=M||$(t)?2:1),t._a=void 0,r&&e.e)throw e.v})},$=function(t){return 1!==t._h&&0===(t._a||t._c).length},L=function(t){g.call(l,function(){var e;M?S.emit("rejectionHandled",t):(e=l.onrejectionhandled)&&e({promise:t,reason:t._v})})},R=function(t){var e=this;e._d||(e._d=!0,(e=e._w||e)._v=t,e._s=2,e._a||(e._a=e._c.slice()),T(e,!0))},F=function(t){var e,i=this;if(!i._d){i._d=!0,i=i._w||i;try{if(i===t)throw w("Promise can't be resolved itself");(e=D(t))?v(function(){var n={_w:i,_d:!1};try{e.call(t,c(F,n,1),c(R,n,1))}catch(t){R.call(n,t)}}):(i._v=t,i._s=1,T(i,!1))}catch(t){R.call({_w:i,_d:!1},t)}}};I||(V=function(t){p(this,V,"Promise","_h"),m(t),n.call(this);try{t(c(F,this,1),c(R,this,1))}catch(t){R.call(this,t)}},(n=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1}).prototype=i(58)(V.prototype,{then:function(t,e){var i=P(_(this,V));return i.ok="function"!=typeof t||t,i.fail="function"==typeof e&&e,i.domain=M?S.domain:void 0,this._c.push(i),this._a&&this._a.push(i),this._s&&T(this,!1),i.promise},catch:function(t){return this.then(void 0,t)}}),r=function(){var t=new n;this.promise=t,this.resolve=c(F,t,1),this.reject=c(R,t,1)},y.f=P=function(t){return t===V||t===o?new r(t):s(t)}),h(h.G+h.W+h.F*!I,{Promise:V}),i(61)(V,"Promise"),i(55)("Promise"),o=i(33).Promise,h(h.S+h.F*!I,"Promise",{reject:function(t){var e=P(this);return(0,e.reject)(t),e.promise}}),h(h.S+h.F*(a||!I),"Promise",{resolve:function(t){return A(a&&this===o?V:this,t)}}),h(h.S+h.F*!(I&&i(76)(function(t){V.all(t).catch(k)})),"Promise",{all:function(t){var e=this,i=P(e),n=i.resolve,s=i.reject,r=x(function(){var i=[],r=0,o=1;f(t,!1,function(t){var a=r++,l=!1;i.push(void 0),o++,e.resolve(t).then(function(t){l||(l=!0,i[a]=t,--o||n(i))},s)}),--o||n(i)});return r.e&&s(r.v),i.promise},race:function(t){var e=this,i=P(e),n=i.reject,s=x(function(){f(t,!1,function(t){e.resolve(t).then(i.resolve,n)})});return s.e&&n(s.v),i.promise}})},function(t,e,i){"use strict";var n=i(149),s=i(64);i(81)("WeakSet",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return n.def(s(this,"WeakSet"),t,!0)}},n,!1,!0)},function(t,e,i){"use strict";var n=i(2),s=i(82),r=i(117),o=i(8),a=i(52),l=i(16),c=i(11),u=i(9).ArrayBuffer,h=i(79),d=r.ArrayBuffer,m=r.DataView,p=s.ABV&&u.isView,f=d.prototype.slice,_=s.VIEW;n(n.G+n.W+n.F*(u!==d),{ArrayBuffer:d}),n(n.S+n.F*!s.CONSTR,"ArrayBuffer",{isView:function(t){return p&&p(t)||c(t)&&_ in t}}),n(n.P+n.U+n.F*i(10)(function(){return!new d(2).slice(1,void 0).byteLength}),"ArrayBuffer",{slice:function(t,e){if(void 0!==f&&void 0===e)return f.call(o(this),t);for(var i=o(this).byteLength,n=a(t,i),s=a(void 0===e?i:e,i),r=new(h(this,d))(l(s-n)),c=new m(this),u=new m(r),p=0;n<s;)u.setUint8(p++,c.getUint8(n++));return r}}),i(55)("ArrayBuffer")},function(t,e,i){var n=i(2);n(n.G+n.W+n.F*!i(82).ABV,{DataView:i(117).DataView})},function(t,e,i){i(42)("Int8",1,function(t){return function(e,i,n){return t(this,e,i,n)}})},function(t,e,i){i(42)("Uint8",1,function(t){return function(e,i,n){return t(this,e,i,n)}})},function(t,e,i){i(42)("Uint8",1,function(t){return function(e,i,n){return t(this,e,i,n)}},!0)},function(t,e,i){i(42)("Int16",2,function(t){return function(e,i,n){return t(this,e,i,n)}})},function(t,e,i){i(42)("Uint16",2,function(t){return function(e,i,n){return t(this,e,i,n)}})},function(t,e,i){i(42)("Int32",4,function(t){return function(e,i,n){return t(this,e,i,n)}})},function(t,e,i){i(42)("Uint32",4,function(t){return function(e,i,n){return t(this,e,i,n)}})},function(t,e,i){i(42)("Float32",4,function(t){return function(e,i,n){return t(this,e,i,n)}})},function(t,e,i){i(42)("Float64",8,function(t){return function(e,i,n){return t(this,e,i,n)}})},function(t,e,i){var n=i(2),s=i(24),r=i(8),o=(i(9).Reflect||{}).apply,a=Function.apply;n(n.S+n.F*!i(10)(function(){o(function(){})}),"Reflect",{apply:function(t,e,i){var n=s(t),l=r(i);return o?o(n,e,l):a.call(n,e,l)}})},function(t,e,i){var n=i(2),s=i(53),r=i(24),o=i(8),a=i(11),l=i(10),c=i(130),u=(i(9).Reflect||{}).construct,h=l(function(){function t(){}return!(u(function(){},[],t)instanceof t)}),d=!l(function(){u(function(){})});n(n.S+n.F*(h||d),"Reflect",{construct:function(t,e){r(t),o(e);var i=arguments.length<3?t:r(arguments[2]);if(d&&!h)return u(t,e,i);if(t==i){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var n=[null];return n.push.apply(n,e),new(c.apply(t,n))}var l=i.prototype,m=s(a(l)?l:Object.prototype),p=Function.apply.call(t,m,e);return a(p)?p:m}})},function(t,e,i){var n=i(15),s=i(2),r=i(8),o=i(37);s(s.S+s.F*i(10)(function(){Reflect.defineProperty(n.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,e,i){r(t),e=o(e,!0),r(i);try{return n.f(t,e,i),!0}catch(t){return!1}}})},function(t,e,i){var n=i(2),s=i(31).f,r=i(8);n(n.S,"Reflect",{deleteProperty:function(t,e){var i=s(r(t),e);return!(i&&!i.configurable)&&delete t[e]}})},function(t,e,i){"use strict";var n=i(2),s=i(8),r=function(t){this._t=s(t),this._i=0;var e,i=this._k=[];for(e in t)i.push(e)};i(105)(r,"Object",function(){var t,e=this._k;do{if(this._i>=e.length)return{value:void 0,done:!0}}while(!((t=e[this._i++])in this._t));return{value:t,done:!1}}),n(n.S,"Reflect",{enumerate:function(t){return new r(t)}})},function(t,e,i){var n=i(31),s=i(32),r=i(29),o=i(2),a=i(11),l=i(8);o(o.S,"Reflect",{get:function t(e,i){var o,c,u=arguments.length<3?e:arguments[2];return l(e)===u?e[i]:(o=n.f(e,i))?r(o,"value")?o.value:void 0!==o.get?o.get.call(u):void 0:a(c=s(e))?t(c,i,u):void 0}})},function(t,e,i){var n=i(31),s=i(2),r=i(8);s(s.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return n.f(r(t),e)}})},function(t,e,i){var n=i(2),s=i(32),r=i(8);n(n.S,"Reflect",{getPrototypeOf:function(t){return s(r(t))}})},function(t,e,i){var n=i(2);n(n.S,"Reflect",{has:function(t,e){return e in t}})},function(t,e,i){var n=i(2),s=i(8),r=Object.isExtensible;n(n.S,"Reflect",{isExtensible:function(t){return s(t),!r||r(t)}})},function(t,e,i){var n=i(2);n(n.S,"Reflect",{ownKeys:i(151)})},function(t,e,i){var n=i(2),s=i(8),r=Object.preventExtensions;n(n.S,"Reflect",{preventExtensions:function(t){s(t);try{return r&&r(t),!0}catch(t){return!1}}})},function(t,e,i){var n=i(15),s=i(31),r=i(32),o=i(29),a=i(2),l=i(49),c=i(8),u=i(11);a(a.S,"Reflect",{set:function t(e,i,a){var h,d,m=arguments.length<4?e:arguments[3],p=s.f(c(e),i);if(!p){if(u(d=r(e)))return t(d,i,a,m);p=l(0)}if(o(p,"value")){if(!1===p.writable||!u(m))return!1;if(h=s.f(m,i)){if(h.get||h.set||!1===h.writable)return!1;h.value=a,n.f(m,i,h)}else n.f(m,i,l(0,a));return!0}return void 0!==p.set&&(p.set.call(m,a),!0)}})},function(t,e,i){var n=i(2),s=i(97);s&&n(n.S,"Reflect",{setPrototypeOf:function(t,e){s.check(t,e);try{return s.set(t,e),!0}catch(t){return!1}}})},function(t,e,i){"use strict";var n=i(2),s=i(72)(!0);n(n.P,"Array",{includes:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),i(46)("includes")},function(t,e,i){"use strict";var n=i(2),s=i(152),r=i(19),o=i(16),a=i(24),l=i(111);n(n.P,"Array",{flatMap:function(t){var e,i,n=r(this);return a(t),e=o(n.length),i=l(n,0),s(i,n,n,e,0,1,t,arguments[1]),i}}),i(46)("flatMap")},function(t,e,i){"use strict";var n=i(2),s=i(152),r=i(19),o=i(16),a=i(39),l=i(111);n(n.P,"Array",{flatten:function(){var t=arguments[0],e=r(this),i=o(e.length),n=l(e,0);return s(n,e,e,i,0,void 0===t?1:a(t)),n}}),i(46)("flatten")},function(t,e,i){"use strict";var n=i(2),s=i(103)(!0);n(n.P,"String",{at:function(t){return s(this,t)}})},function(t,e,i){"use strict";var n=i(2),s=i(153),r=i(80);n(n.P+n.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(r),"String",{padStart:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,e,i){"use strict";var n=i(2),s=i(153),r=i(80);n(n.P+n.F*/Version\/10\.\d+(\.\d+)? Safari\//.test(r),"String",{padEnd:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,e,i){"use strict";i(62)("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},function(t,e,i){"use strict";i(62)("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},function(t,e,i){"use strict";var n=i(2),s=i(38),r=i(16),o=i(75),a=i(77),l=RegExp.prototype,c=function(t,e){this._r=t,this._s=e};i(105)(c,"RegExp String",function(){var t=this._r.exec(this._s);return{value:t,done:null===t}}),n(n.P,"String",{matchAll:function(t){if(s(this),!o(t))throw TypeError(t+" is not a regexp!");var e=String(this),i="flags"in l?String(t.flags):a.call(t),n=new RegExp(t.source,~i.indexOf("g")?i:"g"+i);return n.lastIndex=r(t.lastIndex),new c(n,e)}})},function(t,e,i){i(93)("asyncIterator")},function(t,e,i){i(93)("observable")},function(t,e,i){var n=i(2),s=i(151),r=i(30),o=i(31),a=i(109);n(n.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,i,n=r(t),l=o.f,c=s(n),u={},h=0;c.length>h;)void 0!==(i=l(n,e=c[h++]))&&a(u,e,i);return u}})},function(t,e,i){var n=i(2),s=i(154)(!1);n(n.S,"Object",{values:function(t){return s(t)}})},function(t,e,i){var n=i(2),s=i(154)(!0);n(n.S,"Object",{entries:function(t){return s(t)}})},function(t,e,i){"use strict";var n=i(2),s=i(19),r=i(24),o=i(15);i(14)&&n(n.P+i(83),"Object",{__defineGetter__:function(t,e){o.f(s(this),t,{get:r(e),enumerable:!0,configurable:!0})}})},function(t,e,i){"use strict";var n=i(2),s=i(19),r=i(24),o=i(15);i(14)&&n(n.P+i(83),"Object",{__defineSetter__:function(t,e){o.f(s(this),t,{set:r(e),enumerable:!0,configurable:!0})}})},function(t,e,i){"use strict";var n=i(2),s=i(19),r=i(37),o=i(32),a=i(31).f;i(14)&&n(n.P+i(83),"Object",{__lookupGetter__:function(t){var e,i=s(this),n=r(t,!0);do{if(e=a(i,n))return e.get}while(i=o(i))}})},function(t,e,i){"use strict";var n=i(2),s=i(19),r=i(37),o=i(32),a=i(31).f;i(14)&&n(n.P+i(83),"Object",{__lookupSetter__:function(t){var e,i=s(this),n=r(t,!0);do{if(e=a(i,n))return e.set}while(i=o(i))}})},function(t,e,i){var n=i(2);n(n.P+n.R,"Map",{toJSON:i(155)("Map")})},function(t,e,i){var n=i(2);n(n.P+n.R,"Set",{toJSON:i(155)("Set")})},function(t,e,i){i(84)("Map")},function(t,e,i){i(84)("Set")},function(t,e,i){i(84)("WeakMap")},function(t,e,i){i(84)("WeakSet")},function(t,e,i){i(85)("Map")},function(t,e,i){i(85)("Set")},function(t,e,i){i(85)("WeakMap")},function(t,e,i){i(85)("WeakSet")},function(t,e,i){var n=i(2);n(n.G,{global:i(9)})},function(t,e,i){var n=i(2);n(n.S,"System",{global:i(9)})},function(t,e,i){var n=i(2),s=i(35);n(n.S,"Error",{isError:function(t){return"Error"===s(t)}})},function(t,e,i){var n=i(2);n(n.S,"Math",{clamp:function(t,e,i){return Math.min(i,Math.max(e,t))}})},function(t,e,i){var n=i(2);n(n.S,"Math",{DEG_PER_RAD:Math.PI/180})},function(t,e,i){var n=i(2),s=180/Math.PI;n(n.S,"Math",{degrees:function(t){return t*s}})},function(t,e,i){var n=i(2),s=i(157),r=i(137);n(n.S,"Math",{fscale:function(t,e,i,n,o){return r(s(t,e,i,n,o))}})},function(t,e,i){var n=i(2);n(n.S,"Math",{iaddh:function(t,e,i,n){var s=t>>>0,r=i>>>0;return(e>>>0)+(n>>>0)+((s&r|(s|r)&~(s+r>>>0))>>>31)|0}})},function(t,e,i){var n=i(2);n(n.S,"Math",{isubh:function(t,e,i,n){var s=t>>>0,r=i>>>0;return(e>>>0)-(n>>>0)-((~s&r|~(s^r)&s-r>>>0)>>>31)|0}})},function(t,e,i){var n=i(2);n(n.S,"Math",{imulh:function(t,e){var i=+t,n=+e,s=65535&i,r=65535&n,o=i>>16,a=n>>16,l=(o*r>>>0)+(s*r>>>16);return o*a+(l>>16)+((s*a>>>0)+(65535&l)>>16)}})},function(t,e,i){var n=i(2);n(n.S,"Math",{RAD_PER_DEG:180/Math.PI})},function(t,e,i){var n=i(2),s=Math.PI/180;n(n.S,"Math",{radians:function(t){return t*s}})},function(t,e,i){var n=i(2);n(n.S,"Math",{scale:i(157)})},function(t,e,i){var n=i(2);n(n.S,"Math",{umulh:function(t,e){var i=+t,n=+e,s=65535&i,r=65535&n,o=i>>>16,a=n>>>16,l=(o*r>>>0)+(s*r>>>16);return o*a+(l>>>16)+((s*a>>>0)+(65535&l)>>>16)}})},function(t,e,i){var n=i(2);n(n.S,"Math",{signbit:function(t){return(t=+t)!=t?t:0==t?1/t==1/0:t>0}})},function(t,e,i){"use strict";var n=i(2),s=i(33),r=i(9),o=i(79),a=i(144);n(n.P+n.R,"Promise",{finally:function(t){var e=o(this,s.Promise||r.Promise),i="function"==typeof t;return this.then(i?function(i){return a(e,t()).then(function(){return i})}:t,i?function(i){return a(e,t()).then(function(){throw i})}:t)}})},function(t,e,i){"use strict";var n=i(2),s=i(116),r=i(143);n(n.S,"Promise",{try:function(t){var e=s.f(this),i=r(t);return(i.e?e.reject:e.resolve)(i.v),e.promise}})},function(t,e,i){var n=i(43),s=i(8),r=n.key,o=n.set;n.exp({defineMetadata:function(t,e,i,n){o(t,e,s(i),r(n))}})},function(t,e,i){var n=i(43),s=i(8),r=n.key,o=n.map,a=n.store;n.exp({deleteMetadata:function(t,e){var i=arguments.length<3?void 0:r(arguments[2]),n=o(s(e),i,!1);if(void 0===n||!n.delete(t))return!1;if(n.size)return!0;var l=a.get(e);return l.delete(i),!!l.size||a.delete(e)}})},function(t,e,i){var n=i(43),s=i(8),r=i(32),o=n.has,a=n.get,l=n.key,c=function(t,e,i){if(o(t,e,i))return a(t,e,i);var n=r(e);return null!==n?c(t,n,i):void 0};n.exp({getMetadata:function(t,e){return c(t,s(e),arguments.length<3?void 0:l(arguments[2]))}})},function(t,e,i){var n=i(147),s=i(156),r=i(43),o=i(8),a=i(32),l=r.keys,c=r.key,u=function(t,e){var i=l(t,e),r=a(t);if(null===r)return i;var o=u(r,e);return o.length?i.length?s(new n(i.concat(o))):o:i};r.exp({getMetadataKeys:function(t){return u(o(t),arguments.length<2?void 0:c(arguments[1]))}})},function(t,e,i){var n=i(43),s=i(8),r=n.get,o=n.key;n.exp({getOwnMetadata:function(t,e){return r(t,s(e),arguments.length<3?void 0:o(arguments[2]))}})},function(t,e,i){var n=i(43),s=i(8),r=n.keys,o=n.key;n.exp({getOwnMetadataKeys:function(t){return r(s(t),arguments.length<2?void 0:o(arguments[1]))}})},function(t,e,i){var n=i(43),s=i(8),r=i(32),o=n.has,a=n.key,l=function(t,e,i){if(o(t,e,i))return!0;var n=r(e);return null!==n&&l(t,n,i)};n.exp({hasMetadata:function(t,e){return l(t,s(e),arguments.length<3?void 0:a(arguments[2]))}})},function(t,e,i){var n=i(43),s=i(8),r=n.has,o=n.key;n.exp({hasOwnMetadata:function(t,e){return r(t,s(e),arguments.length<3?void 0:o(arguments[2]))}})},function(t,e,i){var n=i(43),s=i(8),r=i(24),o=n.key,a=n.set;n.exp({metadata:function(t,e){return function(i,n){a(t,e,(void 0!==n?s:r)(i),o(n))}}})},function(t,e,i){var n=i(2),s=i(115)(),r=i(9).process,o="process"==i(35)(r);n(n.G,{asap:function(t){var e=o&&r.domain;s(e?e.bind(t):t)}})},function(t,e,i){"use strict";var n=i(2),s=i(9),r=i(33),o=i(115)(),a=i(13)("observable"),l=i(24),c=i(8),u=i(56),h=i(58),d=i(26),m=i(57),p=m.RETURN,f=function(t){return null==t?void 0:l(t)},_=function(t){var e=t._c;e&&(t._c=void 0,e())},g=function(t){return void 0===t._o},v=function(t){g(t)||(t._o=void 0,_(t))},y=function(t,e){c(t),this._c=void 0,this._o=t,t=new x(this);try{var i=e(t),n=i;null!=i&&("function"==typeof i.unsubscribe?i=function(){n.unsubscribe()}:l(i),this._c=i)}catch(e){return void t.error(e)}g(this)&&_(this)};y.prototype=h({},{unsubscribe:function(){v(this)}});var x=function(t){this._s=t};x.prototype=h({},{next:function(t){var e=this._s;if(!g(e)){var i=e._o;try{var n=f(i.next);if(n)return n.call(i,t)}catch(t){try{v(e)}finally{throw t}}}},error:function(t){var e=this._s;if(g(e))throw t;var i=e._o;e._o=void 0;try{var n=f(i.error);if(!n)throw t;t=n.call(i,t)}catch(t){try{_(e)}finally{throw t}}return _(e),t},complete:function(t){var e=this._s;if(!g(e)){var i=e._o;e._o=void 0;try{var n=f(i.complete);t=n?n.call(i,t):void 0}catch(t){try{_(e)}finally{throw t}}return _(e),t}}});var b=function(t){u(this,b,"Observable","_f")._f=l(t)};h(b.prototype,{subscribe:function(t){return new y(t,this._f)},forEach:function(t){var e=this;return new(r.Promise||s.Promise)(function(i,n){l(t);var s=e.subscribe({next:function(e){try{return t(e)}catch(t){n(t),s.unsubscribe()}},error:n,complete:i})})}}),h(b,{from:function(t){var e="function"==typeof this?this:b,i=f(c(t)[a]);if(i){var n=c(i.call(t));return n.constructor===e?n:new e(function(t){return n.subscribe(t)})}return new e(function(e){var i=!1;return o(function(){if(!i){try{if(m(t,!1,function(t){if(e.next(t),i)return p})===p)return}catch(t){if(i)throw t;return void e.error(t)}e.complete()}}),function(){i=!0}})},of:function(){for(var t=0,e=arguments.length,i=new Array(e);t<e;)i[t]=arguments[t++];return new("function"==typeof this?this:b)(function(t){var e=!1;return o(function(){if(!e){for(var n=0;n<i.length;++n)if(t.next(i[n]),e)return;t.complete()}}),function(){e=!0}})}}),d(b.prototype,a,function(){return this}),n(n.G,{Observable:b}),i(55)("Observable")},function(t,e,i){var n=i(9),s=i(2),r=i(80),o=[].slice,a=/MSIE .\./.test(r),l=function(t){return function(e,i){var n=arguments.length>2,s=!!n&&o.call(arguments,2);return t(n?function(){("function"==typeof e?e:Function(e)).apply(this,s)}:e,i)}};s(s.G+s.B+s.F*a,{setTimeout:l(n.setTimeout),setInterval:l(n.setInterval)})},function(t,e,i){var n=i(2),s=i(114);n(n.G+n.B,{setImmediate:s.set,clearImmediate:s.clear})},function(t,e,i){for(var n=i(113),s=i(51),r=i(27),o=i(9),a=i(26),l=i(63),c=i(13),u=c("iterator"),h=c("toStringTag"),d=l.Array,m={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=s(m),f=0;f<p.length;f++){var _,g=p[f],v=m[g],y=o[g],x=y&&y.prototype;if(x&&(x[u]||a(x,u,d),x[h]||a(x,h,g),l[g]=d,v))for(_ in n)x[_]||r(x,_,n[_],!0)}},function(t,e,i){(function(e){!function(e){"use strict";var i,n=Object.prototype,s=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag",c="object"==typeof t,u=e.regeneratorRuntime;if(u)c&&(t.exports=u);else{(u=e.regeneratorRuntime=c?t.exports:{}).wrap=x;var h="suspendedStart",d="suspendedYield",m="executing",p="completed",f={},_={};_[o]=function(){return this};var g=Object.getPrototypeOf,v=g&&g(g(I([])));v&&v!==n&&s.call(v,o)&&(_=v);var y=S.prototype=A.prototype=Object.create(_);w.prototype=y.constructor=S,S.constructor=w,S[l]=w.displayName="GeneratorFunction",u.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===w||"GeneratorFunction"===(e.displayName||e.name))},u.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,S):(t.__proto__=S,l in t||(t[l]="GeneratorFunction")),t.prototype=Object.create(y),t},u.awrap=function(t){return{__await:t}},C(B.prototype),B.prototype[a]=function(){return this},u.AsyncIterator=B,u.async=function(t,e,i,n){var s=new B(x(t,e,i,n));return u.isGeneratorFunction(e)?s:s.next().then(function(t){return t.done?t.value:s.next()})},C(y),y[l]="Generator",y[o]=function(){return this},y.toString=function(){return"[object Generator]"},u.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){for(;e.length;){var n=e.pop();if(n in t)return i.value=n,i.done=!1,i}return i.done=!0,i}},u.values=I,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(k),!t)for(var e in this)"t"===e.charAt(0)&&s.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=i)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,s){return a.type="throw",a.arg=t,e.next=n,s&&(e.method="next",e.arg=i),!!s}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],a=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var l=s.call(o,"catchLoc"),c=s.call(o,"finallyLoc");if(l&&c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(l){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&s.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var r=n;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=t,o.arg=e,r?(this.method="next",this.next=r.finallyLoc,f):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),k(i),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var n=i.completion;if("throw"===n.type){var s=n.arg;k(i)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:I(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=i),f}}}function x(t,e,i,n){var s=e&&e.prototype instanceof A?e:A,r=Object.create(s.prototype),o=new P(n||[]);return r._invoke=function(t,e,i){var n=h;return function(s,r){if(n===m)throw new Error("Generator is already running");if(n===p){if("throw"===s)throw r;return D()}for(i.method=s,i.arg=r;;){var o=i.delegate;if(o){var a=V(o,i);if(a){if(a===f)continue;return a}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(n===h)throw n=p,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);n=m;var l=b(t,e,i);if("normal"===l.type){if(n=i.done?p:d,l.arg===f)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(n=p,i.method="throw",i.arg=l.arg)}}}(t,i,o),r}function b(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}function A(){}function w(){}function S(){}function C(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function B(t){function i(e,n,r,o){var a=b(t[e],t,n);if("throw"!==a.type){var l=a.arg,c=l.value;return c&&"object"==typeof c&&s.call(c,"__await")?Promise.resolve(c.__await).then(function(t){i("next",t,r,o)},function(t){i("throw",t,r,o)}):Promise.resolve(c).then(function(t){l.value=t,r(l)},o)}o(a.arg)}var n;"object"==typeof e.process&&e.process.domain&&(i=e.process.domain.bind(i)),this._invoke=function(t,e){function s(){return new Promise(function(n,s){i(t,e,n,s)})}return n=n?n.then(s,s):s()}}function V(t,e){var n=t.iterator[e.method];if(n===i){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=i,V(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var s=b(n,t.iterator,e.arg);if("throw"===s.type)return e.method="throw",e.arg=s.arg,e.delegate=null,f;var r=s.arg;return r?r.done?(e[t.resultName]=r.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=i),e.delegate=null,f):r:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function M(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(M,this),this.reset(!0)}function I(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(s.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=i,e.done=!0,e};return r.next=r}}return{next:D}}function D(){return{value:i,done:!0}}}("object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this)}).call(this,i(67))},function(t,e,i){i(389),t.exports=i(33).RegExp.escape},function(t,e,i){var n=i(2),s=i(390)(/[\\^$*+?.()|[\]{}]/g,"\\$&");n(n.S,"RegExp",{escape:function(t){return s(t)}})},function(t,e){t.exports=function(t,e){var i=e===Object(e)?function(t){return e[t]}:e;return function(e){return String(e).replace(t,i)}}},function(t,e,i){(function(t){var n=void 0!==t&&t||"undefined"!=typeof self&&self||window,s=Function.prototype.apply;function r(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new r(s.call(setTimeout,n,arguments),clearTimeout)},e.setInterval=function(){return new r(s.call(setInterval,n,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(n,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},i(392),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,i(67))},function(t,e,i){(function(t,e){!function(t,i){"use strict";if(!t.setImmediate){var n,s=1,r={},o=!1,a=t.document,l=Object.getPrototypeOf&&Object.getPrototypeOf(t);l=l&&l.setTimeout?l:t,"[object process]"==={}.toString.call(t.process)?n=function(t){e.nextTick(function(){u(t)})}:function(){if(t.postMessage&&!t.importScripts){var e=!0,i=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=i,e}}()?function(){var e="setImmediate$"+Math.random()+"$",i=function(i){i.source===t&&"string"==typeof i.data&&0===i.data.indexOf(e)&&u(+i.data.slice(e.length))};t.addEventListener?t.addEventListener("message",i,!1):t.attachEvent("onmessage",i),n=function(i){t.postMessage(e+i,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){u(t.data)},n=function(e){t.port2.postMessage(e)}}():a&&"onreadystatechange"in a.createElement("script")?function(){var t=a.documentElement;n=function(e){var i=a.createElement("script");i.onreadystatechange=function(){u(e),i.onreadystatechange=null,t.removeChild(i),i=null},t.appendChild(i)}}():n=function(t){setTimeout(u,0,t)},l.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),i=0;i<e.length;i++)e[i]=arguments[i+1];var o={callback:t,args:e};return r[s]=o,n(s),s++},l.clearImmediate=c}function c(t){delete r[t]}function u(t){if(o)setTimeout(u,0,t);else{var e=r[t];if(e){o=!0;try{!function(t){var e=t.callback,n=t.args;switch(n.length){case 0:e();break;case 1:e(n[0]);break;case 2:e(n[0],n[1]);break;case 3:e(n[0],n[1],n[2]);break;default:e.apply(i,n)}}(e)}finally{c(t),o=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,i(67),i(393))},function(t,e){var i,n,s=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(t){if(i===setTimeout)return setTimeout(t,0);if((i===r||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:r}catch(t){i=r}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(t){n=o}}();var l,c=[],u=!1,h=-1;function d(){u&&l&&(u=!1,l.length?c=l.concat(c):h=-1,c.length&&m())}function m(){if(!u){var t=a(d);u=!0;for(var e=c.length;e;){for(l=c,c=[];++h<e;)l&&l[h].run();h=-1,e=c.length}l=null,u=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function f(){}s.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];c.push(new p(t,e)),1!==c.length||u||a(m)},p.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=f,s.addListener=f,s.once=f,s.off=f,s.removeListener=f,s.removeAllListeners=f,s.emit=f,s.prependListener=f,s.prependOnceListener=f,s.listeners=function(t){return[]},s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(t,e,i){var n=i(395);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i(23).default)("30c5a4fc",n,!0,{})},function(t,e,i){(t.exports=i(22)(!1)).push([t.i,'/*!\n * jQuery UI CSS Framework 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/category/theming/\n */\n\n/* Layout helpers\n----------------------------------*/\n.ui-helper-hidden {\n\tdisplay: none;\n}\n.ui-helper-hidden-accessible {\n\tborder: 0;\n\tclip: rect(0 0 0 0);\n\theight: 1px;\n\tmargin: -1px;\n\toverflow: hidden;\n\tpadding: 0;\n\tposition: absolute;\n\twidth: 1px;\n}\n.ui-helper-reset {\n\tmargin: 0;\n\tpadding: 0;\n\tborder: 0;\n\toutline: 0;\n\tline-height: 1.3;\n\ttext-decoration: none;\n\tfont-size: 100%;\n\tlist-style: none;\n}\n.ui-helper-clearfix:before,\n.ui-helper-clearfix:after {\n\tcontent: "";\n\tdisplay: table;\n\tborder-collapse: collapse;\n}\n.ui-helper-clearfix:after {\n\tclear: both;\n}\n.ui-helper-zfix {\n\twidth: 100%;\n\theight: 100%;\n\ttop: 0;\n\tleft: 0;\n\tposition: absolute;\n\topacity: 0;\n\tfilter:Alpha(Opacity=0); /* support: IE8 */\n}\n\n.ui-front {\n\tz-index: 100;\n}\n\n\n/* Interaction Cues\n----------------------------------*/\n.ui-state-disabled {\n\tcursor: default !important;\n\tpointer-events: none;\n}\n\n\n/* Icons\n----------------------------------*/\n.ui-icon {\n\tdisplay: inline-block;\n\tvertical-align: middle;\n\tmargin-top: -.25em;\n\tposition: relative;\n\ttext-indent: -99999px;\n\toverflow: hidden;\n\tbackground-repeat: no-repeat;\n}\n\n.ui-widget-icon-block {\n\tleft: 50%;\n\tmargin-left: -8px;\n\tdisplay: block;\n}\n\n/* Misc visuals\n----------------------------------*/\n\n/* Overlays */\n.ui-widget-overlay {\n\tposition: fixed;\n\ttop: 0;\n\tleft: 0;\n\twidth: 100%;\n\theight: 100%;\n}\n',""])},function(t,e,i){var n=i(397);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i(23).default)("8a614cfc",n,!0,{})},function(t,e,i){var n=i(398);(t.exports=i(22)(!1)).push([t.i,"/*!\n * jQuery UI CSS Framework 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n *\n * http://api.jqueryui.com/category/theming/\n *\n * To view and modify this theme, visit http://jqueryui.com/themeroller/\n */\n\n\n/* Component containers\n----------------------------------*/\n.ui-widget {\n\tfont-family: Arial,Helvetica,sans-serif/*{ffDefault}*/;\n\tfont-size: 1em/*{fsDefault}*/;\n}\n.ui-widget .ui-widget {\n\tfont-size: 1em;\n}\n.ui-widget input,\n.ui-widget select,\n.ui-widget textarea,\n.ui-widget button {\n\tfont-family: Arial,Helvetica,sans-serif/*{ffDefault}*/;\n\tfont-size: 1em;\n}\n.ui-widget.ui-widget-content {\n\tborder: 1px solid #c5c5c5/*{borderColorDefault}*/;\n}\n.ui-widget-content {\n\tborder: 1px solid #dddddd/*{borderColorContent}*/;\n\tbackground: #ffffff/*{bgColorContent}*/ /*{bgImgUrlContent}*/ /*{bgContentXPos}*/ /*{bgContentYPos}*/ /*{bgContentRepeat}*/;\n\tcolor: #333333/*{fcContent}*/;\n}\n.ui-widget-content a {\n\tcolor: #333333/*{fcContent}*/;\n}\n.ui-widget-header {\n\tborder: 1px solid #dddddd/*{borderColorHeader}*/;\n\tbackground: #e9e9e9/*{bgColorHeader}*/ /*{bgImgUrlHeader}*/ /*{bgHeaderXPos}*/ /*{bgHeaderYPos}*/ /*{bgHeaderRepeat}*/;\n\tcolor: #333333/*{fcHeader}*/;\n\tfont-weight: bold;\n}\n.ui-widget-header a {\n\tcolor: #333333/*{fcHeader}*/;\n}\n\n/* Interaction states\n----------------------------------*/\n.ui-state-default,\n.ui-widget-content .ui-state-default,\n.ui-widget-header .ui-state-default,\n.ui-button,\n\n/* We use html here because we need a greater specificity to make sure disabled\nworks properly when clicked or hovered */\nhtml .ui-button.ui-state-disabled:hover,\nhtml .ui-button.ui-state-disabled:active {\n\tborder: 1px solid #c5c5c5/*{borderColorDefault}*/;\n\tbackground: #f6f6f6/*{bgColorDefault}*/ /*{bgImgUrlDefault}*/ /*{bgDefaultXPos}*/ /*{bgDefaultYPos}*/ /*{bgDefaultRepeat}*/;\n\tfont-weight: normal/*{fwDefault}*/;\n\tcolor: #454545/*{fcDefault}*/;\n}\n.ui-state-default a,\n.ui-state-default a:link,\n.ui-state-default a:visited,\na.ui-button,\na:link.ui-button,\na:visited.ui-button,\n.ui-button {\n\tcolor: #454545/*{fcDefault}*/;\n\ttext-decoration: none;\n}\n.ui-state-hover,\n.ui-widget-content .ui-state-hover,\n.ui-widget-header .ui-state-hover,\n.ui-state-focus,\n.ui-widget-content .ui-state-focus,\n.ui-widget-header .ui-state-focus,\n.ui-button:hover,\n.ui-button:focus {\n\tborder: 1px solid #cccccc/*{borderColorHover}*/;\n\tbackground: #ededed/*{bgColorHover}*/ /*{bgImgUrlHover}*/ /*{bgHoverXPos}*/ /*{bgHoverYPos}*/ /*{bgHoverRepeat}*/;\n\tfont-weight: normal/*{fwDefault}*/;\n\tcolor: #2b2b2b/*{fcHover}*/;\n}\n.ui-state-hover a,\n.ui-state-hover a:hover,\n.ui-state-hover a:link,\n.ui-state-hover a:visited,\n.ui-state-focus a,\n.ui-state-focus a:hover,\n.ui-state-focus a:link,\n.ui-state-focus a:visited,\na.ui-button:hover,\na.ui-button:focus {\n\tcolor: #2b2b2b/*{fcHover}*/;\n\ttext-decoration: none;\n}\n\n.ui-visual-focus {\n\tbox-shadow: 0 0 3px 1px rgb(94, 158, 214);\n}\n.ui-state-active,\n.ui-widget-content .ui-state-active,\n.ui-widget-header .ui-state-active,\na.ui-button:active,\n.ui-button:active,\n.ui-button.ui-state-active:hover {\n\tborder: 1px solid #003eff/*{borderColorActive}*/;\n\tbackground: #007fff/*{bgColorActive}*/ /*{bgImgUrlActive}*/ /*{bgActiveXPos}*/ /*{bgActiveYPos}*/ /*{bgActiveRepeat}*/;\n\tfont-weight: normal/*{fwDefault}*/;\n\tcolor: #ffffff/*{fcActive}*/;\n}\n.ui-icon-background,\n.ui-state-active .ui-icon-background {\n\tborder: #003eff/*{borderColorActive}*/;\n\tbackground-color: #ffffff/*{fcActive}*/;\n}\n.ui-state-active a,\n.ui-state-active a:link,\n.ui-state-active a:visited {\n\tcolor: #ffffff/*{fcActive}*/;\n\ttext-decoration: none;\n}\n\n/* Interaction Cues\n----------------------------------*/\n.ui-state-highlight,\n.ui-widget-content .ui-state-highlight,\n.ui-widget-header .ui-state-highlight {\n\tborder: 1px solid #dad55e/*{borderColorHighlight}*/;\n\tbackground: #fffa90/*{bgColorHighlight}*/ /*{bgImgUrlHighlight}*/ /*{bgHighlightXPos}*/ /*{bgHighlightYPos}*/ /*{bgHighlightRepeat}*/;\n\tcolor: #777620/*{fcHighlight}*/;\n}\n.ui-state-checked {\n\tborder: 1px solid #dad55e/*{borderColorHighlight}*/;\n\tbackground: #fffa90/*{bgColorHighlight}*/;\n}\n.ui-state-highlight a,\n.ui-widget-content .ui-state-highlight a,\n.ui-widget-header .ui-state-highlight a {\n\tcolor: #777620/*{fcHighlight}*/;\n}\n.ui-state-error,\n.ui-widget-content .ui-state-error,\n.ui-widget-header .ui-state-error {\n\tborder: 1px solid #f1a899/*{borderColorError}*/;\n\tbackground: #fddfdf/*{bgColorError}*/ /*{bgImgUrlError}*/ /*{bgErrorXPos}*/ /*{bgErrorYPos}*/ /*{bgErrorRepeat}*/;\n\tcolor: #5f3f3f/*{fcError}*/;\n}\n.ui-state-error a,\n.ui-widget-content .ui-state-error a,\n.ui-widget-header .ui-state-error a {\n\tcolor: #5f3f3f/*{fcError}*/;\n}\n.ui-state-error-text,\n.ui-widget-content .ui-state-error-text,\n.ui-widget-header .ui-state-error-text {\n\tcolor: #5f3f3f/*{fcError}*/;\n}\n.ui-priority-primary,\n.ui-widget-content .ui-priority-primary,\n.ui-widget-header .ui-priority-primary {\n\tfont-weight: bold;\n}\n.ui-priority-secondary,\n.ui-widget-content .ui-priority-secondary,\n.ui-widget-header .ui-priority-secondary {\n\topacity: .7;\n\tfilter:Alpha(Opacity=70); /* support: IE8 */\n\tfont-weight: normal;\n}\n.ui-state-disabled,\n.ui-widget-content .ui-state-disabled,\n.ui-widget-header .ui-state-disabled {\n\topacity: .35;\n\tfilter:Alpha(Opacity=35); /* support: IE8 */\n\tbackground-image: none;\n}\n.ui-state-disabled .ui-icon {\n\tfilter:Alpha(Opacity=35); /* support: IE8 - See #6059 */\n}\n\n/* Icons\n----------------------------------*/\n\n/* states and images */\n.ui-icon {\n\twidth: 16px;\n\theight: 16px;\n}\n.ui-icon,\n.ui-widget-content .ui-icon {\n\tbackground-image: url("+n(i(158))+");\n}\n.ui-widget-header .ui-icon {\n\tbackground-image: url("+n(i(158))+");\n}\n.ui-state-hover .ui-icon,\n.ui-state-focus .ui-icon,\n.ui-button:hover .ui-icon,\n.ui-button:focus .ui-icon {\n\tbackground-image: url("+n(i(399))+");\n}\n.ui-state-active .ui-icon,\n.ui-button:active .ui-icon {\n\tbackground-image: url("+n(i(400))+");\n}\n.ui-state-highlight .ui-icon,\n.ui-button .ui-state-highlight.ui-icon {\n\tbackground-image: url("+n(i(401))+");\n}\n.ui-state-error .ui-icon,\n.ui-state-error-text .ui-icon {\n\tbackground-image: url("+n(i(402))+");\n}\n.ui-button .ui-icon {\n\tbackground-image: url("+n(i(403))+");\n}\n\n/* positioning */\n.ui-icon-blank { background-position: 16px 16px; }\n.ui-icon-caret-1-n { background-position: 0 0; }\n.ui-icon-caret-1-ne { background-position: -16px 0; }\n.ui-icon-caret-1-e { background-position: -32px 0; }\n.ui-icon-caret-1-se { background-position: -48px 0; }\n.ui-icon-caret-1-s { background-position: -65px 0; }\n.ui-icon-caret-1-sw { background-position: -80px 0; }\n.ui-icon-caret-1-w { background-position: -96px 0; }\n.ui-icon-caret-1-nw { background-position: -112px 0; }\n.ui-icon-caret-2-n-s { background-position: -128px 0; }\n.ui-icon-caret-2-e-w { background-position: -144px 0; }\n.ui-icon-triangle-1-n { background-position: 0 -16px; }\n.ui-icon-triangle-1-ne { background-position: -16px -16px; }\n.ui-icon-triangle-1-e { background-position: -32px -16px; }\n.ui-icon-triangle-1-se { background-position: -48px -16px; }\n.ui-icon-triangle-1-s { background-position: -65px -16px; }\n.ui-icon-triangle-1-sw { background-position: -80px -16px; }\n.ui-icon-triangle-1-w { background-position: -96px -16px; }\n.ui-icon-triangle-1-nw { background-position: -112px -16px; }\n.ui-icon-triangle-2-n-s { background-position: -128px -16px; }\n.ui-icon-triangle-2-e-w { background-position: -144px -16px; }\n.ui-icon-arrow-1-n { background-position: 0 -32px; }\n.ui-icon-arrow-1-ne { background-position: -16px -32px; }\n.ui-icon-arrow-1-e { background-position: -32px -32px; }\n.ui-icon-arrow-1-se { background-position: -48px -32px; }\n.ui-icon-arrow-1-s { background-position: -65px -32px; }\n.ui-icon-arrow-1-sw { background-position: -80px -32px; }\n.ui-icon-arrow-1-w { background-position: -96px -32px; }\n.ui-icon-arrow-1-nw { background-position: -112px -32px; }\n.ui-icon-arrow-2-n-s { background-position: -128px -32px; }\n.ui-icon-arrow-2-ne-sw { background-position: -144px -32px; }\n.ui-icon-arrow-2-e-w { background-position: -160px -32px; }\n.ui-icon-arrow-2-se-nw { background-position: -176px -32px; }\n.ui-icon-arrowstop-1-n { background-position: -192px -32px; }\n.ui-icon-arrowstop-1-e { background-position: -208px -32px; }\n.ui-icon-arrowstop-1-s { background-position: -224px -32px; }\n.ui-icon-arrowstop-1-w { background-position: -240px -32px; }\n.ui-icon-arrowthick-1-n { background-position: 1px -48px; }\n.ui-icon-arrowthick-1-ne { background-position: -16px -48px; }\n.ui-icon-arrowthick-1-e { background-position: -32px -48px; }\n.ui-icon-arrowthick-1-se { background-position: -48px -48px; }\n.ui-icon-arrowthick-1-s { background-position: -64px -48px; }\n.ui-icon-arrowthick-1-sw { background-position: -80px -48px; }\n.ui-icon-arrowthick-1-w { background-position: -96px -48px; }\n.ui-icon-arrowthick-1-nw { background-position: -112px -48px; }\n.ui-icon-arrowthick-2-n-s { background-position: -128px -48px; }\n.ui-icon-arrowthick-2-ne-sw { background-position: -144px -48px; }\n.ui-icon-arrowthick-2-e-w { background-position: -160px -48px; }\n.ui-icon-arrowthick-2-se-nw { background-position: -176px -48px; }\n.ui-icon-arrowthickstop-1-n { background-position: -192px -48px; }\n.ui-icon-arrowthickstop-1-e { background-position: -208px -48px; }\n.ui-icon-arrowthickstop-1-s { background-position: -224px -48px; }\n.ui-icon-arrowthickstop-1-w { background-position: -240px -48px; }\n.ui-icon-arrowreturnthick-1-w { background-position: 0 -64px; }\n.ui-icon-arrowreturnthick-1-n { background-position: -16px -64px; }\n.ui-icon-arrowreturnthick-1-e { background-position: -32px -64px; }\n.ui-icon-arrowreturnthick-1-s { background-position: -48px -64px; }\n.ui-icon-arrowreturn-1-w { background-position: -64px -64px; }\n.ui-icon-arrowreturn-1-n { background-position: -80px -64px; }\n.ui-icon-arrowreturn-1-e { background-position: -96px -64px; }\n.ui-icon-arrowreturn-1-s { background-position: -112px -64px; }\n.ui-icon-arrowrefresh-1-w { background-position: -128px -64px; }\n.ui-icon-arrowrefresh-1-n { background-position: -144px -64px; }\n.ui-icon-arrowrefresh-1-e { background-position: -160px -64px; }\n.ui-icon-arrowrefresh-1-s { background-position: -176px -64px; }\n.ui-icon-arrow-4 { background-position: 0 -80px; }\n.ui-icon-arrow-4-diag { background-position: -16px -80px; }\n.ui-icon-extlink { background-position: -32px -80px; }\n.ui-icon-newwin { background-position: -48px -80px; }\n.ui-icon-refresh { background-position: -64px -80px; }\n.ui-icon-shuffle { background-position: -80px -80px; }\n.ui-icon-transfer-e-w { background-position: -96px -80px; }\n.ui-icon-transferthick-e-w { background-position: -112px -80px; }\n.ui-icon-folder-collapsed { background-position: 0 -96px; }\n.ui-icon-folder-open { background-position: -16px -96px; }\n.ui-icon-document { background-position: -32px -96px; }\n.ui-icon-document-b { background-position: -48px -96px; }\n.ui-icon-note { background-position: -64px -96px; }\n.ui-icon-mail-closed { background-position: -80px -96px; }\n.ui-icon-mail-open { background-position: -96px -96px; }\n.ui-icon-suitcase { background-position: -112px -96px; }\n.ui-icon-comment { background-position: -128px -96px; }\n.ui-icon-person { background-position: -144px -96px; }\n.ui-icon-print { background-position: -160px -96px; }\n.ui-icon-trash { background-position: -176px -96px; }\n.ui-icon-locked { background-position: -192px -96px; }\n.ui-icon-unlocked { background-position: -208px -96px; }\n.ui-icon-bookmark { background-position: -224px -96px; }\n.ui-icon-tag { background-position: -240px -96px; }\n.ui-icon-home { background-position: 0 -112px; }\n.ui-icon-flag { background-position: -16px -112px; }\n.ui-icon-calendar { background-position: -32px -112px; }\n.ui-icon-cart { background-position: -48px -112px; }\n.ui-icon-pencil { background-position: -64px -112px; }\n.ui-icon-clock { background-position: -80px -112px; }\n.ui-icon-disk { background-position: -96px -112px; }\n.ui-icon-calculator { background-position: -112px -112px; }\n.ui-icon-zoomin { background-position: -128px -112px; }\n.ui-icon-zoomout { background-position: -144px -112px; }\n.ui-icon-search { background-position: -160px -112px; }\n.ui-icon-wrench { background-position: -176px -112px; }\n.ui-icon-gear { background-position: -192px -112px; }\n.ui-icon-heart { background-position: -208px -112px; }\n.ui-icon-star { background-position: -224px -112px; }\n.ui-icon-link { background-position: -240px -112px; }\n.ui-icon-cancel { background-position: 0 -128px; }\n.ui-icon-plus { background-position: -16px -128px; }\n.ui-icon-plusthick { background-position: -32px -128px; }\n.ui-icon-minus { background-position: -48px -128px; }\n.ui-icon-minusthick { background-position: -64px -128px; }\n.ui-icon-close { background-position: -80px -128px; }\n.ui-icon-closethick { background-position: -96px -128px; }\n.ui-icon-key { background-position: -112px -128px; }\n.ui-icon-lightbulb { background-position: -128px -128px; }\n.ui-icon-scissors { background-position: -144px -128px; }\n.ui-icon-clipboard { background-position: -160px -128px; }\n.ui-icon-copy { background-position: -176px -128px; }\n.ui-icon-contact { background-position: -192px -128px; }\n.ui-icon-image { background-position: -208px -128px; }\n.ui-icon-video { background-position: -224px -128px; }\n.ui-icon-script { background-position: -240px -128px; }\n.ui-icon-alert { background-position: 0 -144px; }\n.ui-icon-info { background-position: -16px -144px; }\n.ui-icon-notice { background-position: -32px -144px; }\n.ui-icon-help { background-position: -48px -144px; }\n.ui-icon-check { background-position: -64px -144px; }\n.ui-icon-bullet { background-position: -80px -144px; }\n.ui-icon-radio-on { background-position: -96px -144px; }\n.ui-icon-radio-off { background-position: -112px -144px; }\n.ui-icon-pin-w { background-position: -128px -144px; }\n.ui-icon-pin-s { background-position: -144px -144px; }\n.ui-icon-play { background-position: 0 -160px; }\n.ui-icon-pause { background-position: -16px -160px; }\n.ui-icon-seek-next { background-position: -32px -160px; }\n.ui-icon-seek-prev { background-position: -48px -160px; }\n.ui-icon-seek-end { background-position: -64px -160px; }\n.ui-icon-seek-start { background-position: -80px -160px; }\n/* ui-icon-seek-first is deprecated, use ui-icon-seek-start instead */\n.ui-icon-seek-first { background-position: -80px -160px; }\n.ui-icon-stop { background-position: -96px -160px; }\n.ui-icon-eject { background-position: -112px -160px; }\n.ui-icon-volume-off { background-position: -128px -160px; }\n.ui-icon-volume-on { background-position: -144px -160px; }\n.ui-icon-power { background-position: 0 -176px; }\n.ui-icon-signal-diag { background-position: -16px -176px; }\n.ui-icon-signal { background-position: -32px -176px; }\n.ui-icon-battery-0 { background-position: -48px -176px; }\n.ui-icon-battery-1 { background-position: -64px -176px; }\n.ui-icon-battery-2 { background-position: -80px -176px; }\n.ui-icon-battery-3 { background-position: -96px -176px; }\n.ui-icon-circle-plus { background-position: 0 -192px; }\n.ui-icon-circle-minus { background-position: -16px -192px; }\n.ui-icon-circle-close { background-position: -32px -192px; }\n.ui-icon-circle-triangle-e { background-position: -48px -192px; }\n.ui-icon-circle-triangle-s { background-position: -64px -192px; }\n.ui-icon-circle-triangle-w { background-position: -80px -192px; }\n.ui-icon-circle-triangle-n { background-position: -96px -192px; }\n.ui-icon-circle-arrow-e { background-position: -112px -192px; }\n.ui-icon-circle-arrow-s { background-position: -128px -192px; }\n.ui-icon-circle-arrow-w { background-position: -144px -192px; }\n.ui-icon-circle-arrow-n { background-position: -160px -192px; }\n.ui-icon-circle-zoomin { background-position: -176px -192px; }\n.ui-icon-circle-zoomout { background-position: -192px -192px; }\n.ui-icon-circle-check { background-position: -208px -192px; }\n.ui-icon-circlesmall-plus { background-position: 0 -208px; }\n.ui-icon-circlesmall-minus { background-position: -16px -208px; }\n.ui-icon-circlesmall-close { background-position: -32px -208px; }\n.ui-icon-squaresmall-plus { background-position: -48px -208px; }\n.ui-icon-squaresmall-minus { background-position: -64px -208px; }\n.ui-icon-squaresmall-close { background-position: -80px -208px; }\n.ui-icon-grip-dotted-vertical { background-position: 0 -224px; }\n.ui-icon-grip-dotted-horizontal { background-position: -16px -224px; }\n.ui-icon-grip-solid-vertical { background-position: -32px -224px; }\n.ui-icon-grip-solid-horizontal { background-position: -48px -224px; }\n.ui-icon-gripsmall-diagonal-se { background-position: -64px -224px; }\n.ui-icon-grip-diagonal-se { background-position: -80px -224px; }\n\n\n/* Misc visuals\n----------------------------------*/\n\n/* Corner radius */\n.ui-corner-all,\n.ui-corner-top,\n.ui-corner-left,\n.ui-corner-tl {\n\tborder-top-left-radius: 3px/*{cornerRadius}*/;\n}\n.ui-corner-all,\n.ui-corner-top,\n.ui-corner-right,\n.ui-corner-tr {\n\tborder-top-right-radius: 3px/*{cornerRadius}*/;\n}\n.ui-corner-all,\n.ui-corner-bottom,\n.ui-corner-left,\n.ui-corner-bl {\n\tborder-bottom-left-radius: 3px/*{cornerRadius}*/;\n}\n.ui-corner-all,\n.ui-corner-bottom,\n.ui-corner-right,\n.ui-corner-br {\n\tborder-bottom-right-radius: 3px/*{cornerRadius}*/;\n}\n\n/* Overlays */\n.ui-widget-overlay {\n\tbackground: #aaaaaa/*{bgColorOverlay}*/ /*{bgImgUrlOverlay}*/ /*{bgOverlayXPos}*/ /*{bgOverlayYPos}*/ /*{bgOverlayRepeat}*/;\n\topacity: .3/*{opacityOverlay}*/;\n\tfilter: Alpha(Opacity=30)/*{opacityFilterOverlay}*/; /* support: IE8 */\n}\n.ui-widget-shadow {\n\t-webkit-box-shadow: 0/*{offsetLeftShadow}*/ 0/*{offsetTopShadow}*/ 5px/*{thicknessShadow}*/ #666666/*{bgColorShadow}*/;\n\tbox-shadow: 0/*{offsetLeftShadow}*/ 0/*{offsetTopShadow}*/ 5px/*{thicknessShadow}*/ #666666/*{bgColorShadow}*/;\n}\n",""])},function(t,e){t.exports=function(t){return"string"!=typeof t?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),/["'() \t\n]/.test(t)?'"'+t.replace(/"/g,'\\"').replace(/\n/g,"\\n")+'"':t)}},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAADwCAMAAADYSUr5AAABDlBMVEVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVUEec/kAAAAWnRSTlMAGf8QMwQIUL+CmS8iVXFAZmAaEzLMDSE8FkJISyAeWiMnMVMshTSHgMNqyM/GOEUcvLi+fKu1pYyqqK0fsin9AZ5RJO8KBgIDj6JilEqgr23fnEdjP29/kWiyI5UtAAAM80lEQVR4Aezb3XLzOgiFYXh8//e8T8MwQeNJ8yXd5T2zF8RiCfm3jWVZvoGUf7x+X+6AfLnEUZRkCZYf7EBQAsgoEFVNilpJ2gFafgkmP9eBoM1R2cEwg0GM6WDqh5ryXur4hxIGPZFD9vTrDbIe8e2QY4FtCsF5DU0dMAygdsCn6EM8d/AQkBzsJUsw+XeuApHIGiz3RmhZlmVZluVP3Anmd92Igbojh4IAg1/z+4CkZqSQn3wjld2AFlC3kM/9St2AHB8eg/yn9ZOnEQ9yIge/Zj8bCMS/AjD3rCzi+X1ATn4W9YMdMJDe+T4gT0sw5F4FlmVZlmVZ/gTiFcBLv++zBQTmHWdxxr3jw/AD5gOcM6DKekhN17SCvmkcjfPx53oMcjg4xslAoYp127GDWoIq3jo+0PWyY5CBuYJz+hCibAM1gBoOxg4yWzS3MCd/e8Xm9HkA5yPcKu+4xmFqQdz7RRwbuoA754CjKl7EV+eDWJZlWZZl6SQZL8EPDwCiMGhADMxqcm8A0WCOqsB5AOpnJVmlETk9QItIs4H9KPPxiRgLKDjPINQPi2TVpg4iRwOS4/hbyOQAY/2aaM5HKP485Ii5g4Dw1GB9jzgPQFefOoyInt/1nt9l9AEPBaLqCXnHAIwvJLSAs8ywCoie3pfAcIiYlkCSd5YAotKPbziJ6QU0mGYwCql/oTcbkIf3AWlegtGQ8xzNcnSMazgOmA2oAL/0RmRZlmVZFvFO0nxh1jMQPwhixhD+KknfQ471F9fcnjLT92q9YAb9VYBse0otqn4qFlOAsk8NYjKkhb+O6kArkYwoOodbbSEMMyY6ouaq6W80IOlFKTqYO0AUjLro0VqFY7AftCD1ESo6eD7jJgN6hhBTfjeg63jbpUAGGRVyeofZChJDAN2fgyFdf+OVFtnkvPP0aqh/WC+DQ3uf87Usy7Isy+V/dB2m32vqm7xWv4xPM39nokzxaAC44ubdXn5rB4Ty99iIy+XBII9Jl7g8bHP8lwPA91Sve1D0yxVqfISHyi4Rarpnn6PTdxkAYDCotHczoE+xkl/3JX0JfHsHtHhQDXrWAUCohgsZv+Uc0Ka3J7vC1c8BPb6v/++/CqAEUOMvMJhateTX3Qeccb3wGaLwXzvnwaa20YXRlzMTiVjrFWIDqTgxaZveeyW99/r//8gHLPfR6D4eHtnhw2V1th5U75urkRSLvRvJ1z8wMDAwMBABonpzX7HmPh2JEhiX2sP9ACgLV2BfidFPjmaZ+lVBpTaB6Fd/ApzIuxfj6g63gJXEaV2XbLFAoPRXSUzIXsw2kS1Np16I3jsrdHuT7HVRURRURfbfCg0ZZl0xYHKjLdoL1HUdLnCBjDsBJAlQbMB1gAUAmq4R7Nw6gEwAFBdgAVCcnT1AGsBsNhPKAgIv+QBOOgES1rDFAhlZIO0OdgOfb8h1ACXJDwkbA8wR3T2eAzBvAzh78OShTgAPP/ywyHSgc/eCC8DqfyQNAOgEMAr4iDYgg4c3ZDtgWiJRTtm5FCFK5gQgQLq6DbSHwKOPpofATEVRaCaDuPm4lQCs/quPPZIPYOReEKPRaDoaIYPFYpEfA5hOSyinaQBSGkAEYhLANYBr1+yFs4tB8MyVA/kAkA9ALoDH1SqT5ipQ5wLwG+SJLcjg+vXrUGQ7IE7LchrbAC48H8D1C9CWUcWDVbWkGnUCiEI7eHL7IQMofACFC4BOB0ys/kwALvCntriWK4pcB8TplkjGKYGSzjFZVdhZoGJHle0AC6D/IQDd7UEtHwCxuz13HcD9ysCV/qdB2x8moBailS9h0HfQa9LN+xdcAJZArcMRY7Ml6pbB6u8HALp1Tqg1MDAwMHBpePpp7SVAUB6QQPuJRO14BoBnTEsgvceecMHE3Z6d9HDjWVBKXWsPc5irS9M0af0xEszGBXBelcnNzgQmV9j71GYEkvqVJACTDZC/n6eqql5ugNSY1AQIWAYBJppAkPEcPOfqB5pFWz+0CeCfDse7eH79cUpav0piMr8gWzB6QS/qJSGDSqjquLo+L+aJq4Gmye0gwKT1CfiOU0kTaMyIAJFcAP52GL187ZVXH7tWJvVTKqpvAK/x+vrjjbRAoHL+VOqFispf+2Ia2BJuvL2nTZNxYMxpQxO05UpkS7ySC0ACKXFOeZOnSesnqncAektv653CXNeTDjBX6q4DGjrX+jUgAfWNt/cuW96VsVi4eweIEaQeAVgHPP7E+sPVb4C/Hw+EEFp/j/fXHx+Yj0iOcfMHnNt0O37XPJEJINDtCN3o3mnPKE9RagHUuQAiO1z9bnsugMQ/fPvh8cMffbzzKTtOerjVL8MdAuZOn3uu9U3vM94XgBxIIUgoA1j96VkQnkkDkHKHBPCUjD4uV7/Y0UkkyHjlk4k0+eQVC4DThrBneeSY4AdROrO5+v11gP/f3t5hJKOPN77+5DRohLTC+qrWXK3lOihHpbuQulYv7BrodjIwMDAwUEItowa4Ls+nMgT6f1IBVNoDoFsmsJK0IsjQObQJPMJnn33+OR8nu3O6qX+LpOVjvPwyjy0zz1uU7Cid+xfK3L8rVIzL8otOAvBfAmioVNGYAiut/NX4AnO+3PCVqViVVGrczY27O0UG7heCgb1OjBEhmwF1brYYSyu+4GABAA1gugK2X90GaAP4+ptPP/3ma1NRirqBRrkAOo+MoEgUtAHolPRtLECcTCAJ4NXpmnSDK1ZlNgCMXLlG55CiUppAWn+gG8CnG05M9S0whsY9QIE53eUpgGQGQoBSizYAbQNIWqVaLquqSgJYsVKJrygXQEZBylxur1z9kXQMeJ+TNXwro647yzPfH8AZcAZn5uEcKFkEbrz/kVdfnb665Fw7+IKVND5cAL4DvgPguW79jYxqtWUhc9cwhDCfzzsBdI75xZoP159081llx4DlcnMAIKPii7IcUx16DEjrX7UJEKEOSlgCLGSwOuU8SQBJZ8mwF+kG8NRTu0/XINkxoIzL5ZIl2dPg4c8Cz+k5wJRaXVaTybutUYs6tAnQ+WG/nogbnwZZGJkxgHIDS5QHDnod8Jyk5wi2rigHQBIHfBEU4FOb+v3LI9EJ4GSNvVBEYiQWutnrgDuHsx9+OEu0OQ2SwqfBjzn+ycnDMDAwMFCWifz4E8BPP+ry8DP8LOMXdvyiy8KjAI/af38ACeBHGTNmSvgVqOWodShmAMyO2QAhYC3wWxvAb33+9pVRU2fuheyFvDOLm7r9+o/YABLWAiTkrwQD+Pqh3v/gZuK/F7+bZx8FPeoIEALWAgD4fZgw8fWPZdRWf6YcQRMakMHvkn7vzDC7jQHU7KjzAVh/G/BiSKZZ/dkAQqdlKCQV5oALIDKbzYg6Em3B+QA8kNQPVv+BOuC4g2ANEAJWww9tAD/4DsivwKYfZAwwPQ5+0HsFg1eyg6CpG/8OdRaQ0NGYscOa7g/TP5QfA5D81HvnDwz++S3At38Of2FxYGBgYGDgKNR4PSaM6x7vkDgkV674+vF6TACLwAdg8YR0hnocNt/o5jcxZ3IxU/72toZaXUdeqXUswCLwASTxYDtUw7Y8P0MSgE3PBdBVMO8qxw0AJtkAYCwBO5XGgJ8hCcCmG2Qrzivinu0AUs8r9+4Y4MmPAffmWYAtd8ZZYLgOGBgYGBgYoNElJvwl/v4wSAZwHi5R/YzF3zVBRlV/C5UcZP7+QX+/Q1nxj/hbrJQQxvgE8D/jTfsdSeBF6e9aL7YtAKuFxhdu0BZSzItivv5g5/P2eXZzul5QYH7HETnXhnOidlQNLAKnmQCmG0bTkRU4YjTavIBNZ8ra0+lMsel3ZgdI1gHtuLCiW74pH19AvGm/MxnTSGoYywCVLEoXwD07CFbw4vmLUKUBiLqmWz66V6l+Bn6udBkZGBgYGLD3B/R1/xBVf/frO47n8e8P6Of+Mbr+7td3BO/Bjxj82MPdg5Q35359x/D9+PcHmEPqfwj0x85/ABAAP5iDd2Wm2/rd9uSdvdNnklLHO6CN98E/HE2LufTHHxLQc36bnnek/HTT1P1PpNT//fff1AFpCX0DsF/IOH9If7gdFvn5kS8oM78PoO/+CNjny239BwygkZpcAJmfuYL6uw+ofwcsdVE/hzsEmiazQz0dnOcDbKfu75C8w1JLegZgg5ryg5oNghvPDVJ4V2Z6ZpCUd/LTzfIOS/MeHPM05td3BO/B8S5k/PqO43mOfSnr13csHxgYGBgYGNgDFxzc7xooNtDf78EA2B8ABamD9gcgdHcFABTk3QeEJPY5GjpgGAMYzgKXloGBgYGBgYERultAaC9E4s3XP9Ldwkij/xzAiEz9l6IDXL3md2cHMLKPTAAY3XpR1+/dMSAa3fpHvn5Gl6MDrH4y9V+CDsjWf1nOApn6L+F1gNV/F48BB4BR+zUwcIfzP/8S/ZOlvFfuAAAAAElFTkSuQmCC"},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAADwCAMAAADYSUr5AAABDlBMVEX////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////uKVtWAAAAWnRSTlMAGf8QMwQIUL+CmS8iVXFAZmAaEzLMDSE8FkJISyAeWiMnMVMshTSHgMNqyM/GOEUcvLi+fKu1pYyqqK0fsin9AZ5RJO8KBgIDj6JilEqgr23fnEdjP29/kWiyI5UtAAAM80lEQVR4Aezb3XLzOgiFYXh8//e8T8MwQeNJ8yXd5T2zF8RiCfm3jWVZvoGUf7x+X+6AfLnEUZRkCZYf7EBQAsgoEFVNilpJ2gFafgkmP9eBoM1R2cEwg0GM6WDqh5ryXur4hxIGPZFD9vTrDbIe8e2QY4FtCsF5DU0dMAygdsCn6EM8d/AQkBzsJUsw+XeuApHIGiz3RmhZlmVZluVP3Anmd92Igbojh4IAg1/z+4CkZqSQn3wjld2AFlC3kM/9St2AHB8eg/yn9ZOnEQ9yIge/Zj8bCMS/AjD3rCzi+X1ATn4W9YMdMJDe+T4gT0sw5F4FlmVZlmVZ/gTiFcBLv++zBQTmHWdxxr3jw/AD5gOcM6DKekhN17SCvmkcjfPx53oMcjg4xslAoYp127GDWoIq3jo+0PWyY5CBuYJz+hCibAM1gBoOxg4yWzS3MCd/e8Xm9HkA5yPcKu+4xmFqQdz7RRwbuoA754CjKl7EV+eDWJZlWZZl6SQZL8EPDwCiMGhADMxqcm8A0WCOqsB5AOpnJVmlETk9QItIs4H9KPPxiRgLKDjPINQPi2TVpg4iRwOS4/hbyOQAY/2aaM5HKP485Ii5g4Dw1GB9jzgPQFefOoyInt/1nt9l9AEPBaLqCXnHAIwvJLSAs8ywCoie3pfAcIiYlkCSd5YAotKPbziJ6QU0mGYwCql/oTcbkIf3AWlegtGQ8xzNcnSMazgOmA2oAL/0RmRZlmVZFvFO0nxh1jMQPwhixhD+KknfQ471F9fcnjLT92q9YAb9VYBse0otqn4qFlOAsk8NYjKkhb+O6kArkYwoOodbbSEMMyY6ouaq6W80IOlFKTqYO0AUjLro0VqFY7AftCD1ESo6eD7jJgN6hhBTfjeg63jbpUAGGRVyeofZChJDAN2fgyFdf+OVFtnkvPP0aqh/WC+DQ3uf87Usy7Isy+V/dB2m32vqm7xWv4xPM39nokzxaAC44ubdXn5rB4Ty99iIy+XBII9Jl7g8bHP8lwPA91Sve1D0yxVqfISHyi4Rarpnn6PTdxkAYDCotHczoE+xkl/3JX0JfHsHtHhQDXrWAUCohgsZv+Uc0Ka3J7vC1c8BPb6v/++/CqAEUOMvMJhateTX3Qeccb3wGaLwXzvnwaa20YXRlzMTiVjrFWIDqTgxaZveeyW99/r//8gHLPfR6D4eHtnhw2V1th5U75urkRSLvRvJ1z8wMDAwMBABonpzX7HmPh2JEhiX2sP9ACgLV2BfidFPjmaZ+lVBpTaB6Fd/ApzIuxfj6g63gJXEaV2XbLFAoPRXSUzIXsw2kS1Np16I3jsrdHuT7HVRURRURfbfCg0ZZl0xYHKjLdoL1HUdLnCBjDsBJAlQbMB1gAUAmq4R7Nw6gEwAFBdgAVCcnT1AGsBsNhPKAgIv+QBOOgES1rDFAhlZIO0OdgOfb8h1ACXJDwkbA8wR3T2eAzBvAzh78OShTgAPP/ywyHSgc/eCC8DqfyQNAOgEMAr4iDYgg4c3ZDtgWiJRTtm5FCFK5gQgQLq6DbSHwKOPpofATEVRaCaDuPm4lQCs/quPPZIPYOReEKPRaDoaIYPFYpEfA5hOSyinaQBSGkAEYhLANYBr1+yFs4tB8MyVA/kAkA9ALoDH1SqT5ipQ5wLwG+SJLcjg+vXrUGQ7IE7LchrbAC48H8D1C9CWUcWDVbWkGnUCiEI7eHL7IQMofACFC4BOB0ys/kwALvCntriWK4pcB8TplkjGKYGSzjFZVdhZoGJHle0AC6D/IQDd7UEtHwCxuz13HcD9ysCV/qdB2x8moBailS9h0HfQa9LN+xdcAJZArcMRY7Ml6pbB6u8HALp1Tqg1MDAwMHBpePpp7SVAUB6QQPuJRO14BoBnTEsgvceecMHE3Z6d9HDjWVBKXWsPc5irS9M0af0xEszGBXBelcnNzgQmV9j71GYEkvqVJACTDZC/n6eqql5ugNSY1AQIWAYBJppAkPEcPOfqB5pFWz+0CeCfDse7eH79cUpav0piMr8gWzB6QS/qJSGDSqjquLo+L+aJq4Gmye0gwKT1CfiOU0kTaMyIAJFcAP52GL187ZVXH7tWJvVTKqpvAK/x+vrjjbRAoHL+VOqFispf+2Ia2BJuvL2nTZNxYMxpQxO05UpkS7ySC0ACKXFOeZOnSesnqncAektv653CXNeTDjBX6q4DGjrX+jUgAfWNt/cuW96VsVi4eweIEaQeAVgHPP7E+sPVb4C/Hw+EEFp/j/fXHx+Yj0iOcfMHnNt0O37XPJEJINDtCN3o3mnPKE9RagHUuQAiO1z9bnsugMQ/fPvh8cMffbzzKTtOerjVL8MdAuZOn3uu9U3vM94XgBxIIUgoA1j96VkQnkkDkHKHBPCUjD4uV7/Y0UkkyHjlk4k0+eQVC4DThrBneeSY4AdROrO5+v11gP/f3t5hJKOPN77+5DRohLTC+qrWXK3lOihHpbuQulYv7BrodjIwMDAwUEItowa4Ls+nMgT6f1IBVNoDoFsmsJK0IsjQObQJPMJnn33+OR8nu3O6qX+LpOVjvPwyjy0zz1uU7Cid+xfK3L8rVIzL8otOAvBfAmioVNGYAiut/NX4AnO+3PCVqViVVGrczY27O0UG7heCgb1OjBEhmwF1brYYSyu+4GABAA1gugK2X90GaAP4+ptPP/3ma1NRirqBRrkAOo+MoEgUtAHolPRtLECcTCAJ4NXpmnSDK1ZlNgCMXLlG55CiUppAWn+gG8CnG05M9S0whsY9QIE53eUpgGQGQoBSizYAbQNIWqVaLquqSgJYsVKJrygXQEZBylxur1z9kXQMeJ+TNXwro647yzPfH8AZcAZn5uEcKFkEbrz/kVdfnb665Fw7+IKVND5cAL4DvgPguW79jYxqtWUhc9cwhDCfzzsBdI75xZoP159081llx4DlcnMAIKPii7IcUx16DEjrX7UJEKEOSlgCLGSwOuU8SQBJZ8mwF+kG8NRTu0/XINkxoIzL5ZIl2dPg4c8Cz+k5wJRaXVaTybutUYs6tAnQ+WG/nogbnwZZGJkxgHIDS5QHDnod8Jyk5wi2rigHQBIHfBEU4FOb+v3LI9EJ4GSNvVBEYiQWutnrgDuHsx9+OEu0OQ2SwqfBjzn+ycnDMDAwMFCWifz4E8BPP+ry8DP8LOMXdvyiy8KjAI/af38ACeBHGTNmSvgVqOWodShmAMyO2QAhYC3wWxvAb33+9pVRU2fuheyFvDOLm7r9+o/YABLWAiTkrwQD+Pqh3v/gZuK/F7+bZx8FPeoIEALWAgD4fZgw8fWPZdRWf6YcQRMakMHvkn7vzDC7jQHU7KjzAVh/G/BiSKZZ/dkAQqdlKCQV5oALIDKbzYg6Em3B+QA8kNQPVv+BOuC4g2ANEAJWww9tAD/4DsivwKYfZAwwPQ5+0HsFg1eyg6CpG/8OdRaQ0NGYscOa7g/TP5QfA5D81HvnDwz++S3At38Of2FxYGBgYGDgKNR4PSaM6x7vkDgkV674+vF6TACLwAdg8YR0hnocNt/o5jcxZ3IxU/72toZaXUdeqXUswCLwASTxYDtUw7Y8P0MSgE3PBdBVMO8qxw0AJtkAYCwBO5XGgJ8hCcCmG2Qrzivinu0AUs8r9+4Y4MmPAffmWYAtd8ZZYLgOGBgYGBgYoNElJvwl/v4wSAZwHi5R/YzF3zVBRlV/C5UcZP7+QX+/Q1nxj/hbrJQQxvgE8D/jTfsdSeBF6e9aL7YtAKuFxhdu0BZSzItivv5g5/P2eXZzul5QYH7HETnXhnOidlQNLAKnmQCmG0bTkRU4YjTavIBNZ8ra0+lMsel3ZgdI1gHtuLCiW74pH19AvGm/MxnTSGoYywCVLEoXwD07CFbw4vmLUKUBiLqmWz66V6l+Bn6udBkZGBgYGLD3B/R1/xBVf/frO47n8e8P6Of+Mbr+7td3BO/Bjxj82MPdg5Q35359x/D9+PcHmEPqfwj0x85/ABAAP5iDd2Wm2/rd9uSdvdNnklLHO6CN98E/HE2LufTHHxLQc36bnnek/HTT1P1PpNT//fff1AFpCX0DsF/IOH9If7gdFvn5kS8oM78PoO/+CNjny239BwygkZpcAJmfuYL6uw+ofwcsdVE/hzsEmiazQz0dnOcDbKfu75C8w1JLegZgg5ryg5oNghvPDVJ4V2Z6ZpCUd/LTzfIOS/MeHPM05td3BO/B8S5k/PqO43mOfSnr13csHxgYGBgYGNgDFxzc7xooNtDf78EA2B8ABamD9gcgdHcFABTk3QeEJPY5GjpgGAMYzgKXloGBgYGBgYERultAaC9E4s3XP9Ldwkij/xzAiEz9l6IDXL3md2cHMLKPTAAY3XpR1+/dMSAa3fpHvn5Gl6MDrH4y9V+CDsjWf1nOApn6L+F1gNV/F48BB4BR+zUwcIfzP/8S/ZOlvFfuAAAAAElFTkSuQmCC"},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAADwCAMAAADYSUr5AAABDlBMVEV3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diB3diBVLkeJAAAAWnRSTlMAGf8QMwQIUL+CmS8iVXFAZmAaEzLMDSE8FkJISyAeWiMnMVMshTSHgMNqyM/GOEUcvLi+fKu1pYyqqK0fsin9AZ5RJO8KBgIDj6JilEqgr23fnEdjP29/kWiyI5UtAAAM80lEQVR4Aezb3XLzOgiFYXh8//e8T8MwQeNJ8yXd5T2zF8RiCfm3jWVZvoGUf7x+X+6AfLnEUZRkCZYf7EBQAsgoEFVNilpJ2gFafgkmP9eBoM1R2cEwg0GM6WDqh5ryXur4hxIGPZFD9vTrDbIe8e2QY4FtCsF5DU0dMAygdsCn6EM8d/AQkBzsJUsw+XeuApHIGiz3RmhZlmVZluVP3Anmd92Igbojh4IAg1/z+4CkZqSQn3wjld2AFlC3kM/9St2AHB8eg/yn9ZOnEQ9yIge/Zj8bCMS/AjD3rCzi+X1ATn4W9YMdMJDe+T4gT0sw5F4FlmVZlmVZ/gTiFcBLv++zBQTmHWdxxr3jw/AD5gOcM6DKekhN17SCvmkcjfPx53oMcjg4xslAoYp127GDWoIq3jo+0PWyY5CBuYJz+hCibAM1gBoOxg4yWzS3MCd/e8Xm9HkA5yPcKu+4xmFqQdz7RRwbuoA754CjKl7EV+eDWJZlWZZl6SQZL8EPDwCiMGhADMxqcm8A0WCOqsB5AOpnJVmlETk9QItIs4H9KPPxiRgLKDjPINQPi2TVpg4iRwOS4/hbyOQAY/2aaM5HKP485Ii5g4Dw1GB9jzgPQFefOoyInt/1nt9l9AEPBaLqCXnHAIwvJLSAs8ywCoie3pfAcIiYlkCSd5YAotKPbziJ6QU0mGYwCql/oTcbkIf3AWlegtGQ8xzNcnSMazgOmA2oAL/0RmRZlmVZFvFO0nxh1jMQPwhixhD+KknfQ471F9fcnjLT92q9YAb9VYBse0otqn4qFlOAsk8NYjKkhb+O6kArkYwoOodbbSEMMyY6ouaq6W80IOlFKTqYO0AUjLro0VqFY7AftCD1ESo6eD7jJgN6hhBTfjeg63jbpUAGGRVyeofZChJDAN2fgyFdf+OVFtnkvPP0aqh/WC+DQ3uf87Usy7Isy+V/dB2m32vqm7xWv4xPM39nokzxaAC44ubdXn5rB4Ty99iIy+XBII9Jl7g8bHP8lwPA91Sve1D0yxVqfISHyi4Rarpnn6PTdxkAYDCotHczoE+xkl/3JX0JfHsHtHhQDXrWAUCohgsZv+Uc0Ka3J7vC1c8BPb6v/++/CqAEUOMvMJhateTX3Qeccb3wGaLwXzvnwaa20YXRlzMTiVjrFWIDqTgxaZveeyW99/r//8gHLPfR6D4eHtnhw2V1th5U75urkRSLvRvJ1z8wMDAwMBABonpzX7HmPh2JEhiX2sP9ACgLV2BfidFPjmaZ+lVBpTaB6Fd/ApzIuxfj6g63gJXEaV2XbLFAoPRXSUzIXsw2kS1Np16I3jsrdHuT7HVRURRURfbfCg0ZZl0xYHKjLdoL1HUdLnCBjDsBJAlQbMB1gAUAmq4R7Nw6gEwAFBdgAVCcnT1AGsBsNhPKAgIv+QBOOgES1rDFAhlZIO0OdgOfb8h1ACXJDwkbA8wR3T2eAzBvAzh78OShTgAPP/ywyHSgc/eCC8DqfyQNAOgEMAr4iDYgg4c3ZDtgWiJRTtm5FCFK5gQgQLq6DbSHwKOPpofATEVRaCaDuPm4lQCs/quPPZIPYOReEKPRaDoaIYPFYpEfA5hOSyinaQBSGkAEYhLANYBr1+yFs4tB8MyVA/kAkA9ALoDH1SqT5ipQ5wLwG+SJLcjg+vXrUGQ7IE7LchrbAC48H8D1C9CWUcWDVbWkGnUCiEI7eHL7IQMofACFC4BOB0ys/kwALvCntriWK4pcB8TplkjGKYGSzjFZVdhZoGJHle0AC6D/IQDd7UEtHwCxuz13HcD9ysCV/qdB2x8moBailS9h0HfQa9LN+xdcAJZArcMRY7Ml6pbB6u8HALp1Tqg1MDAwMHBpePpp7SVAUB6QQPuJRO14BoBnTEsgvceecMHE3Z6d9HDjWVBKXWsPc5irS9M0af0xEszGBXBelcnNzgQmV9j71GYEkvqVJACTDZC/n6eqql5ugNSY1AQIWAYBJppAkPEcPOfqB5pFWz+0CeCfDse7eH79cUpav0piMr8gWzB6QS/qJSGDSqjquLo+L+aJq4Gmye0gwKT1CfiOU0kTaMyIAJFcAP52GL187ZVXH7tWJvVTKqpvAK/x+vrjjbRAoHL+VOqFispf+2Ia2BJuvL2nTZNxYMxpQxO05UpkS7ySC0ACKXFOeZOnSesnqncAektv653CXNeTDjBX6q4DGjrX+jUgAfWNt/cuW96VsVi4eweIEaQeAVgHPP7E+sPVb4C/Hw+EEFp/j/fXHx+Yj0iOcfMHnNt0O37XPJEJINDtCN3o3mnPKE9RagHUuQAiO1z9bnsugMQ/fPvh8cMffbzzKTtOerjVL8MdAuZOn3uu9U3vM94XgBxIIUgoA1j96VkQnkkDkHKHBPCUjD4uV7/Y0UkkyHjlk4k0+eQVC4DThrBneeSY4AdROrO5+v11gP/f3t5hJKOPN77+5DRohLTC+qrWXK3lOihHpbuQulYv7BrodjIwMDAwUEItowa4Ls+nMgT6f1IBVNoDoFsmsJK0IsjQObQJPMJnn33+OR8nu3O6qX+LpOVjvPwyjy0zz1uU7Cid+xfK3L8rVIzL8otOAvBfAmioVNGYAiut/NX4AnO+3PCVqViVVGrczY27O0UG7heCgb1OjBEhmwF1brYYSyu+4GABAA1gugK2X90GaAP4+ptPP/3ma1NRirqBRrkAOo+MoEgUtAHolPRtLECcTCAJ4NXpmnSDK1ZlNgCMXLlG55CiUppAWn+gG8CnG05M9S0whsY9QIE53eUpgGQGQoBSizYAbQNIWqVaLquqSgJYsVKJrygXQEZBylxur1z9kXQMeJ+TNXwro647yzPfH8AZcAZn5uEcKFkEbrz/kVdfnb665Fw7+IKVND5cAL4DvgPguW79jYxqtWUhc9cwhDCfzzsBdI75xZoP159081llx4DlcnMAIKPii7IcUx16DEjrX7UJEKEOSlgCLGSwOuU8SQBJZ8mwF+kG8NRTu0/XINkxoIzL5ZIl2dPg4c8Cz+k5wJRaXVaTybutUYs6tAnQ+WG/nogbnwZZGJkxgHIDS5QHDnod8Jyk5wi2rigHQBIHfBEU4FOb+v3LI9EJ4GSNvVBEYiQWutnrgDuHsx9+OEu0OQ2SwqfBjzn+ycnDMDAwMFCWifz4E8BPP+ry8DP8LOMXdvyiy8KjAI/af38ACeBHGTNmSvgVqOWodShmAMyO2QAhYC3wWxvAb33+9pVRU2fuheyFvDOLm7r9+o/YABLWAiTkrwQD+Pqh3v/gZuK/F7+bZx8FPeoIEALWAgD4fZgw8fWPZdRWf6YcQRMakMHvkn7vzDC7jQHU7KjzAVh/G/BiSKZZ/dkAQqdlKCQV5oALIDKbzYg6Em3B+QA8kNQPVv+BOuC4g2ANEAJWww9tAD/4DsivwKYfZAwwPQ5+0HsFg1eyg6CpG/8OdRaQ0NGYscOa7g/TP5QfA5D81HvnDwz++S3At38Of2FxYGBgYGDgKNR4PSaM6x7vkDgkV674+vF6TACLwAdg8YR0hnocNt/o5jcxZ3IxU/72toZaXUdeqXUswCLwASTxYDtUw7Y8P0MSgE3PBdBVMO8qxw0AJtkAYCwBO5XGgJ8hCcCmG2Qrzivinu0AUs8r9+4Y4MmPAffmWYAtd8ZZYLgOGBgYGBgYoNElJvwl/v4wSAZwHi5R/YzF3zVBRlV/C5UcZP7+QX+/Q1nxj/hbrJQQxvgE8D/jTfsdSeBF6e9aL7YtAKuFxhdu0BZSzItivv5g5/P2eXZzul5QYH7HETnXhnOidlQNLAKnmQCmG0bTkRU4YjTavIBNZ8ra0+lMsel3ZgdI1gHtuLCiW74pH19AvGm/MxnTSGoYywCVLEoXwD07CFbw4vmLUKUBiLqmWz66V6l+Bn6udBkZGBgYGLD3B/R1/xBVf/frO47n8e8P6Of+Mbr+7td3BO/Bjxj82MPdg5Q35359x/D9+PcHmEPqfwj0x85/ABAAP5iDd2Wm2/rd9uSdvdNnklLHO6CN98E/HE2LufTHHxLQc36bnnek/HTT1P1PpNT//fff1AFpCX0DsF/IOH9If7gdFvn5kS8oM78PoO/+CNjny239BwygkZpcAJmfuYL6uw+ofwcsdVE/hzsEmiazQz0dnOcDbKfu75C8w1JLegZgg5ryg5oNghvPDVJ4V2Z6ZpCUd/LTzfIOS/MeHPM05td3BO/B8S5k/PqO43mOfSnr13csHxgYGBgYGNgDFxzc7xooNtDf78EA2B8ABamD9gcgdHcFABTk3QeEJPY5GjpgGAMYzgKXloGBgYGBgYERultAaC9E4s3XP9Ldwkij/xzAiEz9l6IDXL3md2cHMLKPTAAY3XpR1+/dMSAa3fpHvn5Gl6MDrH4y9V+CDsjWf1nOApn6L+F1gNV/F48BB4BR+zUwcIfzP/8S/ZOlvFfuAAAAAElFTkSuQmCC"},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAADwCAMAAADYSUr5AAABDlBMVEXMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADMAADP1XLPAAAAWnRSTlMAGf8QMwQIUL+CmS8iVXFAZmAaEzLMDSE8FkJISyAeWiMnMVMshTSHgMNqyM/GOEUcvLi+fKu1pYyqqK0fsin9AZ5RJO8KBgIDj6JilEqgr23fnEdjP29/kWiyI5UtAAAM80lEQVR4Aezb3XLzOgiFYXh8//e8T8MwQeNJ8yXd5T2zF8RiCfm3jWVZvoGUf7x+X+6AfLnEUZRkCZYf7EBQAsgoEFVNilpJ2gFafgkmP9eBoM1R2cEwg0GM6WDqh5ryXur4hxIGPZFD9vTrDbIe8e2QY4FtCsF5DU0dMAygdsCn6EM8d/AQkBzsJUsw+XeuApHIGiz3RmhZlmVZluVP3Anmd92Igbojh4IAg1/z+4CkZqSQn3wjld2AFlC3kM/9St2AHB8eg/yn9ZOnEQ9yIge/Zj8bCMS/AjD3rCzi+X1ATn4W9YMdMJDe+T4gT0sw5F4FlmVZlmVZ/gTiFcBLv++zBQTmHWdxxr3jw/AD5gOcM6DKekhN17SCvmkcjfPx53oMcjg4xslAoYp127GDWoIq3jo+0PWyY5CBuYJz+hCibAM1gBoOxg4yWzS3MCd/e8Xm9HkA5yPcKu+4xmFqQdz7RRwbuoA754CjKl7EV+eDWJZlWZZl6SQZL8EPDwCiMGhADMxqcm8A0WCOqsB5AOpnJVmlETk9QItIs4H9KPPxiRgLKDjPINQPi2TVpg4iRwOS4/hbyOQAY/2aaM5HKP485Ii5g4Dw1GB9jzgPQFefOoyInt/1nt9l9AEPBaLqCXnHAIwvJLSAs8ywCoie3pfAcIiYlkCSd5YAotKPbziJ6QU0mGYwCql/oTcbkIf3AWlegtGQ8xzNcnSMazgOmA2oAL/0RmRZlmVZFvFO0nxh1jMQPwhixhD+KknfQ471F9fcnjLT92q9YAb9VYBse0otqn4qFlOAsk8NYjKkhb+O6kArkYwoOodbbSEMMyY6ouaq6W80IOlFKTqYO0AUjLro0VqFY7AftCD1ESo6eD7jJgN6hhBTfjeg63jbpUAGGRVyeofZChJDAN2fgyFdf+OVFtnkvPP0aqh/WC+DQ3uf87Usy7Isy+V/dB2m32vqm7xWv4xPM39nokzxaAC44ubdXn5rB4Ty99iIy+XBII9Jl7g8bHP8lwPA91Sve1D0yxVqfISHyi4Rarpnn6PTdxkAYDCotHczoE+xkl/3JX0JfHsHtHhQDXrWAUCohgsZv+Uc0Ka3J7vC1c8BPb6v/++/CqAEUOMvMJhateTX3Qeccb3wGaLwXzvnwaa20YXRlzMTiVjrFWIDqTgxaZveeyW99/r//8gHLPfR6D4eHtnhw2V1th5U75urkRSLvRvJ1z8wMDAwMBABonpzX7HmPh2JEhiX2sP9ACgLV2BfidFPjmaZ+lVBpTaB6Fd/ApzIuxfj6g63gJXEaV2XbLFAoPRXSUzIXsw2kS1Np16I3jsrdHuT7HVRURRURfbfCg0ZZl0xYHKjLdoL1HUdLnCBjDsBJAlQbMB1gAUAmq4R7Nw6gEwAFBdgAVCcnT1AGsBsNhPKAgIv+QBOOgES1rDFAhlZIO0OdgOfb8h1ACXJDwkbA8wR3T2eAzBvAzh78OShTgAPP/ywyHSgc/eCC8DqfyQNAOgEMAr4iDYgg4c3ZDtgWiJRTtm5FCFK5gQgQLq6DbSHwKOPpofATEVRaCaDuPm4lQCs/quPPZIPYOReEKPRaDoaIYPFYpEfA5hOSyinaQBSGkAEYhLANYBr1+yFs4tB8MyVA/kAkA9ALoDH1SqT5ipQ5wLwG+SJLcjg+vXrUGQ7IE7LchrbAC48H8D1C9CWUcWDVbWkGnUCiEI7eHL7IQMofACFC4BOB0ys/kwALvCntriWK4pcB8TplkjGKYGSzjFZVdhZoGJHle0AC6D/IQDd7UEtHwCxuz13HcD9ysCV/qdB2x8moBailS9h0HfQa9LN+xdcAJZArcMRY7Ml6pbB6u8HALp1Tqg1MDAwMHBpePpp7SVAUB6QQPuJRO14BoBnTEsgvceecMHE3Z6d9HDjWVBKXWsPc5irS9M0af0xEszGBXBelcnNzgQmV9j71GYEkvqVJACTDZC/n6eqql5ugNSY1AQIWAYBJppAkPEcPOfqB5pFWz+0CeCfDse7eH79cUpav0piMr8gWzB6QS/qJSGDSqjquLo+L+aJq4Gmye0gwKT1CfiOU0kTaMyIAJFcAP52GL187ZVXH7tWJvVTKqpvAK/x+vrjjbRAoHL+VOqFispf+2Ia2BJuvL2nTZNxYMxpQxO05UpkS7ySC0ACKXFOeZOnSesnqncAektv653CXNeTDjBX6q4DGjrX+jUgAfWNt/cuW96VsVi4eweIEaQeAVgHPP7E+sPVb4C/Hw+EEFp/j/fXHx+Yj0iOcfMHnNt0O37XPJEJINDtCN3o3mnPKE9RagHUuQAiO1z9bnsugMQ/fPvh8cMffbzzKTtOerjVL8MdAuZOn3uu9U3vM94XgBxIIUgoA1j96VkQnkkDkHKHBPCUjD4uV7/Y0UkkyHjlk4k0+eQVC4DThrBneeSY4AdROrO5+v11gP/f3t5hJKOPN77+5DRohLTC+qrWXK3lOihHpbuQulYv7BrodjIwMDAwUEItowa4Ls+nMgT6f1IBVNoDoFsmsJK0IsjQObQJPMJnn33+OR8nu3O6qX+LpOVjvPwyjy0zz1uU7Cid+xfK3L8rVIzL8otOAvBfAmioVNGYAiut/NX4AnO+3PCVqViVVGrczY27O0UG7heCgb1OjBEhmwF1brYYSyu+4GABAA1gugK2X90GaAP4+ptPP/3ma1NRirqBRrkAOo+MoEgUtAHolPRtLECcTCAJ4NXpmnSDK1ZlNgCMXLlG55CiUppAWn+gG8CnG05M9S0whsY9QIE53eUpgGQGQoBSizYAbQNIWqVaLquqSgJYsVKJrygXQEZBylxur1z9kXQMeJ+TNXwro647yzPfH8AZcAZn5uEcKFkEbrz/kVdfnb665Fw7+IKVND5cAL4DvgPguW79jYxqtWUhc9cwhDCfzzsBdI75xZoP159081llx4DlcnMAIKPii7IcUx16DEjrX7UJEKEOSlgCLGSwOuU8SQBJZ8mwF+kG8NRTu0/XINkxoIzL5ZIl2dPg4c8Cz+k5wJRaXVaTybutUYs6tAnQ+WG/nogbnwZZGJkxgHIDS5QHDnod8Jyk5wi2rigHQBIHfBEU4FOb+v3LI9EJ4GSNvVBEYiQWutnrgDuHsx9+OEu0OQ2SwqfBjzn+ycnDMDAwMFCWifz4E8BPP+ry8DP8LOMXdvyiy8KjAI/af38ACeBHGTNmSvgVqOWodShmAMyO2QAhYC3wWxvAb33+9pVRU2fuheyFvDOLm7r9+o/YABLWAiTkrwQD+Pqh3v/gZuK/F7+bZx8FPeoIEALWAgD4fZgw8fWPZdRWf6YcQRMakMHvkn7vzDC7jQHU7KjzAVh/G/BiSKZZ/dkAQqdlKCQV5oALIDKbzYg6Em3B+QA8kNQPVv+BOuC4g2ANEAJWww9tAD/4DsivwKYfZAwwPQ5+0HsFg1eyg6CpG/8OdRaQ0NGYscOa7g/TP5QfA5D81HvnDwz++S3At38Of2FxYGBgYGDgKNR4PSaM6x7vkDgkV674+vF6TACLwAdg8YR0hnocNt/o5jcxZ3IxU/72toZaXUdeqXUswCLwASTxYDtUw7Y8P0MSgE3PBdBVMO8qxw0AJtkAYCwBO5XGgJ8hCcCmG2Qrzivinu0AUs8r9+4Y4MmPAffmWYAtd8ZZYLgOGBgYGBgYoNElJvwl/v4wSAZwHi5R/YzF3zVBRlV/C5UcZP7+QX+/Q1nxj/hbrJQQxvgE8D/jTfsdSeBF6e9aL7YtAKuFxhdu0BZSzItivv5g5/P2eXZzul5QYH7HETnXhnOidlQNLAKnmQCmG0bTkRU4YjTavIBNZ8ra0+lMsel3ZgdI1gHtuLCiW74pH19AvGm/MxnTSGoYywCVLEoXwD07CFbw4vmLUKUBiLqmWz66V6l+Bn6udBkZGBgYGLD3B/R1/xBVf/frO47n8e8P6Of+Mbr+7td3BO/Bjxj82MPdg5Q35359x/D9+PcHmEPqfwj0x85/ABAAP5iDd2Wm2/rd9uSdvdNnklLHO6CN98E/HE2LufTHHxLQc36bnnek/HTT1P1PpNT//fff1AFpCX0DsF/IOH9If7gdFvn5kS8oM78PoO/+CNjny239BwygkZpcAJmfuYL6uw+ofwcsdVE/hzsEmiazQz0dnOcDbKfu75C8w1JLegZgg5ryg5oNghvPDVJ4V2Z6ZpCUd/LTzfIOS/MeHPM05td3BO/B8S5k/PqO43mOfSnr13csHxgYGBgYGNgDFxzc7xooNtDf78EA2B8ABamD9gcgdHcFABTk3QeEJPY5GjpgGAMYzgKXloGBgYGBgYERultAaC9E4s3XP9Ldwkij/xzAiEz9l6IDXL3md2cHMLKPTAAY3XpR1+/dMSAa3fpHvn5Gl6MDrH4y9V+CDsjWf1nOApn6L+F1gNV/F48BB4BR+zUwcIfzP/8S/ZOlvFfuAAAAAElFTkSuQmCC"},function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAADwCAMAAADYSUr5AAABDlBMVEV3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3d3czPLQ+AAAAWnRSTlMAGf8QMwQIUL+CmS8iVXFAZmAaEzLMDSE8FkJISyAeWiMnMVMshTSHgMNqyM/GOEUcvLi+fKu1pYyqqK0fsin9AZ5RJO8KBgIDj6JilEqgr23fnEdjP29/kWiyI5UtAAAM80lEQVR4Aezb3XLzOgiFYXh8//e8T8MwQeNJ8yXd5T2zF8RiCfm3jWVZvoGUf7x+X+6AfLnEUZRkCZYf7EBQAsgoEFVNilpJ2gFafgkmP9eBoM1R2cEwg0GM6WDqh5ryXur4hxIGPZFD9vTrDbIe8e2QY4FtCsF5DU0dMAygdsCn6EM8d/AQkBzsJUsw+XeuApHIGiz3RmhZlmVZluVP3Anmd92Igbojh4IAg1/z+4CkZqSQn3wjld2AFlC3kM/9St2AHB8eg/yn9ZOnEQ9yIge/Zj8bCMS/AjD3rCzi+X1ATn4W9YMdMJDe+T4gT0sw5F4FlmVZlmVZ/gTiFcBLv++zBQTmHWdxxr3jw/AD5gOcM6DKekhN17SCvmkcjfPx53oMcjg4xslAoYp127GDWoIq3jo+0PWyY5CBuYJz+hCibAM1gBoOxg4yWzS3MCd/e8Xm9HkA5yPcKu+4xmFqQdz7RRwbuoA754CjKl7EV+eDWJZlWZZl6SQZL8EPDwCiMGhADMxqcm8A0WCOqsB5AOpnJVmlETk9QItIs4H9KPPxiRgLKDjPINQPi2TVpg4iRwOS4/hbyOQAY/2aaM5HKP485Ii5g4Dw1GB9jzgPQFefOoyInt/1nt9l9AEPBaLqCXnHAIwvJLSAs8ywCoie3pfAcIiYlkCSd5YAotKPbziJ6QU0mGYwCql/oTcbkIf3AWlegtGQ8xzNcnSMazgOmA2oAL/0RmRZlmVZFvFO0nxh1jMQPwhixhD+KknfQ471F9fcnjLT92q9YAb9VYBse0otqn4qFlOAsk8NYjKkhb+O6kArkYwoOodbbSEMMyY6ouaq6W80IOlFKTqYO0AUjLro0VqFY7AftCD1ESo6eD7jJgN6hhBTfjeg63jbpUAGGRVyeofZChJDAN2fgyFdf+OVFtnkvPP0aqh/WC+DQ3uf87Usy7Isy+V/dB2m32vqm7xWv4xPM39nokzxaAC44ubdXn5rB4Ty99iIy+XBII9Jl7g8bHP8lwPA91Sve1D0yxVqfISHyi4Rarpnn6PTdxkAYDCotHczoE+xkl/3JX0JfHsHtHhQDXrWAUCohgsZv+Uc0Ka3J7vC1c8BPb6v/++/CqAEUOMvMJhateTX3Qeccb3wGaLwXzvnwaa20YXRlzMTiVjrFWIDqTgxaZveeyW99/r//8gHLPfR6D4eHtnhw2V1th5U75urkRSLvRvJ1z8wMDAwMBABonpzX7HmPh2JEhiX2sP9ACgLV2BfidFPjmaZ+lVBpTaB6Fd/ApzIuxfj6g63gJXEaV2XbLFAoPRXSUzIXsw2kS1Np16I3jsrdHuT7HVRURRURfbfCg0ZZl0xYHKjLdoL1HUdLnCBjDsBJAlQbMB1gAUAmq4R7Nw6gEwAFBdgAVCcnT1AGsBsNhPKAgIv+QBOOgES1rDFAhlZIO0OdgOfb8h1ACXJDwkbA8wR3T2eAzBvAzh78OShTgAPP/ywyHSgc/eCC8DqfyQNAOgEMAr4iDYgg4c3ZDtgWiJRTtm5FCFK5gQgQLq6DbSHwKOPpofATEVRaCaDuPm4lQCs/quPPZIPYOReEKPRaDoaIYPFYpEfA5hOSyinaQBSGkAEYhLANYBr1+yFs4tB8MyVA/kAkA9ALoDH1SqT5ipQ5wLwG+SJLcjg+vXrUGQ7IE7LchrbAC48H8D1C9CWUcWDVbWkGnUCiEI7eHL7IQMofACFC4BOB0ys/kwALvCntriWK4pcB8TplkjGKYGSzjFZVdhZoGJHle0AC6D/IQDd7UEtHwCxuz13HcD9ysCV/qdB2x8moBailS9h0HfQa9LN+xdcAJZArcMRY7Ml6pbB6u8HALp1Tqg1MDAwMHBpePpp7SVAUB6QQPuJRO14BoBnTEsgvceecMHE3Z6d9HDjWVBKXWsPc5irS9M0af0xEszGBXBelcnNzgQmV9j71GYEkvqVJACTDZC/n6eqql5ugNSY1AQIWAYBJppAkPEcPOfqB5pFWz+0CeCfDse7eH79cUpav0piMr8gWzB6QS/qJSGDSqjquLo+L+aJq4Gmye0gwKT1CfiOU0kTaMyIAJFcAP52GL187ZVXH7tWJvVTKqpvAK/x+vrjjbRAoHL+VOqFispf+2Ia2BJuvL2nTZNxYMxpQxO05UpkS7ySC0ACKXFOeZOnSesnqncAektv653CXNeTDjBX6q4DGjrX+jUgAfWNt/cuW96VsVi4eweIEaQeAVgHPP7E+sPVb4C/Hw+EEFp/j/fXHx+Yj0iOcfMHnNt0O37XPJEJINDtCN3o3mnPKE9RagHUuQAiO1z9bnsugMQ/fPvh8cMffbzzKTtOerjVL8MdAuZOn3uu9U3vM94XgBxIIUgoA1j96VkQnkkDkHKHBPCUjD4uV7/Y0UkkyHjlk4k0+eQVC4DThrBneeSY4AdROrO5+v11gP/f3t5hJKOPN77+5DRohLTC+qrWXK3lOihHpbuQulYv7BrodjIwMDAwUEItowa4Ls+nMgT6f1IBVNoDoFsmsJK0IsjQObQJPMJnn33+OR8nu3O6qX+LpOVjvPwyjy0zz1uU7Cid+xfK3L8rVIzL8otOAvBfAmioVNGYAiut/NX4AnO+3PCVqViVVGrczY27O0UG7heCgb1OjBEhmwF1brYYSyu+4GABAA1gugK2X90GaAP4+ptPP/3ma1NRirqBRrkAOo+MoEgUtAHolPRtLECcTCAJ4NXpmnSDK1ZlNgCMXLlG55CiUppAWn+gG8CnG05M9S0whsY9QIE53eUpgGQGQoBSizYAbQNIWqVaLquqSgJYsVKJrygXQEZBylxur1z9kXQMeJ+TNXwro647yzPfH8AZcAZn5uEcKFkEbrz/kVdfnb665Fw7+IKVND5cAL4DvgPguW79jYxqtWUhc9cwhDCfzzsBdI75xZoP159081llx4DlcnMAIKPii7IcUx16DEjrX7UJEKEOSlgCLGSwOuU8SQBJZ8mwF+kG8NRTu0/XINkxoIzL5ZIl2dPg4c8Cz+k5wJRaXVaTybutUYs6tAnQ+WG/nogbnwZZGJkxgHIDS5QHDnod8Jyk5wi2rigHQBIHfBEU4FOb+v3LI9EJ4GSNvVBEYiQWutnrgDuHsx9+OEu0OQ2SwqfBjzn+ycnDMDAwMFCWifz4E8BPP+ry8DP8LOMXdvyiy8KjAI/af38ACeBHGTNmSvgVqOWodShmAMyO2QAhYC3wWxvAb33+9pVRU2fuheyFvDOLm7r9+o/YABLWAiTkrwQD+Pqh3v/gZuK/F7+bZx8FPeoIEALWAgD4fZgw8fWPZdRWf6YcQRMakMHvkn7vzDC7jQHU7KjzAVh/G/BiSKZZ/dkAQqdlKCQV5oALIDKbzYg6Em3B+QA8kNQPVv+BOuC4g2ANEAJWww9tAD/4DsivwKYfZAwwPQ5+0HsFg1eyg6CpG/8OdRaQ0NGYscOa7g/TP5QfA5D81HvnDwz++S3At38Of2FxYGBgYGDgKNR4PSaM6x7vkDgkV674+vF6TACLwAdg8YR0hnocNt/o5jcxZ3IxU/72toZaXUdeqXUswCLwASTxYDtUw7Y8P0MSgE3PBdBVMO8qxw0AJtkAYCwBO5XGgJ8hCcCmG2Qrzivinu0AUs8r9+4Y4MmPAffmWYAtd8ZZYLgOGBgYGBgYoNElJvwl/v4wSAZwHi5R/YzF3zVBRlV/C5UcZP7+QX+/Q1nxj/hbrJQQxvgE8D/jTfsdSeBF6e9aL7YtAKuFxhdu0BZSzItivv5g5/P2eXZzul5QYH7HETnXhnOidlQNLAKnmQCmG0bTkRU4YjTavIBNZ8ra0+lMsel3ZgdI1gHtuLCiW74pH19AvGm/MxnTSGoYywCVLEoXwD07CFbw4vmLUKUBiLqmWz66V6l+Bn6udBkZGBgYGLD3B/R1/xBVf/frO47n8e8P6Of+Mbr+7td3BO/Bjxj82MPdg5Q35359x/D9+PcHmEPqfwj0x85/ABAAP5iDd2Wm2/rd9uSdvdNnklLHO6CN98E/HE2LufTHHxLQc36bnnek/HTT1P1PpNT//fff1AFpCX0DsF/IOH9If7gdFvn5kS8oM78PoO/+CNjny239BwygkZpcAJmfuYL6uw+ofwcsdVE/hzsEmiazQz0dnOcDbKfu75C8w1JLegZgg5ryg5oNghvPDVJ4V2Z6ZpCUd/LTzfIOS/MeHPM05td3BO/B8S5k/PqO43mOfSnr13csHxgYGBgYGNgDFxzc7xooNtDf78EA2B8ABamD9gcgdHcFABTk3QeEJPY5GjpgGAMYzgKXloGBgYGBgYERultAaC9E4s3XP9Ldwkij/xzAiEz9l6IDXL3md2cHMLKPTAAY3XpR1+/dMSAa3fpHvn5Gl6MDrH4y9V+CDsjWf1nOApn6L+F1gNV/F48BB4BR+zUwcIfzP/8S/ZOlvFfuAAAAAElFTkSuQmCC"},function(t,e,i){var n=i(405);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i(23).default)("46328ff0",n,!0,{})},function(t,e,i){(t.exports=i(22)(!1)).push([t.i,"/*!\n * jQuery UI Selectable 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n.ui-selectable {\n\t-ms-touch-action: none;\n\ttouch-action: none;\n}\n.ui-selectable-helper {\n\tposition: absolute;\n\tz-index: 100;\n\tborder: 1px dotted black;\n}\n",""])},function(t,e,i){var n=i(407);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i(23).default)("396d1718",n,!0,{})},function(t,e,i){(t.exports=i(22)(!1)).push([t.i,"/*!\n * jQuery UI Sortable 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n.ui-sortable-handle {\n\t-ms-touch-action: none;\n\ttouch-action: none;\n}\n",""])},function(t,e,i){var n=i(409);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,i(23).default)("3bd327fc",n,!0,{})},function(t,e,i){(t.exports=i(22)(!1)).push([t.i,"/*!\n * jQuery UI Draggable 1.12.1\n * http://jqueryui.com\n *\n * Copyright jQuery Foundation and other contributors\n * Released under the MIT license.\n * http://jquery.org/license\n */\n.ui-draggable-handle {\n\t-ms-touch-action: none;\n\ttouch-action: none;\n}\n",""])},function(t,e,i){var n,s;void 0===(s="function"==typeof(n=["jquery","./data","./disable-selection","./focusable","./form","./ie","./keycode","./labels","./jquery-1-7","./plugin","./safe-active-element","./safe-blur","./scroll-parent","./tabbable","./unique-id","./version"])?n.call(e,i,e,t):n)||(t.exports=s)},function(t,e,i){var n,s,r;
/*!
 * jQuery UI Selectable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */s=[i(20),i(118),i(25),i(86)],void 0===(r="function"==typeof(n=function(t){return t.widget("ui.selectable",t.ui.mouse,{version:"1.12.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var e=this;this._addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){e.elementPos=t(e.element[0]).offset(),e.selectees=t(e.options.filter,e.element[0]),e._addClass(e.selectees,"ui-selectee"),e.selectees.each(function(){var i=t(this),n=i.offset(),s={left:n.left-e.elementPos.left,top:n.top-e.elementPos.top};t.data(this,"selectable-item",{element:this,$element:i,left:s.left,top:s.top,right:s.left+i.outerWidth(),bottom:s.top+i.outerHeight(),startselected:!1,selected:i.hasClass("ui-selected"),selecting:i.hasClass("ui-selecting"),unselecting:i.hasClass("ui-unselecting")})})},this.refresh(),this._mouseInit(),this.helper=t("<div>"),this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item"),this._mouseDestroy()},_mouseStart:function(e){var i=this,n=this.options;this.opos=[e.pageX,e.pageY],this.elementPos=t(this.element[0]).offset(),this.options.disabled||(this.selectees=t(n.filter,this.element[0]),this._trigger("start",e),t(n.appendTo).append(this.helper),this.helper.css({left:e.pageX,top:e.pageY,width:0,height:0}),n.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var n=t.data(this,"selectable-item");n.startselected=!0,e.metaKey||e.ctrlKey||(i._removeClass(n.$element,"ui-selected"),n.selected=!1,i._addClass(n.$element,"ui-unselecting"),n.unselecting=!0,i._trigger("unselecting",e,{unselecting:n.element}))}),t(e.target).parents().addBack().each(function(){var n,s=t.data(this,"selectable-item");if(s)return n=!e.metaKey&&!e.ctrlKey||!s.$element.hasClass("ui-selected"),i._removeClass(s.$element,n?"ui-unselecting":"ui-selected")._addClass(s.$element,n?"ui-selecting":"ui-unselecting"),s.unselecting=!n,s.selecting=n,s.selected=n,n?i._trigger("selecting",e,{selecting:s.element}):i._trigger("unselecting",e,{unselecting:s.element}),!1}))},_mouseDrag:function(e){if(this.dragged=!0,!this.options.disabled){var i,n=this,s=this.options,r=this.opos[0],o=this.opos[1],a=e.pageX,l=e.pageY;return r>a&&(i=a,a=r,r=i),o>l&&(i=l,l=o,o=i),this.helper.css({left:r,top:o,width:a-r,height:l-o}),this.selectees.each(function(){var i=t.data(this,"selectable-item"),c=!1,u={};i&&i.element!==n.element[0]&&(u.left=i.left+n.elementPos.left,u.right=i.right+n.elementPos.left,u.top=i.top+n.elementPos.top,u.bottom=i.bottom+n.elementPos.top,"touch"===s.tolerance?c=!(u.left>a||u.right<r||u.top>l||u.bottom<o):"fit"===s.tolerance&&(c=u.left>r&&u.right<a&&u.top>o&&u.bottom<l),c?(i.selected&&(n._removeClass(i.$element,"ui-selected"),i.selected=!1),i.unselecting&&(n._removeClass(i.$element,"ui-unselecting"),i.unselecting=!1),i.selecting||(n._addClass(i.$element,"ui-selecting"),i.selecting=!0,n._trigger("selecting",e,{selecting:i.element}))):(i.selecting&&((e.metaKey||e.ctrlKey)&&i.startselected?(n._removeClass(i.$element,"ui-selecting"),i.selecting=!1,n._addClass(i.$element,"ui-selected"),i.selected=!0):(n._removeClass(i.$element,"ui-selecting"),i.selecting=!1,i.startselected&&(n._addClass(i.$element,"ui-unselecting"),i.unselecting=!0),n._trigger("unselecting",e,{unselecting:i.element}))),i.selected&&(e.metaKey||e.ctrlKey||i.startselected||(n._removeClass(i.$element,"ui-selected"),i.selected=!1,n._addClass(i.$element,"ui-unselecting"),i.unselecting=!0,n._trigger("unselecting",e,{unselecting:i.element})))))}),!1}},_mouseStop:function(e){var i=this;return this.dragged=!1,t(".ui-unselecting",this.element[0]).each(function(){var n=t.data(this,"selectable-item");i._removeClass(n.$element,"ui-unselecting"),n.unselecting=!1,n.startselected=!1,i._trigger("unselected",e,{unselected:n.element})}),t(".ui-selecting",this.element[0]).each(function(){var n=t.data(this,"selectable-item");i._removeClass(n.$element,"ui-selecting")._addClass(n.$element,"ui-selected"),n.selecting=!1,n.selected=!0,n.startselected=!0,i._trigger("selected",e,{selected:n.element})}),this._trigger("stop",e),this.helper.remove(),!1}})})?n.apply(e,s):n)||(t.exports=r)},function(t,e,i){var n,s,r;
/*!
 * jQuery UI Sortable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */s=[i(20),i(118),i(160),i(159),i(161),i(25),i(86)],void 0===(r="function"==typeof(n=function(t){return t.widget("ui.sortable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,i){return t>=e&&t<e+i},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){var e=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),t.each(this.items,function(){e._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(e,i){var n=null,s=!1,r=this;return!(this.reverting||this.options.disabled||"static"===this.options.type||(this._refreshItems(e),t(e.target).parents().each(function(){if(t.data(this,r.widgetName+"-item")===r)return n=t(this),!1}),t.data(e.target,r.widgetName+"-item")===r&&(n=t(e.target)),!n||this.options.handle&&!i&&(t(this.options.handle,n).find("*").addBack().each(function(){this===e.target&&(s=!0)}),!s)||(this.currentItem=n,this._removeCurrentsFromItems(),0)))},_mouseStart:function(e,i,n){var s,r,o=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&"auto"!==o.cursor&&(r=this.document.find("body"),this.storedCursor=r.css("cursor"),r.css("cursor",o.cursor),this.storedStylesheet=t("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(r)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(s=this.containers.length-1;s>=0;s--)this.containers[s]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!o.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var i,n,s,r,o=this.options,a=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+o.scrollSpeed:e.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+o.scrollSpeed:e.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(e.pageY-this.document.scrollTop()<o.scrollSensitivity?a=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed):this.window.height()-(e.pageY-this.document.scrollTop())<o.scrollSensitivity&&(a=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed)),e.pageX-this.document.scrollLeft()<o.scrollSensitivity?a=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed):this.window.width()-(e.pageX-this.document.scrollLeft())<o.scrollSensitivity&&(a=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed))),!1!==a&&t.ui.ddmanager&&!o.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(n=this.items[i],s=n.item[0],(r=this._intersectsWithPointer(n))&&n.instance===this.currentContainer&&!(s===this.currentItem[0]||this.placeholder[1===r?"next":"prev"]()[0]===s||t.contains(this.placeholder[0],s)||"semi-dynamic"===this.options.type&&t.contains(this.element[0],s))){if(this.direction=1===r?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(e,n),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var n=this,s=this.placeholder.offset(),r=this.options.axis,o={};r&&"x"!==r||(o.left=s.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),r&&"y"!==r||(o.top=s.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){n._clear(e)})}else this._clear(e,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new t.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},t(i).each(function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);i&&n.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))}),!n.length&&e.key&&n.push(e.key+"="),n.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),n=[];return e=e||{},i.each(function(){n.push(t(e.item||this).attr(e.attribute||"id")||"")}),n},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,n=this.positionAbs.top,s=n+this.helperProportions.height,r=t.left,o=r+t.width,a=t.top,l=a+t.height,c=this.offset.click.top,u=this.offset.click.left,h="x"===this.options.axis||n+c>a&&n+c<l,d="y"===this.options.axis||e+u>r&&e+u<o,m=h&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?m:r<e+this.helperProportions.width/2&&i-this.helperProportions.width/2<o&&a<n+this.helperProportions.height/2&&s-this.helperProportions.height/2<l},_intersectsWithPointer:function(t){var e,i,n="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),s="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),r=n&&s;return!!r&&(e=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection(),this.floating?"right"===i||"down"===e?2:1:e&&("down"===e?2:1))},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),n=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?"right"===s&&i||"left"===s&&!i:n&&("down"===n&&e||"up"===n&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){var i,n,s,r,o=[],a=[],l=this._connectWith();if(l&&e)for(i=l.length-1;i>=0;i--)for(s=t(l[i],this.document[0]),n=s.length-1;n>=0;n--)(r=t.data(s[n],this.widgetFullName))&&r!==this&&!r.options.disabled&&a.push([t.isFunction(r.options.items)?r.options.items.call(r.element):t(r.options.items,r.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),r]);function c(){o.push(this)}for(a.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=a.length-1;i>=0;i--)a[i][0].each(c);return t(o)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var i=0;i<e.length;i++)if(e[i]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var i,n,s,r,o,a,l,c,u=this.items,h=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(i=d.length-1;i>=0;i--)for(s=t(d[i],this.document[0]),n=s.length-1;n>=0;n--)(r=t.data(s[n],this.widgetFullName))&&r!==this&&!r.options.disabled&&(h.push([t.isFunction(r.options.items)?r.options.items.call(r.element[0],e,{item:this.currentItem}):t(r.options.items,r.element),r]),this.containers.push(r));for(i=h.length-1;i>=0;i--)for(o=h[i][1],a=h[i][0],n=0,c=a.length;n<c;n++)(l=t(a[n])).data(this.widgetName+"-item",o),u.push({item:l,instance:o,width:0,height:0,left:0,top:0})},refreshPositions:function(e){var i,n,s,r;for(this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),i=this.items.length-1;i>=0;i--)(n=this.items[i]).instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(s=this.options.toleranceElement?t(this.options.toleranceElement,n.item):n.item,e||(n.width=s.outerWidth(),n.height=s.outerHeight()),r=s.offset(),n.left=r.left,n.top=r.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)r=this.containers[i].element.offset(),this.containers[i].containerCache.left=r.left,this.containers[i].containerCache.top=r.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(e){var i,n=(e=e||this).options;n.placeholder&&n.placeholder.constructor!==String||(i=n.placeholder,n.placeholder={element:function(){var n=e.currentItem[0].nodeName.toLowerCase(),s=t("<"+n+">",e.document[0]);return e._addClass(s,"ui-sortable-placeholder",i||e.currentItem[0].className)._removeClass(s,"ui-sortable-helper"),"tbody"===n?e._createTrPlaceholder(e.currentItem.find("tr").eq(0),t("<tr>",e.document[0]).appendTo(s)):"tr"===n?e._createTrPlaceholder(e.currentItem,s):"img"===n&&s.attr("src",e.currentItem.attr("src")),i||s.css("visibility","hidden"),s},update:function(t,s){i&&!n.forcePlaceholderSize||(s.height()||s.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),s.width()||s.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(n.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),n.placeholder.update(e,e.placeholder)},_createTrPlaceholder:function(e,i){var n=this;e.children().each(function(){t("<td>&#160;</td>",n.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(i)})},_contactContainers:function(e){var i,n,s,r,o,a,l,c,u,h,d=null,m=null;for(i=this.containers.length-1;i>=0;i--)if(!t.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(d&&t.contains(this.containers[i].element[0],d.element[0]))continue;d=this.containers[i],m=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",e,this._uiHash(this)),this.containers[i].containerCache.over=0);if(d)if(1===this.containers.length)this.containers[m].containerCache.over||(this.containers[m]._trigger("over",e,this._uiHash(this)),this.containers[m].containerCache.over=1);else{for(s=1e4,r=null,u=d.floating||this._isFloating(this.currentItem),o=u?"left":"top",a=u?"width":"height",h=u?"pageX":"pageY",n=this.items.length-1;n>=0;n--)t.contains(this.containers[m].element[0],this.items[n].item[0])&&this.items[n].item[0]!==this.currentItem[0]&&(l=this.items[n].item.offset()[o],c=!1,e[h]-l>this.items[n][a]/2&&(c=!0),Math.abs(e[h]-l)<s&&(s=Math.abs(e[h]-l),r=this.items[n],this.direction=c?"up":"down"));if(!r&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[m])return void(this.currentContainer.containerCache.over||(this.containers[m]._trigger("over",e,this._uiHash()),this.currentContainer.containerCache.over=1));r?this._rearrange(e,r,null,!0):this._rearrange(e,null,this.containers[m].element,!0),this._trigger("change",e,this._uiHash()),this.containers[m]._trigger("change",e,this._uiHash(this)),this.currentContainer=this.containers[m],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[m]._trigger("over",e,this._uiHash(this)),this.containers[m].containerCache.over=1}},_createHelper:function(e){var i=this.options,n=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||t("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),n[0].style.width&&!i.forceHelperSize||n.width(this.currentItem.width()),n[0].style.height&&!i.forceHelperSize||n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,n,s=this.options;"parent"===s.containment&&(s.containment=this.helper[0].parentNode),"document"!==s.containment&&"window"!==s.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===s.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===s.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(s.containment)||(e=t(s.containment)[0],i=t(s.containment).offset(),n="hidden"!==t(e).css("overflow"),this.containment=[i.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,i.left+(n?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(n?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,i){i||(i=this.position);var n="absolute"===e?1:-1,s="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,r=/(html|body)/i.test(s[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():r?0:s.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():r?0:s.scrollLeft())*n}},_generatePosition:function(e){var i,n,s=this.options,r=e.pageX,o=e.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(r=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(r=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),s.grid&&(i=this.originalPageY+Math.round((o-this.originalPageY)/s.grid[1])*s.grid[1],o=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-s.grid[1]:i+s.grid[1]:i,n=this.originalPageX+Math.round((r-this.originalPageX)/s.grid[0])*s.grid[0],r=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-s.grid[0]:n+s.grid[0]:n)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:r-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(t,e,i,n){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var s=this.counter;this._delay(function(){s===this.counter&&this.refreshPositions(!n)})},_clear:function(t,e){this.reverting=!1;var i,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)"auto"!==this._storedCSS[i]&&"static"!==this._storedCSS[i]||(this._storedCSS[i]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();function s(t,e,i){return function(n){i._trigger(t,n,e._uiHash(e))}}for(this.fromOutside&&!e&&n.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||n.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(n.push(function(t){this._trigger("remove",t,this._uiHash())}),n.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)e||n.push(s("deactivate",this,this.containers[i])),this.containers[i].containerCache.over&&(n.push(s("out",this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(i=0;i<n.length;i++)n[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===t.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}})})?n.apply(e,s):n)||(t.exports=r)},function(t,e,i){var n,s,r;
/*!
 * jQuery UI Draggable 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */s=[i(20),i(118),i(160),i(414),i(416),i(415),i(161),i(25),i(86)],void 0===(r="function"==typeof(n=function(t){return t.widget("ui.draggable",t.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(e){var i=this.options;return!(this.helper||i.disabled||t(e.target).closest(".ui-resizable-handle").length>0||(this.handle=this._getHandle(e),!this.handle||(this._blurActiveElement(e),this._blockFrames(!0===i.iframeFix?"iframe":i.iframeFix),0)))},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map(function(){var e=t(this);return t("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var i=t.ui.safeActiveElement(this.document[0]);t(e.target).closest(i).length||t.ui.safeBlur(i)},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===t(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),!1===this._trigger("start",e)?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(e,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(!1===this._trigger("drag",e,n))return this._mouseUp(new t.Event("mouseup",e)),!1;this.position=n.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=this,n=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(n=t.ui.ddmanager.drop(this,e)),this.dropped&&(n=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||!0===this.options.revert||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==i._trigger("stop",e)&&i._clear()}):!1!==this._trigger("stop",e)&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.trigger("focus"),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new t.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(e){return!this.options.handle||!!t(e.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(e){var i=this.options,n=t.isFunction(i.helper),s=n?t(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return s.parents("body").length||s.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n&&s[0]===this.element[0]&&this._setPositionRelative(),s[0]===this.element[0]||/(fixed|absolute)/.test(s.css("position"))||s.css("position","absolute"),s},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,n,s=this.options,r=this.document[0];this.relativeContainer=null,s.containment?"window"!==s.containment?"document"!==s.containment?s.containment.constructor!==Array?("parent"===s.containment&&(s.containment=this.helper[0].parentNode),(n=(i=t(s.containment))[0])&&(e=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i)):this.containment=s.containment:this.containment=[0,0,t(r).width()-this.helperProportions.width-this.margins.left,(t(r).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||r.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(t,e){e||(e=this.position);var i="absolute"===t?1:-1,n=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:n?0:this.offset.scroll.top)*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:n?0:this.offset.scroll.left)*i}},_generatePosition:function(t,e){var i,n,s,r,o=this.options,a=this._isRootNode(this.scrollParent[0]),l=t.pageX,c=t.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(n=this.relativeContainer.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(c=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(c=i[3]+this.offset.click.top)),o.grid&&(s=o.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,c=i?s-this.offset.click.top>=i[1]||s-this.offset.click.top>i[3]?s:s-this.offset.click.top>=i[1]?s-o.grid[1]:s+o.grid[1]:s,r=o.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,l=i?r-this.offset.click.left>=i[0]||r-this.offset.click.left>i[2]?r:r-this.offset.click.left>=i[0]?r-o.grid[0]:r+o.grid[0]:r),"y"===o.axis&&(l=this.originalPageX),"x"===o.axis&&(c=this.originalPageY)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(e,i,n){return n=n||this._uiHash(),t.ui.plugin.call(this,e,[i,n,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),n.offset=this.positionAbs),t.Widget.prototype._trigger.call(this,e,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i,n){var s=t.extend({},i,{item:n.element});n.sortables=[],t(n.options.connectToSortable).each(function(){var i=t(this).sortable("instance");i&&!i.options.disabled&&(n.sortables.push(i),i.refreshPositions(),i._trigger("activate",e,s))})},stop:function(e,i,n){var s=t.extend({},i,{item:n.element});n.cancelHelperRemoval=!1,t.each(n.sortables,function(){this.isOver?(this.isOver=0,n.cancelHelperRemoval=!0,this.cancelHelperRemoval=!1,this._storedCSS={position:this.placeholder.css("position"),top:this.placeholder.css("top"),left:this.placeholder.css("left")},this._mouseStop(e),this.options.helper=this.options._helper):(this.cancelHelperRemoval=!0,this._trigger("deactivate",e,s))})},drag:function(e,i,n){t.each(n.sortables,function(){var s=!1,r=this;r.positionAbs=n.positionAbs,r.helperProportions=n.helperProportions,r.offset.click=n.offset.click,r._intersectsWith(r.containerCache)&&(s=!0,t.each(n.sortables,function(){return this.positionAbs=n.positionAbs,this.helperProportions=n.helperProportions,this.offset.click=n.offset.click,this!==r&&this._intersectsWith(this.containerCache)&&t.contains(r.element[0],this.element[0])&&(s=!1),s})),s?(r.isOver||(r.isOver=1,n._parent=i.helper.parent(),r.currentItem=i.helper.appendTo(r.element).data("ui-sortable-item",!0),r.options._helper=r.options.helper,r.options.helper=function(){return i.helper[0]},e.target=r.currentItem[0],r._mouseCapture(e,!0),r._mouseStart(e,!0,!0),r.offset.click.top=n.offset.click.top,r.offset.click.left=n.offset.click.left,r.offset.parent.left-=n.offset.parent.left-r.offset.parent.left,r.offset.parent.top-=n.offset.parent.top-r.offset.parent.top,n._trigger("toSortable",e),n.dropped=r.element,t.each(n.sortables,function(){this.refreshPositions()}),n.currentItem=n.element,r.fromOutside=n),r.currentItem&&(r._mouseDrag(e),i.position=r.position)):r.isOver&&(r.isOver=0,r.cancelHelperRemoval=!0,r.options._revert=r.options.revert,r.options.revert=!1,r._trigger("out",e,r._uiHash(r)),r._mouseStop(e,!0),r.options.revert=r.options._revert,r.options.helper=r.options._helper,r.placeholder&&r.placeholder.remove(),i.helper.appendTo(n._parent),n._refreshOffsets(e),i.position=n._generatePosition(e,!0),n._trigger("fromSortable",e),n.dropped=!1,t.each(n.sortables,function(){this.refreshPositions()}))})}}),t.ui.plugin.add("draggable","cursor",{start:function(e,i,n){var s=t("body"),r=n.options;s.css("cursor")&&(r._cursor=s.css("cursor")),s.css("cursor",r.cursor)},stop:function(e,i,n){var s=n.options;s._cursor&&t("body").css("cursor",s._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i,n){var s=t(i.helper),r=n.options;s.css("opacity")&&(r._opacity=s.css("opacity")),s.css("opacity",r.opacity)},stop:function(e,i,n){var s=n.options;s._opacity&&t(i.helper).css("opacity",s._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(t,e,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(e,i,n){var s=n.options,r=!1,o=n.scrollParentNotHidden[0],a=n.document[0];o!==a&&"HTML"!==o.tagName?(s.axis&&"x"===s.axis||(n.overflowOffset.top+o.offsetHeight-e.pageY<s.scrollSensitivity?o.scrollTop=r=o.scrollTop+s.scrollSpeed:e.pageY-n.overflowOffset.top<s.scrollSensitivity&&(o.scrollTop=r=o.scrollTop-s.scrollSpeed)),s.axis&&"y"===s.axis||(n.overflowOffset.left+o.offsetWidth-e.pageX<s.scrollSensitivity?o.scrollLeft=r=o.scrollLeft+s.scrollSpeed:e.pageX-n.overflowOffset.left<s.scrollSensitivity&&(o.scrollLeft=r=o.scrollLeft-s.scrollSpeed))):(s.axis&&"x"===s.axis||(e.pageY-t(a).scrollTop()<s.scrollSensitivity?r=t(a).scrollTop(t(a).scrollTop()-s.scrollSpeed):t(window).height()-(e.pageY-t(a).scrollTop())<s.scrollSensitivity&&(r=t(a).scrollTop(t(a).scrollTop()+s.scrollSpeed))),s.axis&&"y"===s.axis||(e.pageX-t(a).scrollLeft()<s.scrollSensitivity?r=t(a).scrollLeft(t(a).scrollLeft()-s.scrollSpeed):t(window).width()-(e.pageX-t(a).scrollLeft())<s.scrollSensitivity&&(r=t(a).scrollLeft(t(a).scrollLeft()+s.scrollSpeed)))),!1!==r&&t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(n,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,i,n){var s=n.options;n.snapElements=[],t(s.snap.constructor!==String?s.snap.items||":data(ui-draggable)":s.snap).each(function(){var e=t(this),i=e.offset();this!==n.element[0]&&n.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:i.top,left:i.left})})},drag:function(e,i,n){var s,r,o,a,l,c,u,h,d,m,p=n.options,f=p.snapTolerance,_=i.offset.left,g=_+n.helperProportions.width,v=i.offset.top,y=v+n.helperProportions.height;for(d=n.snapElements.length-1;d>=0;d--)c=(l=n.snapElements[d].left-n.margins.left)+n.snapElements[d].width,h=(u=n.snapElements[d].top-n.margins.top)+n.snapElements[d].height,g<l-f||_>c+f||y<u-f||v>h+f||!t.contains(n.snapElements[d].item.ownerDocument,n.snapElements[d].item)?(n.snapElements[d].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,e,t.extend(n._uiHash(),{snapItem:n.snapElements[d].item})),n.snapElements[d].snapping=!1):("inner"!==p.snapMode&&(s=Math.abs(u-y)<=f,r=Math.abs(h-v)<=f,o=Math.abs(l-g)<=f,a=Math.abs(c-_)<=f,s&&(i.position.top=n._convertPositionTo("relative",{top:u-n.helperProportions.height,left:0}).top),r&&(i.position.top=n._convertPositionTo("relative",{top:h,left:0}).top),o&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l-n.helperProportions.width}).left),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:c}).left)),m=s||r||o||a,"outer"!==p.snapMode&&(s=Math.abs(u-v)<=f,r=Math.abs(h-y)<=f,o=Math.abs(l-_)<=f,a=Math.abs(c-g)<=f,s&&(i.position.top=n._convertPositionTo("relative",{top:u,left:0}).top),r&&(i.position.top=n._convertPositionTo("relative",{top:h-n.helperProportions.height,left:0}).top),o&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l}).left),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:c-n.helperProportions.width}).left)),!n.snapElements[d].snapping&&(s||r||o||a||m)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,e,t.extend(n._uiHash(),{snapItem:n.snapElements[d].item})),n.snapElements[d].snapping=s||r||o||a||m)}}),t.ui.plugin.add("draggable","stack",{start:function(e,i,n){var s,r=n.options,o=t.makeArray(t(r.stack)).sort(function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)});o.length&&(s=parseInt(t(o[0]).css("zIndex"),10)||0,t(o).each(function(e){t(this).css("zIndex",s+e)}),this.css("zIndex",s+o.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i,n){var s=t(i.helper),r=n.options;s.css("zIndex")&&(r._zIndex=s.css("zIndex")),s.css("zIndex",r.zIndex)},stop:function(e,i,n){var s=n.options;s._zIndex&&t(i.helper).css("zIndex",s._zIndex)}}),t.ui.draggable})?n.apply(e,s):n)||(t.exports=r)},function(t,e,i){var n,s,r;s=[i(20),i(25)],void 0===(r="function"==typeof(n=function(t){return t.ui.plugin={add:function(e,i,n){var s,r=t.ui[e].prototype;for(s in n)r.plugins[s]=r.plugins[s]||[],r.plugins[s].push([i,n[s]])},call:function(t,e,i,n){var s,r=t.plugins[e];if(r&&(n||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(s=0;s<r.length;s++)t.options[r[s][0]]&&r[s][1].apply(t.element,i)}}})?n.apply(e,s):n)||(t.exports=r)},function(t,e,i){var n,s,r;s=[i(20),i(25)],void 0===(r="function"==typeof(n=function(t){return t.ui.safeBlur=function(e){e&&"body"!==e.nodeName.toLowerCase()&&t(e).trigger("blur")}})?n.apply(e,s):n)||(t.exports=r)},function(t,e,i){var n,s,r;s=[i(20),i(25)],void 0===(r="function"==typeof(n=function(t){return t.ui.safeActiveElement=function(t){var e;try{e=t.activeElement}catch(i){e=t.body}return e||(e=t.body),e.nodeName||(e=t.body),e}})?n.apply(e,s):n)||(t.exports=r)},function(t,e,i){var n,s,r;
/*!
 * jQuery UI Disable Selection 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */s=[i(20),i(25)],void 0===(r="function"==typeof(n=function(t){return t.fn.extend({disableSelection:function(){var t="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(t+".ui-disableSelection",function(t){t.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}})})?n.apply(e,s):n)||(t.exports=r)},function(t,e,i){var n,s,r;
/*!
 * jQuery UI Position 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */s=[i(20),i(25)],void 0===(r="function"==typeof(n=function(t){return function(){var e,i=Math.max,n=Math.abs,s=/left|center|right/,r=/top|center|bottom/,o=/[\+\-]\d+(\.[\d]+)?%?/,a=/^\w+/,l=/%$/,c=t.fn.position;function u(t,e,i){return[parseFloat(t[0])*(l.test(t[0])?e/100:1),parseFloat(t[1])*(l.test(t[1])?i/100:1)]}function h(e,i){return parseInt(t.css(e,i),10)||0}t.position={scrollbarWidth:function(){if(void 0!==e)return e;var i,n,s=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),r=s.children()[0];return t("body").append(s),i=r.offsetWidth,s.css("overflow","scroll"),i===(n=r.offsetWidth)&&(n=s[0].clientWidth),s.remove(),e=i-n},getScrollInfo:function(e){var i=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),n=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),s="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth;return{width:"scroll"===n||"auto"===n&&e.height<e.element[0].scrollHeight?t.position.scrollbarWidth():0,height:s?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),n=t.isWindow(i[0]),s=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:n,isDocument:s,offset:n||s?{left:0,top:0}:t(e).offset(),scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:i.outerWidth(),height:i.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return c.apply(this,arguments);e=t.extend({},e);var l,d,m,p,f,_,g=t(e.of),v=t.position.getWithinInfo(e.within),y=t.position.getScrollInfo(v),x=(e.collision||"flip").split(" "),b={};return _=function(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}(g),g[0].preventDefault&&(e.at="left top"),d=_.width,m=_.height,p=_.offset,f=t.extend({},p),t.each(["my","at"],function(){var t,i,n=(e[this]||"").split(" ");1===n.length&&(n=s.test(n[0])?n.concat(["center"]):r.test(n[0])?["center"].concat(n):["center","center"]),n[0]=s.test(n[0])?n[0]:"center",n[1]=r.test(n[1])?n[1]:"center",t=o.exec(n[0]),i=o.exec(n[1]),b[this]=[t?t[0]:0,i?i[0]:0],e[this]=[a.exec(n[0])[0],a.exec(n[1])[0]]}),1===x.length&&(x[1]=x[0]),"right"===e.at[0]?f.left+=d:"center"===e.at[0]&&(f.left+=d/2),"bottom"===e.at[1]?f.top+=m:"center"===e.at[1]&&(f.top+=m/2),l=u(b.at,d,m),f.left+=l[0],f.top+=l[1],this.each(function(){var s,r,o=t(this),a=o.outerWidth(),c=o.outerHeight(),_=h(this,"marginLeft"),A=h(this,"marginTop"),w=a+_+h(this,"marginRight")+y.width,S=c+A+h(this,"marginBottom")+y.height,C=t.extend({},f),B=u(b.my,o.outerWidth(),o.outerHeight());"right"===e.my[0]?C.left-=a:"center"===e.my[0]&&(C.left-=a/2),"bottom"===e.my[1]?C.top-=c:"center"===e.my[1]&&(C.top-=c/2),C.left+=B[0],C.top+=B[1],s={marginLeft:_,marginTop:A},t.each(["left","top"],function(i,n){t.ui.position[x[i]]&&t.ui.position[x[i]][n](C,{targetWidth:d,targetHeight:m,elemWidth:a,elemHeight:c,collisionPosition:s,collisionWidth:w,collisionHeight:S,offset:[l[0]+B[0],l[1]+B[1]],my:e.my,at:e.at,within:v,elem:o})}),e.using&&(r=function(t){var s=p.left-C.left,r=s+d-a,l=p.top-C.top,u=l+m-c,h={target:{element:g,left:p.left,top:p.top,width:d,height:m},element:{element:o,left:C.left,top:C.top,width:a,height:c},horizontal:r<0?"left":s>0?"right":"center",vertical:u<0?"top":l>0?"bottom":"middle"};d<a&&n(s+r)<d&&(h.horizontal="center"),m<c&&n(l+u)<m&&(h.vertical="middle"),i(n(s),n(r))>i(n(l),n(u))?h.important="horizontal":h.important="vertical",e.using.call(this,t,h)}),o.offset(t.extend(C,{using:r}))})},t.ui.position={fit:{left:function(t,e){var n,s=e.within,r=s.isWindow?s.scrollLeft:s.offset.left,o=s.width,a=t.left-e.collisionPosition.marginLeft,l=r-a,c=a+e.collisionWidth-o-r;e.collisionWidth>o?l>0&&c<=0?(n=t.left+l+e.collisionWidth-o-r,t.left+=l-n):t.left=c>0&&l<=0?r:l>c?r+o-e.collisionWidth:r:l>0?t.left+=l:c>0?t.left-=c:t.left=i(t.left-a,t.left)},top:function(t,e){var n,s=e.within,r=s.isWindow?s.scrollTop:s.offset.top,o=e.within.height,a=t.top-e.collisionPosition.marginTop,l=r-a,c=a+e.collisionHeight-o-r;e.collisionHeight>o?l>0&&c<=0?(n=t.top+l+e.collisionHeight-o-r,t.top+=l-n):t.top=c>0&&l<=0?r:l>c?r+o-e.collisionHeight:r:l>0?t.top+=l:c>0?t.top-=c:t.top=i(t.top-a,t.top)}},flip:{left:function(t,e){var i,s,r=e.within,o=r.offset.left+r.scrollLeft,a=r.width,l=r.isWindow?r.scrollLeft:r.offset.left,c=t.left-e.collisionPosition.marginLeft,u=c-l,h=c+e.collisionWidth-a-l,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,m="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,p=-2*e.offset[0];u<0?((i=t.left+d+m+p+e.collisionWidth-a-o)<0||i<n(u))&&(t.left+=d+m+p):h>0&&((s=t.left-e.collisionPosition.marginLeft+d+m+p-l)>0||n(s)<h)&&(t.left+=d+m+p)},top:function(t,e){var i,s,r=e.within,o=r.offset.top+r.scrollTop,a=r.height,l=r.isWindow?r.scrollTop:r.offset.top,c=t.top-e.collisionPosition.marginTop,u=c-l,h=c+e.collisionHeight-a-l,d="top"===e.my[1]?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,m="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,p=-2*e.offset[1];u<0?((s=t.top+d+m+p+e.collisionHeight-a-o)<0||s<n(u))&&(t.top+=d+m+p):h>0&&((i=t.top-e.collisionPosition.marginTop+d+m+p-l)>0||n(i)<h)&&(t.top+=d+m+p)}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}}}(),t.ui.position})?n.apply(e,s):n)||(t.exports=r)},function(t,e,i){var n,s,r;
/*!
 * jQuery UI Effects 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */s=[i(20),i(25)],void 0===(r="function"==typeof(n=function(t){var e="ui-effects-animated",i=t;return t.effects={effect:{}},
/*!
 * jQuery Color Animations v2.1.2
 * https://github.com/jquery/jquery-color
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Wed Jan 16 08:47:09 2013 -0600
 */
function(t,e){var i,n=/^([\-+])=\s*(\d+\.?\d*)/,s=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],r=t.Color=function(e,i,n,s){return new t.Color.fn.parse(e,i,n,s)},o={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},a={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},l=r.support={},c=t("<p>")[0],u=t.each;function h(t,e,i){var n=a[e.type]||{};return null==t?i||!e.def?null:e.def:(t=n.floor?~~t:parseFloat(t),isNaN(t)?e.def:n.mod?(t+n.mod)%n.mod:0>t?0:n.max<t?n.max:t)}function d(e){var n=r(),a=n._rgba=[];return e=e.toLowerCase(),u(s,function(t,i){var s,r=i.re.exec(e),l=r&&i.parse(r),c=i.space||"rgba";if(l)return s=n[c](l),n[o[c].cache]=s[o[c].cache],a=n._rgba=s._rgba,!1}),a.length?("0,0,0,0"===a.join()&&t.extend(a,i.transparent),n):i[e]}function m(t,e,i){return 6*(i=(i+1)%1)<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}c.style.cssText="background-color:rgba(1,1,1,.5)",l.rgba=c.style.backgroundColor.indexOf("rgba")>-1,u(o,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),r.fn=t.extend(r.prototype,{parse:function(e,n,s,a){if(void 0===e)return this._rgba=[null,null,null,null],this;(e.jquery||e.nodeType)&&(e=t(e).css(n),n=void 0);var l=this,c=t.type(e),m=this._rgba=[];return void 0!==n&&(e=[e,n,s,a],c="array"),"string"===c?this.parse(d(e)||i._default):"array"===c?(u(o.rgba.props,function(t,i){m[i.idx]=h(e[i.idx],i)}),this):"object"===c?(u(o,e instanceof r?function(t,i){e[i.cache]&&(l[i.cache]=e[i.cache].slice())}:function(i,n){var s=n.cache;u(n.props,function(t,i){if(!l[s]&&n.to){if("alpha"===t||null==e[t])return;l[s]=n.to(l._rgba)}l[s][i.idx]=h(e[t],i,!0)}),l[s]&&t.inArray(null,l[s].slice(0,3))<0&&(l[s][3]=1,n.from&&(l._rgba=n.from(l[s])))}),this):void 0},is:function(t){var e=r(t),i=!0,n=this;return u(o,function(t,s){var r,o=e[s.cache];return o&&(r=n[s.cache]||s.to&&s.to(n._rgba)||[],u(s.props,function(t,e){if(null!=o[e.idx])return i=o[e.idx]===r[e.idx]})),i}),i},_space:function(){var t=[],e=this;return u(o,function(i,n){e[n.cache]&&t.push(i)}),t.pop()},transition:function(t,e){var i=r(t),n=i._space(),s=o[n],l=0===this.alpha()?r("transparent"):this,c=l[s.cache]||s.to(l._rgba),d=c.slice();return i=i[s.cache],u(s.props,function(t,n){var s=n.idx,r=c[s],o=i[s],l=a[n.type]||{};null!==o&&(null===r?d[s]=o:(l.mod&&(o-r>l.mod/2?r+=l.mod:r-o>l.mod/2&&(r-=l.mod)),d[s]=h((o-r)*e+r,n)))}),this[n](d)},blend:function(e){if(1===this._rgba[3])return this;var i=this._rgba.slice(),n=i.pop(),s=r(e)._rgba;return r(t.map(i,function(t,e){return(1-n)*s[e]+n*t}))},toRgbaString:function(){var e="rgba(",i=t.map(this._rgba,function(t,e){return null==t?e>2?1:0:t});return 1===i[3]&&(i.pop(),e="rgb("),e+i.join()+")"},toHslaString:function(){var e="hsla(",i=t.map(this.hsla(),function(t,e){return null==t&&(t=e>2?1:0),e&&e<3&&(t=Math.round(100*t)+"%"),t});return 1===i[3]&&(i.pop(),e="hsl("),e+i.join()+")"},toHexString:function(e){var i=this._rgba.slice(),n=i.pop();return e&&i.push(~~(255*n)),"#"+t.map(i,function(t){return 1===(t=(t||0).toString(16)).length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),r.fn.parse.prototype=r.fn,o.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,i,n=t[0]/255,s=t[1]/255,r=t[2]/255,o=t[3],a=Math.max(n,s,r),l=Math.min(n,s,r),c=a-l,u=a+l,h=.5*u;return e=l===a?0:n===a?60*(s-r)/c+360:s===a?60*(r-n)/c+120:60*(n-s)/c+240,i=0===c?0:h<=.5?c/u:c/(2-u),[Math.round(e)%360,i,h,null==o?1:o]},o.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,i=t[1],n=t[2],s=t[3],r=n<=.5?n*(1+i):n+i-n*i,o=2*n-r;return[Math.round(255*m(o,r,e+1/3)),Math.round(255*m(o,r,e)),Math.round(255*m(o,r,e-1/3)),s]},u(o,function(e,i){var s=i.props,o=i.cache,a=i.to,l=i.from;r.fn[e]=function(e){if(a&&!this[o]&&(this[o]=a(this._rgba)),void 0===e)return this[o].slice();var i,n=t.type(e),c="array"===n||"object"===n?e:arguments,d=this[o].slice();return u(s,function(t,e){var i=c["object"===n?t:e.idx];null==i&&(i=d[e.idx]),d[e.idx]=h(i,e)}),l?((i=r(l(d)))[o]=d,i):r(d)},u(s,function(i,s){r.fn[i]||(r.fn[i]=function(r){var o,a=t.type(r),l="alpha"===i?this._hsla?"hsla":"rgba":e,c=this[l](),u=c[s.idx];return"undefined"===a?u:("function"===a&&(r=r.call(this,u),a=t.type(r)),null==r&&s.empty?this:("string"===a&&(o=n.exec(r))&&(r=u+parseFloat(o[2])*("+"===o[1]?1:-1)),c[s.idx]=r,this[l](c)))})})}),r.hook=function(e){var i=e.split(" ");u(i,function(e,i){t.cssHooks[i]={set:function(e,n){var s,o,a="";if("transparent"!==n&&("string"!==t.type(n)||(s=d(n)))){if(n=r(s||n),!l.rgba&&1!==n._rgba[3]){for(o="backgroundColor"===i?e.parentNode:e;(""===a||"transparent"===a)&&o&&o.style;)try{a=t.css(o,"backgroundColor"),o=o.parentNode}catch(t){}n=n.blend(a&&"transparent"!==a?a:"_default")}n=n.toRgbaString()}try{e.style[i]=n}catch(t){}}},t.fx.step[i]=function(e){e.colorInit||(e.start=r(e.elem,i),e.end=r(e.end),e.colorInit=!0),t.cssHooks[i].set(e.elem,e.start.transition(e.end,e.pos))}})},r.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),t.cssHooks.borderColor={expand:function(t){var e={};return u(["Top","Right","Bottom","Left"],function(i,n){e["border"+n+"Color"]=t}),e}},i=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(i),function(){var e=["add","remove","toggle"],n={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};function s(e){var i,n,s=e.ownerDocument.defaultView?e.ownerDocument.defaultView.getComputedStyle(e,null):e.currentStyle,r={};if(s&&s.length&&s[0]&&s[s[0]])for(n=s.length;n--;)"string"==typeof s[i=s[n]]&&(r[t.camelCase(i)]=s[i]);else for(i in s)"string"==typeof s[i]&&(r[i]=s[i]);return r}t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(e,n){t.fx.step[n]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(i.style(t.elem,n,t.end),t.setAttr=!0)}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t.effects.animateClass=function(i,r,o,a){var l=t.speed(r,o,a);return this.queue(function(){var r,o=t(this),a=o.attr("class")||"",c=l.children?o.find("*").addBack():o;c=c.map(function(){return{el:t(this),start:s(this)}}),(r=function(){t.each(e,function(t,e){i[e]&&o[e+"Class"](i[e])})})(),c=c.map(function(){return this.end=s(this.el[0]),this.diff=function(e,i){var s,r,o={};for(s in i)r=i[s],e[s]!==r&&(n[s]||!t.fx.step[s]&&isNaN(parseFloat(r))||(o[s]=r));return o}(this.start,this.end),this}),o.attr("class",a),c=c.map(function(){var e=this,i=t.Deferred(),n=t.extend({},l,{queue:!1,complete:function(){i.resolve(e)}});return this.el.animate(this.diff,n),i.promise()}),t.when.apply(t,c.get()).done(function(){r(),t.each(arguments,function(){var e=this.el;t.each(this.diff,function(t){e.css(t,"")})}),l.complete.call(o[0])})})},t.fn.extend({addClass:function(e){return function(i,n,s,r){return n?t.effects.animateClass.call(this,{add:i},n,s,r):e.apply(this,arguments)}}(t.fn.addClass),removeClass:function(e){return function(i,n,s,r){return arguments.length>1?t.effects.animateClass.call(this,{remove:i},n,s,r):e.apply(this,arguments)}}(t.fn.removeClass),toggleClass:function(e){return function(i,n,s,r,o){return"boolean"==typeof n||void 0===n?s?t.effects.animateClass.call(this,n?{add:i}:{remove:i},s,r,o):e.apply(this,arguments):t.effects.animateClass.call(this,{toggle:i},n,s,r)}}(t.fn.toggleClass),switchClass:function(e,i,n,s,r){return t.effects.animateClass.call(this,{add:i,remove:e},n,s,r)}})}(),function(){function i(e,i,n,s){return t.isPlainObject(e)&&(i=e,e=e.effect),e={effect:e},null==i&&(i={}),t.isFunction(i)&&(s=i,n=null,i={}),("number"==typeof i||t.fx.speeds[i])&&(s=n,n=i,i={}),t.isFunction(n)&&(s=n,n=null),i&&t.extend(e,i),n=n||i.duration,e.duration=t.fx.off?0:"number"==typeof n?n:n in t.fx.speeds?t.fx.speeds[n]:t.fx.speeds._default,e.complete=s||i.complete,e}function n(e){return!(e&&"number"!=typeof e&&!t.fx.speeds[e])||"string"==typeof e&&!t.effects.effect[e]||!!t.isFunction(e)||"object"==typeof e&&!e.effect}function s(t,e){var i=e.outerWidth(),n=e.outerHeight(),s=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/.exec(t)||["",0,i,n,0];return{top:parseFloat(s[1])||0,right:"auto"===s[2]?i:parseFloat(s[2]),bottom:"auto"===s[3]?n:parseFloat(s[3]),left:parseFloat(s[4])||0}}t.expr&&t.expr.filters&&t.expr.filters.animated&&(t.expr.filters.animated=function(i){return function(n){return!!t(n).data(e)||i(n)}}(t.expr.filters.animated)),!1!==t.uiBackCompat&&t.extend(t.effects,{save:function(t,e){for(var i=0,n=e.length;i<n;i++)null!==e[i]&&t.data("ui-effects-"+e[i],t[0].style[e[i]])},restore:function(t,e){for(var i,n=0,s=e.length;n<s;n++)null!==e[n]&&(i=t.data("ui-effects-"+e[n]),t.css(e[n],i))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var i={width:e.outerWidth(!0),height:e.outerHeight(!0),float:e.css("float")},n=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),s={width:e.width(),height:e.height()},r=document.activeElement;try{r.id}catch(t){r=document.body}return e.wrap(n),(e[0]===r||t.contains(e[0],r))&&t(r).trigger("focus"),n=e.parent(),"static"===e.css("position")?(n.css({position:"relative"}),e.css({position:"relative"})):(t.extend(i,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],function(t,n){i[n]=e.css(n),isNaN(parseInt(i[n],10))&&(i[n]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(s),n.css(i).show()},removeWrapper:function(e){var i=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===i||t.contains(e[0],i))&&t(i).trigger("focus")),e}}),t.extend(t.effects,{version:"1.12.1",define:function(e,i,n){return n||(n=i,i="effect"),t.effects.effect[e]=n,t.effects.effect[e].mode=i,n},scaledDimensions:function(t,e,i){if(0===e)return{height:0,width:0,outerHeight:0,outerWidth:0};var n="horizontal"!==i?(e||100)/100:1,s="vertical"!==i?(e||100)/100:1;return{height:t.height()*s,width:t.width()*n,outerHeight:t.outerHeight()*s,outerWidth:t.outerWidth()*n}},clipToBox:function(t){return{width:t.clip.right-t.clip.left,height:t.clip.bottom-t.clip.top,left:t.clip.left,top:t.clip.top}},unshift:function(t,e,i){var n=t.queue();e>1&&n.splice.apply(n,[1,0].concat(n.splice(e,i))),t.dequeue()},saveStyle:function(t){t.data("ui-effects-style",t[0].style.cssText)},restoreStyle:function(t){t[0].style.cssText=t.data("ui-effects-style")||"",t.removeData("ui-effects-style")},mode:function(t,e){var i=t.is(":hidden");return"toggle"===e&&(e=i?"show":"hide"),(i?"hide"===e:"show"===e)&&(e="none"),e},getBaseline:function(t,e){var i,n;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":n=0;break;case"center":n=.5;break;case"right":n=1;break;default:n=t[1]/e.width}return{x:n,y:i}},createPlaceholder:function(e){var i,n=e.css("position"),s=e.position();return e.css({marginTop:e.css("marginTop"),marginBottom:e.css("marginBottom"),marginLeft:e.css("marginLeft"),marginRight:e.css("marginRight")}).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()),/^(static|relative)/.test(n)&&(n="absolute",i=t("<"+e[0].nodeName+">").insertAfter(e).css({display:/^(inline|ruby)/.test(e.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:e.css("marginTop"),marginBottom:e.css("marginBottom"),marginLeft:e.css("marginLeft"),marginRight:e.css("marginRight"),float:e.css("float")}).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).addClass("ui-effects-placeholder"),e.data("ui-effects-placeholder",i)),e.css({position:n,left:s.left,top:s.top}),i},removePlaceholder:function(t){var e="ui-effects-placeholder",i=t.data(e);i&&(i.remove(),t.removeData(e))},cleanUp:function(e){t.effects.restoreStyle(e),t.effects.removePlaceholder(e)},setTransition:function(e,i,n,s){return s=s||{},t.each(i,function(t,i){var r=e.cssUnit(i);r[0]>0&&(s[i]=r[0]*n+r[1])}),s}}),t.fn.extend({effect:function(){var n=i.apply(this,arguments),s=t.effects.effect[n.effect],r=s.mode,o=n.queue,a=o||"fx",l=n.complete,c=n.mode,u=[],h=function(i){var n=t(this),s=t.effects.mode(n,c)||r;n.data(e,!0),u.push(s),r&&("show"===s||s===r&&"hide"===s)&&n.show(),r&&"none"===s||t.effects.saveStyle(n),t.isFunction(i)&&i()};if(t.fx.off||!s)return c?this[c](n.duration,l):this.each(function(){l&&l.call(this)});function d(i){var o=t(this);function a(){t.isFunction(l)&&l.call(o[0]),t.isFunction(i)&&i()}n.mode=u.shift(),!1===t.uiBackCompat||r?"none"===n.mode?(o[c](),a()):s.call(o[0],n,function(){o.removeData(e),t.effects.cleanUp(o),"hide"===n.mode&&o.hide(),a()}):(o.is(":hidden")?"hide"===c:"show"===c)?(o[c](),a()):s.call(o[0],n,a)}return!1===o?this.each(h).each(d):this.queue(a,h).queue(a,d)},show:function(t){return function(e){if(n(e))return t.apply(this,arguments);var s=i.apply(this,arguments);return s.mode="show",this.effect.call(this,s)}}(t.fn.show),hide:function(t){return function(e){if(n(e))return t.apply(this,arguments);var s=i.apply(this,arguments);return s.mode="hide",this.effect.call(this,s)}}(t.fn.hide),toggle:function(t){return function(e){if(n(e)||"boolean"==typeof e)return t.apply(this,arguments);var s=i.apply(this,arguments);return s.mode="toggle",this.effect.call(this,s)}}(t.fn.toggle),cssUnit:function(e){var i=this.css(e),n=[];return t.each(["em","px","%","pt"],function(t,e){i.indexOf(e)>0&&(n=[parseFloat(i),e])}),n},cssClip:function(t){return t?this.css("clip","rect("+t.top+"px "+t.right+"px "+t.bottom+"px "+t.left+"px)"):s(this.css("clip"),this)},transfer:function(e,i){var n=t(this),s=t(e.to),r="fixed"===s.css("position"),o=t("body"),a=r?o.scrollTop():0,l=r?o.scrollLeft():0,c=s.offset(),u={top:c.top-a,left:c.left-l,height:s.innerHeight(),width:s.innerWidth()},h=n.offset(),d=t("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(e.className).css({top:h.top-a,left:h.left-l,height:n.innerHeight(),width:n.innerWidth(),position:r?"fixed":"absolute"}).animate(u,e.duration,e.easing,function(){d.remove(),t.isFunction(i)&&i()})}}),t.fx.step.clip=function(e){e.clipInit||(e.start=t(e.elem).cssClip(),"string"==typeof e.end&&(e.end=s(e.end,e.elem)),e.clipInit=!0),t(e.elem).cssClip({top:e.pos*(e.end.top-e.start.top)+e.start.top,right:e.pos*(e.end.right-e.start.right)+e.start.right,bottom:e.pos*(e.end.bottom-e.start.bottom)+e.start.bottom,left:e.pos*(e.end.left-e.start.left)+e.start.left})}}(),function(){var e={};t.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,i){e[i]=function(e){return Math.pow(e,t+2)}}),t.extend(e,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;t<((e=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(e,function(e,i){t.easing["easeIn"+e]=i,t.easing["easeOut"+e]=function(t){return 1-i(1-t)},t.easing["easeInOut"+e]=function(t){return t<.5?i(2*t)/2:1-i(-2*t+2)/2}})}(),t.effects})?n.apply(e,s):n)||(t.exports=r)},function(t,e){window.DownloadData=function(){let t=document.createElement("a");return document.body.appendChild(t),t.style="display: none",t.target="_blank",function(e,i,n){let s=new Blob([e],{type:i||"octet/stream"}),r=window.URL.createObjectURL(s);n&&""!=n?(t.href=r,t.download=n,t.click()):window.open(r,"_blank"),window.URL.revokeObjectURL(r)}}(),window.SelectText=function(t){var e,i;document.body.createTextRange?((e=document.body.createTextRange()).moveToElementText(t),e.select()):window.getSelection&&(i=window.getSelection(),(e=document.createRange()).selectNodeContents(t),i.removeAllRanges(),i.addRange(e))},window.copyToClipboard=function(t){var e=$("<input>");$("body").append(e),e.val(t).select(),document.execCommand("copy"),e.remove()}},function(t,e,i){"use strict";i.d(e,"a",function(){return a});var n=i(3),s=(i(6),i(119),i(123)),r=(i(65),i(59));const o=s.a;window.CREATE_SOLID_FOOTHOLD=!1,window.CREATE_SOLID_AND_EDGE_FOOTHOLD=!1,window.USE_GHOST_VERTEX=!0,window.FOOTHOLD_IS_BULLET=!0;class a{constructor(){this.bodies=null,this.footholds=null,this.rectChains=null,this.init()}init(){this.footholds=[],this.bodies=[]}load(t,e){if(!("foothold"in t))return;for(let e in t.foothold){let i=t.foothold[e];for(let t in i){let n=i[t];for(let i in n){const s=i-1;let r=new o(n[i],s,e,t);this.footholds[s]=r}}}let i=[],n=0,r=this.rectChains=[];for(let t=0;t<this.footholds.length;++t){const a=this.footholds[t];if(null==a.chain){let t;for(let e=a;null!=e;e=this.footholds[e.prev])if(null!=e.prev&&e.prev==a.id){t=e;break}t||(t=a);let l=new s.b(n);l.init(t,this.footholds,o),o==s.a?window.CREATE_SOLID_AND_EDGE_FOOTHOLD?(this._create_foothold(e,l,!1),this._create_foothold(e,l,!0)):this._create_foothold(e,l,window.CREATE_SOLID_FOOTHOLD):o==s.c&&this._create_chain(e,l),i.push(l),r[n]=l.bound,n++}}}_create_chain(t,e){let i,s;{let s=new n.b2BodyDef;const r=e.bound.center;s.type=n.b2BodyType.b2_kinematicBody,s.position.Set(r.x/$gv.CANVAS_SCALE,r.y/$gv.CANVAS_SCALE),s.angle=0,s.gravityScale=0,s.linearDamping=1,s.bullet=!0,s.userData=this,(i=t.CreateBody(s)).$type="ground",this.bodies.push(i)}{s=new n.b2ChainShape;let t=[i.GetLocalPoint(e.footholds[0].GetVertex1(),new n.b2Vec2)];for(let s=0;s<e.footholds.length;++s){const r=e.footholds[s];t.push(i.GetLocalPoint(r.GetVertex2(),new n.b2Vec2)),r.body=i,r._chain=e}e.loop?s.CreateLoop(t):s.CreateChain(t)}{let t=new n.b2FixtureDef;t.shape=s,t.density=1,t.filter.Copy(r.FilterHelper.get("foothold")),t.friction=1,t.restitution=0,t.userData=e;let o=i.CreateFixture(t);o.endContact=this.endContact_bodyBase_oneway,o.preSolve=this.preSolveGround_bodyBase_oneway}}_create_foothold(t,e,i){let s,o=new n.b2BodyDef,a=new n.b2FixtureDef;s=i?new n.b2PolygonShape:new n.b2EdgeShape,o.type=n.b2BodyType.b2_kinematicBody,o.linearDamping=1,o.gravityScale=0,o.userData=this,o.bullet=window.FOOTHOLD_IS_BULLET,a.shape=s,a.density=1,a.filter.Copy(r.FilterHelper.get("foothold")),a.friction=1,a.restitution=0;for(let t=0;t<e.footholds.length;++t){const i=e.footholds[t];let s,r,o,a;s=i.x1/$gv.CANVAS_SCALE,r=i.y1/$gv.CANVAS_SCALE,o=i.x2/$gv.CANVAS_SCALE,a=i.y2/$gv.CANVAS_SCALE,l.call(this,i);const c=this.footholds[i.next];if(c){let t,e,l,u;t=c.x1/$gv.CANVAS_SCALE,e=c.y1/$gv.CANVAS_SCALE,l=c.x2/$gv.CANVAS_SCALE,u=c.y2/$gv.CANVAS_SCALE;let h=new n.b2Vec2(s-o,r-a),d=new n.b2Vec2(l-t,u-e),m=Math.atan2(n.b2Vec2.CrossVV(h,d),n.b2Vec2.DotVV(h,d));i.next_a=m,i.next_a_deg=Math.abs(Math.trunc(180*m/Math.PI))%180}}function l(e){n.b2Vec2.AddVV(e.GetVertex1(),e.GetVertex2(),o.position),n.b2Vec2.MulVS(o.position,.5,o.position);let r=.5*e.m_length;o.angle=e.m_angle;let l=t.CreateBody(o);if(l.$type="ground",i)s.SetAsBox(r,n.b2_polygonRadius);else if(s.m_vertex1.Set(-r,0),s.m_vertex2.Set(r,0),window.USE_GHOST_VERTEX){if(null!=e.prev){const t=this.footholds[e.prev];s.m_hasVertex0=!0,s.m_vertex0.Copy(t.GetVertex2())}if(null!=e.next){const t=this.footholds[e.next];s.m_hasVertex3=!0,s.m_vertex3.Copy(t.GetVertex1())}}a.userData=e;let c=l.CreateFixture(a);c.endContact=this.endContact_bodyBase_oneway,c.preSolve=this.preSolveGround_bodyBase_oneway,e.body=l,this.bodies.push(l)}}_compute_left_right_border(){let t=null,e=null;for(let i=0;i<this.footholds.length;++i){let n,s,r=this.footholds[i];r.x1<r.x2?(n=r.x1,s=r.x2):(n=r.x2,s=r.x1),(null==t||n<t)&&(t=n),(null==e||s>e)&&(e=s)}return{left:t,right:e}}beginContact_bodyBase_oneway(t,e,i,s,r){let o,a;i.$type;const l=i.GetBody(),c=this.getFootholdFromContact(s);c.is_wall&&"pl_ft_walk"==i.$type&&t.SetFriction(0);const u=i.GetUserData();if(!u||!u.body||"player"!=u.body.$type)return;if(u.state.ladder)return void t.SetEnabled(!1);t.IsTouching()||console.log("J: "+u.state.jump);const h=u.$foothold;if(c.is_wall){if(u.prev_$fh.layer&&u.prev_$fh.layer!=c.layer)return void t.SetEnabled(!1);if(u.$foothold&&u.$foothold.layer!=c.layer)return void t.SetEnabled(!1)}if(u.state.dropDown&&null!=u.leave_$fh){if(u.leave_$fh==u.$foothold&&u.$foothold!=c)return void t.SetEnabled(!1);if("pl_ft_walk"!=l.$type||u.leave_$fh.id==c.id||u.leave_$fh.chain.id==c.chain.id||null!=u.leave_$fh.prev&&u.leave_$fh.prev==c.id||null!=u.leave_$fh.next&&u.leave_$fh.next==c.id)return void t.SetEnabled(!1);o=t.GetManifold().pointCount,a=new n.b2WorldManifold,t.GetWorldManifold(a);for(let t=0;t<o;++t){const e=u.foot_walk.GetPosition();a.points[t].y>e.y&&(u.leave_$fh=null,u.state.dropDown=!1)}}else u.state.dropDown=!1;if(u.leave_$fh&&u.leave_$fh==c)t.SetEnabled(!1);else{null==o&&(o=t.GetManifold().pointCount,a=new n.b2WorldManifold,t.GetWorldManifold(a));for(let t=0;t<o;++t){const e=a.points[t],i=c.GetLinearVelocityFromWorldPoint(e,new n.b2Vec2),s=l.GetLinearVelocityFromWorldPoint(e,new n.b2Vec2),r=new n.b2Vec2(s.x-i.x,s.y-i.y),o=c.GetLocalVector(r,new n.b2Vec2);{let t=u.foot_walk.GetPosition(),i=n.b2Vec2.SubVV(e,t,new n.b2Vec2).Length();if(u._$footCFDist=i,u._$footCFSub=Math.abs(i-u.chara_profile.foot_width),c.is_wall){const i=c.GetLocalPoint(t,new n.b2Vec2),s=u.chara_profile.foot_width-n.b2_polygonRadius;if(-i.y>s)return void d(e);continue}if(u.$foothold&&u.$foothold!=c&&u._$footCFSub>n.b2_polygonRadius){u.leave_$fh=c;continue}}if(o.y>1){if("pl_ft_walk"==l.$type){if(u._which_foothold_contact(c,e))return void d(e);continue}return void d(e)}if(o.y>-1){const t=c.GetLocalPoint(e,new n.b2Vec2),i=n.b2_polygonRadius;if(t.y<=i)return u._which_foothold_contact(c,e)?(u.$foothold&&(u.$foothold.id,c.id),void d(e)):void d(e)}}t.SetEnabled(!1)}function d(e){return!h||!(c.is_wall||c==u._foothold&&(c.y1<h.y1||c.y2<h.y2)||c!=u._foothold&&(c.y1>h.y1||c.y2>h.y2))||h==c||u._$fallEdge&&u._$fallEdge==h||c.chain.id==h.chain.id||h.prev&&h.y1==c.y2||h.next&&h.y2==c.y1?u._$fallEdge&&u._$fallEdge==c?void t.SetEnabled(!1):null==c.prev&&e.x*$gv.CANVAS_SCALE<c.x1||null==c.next&&e.x*$gv.CANVAS_SCALE>c.x2?(u.state.jump=!0,u._$fallEdge=c,u._foothold=null,u._foot_at=null,u.$foothold=null,void t.SetEnabled(!1)):void 0:(u.leave_$fh=c,void t.SetEnabled(!1))}}endContact_bodyBase_oneway(t,e,i,n,s){const r=i.GetUserData();if(!r)return;const o=this.getFootholdFromContact(n);o==r._$fallEdge?r._$fallEdge=null:o==r._foothold&&(r._foothold=null,r._foot_at=null),r.$foothold&&o==r.$foothold&&(r.prev_$fh=r.$foothold,r.$foothold=r._foothold),r.leave_$fh&&r.leave_$fh==o&&(r.leave_$fh=null)}preSolveGround_bodyBase_oneway(t,e,i,n,s,r){i.GetBody().GetUserData().beginContact_bodyBase_oneway.call(this,t,i,n,s,r)}unload(t){for(let e=0;e<this.bodies.length;++e)t.DestroyBody(this.bodies[e]);this.init()}addFoothold(t){this.footholds.push(new o(t))}$drawDebugInfo(t){if($gv.m_display_foothold){const e=t.ctx;e.lineJoin="round",e.lineCap="round";for(let e=0;e<this.footholds.length;++e){let i=this.footholds[e];null!=i&&(i.$showDebugInfo&&i.$drawDebugInfo(t))}}}$showDebugInfo(t,e,i,n){null==i&&(i=!0),null==n&&(n=!1);for(let s of this.footholds)s.layer==t&&s.group==e?s.$showDebugInfo=i:s.$showDebugInfo=n}$showDebugInfoByLayer(t,e,i){null==e&&(e=!0),null==i&&(i=!1);for(let n of this.footholds)n.layer==t?n.$showDebugInfo=e:n.$showDebugInfo=i}$hideAllDebugInfo(){for(let t of this.footholds)t.$showDebugInfo=!1}}a.Foothold=o},function(t,e,i){"use strict";i.d(e,"a",function(){return a});var n=i(3),s=(i(119),i(65),i(59));class r{constructor(t){this.l=null,this.uf=null,this.x=null,this.y1=null,this.y2=null,this.page=null,this.piece=null,Object.assign(this,t)}isLadder(){return!!this.l}}class o extends r{constructor(t){super(t),this.body=null}calcHeight(){return this.y2-this.y1}calcHalfHeight(){return.5*(this.y2-this.y1)}calcWidth(){return this.isLadder()?16:4}calcHalfWidth(){return.5*(this.isLadder()?16:4)}calcLength(){return(this.y2-this.y1)/$gv.CANVAS_SCALE}_create(t){let e=new n.b2BodyDef,i=new n.b2FixtureDef,r=new n.b2PolygonShape;const o=this.x/$gv.CANVAS_SCALE,a=this.y1/$gv.CANVAS_SCALE,l=this.y2/$gv.CANVAS_SCALE,c=this.calcHalfWidth()/$gv.CANVAS_SCALE,u=.5*(l-a);e.type=n.b2BodyType.b2_kinematicBody,e.position.Set(o,a),e.angle=0,e.gravityScale=0,e.fixedRotation=!0,e.userData=this,this.body=t.CreateBody(e),r.SetAsBox(c,u+.5,new n.b2Vec2(0,u-.5),0),i.shape=r,i.filter.Copy(s.FilterHelper.get("ladder")),i.isSensor=!0,i.userData=this;let h=this.body.CreateFixture(i);return h.beginContact=this.beginContact.bind(this),h.endContact=this.endContact.bind(this),this}beginContact(t,e,i){const n=i.m_userData;n&&(n.state.ladder||n.contactLadder(this))}endContact(t,e,i){const n=i.m_userData;n&&n.leaveLadder()}}class a{static load(t,e){let i=[];for(let n in t.ladderRope){let s=t.ladderRope[n],r=parseInt(n,10)-1;r>=0&&Number.isSafeInteger(r);let a=new o(s);a._$index=n,a._create(e),i.push(a)}return i}}},function(t,e,i){"use strict";i.d(e,"a",function(){return u});var n=i(65);i(47);window.$MobAction_Move_Priority=2,window.$MobAction_Jump_Priority=1;class s{constructor(t){this._name=null,this._ani=t}get priority(){return 1}init(){}isValid(t){return!0}update(t){}isEnd(t){return!!this._ani.isEnd()&&(this.onEnd(t),!0)}onEnd(t){}}class r extends s{constructor(t){super(t),this._name="stand"}update(t){t.ikey.left=0,t.ikey.right=0}}class o extends s{constructor(t){super(t),this._name="move",this.front=0}get priority(){return window.$MobAction_Move_Priority}isValid(t){return!t.action._name.startsWith("attack")}}class a extends o{constructor(t){super(t),this.front=-1}isValid(t){return super.isValid(t)&&(!t.state.jump||this.front==t.state.front)}update(t){t.ikey.left=1,t.ikey.right=0}}class l extends o{constructor(t){super(t),this.front=1}isValid(t){return super.isValid(t)&&(!t.state.jump||this.front==t.state.front)}update(t){t.ikey.left=0,t.ikey.right=1}}class c extends s{constructor(t){super(t),this._name="jump"}get priority(){return window.$MobAction_Jump_Priority}init(){}isValid(t){let e=t.action._name;switch(t.action._name){case"attack":return!1;default:if(e.startsWith("attack"))return!1}return!t.state.jump}update(t){t.state.walk&&(t.state.front<0?t.ikey.left=1:t.state.front>0&&(t.ikey.right=1)),t.ikey.jump=1}onEnd(t){t.ikey.jump=0}}class u extends n.b{constructor(t){super(),this.attackTarget=!0,this._enable_rx=!1,this.chara=t,t&&(t.renderer.isFlyMob()?this.setMovementSpeed(this._info.flySpeed):this.setMovementSpeed(this._info.speed)),this.activityRegion=null,this.$debugControl=!1,this.ikey={},this.actions=[],this.action=null}_registerAction(t){this.actions.push(t)}_loadAction(t,e){e=e||{stand:[r],move:[a,l],jump:[c]},Object.keys(t).forEach(i=>{if(t[i]&&e[i]){const n=e[i];for(let e of n){let n=new e(t[i]),s=n.priority;0;for(let t=0;t<s;++t)this._registerAction(n)}}else console.warn("未完成 MobActionController: "+i)}),this.action=this.actions[0],this.action}get _info(){return this.chara.renderer._raw.info}get hasBodyDamage(){return 0!=this._info.bodyAttack&&1!=this._info.bodyAttack&&alert("bodyAttack:"+this._info.bodyAttack),0!=this._info.bodyAttack}get _speed(){return this._info.speed}get _pushed(){return this._info.pushed}get _fs(){return this._info.fs}get _category(){return this._info.category}get _body_category(){return"mob"}_create(t){super._create(t),this.setPosition(this.chara.x/$gv.CANVAS_SCALE,this.chara.y/$gv.CANVAS_SCALE,!0),this._appleMobCategory(this._category)}_appleMobCategory(t){switch(t){case 1:case 6:this.__setAsWalkOnlyMob();break;case 8:this.__setAsJumpDropMob();break;default:this.__setAsWalkOnlyMob()}this.chara.front=this.chara.spawn.f?1:-1}__setAsWalkOnlyMob(){const t=this.body.GetWorld().ground,e=this.chara.spawn.fh;if(e>=0){let i=t.footholds[e];this.activityRegion=t.rectChains[i.chain]}}__setAsJumpDropMob(){}isCanMove(){return!(this._info.ignoreMoveImpact||0==this._walker_omega||this._info.noFlip)}control(){if(this.isCanMove()){switch(this._category){case 1:case 6:this._control_basic(!1);break;case 8:this._control_basic(!0);break;default:this._control_basic(!1)}super.control(this.ikey)}}_control_basic(t){if(this.action){if(this.action.isEnd(this)){let t=this.actions.filter(t=>t.isValid(this)),e=Math.trunc(100*Math.random())%t.length;this.action=t[e],this.action,this.action.init()}this.action.update(this)}}stop(){const t={};this.ikey=t,super.control(t)}Step(){let t,e,i;if(super.Step(),this.control(),this.attackTarget&&this.activityRegion?(t=this.activityRegion.left,e=this.activityRegion.right,i=!0):this._enable_rx||(t=this.chara.spawn.rx0,e=this.chara.spawn.rx1,i=!1),i){const i=this.body.GetPosition(),n=i.x*$gv.CANVAS_SCALE,s=(i.y,$gv.CANVAS_SCALE,n-e);if(t-n>0){const e=this.foot_walk.GetPosition();this.body.SetPositionXY(t/$gv.CANVAS_SCALE,i.y),this.foot_walk.SetPositionXY(t/$gv.CANVAS_SCALE,e.y)}else if(s>0){const t=this.foot_walk.GetPosition();this.body.SetPositionXY(e/$gv.CANVAS_SCALE,i.y),this.foot_walk.SetPositionXY(e/$gv.CANVAS_SCALE,t.y),this.attackTarget||(this.state.front*=-1)}}}AfterStep(){super.AfterStep();const t=this.getPosition(),e=t.x*$gv.CANVAS_SCALE,i=t.y*$gv.CANVAS_SCALE;this.chara.x=e,this.chara.y=i,this._info.noFlip||(this.chara.front=-this.state.front)}}},function(t,e,i){"use strict";i.r(e);var n,s=i(1),r=i(0);class o{constructor(t=.5,e=.5,i=.5,n=1){this.r=t,this.g=e,this.b=i,this.a=n}Clone(){return(new o).Copy(this)}Copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this}IsEqual(t){return this.r===t.r&&this.g===t.g&&this.b===t.b&&this.a===t.a}IsZero(){return 0===this.r&&0===this.g&&0===this.b&&0===this.a}GetColor(t){return t.Copy(this),t}SetColor(t){this.Copy(t)}Set(t,e,i,n=1){t instanceof o?this.Copy(t):this.SetRGBA(t,e,i,n)}SetByteRGB(t,e,i){return this.r=t/255,this.g=e/255,this.b=i/255,this}SetByteRGBA(t,e,i,n){return this.r=t/255,this.g=e/255,this.b=i/255,this.a=n/255,this}SetRGB(t,e,i){return this.r=t,this.g=e,this.b=i,this}SetRGBA(t,e,i,n){return this.r=t,this.g=e,this.b=i,this.a=n,this}SelfAdd(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this.a+=t.a,this}Add(t,e){return e.r=this.r+t.r,e.g=this.g+t.g,e.b=this.b+t.b,e.a=this.a+t.a,e}SelfSub(t){return this.r-=t.r,this.g-=t.g,this.b-=t.b,this.a-=t.a,this}Sub(t,e){return e.r=this.r-t.r,e.g=this.g-t.g,e.b=this.b-t.b,e.a=this.a-t.a,e}SelfMul_0_1(t){return this.r*=t,this.g*=t,this.b*=t,this.a*=t,this}Mul_0_1(t,e){return e.r=this.r*t,e.g=this.g*t,e.b=this.b*t,e.a=this.a*t,this}Mix(t,e){o.MixColors(this,t,e)}static MixColors(t,e,i){const n=i*(e.r-t.r),s=i*(e.g-t.g),r=i*(e.b-t.b),o=i*(e.a-t.a);t.r+=n,t.g+=s,t.b+=r,t.a+=o,e.r-=n,e.g-=s,e.b-=r,e.a-=o}MakeStyleString(t=this.a){return o.MakeStyleString(this.r,this.g,this.b,t)}static MakeStyleString(t,e,i,n=1){return t*=255,e*=255,i*=255,n<1?`rgba(${t},${e},${i},${n})`:`rgb(${t},${e},${i})`}}o.RED=new o(1,0,0),o.GREEN=new o(0,1,0),o.BLUE=new o(0,0,1),function(t){t[t.e_none=0]="e_none",t[t.e_shapeBit=1]="e_shapeBit",t[t.e_jointBit=2]="e_jointBit",t[t.e_aabbBit=4]="e_aabbBit",t[t.e_pairBit=8]="e_pairBit",t[t.e_centerOfMassBit=16]="e_centerOfMassBit",t[t.e_particleBit=32]="e_particleBit",t[t.e_controllerBit=64]="e_controllerBit",t[t.e_all=63]="e_all"}(n||(n={}));class a{constructor(){this.m_drawFlags=0}SetFlags(t){this.m_drawFlags=t}GetFlags(){return this.m_drawFlags}AppendFlags(t){this.m_drawFlags|=t}ClearFlags(t){this.m_drawFlags&=~t}PushTransform(t){}PopTransform(t){}DrawPolygon(t,e,i){}DrawSolidPolygon(t,e,i){}DrawCircle(t,e,i){}DrawSolidCircle(t,e,i,n){}DrawParticles(t,e,i,n){}DrawSegment(t,e,i){}DrawTransform(t){}}class l{constructor(){this.m_start=Date.now()}Reset(){return this.m_start=Date.now(),this}GetMilliseconds(){return Date.now()-this.m_start}}class c{constructor(){this.m_count=0,this.m_min_count=0,this.m_max_count=0}GetCount(){return this.m_count}GetMinCount(){return this.m_min_count}GetMaxCount(){return this.m_max_count}ResetCount(){const t=this.m_count;return this.m_count=0,t}ResetMinCount(){this.m_min_count=0}ResetMaxCount(){this.m_max_count=0}Increment(){this.m_count++,this.m_max_count<this.m_count&&(this.m_max_count=this.m_count)}Decrement(){this.m_count--,this.m_min_count>this.m_count&&(this.m_min_count=this.m_count)}}class u{constructor(t){this.m_stack=[],this.m_count=0,this.m_stack=[],this.m_count=0}Reset(){return this.m_count=0,this}Push(t){this.m_stack[this.m_count]=t,this.m_count++}Pop(){this.m_count--;const t=this.m_stack[this.m_count];return this.m_stack[this.m_count]=null,t}GetCount(){return this.m_count}}class h{}class d{}var m=i(5),p=i(60);function f(t){if(null===t)throw new Error;return t}class _{constructor(t=0){this.m_id=0,this.aabb=new m.a,this.userData=null,this.parent=null,this.child1=null,this.child2=null,this.height=0,this.m_id=t}IsLeaf(){return null===this.child1}}class g{constructor(){this.m_root=null,this.m_freeList=null,this.m_path=0,this.m_insertionCount=0}GetUserData(t){return t.userData}GetFatAABB(t){return t.aabb}Query(t,e){if(null===this.m_root)return;const i=g.s_stack.Reset();for(i.Push(this.m_root);i.GetCount()>0;){const n=i.Pop();if(null!==n&&n.aabb.TestOverlap(e))if(n.IsLeaf()){if(!t(n))return}else i.Push(n.child1),i.Push(n.child2)}}RayCast(t,e){if(null===this.m_root)return;const i=e.p1,n=e.p2,s=r.A.SubVV(n,i,g.s_r);s.Normalize();const o=r.A.CrossOneV(s,g.s_v),a=r.A.AbsV(o,g.s_abs_v);let l=e.maxFraction;const c=g.s_segmentAABB;let u=i.x+l*(n.x-i.x),h=i.y+l*(n.y-i.y);c.lowerBound.x=Object(r.n)(i.x,u),c.lowerBound.y=Object(r.n)(i.y,h),c.upperBound.x=Object(r.m)(i.x,u),c.upperBound.y=Object(r.m)(i.y,h);const d=g.s_stack.Reset();for(d.Push(this.m_root);d.GetCount()>0;){const s=d.Pop();if(null===s)continue;if(!Object(m.n)(s.aabb,c))continue;const p=s.aabb.GetCenter(),f=s.aabb.GetExtents();if(!(Object(r.a)(r.A.DotVV(o,r.A.SubVV(i,p,r.A.s_t0)))-r.A.DotVV(a,f)>0))if(s.IsLeaf()){const o=g.s_subInput;o.p1.Copy(e.p1),o.p2.Copy(e.p2),o.maxFraction=l;const a=t(o,s);if(0===a)return;a>0&&(l=a,u=i.x+l*(n.x-i.x),h=i.y+l*(n.y-i.y),c.lowerBound.x=Object(r.n)(i.x,u),c.lowerBound.y=Object(r.n)(i.y,h),c.upperBound.x=Object(r.m)(i.x,u),c.upperBound.y=Object(r.m)(i.y,h))}else d.Push(s.child1),d.Push(s.child2)}}AllocateNode(){if(this.m_freeList){const t=this.m_freeList;return this.m_freeList=t.parent,t.parent=null,t.child1=null,t.child2=null,t.height=0,t.userData=null,t}return new _(g.s_node_id++)}FreeNode(t){t.parent=this.m_freeList,t.child1=null,t.child2=null,t.height=-1,t.userData=null,this.m_freeList=t}CreateProxy(t,e){const i=this.AllocateNode(),n=s.k,r=s.k;return i.aabb.lowerBound.x=t.lowerBound.x-n,i.aabb.lowerBound.y=t.lowerBound.y-r,i.aabb.upperBound.x=t.upperBound.x+n,i.aabb.upperBound.y=t.upperBound.y+r,i.userData=e,i.height=0,this.InsertLeaf(i),i}DestroyProxy(t){this.RemoveLeaf(t),this.FreeNode(t)}MoveProxy(t,e,i){if(t.aabb.Contains(e))return!1;this.RemoveLeaf(t);const n=s.k+s.l*(i.x>0?i.x:-i.x),r=s.k+s.l*(i.y>0?i.y:-i.y);return t.aabb.lowerBound.x=e.lowerBound.x-n,t.aabb.lowerBound.y=e.lowerBound.y-r,t.aabb.upperBound.x=e.upperBound.x+n,t.aabb.upperBound.y=e.upperBound.y+r,this.InsertLeaf(t),!0}InsertLeaf(t){if(++this.m_insertionCount,null===this.m_root)return this.m_root=t,void(this.m_root.parent=null);const e=t.aabb;let i,n,s=this.m_root;for(;!s.IsLeaf();){i=s.child1,n=s.child2;const t=s.aabb.GetPerimeter(),r=g.s_combinedAABB;r.Combine2(s.aabb,e);const o=r.GetPerimeter(),a=2*o,l=2*(o-t);let c;const u=g.s_aabb;let h,d,m;if(i.IsLeaf()?(u.Combine2(e,i.aabb),c=u.GetPerimeter()+l):(u.Combine2(e,i.aabb),h=i.aabb.GetPerimeter(),c=(d=u.GetPerimeter())-h+l),n.IsLeaf()?(u.Combine2(e,n.aabb),m=u.GetPerimeter()+l):(u.Combine2(e,n.aabb),h=n.aabb.GetPerimeter(),m=(d=u.GetPerimeter())-h+l),a<c&&a<m)break;s=c<m?i:n}const o=s,a=o.parent,l=this.AllocateNode();for(l.parent=a,l.userData=null,l.aabb.Combine2(e,o.aabb),l.height=o.height+1,a?(a.child1===o?a.child1=l:a.child2=l,l.child1=o,l.child2=t,o.parent=l,t.parent=l):(l.child1=o,l.child2=t,o.parent=l,t.parent=l,this.m_root=l),s=t.parent;null!==s;)i=(s=this.Balance(s)).child1,n=s.child2,s.height=1+Object(r.m)(i.height,n.height),s.aabb.Combine2(i.aabb,n.aabb),s=s.parent}RemoveLeaf(t){if(t===this.m_root)return void(this.m_root=null);const e=t.parent,i=e&&e.parent;let n;if(n=e.child1===t?e.child2:e.child1,i){i.child1===e?i.child1=n:i.child2=n,n.parent=i,this.FreeNode(e);let t=i;for(;t;){const e=(t=this.Balance(t)).child1,i=t.child2;t.aabb.Combine2(e.aabb,i.aabb),t.height=1+Object(r.m)(e.height,i.height),t=t.parent}}else this.m_root=n,n.parent=null,this.FreeNode(e)}Balance(t){if(t.IsLeaf()||t.height<2)return t;const e=f(t.child1),i=f(t.child2),n=i.height-e.height;if(n>1){const n=f(i.child1),s=f(i.child2);return i.child1=t,i.parent=t.parent,t.parent=i,null!==i.parent?i.parent.child1===t?i.parent.child1=i:i.parent.child2=i:this.m_root=i,n.height>s.height?(i.child2=n,t.child2=s,s.parent=t,t.aabb.Combine2(e.aabb,s.aabb),i.aabb.Combine2(t.aabb,n.aabb),t.height=1+Object(r.m)(e.height,s.height),i.height=1+Object(r.m)(t.height,n.height)):(i.child2=s,t.child2=n,n.parent=t,t.aabb.Combine2(e.aabb,n.aabb),i.aabb.Combine2(t.aabb,s.aabb),t.height=1+Object(r.m)(e.height,n.height),i.height=1+Object(r.m)(t.height,s.height)),i}if(n<-1){const n=f(e.child1),s=f(e.child2);return e.child1=t,e.parent=t.parent,t.parent=e,null!==e.parent?e.parent.child1===t?e.parent.child1=e:e.parent.child2=e:this.m_root=e,n.height>s.height?(e.child2=n,t.child1=s,s.parent=t,t.aabb.Combine2(i.aabb,s.aabb),e.aabb.Combine2(t.aabb,n.aabb),t.height=1+Object(r.m)(i.height,s.height),e.height=1+Object(r.m)(t.height,n.height)):(e.child2=s,t.child1=n,n.parent=t,t.aabb.Combine2(i.aabb,n.aabb),e.aabb.Combine2(t.aabb,s.aabb),t.height=1+Object(r.m)(i.height,n.height),e.height=1+Object(r.m)(t.height,s.height)),e}return t}GetHeight(){return null===this.m_root?0:this.m_root.height}static GetAreaNode(t){if(null===t)return 0;if(t.IsLeaf())return 0;let e=t.aabb.GetPerimeter();return e+=g.GetAreaNode(t.child1),e+=g.GetAreaNode(t.child2)}GetAreaRatio(){if(null===this.m_root)return 0;const t=this.m_root.aabb.GetPerimeter();return g.GetAreaNode(this.m_root)/t}ComputeHeightNode(t){if(t.IsLeaf())return 0;const e=this.ComputeHeightNode(t.child1),i=this.ComputeHeightNode(t.child2);return 1+Object(r.m)(e,i)}ComputeHeight(){return this.ComputeHeightNode(this.m_root)}ValidateStructure(t){if(null===t)return;this.m_root;const e=t,i=e.child1,n=e.child2;e.IsLeaf()||(this.ValidateStructure(i),this.ValidateStructure(n))}ValidateMetrics(t){if(null===t)return;const e=t,i=e.child1,n=e.child2;e.IsLeaf()||(g.s_aabb.Combine2(i.aabb,n.aabb),this.ValidateMetrics(i),this.ValidateMetrics(n))}Validate(){this.ValidateStructure(this.m_root),this.ValidateMetrics(this.m_root);let t=this.m_freeList;for(;null!==t;)t=t.parent}static GetMaxBalanceNode(t,e){if(null===t)return e;if(t.height<=1)return e;const i=t.child1,n=t.child2,s=Object(r.a)(n.height-i.height);return Object(r.m)(e,s)}GetMaxBalance(){return g.GetMaxBalanceNode(this.m_root,0)}RebuildBottomUp(){this.Validate()}static ShiftOriginNode(t,e){if(null===t)return;if(t.height<=1)return;const i=t.child1,n=t.child2;g.ShiftOriginNode(i,e),g.ShiftOriginNode(n,e),t.aabb.lowerBound.SelfSub(e),t.aabb.upperBound.SelfSub(e)}ShiftOrigin(t){g.ShiftOriginNode(this.m_root,t)}}g.s_stack=new u(256),g.s_r=new r.A,g.s_v=new r.A,g.s_abs_v=new r.A,g.s_segmentAABB=new m.a,g.s_subInput=new m.l,g.s_combinedAABB=new m.a,g.s_aabb=new m.a,g.s_node_id=0;class v{constructor(){this.proxyA=null,this.proxyB=null}}class y{constructor(){this.m_tree=new g,this.m_proxyCount=0,this.m_moveCount=0,this.m_moveBuffer=[],this.m_pairCount=0,this.m_pairBuffer=[]}CreateProxy(t,e){const i=this.m_tree.CreateProxy(t,e);return++this.m_proxyCount,this.BufferMove(i),i}DestroyProxy(t){this.UnBufferMove(t),--this.m_proxyCount,this.m_tree.DestroyProxy(t)}MoveProxy(t,e,i){this.m_tree.MoveProxy(t,e,i)&&this.BufferMove(t)}TouchProxy(t){this.BufferMove(t)}GetFatAABB(t){return this.m_tree.GetFatAABB(t)}GetUserData(t){return this.m_tree.GetUserData(t)}TestOverlap(t,e){const i=this.m_tree.GetFatAABB(t),n=this.m_tree.GetFatAABB(e);return Object(m.n)(i,n)}GetProxyCount(){return this.m_proxyCount}UpdatePairs(t){this.m_pairCount=0;for(let t=0;t<this.m_moveCount;++t){const e=this.m_moveBuffer[t];if(null===e)continue;const i=t=>{if(t.m_id===e.m_id)return!0;this.m_pairCount===this.m_pairBuffer.length&&(this.m_pairBuffer[this.m_pairCount]=new v);const i=this.m_pairBuffer[this.m_pairCount];return t.m_id<e.m_id?(i.proxyA=t,i.proxyB=e):(i.proxyA=e,i.proxyB=t),++this.m_pairCount,!0},n=this.m_tree.GetFatAABB(e);this.m_tree.Query(i,n)}this.m_moveCount=0,this.m_pairBuffer.length=this.m_pairCount,this.m_pairBuffer.sort(x);let e=0;for(;e<this.m_pairCount;){const i=this.m_pairBuffer[e],n=this.m_tree.GetUserData(i.proxyA),s=this.m_tree.GetUserData(i.proxyB);for(t.AddPair(n,s),++e;e<this.m_pairCount;){const t=this.m_pairBuffer[e];if(t.proxyA.m_id!==i.proxyA.m_id||t.proxyB.m_id!==i.proxyB.m_id)break;++e}}}Query(t,e){this.m_tree.Query(t,e)}RayCast(t,e){this.m_tree.RayCast(t,e)}GetTreeHeight(){return this.m_tree.GetHeight()}GetTreeBalance(){return this.m_tree.GetMaxBalance()}GetTreeQuality(){return this.m_tree.GetAreaRatio()}ShiftOrigin(t){this.m_tree.ShiftOrigin(t)}BufferMove(t){this.m_moveBuffer[this.m_moveCount]=t,++this.m_moveCount}UnBufferMove(t){const e=this.m_moveBuffer.indexOf(t);this.m_moveBuffer[e]=null}}function x(t,e){return t.proxyA.m_id===e.proxyA.m_id?t.proxyB.m_id-e.proxyB.m_id:t.proxyA.m_id-e.proxyA.m_id}let b=0,A=0,w=0,S=0,C=0,B=0,V=0;function M(){b=0,A=0,w=0,S=0,C=0,B=0,V=0}const k=new r.z,P=new r.z,I=new r.A,D=new r.A,T=new r.A,E=new r.A,$=new r.A;class L{constructor(){this.proxyA=new p.d,this.proxyB=new p.d,this.sweepA=new r.y,this.sweepB=new r.y,this.tMax=0}}var R,F;!function(t){t[t.e_unknown=0]="e_unknown",t[t.e_failed=1]="e_failed",t[t.e_overlapped=2]="e_overlapped",t[t.e_touching=3]="e_touching",t[t.e_separated=4]="e_separated"}(R||(R={}));class O{constructor(){this.state=R.e_unknown,this.t=0}}!function(t){t[t.e_unknown=-1]="e_unknown",t[t.e_points=0]="e_points",t[t.e_faceA=1]="e_faceA",t[t.e_faceB=2]="e_faceB"}(F||(F={}));class j{constructor(){this.m_sweepA=new r.y,this.m_sweepB=new r.y,this.m_type=F.e_unknown,this.m_localPoint=new r.A,this.m_axis=new r.A}Initialize(t,e,i,n,s,o){this.m_proxyA=e,this.m_proxyB=n;const a=t.count;this.m_sweepA.Copy(i),this.m_sweepB.Copy(s);const l=k,c=P;if(this.m_sweepA.GetTransform(l,o),this.m_sweepB.GetTransform(c,o),1===a){this.m_type=F.e_points;const e=this.m_proxyA.GetVertex(t.indexA[0]),i=this.m_proxyB.GetVertex(t.indexB[0]),n=r.z.MulXV(l,e,I),s=r.z.MulXV(c,i,D);r.A.SubVV(s,n,this.m_axis);const o=this.m_axis.Normalize();return this.m_localPoint.SetZero(),o}if(t.indexA[0]===t.indexA[1]){this.m_type=F.e_faceB;const e=this.m_proxyB.GetVertex(t.indexB[0]),i=this.m_proxyB.GetVertex(t.indexB[1]);r.A.CrossVOne(r.A.SubVV(i,e,r.A.s_t0),this.m_axis).SelfNormalize();const n=r.t.MulRV(c.q,this.m_axis,T);r.A.MidVV(e,i,this.m_localPoint);const s=r.z.MulXV(c,this.m_localPoint,D),o=this.m_proxyA.GetVertex(t.indexA[0]),a=r.z.MulXV(l,o,I);let u=r.A.DotVV(r.A.SubVV(a,s,r.A.s_t0),n);return u<0&&(this.m_axis.SelfNeg(),u=-u),u}{this.m_type=F.e_faceA;const e=this.m_proxyA.GetVertex(t.indexA[0]),i=this.m_proxyA.GetVertex(t.indexA[1]);r.A.CrossVOne(r.A.SubVV(i,e,r.A.s_t0),this.m_axis).SelfNormalize();const n=r.t.MulRV(l.q,this.m_axis,T);r.A.MidVV(e,i,this.m_localPoint);const s=r.z.MulXV(l,this.m_localPoint,I),o=this.m_proxyB.GetVertex(t.indexB[0]),a=r.z.MulXV(c,o,D);let u=r.A.DotVV(r.A.SubVV(a,s,r.A.s_t0),n);return u<0&&(this.m_axis.SelfNeg(),u=-u),u}}FindMinSeparation(t,e,i){const n=k,s=P;switch(this.m_sweepA.GetTransform(n,i),this.m_sweepB.GetTransform(s,i),this.m_type){case F.e_points:{const i=r.t.MulTRV(n.q,this.m_axis,E),o=r.t.MulTRV(s.q,r.A.NegV(this.m_axis,r.A.s_t0),$);t[0]=this.m_proxyA.GetSupport(i),e[0]=this.m_proxyB.GetSupport(o);const a=this.m_proxyA.GetVertex(t[0]),l=this.m_proxyB.GetVertex(e[0]),c=r.z.MulXV(n,a,I),u=r.z.MulXV(s,l,D);return r.A.DotVV(r.A.SubVV(u,c,r.A.s_t0),this.m_axis)}case F.e_faceA:{const i=r.t.MulRV(n.q,this.m_axis,T),o=r.z.MulXV(n,this.m_localPoint,I),a=r.t.MulTRV(s.q,r.A.NegV(i,r.A.s_t0),$);t[0]=-1,e[0]=this.m_proxyB.GetSupport(a);const l=this.m_proxyB.GetVertex(e[0]),c=r.z.MulXV(s,l,D);return r.A.DotVV(r.A.SubVV(c,o,r.A.s_t0),i)}case F.e_faceB:{const i=r.t.MulRV(s.q,this.m_axis,T),o=r.z.MulXV(s,this.m_localPoint,D),a=r.t.MulTRV(n.q,r.A.NegV(i,r.A.s_t0),E);e[0]=-1,t[0]=this.m_proxyA.GetSupport(a);const l=this.m_proxyA.GetVertex(t[0]),c=r.z.MulXV(n,l,I);return r.A.DotVV(r.A.SubVV(c,o,r.A.s_t0),i)}default:return t[0]=-1,e[0]=-1,0}}Evaluate(t,e,i){const n=k,s=P;switch(this.m_sweepA.GetTransform(n,i),this.m_sweepB.GetTransform(s,i),this.m_type){case F.e_points:{const i=this.m_proxyA.GetVertex(t),o=this.m_proxyB.GetVertex(e),a=r.z.MulXV(n,i,I),l=r.z.MulXV(s,o,D);return r.A.DotVV(r.A.SubVV(l,a,r.A.s_t0),this.m_axis)}case F.e_faceA:{const t=r.t.MulRV(n.q,this.m_axis,T),i=r.z.MulXV(n,this.m_localPoint,I),o=this.m_proxyB.GetVertex(e),a=r.z.MulXV(s,o,D);return r.A.DotVV(r.A.SubVV(a,i,r.A.s_t0),t)}case F.e_faceB:{const e=r.t.MulRV(s.q,this.m_axis,T),i=r.z.MulXV(s,this.m_localPoint,D),o=this.m_proxyA.GetVertex(t),a=r.z.MulXV(n,o,I);return r.A.DotVV(r.A.SubVV(a,i,r.A.s_t0),e)}default:return 0}}}const G=new l,N=new p.f,q=new p.b,z=new p.c,H=new j,U=[0],W=[0],J=new r.y,Y=new r.y;function X(t,e){const i=G.Reset();++w,t.state=R.e_unknown,t.t=e.tMax;const n=e.proxyA,o=e.proxyB,a=J.Copy(e.sweepA),l=Y.Copy(e.sweepB);a.Normalize(),l.Normalize();const c=e.tMax,u=n.m_radius+o.m_radius,h=Object(r.m)(s.v,u-3*s.v),d=.25*s.v;let m=0;let f=0;const _=N;_.count=0;const g=q;for(g.proxyA=e.proxyA,g.proxyB=e.proxyB,g.useRadii=!1;;){const e=k,i=P;a.GetTransform(e,m),l.GetTransform(i,m),g.transformA.Copy(e),g.transformB.Copy(i);const u=z;if(Object(p.a)(u,_,g),u.distance<=0){t.state=R.e_overlapped,t.t=0;break}if(u.distance<h+d){t.state=R.e_touching,t.t=m;break}const v=H;v.Initialize(_,n,a,o,l,m);let y=!1,x=c,b=0;for(;;){const e=U,i=W;let n=v.FindMinSeparation(e,i,x);if(n>h+d){t.state=R.e_separated,t.t=c,y=!0;break}if(n>h-d){m=x;break}let o=v.Evaluate(e[0],i[0],m);if(o<h-d){t.state=R.e_failed,t.t=m,y=!0;break}if(o<=h+d){t.state=R.e_touching,t.t=m,y=!0;break}let a=0,l=m,u=x;for(;;){let t=0;t=1&a?l+(h-o)*(u-l)/(n-o):.5*(l+u),++a,++B;const s=v.Evaluate(e[0],i[0],t);if(Object(r.a)(s-h)<d){x=t;break}if(s>h?(l=t,o=s):(u=t,n=s),50===a)break}if(V=Object(r.m)(V,a),++b===s.D)break}if(++f,++S,y)break;if(20===f){t.state=R.e_failed,t.t=m;break}}C=Object(r.m)(C,f);const v=i.GetMilliseconds();A=Object(r.m)(A,v),b+=v}const Q=new r.A,Z=new r.A;function K(t,e,i,n,s){t.pointCount=0;const o=r.z.MulXV(i,e.m_p,Q),a=r.z.MulXV(s,n.m_p,Z),l=r.A.DistanceSquaredVV(o,a),c=e.m_radius+n.m_radius;l>c*c||(t.type=m.j.e_circles,t.localPoint.Copy(e.m_p),t.localNormal.SetZero(),t.pointCount=1,t.points[0].localPoint.Copy(n.m_p),t.points[0].id.key=0)}const tt=new r.A,et=new r.A,it=new r.A;function nt(t,e,i,n,o){t.pointCount=0;const a=r.z.MulXV(o,n.m_p,tt),l=r.z.MulTXV(i,a,et);let c=0,u=-s.x;const h=e.m_radius+n.m_radius,d=e.m_count,p=e.m_vertices,f=e.m_normals;for(let t=0;t<d;++t){const e=r.A.DotVV(f[t],r.A.SubVV(l,p[t],r.A.s_t0));if(e>h)return;e>u&&(u=e,c=t)}const _=c,g=(_+1)%d,v=p[_],y=p[g];if(u<s.r)return t.pointCount=1,t.type=m.j.e_faceA,t.localNormal.Copy(f[c]),r.A.MidVV(v,y,t.localPoint),t.points[0].localPoint.Copy(n.m_p),void(t.points[0].id.key=0);const x=r.A.DotVV(r.A.SubVV(l,v,r.A.s_t0),r.A.SubVV(y,v,r.A.s_t1)),b=r.A.DotVV(r.A.SubVV(l,y,r.A.s_t0),r.A.SubVV(v,y,r.A.s_t1));if(x<=0){if(r.A.DistanceSquaredVV(l,v)>h*h)return;t.pointCount=1,t.type=m.j.e_faceA,r.A.SubVV(l,v,t.localNormal).SelfNormalize(),t.localPoint.Copy(v),t.points[0].localPoint.Copy(n.m_p),t.points[0].id.key=0}else if(b<=0){if(r.A.DistanceSquaredVV(l,y)>h*h)return;t.pointCount=1,t.type=m.j.e_faceA,r.A.SubVV(l,y,t.localNormal).SelfNormalize(),t.localPoint.Copy(y),t.points[0].localPoint.Copy(n.m_p),t.points[0].id.key=0}else{const e=r.A.MidVV(v,y,it);if((u=r.A.DotVV(r.A.SubVV(l,e,r.A.s_t1),f[_]))>h)return;t.pointCount=1,t.type=m.j.e_faceA,t.localNormal.Copy(f[_]).SelfNormalize(),t.localPoint.Copy(e),t.points[0].localPoint.Copy(n.m_p),t.points[0].id.key=0}}const st=new r.A,rt=new r.A,ot=new r.A,at=new r.A;function lt(t,e,i,n,o){const a=t.m_vertices,l=t.m_normals,c=n.m_count,u=n.m_vertices,h=r.t.MulRV(e.q,l[i],st),d=r.t.MulTRV(o.q,h,rt);let m=0,p=s.x;for(let t=0;t<c;++t){const e=r.A.DotVV(u[t],d);e<p&&(p=e,m=t)}const f=r.z.MulXV(e,a[i],ot),_=r.z.MulXV(o,u[m],at);return r.A.DotVV(r.A.SubVV(_,f,r.A.s_t0),h)}const ct=new r.A,ut=new r.A;function ht(t,e,i,n,o){const a=e.m_count,l=e.m_normals,c=r.A.SubVV(r.z.MulXV(o,n.m_centroid,r.A.s_t0),r.z.MulXV(i,e.m_centroid,r.A.s_t1),ct),u=r.t.MulTRV(i.q,c,ut);let h=0,d=-s.x;for(let t=0;t<a;++t){const e=r.A.DotVV(l[t],u);e>d&&(d=e,h=t)}let m=lt(e,i,h,n,o);const p=(h+a-1)%a,f=lt(e,i,p,n,o),_=(h+1)%a,g=lt(e,i,_,n,o);let v=0,y=0,x=0;if(f>m&&f>g)x=-1,v=p,y=f;else{if(!(g>m))return t[0]=h,m;x=1,v=_,y=g}for(;(m=lt(e,i,h=-1===x?(v+a-1)%a:(v+1)%a,n,o))>y;)v=h,y=m;return t[0]=v,y}const dt=new r.A;const mt=m.c.MakeArray(2),pt=m.c.MakeArray(2),ft=m.c.MakeArray(2),_t=[0],gt=[0],vt=new r.A,yt=new r.A,xt=new r.A,bt=new r.A,At=new r.A,wt=new r.A,St=new r.A,Ct=new r.A;function Bt(t,e,i,n,o){t.pointCount=0;const a=e.m_radius+n.m_radius,l=_t;l[0]=0;const c=ht(l,e,i,n,o);if(c>a)return;const u=gt;u[0]=0;const h=ht(u,n,o,e,i);if(h>a)return;let d,p,f,_,g=0,v=0;h>.98*c+.001?(d=n,p=e,f=o,_=i,g=u[0],t.type=m.j.e_faceB,v=1):(d=e,p=n,f=i,_=o,g=l[0],t.type=m.j.e_faceA,v=0);const y=mt;!function(t,e,i,n,o,a){const l=e.m_normals,c=o.m_count,u=o.m_vertices,h=o.m_normals,d=r.t.MulTRV(a.q,r.t.MulRV(i.q,l[n],r.A.s_t0),dt);let p=0,f=s.x;for(let t=0;t<c;++t){const e=r.A.DotVV(d,h[t]);e<f&&(f=e,p=t)}const _=p,g=(_+1)%c,v=t[0];r.z.MulXV(a,u[_],v.v);const y=v.id.cf;y.indexA=n,y.indexB=_,y.typeA=m.e.e_face,y.typeB=m.e.e_vertex;const x=t[1];r.z.MulXV(a,u[g],x.v);const b=x.id.cf;b.indexA=n,b.indexB=g,b.typeA=m.e.e_face,b.typeB=m.e.e_vertex}(y,d,f,g,p,_);const x=d.m_count,b=d.m_vertices,A=g,w=(g+1)%x,S=b[A],C=b[w],B=r.A.SubVV(C,S,vt);B.Normalize();const V=r.A.CrossVOne(B,yt),M=r.A.MidVV(S,C,xt),k=r.t.MulRV(f.q,B,At),P=r.A.CrossVOne(k,bt),I=r.z.MulXV(f,S,St),D=r.z.MulXV(f,C,Ct),T=r.A.DotVV(P,I),E=-r.A.DotVV(k,I)+a,$=r.A.DotVV(k,D)+a,L=pt,R=ft;let F;const O=r.A.NegV(k,wt);if((F=Object(m.b)(L,y,O,E,A))<2)return;if((F=Object(m.b)(R,L,k,$,w))<2)return;t.localNormal.Copy(V),t.localPoint.Copy(M);let j=0;for(let e=0;e<s.z;++e){const i=R[e];if(r.A.DotVV(P,i.v)-T<=a){const e=t.points[j];if(r.z.MulTXV(_,i.v,e.localPoint),e.id.Copy(i.id),v){const t=e.id.cf;e.id.cf.indexA=t.indexB,e.id.cf.indexB=t.indexA,e.id.cf.typeA=t.typeB,e.id.cf.typeB=t.typeA}++j}}t.pointCount=j}const Vt=new r.A,Mt=new r.A,kt=new r.A,Pt=new r.A,It=new r.A,Dt=new r.A,Tt=new r.A,Et=new m.f;function $t(t,e,i,n,s){t.pointCount=0;const o=r.z.MulTXV(i,r.z.MulXV(s,n.m_p,r.A.s_t0),Vt),a=e.m_vertex1,l=e.m_vertex2,c=r.A.SubVV(l,a,Mt),u=r.A.DotVV(c,r.A.SubVV(l,o,r.A.s_t0)),h=r.A.DotVV(c,r.A.SubVV(o,a,r.A.s_t0)),d=e.m_radius+n.m_radius,p=Et;if(p.cf.indexB=0,p.cf.typeB=m.e.e_vertex,h<=0){const i=a,s=r.A.SubVV(o,i,kt);if(r.A.DotVV(s,s)>d*d)return;if(e.m_hasVertex0){const t=e.m_vertex0,i=a,n=r.A.SubVV(i,t,Pt);if(r.A.DotVV(n,r.A.SubVV(i,o,r.A.s_t0))>0)return}return p.cf.indexA=0,p.cf.typeA=m.e.e_vertex,t.pointCount=1,t.type=m.j.e_circles,t.localNormal.SetZero(),t.localPoint.Copy(i),t.points[0].id.Copy(p),void t.points[0].localPoint.Copy(n.m_p)}if(u<=0){const i=l,s=r.A.SubVV(o,i,kt);if(r.A.DotVV(s,s)>d*d)return;if(e.m_hasVertex3){const t=e.m_vertex3,i=l,n=r.A.SubVV(t,i,It);if(r.A.DotVV(n,r.A.SubVV(o,i,r.A.s_t0))>0)return}return p.cf.indexA=1,p.cf.typeA=m.e.e_vertex,t.pointCount=1,t.type=m.j.e_circles,t.localNormal.SetZero(),t.localPoint.Copy(i),t.points[0].id.Copy(p),void t.points[0].localPoint.Copy(n.m_p)}const f=r.A.DotVV(c,c),_=Dt;_.x=1/f*(u*a.x+h*l.x),_.y=1/f*(u*a.y+h*l.y);const g=r.A.SubVV(o,_,kt);if(r.A.DotVV(g,g)>d*d)return;const v=Tt.Set(-c.y,c.x);r.A.DotVV(v,r.A.SubVV(o,a,r.A.s_t0))<0&&v.Set(-v.x,-v.y),v.Normalize(),p.cf.indexA=0,p.cf.typeA=m.e.e_face,t.pointCount=1,t.type=m.j.e_faceA,t.localNormal.Copy(v),t.localPoint.Copy(a),t.points[0].id.Copy(p),t.points[0].localPoint.Copy(n.m_p)}class Lt{constructor(){this.type=0,this.index=0,this.separation=0}}class Rt{constructor(){this.vertices=r.A.MakeArray(s.D),this.normals=r.A.MakeArray(s.D),this.count=0}}class Ft{constructor(){this.m_polygonB=new Rt,this.m_xf=new r.z,this.m_centroidB=new r.A,this.m_v0=new r.A,this.m_v1=new r.A,this.m_v2=new r.A,this.m_v3=new r.A,this.m_normal0=new r.A,this.m_normal1=new r.A,this.m_normal2=new r.A,this.m_normal=new r.A,this.m_type1=0,this.m_type2=0,this.m_lowerLimit=new r.A,this.m_upperLimit=new r.A,this.m_radius=0,this.m_front=!1}Collide(t,e,i,n,o){r.z.MulTXX(i,o,this.m_xf),r.z.MulXV(this.m_xf,n.m_centroid,this.m_centroidB),this.m_v0.Copy(e.m_vertex0),this.m_v1.Copy(e.m_vertex1),this.m_v2.Copy(e.m_vertex2),this.m_v3.Copy(e.m_vertex3);const a=e.m_hasVertex0,l=e.m_hasVertex3,c=r.A.SubVV(this.m_v2,this.m_v1,Ft.s_edge1);c.Normalize(),this.m_normal1.Set(c.y,-c.x);const u=r.A.DotVV(this.m_normal1,r.A.SubVV(this.m_centroidB,this.m_v1,r.A.s_t0));let h=0,d=0,p=!1,f=!1;if(a){const t=r.A.SubVV(this.m_v1,this.m_v0,Ft.s_edge0);t.Normalize(),this.m_normal0.Set(t.y,-t.x),p=r.A.CrossVV(t,c)>=0,h=r.A.DotVV(this.m_normal0,r.A.SubVV(this.m_centroidB,this.m_v0,r.A.s_t0))}if(l){const t=r.A.SubVV(this.m_v3,this.m_v2,Ft.s_edge2);t.Normalize(),this.m_normal2.Set(t.y,-t.x),f=r.A.CrossVV(c,t)>0,d=r.A.DotVV(this.m_normal2,r.A.SubVV(this.m_centroidB,this.m_v2,r.A.s_t0))}a&&l?p&&f?(this.m_front=h>=0||u>=0||d>=0,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal0),this.m_upperLimit.Copy(this.m_normal2)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1).SelfNeg())):p?(this.m_front=h>=0||u>=0&&d>=0,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal0),this.m_upperLimit.Copy(this.m_normal1)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal2).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1).SelfNeg())):f?(this.m_front=d>=0||h>=0&&u>=0,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal2)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal0).SelfNeg())):(this.m_front=h>=0&&u>=0&&d>=0,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal1)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal2).SelfNeg(),this.m_upperLimit.Copy(this.m_normal0).SelfNeg())):a?p?(this.m_front=h>=0||u>=0,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal0),this.m_upperLimit.Copy(this.m_normal1).SelfNeg()):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal1).SelfNeg())):(this.m_front=h>=0&&u>=0,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal1).SelfNeg()):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal0).SelfNeg())):l?f?(this.m_front=u>=0||d>=0,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal2)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1))):(this.m_front=u>=0&&d>=0,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1)):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal2).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1))):(this.m_front=u>=0,this.m_front?(this.m_normal.Copy(this.m_normal1),this.m_lowerLimit.Copy(this.m_normal1).SelfNeg(),this.m_upperLimit.Copy(this.m_normal1).SelfNeg()):(this.m_normal.Copy(this.m_normal1).SelfNeg(),this.m_lowerLimit.Copy(this.m_normal1),this.m_upperLimit.Copy(this.m_normal1))),this.m_polygonB.count=n.m_count;for(let t=0;t<n.m_count;++t)r.z.MulXV(this.m_xf,n.m_vertices[t],this.m_polygonB.vertices[t]),r.t.MulRV(this.m_xf.q,n.m_normals[t],this.m_polygonB.normals[t]);this.m_radius=2*s.Q,t.pointCount=0;const _=this.ComputeEdgeSeparation(Ft.s_edgeAxis);if(0===_.type)return;if(_.separation>this.m_radius)return;const g=this.ComputePolygonSeparation(Ft.s_polygonAxis);if(0!==g.type&&g.separation>this.m_radius)return;let v;v=0===g.type?_:g.separation>.98*_.separation+.001?g:_;const y=Ft.s_ie,x=Ft.s_rf;if(1===v.type){t.type=m.j.e_faceA;let e=0,i=r.A.DotVV(this.m_normal,this.m_polygonB.normals[0]);for(let t=1;t<this.m_polygonB.count;++t){const n=r.A.DotVV(this.m_normal,this.m_polygonB.normals[t]);n<i&&(i=n,e=t)}const n=e,s=(n+1)%this.m_polygonB.count,o=y[0];o.v.Copy(this.m_polygonB.vertices[n]),o.id.cf.indexA=0,o.id.cf.indexB=n,o.id.cf.typeA=m.e.e_face,o.id.cf.typeB=m.e.e_vertex;const a=y[1];a.v.Copy(this.m_polygonB.vertices[s]),a.id.cf.indexA=0,a.id.cf.indexB=s,a.id.cf.typeA=m.e.e_face,a.id.cf.typeB=m.e.e_vertex,this.m_front?(x.i1=0,x.i2=1,x.v1.Copy(this.m_v1),x.v2.Copy(this.m_v2),x.normal.Copy(this.m_normal1)):(x.i1=1,x.i2=0,x.v1.Copy(this.m_v2),x.v2.Copy(this.m_v1),x.normal.Copy(this.m_normal1).SelfNeg())}else{t.type=m.j.e_faceB;const e=y[0];e.v.Copy(this.m_v1),e.id.cf.indexA=0,e.id.cf.indexB=v.index,e.id.cf.typeA=m.e.e_vertex,e.id.cf.typeB=m.e.e_face;const i=y[1];i.v.Copy(this.m_v2),i.id.cf.indexA=0,i.id.cf.indexB=v.index,i.id.cf.typeA=m.e.e_vertex,i.id.cf.typeB=m.e.e_face,x.i1=v.index,x.i2=(x.i1+1)%this.m_polygonB.count,x.v1.Copy(this.m_polygonB.vertices[x.i1]),x.v2.Copy(this.m_polygonB.vertices[x.i2]),x.normal.Copy(this.m_polygonB.normals[x.i1])}x.sideNormal1.Set(x.normal.y,-x.normal.x),x.sideNormal2.Copy(x.sideNormal1).SelfNeg(),x.sideOffset1=r.A.DotVV(x.sideNormal1,x.v1),x.sideOffset2=r.A.DotVV(x.sideNormal2,x.v2);const b=Ft.s_clipPoints1,A=Ft.s_clipPoints2;let w=0;if((w=Object(m.b)(b,y,x.sideNormal1,x.sideOffset1,x.i1))<s.z)return;if((w=Object(m.b)(A,b,x.sideNormal2,x.sideOffset2,x.i2))<s.z)return;1===v.type?(t.localNormal.Copy(x.normal),t.localPoint.Copy(x.v1)):(t.localNormal.Copy(n.m_normals[x.i1]),t.localPoint.Copy(n.m_vertices[x.i1]));let S=0;for(let e=0;e<s.z;++e){let i;if((i=r.A.DotVV(x.normal,r.A.SubVV(A[e].v,x.v1,r.A.s_t0)))<=this.m_radius){const i=t.points[S];1===v.type?(r.z.MulTXV(this.m_xf,A[e].v,i.localPoint),i.id=A[e].id):(i.localPoint.Copy(A[e].v),i.id.cf.typeA=A[e].id.cf.typeB,i.id.cf.typeB=A[e].id.cf.typeA,i.id.cf.indexA=A[e].id.cf.indexB,i.id.cf.indexB=A[e].id.cf.indexA),++S}}t.pointCount=S}ComputeEdgeSeparation(t){const e=t;e.type=1,e.index=this.m_front?0:1,e.separation=s.x;for(let t=0;t<this.m_polygonB.count;++t){const i=r.A.DotVV(this.m_normal,r.A.SubVV(this.m_polygonB.vertices[t],this.m_v1,r.A.s_t0));i<e.separation&&(e.separation=i)}return e}ComputePolygonSeparation(t){const e=t;e.type=0,e.index=-1,e.separation=-s.x;const i=Ft.s_perp.Set(-this.m_normal.y,this.m_normal.x);for(let t=0;t<this.m_polygonB.count;++t){const n=r.A.NegV(this.m_polygonB.normals[t],Ft.s_n),o=r.A.DotVV(n,r.A.SubVV(this.m_polygonB.vertices[t],this.m_v1,r.A.s_t0)),a=r.A.DotVV(n,r.A.SubVV(this.m_polygonB.vertices[t],this.m_v2,r.A.s_t0)),l=Object(r.n)(o,a);if(l>this.m_radius)return e.type=2,e.index=t,e.separation=l,e;if(r.A.DotVV(n,i)>=0){if(r.A.DotVV(r.A.SubVV(n,this.m_upperLimit,r.A.s_t0),this.m_normal)<-s.n)continue}else if(r.A.DotVV(r.A.SubVV(n,this.m_lowerLimit,r.A.s_t0),this.m_normal)<-s.n)continue;l>e.separation&&(e.type=2,e.index=t,e.separation=l)}return e}}Ft.s_edge1=new r.A,Ft.s_edge0=new r.A,Ft.s_edge2=new r.A,Ft.s_ie=m.c.MakeArray(2),Ft.s_rf=new class{constructor(){this.i1=0,this.i2=0,this.v1=new r.A,this.v2=new r.A,this.normal=new r.A,this.sideNormal1=new r.A,this.sideOffset1=0,this.sideNormal2=new r.A,this.sideOffset2=0}},Ft.s_clipPoints1=m.c.MakeArray(2),Ft.s_clipPoints2=m.c.MakeArray(2),Ft.s_edgeAxis=new Lt,Ft.s_polygonAxis=new Lt,Ft.s_n=new r.A,Ft.s_perp=new r.A;const Ot=new Ft;function jt(t,e,i,n,s){Ot.Collide(t,e,i,n,s)}var Gt=i(12);class Nt extends Gt.b{constructor(t=0){super(Gt.c.e_circleShape,t),this.m_p=new r.A}Clone(){return(new Nt).Copy(this)}Copy(t){return super.Copy(t),this.m_p.Copy(t.m_p),this}GetChildCount(){return 1}TestPoint(t,e){const i=r.z.MulXV(t,this.m_p,Nt.TestPoint_s_center),n=r.A.SubVV(e,i,Nt.TestPoint_s_d);return r.A.DotVV(n,n)<=Object(r.v)(this.m_radius)}ComputeDistance(t,e,i,n){const s=r.z.MulXV(t,this.m_p,Nt.ComputeDistance_s_center);return r.A.SubVV(e,s,i),i.Normalize()-this.m_radius}RayCast(t,e,i,n){const o=r.z.MulXV(i,this.m_p,Nt.RayCast_s_position),a=r.A.SubVV(e.p1,o,Nt.RayCast_s_s),l=r.A.DotVV(a,a)-Object(r.v)(this.m_radius),c=r.A.SubVV(e.p2,e.p1,Nt.RayCast_s_r),u=r.A.DotVV(a,c),h=r.A.DotVV(c,c),d=u*u-h*l;if(d<0||h<s.r)return!1;let m=-(u+Object(r.w)(d));return 0<=m&&m<=e.maxFraction*h&&(m/=h,t.fraction=m,r.A.AddVMulSV(a,m,c,t.normal).SelfNormalize(),!0)}ComputeAABB(t,e,i){const n=r.z.MulXV(e,this.m_p,Nt.ComputeAABB_s_p);t.lowerBound.Set(n.x-this.m_radius,n.y-this.m_radius),t.upperBound.Set(n.x+this.m_radius,n.y+this.m_radius)}ComputeMass(t,e){const i=Object(r.v)(this.m_radius);t.mass=e*s.P*i,t.center.Copy(this.m_p),t.I=t.mass*(.5*i+r.A.DotVV(this.m_p,this.m_p))}SetupDistanceProxy(t,e){t.m_vertices=t.m_buffer,t.m_vertices[0].Copy(this.m_p),t.m_count=1,t.m_radius=this.m_radius}ComputeSubmergedArea(t,e,i,n){const o=r.z.MulXV(i,this.m_p,new r.A),a=-(r.A.DotVV(t,o)-e);if(a<-this.m_radius+s.r)return 0;if(a>this.m_radius)return n.Copy(o),s.P*this.m_radius*this.m_radius;const l=this.m_radius*this.m_radius,c=a*a,u=l*(Object(r.c)(a/this.m_radius)+s.P/2)+a*Object(r.w)(l-c),h=-2/3*Object(r.p)(l-c,1.5)/u;return n.x=o.x+t.x*h,n.y=o.y+t.y*h,u}Dump(t){t("    const shape: b2CircleShape = new b2CircleShape();\n"),t("    shape.m_radius = %.15f;\n",this.m_radius),t("    shape.m_p.Set(%.15f, %.15f);\n",this.m_p.x,this.m_p.y)}}Nt.TestPoint_s_center=new r.A,Nt.TestPoint_s_d=new r.A,Nt.ComputeDistance_s_center=new r.A,Nt.RayCast_s_position=new r.A,Nt.RayCast_s_s=new r.A,Nt.RayCast_s_r=new r.A,Nt.ComputeAABB_s_p=new r.A;class qt extends Gt.b{constructor(){super(Gt.c.e_polygonShape,s.Q),this.m_centroid=new r.A(0,0),this.m_vertices=r.A.MakeArray(s.D),this.m_normals=r.A.MakeArray(s.D),this.m_count=0}Clone(){return(new qt).Copy(this)}Copy(t){super.Copy(t),this.m_centroid.Copy(t.m_centroid),this.m_count=t.m_count;for(let e=0;e<this.m_count;++e)this.m_vertices[e].Copy(t.m_vertices[e]),this.m_normals[e].Copy(t.m_normals[e]);return this}GetChildCount(){return 1}Set(t,e=t.length,i=0){if(e<3)return this.SetAsBox(1,1);let n=Object(r.n)(e,s.D);const o=qt.Set_s_ps;let a=0;for(let e=0;e<n;++e){const n=t[i+e];let l=!0;for(let t=0;t<a;++t)if(r.A.DistanceSquaredVV(n,o[t])<.5*s.v*(.5*s.v)){l=!1;break}l&&o[a++].Copy(n)}if((n=a)<3)return this.SetAsBox(1,1);let l=0,c=o[0].x;for(let t=1;t<n;++t){const e=o[t].x;(e>c||e===c&&o[t].y<o[l].y)&&(l=t,c=e)}const u=qt.Set_s_hull;let h=0,d=l;for(;;){u[h]=d;let t=0;for(let e=1;e<n;++e){if(t===d){t=e;continue}const i=r.A.SubVV(o[t],o[u[h]],qt.Set_s_r),n=r.A.SubVV(o[e],o[u[h]],qt.Set_s_v),s=r.A.CrossVV(i,n);s<0&&(t=e),0===s&&n.LengthSquared()>i.LengthSquared()&&(t=e)}if(++h,d=t,t===l)break}this.m_count=h;for(let t=0;t<h;++t)this.m_vertices[t].Copy(o[u[t]]);for(let t=0;t<h;++t){const e=this.m_vertices[t],i=this.m_vertices[(t+1)%h],n=r.A.SubVV(i,e,r.A.s_t0);r.A.CrossVOne(n,this.m_normals[t]).SelfNormalize()}return qt.ComputeCentroid(this.m_vertices,h,this.m_centroid),this}SetAsArray(t,e=t.length){return this.Set(t,e)}SetAsBox(t,e,i,n=0){if(this.m_count=4,this.m_vertices[0].Set(-t,-e),this.m_vertices[1].Set(t,-e),this.m_vertices[2].Set(t,e),this.m_vertices[3].Set(-t,e),this.m_normals[0].Set(0,-1),this.m_normals[1].Set(1,0),this.m_normals[2].Set(0,1),this.m_normals[3].Set(-1,0),this.m_centroid.SetZero(),i instanceof r.A){this.m_centroid.Copy(i);const t=new r.z;t.SetPosition(i),t.SetRotationAngle(n);for(let e=0;e<this.m_count;++e)r.z.MulXV(t,this.m_vertices[e],this.m_vertices[e]),r.t.MulRV(t.q,this.m_normals[e],this.m_normals[e])}return this}TestPoint(t,e){const i=r.z.MulTXV(t,e,qt.TestPoint_s_pLocal);for(let t=0;t<this.m_count;++t){if(r.A.DotVV(this.m_normals[t],r.A.SubVV(i,this.m_vertices[t],r.A.s_t0))>0)return!1}return!0}ComputeDistance(t,e,i,n){const o=r.z.MulTXV(t,e,qt.ComputeDistance_s_pLocal);let a=-s.x;const l=qt.ComputeDistance_s_normalForMaxDistance.Copy(o);for(let t=0;t<this.m_count;++t){const e=r.A.DotVV(this.m_normals[t],r.A.SubVV(o,this.m_vertices[t],r.A.s_t0));e>a&&(a=e,l.Copy(this.m_normals[t]))}if(a>0){const e=qt.ComputeDistance_s_minDistance.Copy(l);let n=a*a;for(let t=0;t<this.m_count;++t){const i=r.A.SubVV(o,this.m_vertices[t],qt.ComputeDistance_s_distance),s=i.LengthSquared();n>s&&(e.Copy(i),n=s)}return r.t.MulRV(t.q,e,i),i.Normalize(),Math.sqrt(n)}return r.t.MulRV(t.q,l,i),a}RayCast(t,e,i,n){const s=r.z.MulTXV(i,e.p1,qt.RayCast_s_p1),o=r.z.MulTXV(i,e.p2,qt.RayCast_s_p2),a=r.A.SubVV(o,s,qt.RayCast_s_d);let l=0,c=e.maxFraction,u=-1;for(let t=0;t<this.m_count;++t){const e=r.A.DotVV(this.m_normals[t],r.A.SubVV(this.m_vertices[t],s,r.A.s_t0)),i=r.A.DotVV(this.m_normals[t],a);if(0===i){if(e<0)return!1}else i<0&&e<l*i?(l=e/i,u=t):i>0&&e<c*i&&(c=e/i);if(c<l)return!1}return u>=0&&(t.fraction=l,r.t.MulRV(i.q,this.m_normals[u],t.normal),!0)}ComputeAABB(t,e,i){const n=r.z.MulXV(e,this.m_vertices[0],t.lowerBound),s=t.upperBound.Copy(n);for(let t=0;t<this.m_count;++t){const i=r.z.MulXV(e,this.m_vertices[t],qt.ComputeAABB_s_v);r.A.MinV(i,n,n),r.A.MaxV(i,s,s)}const o=this.m_radius;n.SelfSubXY(o,o),s.SelfAddXY(o,o)}ComputeMass(t,e){const i=qt.ComputeMass_s_center.SetZero();let n=0,s=0;const o=qt.ComputeMass_s_s.SetZero();for(let t=0;t<this.m_count;++t)o.SelfAdd(this.m_vertices[t]);o.SelfMul(1/this.m_count);for(let t=0;t<this.m_count;++t){const e=r.A.SubVV(this.m_vertices[t],o,qt.ComputeMass_s_e1),a=r.A.SubVV(this.m_vertices[(t+1)%this.m_count],o,qt.ComputeMass_s_e2),l=r.A.CrossVV(e,a),c=.5*l;n+=c,i.SelfAdd(r.A.MulSV(c*(1/3),r.A.AddVV(e,a,r.A.s_t0),r.A.s_t1));const u=e.x,h=e.y,d=a.x,m=a.y;s+=1/3*.25*l*(u*u+d*u+d*d+(h*h+m*h+m*m))}t.mass=e*n,i.SelfMul(1/n),r.A.AddVV(i,o,t.center),t.I=e*s,t.I+=t.mass*(r.A.DotVV(t.center,t.center)-r.A.DotVV(i,i))}Validate(){for(let t=0;t<this.m_count;++t){const e=t,i=(t+1)%this.m_count,n=this.m_vertices[e],s=r.A.SubVV(this.m_vertices[i],n,qt.Validate_s_e);for(let t=0;t<this.m_count;++t){if(t===e||t===i)continue;const o=r.A.SubVV(this.m_vertices[t],n,qt.Validate_s_v);if(r.A.CrossVV(s,o)<0)return!1}}return!0}SetupDistanceProxy(t,e){t.m_vertices=this.m_vertices,t.m_count=this.m_count,t.m_radius=this.m_radius}ComputeSubmergedArea(t,e,i,n){const o=r.t.MulTRV(i.q,t,qt.ComputeSubmergedArea_s_normalL),a=e-r.A.DotVV(t,i.p),l=qt.ComputeSubmergedArea_s_depths;let c=0,u=-1,h=-1,d=!1;for(let t=0;t<this.m_count;++t){l[t]=r.A.DotVV(o,this.m_vertices[t])-a;const e=l[t]<-s.r;t>0&&(e?d||(u=t-1,c++):d&&(h=t-1,c++)),d=e}switch(c){case 0:if(d){const t=qt.ComputeSubmergedArea_s_md;return this.ComputeMass(t,1),r.z.MulXV(i,t.center,n),t.mass}return 0;case 1:-1===u?u=this.m_count-1:h=this.m_count-1}const m=(u+1)%this.m_count,p=(h+1)%this.m_count,f=(0-l[u])/(l[m]-l[u]),_=(0-l[h])/(l[p]-l[h]),g=qt.ComputeSubmergedArea_s_intoVec.Set(this.m_vertices[u].x*(1-f)+this.m_vertices[m].x*f,this.m_vertices[u].y*(1-f)+this.m_vertices[m].y*f),v=qt.ComputeSubmergedArea_s_outoVec.Set(this.m_vertices[h].x*(1-_)+this.m_vertices[p].x*_,this.m_vertices[h].y*(1-_)+this.m_vertices[p].y*_);let y=0;const x=qt.ComputeSubmergedArea_s_center.SetZero();let b,A=this.m_vertices[m],w=m;for(;w!==p;){b=(w=(w+1)%this.m_count)===p?v:this.m_vertices[w];const t=.5*((A.x-g.x)*(b.y-g.y)-(A.y-g.y)*(b.x-g.x));y+=t,x.x+=t*(g.x+A.x+b.x)/3,x.y+=t*(g.y+A.y+b.y)/3,A=b}return x.SelfMul(1/y),r.z.MulXV(i,x,n),y}Dump(t){t("    const shape: b2PolygonShape = new b2PolygonShape();\n"),t("    const vs: b2Vec2[] = b2Vec2.MakeArray(%d);\n",s.D);for(let e=0;e<this.m_count;++e)t("    vs[%d].Set(%.15f, %.15f);\n",e,this.m_vertices[e].x,this.m_vertices[e].y);t("    shape.Set(vs, %d);\n",this.m_count)}static ComputeCentroid(t,e,i){const n=i;n.SetZero();let s=0;const o=qt.ComputeCentroid_s_pRef.SetZero();for(let i=0;i<e;++i){const a=o,l=t[i],c=t[(i+1)%e],u=r.A.SubVV(l,a,qt.ComputeCentroid_s_e1),h=r.A.SubVV(c,a,qt.ComputeCentroid_s_e2),d=.5*r.A.CrossVV(u,h);s+=d,n.x+=d*(1/3)*(a.x+l.x+c.x),n.y+=d*(1/3)*(a.y+l.y+c.y)}return n.SelfMul(1/s),n}}qt.Set_s_ps=r.A.MakeArray(s.D),qt.Set_s_hull=Object(s.g)(s.D),qt.Set_s_r=new r.A,qt.Set_s_v=new r.A,qt.TestPoint_s_pLocal=new r.A,qt.ComputeDistance_s_pLocal=new r.A,qt.ComputeDistance_s_normalForMaxDistance=new r.A,qt.ComputeDistance_s_minDistance=new r.A,qt.ComputeDistance_s_distance=new r.A,qt.RayCast_s_p1=new r.A,qt.RayCast_s_p2=new r.A,qt.RayCast_s_d=new r.A,qt.ComputeAABB_s_v=new r.A,qt.ComputeMass_s_center=new r.A,qt.ComputeMass_s_s=new r.A,qt.ComputeMass_s_e1=new r.A,qt.ComputeMass_s_e2=new r.A,qt.Validate_s_e=new r.A,qt.Validate_s_v=new r.A,qt.ComputeSubmergedArea_s_normalL=new r.A,qt.ComputeSubmergedArea_s_depths=Object(s.g)(s.D),qt.ComputeSubmergedArea_s_md=new Gt.a,qt.ComputeSubmergedArea_s_intoVec=new r.A,qt.ComputeSubmergedArea_s_outoVec=new r.A,qt.ComputeSubmergedArea_s_center=new r.A,qt.ComputeCentroid_s_pRef=new r.A,qt.ComputeCentroid_s_e1=new r.A,qt.ComputeCentroid_s_e2=new r.A;class zt extends Gt.b{constructor(){super(Gt.c.e_edgeShape,s.Q),this.m_vertex1=new r.A,this.m_vertex2=new r.A,this.m_vertex0=new r.A,this.m_vertex3=new r.A,this.m_hasVertex0=!1,this.m_hasVertex3=!1}Set(t,e){return this.m_vertex1.Copy(t),this.m_vertex2.Copy(e),this.m_hasVertex0=!1,this.m_hasVertex3=!1,this}Clone(){return(new zt).Copy(this)}Copy(t){return super.Copy(t),this.m_vertex1.Copy(t.m_vertex1),this.m_vertex2.Copy(t.m_vertex2),this.m_vertex0.Copy(t.m_vertex0),this.m_vertex3.Copy(t.m_vertex3),this.m_hasVertex0=t.m_hasVertex0,this.m_hasVertex3=t.m_hasVertex3,this}GetChildCount(){return 1}TestPoint(t,e){return!1}ComputeDistance(t,e,i,n){const s=r.z.MulXV(t,this.m_vertex1,zt.ComputeDistance_s_v1),o=r.z.MulXV(t,this.m_vertex2,zt.ComputeDistance_s_v2),a=r.A.SubVV(e,s,zt.ComputeDistance_s_d),l=r.A.SubVV(o,s,zt.ComputeDistance_s_s),c=r.A.DotVV(a,l);if(c>0){const t=r.A.DotVV(l,l);c>t?r.A.SubVV(e,o,a):a.SelfMulSub(c/t,l)}return i.Copy(a),i.Normalize()}RayCast(t,e,i,n){const s=r.z.MulTXV(i,e.p1,zt.RayCast_s_p1),o=r.z.MulTXV(i,e.p2,zt.RayCast_s_p2),a=r.A.SubVV(o,s,zt.RayCast_s_d),l=this.m_vertex1,c=this.m_vertex2,u=r.A.SubVV(c,l,zt.RayCast_s_e),h=t.normal.Set(u.y,-u.x).SelfNormalize(),d=r.A.DotVV(h,r.A.SubVV(l,s,r.A.s_t0)),m=r.A.DotVV(h,a);if(0===m)return!1;const p=d/m;if(p<0||e.maxFraction<p)return!1;const f=r.A.AddVMulSV(s,p,a,zt.RayCast_s_q),_=r.A.SubVV(c,l,zt.RayCast_s_r),g=r.A.DotVV(_,_);if(0===g)return!1;const v=r.A.DotVV(r.A.SubVV(f,l,r.A.s_t0),_)/g;return!(v<0||1<v)&&(t.fraction=p,r.t.MulRV(i.q,t.normal,t.normal),d>0&&t.normal.SelfNeg(),!0)}ComputeAABB(t,e,i){const n=r.z.MulXV(e,this.m_vertex1,zt.ComputeAABB_s_v1),s=r.z.MulXV(e,this.m_vertex2,zt.ComputeAABB_s_v2);r.A.MinV(n,s,t.lowerBound),r.A.MaxV(n,s,t.upperBound);const o=this.m_radius;t.lowerBound.SelfSubXY(o,o),t.upperBound.SelfAddXY(o,o)}ComputeMass(t,e){t.mass=0,r.A.MidVV(this.m_vertex1,this.m_vertex2,t.center),t.I=0}SetupDistanceProxy(t,e){t.m_vertices=t.m_buffer,t.m_vertices[0].Copy(this.m_vertex1),t.m_vertices[1].Copy(this.m_vertex2),t.m_count=2,t.m_radius=this.m_radius}ComputeSubmergedArea(t,e,i,n){return n.SetZero(),0}Dump(t){t("    const shape: b2EdgeShape = new b2EdgeShape();\n"),t("    shape.m_radius = %.15f;\n",this.m_radius),t("    shape.m_vertex0.Set(%.15f, %.15f);\n",this.m_vertex0.x,this.m_vertex0.y),t("    shape.m_vertex1.Set(%.15f, %.15f);\n",this.m_vertex1.x,this.m_vertex1.y),t("    shape.m_vertex2.Set(%.15f, %.15f);\n",this.m_vertex2.x,this.m_vertex2.y),t("    shape.m_vertex3.Set(%.15f, %.15f);\n",this.m_vertex3.x,this.m_vertex3.y),t("    shape.m_hasVertex0 = %s;\n",this.m_hasVertex0),t("    shape.m_hasVertex3 = %s;\n",this.m_hasVertex3)}}zt.ComputeDistance_s_v1=new r.A,zt.ComputeDistance_s_v2=new r.A,zt.ComputeDistance_s_d=new r.A,zt.ComputeDistance_s_s=new r.A,zt.RayCast_s_p1=new r.A,zt.RayCast_s_p2=new r.A,zt.RayCast_s_d=new r.A,zt.RayCast_s_e=new r.A,zt.RayCast_s_q=new r.A,zt.RayCast_s_r=new r.A,zt.ComputeAABB_s_v1=new r.A,zt.ComputeAABB_s_v2=new r.A;class Ht extends Gt.b{constructor(){super(Gt.c.e_chainShape,s.Q),this.m_count=0,this.m_prevVertex=new r.A,this.m_nextVertex=new r.A,this.m_hasPrevVertex=!1,this.m_hasNextVertex=!1}CreateLoop(t,e=t.length){this.m_count=e+1,this.m_vertices=r.A.MakeArray(this.m_count);for(let i=0;i<e;++i)this.m_vertices[i].Copy(t[i]);return this.m_vertices[e].Copy(this.m_vertices[0]),this.m_prevVertex.Copy(this.m_vertices[this.m_count-2]),this.m_nextVertex.Copy(this.m_vertices[1]),this.m_hasPrevVertex=!0,this.m_hasNextVertex=!0,this}CreateChain(t,e=t.length){this.m_count=e,this.m_vertices=r.A.MakeArray(e);for(let i=0;i<e;++i)this.m_vertices[i].Copy(t[i]);return this.m_hasPrevVertex=!1,this.m_hasNextVertex=!1,this.m_prevVertex.SetZero(),this.m_nextVertex.SetZero(),this}SetPrevVertex(t){return this.m_prevVertex.Copy(t),this.m_hasPrevVertex=!0,this}SetNextVertex(t){return this.m_nextVertex.Copy(t),this.m_hasNextVertex=!0,this}Clone(){return(new Ht).Copy(this)}Copy(t){return super.Copy(t),this.CreateChain(t.m_vertices,t.m_count),this.m_prevVertex.Copy(t.m_prevVertex),this.m_nextVertex.Copy(t.m_nextVertex),this.m_hasPrevVertex=t.m_hasPrevVertex,this.m_hasNextVertex=t.m_hasNextVertex,this}GetChildCount(){return this.m_count-1}GetChildEdge(t,e){t.m_type=Gt.c.e_edgeShape,t.m_radius=this.m_radius,t.m_vertex1.Copy(this.m_vertices[e]),t.m_vertex2.Copy(this.m_vertices[e+1]),e>0?(t.m_vertex0.Copy(this.m_vertices[e-1]),t.m_hasVertex0=!0):(t.m_vertex0.Copy(this.m_prevVertex),t.m_hasVertex0=this.m_hasPrevVertex),e<this.m_count-2?(t.m_vertex3.Copy(this.m_vertices[e+2]),t.m_hasVertex3=!0):(t.m_vertex3.Copy(this.m_nextVertex),t.m_hasVertex3=this.m_hasNextVertex)}TestPoint(t,e){return!1}ComputeDistance(t,e,i,n){const s=Ht.ComputeDistance_s_edgeShape;return this.GetChildEdge(s,n),s.ComputeDistance(t,e,i,0)}RayCast(t,e,i,n){const s=Ht.RayCast_s_edgeShape;return s.m_vertex1.Copy(this.m_vertices[n]),s.m_vertex2.Copy(this.m_vertices[(n+1)%this.m_count]),s.RayCast(t,e,i,0)}ComputeAABB(t,e,i){const n=this.m_vertices[i],s=this.m_vertices[(i+1)%this.m_count],o=r.z.MulXV(e,n,Ht.ComputeAABB_s_v1),a=r.z.MulXV(e,s,Ht.ComputeAABB_s_v2);r.A.MinV(o,a,t.lowerBound),r.A.MaxV(o,a,t.upperBound)}ComputeMass(t,e){t.mass=0,t.center.SetZero(),t.I=0}SetupDistanceProxy(t,e){t.m_vertices=t.m_buffer,t.m_vertices[0].Copy(this.m_vertices[e]),e+1<this.m_count?t.m_vertices[1].Copy(this.m_vertices[e+1]):t.m_vertices[1].Copy(this.m_vertices[0]),t.m_count=2,t.m_radius=this.m_radius}ComputeSubmergedArea(t,e,i,n){return n.SetZero(),0}Dump(t){t("    const shape: b2ChainShape = new b2ChainShape();\n"),t("    const vs: b2Vec2[] = b2Vec2.MakeArray(%d);\n",s.D);for(let e=0;e<this.m_count;++e)t("    vs[%d].Set(%.15f, %.15f);\n",e,this.m_vertices[e].x,this.m_vertices[e].y);t("    shape.CreateChain(vs, %d);\n",this.m_count),t("    shape.m_prevVertex.Set(%.15f, %.15f);\n",this.m_prevVertex.x,this.m_prevVertex.y),t("    shape.m_nextVertex.Set(%.15f, %.15f);\n",this.m_nextVertex.x,this.m_nextVertex.y),t("    shape.m_hasPrevVertex = %s;\n",this.m_hasPrevVertex?"true":"false"),t("    shape.m_hasNextVertex = %s;\n",this.m_hasNextVertex?"true":"false")}}Ht.ComputeDistance_s_edgeShape=new zt,Ht.RayCast_s_edgeShape=new zt,Ht.ComputeAABB_s_v1=new r.A,Ht.ComputeAABB_s_v2=new r.A;var Ut,Wt,Jt,Yt=i(89);!function(t){t[t.b2_unknown=-1]="b2_unknown",t[t.b2_staticBody=0]="b2_staticBody",t[t.b2_kinematicBody=1]="b2_kinematicBody",t[t.b2_dynamicBody=2]="b2_dynamicBody"}(Ut||(Ut={}));class Xt{constructor(){this.type=Ut.b2_staticBody,this.position=new r.A(0,0),this.angle=0,this.linearVelocity=new r.A(0,0),this.angularVelocity=0,this.linearDamping=0,this.angularDamping=0,this.allowSleep=!0,this.awake=!0,this.fixedRotation=!1,this.bullet=!1,this.active=!0,this.userData=null,this.gravityScale=1}}class Qt{constructor(t,e){this.m_type=Ut.b2_staticBody,this.m_islandFlag=!1,this.m_awakeFlag=!1,this.m_autoSleepFlag=!1,this.m_bulletFlag=!1,this.m_fixedRotationFlag=!1,this.m_activeFlag=!1,this.m_toiFlag=!1,this.m_islandIndex=0,this.m_xf=new r.z,this.m_xf0=new r.z,this.m_sweep=new r.y,this.m_linearVelocity=new r.A,this.m_angularVelocity=0,this.m_force=new r.A,this.m_torque=0,this.m_prev=null,this.m_next=null,this.m_fixtureList=null,this.m_fixtureCount=0,this.m_jointList=null,this.m_contactList=null,this.m_mass=1,this.m_invMass=1,this.m_I=0,this.m_invI=0,this.m_linearDamping=0,this.m_angularDamping=0,this.m_gravityScale=1,this.m_sleepTime=0,this.m_userData=null,this.m_controllerList=null,this.m_controllerCount=0,t.bullet&&(this.m_bulletFlag=!0),t.fixedRotation&&(this.m_fixedRotationFlag=!0),t.allowSleep&&(this.m_autoSleepFlag=!0),t.awake&&(this.m_awakeFlag=!0),t.active&&(this.m_activeFlag=!0),this.m_world=e,this.m_xf.p.Copy(t.position),this.m_xf.q.SetAngle(t.angle),this.m_xf0.Copy(this.m_xf),this.m_sweep.localCenter.SetZero(),this.m_sweep.c0.Copy(this.m_xf.p),this.m_sweep.c.Copy(this.m_xf.p),this.m_sweep.a0=t.angle,this.m_sweep.a=t.angle,this.m_sweep.alpha0=0,this.m_linearVelocity.Copy(t.linearVelocity),this.m_angularVelocity=t.angularVelocity,this.m_linearDamping=t.linearDamping,this.m_angularDamping=t.angularDamping,this.m_gravityScale=t.gravityScale,this.m_force.SetZero(),this.m_torque=0,this.m_sleepTime=0,this.m_type=t.type,t.type===Ut.b2_dynamicBody?(this.m_mass=1,this.m_invMass=1):(this.m_mass=0,this.m_invMass=0),this.m_I=0,this.m_invI=0,this.m_userData=t.userData,this.m_fixtureList=null,this.m_fixtureCount=0,this.m_controllerList=null,this.m_controllerCount=0}CreateFixture(t,e){if(t instanceof Yt.c)return this.CreateFixtureDef(t);if(t instanceof Gt.b&&"number"==typeof e)return this.CreateFixtureShapeDensity(t,e);throw new Error}CreateFixtureDef(t){if(this.m_world.IsLocked())return null;const e=new Yt.b(t,this);if(e.Create(t),this.m_activeFlag){const t=this.m_world.m_contactManager.m_broadPhase;e.CreateProxies(t,this.m_xf)}return e.m_next=this.m_fixtureList,this.m_fixtureList=e,++this.m_fixtureCount,e.m_density>0&&this.ResetMassData(),this.m_world.m_newFixture=!0,e}CreateFixtureShapeDensity(t,e=0){const i=Qt.CreateFixtureShapeDensity_s_def;return i.shape=t,i.density=e,this.CreateFixtureDef(i)}DestroyFixture(t){if(this.m_world.IsLocked())return;let e=this.m_fixtureList,i=null;for(;null!==e;){if(e===t){i?i.m_next=t.m_next:this.m_fixtureList=t.m_next;break}i=e,e=e.m_next}let n=this.m_contactList;for(;n;){const e=n.contact;n=n.next;const i=e.GetFixtureA(),s=e.GetFixtureB();t!==i&&t!==s||this.m_world.m_contactManager.Destroy(e)}if(this.m_activeFlag){const e=this.m_world.m_contactManager.m_broadPhase;t.DestroyProxies(e)}t.Destroy(),t.m_next=null,--this.m_fixtureCount,this.ResetMassData()}SetTransformVec(t,e){this.SetTransformXY(t.x,t.y,e)}SetTransformXY(t,e,i){if(this.m_world.IsLocked())return;this.m_xf.q.SetAngle(i),this.m_xf.p.Set(t,e),this.m_xf0.Copy(this.m_xf),r.z.MulXV(this.m_xf,this.m_sweep.localCenter,this.m_sweep.c),this.m_sweep.a=i,this.m_sweep.c0.Copy(this.m_sweep.c),this.m_sweep.a0=i;const n=this.m_world.m_contactManager.m_broadPhase;for(let t=this.m_fixtureList;t;t=t.m_next)t.Synchronize(n,this.m_xf,this.m_xf);this.m_world.m_contactManager.FindNewContacts()}SetTransform(t){this.SetTransformVec(t.p,t.GetAngle())}GetTransform(){return this.m_xf}GetPosition(){return this.m_xf.p}SetPosition(t){this.SetTransformVec(t,this.GetAngle())}SetPositionXY(t,e){this.SetTransformXY(t,e,this.GetAngle())}GetAngle(){return this.m_sweep.a}SetAngle(t){this.SetTransformVec(this.GetPosition(),t)}GetWorldCenter(){return this.m_sweep.c}GetLocalCenter(){return this.m_sweep.localCenter}SetLinearVelocity(t){this.m_type!==Ut.b2_staticBody&&(r.A.DotVV(t,t)>0&&this.SetAwake(!0),this.m_linearVelocity.Copy(t))}GetLinearVelocity(){return this.m_linearVelocity}SetAngularVelocity(t){this.m_type!==Ut.b2_staticBody&&(t*t>0&&this.SetAwake(!0),this.m_angularVelocity=t)}GetAngularVelocity(){return this.m_angularVelocity}GetDefinition(t){return t.type=this.GetType(),t.allowSleep=this.m_autoSleepFlag,t.angle=this.GetAngle(),t.angularDamping=this.m_angularDamping,t.gravityScale=this.m_gravityScale,t.angularVelocity=this.m_angularVelocity,t.fixedRotation=this.m_fixedRotationFlag,t.bullet=this.m_bulletFlag,t.awake=this.m_awakeFlag,t.linearDamping=this.m_linearDamping,t.linearVelocity.Copy(this.GetLinearVelocity()),t.position.Copy(this.GetPosition()),t.userData=this.GetUserData(),t}ApplyForce(t,e,i=!0){this.m_type===Ut.b2_dynamicBody&&(i&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_force.x+=t.x,this.m_force.y+=t.y,this.m_torque+=(e.x-this.m_sweep.c.x)*t.y-(e.y-this.m_sweep.c.y)*t.x))}ApplyForceToCenter(t,e=!0){this.m_type===Ut.b2_dynamicBody&&(e&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_force.x+=t.x,this.m_force.y+=t.y))}ApplyTorque(t,e=!0){this.m_type===Ut.b2_dynamicBody&&(e&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_torque+=t))}ApplyLinearImpulse(t,e,i=!0){this.m_type===Ut.b2_dynamicBody&&(i&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_linearVelocity.x+=this.m_invMass*t.x,this.m_linearVelocity.y+=this.m_invMass*t.y,this.m_angularVelocity+=this.m_invI*((e.x-this.m_sweep.c.x)*t.y-(e.y-this.m_sweep.c.y)*t.x)))}ApplyLinearImpulseToCenter(t,e=!0){this.m_type===Ut.b2_dynamicBody&&(e&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_linearVelocity.x+=this.m_invMass*t.x,this.m_linearVelocity.y+=this.m_invMass*t.y))}ApplyAngularImpulse(t,e=!0){this.m_type===Ut.b2_dynamicBody&&(e&&!this.m_awakeFlag&&this.SetAwake(!0),this.m_awakeFlag&&(this.m_angularVelocity+=this.m_invI*t))}GetMass(){return this.m_mass}GetInertia(){return this.m_I+this.m_mass*r.A.DotVV(this.m_sweep.localCenter,this.m_sweep.localCenter)}GetMassData(t){return t.mass=this.m_mass,t.I=this.m_I+this.m_mass*r.A.DotVV(this.m_sweep.localCenter,this.m_sweep.localCenter),t.center.Copy(this.m_sweep.localCenter),t}SetMassData(t){if(this.m_world.IsLocked())return;if(this.m_type!==Ut.b2_dynamicBody)return;this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_mass=t.mass,this.m_mass<=0&&(this.m_mass=1),this.m_invMass=1/this.m_mass,t.I>0&&!this.m_fixedRotationFlag&&(this.m_I=t.I-this.m_mass*r.A.DotVV(t.center,t.center),this.m_invI=1/this.m_I);const e=Qt.SetMassData_s_oldCenter.Copy(this.m_sweep.c);this.m_sweep.localCenter.Copy(t.center),r.z.MulXV(this.m_xf,this.m_sweep.localCenter,this.m_sweep.c),this.m_sweep.c0.Copy(this.m_sweep.c),r.A.AddVCrossSV(this.m_linearVelocity,this.m_angularVelocity,r.A.SubVV(this.m_sweep.c,e,r.A.s_t0),this.m_linearVelocity)}ResetMassData(){if(this.m_mass=0,this.m_invMass=0,this.m_I=0,this.m_invI=0,this.m_sweep.localCenter.SetZero(),this.m_type===Ut.b2_staticBody||this.m_type===Ut.b2_kinematicBody)return this.m_sweep.c0.Copy(this.m_xf.p),this.m_sweep.c.Copy(this.m_xf.p),void(this.m_sweep.a0=this.m_sweep.a);const t=Qt.ResetMassData_s_localCenter.SetZero();for(let e=this.m_fixtureList;e;e=e.m_next){if(0===e.m_density)continue;const i=e.GetMassData(Qt.ResetMassData_s_massData);this.m_mass+=i.mass,t.x+=i.center.x*i.mass,t.y+=i.center.y*i.mass,this.m_I+=i.I}this.m_mass>0?(this.m_invMass=1/this.m_mass,t.x*=this.m_invMass,t.y*=this.m_invMass):(this.m_mass=1,this.m_invMass=1),this.m_I>0&&!this.m_fixedRotationFlag?(this.m_I-=this.m_mass*r.A.DotVV(t,t),this.m_invI=1/this.m_I):(this.m_I=0,this.m_invI=0);const e=Qt.ResetMassData_s_oldCenter.Copy(this.m_sweep.c);this.m_sweep.localCenter.Copy(t),r.z.MulXV(this.m_xf,this.m_sweep.localCenter,this.m_sweep.c),this.m_sweep.c0.Copy(this.m_sweep.c),r.A.AddVCrossSV(this.m_linearVelocity,this.m_angularVelocity,r.A.SubVV(this.m_sweep.c,e,r.A.s_t0),this.m_linearVelocity)}GetWorldPoint(t,e){return r.z.MulXV(this.m_xf,t,e)}GetWorldVector(t,e){return r.t.MulRV(this.m_xf.q,t,e)}GetLocalPoint(t,e){return r.z.MulTXV(this.m_xf,t,e)}GetLocalVector(t,e){return r.t.MulTRV(this.m_xf.q,t,e)}GetLinearVelocityFromWorldPoint(t,e){return r.A.AddVCrossSV(this.m_linearVelocity,this.m_angularVelocity,r.A.SubVV(t,this.m_sweep.c,r.A.s_t0),e)}GetLinearVelocityFromLocalPoint(t,e){return this.GetLinearVelocityFromWorldPoint(this.GetWorldPoint(t,e),e)}GetLinearDamping(){return this.m_linearDamping}SetLinearDamping(t){this.m_linearDamping=t}GetAngularDamping(){return this.m_angularDamping}SetAngularDamping(t){this.m_angularDamping=t}GetGravityScale(){return this.m_gravityScale}SetGravityScale(t){this.m_gravityScale=t}SetType(t){if(this.m_world.IsLocked())return;if(this.m_type===t)return;this.m_type=t,this.ResetMassData(),this.m_type===Ut.b2_staticBody&&(this.m_linearVelocity.SetZero(),this.m_angularVelocity=0,this.m_sweep.a0=this.m_sweep.a,this.m_sweep.c0.Copy(this.m_sweep.c),this.SynchronizeFixtures()),this.SetAwake(!0),this.m_force.SetZero(),this.m_torque=0;let e=this.m_contactList;for(;e;){const t=e;e=e.next,this.m_world.m_contactManager.Destroy(t.contact)}this.m_contactList=null;const i=this.m_world.m_contactManager.m_broadPhase;for(let t=this.m_fixtureList;t;t=t.m_next){const e=t.m_proxyCount;for(let n=0;n<e;++n)i.TouchProxy(t.m_proxies[n].treeNode)}}GetType(){return this.m_type}SetBullet(t){this.m_bulletFlag=t}IsBullet(){return this.m_bulletFlag}SetSleepingAllowed(t){this.m_autoSleepFlag=t,t||this.SetAwake(!0)}IsSleepingAllowed(){return this.m_autoSleepFlag}SetAwake(t){t?this.m_awakeFlag||(this.m_awakeFlag=!0,this.m_sleepTime=0):(this.m_awakeFlag=!1,this.m_sleepTime=0,this.m_linearVelocity.SetZero(),this.m_angularVelocity=0,this.m_force.SetZero(),this.m_torque=0)}IsAwake(){return this.m_awakeFlag}SetActive(t){if(t!==this.IsActive())if(this.m_activeFlag=t,t){const t=this.m_world.m_contactManager.m_broadPhase;for(let e=this.m_fixtureList;e;e=e.m_next)e.CreateProxies(t,this.m_xf)}else{const t=this.m_world.m_contactManager.m_broadPhase;for(let e=this.m_fixtureList;e;e=e.m_next)e.DestroyProxies(t);let e=this.m_contactList;for(;e;){const t=e;e=e.next,this.m_world.m_contactManager.Destroy(t.contact)}this.m_contactList=null}}IsActive(){return this.m_activeFlag}SetFixedRotation(t){this.m_fixedRotationFlag!==t&&(this.m_fixedRotationFlag=t,this.m_angularVelocity=0,this.ResetMassData())}IsFixedRotation(){return this.m_fixedRotationFlag}GetFixtureList(){return this.m_fixtureList}GetJointList(){return this.m_jointList}GetContactList(){return this.m_contactList}GetNext(){return this.m_next}GetUserData(){return this.m_userData}SetUserData(t){this.m_userData=t}GetWorld(){return this.m_world}Dump(t){const e=this.m_islandIndex;t("{\n"),t("  const bd: b2BodyDef = new b2BodyDef();\n");let i="";switch(this.m_type){case Ut.b2_staticBody:i="b2BodyType.b2_staticBody";break;case Ut.b2_kinematicBody:i="b2BodyType.b2_kinematicBody";break;case Ut.b2_dynamicBody:i="b2BodyType.b2_dynamicBody"}t("  bd.type = %s;\n",i),t("  bd.position.Set(%.15f, %.15f);\n",this.m_xf.p.x,this.m_xf.p.y),t("  bd.angle = %.15f;\n",this.m_sweep.a),t("  bd.linearVelocity.Set(%.15f, %.15f);\n",this.m_linearVelocity.x,this.m_linearVelocity.y),t("  bd.angularVelocity = %.15f;\n",this.m_angularVelocity),t("  bd.linearDamping = %.15f;\n",this.m_linearDamping),t("  bd.angularDamping = %.15f;\n",this.m_angularDamping),t("  bd.allowSleep = %s;\n",this.m_autoSleepFlag?"true":"false"),t("  bd.awake = %s;\n",this.m_awakeFlag?"true":"false"),t("  bd.fixedRotation = %s;\n",this.m_fixedRotationFlag?"true":"false"),t("  bd.bullet = %s;\n",this.m_bulletFlag?"true":"false"),t("  bd.active = %s;\n",this.m_activeFlag?"true":"false"),t("  bd.gravityScale = %.15f;\n",this.m_gravityScale),t("\n"),t("  bodies[%d] = this.m_world.CreateBody(bd);\n",this.m_islandIndex),t("\n");for(let i=this.m_fixtureList;i;i=i.m_next)t("  {\n"),i.Dump(t,e),t("  }\n");t("}\n")}SynchronizeFixtures(){const t=Qt.SynchronizeFixtures_s_xf1;t.q.SetAngle(this.m_sweep.a0),r.t.MulRV(t.q,this.m_sweep.localCenter,t.p),r.A.SubVV(this.m_sweep.c0,t.p,t.p);const e=this.m_world.m_contactManager.m_broadPhase;for(let i=this.m_fixtureList;i;i=i.m_next)i.Synchronize(e,t,this.m_xf)}SynchronizeTransform(){this.m_xf.q.SetAngle(this.m_sweep.a),r.t.MulRV(this.m_xf.q,this.m_sweep.localCenter,this.m_xf.p),r.A.SubVV(this.m_sweep.c,this.m_xf.p,this.m_xf.p)}ShouldCollide(t){return(this.m_type!==Ut.b2_staticBody||t.m_type!==Ut.b2_staticBody)&&this.ShouldCollideConnected(t)}ShouldCollideConnected(t){for(let e=this.m_jointList;e;e=e.next)if(e.other===t&&!e.joint.m_collideConnected)return!1;return!0}Advance(t){this.m_sweep.Advance(t),this.m_sweep.c.Copy(this.m_sweep.c0),this.m_sweep.a=this.m_sweep.a0,this.m_xf.q.SetAngle(this.m_sweep.a),r.t.MulRV(this.m_xf.q,this.m_sweep.localCenter,this.m_xf.p),r.A.SubVV(this.m_sweep.c,this.m_xf.p,this.m_xf.p)}GetControllerList(){return this.m_controllerList}GetControllerCount(){return this.m_controllerCount}}Qt.CreateFixtureShapeDensity_s_def=new Yt.c,Qt.SetMassData_s_oldCenter=new r.A,Qt.ResetMassData_s_localCenter=new r.A,Qt.ResetMassData_s_oldCenter=new r.A,Qt.ResetMassData_s_massData=new Gt.a,Qt.SynchronizeFixtures_s_xf1=new r.z,function(t){t[t.e_unknownJoint=0]="e_unknownJoint",t[t.e_revoluteJoint=1]="e_revoluteJoint",t[t.e_prismaticJoint=2]="e_prismaticJoint",t[t.e_distanceJoint=3]="e_distanceJoint",t[t.e_pulleyJoint=4]="e_pulleyJoint",t[t.e_mouseJoint=5]="e_mouseJoint",t[t.e_gearJoint=6]="e_gearJoint",t[t.e_wheelJoint=7]="e_wheelJoint",t[t.e_weldJoint=8]="e_weldJoint",t[t.e_frictionJoint=9]="e_frictionJoint",t[t.e_ropeJoint=10]="e_ropeJoint",t[t.e_motorJoint=11]="e_motorJoint",t[t.e_areaJoint=12]="e_areaJoint"}(Wt||(Wt={})),function(t){t[t.e_inactiveLimit=0]="e_inactiveLimit",t[t.e_atLowerLimit=1]="e_atLowerLimit",t[t.e_atUpperLimit=2]="e_atUpperLimit",t[t.e_equalLimits=3]="e_equalLimits"}(Jt||(Jt={}));class Zt{constructor(){this.linear=new r.A,this.angularA=0,this.angularB=0}SetZero(){return this.linear.SetZero(),this.angularA=0,this.angularB=0,this}Set(t,e,i){return this.linear.Copy(t),this.angularA=e,this.angularB=i,this}}class Kt{constructor(t,e){this.prev=null,this.next=null,this.joint=t,this.other=e}}class te{constructor(t){this.type=Wt.e_unknownJoint,this.userData=null,this.bodyA=null,this.bodyB=null,this.collideConnected=!1,this.type=t}}class ee{constructor(t){this.m_type=Wt.e_unknownJoint,this.m_prev=null,this.m_next=null,this.m_index=0,this.m_islandFlag=!1,this.m_collideConnected=!1,this.m_userData=null,this.m_type=t.type,this.m_edgeA=new Kt(this,t.bodyB),this.m_edgeB=new Kt(this,t.bodyA),this.m_bodyA=t.bodyA,this.m_bodyB=t.bodyB,this.m_collideConnected=t.collideConnected,this.m_userData=t.userData}GetType(){return this.m_type}GetBodyA(){return this.m_bodyA}GetBodyB(){return this.m_bodyB}GetAnchorA(t){return t.SetZero()}GetAnchorB(t){return t.SetZero()}GetReactionForce(t,e){return e.SetZero()}GetReactionTorque(t){return 0}GetNext(){return this.m_next}GetUserData(){return this.m_userData}SetUserData(t){this.m_userData=t}IsActive(){return this.m_bodyA.IsActive()&&this.m_bodyB.IsActive()}GetCollideConnected(){return this.m_collideConnected}Dump(t){t("// Dump is not supported for this joint type.\n")}ShiftOrigin(t){}InitVelocityConstraints(t){}SolveVelocityConstraints(t){}SolvePositionConstraints(t){return!1}}class ie extends te{constructor(){super(Wt.e_distanceJoint),this.localAnchorA=new r.A,this.localAnchorB=new r.A,this.length=1,this.frequencyHz=0,this.dampingRatio=0}Initialize(t,e,i,n){this.bodyA=t,this.bodyB=e,this.bodyA.GetLocalPoint(i,this.localAnchorA),this.bodyB.GetLocalPoint(n,this.localAnchorB),this.length=r.A.DistanceVV(i,n),this.frequencyHz=0,this.dampingRatio=0}}class ne extends ee{constructor(t){super(t),this.m_frequencyHz=0,this.m_dampingRatio=0,this.m_bias=0,this.m_localAnchorA=new r.A,this.m_localAnchorB=new r.A,this.m_gamma=0,this.m_impulse=0,this.m_length=0,this.m_indexA=0,this.m_indexB=0,this.m_u=new r.A,this.m_rA=new r.A,this.m_rB=new r.A,this.m_localCenterA=new r.A,this.m_localCenterB=new r.A,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_mass=0,this.m_qA=new r.t,this.m_qB=new r.t,this.m_lalcA=new r.A,this.m_lalcB=new r.A,this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_localAnchorA.Copy(t.localAnchorA),this.m_localAnchorB.Copy(t.localAnchorB),this.m_length=t.length}GetAnchorA(t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,t)}GetAnchorB(t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,t)}GetReactionForce(t,e){return e.Set(t*this.m_impulse*this.m_u.x,t*this.m_impulse*this.m_u.y)}GetReactionTorque(t){return 0}GetLocalAnchorA(){return this.m_localAnchorA}GetLocalAnchorB(){return this.m_localAnchorB}SetLength(t){this.m_length=t}Length(){return this.m_length}SetFrequency(t){this.m_frequencyHz=t}GetFrequency(){return this.m_frequencyHz}SetDampingRatio(t){this.m_dampingRatio=t}GetDampingRatio(){return this.m_dampingRatio}Dump(t){const e=this.m_bodyA.m_islandIndex,i=this.m_bodyB.m_islandIndex;t("  const jd: b2DistanceJointDef = new b2DistanceJointDef();\n"),t("  jd.bodyA = bodies[%d];\n",e),t("  jd.bodyB = bodies[%d];\n",i),t("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),t("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),t("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),t("  jd.length = %.15f;\n",this.m_length),t("  jd.frequencyHz = %.15f;\n",this.m_frequencyHz),t("  jd.dampingRatio = %.15f;\n",this.m_dampingRatio),t("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}InitVelocityConstraints(t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const e=t.positions[this.m_indexA].c,i=t.positions[this.m_indexA].a,n=t.velocities[this.m_indexA].v;let o=t.velocities[this.m_indexA].w;const a=t.positions[this.m_indexB].c,l=t.positions[this.m_indexB].a,c=t.velocities[this.m_indexB].v;let u=t.velocities[this.m_indexB].w;const h=this.m_qA.SetAngle(i),d=this.m_qB.SetAngle(l);r.A.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),r.t.MulRV(h,this.m_lalcA,this.m_rA),r.A.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),r.t.MulRV(d,this.m_lalcB,this.m_rB),this.m_u.x=a.x+this.m_rB.x-e.x-this.m_rA.x,this.m_u.y=a.y+this.m_rB.y-e.y-this.m_rA.y;const m=this.m_u.Length();m>s.v?this.m_u.SelfMul(1/m):this.m_u.SetZero();const p=r.A.CrossVV(this.m_rA,this.m_u),f=r.A.CrossVV(this.m_rB,this.m_u);let _=this.m_invMassA+this.m_invIA*p*p+this.m_invMassB+this.m_invIB*f*f;if(this.m_mass=0!==_?1/_:0,this.m_frequencyHz>0){const e=m-this.m_length,i=2*s.P*this.m_frequencyHz,n=2*this.m_mass*this.m_dampingRatio*i,r=this.m_mass*i*i,o=t.step.dt;this.m_gamma=o*(n+o*r),this.m_gamma=0!==this.m_gamma?1/this.m_gamma:0,this.m_bias=e*o*r*this.m_gamma,_+=this.m_gamma,this.m_mass=0!==_?1/_:0}else this.m_gamma=0,this.m_bias=0;if(t.step.warmStarting){this.m_impulse*=t.step.dtRatio;const e=r.A.MulSV(this.m_impulse,this.m_u,ne.InitVelocityConstraints_s_P);n.SelfMulSub(this.m_invMassA,e),o-=this.m_invIA*r.A.CrossVV(this.m_rA,e),c.SelfMulAdd(this.m_invMassB,e),u+=this.m_invIB*r.A.CrossVV(this.m_rB,e)}else this.m_impulse=0;t.velocities[this.m_indexA].w=o,t.velocities[this.m_indexB].w=u}SolveVelocityConstraints(t){const e=t.velocities[this.m_indexA].v;let i=t.velocities[this.m_indexA].w;const n=t.velocities[this.m_indexB].v;let s=t.velocities[this.m_indexB].w;const o=r.A.AddVCrossSV(e,i,this.m_rA,ne.SolveVelocityConstraints_s_vpA),a=r.A.AddVCrossSV(n,s,this.m_rB,ne.SolveVelocityConstraints_s_vpB),l=r.A.DotVV(this.m_u,r.A.SubVV(a,o,r.A.s_t0)),c=-this.m_mass*(l+this.m_bias+this.m_gamma*this.m_impulse);this.m_impulse+=c;const u=r.A.MulSV(c,this.m_u,ne.SolveVelocityConstraints_s_P);e.SelfMulSub(this.m_invMassA,u),i-=this.m_invIA*r.A.CrossVV(this.m_rA,u),n.SelfMulAdd(this.m_invMassB,u),s+=this.m_invIB*r.A.CrossVV(this.m_rB,u),t.velocities[this.m_indexA].w=i,t.velocities[this.m_indexB].w=s}SolvePositionConstraints(t){if(this.m_frequencyHz>0)return!0;const e=t.positions[this.m_indexA].c;let i=t.positions[this.m_indexA].a;const n=t.positions[this.m_indexB].c;let o=t.positions[this.m_indexB].a;this.m_qA.SetAngle(i),this.m_qB.SetAngle(o);const a=r.t.MulRV(this.m_qA,this.m_lalcA,this.m_rA),l=r.t.MulRV(this.m_qB,this.m_lalcB,this.m_rB),c=this.m_u;c.x=n.x+l.x-e.x-a.x,c.y=n.y+l.y-e.y-a.y;let u=this.m_u.Normalize()-this.m_length;u=Object(r.e)(u,-s.y,s.y);const h=-this.m_mass*u,d=r.A.MulSV(h,c,ne.SolvePositionConstraints_s_P);return e.SelfMulSub(this.m_invMassA,d),i-=this.m_invIA*r.A.CrossVV(a,d),n.SelfMulAdd(this.m_invMassB,d),o+=this.m_invIB*r.A.CrossVV(l,d),t.positions[this.m_indexA].a=i,t.positions[this.m_indexB].a=o,Object(r.a)(u)<s.v}}ne.InitVelocityConstraints_s_P=new r.A,ne.SolveVelocityConstraints_s_vpA=new r.A,ne.SolveVelocityConstraints_s_vpB=new r.A,ne.SolveVelocityConstraints_s_P=new r.A,ne.SolvePositionConstraints_s_P=new r.A;class se extends te{constructor(){super(Wt.e_areaJoint),this.world=null,this.bodies=[],this.frequencyHz=0,this.dampingRatio=0}AddBody(t){this.bodies.push(t),1===this.bodies.length?this.bodyA=t:2===this.bodies.length&&(this.bodyB=t)}}class re extends ee{constructor(t){super(t),this.m_bodies=null,this.m_frequencyHz=0,this.m_dampingRatio=0,this.m_impulse=0,this.m_targetLengths=null,this.m_targetArea=0,this.m_normals=null,this.m_joints=null,this.m_deltas=null,this.m_delta=null,this.m_bodies=t.bodies,this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_targetLengths=Object(s.g)(t.bodies.length),this.m_normals=r.A.MakeArray(t.bodies.length),this.m_joints=Object(s.f)(t.bodies.length),this.m_deltas=r.A.MakeArray(t.bodies.length),this.m_delta=new r.A;const e=new ie;e.frequencyHz=t.frequencyHz,e.dampingRatio=t.dampingRatio,this.m_targetArea=0;for(let i=0;i<this.m_bodies.length;++i){const n=this.m_bodies[i],s=this.m_bodies[(i+1)%this.m_bodies.length],o=n.GetWorldCenter(),a=s.GetWorldCenter();this.m_targetLengths[i]=r.A.DistanceVV(o,a),this.m_targetArea+=r.A.CrossVV(o,a),e.Initialize(n,s,o,a),this.m_joints[i]=t.world.CreateJoint(e)}this.m_targetArea*=.5}GetAnchorA(t){return t.SetZero()}GetAnchorB(t){return t.SetZero()}GetReactionForce(t,e){return e.SetZero()}GetReactionTorque(t){return 0}SetFrequency(t){this.m_frequencyHz=t;for(let e=0;e<this.m_joints.length;++e)this.m_joints[e].SetFrequency(t)}GetFrequency(){return this.m_frequencyHz}SetDampingRatio(t){this.m_dampingRatio=t;for(let e=0;e<this.m_joints.length;++e)this.m_joints[e].SetDampingRatio(t)}GetDampingRatio(){return this.m_dampingRatio}Dump(t){t("Area joint dumping is not supported.\n")}InitVelocityConstraints(t){for(let e=0;e<this.m_bodies.length;++e){const i=this.m_bodies[(e+this.m_bodies.length-1)%this.m_bodies.length],n=this.m_bodies[(e+1)%this.m_bodies.length],s=t.positions[i.m_islandIndex].c,o=t.positions[n.m_islandIndex].c,a=this.m_deltas[e];r.A.SubVV(o,s,a)}if(t.step.warmStarting){this.m_impulse*=t.step.dtRatio;for(let e=0;e<this.m_bodies.length;++e){const i=this.m_bodies[e],n=t.velocities[i.m_islandIndex].v,s=this.m_deltas[e];n.x+=i.m_invMass*s.y*.5*this.m_impulse,n.y+=i.m_invMass*-s.x*.5*this.m_impulse}}else this.m_impulse=0}SolveVelocityConstraints(t){let e=0,i=0;for(let n=0;n<this.m_bodies.length;++n){const s=this.m_bodies[n],o=t.velocities[s.m_islandIndex].v,a=this.m_deltas[n];e+=a.LengthSquared()/s.GetMass(),i+=r.A.CrossVV(o,a)}const n=-2*i/e;this.m_impulse+=n;for(let e=0;e<this.m_bodies.length;++e){const i=this.m_bodies[e],s=t.velocities[i.m_islandIndex].v,r=this.m_deltas[e];s.x+=i.m_invMass*r.y*.5*n,s.y+=i.m_invMass*-r.x*.5*n}}SolvePositionConstraints(t){let e=0,i=0;for(let n=0;n<this.m_bodies.length;++n){const o=this.m_bodies[n],a=this.m_bodies[(n+1)%this.m_bodies.length],l=t.positions[o.m_islandIndex].c,c=t.positions[a.m_islandIndex].c,u=r.A.SubVV(c,l,this.m_delta);let h=u.Length();h<s.r&&(h=1),this.m_normals[n].x=u.y/h,this.m_normals[n].y=-u.x/h,e+=h,i+=r.A.CrossVV(l,c)}i*=.5;const n=.5*(this.m_targetArea-i)/e;let o=!0;for(let e=0;e<this.m_bodies.length;++e){const i=this.m_bodies[e],a=t.positions[i.m_islandIndex].c,l=(e+1)%this.m_bodies.length,c=r.A.AddVV(this.m_normals[e],this.m_normals[l],this.m_delta);c.SelfMul(n);const u=c.LengthSquared();u>Object(r.v)(s.y)&&c.SelfMul(s.y/Object(r.w)(u)),u>Object(r.v)(s.v)&&(o=!1),a.x+=c.x,a.y+=c.y}return o}}class oe extends te{constructor(){super(Wt.e_frictionJoint),this.localAnchorA=new r.A,this.localAnchorB=new r.A,this.maxForce=0,this.maxTorque=0}Initialize(t,e,i){this.bodyA=t,this.bodyB=e,this.bodyA.GetLocalPoint(i,this.localAnchorA),this.bodyB.GetLocalPoint(i,this.localAnchorB)}}class ae extends ee{constructor(t){super(t),this.m_localAnchorA=new r.A,this.m_localAnchorB=new r.A,this.m_linearImpulse=new r.A,this.m_angularImpulse=0,this.m_maxForce=0,this.m_maxTorque=0,this.m_indexA=0,this.m_indexB=0,this.m_rA=new r.A,this.m_rB=new r.A,this.m_localCenterA=new r.A,this.m_localCenterB=new r.A,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_linearMass=new r.k,this.m_angularMass=0,this.m_qA=new r.t,this.m_qB=new r.t,this.m_lalcA=new r.A,this.m_lalcB=new r.A,this.m_K=new r.k,this.m_localAnchorA.Copy(t.localAnchorA),this.m_localAnchorB.Copy(t.localAnchorB),this.m_linearImpulse.SetZero(),this.m_maxForce=t.maxForce,this.m_maxTorque=t.maxTorque,this.m_linearMass.SetZero()}InitVelocityConstraints(t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const e=t.positions[this.m_indexA].a,i=t.velocities[this.m_indexA].v;let n=t.velocities[this.m_indexA].w;const s=t.positions[this.m_indexB].a,o=t.velocities[this.m_indexB].v;let a=t.velocities[this.m_indexB].w;const l=this.m_qA.SetAngle(e),c=this.m_qB.SetAngle(s);r.A.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);const u=r.t.MulRV(l,this.m_lalcA,this.m_rA);r.A.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);const h=r.t.MulRV(c,this.m_lalcB,this.m_rB),d=this.m_invMassA,m=this.m_invMassB,p=this.m_invIA,f=this.m_invIB,_=this.m_K;if(_.ex.x=d+m+p*u.y*u.y+f*h.y*h.y,_.ex.y=-p*u.x*u.y-f*h.x*h.y,_.ey.x=_.ex.y,_.ey.y=d+m+p*u.x*u.x+f*h.x*h.x,_.GetInverse(this.m_linearMass),this.m_angularMass=p+f,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass),t.step.warmStarting){this.m_linearImpulse.SelfMul(t.step.dtRatio),this.m_angularImpulse*=t.step.dtRatio;const e=this.m_linearImpulse;i.SelfMulSub(d,e),n-=p*(r.A.CrossVV(this.m_rA,e)+this.m_angularImpulse),o.SelfMulAdd(m,e),a+=f*(r.A.CrossVV(this.m_rB,e)+this.m_angularImpulse)}else this.m_linearImpulse.SetZero(),this.m_angularImpulse=0;t.velocities[this.m_indexA].w=n,t.velocities[this.m_indexB].w=a}SolveVelocityConstraints(t){const e=t.velocities[this.m_indexA].v;let i=t.velocities[this.m_indexA].w;const n=t.velocities[this.m_indexB].v;let s=t.velocities[this.m_indexB].w;const o=this.m_invMassA,a=this.m_invMassB,l=this.m_invIA,c=this.m_invIB,u=t.step.dt;{const t=s-i;let e=-this.m_angularMass*t;const n=this.m_angularImpulse,o=u*this.m_maxTorque;this.m_angularImpulse=Object(r.e)(this.m_angularImpulse+e,-o,o),i-=l*(e=this.m_angularImpulse-n),s+=c*e}{const t=r.A.SubVV(r.A.AddVCrossSV(n,s,this.m_rB,r.A.s_t0),r.A.AddVCrossSV(e,i,this.m_rA,r.A.s_t1),ae.SolveVelocityConstraints_s_Cdot_v2),h=r.k.MulMV(this.m_linearMass,t,ae.SolveVelocityConstraints_s_impulseV).SelfNeg(),d=ae.SolveVelocityConstraints_s_oldImpulseV.Copy(this.m_linearImpulse);this.m_linearImpulse.SelfAdd(h);const m=u*this.m_maxForce;this.m_linearImpulse.LengthSquared()>m*m&&(this.m_linearImpulse.Normalize(),this.m_linearImpulse.SelfMul(m)),r.A.SubVV(this.m_linearImpulse,d,h),e.SelfMulSub(o,h),i-=l*r.A.CrossVV(this.m_rA,h),n.SelfMulAdd(a,h),s+=c*r.A.CrossVV(this.m_rB,h)}t.velocities[this.m_indexA].w=i,t.velocities[this.m_indexB].w=s}SolvePositionConstraints(t){return!0}GetAnchorA(t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,t)}GetAnchorB(t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,t)}GetReactionForce(t,e){return e.Set(t*this.m_linearImpulse.x,t*this.m_linearImpulse.y)}GetReactionTorque(t){return t*this.m_angularImpulse}GetLocalAnchorA(){return this.m_localAnchorA}GetLocalAnchorB(){return this.m_localAnchorB}SetMaxForce(t){this.m_maxForce=t}GetMaxForce(){return this.m_maxForce}SetMaxTorque(t){this.m_maxTorque=t}GetMaxTorque(){return this.m_maxTorque}Dump(t){const e=this.m_bodyA.m_islandIndex,i=this.m_bodyB.m_islandIndex;t("  const jd: b2FrictionJointDef = new b2FrictionJointDef();\n"),t("  jd.bodyA = bodies[%d];\n",e),t("  jd.bodyB = bodies[%d];\n",i),t("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),t("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),t("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),t("  jd.maxForce = %.15f;\n",this.m_maxForce),t("  jd.maxTorque = %.15f;\n",this.m_maxTorque),t("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}}ae.SolveVelocityConstraints_s_Cdot_v2=new r.A,ae.SolveVelocityConstraints_s_impulseV=new r.A,ae.SolveVelocityConstraints_s_oldImpulseV=new r.A;class le extends te{constructor(){super(Wt.e_gearJoint),this.joint1=null,this.joint2=null,this.ratio=1}}class ce extends ee{constructor(t){let e,i;super(t),this.m_joint1=null,this.m_joint2=null,this.m_typeA=Wt.e_unknownJoint,this.m_typeB=Wt.e_unknownJoint,this.m_bodyC=null,this.m_bodyD=null,this.m_localAnchorA=new r.A,this.m_localAnchorB=new r.A,this.m_localAnchorC=new r.A,this.m_localAnchorD=new r.A,this.m_localAxisC=new r.A,this.m_localAxisD=new r.A,this.m_referenceAngleA=0,this.m_referenceAngleB=0,this.m_constant=0,this.m_ratio=0,this.m_impulse=0,this.m_indexA=0,this.m_indexB=0,this.m_indexC=0,this.m_indexD=0,this.m_lcA=new r.A,this.m_lcB=new r.A,this.m_lcC=new r.A,this.m_lcD=new r.A,this.m_mA=0,this.m_mB=0,this.m_mC=0,this.m_mD=0,this.m_iA=0,this.m_iB=0,this.m_iC=0,this.m_iD=0,this.m_JvAC=new r.A,this.m_JvBD=new r.A,this.m_JwA=0,this.m_JwB=0,this.m_JwC=0,this.m_JwD=0,this.m_mass=0,this.m_qA=new r.t,this.m_qB=new r.t,this.m_qC=new r.t,this.m_qD=new r.t,this.m_lalcA=new r.A,this.m_lalcB=new r.A,this.m_lalcC=new r.A,this.m_lalcD=new r.A,this.m_joint1=t.joint1,this.m_joint2=t.joint2,this.m_typeA=this.m_joint1.GetType(),this.m_typeB=this.m_joint2.GetType(),this.m_bodyC=this.m_joint1.GetBodyA(),this.m_bodyA=this.m_joint1.GetBodyB();const n=this.m_bodyA.m_xf,s=this.m_bodyA.m_sweep.a,o=this.m_bodyC.m_xf,a=this.m_bodyC.m_sweep.a;if(this.m_typeA===Wt.e_revoluteJoint){const i=t.joint1;this.m_localAnchorC.Copy(i.m_localAnchorA),this.m_localAnchorA.Copy(i.m_localAnchorB),this.m_referenceAngleA=i.m_referenceAngle,this.m_localAxisC.SetZero(),e=s-a-this.m_referenceAngleA}else{const i=t.joint1;this.m_localAnchorC.Copy(i.m_localAnchorA),this.m_localAnchorA.Copy(i.m_localAnchorB),this.m_referenceAngleA=i.m_referenceAngle,this.m_localAxisC.Copy(i.m_localXAxisA);const s=this.m_localAnchorC,a=r.t.MulTRV(o.q,r.A.AddVV(r.t.MulRV(n.q,this.m_localAnchorA,r.A.s_t0),r.A.SubVV(n.p,o.p,r.A.s_t1),r.A.s_t0),r.A.s_t0);e=r.A.DotVV(r.A.SubVV(a,s,r.A.s_t0),this.m_localAxisC)}this.m_bodyD=this.m_joint2.GetBodyA(),this.m_bodyB=this.m_joint2.GetBodyB();const l=this.m_bodyB.m_xf,c=this.m_bodyB.m_sweep.a,u=this.m_bodyD.m_xf,h=this.m_bodyD.m_sweep.a;if(this.m_typeB===Wt.e_revoluteJoint){const e=t.joint2;this.m_localAnchorD.Copy(e.m_localAnchorA),this.m_localAnchorB.Copy(e.m_localAnchorB),this.m_referenceAngleB=e.m_referenceAngle,this.m_localAxisD.SetZero(),i=c-h-this.m_referenceAngleB}else{const e=t.joint2;this.m_localAnchorD.Copy(e.m_localAnchorA),this.m_localAnchorB.Copy(e.m_localAnchorB),this.m_referenceAngleB=e.m_referenceAngle,this.m_localAxisD.Copy(e.m_localXAxisA);const n=this.m_localAnchorD,s=r.t.MulTRV(u.q,r.A.AddVV(r.t.MulRV(l.q,this.m_localAnchorB,r.A.s_t0),r.A.SubVV(l.p,u.p,r.A.s_t1),r.A.s_t0),r.A.s_t0);i=r.A.DotVV(r.A.SubVV(s,n,r.A.s_t0),this.m_localAxisD)}this.m_ratio=t.ratio,this.m_constant=e+this.m_ratio*i,this.m_impulse=0}InitVelocityConstraints(t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_indexC=this.m_bodyC.m_islandIndex,this.m_indexD=this.m_bodyD.m_islandIndex,this.m_lcA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_lcB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_lcC.Copy(this.m_bodyC.m_sweep.localCenter),this.m_lcD.Copy(this.m_bodyD.m_sweep.localCenter),this.m_mA=this.m_bodyA.m_invMass,this.m_mB=this.m_bodyB.m_invMass,this.m_mC=this.m_bodyC.m_invMass,this.m_mD=this.m_bodyD.m_invMass,this.m_iA=this.m_bodyA.m_invI,this.m_iB=this.m_bodyB.m_invI,this.m_iC=this.m_bodyC.m_invI,this.m_iD=this.m_bodyD.m_invI;const e=t.positions[this.m_indexA].a,i=t.velocities[this.m_indexA].v;let n=t.velocities[this.m_indexA].w;const s=t.positions[this.m_indexB].a,o=t.velocities[this.m_indexB].v;let a=t.velocities[this.m_indexB].w;const l=t.positions[this.m_indexC].a,c=t.velocities[this.m_indexC].v;let u=t.velocities[this.m_indexC].w;const h=t.positions[this.m_indexD].a,d=t.velocities[this.m_indexD].v;let m=t.velocities[this.m_indexD].w;const p=this.m_qA.SetAngle(e),f=this.m_qB.SetAngle(s),_=this.m_qC.SetAngle(l),g=this.m_qD.SetAngle(h);if(this.m_mass=0,this.m_typeA===Wt.e_revoluteJoint)this.m_JvAC.SetZero(),this.m_JwA=1,this.m_JwC=1,this.m_mass+=this.m_iA+this.m_iC;else{const t=r.t.MulRV(_,this.m_localAxisC,ce.InitVelocityConstraints_s_u);r.A.SubVV(this.m_localAnchorC,this.m_lcC,this.m_lalcC);const e=r.t.MulRV(_,this.m_lalcC,ce.InitVelocityConstraints_s_rC);r.A.SubVV(this.m_localAnchorA,this.m_lcA,this.m_lalcA);const i=r.t.MulRV(p,this.m_lalcA,ce.InitVelocityConstraints_s_rA);this.m_JvAC.Copy(t),this.m_JwC=r.A.CrossVV(e,t),this.m_JwA=r.A.CrossVV(i,t),this.m_mass+=this.m_mC+this.m_mA+this.m_iC*this.m_JwC*this.m_JwC+this.m_iA*this.m_JwA*this.m_JwA}if(this.m_typeB===Wt.e_revoluteJoint)this.m_JvBD.SetZero(),this.m_JwB=this.m_ratio,this.m_JwD=this.m_ratio,this.m_mass+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD);else{const t=r.t.MulRV(g,this.m_localAxisD,ce.InitVelocityConstraints_s_u);r.A.SubVV(this.m_localAnchorD,this.m_lcD,this.m_lalcD);const e=r.t.MulRV(g,this.m_lalcD,ce.InitVelocityConstraints_s_rD);r.A.SubVV(this.m_localAnchorB,this.m_lcB,this.m_lalcB);const i=r.t.MulRV(f,this.m_lalcB,ce.InitVelocityConstraints_s_rB);r.A.MulSV(this.m_ratio,t,this.m_JvBD),this.m_JwD=this.m_ratio*r.A.CrossVV(e,t),this.m_JwB=this.m_ratio*r.A.CrossVV(i,t),this.m_mass+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*this.m_JwD*this.m_JwD+this.m_iB*this.m_JwB*this.m_JwB}this.m_mass=this.m_mass>0?1/this.m_mass:0,t.step.warmStarting?(i.SelfMulAdd(this.m_mA*this.m_impulse,this.m_JvAC),n+=this.m_iA*this.m_impulse*this.m_JwA,o.SelfMulAdd(this.m_mB*this.m_impulse,this.m_JvBD),a+=this.m_iB*this.m_impulse*this.m_JwB,c.SelfMulSub(this.m_mC*this.m_impulse,this.m_JvAC),u-=this.m_iC*this.m_impulse*this.m_JwC,d.SelfMulSub(this.m_mD*this.m_impulse,this.m_JvBD),m-=this.m_iD*this.m_impulse*this.m_JwD):this.m_impulse=0,t.velocities[this.m_indexA].w=n,t.velocities[this.m_indexB].w=a,t.velocities[this.m_indexC].w=u,t.velocities[this.m_indexD].w=m}SolveVelocityConstraints(t){const e=t.velocities[this.m_indexA].v;let i=t.velocities[this.m_indexA].w;const n=t.velocities[this.m_indexB].v;let s=t.velocities[this.m_indexB].w;const o=t.velocities[this.m_indexC].v;let a=t.velocities[this.m_indexC].w;const l=t.velocities[this.m_indexD].v;let c=t.velocities[this.m_indexD].w,u=r.A.DotVV(this.m_JvAC,r.A.SubVV(e,o,r.A.s_t0))+r.A.DotVV(this.m_JvBD,r.A.SubVV(n,l,r.A.s_t0));u+=this.m_JwA*i-this.m_JwC*a+(this.m_JwB*s-this.m_JwD*c);const h=-this.m_mass*u;this.m_impulse+=h,e.SelfMulAdd(this.m_mA*h,this.m_JvAC),i+=this.m_iA*h*this.m_JwA,n.SelfMulAdd(this.m_mB*h,this.m_JvBD),s+=this.m_iB*h*this.m_JwB,o.SelfMulSub(this.m_mC*h,this.m_JvAC),a-=this.m_iC*h*this.m_JwC,l.SelfMulSub(this.m_mD*h,this.m_JvBD),c-=this.m_iD*h*this.m_JwD,t.velocities[this.m_indexA].w=i,t.velocities[this.m_indexB].w=s,t.velocities[this.m_indexC].w=a,t.velocities[this.m_indexD].w=c}SolvePositionConstraints(t){const e=t.positions[this.m_indexA].c;let i=t.positions[this.m_indexA].a;const n=t.positions[this.m_indexB].c;let o=t.positions[this.m_indexB].a;const a=t.positions[this.m_indexC].c;let l=t.positions[this.m_indexC].a;const c=t.positions[this.m_indexD].c;let u=t.positions[this.m_indexD].a;const h=this.m_qA.SetAngle(i),d=this.m_qB.SetAngle(o),m=this.m_qC.SetAngle(l),p=this.m_qD.SetAngle(u);let f,_;const g=this.m_JvAC,v=this.m_JvBD;let y,x,b,A,w=0;if(this.m_typeA===Wt.e_revoluteJoint)g.SetZero(),y=1,b=1,w+=this.m_iA+this.m_iC,f=i-l-this.m_referenceAngleA;else{const t=r.t.MulRV(m,this.m_localAxisC,ce.SolvePositionConstraints_s_u),i=r.t.MulRV(m,this.m_lalcC,ce.SolvePositionConstraints_s_rC),n=r.t.MulRV(h,this.m_lalcA,ce.SolvePositionConstraints_s_rA);g.Copy(t),b=r.A.CrossVV(i,t),y=r.A.CrossVV(n,t),w+=this.m_mC+this.m_mA+this.m_iC*b*b+this.m_iA*y*y;const s=this.m_lalcC,o=r.t.MulTRV(m,r.A.AddVV(n,r.A.SubVV(e,a,r.A.s_t0),r.A.s_t0),r.A.s_t0);f=r.A.DotVV(r.A.SubVV(o,s,r.A.s_t0),this.m_localAxisC)}if(this.m_typeB===Wt.e_revoluteJoint)v.SetZero(),x=this.m_ratio,A=this.m_ratio,w+=this.m_ratio*this.m_ratio*(this.m_iB+this.m_iD),_=o-u-this.m_referenceAngleB;else{const t=r.t.MulRV(p,this.m_localAxisD,ce.SolvePositionConstraints_s_u),e=r.t.MulRV(p,this.m_lalcD,ce.SolvePositionConstraints_s_rD),i=r.t.MulRV(d,this.m_lalcB,ce.SolvePositionConstraints_s_rB);r.A.MulSV(this.m_ratio,t,v),A=this.m_ratio*r.A.CrossVV(e,t),x=this.m_ratio*r.A.CrossVV(i,t),w+=this.m_ratio*this.m_ratio*(this.m_mD+this.m_mB)+this.m_iD*A*A+this.m_iB*x*x;const s=this.m_lalcD,o=r.t.MulTRV(p,r.A.AddVV(i,r.A.SubVV(n,c,r.A.s_t0),r.A.s_t0),r.A.s_t0);_=r.A.DotVV(r.A.SubVV(o,s,r.A.s_t0),this.m_localAxisD)}const S=f+this.m_ratio*_-this.m_constant;let C=0;return w>0&&(C=-S/w),e.SelfMulAdd(this.m_mA*C,g),i+=this.m_iA*C*y,n.SelfMulAdd(this.m_mB*C,v),o+=this.m_iB*C*x,a.SelfMulSub(this.m_mC*C,g),l-=this.m_iC*C*b,c.SelfMulSub(this.m_mD*C,v),u-=this.m_iD*C*A,t.positions[this.m_indexA].a=i,t.positions[this.m_indexB].a=o,t.positions[this.m_indexC].a=l,t.positions[this.m_indexD].a=u,0<s.v}GetAnchorA(t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,t)}GetAnchorB(t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,t)}GetReactionForce(t,e){return r.A.MulSV(t*this.m_impulse,this.m_JvAC,e)}GetReactionTorque(t){return t*this.m_impulse*this.m_JwA}GetJoint1(){return this.m_joint1}GetJoint2(){return this.m_joint2}GetRatio(){return this.m_ratio}SetRatio(t){this.m_ratio=t}Dump(t){const e=this.m_bodyA.m_islandIndex,i=this.m_bodyB.m_islandIndex,n=this.m_joint1.m_index,s=this.m_joint2.m_index;t("  const jd: b2GearJointDef = new b2GearJointDef();\n"),t("  jd.bodyA = bodies[%d];\n",e),t("  jd.bodyB = bodies[%d];\n",i),t("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),t("  jd.joint1 = joints[%d];\n",n),t("  jd.joint2 = joints[%d];\n",s),t("  jd.ratio = %.15f;\n",this.m_ratio),t("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}}ce.InitVelocityConstraints_s_u=new r.A,ce.InitVelocityConstraints_s_rA=new r.A,ce.InitVelocityConstraints_s_rB=new r.A,ce.InitVelocityConstraints_s_rC=new r.A,ce.InitVelocityConstraints_s_rD=new r.A,ce.SolvePositionConstraints_s_u=new r.A,ce.SolvePositionConstraints_s_rA=new r.A,ce.SolvePositionConstraints_s_rB=new r.A,ce.SolvePositionConstraints_s_rC=new r.A,ce.SolvePositionConstraints_s_rD=new r.A;class ue extends te{constructor(){super(Wt.e_motorJoint),this.linearOffset=new r.A(0,0),this.angularOffset=0,this.maxForce=1,this.maxTorque=1,this.correctionFactor=.3}Initialize(t,e){this.bodyA=t,this.bodyB=e,this.bodyA.GetLocalPoint(this.bodyB.GetPosition(),this.linearOffset);const i=this.bodyA.GetAngle(),n=this.bodyB.GetAngle();this.angularOffset=n-i}}class he extends ee{constructor(t){super(t),this.m_linearOffset=new r.A,this.m_angularOffset=0,this.m_linearImpulse=new r.A,this.m_angularImpulse=0,this.m_maxForce=0,this.m_maxTorque=0,this.m_correctionFactor=.3,this.m_indexA=0,this.m_indexB=0,this.m_rA=new r.A,this.m_rB=new r.A,this.m_localCenterA=new r.A,this.m_localCenterB=new r.A,this.m_linearError=new r.A,this.m_angularError=0,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_linearMass=new r.k,this.m_angularMass=0,this.m_qA=new r.t,this.m_qB=new r.t,this.m_K=new r.k,this.m_linearOffset.Copy(t.linearOffset),this.m_linearImpulse.SetZero(),this.m_maxForce=t.maxForce,this.m_maxTorque=t.maxTorque,this.m_correctionFactor=t.correctionFactor}GetAnchorA(){return this.m_bodyA.GetPosition()}GetAnchorB(){return this.m_bodyB.GetPosition()}GetReactionForce(t,e){return r.A.MulSV(t,this.m_linearImpulse,e)}GetReactionTorque(t){return t*this.m_angularImpulse}SetLinearOffset(t){r.A.IsEqualToV(t,this.m_linearOffset)||(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_linearOffset.Copy(t))}GetLinearOffset(){return this.m_linearOffset}SetAngularOffset(t){t!==this.m_angularOffset&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_angularOffset=t)}GetAngularOffset(){return this.m_angularOffset}SetMaxForce(t){this.m_maxForce=t}GetMaxForce(){return this.m_maxForce}SetMaxTorque(t){this.m_maxTorque=t}GetMaxTorque(){return this.m_maxTorque}InitVelocityConstraints(t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const e=t.positions[this.m_indexA].c,i=t.positions[this.m_indexA].a,n=t.velocities[this.m_indexA].v;let s=t.velocities[this.m_indexA].w;const o=t.positions[this.m_indexB].c,a=t.positions[this.m_indexB].a,l=t.velocities[this.m_indexB].v;let c=t.velocities[this.m_indexB].w;const u=this.m_qA.SetAngle(i),h=this.m_qB.SetAngle(a),d=r.t.MulRV(u,r.A.SubVV(this.m_linearOffset,this.m_localCenterA,r.A.s_t0),this.m_rA),m=r.t.MulRV(h,r.A.NegV(this.m_localCenterB,r.A.s_t0),this.m_rB),p=this.m_invMassA,f=this.m_invMassB,_=this.m_invIA,g=this.m_invIB,v=this.m_K;if(v.ex.x=p+f+_*d.y*d.y+g*m.y*m.y,v.ex.y=-_*d.x*d.y-g*m.x*m.y,v.ey.x=v.ex.y,v.ey.y=p+f+_*d.x*d.x+g*m.x*m.x,v.GetInverse(this.m_linearMass),this.m_angularMass=_+g,this.m_angularMass>0&&(this.m_angularMass=1/this.m_angularMass),r.A.SubVV(r.A.AddVV(o,m,r.A.s_t0),r.A.AddVV(e,d,r.A.s_t1),this.m_linearError),this.m_angularError=a-i-this.m_angularOffset,t.step.warmStarting){this.m_linearImpulse.SelfMul(t.step.dtRatio),this.m_angularImpulse*=t.step.dtRatio;const e=this.m_linearImpulse;n.SelfMulSub(p,e),s-=_*(r.A.CrossVV(d,e)+this.m_angularImpulse),l.SelfMulAdd(f,e),c+=g*(r.A.CrossVV(m,e)+this.m_angularImpulse)}else this.m_linearImpulse.SetZero(),this.m_angularImpulse=0;t.velocities[this.m_indexA].w=s,t.velocities[this.m_indexB].w=c}SolveVelocityConstraints(t){const e=t.velocities[this.m_indexA].v;let i=t.velocities[this.m_indexA].w;const n=t.velocities[this.m_indexB].v;let s=t.velocities[this.m_indexB].w;const o=this.m_invMassA,a=this.m_invMassB,l=this.m_invIA,c=this.m_invIB,u=t.step.dt,h=t.step.inv_dt;{const t=s-i+h*this.m_correctionFactor*this.m_angularError;let e=-this.m_angularMass*t;const n=this.m_angularImpulse,o=u*this.m_maxTorque;this.m_angularImpulse=Object(r.e)(this.m_angularImpulse+e,-o,o),i-=l*(e=this.m_angularImpulse-n),s+=c*e}{const t=this.m_rA,d=this.m_rB,m=r.A.AddVV(r.A.SubVV(r.A.AddVV(n,r.A.CrossSV(s,d,r.A.s_t0),r.A.s_t0),r.A.AddVV(e,r.A.CrossSV(i,t,r.A.s_t1),r.A.s_t1),r.A.s_t2),r.A.MulSV(h*this.m_correctionFactor,this.m_linearError,r.A.s_t3),he.SolveVelocityConstraints_s_Cdot_v2),p=r.k.MulMV(this.m_linearMass,m,he.SolveVelocityConstraints_s_impulse_v2).SelfNeg(),f=he.SolveVelocityConstraints_s_oldImpulse_v2.Copy(this.m_linearImpulse);this.m_linearImpulse.SelfAdd(p);const _=u*this.m_maxForce;this.m_linearImpulse.LengthSquared()>_*_&&(this.m_linearImpulse.Normalize(),this.m_linearImpulse.SelfMul(_)),r.A.SubVV(this.m_linearImpulse,f,p),e.SelfMulSub(o,p),i-=l*r.A.CrossVV(t,p),n.SelfMulAdd(a,p),s+=c*r.A.CrossVV(d,p)}t.velocities[this.m_indexA].w=i,t.velocities[this.m_indexB].w=s}SolvePositionConstraints(t){return!0}Dump(t){const e=this.m_bodyA.m_islandIndex,i=this.m_bodyB.m_islandIndex;t("  const jd: b2MotorJointDef = new b2MotorJointDef();\n"),t("  jd.bodyA = bodies[%d];\n",e),t("  jd.bodyB = bodies[%d];\n",i),t("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),t("  jd.linearOffset.Set(%.15f, %.15f);\n",this.m_linearOffset.x,this.m_linearOffset.y),t("  jd.angularOffset = %.15f;\n",this.m_angularOffset),t("  jd.maxForce = %.15f;\n",this.m_maxForce),t("  jd.maxTorque = %.15f;\n",this.m_maxTorque),t("  jd.correctionFactor = %.15f;\n",this.m_correctionFactor),t("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}}he.SolveVelocityConstraints_s_Cdot_v2=new r.A,he.SolveVelocityConstraints_s_impulse_v2=new r.A,he.SolveVelocityConstraints_s_oldImpulse_v2=new r.A;class de extends te{constructor(){super(Wt.e_mouseJoint),this.target=new r.A,this.maxForce=0,this.frequencyHz=5,this.dampingRatio=.7}}class me extends ee{constructor(t){super(t),this.m_localAnchorB=null,this.m_targetA=null,this.m_frequencyHz=0,this.m_dampingRatio=0,this.m_beta=0,this.m_impulse=null,this.m_maxForce=0,this.m_gamma=0,this.m_indexA=0,this.m_indexB=0,this.m_rB=null,this.m_localCenterB=null,this.m_invMassB=0,this.m_invIB=0,this.m_mass=null,this.m_C=null,this.m_qB=null,this.m_lalcB=null,this.m_K=null,this.m_localAnchorB=new r.A,this.m_targetA=new r.A,this.m_impulse=new r.A,this.m_rB=new r.A,this.m_localCenterB=new r.A,this.m_mass=new r.k,this.m_C=new r.A,this.m_qB=new r.t,this.m_lalcB=new r.A,this.m_K=new r.k,this.m_targetA.Copy(t.target),r.z.MulTXV(this.m_bodyB.GetTransform(),this.m_targetA,this.m_localAnchorB),this.m_maxForce=t.maxForce,this.m_impulse.SetZero(),this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_beta=0,this.m_gamma=0}SetTarget(t){this.m_bodyB.IsAwake()||this.m_bodyB.SetAwake(!0),this.m_targetA.Copy(t)}GetTarget(){return this.m_targetA}SetMaxForce(t){this.m_maxForce=t}GetMaxForce(){return this.m_maxForce}SetFrequency(t){this.m_frequencyHz=t}GetFrequency(){return this.m_frequencyHz}SetDampingRatio(t){this.m_dampingRatio=t}GetDampingRatio(){return this.m_dampingRatio}InitVelocityConstraints(t){this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIB=this.m_bodyB.m_invI;const e=t.positions[this.m_indexB].c,i=t.positions[this.m_indexB].a,n=t.velocities[this.m_indexB].v;let o=t.velocities[this.m_indexB].w;const a=this.m_qB.SetAngle(i),l=this.m_bodyB.GetMass(),c=2*s.P*this.m_frequencyHz,u=2*l*this.m_dampingRatio*c,h=l*(c*c),d=t.step.dt;this.m_gamma=d*(u+d*h),0!==this.m_gamma&&(this.m_gamma=1/this.m_gamma),this.m_beta=d*h*this.m_gamma,r.A.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),r.t.MulRV(a,this.m_lalcB,this.m_rB);const m=this.m_K;m.ex.x=this.m_invMassB+this.m_invIB*this.m_rB.y*this.m_rB.y+this.m_gamma,m.ex.y=-this.m_invIB*this.m_rB.x*this.m_rB.y,m.ey.x=m.ex.y,m.ey.y=this.m_invMassB+this.m_invIB*this.m_rB.x*this.m_rB.x+this.m_gamma,m.GetInverse(this.m_mass),this.m_C.x=e.x+this.m_rB.x-this.m_targetA.x,this.m_C.y=e.y+this.m_rB.y-this.m_targetA.y,this.m_C.SelfMul(this.m_beta),o*=.98,t.step.warmStarting?(this.m_impulse.SelfMul(t.step.dtRatio),n.x+=this.m_invMassB*this.m_impulse.x,n.y+=this.m_invMassB*this.m_impulse.y,o+=this.m_invIB*r.A.CrossVV(this.m_rB,this.m_impulse)):this.m_impulse.SetZero(),t.velocities[this.m_indexB].w=o}SolveVelocityConstraints(t){const e=t.velocities[this.m_indexB].v;let i=t.velocities[this.m_indexB].w;const n=r.A.AddVCrossSV(e,i,this.m_rB,me.SolveVelocityConstraints_s_Cdot),s=r.k.MulMV(this.m_mass,r.A.AddVV(n,r.A.AddVV(this.m_C,r.A.MulSV(this.m_gamma,this.m_impulse,r.A.s_t0),r.A.s_t0),r.A.s_t0).SelfNeg(),me.SolveVelocityConstraints_s_impulse),o=me.SolveVelocityConstraints_s_oldImpulse.Copy(this.m_impulse);this.m_impulse.SelfAdd(s);const a=t.step.dt*this.m_maxForce;this.m_impulse.LengthSquared()>a*a&&this.m_impulse.SelfMul(a/this.m_impulse.Length()),r.A.SubVV(this.m_impulse,o,s),e.SelfMulAdd(this.m_invMassB,s),i+=this.m_invIB*r.A.CrossVV(this.m_rB,s),t.velocities[this.m_indexB].w=i}SolvePositionConstraints(t){return!0}GetAnchorA(t){return t.Copy(this.m_targetA)}GetAnchorB(t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,t)}GetReactionForce(t,e){return r.A.MulSV(t,this.m_impulse,e)}GetReactionTorque(t){return 0}Dump(t){t("Mouse joint dumping is not supported.\n")}ShiftOrigin(t){this.m_targetA.SelfSub(t)}}me.SolveVelocityConstraints_s_Cdot=new r.A,me.SolveVelocityConstraints_s_impulse=new r.A,me.SolveVelocityConstraints_s_oldImpulse=new r.A;class pe extends te{constructor(){super(Wt.e_prismaticJoint),this.localAnchorA=null,this.localAnchorB=null,this.localAxisA=null,this.referenceAngle=0,this.enableLimit=!1,this.lowerTranslation=0,this.upperTranslation=0,this.enableMotor=!1,this.maxMotorForce=0,this.motorSpeed=0,this.localAnchorA=new r.A,this.localAnchorB=new r.A,this.localAxisA=new r.A(1,0)}Initialize(t,e,i,n){this.bodyA=t,this.bodyB=e,this.bodyA.GetLocalPoint(i,this.localAnchorA),this.bodyB.GetLocalPoint(i,this.localAnchorB),this.bodyA.GetLocalVector(n,this.localAxisA),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()}}class fe extends ee{constructor(t){super(t),this.m_localAnchorA=new r.A,this.m_localAnchorB=new r.A,this.m_localXAxisA=new r.A,this.m_localYAxisA=new r.A,this.m_referenceAngle=0,this.m_impulse=new r.C(0,0,0),this.m_motorImpulse=0,this.m_lowerTranslation=0,this.m_upperTranslation=0,this.m_maxMotorForce=0,this.m_motorSpeed=0,this.m_enableLimit=!1,this.m_enableMotor=!1,this.m_limitState=Jt.e_inactiveLimit,this.m_indexA=0,this.m_indexB=0,this.m_localCenterA=new r.A,this.m_localCenterB=new r.A,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_axis=new r.A(0,0),this.m_perp=new r.A(0,0),this.m_s1=0,this.m_s2=0,this.m_a1=0,this.m_a2=0,this.m_K=new r.l,this.m_K3=new r.l,this.m_K2=new r.k,this.m_motorMass=0,this.m_qA=new r.t,this.m_qB=new r.t,this.m_lalcA=new r.A,this.m_lalcB=new r.A,this.m_rA=new r.A,this.m_rB=new r.A,this.m_localAnchorA.Copy(t.localAnchorA),this.m_localAnchorB.Copy(t.localAnchorB),this.m_localXAxisA.Copy(t.localAxisA).SelfNormalize(),r.A.CrossOneV(this.m_localXAxisA,this.m_localYAxisA),this.m_referenceAngle=t.referenceAngle,this.m_lowerTranslation=t.lowerTranslation,this.m_upperTranslation=t.upperTranslation,this.m_maxMotorForce=t.maxMotorForce,this.m_motorSpeed=t.motorSpeed,this.m_enableLimit=t.enableLimit,this.m_enableMotor=t.enableMotor}InitVelocityConstraints(t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const e=t.positions[this.m_indexA].c,i=t.positions[this.m_indexA].a,n=t.velocities[this.m_indexA].v;let o=t.velocities[this.m_indexA].w;const a=t.positions[this.m_indexB].c,l=t.positions[this.m_indexB].a,c=t.velocities[this.m_indexB].v;let u=t.velocities[this.m_indexB].w;const h=this.m_qA.SetAngle(i),d=this.m_qB.SetAngle(l);r.A.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);const m=r.t.MulRV(h,this.m_lalcA,this.m_rA);r.A.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);const p=r.t.MulRV(d,this.m_lalcB,this.m_rB),f=r.A.AddVV(r.A.SubVV(a,e,r.A.s_t0),r.A.SubVV(p,m,r.A.s_t1),fe.InitVelocityConstraints_s_d),_=this.m_invMassA,g=this.m_invMassB,v=this.m_invIA,y=this.m_invIB;if(r.t.MulRV(h,this.m_localXAxisA,this.m_axis),this.m_a1=r.A.CrossVV(r.A.AddVV(f,m,r.A.s_t0),this.m_axis),this.m_a2=r.A.CrossVV(p,this.m_axis),this.m_motorMass=_+g+v*this.m_a1*this.m_a1+y*this.m_a2*this.m_a2,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass),r.t.MulRV(h,this.m_localYAxisA,this.m_perp),this.m_s1=r.A.CrossVV(r.A.AddVV(f,m,r.A.s_t0),this.m_perp),this.m_s2=r.A.CrossVV(p,this.m_perp),this.m_K.ex.x=_+g+v*this.m_s1*this.m_s1+y*this.m_s2*this.m_s2,this.m_K.ex.y=v*this.m_s1+y*this.m_s2,this.m_K.ex.z=v*this.m_s1*this.m_a1+y*this.m_s2*this.m_a2,this.m_K.ey.x=this.m_K.ex.y,this.m_K.ey.y=v+y,0===this.m_K.ey.y&&(this.m_K.ey.y=1),this.m_K.ey.z=v*this.m_a1+y*this.m_a2,this.m_K.ez.x=this.m_K.ex.z,this.m_K.ez.y=this.m_K.ey.z,this.m_K.ez.z=_+g+v*this.m_a1*this.m_a1+y*this.m_a2*this.m_a2,this.m_enableLimit){const t=r.A.DotVV(this.m_axis,f);Object(r.a)(this.m_upperTranslation-this.m_lowerTranslation)<2*s.v?this.m_limitState=Jt.e_equalLimits:t<=this.m_lowerTranslation?this.m_limitState!==Jt.e_atLowerLimit&&(this.m_limitState=Jt.e_atLowerLimit,this.m_impulse.z=0):t>=this.m_upperTranslation?this.m_limitState!==Jt.e_atUpperLimit&&(this.m_limitState=Jt.e_atUpperLimit,this.m_impulse.z=0):(this.m_limitState=Jt.e_inactiveLimit,this.m_impulse.z=0)}else this.m_limitState=Jt.e_inactiveLimit,this.m_impulse.z=0;if(this.m_enableMotor||(this.m_motorImpulse=0),t.step.warmStarting){this.m_impulse.SelfMul(t.step.dtRatio),this.m_motorImpulse*=t.step.dtRatio;const e=r.A.AddVV(r.A.MulSV(this.m_impulse.x,this.m_perp,r.A.s_t0),r.A.MulSV(this.m_motorImpulse+this.m_impulse.z,this.m_axis,r.A.s_t1),fe.InitVelocityConstraints_s_P),i=this.m_impulse.x*this.m_s1+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a1,s=this.m_impulse.x*this.m_s2+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a2;n.SelfMulSub(_,e),o-=v*i,c.SelfMulAdd(g,e),u+=y*s}else this.m_impulse.SetZero(),this.m_motorImpulse=0;t.velocities[this.m_indexA].w=o,t.velocities[this.m_indexB].w=u}SolveVelocityConstraints(t){const e=t.velocities[this.m_indexA].v;let i=t.velocities[this.m_indexA].w;const n=t.velocities[this.m_indexB].v;let s=t.velocities[this.m_indexB].w;const o=this.m_invMassA,a=this.m_invMassB,l=this.m_invIA,c=this.m_invIB;if(this.m_enableMotor&&this.m_limitState!==Jt.e_equalLimits){const u=r.A.DotVV(this.m_axis,r.A.SubVV(n,e,r.A.s_t0))+this.m_a2*s-this.m_a1*i;let h=this.m_motorMass*(this.m_motorSpeed-u);const d=this.m_motorImpulse,m=t.step.dt*this.m_maxMotorForce;this.m_motorImpulse=Object(r.e)(this.m_motorImpulse+h,-m,m),h=this.m_motorImpulse-d;const p=r.A.MulSV(h,this.m_axis,fe.SolveVelocityConstraints_s_P),f=h*this.m_a1,_=h*this.m_a2;e.SelfMulSub(o,p),i-=l*f,n.SelfMulAdd(a,p),s+=c*_}const u=r.A.DotVV(this.m_perp,r.A.SubVV(n,e,r.A.s_t0))+this.m_s2*s-this.m_s1*i,h=s-i;if(this.m_enableLimit&&this.m_limitState!==Jt.e_inactiveLimit){const t=r.A.DotVV(this.m_axis,r.A.SubVV(n,e,r.A.s_t0))+this.m_a2*s-this.m_a1*i,d=fe.SolveVelocityConstraints_s_f1.Copy(this.m_impulse),m=this.m_K.Solve33(-u,-h,-t,fe.SolveVelocityConstraints_s_df3);this.m_impulse.SelfAdd(m),this.m_limitState===Jt.e_atLowerLimit?this.m_impulse.z=Object(r.m)(this.m_impulse.z,0):this.m_limitState===Jt.e_atUpperLimit&&(this.m_impulse.z=Object(r.n)(this.m_impulse.z,0));const p=-u-(this.m_impulse.z-d.z)*this.m_K.ez.x,f=-h-(this.m_impulse.z-d.z)*this.m_K.ez.y,_=this.m_K.Solve22(p,f,fe.SolveVelocityConstraints_s_f2r);_.x+=d.x,_.y+=d.y,this.m_impulse.x=_.x,this.m_impulse.y=_.y,m.x=this.m_impulse.x-d.x,m.y=this.m_impulse.y-d.y,m.z=this.m_impulse.z-d.z;const g=r.A.AddVV(r.A.MulSV(m.x,this.m_perp,r.A.s_t0),r.A.MulSV(m.z,this.m_axis,r.A.s_t1),fe.SolveVelocityConstraints_s_P),v=m.x*this.m_s1+m.y+m.z*this.m_a1,y=m.x*this.m_s2+m.y+m.z*this.m_a2;e.SelfMulSub(o,g),i-=l*v,n.SelfMulAdd(a,g),s+=c*y}else{const t=this.m_K.Solve22(-u,-h,fe.SolveVelocityConstraints_s_df2);this.m_impulse.x+=t.x,this.m_impulse.y+=t.y;const d=r.A.MulSV(t.x,this.m_perp,fe.SolveVelocityConstraints_s_P),m=t.x*this.m_s1+t.y,p=t.x*this.m_s2+t.y;e.SelfMulSub(o,d),i-=l*m,n.SelfMulAdd(a,d),s+=c*p}t.velocities[this.m_indexA].w=i,t.velocities[this.m_indexB].w=s}SolvePositionConstraints(t){const e=t.positions[this.m_indexA].c;let i=t.positions[this.m_indexA].a;const n=t.positions[this.m_indexB].c;let o=t.positions[this.m_indexB].a;const a=this.m_qA.SetAngle(i),l=this.m_qB.SetAngle(o),c=this.m_invMassA,u=this.m_invMassB,h=this.m_invIA,d=this.m_invIB,m=r.t.MulRV(a,this.m_lalcA,this.m_rA),p=r.t.MulRV(l,this.m_lalcB,this.m_rB),f=r.A.SubVV(r.A.AddVV(n,p,r.A.s_t0),r.A.AddVV(e,m,r.A.s_t1),fe.SolvePositionConstraints_s_d),_=r.t.MulRV(a,this.m_localXAxisA,this.m_axis),g=r.A.CrossVV(r.A.AddVV(f,m,r.A.s_t0),_),v=r.A.CrossVV(p,_),y=r.t.MulRV(a,this.m_localYAxisA,this.m_perp),x=r.A.CrossVV(r.A.AddVV(f,m,r.A.s_t0),y),b=r.A.CrossVV(p,y);let A=fe.SolvePositionConstraints_s_impulse;const w=r.A.DotVV(y,f),S=o-i-this.m_referenceAngle;let C=Object(r.a)(w),B=Object(r.a)(S),V=!1,M=0;if(this.m_enableLimit){const t=r.A.DotVV(_,f);Object(r.a)(this.m_upperTranslation-this.m_lowerTranslation)<2*s.v?(M=Object(r.e)(t,-s.y,s.y),C=Object(r.m)(C,Object(r.a)(t)),V=!0):t<=this.m_lowerTranslation?(M=Object(r.e)(t-this.m_lowerTranslation+s.v,-s.y,0),C=Object(r.m)(C,this.m_lowerTranslation-t),V=!0):t>=this.m_upperTranslation&&(M=Object(r.e)(t-this.m_upperTranslation-s.v,0,s.y),C=Object(r.m)(C,t-this.m_upperTranslation),V=!0)}if(V){const t=c+u+h*x*x+d*b*b,e=h*x+d*b,i=h*x*g+d*b*v;let n=h+d;0===n&&(n=1);const s=h*g+d*v,r=c+u+h*g*g+d*v*v,o=this.m_K3;o.ex.SetXYZ(t,e,i),o.ey.SetXYZ(e,n,s),o.ez.SetXYZ(i,s,r),A=o.Solve33(-w,-S,-M,A)}else{const t=c+u+h*x*x+d*b*b,e=h*x+d*b;let i=h+d;0===i&&(i=1);const n=this.m_K2;n.ex.Set(t,e),n.ey.Set(e,i);const s=n.Solve(-w,-S,fe.SolvePositionConstraints_s_impulse1);A.x=s.x,A.y=s.y,A.z=0}const k=r.A.AddVV(r.A.MulSV(A.x,y,r.A.s_t0),r.A.MulSV(A.z,_,r.A.s_t1),fe.SolvePositionConstraints_s_P),P=A.x*x+A.y+A.z*g,I=A.x*b+A.y+A.z*v;return e.SelfMulSub(c,k),i-=h*P,n.SelfMulAdd(u,k),o+=d*I,t.positions[this.m_indexA].a=i,t.positions[this.m_indexB].a=o,C<=s.v&&B<=s.n}GetAnchorA(t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,t)}GetAnchorB(t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,t)}GetReactionForce(t,e){return e.Set(t*(this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.x),t*(this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.y))}GetReactionTorque(t){return t*this.m_impulse.y}GetLocalAnchorA(){return this.m_localAnchorA}GetLocalAnchorB(){return this.m_localAnchorB}GetLocalAxisA(){return this.m_localXAxisA}GetReferenceAngle(){return this.m_referenceAngle}GetJointTranslation(){const t=this.m_bodyA.GetWorldPoint(this.m_localAnchorA,fe.GetJointTranslation_s_pA),e=this.m_bodyB.GetWorldPoint(this.m_localAnchorB,fe.GetJointTranslation_s_pB),i=r.A.SubVV(e,t,fe.GetJointTranslation_s_d),n=this.m_bodyA.GetWorldVector(this.m_localXAxisA,fe.GetJointTranslation_s_axis);return r.A.DotVV(i,n)}GetJointSpeed(){const t=this.m_bodyA,e=this.m_bodyB;r.A.SubVV(this.m_localAnchorA,t.m_sweep.localCenter,this.m_lalcA);const i=r.t.MulRV(t.m_xf.q,this.m_lalcA,this.m_rA);r.A.SubVV(this.m_localAnchorB,e.m_sweep.localCenter,this.m_lalcB);const n=r.t.MulRV(e.m_xf.q,this.m_lalcB,this.m_rB),s=r.A.AddVV(t.m_sweep.c,i,r.A.s_t0),o=r.A.AddVV(e.m_sweep.c,n,r.A.s_t1),a=r.A.SubVV(o,s,r.A.s_t2),l=t.GetWorldVector(this.m_localXAxisA,this.m_axis),c=t.m_linearVelocity,u=e.m_linearVelocity,h=t.m_angularVelocity,d=e.m_angularVelocity;return r.A.DotVV(a,r.A.CrossSV(h,l,r.A.s_t0))+r.A.DotVV(l,r.A.SubVV(r.A.AddVCrossSV(u,d,n,r.A.s_t0),r.A.AddVCrossSV(c,h,i,r.A.s_t1),r.A.s_t0))}IsLimitEnabled(){return this.m_enableLimit}EnableLimit(t){t!==this.m_enableLimit&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=t,this.m_impulse.z=0)}GetLowerLimit(){return this.m_lowerTranslation}GetUpperLimit(){return this.m_upperTranslation}SetLimits(t,e){t===this.m_lowerTranslation&&e===this.m_upperTranslation||(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_lowerTranslation=t,this.m_upperTranslation=e,this.m_impulse.z=0)}IsMotorEnabled(){return this.m_enableMotor}EnableMotor(t){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=t}SetMotorSpeed(t){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=t}GetMotorSpeed(){return this.m_motorSpeed}SetMaxMotorForce(t){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorForce=t}GetMaxMotorForce(){return this.m_maxMotorForce}GetMotorForce(t){return t*this.m_motorImpulse}Dump(t){const e=this.m_bodyA.m_islandIndex,i=this.m_bodyB.m_islandIndex;t("  const jd: b2PrismaticJointDef = new b2PrismaticJointDef();\n"),t("  jd.bodyA = bodies[%d];\n",e),t("  jd.bodyB = bodies[%d];\n",i),t("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),t("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),t("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),t("  jd.localAxisA.Set(%.15f, %.15f);\n",this.m_localXAxisA.x,this.m_localXAxisA.y),t("  jd.referenceAngle = %.15f;\n",this.m_referenceAngle),t("  jd.enableLimit = %s;\n",this.m_enableLimit?"true":"false"),t("  jd.lowerTranslation = %.15f;\n",this.m_lowerTranslation),t("  jd.upperTranslation = %.15f;\n",this.m_upperTranslation),t("  jd.enableMotor = %s;\n",this.m_enableMotor?"true":"false"),t("  jd.motorSpeed = %.15f;\n",this.m_motorSpeed),t("  jd.maxMotorForce = %.15f;\n",this.m_maxMotorForce),t("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}}fe.InitVelocityConstraints_s_d=new r.A,fe.InitVelocityConstraints_s_P=new r.A,fe.SolveVelocityConstraints_s_P=new r.A,fe.SolveVelocityConstraints_s_f2r=new r.A,fe.SolveVelocityConstraints_s_f1=new r.C,fe.SolveVelocityConstraints_s_df3=new r.C,fe.SolveVelocityConstraints_s_df2=new r.A,fe.SolvePositionConstraints_s_d=new r.A,fe.SolvePositionConstraints_s_impulse=new r.C,fe.SolvePositionConstraints_s_impulse1=new r.A,fe.SolvePositionConstraints_s_P=new r.A,fe.GetJointTranslation_s_pA=new r.A,fe.GetJointTranslation_s_pB=new r.A,fe.GetJointTranslation_s_d=new r.A,fe.GetJointTranslation_s_axis=new r.A;class _e extends te{constructor(){super(Wt.e_pulleyJoint),this.groundAnchorA=new r.A(-1,1),this.groundAnchorB=new r.A(1,1),this.localAnchorA=new r.A(-1,0),this.localAnchorB=new r.A(1,0),this.lengthA=0,this.lengthB=0,this.ratio=1,this.collideConnected=!0}Initialize(t,e,i,n,s,o,a){this.bodyA=t,this.bodyB=e,this.groundAnchorA.Copy(i),this.groundAnchorB.Copy(n),this.bodyA.GetLocalPoint(s,this.localAnchorA),this.bodyB.GetLocalPoint(o,this.localAnchorB),this.lengthA=r.A.DistanceVV(s,i),this.lengthB=r.A.DistanceVV(o,n),this.ratio=a}}class ge extends ee{constructor(t){super(t),this.m_groundAnchorA=new r.A,this.m_groundAnchorB=new r.A,this.m_lengthA=0,this.m_lengthB=0,this.m_localAnchorA=new r.A,this.m_localAnchorB=new r.A,this.m_constant=0,this.m_ratio=0,this.m_impulse=0,this.m_indexA=0,this.m_indexB=0,this.m_uA=new r.A,this.m_uB=new r.A,this.m_rA=new r.A,this.m_rB=new r.A,this.m_localCenterA=new r.A,this.m_localCenterB=new r.A,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_mass=0,this.m_qA=new r.t,this.m_qB=new r.t,this.m_lalcA=new r.A,this.m_lalcB=new r.A,this.m_groundAnchorA.Copy(t.groundAnchorA),this.m_groundAnchorB.Copy(t.groundAnchorB),this.m_localAnchorA.Copy(t.localAnchorA),this.m_localAnchorB.Copy(t.localAnchorB),this.m_lengthA=t.lengthA,this.m_lengthB=t.lengthB,this.m_ratio=t.ratio,this.m_constant=t.lengthA+this.m_ratio*t.lengthB,this.m_impulse=0}InitVelocityConstraints(t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const e=t.positions[this.m_indexA].c,i=t.positions[this.m_indexA].a,n=t.velocities[this.m_indexA].v;let o=t.velocities[this.m_indexA].w;const a=t.positions[this.m_indexB].c,l=t.positions[this.m_indexB].a,c=t.velocities[this.m_indexB].v;let u=t.velocities[this.m_indexB].w;const h=this.m_qA.SetAngle(i),d=this.m_qB.SetAngle(l);r.A.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),r.t.MulRV(h,this.m_lalcA,this.m_rA),r.A.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),r.t.MulRV(d,this.m_lalcB,this.m_rB),this.m_uA.Copy(e).SelfAdd(this.m_rA).SelfSub(this.m_groundAnchorA),this.m_uB.Copy(a).SelfAdd(this.m_rB).SelfSub(this.m_groundAnchorB);const m=this.m_uA.Length(),p=this.m_uB.Length();m>10*s.v?this.m_uA.SelfMul(1/m):this.m_uA.SetZero(),p>10*s.v?this.m_uB.SelfMul(1/p):this.m_uB.SetZero();const f=r.A.CrossVV(this.m_rA,this.m_uA),_=r.A.CrossVV(this.m_rB,this.m_uB),g=this.m_invMassA+this.m_invIA*f*f,v=this.m_invMassB+this.m_invIB*_*_;if(this.m_mass=g+this.m_ratio*this.m_ratio*v,this.m_mass>0&&(this.m_mass=1/this.m_mass),t.step.warmStarting){this.m_impulse*=t.step.dtRatio;const e=r.A.MulSV(-this.m_impulse,this.m_uA,ge.InitVelocityConstraints_s_PA),i=r.A.MulSV(-this.m_ratio*this.m_impulse,this.m_uB,ge.InitVelocityConstraints_s_PB);n.SelfMulAdd(this.m_invMassA,e),o+=this.m_invIA*r.A.CrossVV(this.m_rA,e),c.SelfMulAdd(this.m_invMassB,i),u+=this.m_invIB*r.A.CrossVV(this.m_rB,i)}else this.m_impulse=0;t.velocities[this.m_indexA].w=o,t.velocities[this.m_indexB].w=u}SolveVelocityConstraints(t){const e=t.velocities[this.m_indexA].v;let i=t.velocities[this.m_indexA].w;const n=t.velocities[this.m_indexB].v;let s=t.velocities[this.m_indexB].w;const o=r.A.AddVCrossSV(e,i,this.m_rA,ge.SolveVelocityConstraints_s_vpA),a=r.A.AddVCrossSV(n,s,this.m_rB,ge.SolveVelocityConstraints_s_vpB),l=-r.A.DotVV(this.m_uA,o)-this.m_ratio*r.A.DotVV(this.m_uB,a),c=-this.m_mass*l;this.m_impulse+=c;const u=r.A.MulSV(-c,this.m_uA,ge.SolveVelocityConstraints_s_PA),h=r.A.MulSV(-this.m_ratio*c,this.m_uB,ge.SolveVelocityConstraints_s_PB);e.SelfMulAdd(this.m_invMassA,u),i+=this.m_invIA*r.A.CrossVV(this.m_rA,u),n.SelfMulAdd(this.m_invMassB,h),s+=this.m_invIB*r.A.CrossVV(this.m_rB,h),t.velocities[this.m_indexA].w=i,t.velocities[this.m_indexB].w=s}SolvePositionConstraints(t){const e=t.positions[this.m_indexA].c;let i=t.positions[this.m_indexA].a;const n=t.positions[this.m_indexB].c;let o=t.positions[this.m_indexB].a;const a=this.m_qA.SetAngle(i),l=this.m_qB.SetAngle(o);r.A.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);const c=r.t.MulRV(a,this.m_lalcA,this.m_rA);r.A.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);const u=r.t.MulRV(l,this.m_lalcB,this.m_rB),h=this.m_uA.Copy(e).SelfAdd(c).SelfSub(this.m_groundAnchorA),d=this.m_uB.Copy(n).SelfAdd(u).SelfSub(this.m_groundAnchorB),m=h.Length(),p=d.Length();m>10*s.v?h.SelfMul(1/m):h.SetZero(),p>10*s.v?d.SelfMul(1/p):d.SetZero();const f=r.A.CrossVV(c,h),_=r.A.CrossVV(u,d),g=this.m_invMassA+this.m_invIA*f*f,v=this.m_invMassB+this.m_invIB*_*_;let y=g+this.m_ratio*this.m_ratio*v;y>0&&(y=1/y);const x=this.m_constant-m-this.m_ratio*p,b=Object(r.a)(x),A=-y*x,w=r.A.MulSV(-A,h,ge.SolvePositionConstraints_s_PA),S=r.A.MulSV(-this.m_ratio*A,d,ge.SolvePositionConstraints_s_PB);return e.SelfMulAdd(this.m_invMassA,w),i+=this.m_invIA*r.A.CrossVV(c,w),n.SelfMulAdd(this.m_invMassB,S),o+=this.m_invIB*r.A.CrossVV(u,S),t.positions[this.m_indexA].a=i,t.positions[this.m_indexB].a=o,b<s.v}GetAnchorA(t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,t)}GetAnchorB(t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,t)}GetReactionForce(t,e){return e.Set(t*this.m_impulse*this.m_uB.x,t*this.m_impulse*this.m_uB.y)}GetReactionTorque(t){return 0}GetGroundAnchorA(){return this.m_groundAnchorA}GetGroundAnchorB(){return this.m_groundAnchorB}GetLengthA(){return this.m_lengthA}GetLengthB(){return this.m_lengthB}GetRatio(){return this.m_ratio}GetCurrentLengthA(){const t=this.m_bodyA.GetWorldPoint(this.m_localAnchorA,ge.GetCurrentLengthA_s_p),e=this.m_groundAnchorA;return r.A.DistanceVV(t,e)}GetCurrentLengthB(){const t=this.m_bodyB.GetWorldPoint(this.m_localAnchorB,ge.GetCurrentLengthB_s_p),e=this.m_groundAnchorB;return r.A.DistanceVV(t,e)}Dump(t){const e=this.m_bodyA.m_islandIndex,i=this.m_bodyB.m_islandIndex;t("  const jd: b2PulleyJointDef = new b2PulleyJointDef();\n"),t("  jd.bodyA = bodies[%d];\n",e),t("  jd.bodyB = bodies[%d];\n",i),t("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),t("  jd.groundAnchorA.Set(%.15f, %.15f);\n",this.m_groundAnchorA.x,this.m_groundAnchorA.y),t("  jd.groundAnchorB.Set(%.15f, %.15f);\n",this.m_groundAnchorB.x,this.m_groundAnchorB.y),t("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),t("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),t("  jd.lengthA = %.15f;\n",this.m_lengthA),t("  jd.lengthB = %.15f;\n",this.m_lengthB),t("  jd.ratio = %.15f;\n",this.m_ratio),t("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}ShiftOrigin(t){this.m_groundAnchorA.SelfSub(t),this.m_groundAnchorB.SelfSub(t)}}ge.InitVelocityConstraints_s_PA=new r.A,ge.InitVelocityConstraints_s_PB=new r.A,ge.SolveVelocityConstraints_s_vpA=new r.A,ge.SolveVelocityConstraints_s_vpB=new r.A,ge.SolveVelocityConstraints_s_PA=new r.A,ge.SolveVelocityConstraints_s_PB=new r.A,ge.SolvePositionConstraints_s_PA=new r.A,ge.SolvePositionConstraints_s_PB=new r.A,ge.GetCurrentLengthA_s_p=new r.A,ge.GetCurrentLengthB_s_p=new r.A;class ve extends te{constructor(){super(Wt.e_revoluteJoint),this.localAnchorA=new r.A(0,0),this.localAnchorB=new r.A(0,0),this.referenceAngle=0,this.enableLimit=!1,this.lowerAngle=0,this.upperAngle=0,this.enableMotor=!1,this.motorSpeed=0,this.maxMotorTorque=0}Initialize(t,e,i){this.bodyA=t,this.bodyB=e,this.bodyA.GetLocalPoint(i,this.localAnchorA),this.bodyB.GetLocalPoint(i,this.localAnchorB),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()}}class ye extends ee{constructor(t){super(t),this.m_localAnchorA=new r.A,this.m_localAnchorB=new r.A,this.m_impulse=new r.C,this.m_motorImpulse=0,this.m_enableMotor=!1,this.m_maxMotorTorque=0,this.m_motorSpeed=0,this.m_enableLimit=!1,this.m_referenceAngle=0,this.m_lowerAngle=0,this.m_upperAngle=0,this.m_indexA=0,this.m_indexB=0,this.m_rA=new r.A,this.m_rB=new r.A,this.m_localCenterA=new r.A,this.m_localCenterB=new r.A,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_mass=new r.l,this.m_motorMass=0,this.m_limitState=Jt.e_inactiveLimit,this.m_qA=new r.t,this.m_qB=new r.t,this.m_lalcA=new r.A,this.m_lalcB=new r.A,this.m_K=new r.k,this.m_localAnchorA.Copy(t.localAnchorA),this.m_localAnchorB.Copy(t.localAnchorB),this.m_referenceAngle=t.referenceAngle,this.m_impulse.SetZero(),this.m_motorImpulse=0,this.m_lowerAngle=t.lowerAngle,this.m_upperAngle=t.upperAngle,this.m_maxMotorTorque=t.maxMotorTorque,this.m_motorSpeed=t.motorSpeed,this.m_enableLimit=t.enableLimit,this.m_enableMotor=t.enableMotor,this.m_limitState=Jt.e_inactiveLimit}InitVelocityConstraints(t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const e=t.positions[this.m_indexA].a,i=t.velocities[this.m_indexA].v;let n=t.velocities[this.m_indexA].w;const o=t.positions[this.m_indexB].a,a=t.velocities[this.m_indexB].v;let l=t.velocities[this.m_indexB].w;const c=this.m_qA.SetAngle(e),u=this.m_qB.SetAngle(o);r.A.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),r.t.MulRV(c,this.m_lalcA,this.m_rA),r.A.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),r.t.MulRV(u,this.m_lalcB,this.m_rB);const h=this.m_invMassA,d=this.m_invMassB,m=this.m_invIA,p=this.m_invIB,f=m+p===0;if(this.m_mass.ex.x=h+d+this.m_rA.y*this.m_rA.y*m+this.m_rB.y*this.m_rB.y*p,this.m_mass.ey.x=-this.m_rA.y*this.m_rA.x*m-this.m_rB.y*this.m_rB.x*p,this.m_mass.ez.x=-this.m_rA.y*m-this.m_rB.y*p,this.m_mass.ex.y=this.m_mass.ey.x,this.m_mass.ey.y=h+d+this.m_rA.x*this.m_rA.x*m+this.m_rB.x*this.m_rB.x*p,this.m_mass.ez.y=this.m_rA.x*m+this.m_rB.x*p,this.m_mass.ex.z=this.m_mass.ez.x,this.m_mass.ey.z=this.m_mass.ez.y,this.m_mass.ez.z=m+p,this.m_motorMass=m+p,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass),this.m_enableMotor&&!f||(this.m_motorImpulse=0),this.m_enableLimit&&!f){const t=o-e-this.m_referenceAngle;Object(r.a)(this.m_upperAngle-this.m_lowerAngle)<2*s.n?this.m_limitState=Jt.e_equalLimits:t<=this.m_lowerAngle?(this.m_limitState!==Jt.e_atLowerLimit&&(this.m_impulse.z=0),this.m_limitState=Jt.e_atLowerLimit):t>=this.m_upperAngle?(this.m_limitState!==Jt.e_atUpperLimit&&(this.m_impulse.z=0),this.m_limitState=Jt.e_atUpperLimit):(this.m_limitState=Jt.e_inactiveLimit,this.m_impulse.z=0)}else this.m_limitState=Jt.e_inactiveLimit;if(t.step.warmStarting){this.m_impulse.SelfMul(t.step.dtRatio),this.m_motorImpulse*=t.step.dtRatio;const e=ye.InitVelocityConstraints_s_P.Set(this.m_impulse.x,this.m_impulse.y);i.SelfMulSub(h,e),n-=m*(r.A.CrossVV(this.m_rA,e)+this.m_motorImpulse+this.m_impulse.z),a.SelfMulAdd(d,e),l+=p*(r.A.CrossVV(this.m_rB,e)+this.m_motorImpulse+this.m_impulse.z)}else this.m_impulse.SetZero(),this.m_motorImpulse=0;t.velocities[this.m_indexA].w=n,t.velocities[this.m_indexB].w=l}SolveVelocityConstraints(t){const e=t.velocities[this.m_indexA].v;let i=t.velocities[this.m_indexA].w;const n=t.velocities[this.m_indexB].v;let s=t.velocities[this.m_indexB].w;const o=this.m_invMassA,a=this.m_invMassB,l=this.m_invIA,c=this.m_invIB,u=l+c===0;if(this.m_enableMotor&&this.m_limitState!==Jt.e_equalLimits&&!u){const e=s-i-this.m_motorSpeed;let n=-this.m_motorMass*e;const o=this.m_motorImpulse,a=t.step.dt*this.m_maxMotorTorque;this.m_motorImpulse=Object(r.e)(this.m_motorImpulse+n,-a,a),i-=l*(n=this.m_motorImpulse-o),s+=c*n}if(this.m_enableLimit&&this.m_limitState!==Jt.e_inactiveLimit&&!u){const t=r.A.SubVV(r.A.AddVCrossSV(n,s,this.m_rB,r.A.s_t0),r.A.AddVCrossSV(e,i,this.m_rA,r.A.s_t1),ye.SolveVelocityConstraints_s_Cdot1),u=s-i,h=this.m_mass.Solve33(t.x,t.y,u,ye.SolveVelocityConstraints_s_impulse_v3).SelfNeg();if(this.m_limitState===Jt.e_equalLimits)this.m_impulse.SelfAdd(h);else if(this.m_limitState===Jt.e_atLowerLimit){if(this.m_impulse.z+h.z<0){const e=-t.x+this.m_impulse.z*this.m_mass.ez.x,i=-t.y+this.m_impulse.z*this.m_mass.ez.y,n=this.m_mass.Solve22(e,i,ye.SolveVelocityConstraints_s_reduced_v2);h.x=n.x,h.y=n.y,h.z=-this.m_impulse.z,this.m_impulse.x+=n.x,this.m_impulse.y+=n.y,this.m_impulse.z=0}else this.m_impulse.SelfAdd(h)}else if(this.m_limitState===Jt.e_atUpperLimit){if(this.m_impulse.z+h.z>0){const e=-t.x+this.m_impulse.z*this.m_mass.ez.x,i=-t.y+this.m_impulse.z*this.m_mass.ez.y,n=this.m_mass.Solve22(e,i,ye.SolveVelocityConstraints_s_reduced_v2);h.x=n.x,h.y=n.y,h.z=-this.m_impulse.z,this.m_impulse.x+=n.x,this.m_impulse.y+=n.y,this.m_impulse.z=0}else this.m_impulse.SelfAdd(h)}const d=ye.SolveVelocityConstraints_s_P.Set(h.x,h.y);e.SelfMulSub(o,d),i-=l*(r.A.CrossVV(this.m_rA,d)+h.z),n.SelfMulAdd(a,d),s+=c*(r.A.CrossVV(this.m_rB,d)+h.z)}else{const t=r.A.SubVV(r.A.AddVCrossSV(n,s,this.m_rB,r.A.s_t0),r.A.AddVCrossSV(e,i,this.m_rA,r.A.s_t1),ye.SolveVelocityConstraints_s_Cdot_v2),u=this.m_mass.Solve22(-t.x,-t.y,ye.SolveVelocityConstraints_s_impulse_v2);this.m_impulse.x+=u.x,this.m_impulse.y+=u.y,e.SelfMulSub(o,u),i-=l*r.A.CrossVV(this.m_rA,u),n.SelfMulAdd(a,u),s+=c*r.A.CrossVV(this.m_rB,u)}t.velocities[this.m_indexA].w=i,t.velocities[this.m_indexB].w=s}SolvePositionConstraints(t){const e=t.positions[this.m_indexA].c;let i=t.positions[this.m_indexA].a;const n=t.positions[this.m_indexB].c;let o=t.positions[this.m_indexB].a;const a=this.m_qA.SetAngle(i),l=this.m_qB.SetAngle(o);let c=0,u=0;const h=this.m_invIA+this.m_invIB===0;if(this.m_enableLimit&&this.m_limitState!==Jt.e_inactiveLimit&&!h){const t=o-i-this.m_referenceAngle;let e=0;if(this.m_limitState===Jt.e_equalLimits){const i=Object(r.e)(t-this.m_lowerAngle,-s.w,s.w);e=-this.m_motorMass*i,c=Object(r.a)(i)}else if(this.m_limitState===Jt.e_atLowerLimit){let i=t-this.m_lowerAngle;c=-i,i=Object(r.e)(i+s.n,-s.w,0),e=-this.m_motorMass*i}else if(this.m_limitState===Jt.e_atUpperLimit){let i=t-this.m_upperAngle;c=i,i=Object(r.e)(i-s.n,0,s.w),e=-this.m_motorMass*i}i-=this.m_invIA*e,o+=this.m_invIB*e}{a.SetAngle(i),l.SetAngle(o),r.A.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);const t=r.t.MulRV(a,this.m_lalcA,this.m_rA);r.A.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);const s=r.t.MulRV(l,this.m_lalcB,this.m_rB),c=r.A.SubVV(r.A.AddVV(n,s,r.A.s_t0),r.A.AddVV(e,t,r.A.s_t1),ye.SolvePositionConstraints_s_C_v2);u=c.Length();const h=this.m_invMassA,d=this.m_invMassB,m=this.m_invIA,p=this.m_invIB,f=this.m_K;f.ex.x=h+d+m*t.y*t.y+p*s.y*s.y,f.ex.y=-m*t.x*t.y-p*s.x*s.y,f.ey.x=f.ex.y,f.ey.y=h+d+m*t.x*t.x+p*s.x*s.x;const _=f.Solve(c.x,c.y,ye.SolvePositionConstraints_s_impulse).SelfNeg();e.SelfMulSub(h,_),i-=m*r.A.CrossVV(t,_),n.SelfMulAdd(d,_),o+=p*r.A.CrossVV(s,_)}return t.positions[this.m_indexA].a=i,t.positions[this.m_indexB].a=o,u<=s.v&&c<=s.n}GetAnchorA(t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,t)}GetAnchorB(t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,t)}GetReactionForce(t,e){return e.Set(t*this.m_impulse.x,t*this.m_impulse.y)}GetReactionTorque(t){return t*this.m_impulse.z}GetLocalAnchorA(){return this.m_localAnchorA}GetLocalAnchorB(){return this.m_localAnchorB}GetReferenceAngle(){return this.m_referenceAngle}GetJointAngle(){return this.m_bodyB.m_sweep.a-this.m_bodyA.m_sweep.a-this.m_referenceAngle}GetJointSpeed(){return this.m_bodyB.m_angularVelocity-this.m_bodyA.m_angularVelocity}IsMotorEnabled(){return this.m_enableMotor}EnableMotor(t){this.m_enableMotor!==t&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=t)}GetMotorTorque(t){return t*this.m_motorImpulse}GetMotorSpeed(){return this.m_motorSpeed}SetMaxMotorTorque(t){this.m_maxMotorTorque=t}GetMaxMotorTorque(){return this.m_maxMotorTorque}IsLimitEnabled(){return this.m_enableLimit}EnableLimit(t){t!==this.m_enableLimit&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableLimit=t,this.m_impulse.z=0)}GetLowerLimit(){return this.m_lowerAngle}GetUpperLimit(){return this.m_upperAngle}SetLimits(t,e){t===this.m_lowerAngle&&e===this.m_upperAngle||(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_impulse.z=0,this.m_lowerAngle=t,this.m_upperAngle=e)}SetMotorSpeed(t){this.m_motorSpeed!==t&&(this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=t)}Dump(t){const e=this.m_bodyA.m_islandIndex,i=this.m_bodyB.m_islandIndex;t("  const jd: b2RevoluteJointDef = new b2RevoluteJointDef();\n"),t("  jd.bodyA = bodies[%d];\n",e),t("  jd.bodyB = bodies[%d];\n",i),t("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),t("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),t("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),t("  jd.referenceAngle = %.15f;\n",this.m_referenceAngle),t("  jd.enableLimit = %s;\n",this.m_enableLimit?"true":"false"),t("  jd.lowerAngle = %.15f;\n",this.m_lowerAngle),t("  jd.upperAngle = %.15f;\n",this.m_upperAngle),t("  jd.enableMotor = %s;\n",this.m_enableMotor?"true":"false"),t("  jd.motorSpeed = %.15f;\n",this.m_motorSpeed),t("  jd.maxMotorTorque = %.15f;\n",this.m_maxMotorTorque),t("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}}ye.InitVelocityConstraints_s_P=new r.A,ye.SolveVelocityConstraints_s_P=new r.A,ye.SolveVelocityConstraints_s_Cdot_v2=new r.A,ye.SolveVelocityConstraints_s_Cdot1=new r.A,ye.SolveVelocityConstraints_s_impulse_v3=new r.C,ye.SolveVelocityConstraints_s_reduced_v2=new r.A,ye.SolveVelocityConstraints_s_impulse_v2=new r.A,ye.SolvePositionConstraints_s_C_v2=new r.A,ye.SolvePositionConstraints_s_impulse=new r.A;class xe extends te{constructor(){super(Wt.e_ropeJoint),this.localAnchorA=new r.A(-1,0),this.localAnchorB=new r.A(1,0),this.maxLength=0}}class be extends ee{constructor(t){super(t),this.m_localAnchorA=new r.A,this.m_localAnchorB=new r.A,this.m_maxLength=0,this.m_length=0,this.m_impulse=0,this.m_indexA=0,this.m_indexB=0,this.m_u=new r.A,this.m_rA=new r.A,this.m_rB=new r.A,this.m_localCenterA=new r.A,this.m_localCenterB=new r.A,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_mass=0,this.m_state=Jt.e_inactiveLimit,this.m_qA=new r.t,this.m_qB=new r.t,this.m_lalcA=new r.A,this.m_lalcB=new r.A,this.m_localAnchorA.Copy(t.localAnchorA),this.m_localAnchorB.Copy(t.localAnchorB),this.m_maxLength=t.maxLength}InitVelocityConstraints(t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const e=t.positions[this.m_indexA].c,i=t.positions[this.m_indexA].a,n=t.velocities[this.m_indexA].v;let o=t.velocities[this.m_indexA].w;const a=t.positions[this.m_indexB].c,l=t.positions[this.m_indexB].a,c=t.velocities[this.m_indexB].v;let u=t.velocities[this.m_indexB].w;const h=this.m_qA.SetAngle(i),d=this.m_qB.SetAngle(l);r.A.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),r.t.MulRV(h,this.m_lalcA,this.m_rA),r.A.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),r.t.MulRV(d,this.m_lalcB,this.m_rB),this.m_u.Copy(a).SelfAdd(this.m_rB).SelfSub(e).SelfSub(this.m_rA),this.m_length=this.m_u.Length();const m=this.m_length-this.m_maxLength;if(this.m_state=m>0?Jt.e_atUpperLimit:Jt.e_inactiveLimit,!(this.m_length>s.v))return this.m_u.SetZero(),this.m_mass=0,void(this.m_impulse=0);this.m_u.SelfMul(1/this.m_length);const p=r.A.CrossVV(this.m_rA,this.m_u),f=r.A.CrossVV(this.m_rB,this.m_u),_=this.m_invMassA+this.m_invIA*p*p+this.m_invMassB+this.m_invIB*f*f;if(this.m_mass=0!==_?1/_:0,t.step.warmStarting){this.m_impulse*=t.step.dtRatio;const e=r.A.MulSV(this.m_impulse,this.m_u,be.InitVelocityConstraints_s_P);n.SelfMulSub(this.m_invMassA,e),o-=this.m_invIA*r.A.CrossVV(this.m_rA,e),c.SelfMulAdd(this.m_invMassB,e),u+=this.m_invIB*r.A.CrossVV(this.m_rB,e)}else this.m_impulse=0;t.velocities[this.m_indexA].w=o,t.velocities[this.m_indexB].w=u}SolveVelocityConstraints(t){const e=t.velocities[this.m_indexA].v;let i=t.velocities[this.m_indexA].w;const n=t.velocities[this.m_indexB].v;let s=t.velocities[this.m_indexB].w;const o=r.A.AddVCrossSV(e,i,this.m_rA,be.SolveVelocityConstraints_s_vpA),a=r.A.AddVCrossSV(n,s,this.m_rB,be.SolveVelocityConstraints_s_vpB),l=this.m_length-this.m_maxLength;let c=r.A.DotVV(this.m_u,r.A.SubVV(a,o,r.A.s_t0));l<0&&(c+=t.step.inv_dt*l);let u=-this.m_mass*c;const h=this.m_impulse;this.m_impulse=Object(r.n)(0,this.m_impulse+u),u=this.m_impulse-h;const d=r.A.MulSV(u,this.m_u,be.SolveVelocityConstraints_s_P);e.SelfMulSub(this.m_invMassA,d),i-=this.m_invIA*r.A.CrossVV(this.m_rA,d),n.SelfMulAdd(this.m_invMassB,d),s+=this.m_invIB*r.A.CrossVV(this.m_rB,d),t.velocities[this.m_indexA].w=i,t.velocities[this.m_indexB].w=s}SolvePositionConstraints(t){const e=t.positions[this.m_indexA].c;let i=t.positions[this.m_indexA].a;const n=t.positions[this.m_indexB].c;let o=t.positions[this.m_indexB].a;const a=this.m_qA.SetAngle(i),l=this.m_qB.SetAngle(o);r.A.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);const c=r.t.MulRV(a,this.m_lalcA,this.m_rA);r.A.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);const u=r.t.MulRV(l,this.m_lalcB,this.m_rB),h=this.m_u.Copy(n).SelfAdd(u).SelfSub(e).SelfSub(c),d=h.Normalize();let m=d-this.m_maxLength;m=Object(r.e)(m,0,s.y);const p=-this.m_mass*m,f=r.A.MulSV(p,h,be.SolvePositionConstraints_s_P);return e.SelfMulSub(this.m_invMassA,f),i-=this.m_invIA*r.A.CrossVV(c,f),n.SelfMulAdd(this.m_invMassB,f),o+=this.m_invIB*r.A.CrossVV(u,f),t.positions[this.m_indexA].a=i,t.positions[this.m_indexB].a=o,d-this.m_maxLength<s.v}GetAnchorA(t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,t)}GetAnchorB(t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,t)}GetReactionForce(t,e){return r.A.MulSV(t*this.m_impulse,this.m_u,e)}GetReactionTorque(t){return 0}GetLocalAnchorA(){return this.m_localAnchorA}GetLocalAnchorB(){return this.m_localAnchorB}SetMaxLength(t){this.m_maxLength=t}GetMaxLength(){return this.m_maxLength}GetLimitState(){return this.m_state}Dump(t){const e=this.m_bodyA.m_islandIndex,i=this.m_bodyB.m_islandIndex;t("  const jd: b2RopeJointDef = new b2RopeJointDef();\n"),t("  jd.bodyA = bodies[%d];\n",e),t("  jd.bodyB = bodies[%d];\n",i),t("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),t("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),t("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),t("  jd.maxLength = %.15f;\n",this.m_maxLength),t("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}}be.InitVelocityConstraints_s_P=new r.A,be.SolveVelocityConstraints_s_vpA=new r.A,be.SolveVelocityConstraints_s_vpB=new r.A,be.SolveVelocityConstraints_s_P=new r.A,be.SolvePositionConstraints_s_P=new r.A;class Ae extends te{constructor(){super(Wt.e_weldJoint),this.localAnchorA=new r.A,this.localAnchorB=new r.A,this.referenceAngle=0,this.frequencyHz=0,this.dampingRatio=0}Initialize(t,e,i){this.bodyA=t,this.bodyB=e,this.bodyA.GetLocalPoint(i,this.localAnchorA),this.bodyB.GetLocalPoint(i,this.localAnchorB),this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()}}class we extends ee{constructor(t){super(t),this.m_frequencyHz=0,this.m_dampingRatio=0,this.m_bias=0,this.m_localAnchorA=new r.A,this.m_localAnchorB=new r.A,this.m_referenceAngle=0,this.m_gamma=0,this.m_impulse=new r.C(0,0,0),this.m_indexA=0,this.m_indexB=0,this.m_rA=new r.A,this.m_rB=new r.A,this.m_localCenterA=new r.A,this.m_localCenterB=new r.A,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_mass=new r.l,this.m_qA=new r.t,this.m_qB=new r.t,this.m_lalcA=new r.A,this.m_lalcB=new r.A,this.m_K=new r.l,this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_localAnchorA.Copy(t.localAnchorA),this.m_localAnchorB.Copy(t.localAnchorB),this.m_referenceAngle=t.referenceAngle,this.m_impulse.SetZero()}InitVelocityConstraints(t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const e=t.positions[this.m_indexA].a,i=t.velocities[this.m_indexA].v;let n=t.velocities[this.m_indexA].w;const o=t.positions[this.m_indexB].a,a=t.velocities[this.m_indexB].v;let l=t.velocities[this.m_indexB].w;const c=this.m_qA.SetAngle(e),u=this.m_qB.SetAngle(o);r.A.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA),r.t.MulRV(c,this.m_lalcA,this.m_rA),r.A.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB),r.t.MulRV(u,this.m_lalcB,this.m_rB);const h=this.m_invMassA,d=this.m_invMassB,m=this.m_invIA,p=this.m_invIB,f=this.m_K;if(f.ex.x=h+d+this.m_rA.y*this.m_rA.y*m+this.m_rB.y*this.m_rB.y*p,f.ey.x=-this.m_rA.y*this.m_rA.x*m-this.m_rB.y*this.m_rB.x*p,f.ez.x=-this.m_rA.y*m-this.m_rB.y*p,f.ex.y=f.ey.x,f.ey.y=h+d+this.m_rA.x*this.m_rA.x*m+this.m_rB.x*this.m_rB.x*p,f.ez.y=this.m_rA.x*m+this.m_rB.x*p,f.ex.z=f.ez.x,f.ey.z=f.ez.y,f.ez.z=m+p,this.m_frequencyHz>0){f.GetInverse22(this.m_mass);let i=m+p;const n=i>0?1/i:0,r=o-e-this.m_referenceAngle,a=2*s.P*this.m_frequencyHz,l=2*n*this.m_dampingRatio*a,c=n*a*a,u=t.step.dt;this.m_gamma=u*(l+u*c),this.m_gamma=0!==this.m_gamma?1/this.m_gamma:0,this.m_bias=r*u*c*this.m_gamma,i+=this.m_gamma,this.m_mass.ez.z=0!==i?1/i:0}else f.GetSymInverse33(this.m_mass),this.m_gamma=0,this.m_bias=0;if(t.step.warmStarting){this.m_impulse.SelfMul(t.step.dtRatio);const e=we.InitVelocityConstraints_s_P.Set(this.m_impulse.x,this.m_impulse.y);i.SelfMulSub(h,e),n-=m*(r.A.CrossVV(this.m_rA,e)+this.m_impulse.z),a.SelfMulAdd(d,e),l+=p*(r.A.CrossVV(this.m_rB,e)+this.m_impulse.z)}else this.m_impulse.SetZero();t.velocities[this.m_indexA].w=n,t.velocities[this.m_indexB].w=l}SolveVelocityConstraints(t){const e=t.velocities[this.m_indexA].v;let i=t.velocities[this.m_indexA].w;const n=t.velocities[this.m_indexB].v;let s=t.velocities[this.m_indexB].w;const o=this.m_invMassA,a=this.m_invMassB,l=this.m_invIA,c=this.m_invIB;if(this.m_frequencyHz>0){const t=s-i,u=-this.m_mass.ez.z*(t+this.m_bias+this.m_gamma*this.m_impulse.z);this.m_impulse.z+=u,i-=l*u,s+=c*u;const h=r.A.SubVV(r.A.AddVCrossSV(n,s,this.m_rB,r.A.s_t0),r.A.AddVCrossSV(e,i,this.m_rA,r.A.s_t1),we.SolveVelocityConstraints_s_Cdot1),d=r.l.MulM33XY(this.m_mass,h.x,h.y,we.SolveVelocityConstraints_s_impulse1).SelfNeg();this.m_impulse.x+=d.x,this.m_impulse.y+=d.y;const m=d;e.SelfMulSub(o,m),i-=l*r.A.CrossVV(this.m_rA,m),n.SelfMulAdd(a,m),s+=c*r.A.CrossVV(this.m_rB,m)}else{const t=r.A.SubVV(r.A.AddVCrossSV(n,s,this.m_rB,r.A.s_t0),r.A.AddVCrossSV(e,i,this.m_rA,r.A.s_t1),we.SolveVelocityConstraints_s_Cdot1),u=s-i,h=r.l.MulM33XYZ(this.m_mass,t.x,t.y,u,we.SolveVelocityConstraints_s_impulse).SelfNeg();this.m_impulse.SelfAdd(h);const d=we.SolveVelocityConstraints_s_P.Set(h.x,h.y);e.SelfMulSub(o,d),i-=l*(r.A.CrossVV(this.m_rA,d)+h.z),n.SelfMulAdd(a,d),s+=c*(r.A.CrossVV(this.m_rB,d)+h.z)}t.velocities[this.m_indexA].w=i,t.velocities[this.m_indexB].w=s}SolvePositionConstraints(t){const e=t.positions[this.m_indexA].c;let i=t.positions[this.m_indexA].a;const n=t.positions[this.m_indexB].c;let o=t.positions[this.m_indexB].a;const a=this.m_qA.SetAngle(i),l=this.m_qB.SetAngle(o),c=this.m_invMassA,u=this.m_invMassB,h=this.m_invIA,d=this.m_invIB;r.A.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);const m=r.t.MulRV(a,this.m_lalcA,this.m_rA);r.A.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);const p=r.t.MulRV(l,this.m_lalcB,this.m_rB);let f,_;const g=this.m_K;if(g.ex.x=c+u+m.y*m.y*h+p.y*p.y*d,g.ey.x=-m.y*m.x*h-p.y*p.x*d,g.ez.x=-m.y*h-p.y*d,g.ex.y=g.ey.x,g.ey.y=c+u+m.x*m.x*h+p.x*p.x*d,g.ez.y=m.x*h+p.x*d,g.ex.z=g.ez.x,g.ey.z=g.ez.y,g.ez.z=h+d,this.m_frequencyHz>0){const t=r.A.SubVV(r.A.AddVV(n,p,r.A.s_t0),r.A.AddVV(e,m,r.A.s_t1),we.SolvePositionConstraints_s_C1);f=t.Length(),_=0;const s=g.Solve22(t.x,t.y,we.SolvePositionConstraints_s_P).SelfNeg();e.SelfMulSub(c,s),i-=h*r.A.CrossVV(m,s),n.SelfMulAdd(u,s),o+=d*r.A.CrossVV(p,s)}else{const t=r.A.SubVV(r.A.AddVV(n,p,r.A.s_t0),r.A.AddVV(e,m,r.A.s_t1),we.SolvePositionConstraints_s_C1),s=o-i-this.m_referenceAngle;f=t.Length(),_=Object(r.a)(s);const a=g.Solve33(t.x,t.y,s,we.SolvePositionConstraints_s_impulse).SelfNeg(),l=we.SolvePositionConstraints_s_P.Set(a.x,a.y);e.SelfMulSub(c,l),i-=h*(r.A.CrossVV(this.m_rA,l)+a.z),n.SelfMulAdd(u,l),o+=d*(r.A.CrossVV(this.m_rB,l)+a.z)}return t.positions[this.m_indexA].a=i,t.positions[this.m_indexB].a=o,f<=s.v&&_<=s.n}GetAnchorA(t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,t)}GetAnchorB(t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,t)}GetReactionForce(t,e){return e.Set(t*this.m_impulse.x,t*this.m_impulse.y)}GetReactionTorque(t){return t*this.m_impulse.z}GetLocalAnchorA(){return this.m_localAnchorA}GetLocalAnchorB(){return this.m_localAnchorB}GetReferenceAngle(){return this.m_referenceAngle}SetFrequency(t){this.m_frequencyHz=t}GetFrequency(){return this.m_frequencyHz}SetDampingRatio(t){this.m_dampingRatio=t}GetDampingRatio(){return this.m_dampingRatio}Dump(t){const e=this.m_bodyA.m_islandIndex,i=this.m_bodyB.m_islandIndex;t("  const jd: b2WeldJointDef = new b2WeldJointDef();\n"),t("  jd.bodyA = bodies[%d];\n",e),t("  jd.bodyB = bodies[%d];\n",i),t("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),t("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),t("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),t("  jd.referenceAngle = %.15f;\n",this.m_referenceAngle),t("  jd.frequencyHz = %.15f;\n",this.m_frequencyHz),t("  jd.dampingRatio = %.15f;\n",this.m_dampingRatio),t("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}}we.InitVelocityConstraints_s_P=new r.A,we.SolveVelocityConstraints_s_Cdot1=new r.A,we.SolveVelocityConstraints_s_impulse1=new r.A,we.SolveVelocityConstraints_s_impulse=new r.C,we.SolveVelocityConstraints_s_P=new r.A,we.SolvePositionConstraints_s_C1=new r.A,we.SolvePositionConstraints_s_P=new r.A,we.SolvePositionConstraints_s_impulse=new r.C;class Se extends te{constructor(){super(Wt.e_wheelJoint),this.localAnchorA=new r.A(0,0),this.localAnchorB=new r.A(0,0),this.localAxisA=new r.A(1,0),this.enableMotor=!1,this.maxMotorTorque=0,this.motorSpeed=0,this.frequencyHz=2,this.dampingRatio=.7}Initialize(t,e,i,n){this.bodyA=t,this.bodyB=e,this.bodyA.GetLocalPoint(i,this.localAnchorA),this.bodyB.GetLocalPoint(i,this.localAnchorB),this.bodyA.GetLocalVector(n,this.localAxisA)}}class Ce extends ee{constructor(t){super(t),this.m_frequencyHz=0,this.m_dampingRatio=0,this.m_localAnchorA=new r.A,this.m_localAnchorB=new r.A,this.m_localXAxisA=new r.A,this.m_localYAxisA=new r.A,this.m_impulse=0,this.m_motorImpulse=0,this.m_springImpulse=0,this.m_maxMotorTorque=0,this.m_motorSpeed=0,this.m_enableMotor=!1,this.m_indexA=0,this.m_indexB=0,this.m_localCenterA=new r.A,this.m_localCenterB=new r.A,this.m_invMassA=0,this.m_invMassB=0,this.m_invIA=0,this.m_invIB=0,this.m_ax=new r.A,this.m_ay=new r.A,this.m_sAx=0,this.m_sBx=0,this.m_sAy=0,this.m_sBy=0,this.m_mass=0,this.m_motorMass=0,this.m_springMass=0,this.m_bias=0,this.m_gamma=0,this.m_qA=new r.t,this.m_qB=new r.t,this.m_lalcA=new r.A,this.m_lalcB=new r.A,this.m_rA=new r.A,this.m_rB=new r.A,this.m_frequencyHz=t.frequencyHz,this.m_dampingRatio=t.dampingRatio,this.m_localAnchorA.Copy(t.localAnchorA),this.m_localAnchorB.Copy(t.localAnchorB),this.m_localXAxisA.Copy(t.localAxisA),r.A.CrossOneV(this.m_localXAxisA,this.m_localYAxisA),this.m_maxMotorTorque=t.maxMotorTorque,this.m_motorSpeed=t.motorSpeed,this.m_enableMotor=t.enableMotor,this.m_ax.SetZero(),this.m_ay.SetZero()}GetMotorSpeed(){return this.m_motorSpeed}GetMaxMotorTorque(){return this.m_maxMotorTorque}SetSpringFrequencyHz(t){this.m_frequencyHz=t}GetSpringFrequencyHz(){return this.m_frequencyHz}SetSpringDampingRatio(t){this.m_dampingRatio=t}GetSpringDampingRatio(){return this.m_dampingRatio}InitVelocityConstraints(t){this.m_indexA=this.m_bodyA.m_islandIndex,this.m_indexB=this.m_bodyB.m_islandIndex,this.m_localCenterA.Copy(this.m_bodyA.m_sweep.localCenter),this.m_localCenterB.Copy(this.m_bodyB.m_sweep.localCenter),this.m_invMassA=this.m_bodyA.m_invMass,this.m_invMassB=this.m_bodyB.m_invMass,this.m_invIA=this.m_bodyA.m_invI,this.m_invIB=this.m_bodyB.m_invI;const e=this.m_invMassA,i=this.m_invMassB,n=this.m_invIA,o=this.m_invIB,a=t.positions[this.m_indexA].c,l=t.positions[this.m_indexA].a,c=t.velocities[this.m_indexA].v;let u=t.velocities[this.m_indexA].w;const h=t.positions[this.m_indexB].c,d=t.positions[this.m_indexB].a,m=t.velocities[this.m_indexB].v;let p=t.velocities[this.m_indexB].w;const f=this.m_qA.SetAngle(l),_=this.m_qB.SetAngle(d);r.A.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);const g=r.t.MulRV(f,this.m_lalcA,this.m_rA);r.A.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);const v=r.t.MulRV(_,this.m_lalcB,this.m_rB),y=r.A.SubVV(r.A.AddVV(h,v,r.A.s_t0),r.A.AddVV(a,g,r.A.s_t1),Ce.InitVelocityConstraints_s_d);if(r.t.MulRV(f,this.m_localYAxisA,this.m_ay),this.m_sAy=r.A.CrossVV(r.A.AddVV(y,g,r.A.s_t0),this.m_ay),this.m_sBy=r.A.CrossVV(v,this.m_ay),this.m_mass=e+i+n*this.m_sAy*this.m_sAy+o*this.m_sBy*this.m_sBy,this.m_mass>0&&(this.m_mass=1/this.m_mass),this.m_springMass=0,this.m_bias=0,this.m_gamma=0,this.m_frequencyHz>0){r.t.MulRV(f,this.m_localXAxisA,this.m_ax),this.m_sAx=r.A.CrossVV(r.A.AddVV(y,g,r.A.s_t0),this.m_ax),this.m_sBx=r.A.CrossVV(v,this.m_ax);const a=e+i+n*this.m_sAx*this.m_sAx+o*this.m_sBx*this.m_sBx;if(a>0){this.m_springMass=1/a;const e=r.A.DotVV(y,this.m_ax),i=2*s.P*this.m_frequencyHz,n=2*this.m_springMass*this.m_dampingRatio*i,o=this.m_springMass*i*i,l=t.step.dt;this.m_gamma=l*(n+l*o),this.m_gamma>0&&(this.m_gamma=1/this.m_gamma),this.m_bias=e*l*o*this.m_gamma,this.m_springMass=a+this.m_gamma,this.m_springMass>0&&(this.m_springMass=1/this.m_springMass)}}else this.m_springImpulse=0;if(this.m_enableMotor?(this.m_motorMass=n+o,this.m_motorMass>0&&(this.m_motorMass=1/this.m_motorMass)):(this.m_motorMass=0,this.m_motorImpulse=0),t.step.warmStarting){this.m_impulse*=t.step.dtRatio,this.m_springImpulse*=t.step.dtRatio,this.m_motorImpulse*=t.step.dtRatio;const e=r.A.AddVV(r.A.MulSV(this.m_impulse,this.m_ay,r.A.s_t0),r.A.MulSV(this.m_springImpulse,this.m_ax,r.A.s_t1),Ce.InitVelocityConstraints_s_P),i=this.m_impulse*this.m_sAy+this.m_springImpulse*this.m_sAx+this.m_motorImpulse,n=this.m_impulse*this.m_sBy+this.m_springImpulse*this.m_sBx+this.m_motorImpulse;c.SelfMulSub(this.m_invMassA,e),u-=this.m_invIA*i,m.SelfMulAdd(this.m_invMassB,e),p+=this.m_invIB*n}else this.m_impulse=0,this.m_springImpulse=0,this.m_motorImpulse=0;t.velocities[this.m_indexA].w=u,t.velocities[this.m_indexB].w=p}SolveVelocityConstraints(t){const e=this.m_invMassA,i=this.m_invMassB,n=this.m_invIA,s=this.m_invIB,o=t.velocities[this.m_indexA].v;let a=t.velocities[this.m_indexA].w;const l=t.velocities[this.m_indexB].v;let c=t.velocities[this.m_indexB].w;{const t=r.A.DotVV(this.m_ax,r.A.SubVV(l,o,r.A.s_t0))+this.m_sBx*c-this.m_sAx*a,u=-this.m_springMass*(t+this.m_bias+this.m_gamma*this.m_springImpulse);this.m_springImpulse+=u;const h=r.A.MulSV(u,this.m_ax,Ce.SolveVelocityConstraints_s_P),d=u*this.m_sAx,m=u*this.m_sBx;o.SelfMulSub(e,h),a-=n*d,l.SelfMulAdd(i,h),c+=s*m}{const e=c-a-this.m_motorSpeed;let i=-this.m_motorMass*e;const o=this.m_motorImpulse,l=t.step.dt*this.m_maxMotorTorque;this.m_motorImpulse=Object(r.e)(this.m_motorImpulse+i,-l,l),a-=n*(i=this.m_motorImpulse-o),c+=s*i}{const t=r.A.DotVV(this.m_ay,r.A.SubVV(l,o,r.A.s_t0))+this.m_sBy*c-this.m_sAy*a,u=-this.m_mass*t;this.m_impulse+=u;const h=r.A.MulSV(u,this.m_ay,Ce.SolveVelocityConstraints_s_P),d=u*this.m_sAy,m=u*this.m_sBy;o.SelfMulSub(e,h),a-=n*d,l.SelfMulAdd(i,h),c+=s*m}t.velocities[this.m_indexA].w=a,t.velocities[this.m_indexB].w=c}SolvePositionConstraints(t){const e=t.positions[this.m_indexA].c;let i=t.positions[this.m_indexA].a;const n=t.positions[this.m_indexB].c;let o=t.positions[this.m_indexB].a;const a=this.m_qA.SetAngle(i),l=this.m_qB.SetAngle(o);r.A.SubVV(this.m_localAnchorA,this.m_localCenterA,this.m_lalcA);const c=r.t.MulRV(a,this.m_lalcA,this.m_rA);r.A.SubVV(this.m_localAnchorB,this.m_localCenterB,this.m_lalcB);const u=r.t.MulRV(l,this.m_lalcB,this.m_rB),h=r.A.AddVV(r.A.SubVV(n,e,r.A.s_t0),r.A.SubVV(u,c,r.A.s_t1),Ce.SolvePositionConstraints_s_d),d=r.t.MulRV(a,this.m_localYAxisA,this.m_ay),m=r.A.CrossVV(r.A.AddVV(h,c,r.A.s_t0),d),p=r.A.CrossVV(u,d),f=r.A.DotVV(h,this.m_ay),_=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_sAy*this.m_sAy+this.m_invIB*this.m_sBy*this.m_sBy;let g;g=0!==_?-f/_:0;const v=r.A.MulSV(g,d,Ce.SolvePositionConstraints_s_P),y=g*m,x=g*p;return e.SelfMulSub(this.m_invMassA,v),i-=this.m_invIA*y,n.SelfMulAdd(this.m_invMassB,v),o+=this.m_invIB*x,t.positions[this.m_indexA].a=i,t.positions[this.m_indexB].a=o,Object(r.a)(f)<=s.v}GetDefinition(t){return t}GetAnchorA(t){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA,t)}GetAnchorB(t){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB,t)}GetReactionForce(t,e){return e.x=t*(this.m_impulse*this.m_ay.x+this.m_springImpulse*this.m_ax.x),e.y=t*(this.m_impulse*this.m_ay.y+this.m_springImpulse*this.m_ax.y),e}GetReactionTorque(t){return t*this.m_motorImpulse}GetLocalAnchorA(){return this.m_localAnchorA}GetLocalAnchorB(){return this.m_localAnchorB}GetLocalAxisA(){return this.m_localXAxisA}GetJointTranslation(){return this.GetPrismaticJointTranslation()}GetJointSpeed(){return this.GetRevoluteJointSpeed()}GetPrismaticJointTranslation(){const t=this.m_bodyA,e=this.m_bodyB,i=t.GetWorldPoint(this.m_localAnchorA,new r.A),n=e.GetWorldPoint(this.m_localAnchorB,new r.A),s=r.A.SubVV(n,i,new r.A),o=t.GetWorldVector(this.m_localXAxisA,new r.A);return r.A.DotVV(s,o)}GetPrismaticJointSpeed(){const t=this.m_bodyA,e=this.m_bodyB;r.A.SubVV(this.m_localAnchorA,t.m_sweep.localCenter,this.m_lalcA);const i=r.t.MulRV(t.m_xf.q,this.m_lalcA,this.m_rA);r.A.SubVV(this.m_localAnchorB,e.m_sweep.localCenter,this.m_lalcB);const n=r.t.MulRV(e.m_xf.q,this.m_lalcB,this.m_rB),s=r.A.AddVV(t.m_sweep.c,i,r.A.s_t0),o=r.A.AddVV(e.m_sweep.c,n,r.A.s_t1),a=r.A.SubVV(o,s,r.A.s_t2),l=t.GetWorldVector(this.m_localXAxisA,new r.A),c=t.m_linearVelocity,u=e.m_linearVelocity,h=t.m_angularVelocity,d=e.m_angularVelocity;return r.A.DotVV(a,r.A.CrossSV(h,l,r.A.s_t0))+r.A.DotVV(l,r.A.SubVV(r.A.AddVCrossSV(u,d,n,r.A.s_t0),r.A.AddVCrossSV(c,h,i,r.A.s_t1),r.A.s_t0))}GetRevoluteJointAngle(){return this.m_bodyB.m_sweep.a-this.m_bodyA.m_sweep.a}GetRevoluteJointSpeed(){const t=this.m_bodyA.m_angularVelocity;return this.m_bodyB.m_angularVelocity-t}IsMotorEnabled(){return this.m_enableMotor}EnableMotor(t){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_enableMotor=t}SetMotorSpeed(t){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_motorSpeed=t}SetMaxMotorTorque(t){this.m_bodyA.SetAwake(!0),this.m_bodyB.SetAwake(!0),this.m_maxMotorTorque=t}GetMotorTorque(t){return t*this.m_motorImpulse}Dump(t){const e=this.m_bodyA.m_islandIndex,i=this.m_bodyB.m_islandIndex;t("  const jd: b2WheelJointDef = new b2WheelJointDef();\n"),t("  jd.bodyA = bodies[%d];\n",e),t("  jd.bodyB = bodies[%d];\n",i),t("  jd.collideConnected = %s;\n",this.m_collideConnected?"true":"false"),t("  jd.localAnchorA.Set(%.15f, %.15f);\n",this.m_localAnchorA.x,this.m_localAnchorA.y),t("  jd.localAnchorB.Set(%.15f, %.15f);\n",this.m_localAnchorB.x,this.m_localAnchorB.y),t("  jd.localAxisA.Set(%.15f, %.15f);\n",this.m_localXAxisA.x,this.m_localXAxisA.y),t("  jd.enableMotor = %s;\n",this.m_enableMotor?"true":"false"),t("  jd.motorSpeed = %.15f;\n",this.m_motorSpeed),t("  jd.maxMotorTorque = %.15f;\n",this.m_maxMotorTorque),t("  jd.frequencyHz = %.15f;\n",this.m_frequencyHz),t("  jd.dampingRatio = %.15f;\n",this.m_dampingRatio),t("  joints[%d] = this.m_world.CreateJoint(jd);\n",this.m_index)}}Ce.InitVelocityConstraints_s_d=new r.A,Ce.InitVelocityConstraints_s_P=new r.A,Ce.SolveVelocityConstraints_s_P=new r.A,Ce.SolvePositionConstraints_s_d=new r.A,Ce.SolvePositionConstraints_s_P=new r.A;class Be{static Create(t,e){let i=null;switch(t.type){case Wt.e_distanceJoint:i=new ne(t);break;case Wt.e_mouseJoint:i=new me(t);break;case Wt.e_prismaticJoint:i=new fe(t);break;case Wt.e_revoluteJoint:i=new ye(t);break;case Wt.e_pulleyJoint:i=new ge(t);break;case Wt.e_gearJoint:i=new ce(t);break;case Wt.e_wheelJoint:i=new Ce(t);break;case Wt.e_weldJoint:i=new we(t);break;case Wt.e_frictionJoint:i=new ae(t);break;case Wt.e_ropeJoint:i=new be(t);break;case Wt.e_motorJoint:i=new he(t);break;case Wt.e_areaJoint:i=new re(t)}return i}static Destroy(t,e){}}function Ve(t,e){return Object(r.w)(t*e)}function Me(t,e){return t>e?t:e}class ke{constructor(){this.other=null,this.contact=null,this.prev=null,this.next=null}}class Pe{constructor(){this.m_islandFlag=!1,this.m_touchingFlag=!1,this.m_enabledFlag=!1,this.m_filterFlag=!1,this.m_bulletHitFlag=!1,this.m_toiFlag=!1,this.m_prev=null,this.m_next=null,this.m_nodeA=new ke,this.m_nodeB=new ke,this.m_fixtureA=null,this.m_fixtureB=null,this.m_indexA=0,this.m_indexB=0,this.m_manifold=new m.h,this.m_toiCount=0,this.m_toi=0,this.m_friction=0,this.m_restitution=0,this.m_tangentSpeed=0,this.m_oldManifold=new m.h}GetManifold(){return this.m_manifold}GetWorldManifold(t){const e=this.m_fixtureA.GetBody(),i=this.m_fixtureB.GetBody(),n=this.m_fixtureA.GetShape(),s=this.m_fixtureB.GetShape();t.Initialize(this.m_manifold,e.GetTransform(),n.m_radius,i.GetTransform(),s.m_radius)}IsTouching(){return this.m_touchingFlag}SetEnabled(t){this.m_enabledFlag=t}IsEnabled(){return this.m_enabledFlag}GetNext(){return this.m_next}GetFixtureA(){return this.m_fixtureA}GetChildIndexA(){return this.m_indexA}GetFixtureB(){return this.m_fixtureB}GetChildIndexB(){return this.m_indexB}Evaluate(t,e,i){}FlagForFiltering(){this.m_filterFlag=!0}SetFriction(t){this.m_friction=t}GetFriction(){return this.m_friction}ResetFriction(){this.m_friction=Ve(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction)}SetRestitution(t){this.m_restitution=t}GetRestitution(){return this.m_restitution}ResetRestitution(){this.m_restitution=Me(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution)}SetTangentSpeed(t){this.m_tangentSpeed=t}GetTangentSpeed(){return this.m_tangentSpeed}Reset(t,e,i,n){this.m_islandFlag=!1,this.m_touchingFlag=!1,this.m_enabledFlag=!0,this.m_filterFlag=!1,this.m_bulletHitFlag=!1,this.m_toiFlag=!1,this.m_fixtureA=t,this.m_fixtureB=i,this.m_indexA=e,this.m_indexB=n,this.m_manifold.pointCount=0,this.m_prev=null,this.m_next=null,this.m_nodeA.contact=null,this.m_nodeA.prev=null,this.m_nodeA.next=null,this.m_nodeA.other=null,this.m_nodeB.contact=null,this.m_nodeB.prev=null,this.m_nodeB.next=null,this.m_nodeB.other=null,this.m_toiCount=0,this.m_friction=Ve(this.m_fixtureA.m_friction,this.m_fixtureB.m_friction),this.m_restitution=Me(this.m_fixtureA.m_restitution,this.m_fixtureB.m_restitution)}Update(t){const e=this.m_oldManifold;this.m_oldManifold=this.m_manifold,this.m_manifold=e,this.m_enabledFlag=!0;let i=!1;const n=this.m_touchingFlag,s=this.m_fixtureA.IsSensor(),r=this.m_fixtureB.IsSensor(),o=s||r,a=this.m_fixtureA.GetBody(),l=this.m_fixtureB.GetBody(),c=a.GetTransform(),u=l.GetTransform();if(o){const t=this.m_fixtureA.GetShape(),e=this.m_fixtureB.GetShape();i=Object(m.o)(t,this.m_indexA,e,this.m_indexB,c,u),this.m_manifold.pointCount=0}else{this.Evaluate(this.m_manifold,c,u),i=this.m_manifold.pointCount>0;for(let t=0;t<this.m_manifold.pointCount;++t){const e=this.m_manifold.points[t];e.normalImpulse=0,e.tangentImpulse=0;const i=e.id;for(let t=0;t<this.m_oldManifold.pointCount;++t){const n=this.m_oldManifold.points[t];if(n.id.key===i.key){e.normalImpulse=n.normalImpulse,e.tangentImpulse=n.tangentImpulse;break}}}i!==n&&(a.SetAwake(!0),l.SetAwake(!0))}this.m_touchingFlag=i,!n&&i&&t&&t.BeginContact(this),n&&!i&&t&&t.EndContact(this),!o&&i&&t&&t.PreSolve(this,this.m_oldManifold)}ComputeTOI(t,e){const i=Pe.ComputeTOI_s_input;i.proxyA.SetShape(this.m_fixtureA.GetShape(),this.m_indexA),i.proxyB.SetShape(this.m_fixtureB.GetShape(),this.m_indexB),i.sweepA.Copy(t),i.sweepB.Copy(e),i.tMax=s.v;const n=Pe.ComputeTOI_s_output;return X(n,i),n.t}}Pe.ComputeTOI_s_input=new L,Pe.ComputeTOI_s_output=new O;class Ie extends Pe{constructor(){super()}static Create(t){return new Ie}static Destroy(t,e){}Reset(t,e,i,n){super.Reset(t,e,i,n)}Evaluate(t,e,i){K(t,this.m_fixtureA.GetShape(),e,this.m_fixtureB.GetShape(),i)}}class De extends Pe{constructor(){super()}static Create(t){return new De}static Destroy(t,e){}Reset(t,e,i,n){super.Reset(t,e,i,n)}Evaluate(t,e,i){Bt(t,this.m_fixtureA.GetShape(),e,this.m_fixtureB.GetShape(),i)}}class Te extends Pe{constructor(){super()}static Create(t){return new Te}static Destroy(t,e){}Reset(t,e,i,n){super.Reset(t,e,i,n)}Evaluate(t,e,i){nt(t,this.m_fixtureA.GetShape(),e,this.m_fixtureB.GetShape(),i)}}class Ee extends Pe{constructor(){super()}static Create(t){return new Ee}static Destroy(t,e){}Reset(t,e,i,n){super.Reset(t,e,i,n)}Evaluate(t,e,i){$t(t,this.m_fixtureA.GetShape(),e,this.m_fixtureB.GetShape(),i)}}class $e extends Pe{constructor(){super()}static Create(t){return new $e}static Destroy(t,e){}Reset(t,e,i,n){super.Reset(t,e,i,n)}Evaluate(t,e,i){jt(t,this.m_fixtureA.GetShape(),e,this.m_fixtureB.GetShape(),i)}}class Le extends Pe{constructor(){super()}static Create(t){return new Le}static Destroy(t,e){}Reset(t,e,i,n){super.Reset(t,e,i,n)}Evaluate(t,e,i){const n=this.m_fixtureA.GetShape(),s=this.m_fixtureB.GetShape(),r=n,o=Le.Evaluate_s_edge;r.GetChildEdge(o,this.m_indexA),$t(t,o,e,s,i)}}Le.Evaluate_s_edge=new zt;class Re extends Pe{constructor(){super()}static Create(t){return new Re}static Destroy(t,e){}Reset(t,e,i,n){super.Reset(t,e,i,n)}Evaluate(t,e,i){const n=this.m_fixtureA.GetShape(),s=this.m_fixtureB.GetShape(),r=n,o=Re.Evaluate_s_edge;r.GetChildEdge(o,this.m_indexA),jt(t,o,e,s,i)}}Re.Evaluate_s_edge=new zt;class Fe{constructor(){this.pool=null,this.createFcn=null,this.destroyFcn=null,this.primary=!1}}class Oe{constructor(t){this.m_allocator=null,this.m_allocator=t,this.InitializeRegisters()}AddType(t,e,i,n){const r=Object(s.e)(256,e=>t(this.m_allocator));function o(e){return r.length>0?r.pop():t(e)}function a(t,e){r.push(t)}this.m_registers[i][n].pool=r,this.m_registers[i][n].createFcn=o,this.m_registers[i][n].destroyFcn=a,this.m_registers[i][n].primary=!0,i!==n&&(this.m_registers[n][i].pool=r,this.m_registers[n][i].createFcn=o,this.m_registers[n][i].destroyFcn=a,this.m_registers[n][i].primary=!1)}InitializeRegisters(){this.m_registers=[];for(let t=0;t<Gt.c.e_shapeTypeCount;t++){this.m_registers[t]=[];for(let e=0;e<Gt.c.e_shapeTypeCount;e++)this.m_registers[t][e]=new Fe}this.AddType(Ie.Create,Ie.Destroy,Gt.c.e_circleShape,Gt.c.e_circleShape),this.AddType(Te.Create,Te.Destroy,Gt.c.e_polygonShape,Gt.c.e_circleShape),this.AddType(De.Create,De.Destroy,Gt.c.e_polygonShape,Gt.c.e_polygonShape),this.AddType(Ee.Create,Ee.Destroy,Gt.c.e_edgeShape,Gt.c.e_circleShape),this.AddType($e.Create,$e.Destroy,Gt.c.e_edgeShape,Gt.c.e_polygonShape),this.AddType(Le.Create,Le.Destroy,Gt.c.e_chainShape,Gt.c.e_circleShape),this.AddType(Re.Create,Re.Destroy,Gt.c.e_chainShape,Gt.c.e_polygonShape)}Create(t,e,i,n){const s=t.GetType(),r=i.GetType(),o=this.m_registers[s][r];if(o.createFcn){const s=o.createFcn(this.m_allocator);return o.primary?s.Reset(t,e,i,n):s.Reset(i,n,t,e),s}return null}Destroy(t){const e=t.m_fixtureA,i=t.m_fixtureB;t.m_manifold.pointCount>0&&!e.IsSensor()&&!i.IsSensor()&&(e.GetBody().SetAwake(!0),i.GetBody().SetAwake(!0));const n=e.GetType(),s=i.GetType();this.m_registers[n][s].destroyFcn(t,this.m_allocator)}}class je{SayGoodbyeJoint(t){}SayGoodbyeFixture(t){}SayGoodbyeParticleGroup(t){}SayGoodbyeParticle(t,e){}}class Ge{ShouldCollide(t,e){const i=t.GetBody(),n=e.GetBody();if(n.GetType()===Ut.b2_staticBody&&i.GetType()===Ut.b2_staticBody)return!1;if(!n.ShouldCollideConnected(i))return!1;const s=t.GetFilterData(),r=e.GetFilterData();return s.groupIndex===r.groupIndex&&0!==s.groupIndex?s.groupIndex>0:0!=(s.maskBits&r.categoryBits)&&0!=(s.categoryBits&r.maskBits)}ShouldCollideFixtureParticle(t,e,i){return!0}ShouldCollideParticleParticle(t,e,i){return!0}}Ge.b2_defaultFilter=new Ge;class Ne{constructor(){this.normalImpulses=Object(s.g)(s.z),this.tangentImpulses=Object(s.g)(s.z),this.count=0}}class qe{BeginContact(t){}EndContact(t){}BeginContactFixtureParticle(t,e){}EndContactFixtureParticle(t,e){}BeginContactParticleParticle(t,e){}EndContactParticleParticle(t,e){}PreSolve(t,e){}PostSolve(t,e){}}qe.b2_defaultListener=new qe;class ze{ReportFixture(t){return!0}ReportParticle(t,e){return!1}ShouldQueryParticleSystem(t){return!0}}class He{ReportFixture(t,e,i,n){return n}ReportParticle(t,e,i,n,s){return 0}ShouldQueryParticleSystem(t){return!0}}class Ue{constructor(){this.m_broadPhase=new y,this.m_contactList=null,this.m_contactCount=0,this.m_contactFilter=Ge.b2_defaultFilter,this.m_contactListener=qe.b2_defaultListener,this.m_allocator=null,this.m_contactFactory=null,this.m_contactFactory=new Oe(this.m_allocator)}AddPair(t,e){let i=t.fixture,n=e.fixture,s=t.childIndex,r=e.childIndex,o=i.GetBody(),a=n.GetBody();if(o===a)return;let l=a.GetContactList();for(;l;){if(l.other===o){const t=l.contact.GetFixtureA(),e=l.contact.GetFixtureB(),o=l.contact.GetChildIndexA(),a=l.contact.GetChildIndexB();if(t===i&&e===n&&o===s&&a===r)return;if(t===n&&e===i&&o===r&&a===s)return}l=l.next}if(this.m_contactFilter&&!this.m_contactFilter.ShouldCollide(i,n))return;const c=this.m_contactFactory.Create(i,s,n,r);null!==c&&(i=c.GetFixtureA(),n=c.GetFixtureB(),s=c.GetChildIndexA(),r=c.GetChildIndexB(),o=i.m_body,a=n.m_body,c.m_prev=null,c.m_next=this.m_contactList,null!==this.m_contactList&&(this.m_contactList.m_prev=c),this.m_contactList=c,c.m_nodeA.contact=c,c.m_nodeA.other=a,c.m_nodeA.prev=null,c.m_nodeA.next=o.m_contactList,null!==o.m_contactList&&(o.m_contactList.prev=c.m_nodeA),o.m_contactList=c.m_nodeA,c.m_nodeB.contact=c,c.m_nodeB.other=o,c.m_nodeB.prev=null,c.m_nodeB.next=a.m_contactList,null!==a.m_contactList&&(a.m_contactList.prev=c.m_nodeB),a.m_contactList=c.m_nodeB,i.IsSensor()||n.IsSensor()||(o.SetAwake(!0),a.SetAwake(!0)),++this.m_contactCount)}FindNewContacts(){this.m_broadPhase.UpdatePairs(this)}Destroy(t){const e=t.GetFixtureA(),i=t.GetFixtureB(),n=e.GetBody(),s=i.GetBody();this.m_contactListener&&t.IsTouching()&&this.m_contactListener.EndContact(t),t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t===this.m_contactList&&(this.m_contactList=t.m_next),t.m_nodeA.prev&&(t.m_nodeA.prev.next=t.m_nodeA.next),t.m_nodeA.next&&(t.m_nodeA.next.prev=t.m_nodeA.prev),t.m_nodeA===n.m_contactList&&(n.m_contactList=t.m_nodeA.next),t.m_nodeB.prev&&(t.m_nodeB.prev.next=t.m_nodeB.next),t.m_nodeB.next&&(t.m_nodeB.next.prev=t.m_nodeB.prev),t.m_nodeB===s.m_contactList&&(s.m_contactList=t.m_nodeB.next),this.m_contactFactory.Destroy(t),--this.m_contactCount}Collide(){let t=this.m_contactList;for(;t;){const e=t.GetFixtureA(),i=t.GetFixtureB(),n=t.GetChildIndexA(),s=t.GetChildIndexB(),r=e.GetBody(),o=i.GetBody();if(t.m_filterFlag){if(this.m_contactFilter&&!this.m_contactFilter.ShouldCollide(e,i)){const e=t;t=e.m_next,this.Destroy(e);continue}t.m_filterFlag=!1}const a=r.IsAwake()&&r.m_type!==Ut.b2_staticBody,l=o.IsAwake()&&o.m_type!==Ut.b2_staticBody;if(!a&&!l){t=t.m_next;continue}const c=e.m_proxies[n].treeNode,u=i.m_proxies[s].treeNode;if(this.m_broadPhase.TestOverlap(c,u))t.Update(this.m_contactListener),t=t.m_next;else{const e=t;t=e.m_next,this.Destroy(e)}}}}class We{constructor(){this.step=0,this.collide=0,this.solve=0,this.solveInit=0,this.solveVelocity=0,this.solvePosition=0,this.broadphase=0,this.solveTOI=0}Reset(){return this.step=0,this.collide=0,this.solve=0,this.solveInit=0,this.solveVelocity=0,this.solvePosition=0,this.broadphase=0,this.solveTOI=0,this}}class Je{constructor(){this.dt=0,this.inv_dt=0,this.dtRatio=0,this.velocityIterations=0,this.positionIterations=0,this.particleIterations=0,this.warmStarting=!1}Copy(t){return this.dt=t.dt,this.inv_dt=t.inv_dt,this.dtRatio=t.dtRatio,this.positionIterations=t.positionIterations,this.velocityIterations=t.velocityIterations,this.particleIterations=t.particleIterations,this.warmStarting=t.warmStarting,this}}class Ye{constructor(){this.c=new r.A,this.a=0}static MakeArray(t){return Object(s.e)(t,t=>new Ye)}}class Xe{constructor(){this.v=new r.A,this.w=0}static MakeArray(t){return Object(s.e)(t,t=>new Xe)}}class Qe{constructor(){this.step=new Je,this.positions=null,this.velocities=null}}class Ze{constructor(){this.rA=new r.A,this.rB=new r.A,this.normalImpulse=0,this.tangentImpulse=0,this.normalMass=0,this.tangentMass=0,this.velocityBias=0}static MakeArray(t){return Object(s.e)(t,t=>new Ze)}}class Ke{constructor(){this.points=Ze.MakeArray(s.z),this.normal=new r.A,this.tangent=new r.A,this.normalMass=new r.k,this.K=new r.k,this.indexA=0,this.indexB=0,this.invMassA=0,this.invMassB=0,this.invIA=0,this.invIB=0,this.friction=0,this.restitution=0,this.tangentSpeed=0,this.pointCount=0,this.contactIndex=0}static MakeArray(t){return Object(s.e)(t,t=>new Ke)}}class ti{constructor(){this.localPoints=r.A.MakeArray(s.z),this.localNormal=new r.A,this.localPoint=new r.A,this.indexA=0,this.indexB=0,this.invMassA=0,this.invMassB=0,this.localCenterA=new r.A,this.localCenterB=new r.A,this.invIA=0,this.invIB=0,this.type=m.j.e_unknown,this.radiusA=0,this.radiusB=0,this.pointCount=0}static MakeArray(t){return Object(s.e)(t,t=>new ti)}}class ei{constructor(){this.step=new Je,this.contacts=null,this.count=0,this.positions=null,this.velocities=null,this.allocator=null}}class ii{constructor(){this.normal=new r.A,this.point=new r.A,this.separation=0}Initialize(t,e,i,n){const s=ii.Initialize_s_pointA,o=ii.Initialize_s_pointB,a=ii.Initialize_s_planePoint,l=ii.Initialize_s_clipPoint;switch(t.type){case m.j.e_circles:r.z.MulXV(e,t.localPoint,s),r.z.MulXV(i,t.localPoints[0],o),r.A.SubVV(o,s,this.normal).SelfNormalize(),r.A.MidVV(s,o,this.point),this.separation=r.A.DotVV(r.A.SubVV(o,s,r.A.s_t0),this.normal)-t.radiusA-t.radiusB;break;case m.j.e_faceA:r.t.MulRV(e.q,t.localNormal,this.normal),r.z.MulXV(e,t.localPoint,a),r.z.MulXV(i,t.localPoints[n],l),this.separation=r.A.DotVV(r.A.SubVV(l,a,r.A.s_t0),this.normal)-t.radiusA-t.radiusB,this.point.Copy(l);break;case m.j.e_faceB:r.t.MulRV(i.q,t.localNormal,this.normal),r.z.MulXV(i,t.localPoint,a),r.z.MulXV(e,t.localPoints[n],l),this.separation=r.A.DotVV(r.A.SubVV(l,a,r.A.s_t0),this.normal)-t.radiusA-t.radiusB,this.point.Copy(l),this.normal.SelfNeg()}}}ii.Initialize_s_pointA=new r.A,ii.Initialize_s_pointB=new r.A,ii.Initialize_s_planePoint=new r.A,ii.Initialize_s_clipPoint=new r.A;class ni{constructor(){this.m_step=new Je,this.m_positions=null,this.m_velocities=null,this.m_allocator=null,this.m_positionConstraints=ti.MakeArray(1024),this.m_velocityConstraints=Ke.MakeArray(1024),this.m_contacts=null,this.m_count=0}Initialize(t){if(this.m_step.Copy(t.step),this.m_allocator=t.allocator,this.m_count=t.count,this.m_positionConstraints.length<this.m_count){const t=Object(r.m)(2*this.m_positionConstraints.length,this.m_count);for(;this.m_positionConstraints.length<t;)this.m_positionConstraints[this.m_positionConstraints.length]=new ti}if(this.m_velocityConstraints.length<this.m_count){const t=Object(r.m)(2*this.m_velocityConstraints.length,this.m_count);for(;this.m_velocityConstraints.length<t;)this.m_velocityConstraints[this.m_velocityConstraints.length]=new Ke}this.m_positions=t.positions,this.m_velocities=t.velocities,this.m_contacts=t.contacts;for(let t=0;t<this.m_count;++t){const e=this.m_contacts[t],i=e.m_fixtureA,n=e.m_fixtureB,s=i.GetShape(),r=n.GetShape(),o=s.m_radius,a=r.m_radius,l=i.GetBody(),c=n.GetBody(),u=e.GetManifold(),h=u.pointCount,d=this.m_velocityConstraints[t];d.friction=e.m_friction,d.restitution=e.m_restitution,d.tangentSpeed=e.m_tangentSpeed,d.indexA=l.m_islandIndex,d.indexB=c.m_islandIndex,d.invMassA=l.m_invMass,d.invMassB=c.m_invMass,d.invIA=l.m_invI,d.invIB=c.m_invI,d.contactIndex=t,d.pointCount=h,d.K.SetZero(),d.normalMass.SetZero();const m=this.m_positionConstraints[t];m.indexA=l.m_islandIndex,m.indexB=c.m_islandIndex,m.invMassA=l.m_invMass,m.invMassB=c.m_invMass,m.localCenterA.Copy(l.m_sweep.localCenter),m.localCenterB.Copy(c.m_sweep.localCenter),m.invIA=l.m_invI,m.invIB=c.m_invI,m.localNormal.Copy(u.localNormal),m.localPoint.Copy(u.localPoint),m.pointCount=h,m.radiusA=o,m.radiusB=a,m.type=u.type;for(let t=0;t<h;++t){const e=u.points[t],i=d.points[t];this.m_step.warmStarting?(i.normalImpulse=this.m_step.dtRatio*e.normalImpulse,i.tangentImpulse=this.m_step.dtRatio*e.tangentImpulse):(i.normalImpulse=0,i.tangentImpulse=0),i.rA.SetZero(),i.rB.SetZero(),i.normalMass=0,i.tangentMass=0,i.velocityBias=0,m.localPoints[t].Copy(e.localPoint)}}return this}InitializeVelocityConstraints(){const t=ni.InitializeVelocityConstraints_s_xfA,e=ni.InitializeVelocityConstraints_s_xfB,i=ni.InitializeVelocityConstraints_s_worldManifold;for(let n=0;n<this.m_count;++n){const o=this.m_velocityConstraints[n],a=this.m_positionConstraints[n],l=a.radiusA,c=a.radiusB,u=this.m_contacts[o.contactIndex].GetManifold(),h=o.indexA,d=o.indexB,m=o.invMassA,p=o.invMassB,f=o.invIA,_=o.invIB,g=a.localCenterA,v=a.localCenterB,y=this.m_positions[h].c,x=this.m_positions[h].a,b=this.m_velocities[h].v,A=this.m_velocities[h].w,w=this.m_positions[d].c,S=this.m_positions[d].a,C=this.m_velocities[d].v,B=this.m_velocities[d].w;t.q.SetAngle(x),e.q.SetAngle(S),r.A.SubVV(y,r.t.MulRV(t.q,g,r.A.s_t0),t.p),r.A.SubVV(w,r.t.MulRV(e.q,v,r.A.s_t0),e.p),i.Initialize(u,t,l,e,c),o.normal.Copy(i.normal),r.A.CrossVOne(o.normal,o.tangent);const V=o.pointCount;for(let t=0;t<V;++t){const e=o.points[t];r.A.SubVV(i.points[t],y,e.rA),r.A.SubVV(i.points[t],w,e.rB);const n=r.A.CrossVV(e.rA,o.normal),a=r.A.CrossVV(e.rB,o.normal),l=m+p+f*n*n+_*a*a;e.normalMass=l>0?1/l:0;const c=o.tangent,u=r.A.CrossVV(e.rA,c),h=r.A.CrossVV(e.rB,c),d=m+p+f*u*u+_*h*h;e.tangentMass=d>0?1/d:0,e.velocityBias=0;const g=r.A.DotVV(o.normal,r.A.SubVV(r.A.AddVCrossSV(C,B,e.rB,r.A.s_t0),r.A.AddVCrossSV(b,A,e.rA,r.A.s_t1),r.A.s_t0));g<-s.T&&(e.velocityBias+=-o.restitution*g)}if(2===o.pointCount){const t=o.points[0],e=o.points[1],i=r.A.CrossVV(t.rA,o.normal),n=r.A.CrossVV(t.rB,o.normal),s=r.A.CrossVV(e.rA,o.normal),a=r.A.CrossVV(e.rB,o.normal),l=m+p+f*i*i+_*n*n,c=m+p+f*s*s+_*a*a,u=m+p+f*i*s+_*n*a;l*l<1e3*(l*c-u*u)?(o.K.ex.Set(l,u),o.K.ey.Set(u,c),o.K.GetInverse(o.normalMass)):o.pointCount=1}}}WarmStart(){const t=ni.WarmStart_s_P;for(let e=0;e<this.m_count;++e){const i=this.m_velocityConstraints[e],n=i.indexA,s=i.indexB,o=i.invMassA,a=i.invIA,l=i.invMassB,c=i.invIB,u=i.pointCount,h=this.m_velocities[n].v;let d=this.m_velocities[n].w;const m=this.m_velocities[s].v;let p=this.m_velocities[s].w;const f=i.normal,_=i.tangent;for(let e=0;e<u;++e){const n=i.points[e];r.A.AddVV(r.A.MulSV(n.normalImpulse,f,r.A.s_t0),r.A.MulSV(n.tangentImpulse,_,r.A.s_t1),t),d-=a*r.A.CrossVV(n.rA,t),h.SelfMulSub(o,t),p+=c*r.A.CrossVV(n.rB,t),m.SelfMulAdd(l,t)}this.m_velocities[n].w=d,this.m_velocities[s].w=p}}SolveVelocityConstraints(){const t=ni.SolveVelocityConstraints_s_dv,e=ni.SolveVelocityConstraints_s_dv1,i=ni.SolveVelocityConstraints_s_dv2,n=ni.SolveVelocityConstraints_s_P,s=ni.SolveVelocityConstraints_s_a,o=ni.SolveVelocityConstraints_s_b,a=ni.SolveVelocityConstraints_s_x,l=ni.SolveVelocityConstraints_s_d,c=ni.SolveVelocityConstraints_s_P1,u=ni.SolveVelocityConstraints_s_P2,h=ni.SolveVelocityConstraints_s_P1P2;for(let d=0;d<this.m_count;++d){const m=this.m_velocityConstraints[d],p=m.indexA,f=m.indexB,_=m.invMassA,g=m.invIA,v=m.invMassB,y=m.invIB,x=m.pointCount,b=this.m_velocities[p].v;let A=this.m_velocities[p].w;const w=this.m_velocities[f].v;let S=this.m_velocities[f].w;const C=m.normal,B=m.tangent,V=m.friction;for(let e=0;e<x;++e){const i=m.points[e];r.A.SubVV(r.A.AddVCrossSV(w,S,i.rB,r.A.s_t0),r.A.AddVCrossSV(b,A,i.rA,r.A.s_t1),t);const s=r.A.DotVV(t,B)-m.tangentSpeed;let o=i.tangentMass*-s;const a=V*i.normalImpulse,l=Object(r.e)(i.tangentImpulse+o,-a,a);o=l-i.tangentImpulse,i.tangentImpulse=l,r.A.MulSV(o,B,n),b.SelfMulSub(_,n),A-=g*r.A.CrossVV(i.rA,n),w.SelfMulAdd(v,n),S+=y*r.A.CrossVV(i.rB,n)}if(1===m.pointCount){const e=m.points[0];r.A.SubVV(r.A.AddVCrossSV(w,S,e.rB,r.A.s_t0),r.A.AddVCrossSV(b,A,e.rA,r.A.s_t1),t);const i=r.A.DotVV(t,C);let s=-e.normalMass*(i-e.velocityBias);const o=Object(r.m)(e.normalImpulse+s,0);s=o-e.normalImpulse,e.normalImpulse=o,r.A.MulSV(s,C,n),b.SelfMulSub(_,n),A-=g*r.A.CrossVV(e.rA,n),w.SelfMulAdd(v,n),S+=y*r.A.CrossVV(e.rB,n)}else{const t=m.points[0],n=m.points[1];s.Set(t.normalImpulse,n.normalImpulse),r.A.SubVV(r.A.AddVCrossSV(w,S,t.rB,r.A.s_t0),r.A.AddVCrossSV(b,A,t.rA,r.A.s_t1),e),r.A.SubVV(r.A.AddVCrossSV(w,S,n.rB,r.A.s_t0),r.A.AddVCrossSV(b,A,n.rA,r.A.s_t1),i);let d=r.A.DotVV(e,C),p=r.A.DotVV(i,C);for(o.x=d-t.velocityBias,o.y=p-n.velocityBias,o.SelfSub(r.k.MulMV(m.K,s,r.A.s_t0));;){if(r.k.MulMV(m.normalMass,o,a).SelfNeg(),a.x>=0&&a.y>=0){r.A.SubVV(a,s,l),r.A.MulSV(l.x,C,c),r.A.MulSV(l.y,C,u),r.A.AddVV(c,u,h),b.SelfMulSub(_,h),A-=g*(r.A.CrossVV(t.rA,c)+r.A.CrossVV(n.rA,u)),w.SelfMulAdd(v,h),S+=y*(r.A.CrossVV(t.rB,c)+r.A.CrossVV(n.rB,u)),t.normalImpulse=a.x,n.normalImpulse=a.y;break}if(a.x=-t.normalMass*o.x,a.y=0,d=0,p=m.K.ex.y*a.x+o.y,a.x>=0&&p>=0){r.A.SubVV(a,s,l),r.A.MulSV(l.x,C,c),r.A.MulSV(l.y,C,u),r.A.AddVV(c,u,h),b.SelfMulSub(_,h),A-=g*(r.A.CrossVV(t.rA,c)+r.A.CrossVV(n.rA,u)),w.SelfMulAdd(v,h),S+=y*(r.A.CrossVV(t.rB,c)+r.A.CrossVV(n.rB,u)),t.normalImpulse=a.x,n.normalImpulse=a.y;break}if(a.x=0,a.y=-n.normalMass*o.y,d=m.K.ey.x*a.y+o.x,p=0,a.y>=0&&d>=0){r.A.SubVV(a,s,l),r.A.MulSV(l.x,C,c),r.A.MulSV(l.y,C,u),r.A.AddVV(c,u,h),b.SelfMulSub(_,h),A-=g*(r.A.CrossVV(t.rA,c)+r.A.CrossVV(n.rA,u)),w.SelfMulAdd(v,h),S+=y*(r.A.CrossVV(t.rB,c)+r.A.CrossVV(n.rB,u)),t.normalImpulse=a.x,n.normalImpulse=a.y;break}if(a.x=0,a.y=0,d=o.x,p=o.y,d>=0&&p>=0){r.A.SubVV(a,s,l),r.A.MulSV(l.x,C,c),r.A.MulSV(l.y,C,u),r.A.AddVV(c,u,h),b.SelfMulSub(_,h),A-=g*(r.A.CrossVV(t.rA,c)+r.A.CrossVV(n.rA,u)),w.SelfMulAdd(v,h),S+=y*(r.A.CrossVV(t.rB,c)+r.A.CrossVV(n.rB,u)),t.normalImpulse=a.x,n.normalImpulse=a.y;break}break}}this.m_velocities[p].w=A,this.m_velocities[f].w=S}}StoreImpulses(){for(let t=0;t<this.m_count;++t){let e=this.m_velocityConstraints[t],i=this.m_contacts[e.contactIndex].GetManifold();for(let t=0;t<e.pointCount;++t)i.points[t].normalImpulse=e.points[t].normalImpulse,i.points[t].tangentImpulse=e.points[t].tangentImpulse}}SolvePositionConstraints(){const t=ni.SolvePositionConstraints_s_xfA,e=ni.SolvePositionConstraints_s_xfB,i=ni.SolvePositionConstraints_s_psm,n=ni.SolvePositionConstraints_s_rA,o=ni.SolvePositionConstraints_s_rB,a=ni.SolvePositionConstraints_s_P;let l=0;for(let c=0;c<this.m_count;++c){const u=this.m_positionConstraints[c],h=u.indexA,d=u.indexB,m=u.localCenterA,p=u.invMassA,f=u.invIA,_=u.localCenterB,g=u.invMassB,v=u.invIB,y=u.pointCount,x=this.m_positions[h].c;let b=this.m_positions[h].a;const A=this.m_positions[d].c;let w=this.m_positions[d].a;for(let c=0;c<y;++c){t.q.SetAngle(b),e.q.SetAngle(w),r.A.SubVV(x,r.t.MulRV(t.q,m,r.A.s_t0),t.p),r.A.SubVV(A,r.t.MulRV(e.q,_,r.A.s_t0),e.p),i.Initialize(u,t,e,c);const h=i.normal,d=i.point,y=i.separation;r.A.SubVV(d,x,n),r.A.SubVV(d,A,o),l=Object(r.n)(l,y);const S=Object(r.e)(s.p*(y+s.v),-s.y,0),C=r.A.CrossVV(n,h),B=r.A.CrossVV(o,h),V=p+g+f*C*C+v*B*B,M=V>0?-S/V:0;r.A.MulSV(M,h,a),x.SelfMulSub(p,a),b-=f*r.A.CrossVV(n,a),A.SelfMulAdd(g,a),w+=v*r.A.CrossVV(o,a)}this.m_positions[h].a=b,this.m_positions[d].a=w}return l>-3*s.v}SolveTOIPositionConstraints(t,e){const i=ni.SolveTOIPositionConstraints_s_xfA,n=ni.SolveTOIPositionConstraints_s_xfB,o=ni.SolveTOIPositionConstraints_s_psm,a=ni.SolveTOIPositionConstraints_s_rA,l=ni.SolveTOIPositionConstraints_s_rB,c=ni.SolveTOIPositionConstraints_s_P;let u=0;for(let h=0;h<this.m_count;++h){const d=this.m_positionConstraints[h],m=d.indexA,p=d.indexB,f=d.localCenterA,_=d.localCenterB,g=d.pointCount;let v=0,y=0;m!==t&&m!==e||(v=d.invMassA,y=d.invIA);let x=0,b=0;p!==t&&p!==e||(x=d.invMassB,b=d.invIB);const A=this.m_positions[m].c;let w=this.m_positions[m].a;const S=this.m_positions[p].c;let C=this.m_positions[p].a;for(let t=0;t<g;++t){i.q.SetAngle(w),n.q.SetAngle(C),r.A.SubVV(A,r.t.MulRV(i.q,f,r.A.s_t0),i.p),r.A.SubVV(S,r.t.MulRV(n.q,_,r.A.s_t0),n.p),o.Initialize(d,i,n,t);const e=o.normal,h=o.point,m=o.separation;r.A.SubVV(h,A,a),r.A.SubVV(h,S,l),u=Object(r.n)(u,m);const p=Object(r.e)(s.S*(m+s.v),-s.y,0),g=r.A.CrossVV(a,e),B=r.A.CrossVV(l,e),V=v+x+y*g*g+b*B*B,M=V>0?-p/V:0;r.A.MulSV(M,e,c),A.SelfMulSub(v,c),w-=y*r.A.CrossVV(a,c),S.SelfMulAdd(x,c),C+=b*r.A.CrossVV(l,c)}this.m_positions[m].a=w,this.m_positions[p].a=C}return u>=-1.5*s.v}}ni.InitializeVelocityConstraints_s_xfA=new r.z,ni.InitializeVelocityConstraints_s_xfB=new r.z,ni.InitializeVelocityConstraints_s_worldManifold=new m.p,ni.WarmStart_s_P=new r.A,ni.SolveVelocityConstraints_s_dv=new r.A,ni.SolveVelocityConstraints_s_dv1=new r.A,ni.SolveVelocityConstraints_s_dv2=new r.A,ni.SolveVelocityConstraints_s_P=new r.A,ni.SolveVelocityConstraints_s_a=new r.A,ni.SolveVelocityConstraints_s_b=new r.A,ni.SolveVelocityConstraints_s_x=new r.A,ni.SolveVelocityConstraints_s_d=new r.A,ni.SolveVelocityConstraints_s_P1=new r.A,ni.SolveVelocityConstraints_s_P2=new r.A,ni.SolveVelocityConstraints_s_P1P2=new r.A,ni.SolvePositionConstraints_s_xfA=new r.z,ni.SolvePositionConstraints_s_xfB=new r.z,ni.SolvePositionConstraints_s_psm=new ii,ni.SolvePositionConstraints_s_rA=new r.A,ni.SolvePositionConstraints_s_rB=new r.A,ni.SolvePositionConstraints_s_P=new r.A,ni.SolveTOIPositionConstraints_s_xfA=new r.z,ni.SolveTOIPositionConstraints_s_xfB=new r.z,ni.SolveTOIPositionConstraints_s_psm=new ii,ni.SolveTOIPositionConstraints_s_rA=new r.A,ni.SolveTOIPositionConstraints_s_rB=new r.A,ni.SolveTOIPositionConstraints_s_P=new r.A;class si{constructor(){this.m_allocator=null,this.m_listener=null,this.m_bodies=[],this.m_contacts=[],this.m_joints=[],this.m_positions=Ye.MakeArray(1024),this.m_velocities=Xe.MakeArray(1024),this.m_bodyCount=0,this.m_jointCount=0,this.m_contactCount=0,this.m_bodyCapacity=0,this.m_contactCapacity=0,this.m_jointCapacity=0}Initialize(t,e,i,n,s){for(this.m_bodyCapacity=t,this.m_contactCapacity=e,this.m_jointCapacity=i,this.m_bodyCount=0,this.m_contactCount=0,this.m_jointCount=0,this.m_allocator=n,this.m_listener=s;this.m_bodies.length<t;)this.m_bodies[this.m_bodies.length]=null;for(;this.m_contacts.length<e;)this.m_contacts[this.m_contacts.length]=null;for(;this.m_joints.length<i;)this.m_joints[this.m_joints.length]=null;if(this.m_positions.length<t){const e=Object(r.m)(2*this.m_positions.length,t);for(;this.m_positions.length<e;)this.m_positions[this.m_positions.length]=new Ye}if(this.m_velocities.length<t){const e=Object(r.m)(2*this.m_velocities.length,t);for(;this.m_velocities.length<e;)this.m_velocities[this.m_velocities.length]=new Xe}}Clear(){this.m_bodyCount=0,this.m_contactCount=0,this.m_jointCount=0}AddBody(t){t.m_islandIndex=this.m_bodyCount,this.m_bodies[this.m_bodyCount++]=t}AddContact(t){this.m_contacts[this.m_contactCount++]=t}AddJoint(t){this.m_joints[this.m_jointCount++]=t}Solve(t,e,i,n){const o=si.s_timer.Reset(),a=e.dt;for(let t=0;t<this.m_bodyCount;++t){const e=this.m_bodies[t];this.m_positions[t].c.Copy(e.m_sweep.c);const n=e.m_sweep.a,s=this.m_velocities[t].v.Copy(e.m_linearVelocity);let r=e.m_angularVelocity;e.m_sweep.c0.Copy(e.m_sweep.c),e.m_sweep.a0=e.m_sweep.a,e.m_type===Ut.b2_dynamicBody&&(s.x+=a*(e.m_gravityScale*i.x+e.m_invMass*e.m_force.x),s.y+=a*(e.m_gravityScale*i.y+e.m_invMass*e.m_force.y),r+=a*e.m_invI*e.m_torque,s.SelfMul(1/(1+a*e.m_linearDamping)),r*=1/(1+a*e.m_angularDamping)),this.m_positions[t].a=n,this.m_velocities[t].w=r}o.Reset();const l=si.s_solverData;l.step.Copy(e),l.positions=this.m_positions,l.velocities=this.m_velocities;const c=si.s_contactSolverDef;c.step.Copy(e),c.contacts=this.m_contacts,c.count=this.m_contactCount,c.positions=this.m_positions,c.velocities=this.m_velocities,c.allocator=this.m_allocator;const u=si.s_contactSolver.Initialize(c);u.InitializeVelocityConstraints(),e.warmStarting&&u.WarmStart();for(let t=0;t<this.m_jointCount;++t)this.m_joints[t].InitVelocityConstraints(l);t.solveInit=o.GetMilliseconds(),o.Reset();for(let t=0;t<e.velocityIterations;++t){for(let t=0;t<this.m_jointCount;++t)this.m_joints[t].SolveVelocityConstraints(l);u.SolveVelocityConstraints()}u.StoreImpulses(),t.solveVelocity=o.GetMilliseconds();for(let t=0;t<this.m_bodyCount;++t){const e=this.m_positions[t].c;let i=this.m_positions[t].a;const n=this.m_velocities[t].v;let o=this.m_velocities[t].w;const l=r.A.MulSV(a,n,si.s_translation);if(r.A.DotVV(l,l)>s.J){const t=s.I/l.Length();n.SelfMul(t)}const c=a*o;if(c*c>s.F){o*=s.E/Object(r.a)(c)}e.x+=a*n.x,e.y+=a*n.y,i+=a*o,this.m_positions[t].a=i,this.m_velocities[t].w=o}o.Reset();let h=!1;for(let t=0;t<e.positionIterations;++t){const t=u.SolvePositionConstraints();let e=!0;for(let t=0;t<this.m_jointCount;++t){const i=this.m_joints[t].SolvePositionConstraints(l);e=e&&i}if(t&&e){h=!0;break}}for(let t=0;t<this.m_bodyCount;++t){const e=this.m_bodies[t];e.m_sweep.c.Copy(this.m_positions[t].c),e.m_sweep.a=this.m_positions[t].a,e.m_linearVelocity.Copy(this.m_velocities[t].v),e.m_angularVelocity=this.m_velocities[t].w,e.SynchronizeTransform()}if(t.solvePosition=o.GetMilliseconds(),this.Report(u.m_velocityConstraints),n){let t=s.x;const e=s.u*s.u,i=s.m*s.m;for(let n=0;n<this.m_bodyCount;++n){const s=this.m_bodies[n];s.GetType()!==Ut.b2_staticBody&&(!s.m_autoSleepFlag||s.m_angularVelocity*s.m_angularVelocity>i||r.A.DotVV(s.m_linearVelocity,s.m_linearVelocity)>e?(s.m_sleepTime=0,t=0):(s.m_sleepTime+=a,t=Object(r.n)(t,s.m_sleepTime)))}if(t>=s.R&&h)for(let t=0;t<this.m_bodyCount;++t){this.m_bodies[t].SetAwake(!1)}}}SolveTOI(t,e,i){for(let t=0;t<this.m_bodyCount;++t){const e=this.m_bodies[t];this.m_positions[t].c.Copy(e.m_sweep.c),this.m_positions[t].a=e.m_sweep.a,this.m_velocities[t].v.Copy(e.m_linearVelocity),this.m_velocities[t].w=e.m_angularVelocity}const n=si.s_contactSolverDef;n.contacts=this.m_contacts,n.count=this.m_contactCount,n.allocator=this.m_allocator,n.step.Copy(t),n.positions=this.m_positions,n.velocities=this.m_velocities;const o=si.s_contactSolver.Initialize(n);for(let n=0;n<t.positionIterations;++n){if(o.SolveTOIPositionConstraints(e,i))break}this.m_bodies[e].m_sweep.c0.Copy(this.m_positions[e].c),this.m_bodies[e].m_sweep.a0=this.m_positions[e].a,this.m_bodies[i].m_sweep.c0.Copy(this.m_positions[i].c),this.m_bodies[i].m_sweep.a0=this.m_positions[i].a,o.InitializeVelocityConstraints();for(let e=0;e<t.velocityIterations;++e)o.SolveVelocityConstraints();const a=t.dt;for(let t=0;t<this.m_bodyCount;++t){const e=this.m_positions[t].c;let i=this.m_positions[t].a;const n=this.m_velocities[t].v;let o=this.m_velocities[t].w;const l=r.A.MulSV(a,n,si.s_translation);if(r.A.DotVV(l,l)>s.J){const t=s.I/l.Length();n.SelfMul(t)}const c=a*o;if(c*c>s.F){o*=s.E/Object(r.a)(c)}e.SelfMulAdd(a,n),i+=a*o,this.m_positions[t].a=i,this.m_velocities[t].w=o;const u=this.m_bodies[t];u.m_sweep.c.Copy(e),u.m_sweep.a=i,u.m_linearVelocity.Copy(n),u.m_angularVelocity=o,u.SynchronizeTransform()}this.Report(o.m_velocityConstraints)}Report(t){if(null!==this.m_listener)for(let e=0;e<this.m_contactCount;++e){const i=this.m_contacts[e];if(!i)continue;const n=t[e],s=si.s_impulse;s.count=n.pointCount;for(let t=0;t<n.pointCount;++t)s.normalImpulses[t]=n.points[t].normalImpulse,s.tangentImpulses[t]=n.points[t].tangentImpulse;this.m_listener.PostSolve(i,s)}}}var ri,oi;si.s_timer=new l,si.s_solverData=new Qe,si.s_contactSolverDef=new ei,si.s_contactSolver=new ni,si.s_translation=new r.A,si.s_impulse=new Ne,function(t){t[t.b2_waterParticle=0]="b2_waterParticle",t[t.b2_zombieParticle=2]="b2_zombieParticle",t[t.b2_wallParticle=4]="b2_wallParticle",t[t.b2_springParticle=8]="b2_springParticle",t[t.b2_elasticParticle=16]="b2_elasticParticle",t[t.b2_viscousParticle=32]="b2_viscousParticle",t[t.b2_powderParticle=64]="b2_powderParticle",t[t.b2_tensileParticle=128]="b2_tensileParticle",t[t.b2_colorMixingParticle=256]="b2_colorMixingParticle",t[t.b2_destructionListenerParticle=512]="b2_destructionListenerParticle",t[t.b2_barrierParticle=1024]="b2_barrierParticle",t[t.b2_staticPressureParticle=2048]="b2_staticPressureParticle",t[t.b2_reactiveParticle=4096]="b2_reactiveParticle",t[t.b2_repulsiveParticle=8192]="b2_repulsiveParticle",t[t.b2_fixtureContactListenerParticle=16384]="b2_fixtureContactListenerParticle",t[t.b2_particleContactListenerParticle=32768]="b2_particleContactListenerParticle",t[t.b2_fixtureContactFilterParticle=65536]="b2_fixtureContactFilterParticle",t[t.b2_particleContactFilterParticle=131072]="b2_particleContactFilterParticle"}(ri||(ri={}));class ai{constructor(){this.flags=0,this.position=new r.A,this.velocity=new r.A,this.color=new o,this.lifetime=0,this.userData=null,this.group=null}}function li(t,e,i){const n=Math.ceil(Math.sqrt(t/(.01*e))*i);return Object(r.e)(n,1,8)}class ci{constructor(){this.m_index=s.t}GetIndex(){return this.m_index}SetIndex(t){this.m_index=t}}!function(t){t[t.b2_solidParticleGroup=1]="b2_solidParticleGroup",t[t.b2_rigidParticleGroup=2]="b2_rigidParticleGroup",t[t.b2_particleGroupCanBeEmpty=4]="b2_particleGroupCanBeEmpty",t[t.b2_particleGroupWillBeDestroyed=8]="b2_particleGroupWillBeDestroyed",t[t.b2_particleGroupNeedsUpdateDepth=16]="b2_particleGroupNeedsUpdateDepth",t[t.b2_particleGroupInternalMask=24]="b2_particleGroupInternalMask"}(oi||(oi={}));class ui{constructor(){this.flags=0,this.groupFlags=0,this.position=new r.A,this.angle=0,this.linearVelocity=new r.A,this.angularVelocity=0,this.color=new o,this.strength=1,this.shape=null,this.shapes=null,this.shapeCount=0,this.stride=0,this.particleCount=0,this.positionData=null,this.lifetime=0,this.userData=null,this.group=null}}class hi{constructor(t){this.m_system=null,this.m_firstIndex=0,this.m_lastIndex=0,this.m_groupFlags=0,this.m_strength=1,this.m_prev=null,this.m_next=null,this.m_timestamp=-1,this.m_mass=0,this.m_inertia=0,this.m_center=new r.A,this.m_linearVelocity=new r.A,this.m_angularVelocity=0,this.m_transform=new r.z,this.m_userData=null,this.m_system=t}GetNext(){return this.m_next}GetParticleSystem(){return this.m_system}GetParticleCount(){return this.m_lastIndex-this.m_firstIndex}GetBufferIndex(){return this.m_firstIndex}ContainsParticle(t){return this.m_firstIndex<=t&&t<this.m_lastIndex}GetAllParticleFlags(){let t=0;for(let e=this.m_firstIndex;e<this.m_lastIndex;e++)t|=this.m_system.m_flagsBuffer.data[e];return t}GetGroupFlags(){return this.m_groupFlags}SetGroupFlags(t){t|=this.m_groupFlags&oi.b2_particleGroupInternalMask,this.m_system.SetGroupFlags(this,t)}GetMass(){return this.UpdateStatistics(),this.m_mass}GetInertia(){return this.UpdateStatistics(),this.m_inertia}GetCenter(){return this.UpdateStatistics(),this.m_center}GetLinearVelocity(){return this.UpdateStatistics(),this.m_linearVelocity}GetAngularVelocity(){return this.UpdateStatistics(),this.m_angularVelocity}GetTransform(){return this.m_transform}GetPosition(){return this.m_transform.p}GetAngle(){return this.m_transform.q.GetAngle()}GetLinearVelocityFromWorldPoint(t,e){const i=hi.GetLinearVelocityFromWorldPoint_s_t0;return this.UpdateStatistics(),r.A.AddVCrossSV(this.m_linearVelocity,this.m_angularVelocity,r.A.SubVV(t,this.m_center,i),e)}GetUserData(){return this.m_userData}SetUserData(t){this.m_userData=t}ApplyForce(t){this.m_system.ApplyForce(this.m_firstIndex,this.m_lastIndex,t)}ApplyLinearImpulse(t){this.m_system.ApplyLinearImpulse(this.m_firstIndex,this.m_lastIndex,t)}DestroyParticles(t){if(!this.m_system.m_world.IsLocked())for(let e=this.m_firstIndex;e<this.m_lastIndex;e++)this.m_system.DestroyParticle(e,t)}UpdateStatistics(){const t=new r.A,e=new r.A;if(this.m_timestamp!==this.m_system.m_timestamp){const i=this.m_system.GetParticleMass();this.m_mass=i*(this.m_lastIndex-this.m_firstIndex),this.m_center.SetZero(),this.m_linearVelocity.SetZero();for(let t=this.m_firstIndex;t<this.m_lastIndex;t++)this.m_center.SelfMulAdd(i,this.m_system.m_positionBuffer.data[t]),this.m_linearVelocity.SelfMulAdd(i,this.m_system.m_velocityBuffer.data[t]);if(this.m_mass>0){const t=1/this.m_mass;this.m_center.SelfMul(t),this.m_linearVelocity.SelfMul(t)}this.m_inertia=0,this.m_angularVelocity=0;for(let n=this.m_firstIndex;n<this.m_lastIndex;n++)r.A.SubVV(this.m_system.m_positionBuffer.data[n],this.m_center,t),r.A.SubVV(this.m_system.m_velocityBuffer.data[n],this.m_linearVelocity,e),this.m_inertia+=i*r.A.DotVV(t,t),this.m_angularVelocity+=i*r.A.CrossVV(t,e);this.m_inertia>0&&(this.m_angularVelocity*=1/this.m_inertia),this.m_timestamp=this.m_system.m_timestamp}}}hi.GetLinearVelocityFromWorldPoint_s_t0=new r.A;class di{constructor(t){this.m_front=0,this.m_back=0,this.m_capacity=0,this.m_buffer=Object(s.e)(t,t=>null),this.m_capacity=t}Push(t){if(this.m_back>=this.m_capacity){for(let t=this.m_front;t<this.m_back;t++)this.m_buffer[t-this.m_front]=this.m_buffer[t];this.m_back-=this.m_front,this.m_front=0,this.m_back>=this.m_capacity&&(this.m_capacity>0?(this.m_buffer.concat(Object(s.e)(this.m_capacity,t=>null)),this.m_capacity*=2):(this.m_buffer.concat(Object(s.e)(1,t=>null)),this.m_capacity=1))}this.m_buffer[this.m_back]=t,this.m_back++}Pop(){this.m_front,this.m_back,delete this.m_buffer[this.m_front],this.m_front++}Empty(){return this.m_front,this.m_back,this.m_front===this.m_back}Front(){return this.m_buffer[this.m_front]}}class mi{constructor(t){this.m_generatorBuffer=null,this.m_generatorCapacity=0,this.m_generatorCount=0,this.m_countX=0,this.m_countY=0,this.m_diagram=null,this.m_generatorBuffer=Object(s.e)(t,t=>new mi.Generator),this.m_generatorCapacity=t}AddGenerator(t,e,i){this.m_generatorCount,this.m_generatorCapacity;let n=this.m_generatorBuffer[this.m_generatorCount++];n.center.Copy(t),n.tag=e,n.necessary=i}Generate(t,e){this.m_diagram;let i=1/t,n=new r.A(+s.x,+s.x),o=new r.A(-s.x,-s.x),a=0;for(let t=0;t<this.m_generatorCount;t++){let e=this.m_generatorBuffer[t];e.necessary&&(r.A.MinV(n,e.center,n),r.A.MaxV(o,e.center,o),++a)}if(0===a)return this.m_countX=0,void(this.m_countY=0);n.x-=e,n.y-=e,o.x+=e,o.y+=e,this.m_countX=1+Math.floor(i*(o.x-n.x)),this.m_countY=1+Math.floor(i*(o.y-n.y)),this.m_diagram=Object(s.e)(this.m_countX*this.m_countY,t=>null);let l=new di(4*this.m_countX*this.m_countY);for(let t=0;t<this.m_generatorCount;t++){let e=this.m_generatorBuffer[t];e.center.SelfSub(n).SelfMul(i);let s=Math.floor(e.center.x),r=Math.floor(e.center.y);s>=0&&r>=0&&s<this.m_countX&&r<this.m_countY&&l.Push(new mi.Task(s,r,s+r*this.m_countX,e))}for(;!l.Empty();){let t=l.Front(),e=t.m_x,i=t.m_y,n=t.m_i,s=t.m_generator;l.Pop(),this.m_diagram[n]||(this.m_diagram[n]=s,e>0&&l.Push(new mi.Task(e-1,i,n-1,s)),i>0&&l.Push(new mi.Task(e,i-1,n-this.m_countX,s)),e<this.m_countX-1&&l.Push(new mi.Task(e+1,i,n+1,s)),i<this.m_countY-1&&l.Push(new mi.Task(e,i+1,n+this.m_countX,s)))}for(let t=0;t<this.m_countY;t++)for(let e=0;e<this.m_countX-1;e++){let i=e+t*this.m_countX,n=this.m_diagram[i],s=this.m_diagram[i+1];n!==s&&(l.Push(new mi.Task(e,t,i,s)),l.Push(new mi.Task(e+1,t,i+1,n)))}for(let t=0;t<this.m_countY-1;t++)for(let e=0;e<this.m_countX;e++){let i=e+t*this.m_countX,n=this.m_diagram[i],s=this.m_diagram[i+this.m_countX];n!==s&&(l.Push(new mi.Task(e,t,i,s)),l.Push(new mi.Task(e,t+1,i+this.m_countX,n)))}for(;!l.Empty();){let t=l.Front(),e=t.m_x,i=t.m_y,n=t.m_i,s=t.m_generator;l.Pop();let r=this.m_diagram[n],o=s;if(r!==o){let t=r.center.x-e,s=r.center.y-i,a=o.center.x-e,c=o.center.y-i;t*t+s*s>a*a+c*c&&(this.m_diagram[n]=o,e>0&&l.Push(new mi.Task(e-1,i,n-1,o)),i>0&&l.Push(new mi.Task(e,i-1,n-this.m_countX,o)),e<this.m_countX-1&&l.Push(new mi.Task(e+1,i,n+1,o)),i<this.m_countY-1&&l.Push(new mi.Task(e,i+1,n+this.m_countX,o)))}}}GetNodes(t){for(let e=0;e<this.m_countY-1;e++)for(let i=0;i<this.m_countX-1;i++){let n=i+e*this.m_countX,s=this.m_diagram[n],r=this.m_diagram[n+1],o=this.m_diagram[n+this.m_countX],a=this.m_diagram[n+1+this.m_countX];r!==o&&(s!==r&&s!==o&&(s.necessary||r.necessary||o.necessary)&&t(s.tag,r.tag,o.tag),a!==r&&a!==o&&(s.necessary||r.necessary||o.necessary)&&t(r.tag,a.tag,o.tag))}}}function pi(t,e,i){const n=t[e];t[e]=t[i],t[i]=n}function fi(t,e){return t<e}function _i(t,e=0,i=t.length-e,n=fi){let s=e,r=[],o=0;for(;;){for(;s+1<i;i++){let e=t[s+Math.floor(Math.random()*(i-s))];r[o++]=i;for(let r=s-1;;){for(;n(t[++r],e););for(;n(e,t[--i]););if(r>=i)break;pi(t,r,i)}}if(0===o)break;s=i,i=r[--o]}return t}function gi(t,e=0,i=t.length-e,n=fi){return _i(t,e,i,n)}function vi(t,e,i=t.length){let n=0;for(let s=0;s<i;++s)e(t[s])||(s!==n?pi(t,n++,s):++n);return n}function yi(t,e,i,n,s=fi){let r=i-e;for(;r>0;){let i=Math.floor(r/2),o=e+i;s(t[o],n)?(e=++o,r-=i+1):r=i}return e}function xi(t,e,i,n,s=fi){let r=i-e;for(;r>0;){let i=Math.floor(r/2),o=e+i;s(n,t[o])?r=i:(e=++o,r-=i+1)}return e}function bi(t,e,i,n){let s=i;for(;e!==s;)pi(t,e++,s++),s===n?s=i:e===i&&(i=s)}!function(t){t.Generator=class{constructor(){this.center=new r.A,this.tag=0,this.necessary=!1}};t.Task=class{constructor(t,e,i,n){this.m_x=0,this.m_y=0,this.m_i=0,this.m_generator=null,this.m_x=t,this.m_y=e,this.m_i=i,this.m_generator=n}}}(mi||(mi={}));class Ai{constructor(t){this.data=[],this.count=0,this.capacity=0,this.allocator=t}Append(){return this.count>=this.capacity&&this.Grow(),this.count++}Reserve(t){if(!(this.capacity>=t)){this.capacity,this.data.length;for(let e=this.capacity;e<t;++e)this.data[e]=this.allocator();this.capacity=t}}Grow(){let t=this.capacity?2*this.capacity:s.M;this.capacity,this.Reserve(t)}Free(){0!==this.data.length&&(this.data=[],this.capacity=0,this.count=0)}Shorten(t){}Data(){return this.data}GetCount(){return this.count}SetCount(t){this.count=t}GetCapacity(){return this.capacity}RemoveIf(t){for(let e=0;e<this.count;++e)t(this.data[e])||0;this.count=vi(this.data,t,this.count),this.count}Unique(t){this.count=function(t,e,i,n){if(e===i)return i;let s=e;for(;++e!==i;)n(t[s],t[e])||pi(t,++s,e);return++s}(this.data,0,this.count,t)}}class wi extends ze{constructor(t){super(),this.m_system=t}ShouldQueryParticleSystem(t){return!1}ReportFixture(t){if(t.IsSensor())return!0;const e=t.GetShape().GetChildCount();for(let i=0;i<e;i++){const e=t.GetAABB(i),n=this.m_system.GetInsideBoundsEnumerator(e);let s;for(;(s=n.GetNext())>=0;)this.ReportFixtureAndParticle(t,i,s)}return!0}ReportParticle(t,e){return!1}ReportFixtureAndParticle(t,e,i){}}class Si{constructor(){this.indexA=0,this.indexB=0,this.weight=0,this.normal=new r.A,this.flags=0}SetIndices(t,e){t<=s.B&&s.B,this.indexA=t,this.indexB=e}SetWeight(t){this.weight=t}SetNormal(t){this.normal.Copy(t)}SetFlags(t){this.flags=t}GetIndexA(){return this.indexA}GetIndexB(){return this.indexB}GetWeight(){return this.weight}GetNormal(){return this.normal}GetFlags(){return this.flags}IsEqual(t){return this.indexA===t.indexA&&this.indexB===t.indexB&&this.flags===t.flags&&this.weight===t.weight&&this.normal.x===t.normal.x&&this.normal.y===t.normal.y}IsNotEqual(t){return!this.IsEqual(t)}ApproximatelyEqual(t){return this.indexA===t.indexA&&this.indexB===t.indexB&&this.flags===t.flags&&Object(r.a)(this.weight-t.weight)<.01&&r.A.DistanceSquaredVV(this.normal,t.normal)<1e-4}}class Ci{constructor(){this.index=0,this.body=null,this.fixture=null,this.weight=0,this.normal=new r.A,this.mass=0}}class Bi{constructor(){this.indexA=0,this.indexB=0,this.flags=0,this.strength=0,this.distance=0}}class Vi{constructor(){this.indexA=0,this.indexB=0,this.indexC=0,this.flags=0,this.strength=0,this.pa=new r.A(0,0),this.pb=new r.A(0,0),this.pc=new r.A(0,0),this.ka=0,this.kb=0,this.kc=0,this.s=0}}class Mi{constructor(){this.strictContactCheck=!1,this.density=1,this.gravityScale=1,this.radius=1,this.maxCount=0,this.pressureStrength=.005,this.dampingStrength=1,this.elasticStrength=.25,this.springStrength=.25,this.viscousStrength=.25,this.surfaceTensionPressureStrength=.2,this.surfaceTensionNormalStrength=.2,this.repulsiveStrength=1,this.powderStrength=.5,this.ejectionStrength=.5,this.staticPressureStrength=.2,this.staticPressureRelaxation=.2,this.staticPressureIterations=8,this.colorMixingStrength=.5,this.destroyByAge=!0,this.lifetimeGranularity=1/60}Copy(t){return this.strictContactCheck=t.strictContactCheck,this.density=t.density,this.gravityScale=t.gravityScale,this.radius=t.radius,this.maxCount=t.maxCount,this.pressureStrength=t.pressureStrength,this.dampingStrength=t.dampingStrength,this.elasticStrength=t.elasticStrength,this.springStrength=t.springStrength,this.viscousStrength=t.viscousStrength,this.surfaceTensionPressureStrength=t.surfaceTensionPressureStrength,this.surfaceTensionNormalStrength=t.surfaceTensionNormalStrength,this.repulsiveStrength=t.repulsiveStrength,this.powderStrength=t.powderStrength,this.ejectionStrength=t.ejectionStrength,this.staticPressureStrength=t.staticPressureStrength,this.staticPressureRelaxation=t.staticPressureRelaxation,this.staticPressureIterations=t.staticPressureIterations,this.colorMixingStrength=t.colorMixingStrength,this.destroyByAge=t.destroyByAge,this.lifetimeGranularity=t.lifetimeGranularity,this}Clone(){return(new Mi).Copy(this)}}class ki{constructor(t,e){this.m_paused=!1,this.m_timestamp=0,this.m_allParticleFlags=0,this.m_needsUpdateAllParticleFlags=!1,this.m_allGroupFlags=0,this.m_needsUpdateAllGroupFlags=!1,this.m_hasForce=!1,this.m_iterationIndex=0,this.m_inverseDensity=0,this.m_particleDiameter=0,this.m_inverseDiameter=0,this.m_squaredDiameter=0,this.m_count=0,this.m_internalAllocatedCapacity=0,this.m_handleIndexBuffer=new ki.UserOverridableBuffer,this.m_flagsBuffer=new ki.UserOverridableBuffer,this.m_positionBuffer=new ki.UserOverridableBuffer,this.m_velocityBuffer=new ki.UserOverridableBuffer,this.m_forceBuffer=[],this.m_weightBuffer=[],this.m_staticPressureBuffer=[],this.m_accumulationBuffer=[],this.m_accumulation2Buffer=[],this.m_depthBuffer=[],this.m_colorBuffer=new ki.UserOverridableBuffer,this.m_groupBuffer=[],this.m_userDataBuffer=new ki.UserOverridableBuffer,this.m_stuckThreshold=0,this.m_lastBodyContactStepBuffer=new ki.UserOverridableBuffer,this.m_bodyContactCountBuffer=new ki.UserOverridableBuffer,this.m_consecutiveContactStepsBuffer=new ki.UserOverridableBuffer,this.m_stuckParticleBuffer=new Ai(()=>0),this.m_proxyBuffer=new Ai(()=>new ki.Proxy),this.m_contactBuffer=new Ai(()=>new Si),this.m_bodyContactBuffer=new Ai(()=>new Ci),this.m_pairBuffer=new Ai(()=>new Bi),this.m_triadBuffer=new Ai(()=>new Vi),this.m_expirationTimeBuffer=new ki.UserOverridableBuffer,this.m_indexByExpirationTimeBuffer=new ki.UserOverridableBuffer,this.m_timeElapsed=0,this.m_expirationTimeBufferRequiresSorting=!1,this.m_groupCount=0,this.m_groupList=null,this.m_def=new Mi,this.m_prev=null,this.m_next=null,this.SetStrictContactCheck(t.strictContactCheck),this.SetDensity(t.density),this.SetGravityScale(t.gravityScale),this.SetRadius(t.radius),this.SetMaxParticleCount(t.maxCount),t.lifetimeGranularity,this.m_def=t.Clone(),this.m_world=e,this.SetDestructionByAge(this.m_def.destroyByAge)}static computeTag(t,e){return(e+ki.yOffset>>>0<<ki.yShift)+(ki.xScale*t+ki.xOffset>>>0)>>>0}static computeRelativeTag(t,e,i){return t+(i<<ki.yShift)+(e<<ki.xShift)>>>0}Drop(){for(;this.m_groupList;)this.DestroyParticleGroup(this.m_groupList);this.FreeUserOverridableBuffer(this.m_handleIndexBuffer),this.FreeUserOverridableBuffer(this.m_flagsBuffer),this.FreeUserOverridableBuffer(this.m_lastBodyContactStepBuffer),this.FreeUserOverridableBuffer(this.m_bodyContactCountBuffer),this.FreeUserOverridableBuffer(this.m_consecutiveContactStepsBuffer),this.FreeUserOverridableBuffer(this.m_positionBuffer),this.FreeUserOverridableBuffer(this.m_velocityBuffer),this.FreeUserOverridableBuffer(this.m_colorBuffer),this.FreeUserOverridableBuffer(this.m_userDataBuffer),this.FreeUserOverridableBuffer(this.m_expirationTimeBuffer),this.FreeUserOverridableBuffer(this.m_indexByExpirationTimeBuffer),this.FreeBuffer(this.m_forceBuffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_weightBuffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_staticPressureBuffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_accumulationBuffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_accumulation2Buffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_depthBuffer,this.m_internalAllocatedCapacity),this.FreeBuffer(this.m_groupBuffer,this.m_internalAllocatedCapacity)}CreateParticle(t){if(this.m_world.IsLocked(),this.m_world.IsLocked())return 0;if(this.m_count>=this.m_internalAllocatedCapacity){let t=this.m_count?2*this.m_count:s.M;this.ReallocateInternalAllocatedBuffers(t)}if(this.m_count>=this.m_internalAllocatedCapacity){if(!this.m_def.destroyByAge)return s.t;this.DestroyOldestParticle(0,!1),this.SolveZombie()}let e=this.m_count++;this.m_flagsBuffer.data[e]=0,this.m_lastBodyContactStepBuffer.data&&(this.m_lastBodyContactStepBuffer.data[e]=0),this.m_bodyContactCountBuffer.data&&(this.m_bodyContactCountBuffer.data[e]=0),this.m_consecutiveContactStepsBuffer.data&&(this.m_consecutiveContactStepsBuffer.data[e]=0),this.m_positionBuffer.data[e]=(this.m_positionBuffer.data[e]||new r.A).Copy(t.position),this.m_velocityBuffer.data[e]=(this.m_velocityBuffer.data[e]||new r.A).Copy(t.velocity),this.m_weightBuffer[e]=0,this.m_forceBuffer[e]=(this.m_forceBuffer[e]||new r.A).SetZero(),this.m_staticPressureBuffer&&(this.m_staticPressureBuffer[e]=0),this.m_depthBuffer&&(this.m_depthBuffer[e]=0),!this.m_colorBuffer.data&&t.color.IsZero()||(this.m_colorBuffer.data=this.RequestBuffer(this.m_colorBuffer.data),this.m_colorBuffer.data[e]=(this.m_colorBuffer.data[e]||new o).Copy(t.color)),(this.m_userDataBuffer.data||t.userData)&&(this.m_userDataBuffer.data=this.RequestBuffer(this.m_userDataBuffer.data),this.m_userDataBuffer.data[e]=t.userData),this.m_handleIndexBuffer.data&&(this.m_handleIndexBuffer.data[e]=null);let i=this.m_proxyBuffer.data[this.m_proxyBuffer.Append()],n=t.lifetime>0;(this.m_expirationTimeBuffer.data||n)&&(this.SetParticleLifetime(e,n?t.lifetime:this.ExpirationTimeToLifetime(-this.GetQuantizedTimeElapsed())),this.m_indexByExpirationTimeBuffer.data[e]=e),i.index=e;let a=t.group;return this.m_groupBuffer[e]=a,a&&(a.m_firstIndex<a.m_lastIndex?(this.RotateBuffer(a.m_firstIndex,a.m_lastIndex,e),a.m_lastIndex,a.m_lastIndex=e+1):(a.m_firstIndex=e,a.m_lastIndex=e+1)),this.SetParticleFlags(e,t.flags),e}GetParticleHandleFromIndex(t){t>=0&&t<this.GetParticleCount()&&s.t,this.m_handleIndexBuffer.data=this.RequestBuffer(this.m_handleIndexBuffer.data);let e=this.m_handleIndexBuffer.data[t];return e||((e=new ci).SetIndex(t),this.m_handleIndexBuffer.data[t]=e,e)}DestroyParticle(t,e=!1){let i=ri.b2_zombieParticle;e&&(i|=ri.b2_destructionListenerParticle),this.SetParticleFlags(t,this.m_flagsBuffer.data[t]|i)}DestroyOldestParticle(t,e=!1){const i=this.GetParticleCount();this.m_indexByExpirationTimeBuffer.data;const n=this.m_indexByExpirationTimeBuffer.data[i-(t+1)],s=this.m_indexByExpirationTimeBuffer.data[t];this.DestroyParticle(this.m_expirationTimeBuffer.data[n]>0?n:s,e)}DestroyParticlesInShape(t,e,i=!1){const n=ki.DestroyParticlesInShape_s_aabb;if(this.m_world.IsLocked(),this.m_world.IsLocked())return 0;const s=new ki.DestroyParticlesInShapeCallback(this,t,e,i),r=n;return t.ComputeAABB(r,e,0),this.m_world.QueryAABB(s,r),s.Destroyed()}CreateParticleGroup(t){let e=ki.CreateParticleGroup_s_transform;if(this.m_world.IsLocked(),this.m_world.IsLocked())return null;let i=e;i.SetPositionAngle(t.position,t.angle);let n=this.m_count;if(t.shape&&this.CreateParticlesWithShapeForGroup(t.shape,t,i),t.shapes&&this.CreateParticlesWithShapesForGroup(t.shapes,t.shapeCount,t,i),t.particleCount){t.positionData;for(let e=0;e<t.particleCount;e++){let n=t.positionData[e];this.CreateParticleForGroup(t,i,n)}}let s=this.m_count,r=new hi(this);r.m_firstIndex=n,r.m_lastIndex=s,r.m_strength=t.strength,r.m_userData=t.userData,r.m_transform.Copy(i),r.m_prev=null,r.m_next=this.m_groupList,this.m_groupList&&(this.m_groupList.m_prev=r),this.m_groupList=r,++this.m_groupCount;for(let t=n;t<s;t++)this.m_groupBuffer[t]=r;this.SetGroupFlags(r,t.groupFlags);let o=new ki.ConnectionFilter;return this.UpdateContacts(!0),this.UpdatePairsAndTriads(n,s,o),t.group&&(this.JoinParticleGroups(t.group,r),r=t.group),r}JoinParticleGroups(t,e){if(this.m_world.IsLocked(),this.m_world.IsLocked())return;this.RotateBuffer(e.m_firstIndex,e.m_lastIndex,this.m_count),e.m_lastIndex,this.m_count,this.RotateBuffer(t.m_firstIndex,t.m_lastIndex,e.m_firstIndex),t.m_lastIndex,e.m_firstIndex;let i=new ki.JoinParticleGroupsFilter(e.m_firstIndex);this.UpdateContacts(!0),this.UpdatePairsAndTriads(t.m_firstIndex,e.m_lastIndex,i);for(let i=e.m_firstIndex;i<e.m_lastIndex;i++)this.m_groupBuffer[i]=t;let n=t.m_groupFlags|e.m_groupFlags;this.SetGroupFlags(t,n),t.m_lastIndex=e.m_lastIndex,e.m_firstIndex=e.m_lastIndex,this.DestroyParticleGroup(e)}SplitParticleGroup(t){this.UpdateContacts(!0);let e=t.GetParticleCount(),i=Object(s.e)(e,t=>new ki.ParticleListNode);ki.InitializeParticleLists(t,i),this.MergeParticleListsInContact(t,i);let n=ki.FindLongestParticleList(t,i);this.MergeZombieParticleListNodes(t,i,n),this.CreateParticleGroupsFromParticleList(t,i,n),this.UpdatePairsAndTriadsWithParticleList(t,i)}GetParticleGroupList(){return this.m_groupList}GetParticleGroupCount(){return this.m_groupCount}GetParticleCount(){return this.m_count}GetMaxParticleCount(){return this.m_def.maxCount}SetMaxParticleCount(t){this.m_count,this.m_def.maxCount=t}GetAllParticleFlags(){return this.m_allParticleFlags}GetAllGroupFlags(){return this.m_allGroupFlags}SetPaused(t){this.m_paused=t}GetPaused(){return this.m_paused}SetDensity(t){this.m_def.density=t,this.m_inverseDensity=1/this.m_def.density}GetDensity(){return this.m_def.density}SetGravityScale(t){this.m_def.gravityScale=t}GetGravityScale(){return this.m_def.gravityScale}SetDamping(t){this.m_def.dampingStrength=t}GetDamping(){return this.m_def.dampingStrength}SetStaticPressureIterations(t){this.m_def.staticPressureIterations=t}GetStaticPressureIterations(){return this.m_def.staticPressureIterations}SetRadius(t){this.m_particleDiameter=2*t,this.m_squaredDiameter=this.m_particleDiameter*this.m_particleDiameter,this.m_inverseDiameter=1/this.m_particleDiameter}GetRadius(){return this.m_particleDiameter/2}GetPositionBuffer(){return this.m_positionBuffer.data}GetVelocityBuffer(){return this.m_velocityBuffer.data}GetColorBuffer(){return this.m_colorBuffer.data=this.RequestBuffer(this.m_colorBuffer.data),this.m_colorBuffer.data}GetGroupBuffer(){return this.m_groupBuffer}GetWeightBuffer(){return this.m_weightBuffer}GetUserDataBuffer(){return this.m_userDataBuffer.data=this.RequestBuffer(this.m_userDataBuffer.data),this.m_userDataBuffer.data}GetFlagsBuffer(){return this.m_flagsBuffer.data}SetParticleFlags(t,e){this.m_flagsBuffer.data[t]&~e&&(this.m_needsUpdateAllParticleFlags=!0),~this.m_allParticleFlags&e&&(e&ri.b2_tensileParticle&&(this.m_accumulation2Buffer=this.RequestBuffer(this.m_accumulation2Buffer)),e&ri.b2_colorMixingParticle&&(this.m_colorBuffer.data=this.RequestBuffer(this.m_colorBuffer.data)),this.m_allParticleFlags|=e),this.m_flagsBuffer.data[t]=e}GetParticleFlags(t){return this.m_flagsBuffer.data[t]}SetFlagsBuffer(t,e){this.SetUserOverridableBuffer(this.m_flagsBuffer,t,e)}SetPositionBuffer(t,e){this.SetUserOverridableBuffer(this.m_positionBuffer,t,e)}SetVelocityBuffer(t,e){this.SetUserOverridableBuffer(this.m_velocityBuffer,t,e)}SetColorBuffer(t,e){this.SetUserOverridableBuffer(this.m_colorBuffer,t,e)}SetUserDataBuffer(t,e){this.SetUserOverridableBuffer(this.m_userDataBuffer,t,e)}GetContacts(){return this.m_contactBuffer.data}GetContactCount(){return this.m_contactBuffer.count}GetBodyContacts(){return this.m_bodyContactBuffer.data}GetBodyContactCount(){return this.m_bodyContactBuffer.count}GetPairs(){return this.m_pairBuffer.data}GetPairCount(){return this.m_pairBuffer.count}GetTriads(){return this.m_triadBuffer.data}GetTriadCount(){return this.m_triadBuffer.count}SetStuckThreshold(t){this.m_stuckThreshold=t,t>0&&(this.m_lastBodyContactStepBuffer.data=this.RequestBuffer(this.m_lastBodyContactStepBuffer.data),this.m_bodyContactCountBuffer.data=this.RequestBuffer(this.m_bodyContactCountBuffer.data),this.m_consecutiveContactStepsBuffer.data=this.RequestBuffer(this.m_consecutiveContactStepsBuffer.data))}GetStuckCandidates(){return this.m_stuckParticleBuffer.Data()}GetStuckCandidateCount(){return this.m_stuckParticleBuffer.GetCount()}ComputeCollisionEnergy(){let t=ki.ComputeCollisionEnergy_s_v,e=this.m_velocityBuffer.data,i=0;for(let n=0;n<this.m_contactBuffer.count;n++){let s=this.m_contactBuffer.data[n],o=s.indexA,a=s.indexB,l=s.normal,c=r.A.SubVV(e[a],e[o],t),u=r.A.DotVV(c,l);u<0&&(i+=u*u)}return.5*this.GetParticleMass()*i}SetStrictContactCheck(t){this.m_def.strictContactCheck=t}GetStrictContactCheck(){return this.m_def.strictContactCheck}SetParticleLifetime(t,e){this.ValidateParticleIndex(t);let i=null===this.m_indexByExpirationTimeBuffer.data;if(this.m_expirationTimeBuffer.data=this.RequestBuffer(this.m_expirationTimeBuffer.data),this.m_indexByExpirationTimeBuffer.data=this.RequestBuffer(this.m_indexByExpirationTimeBuffer.data),i){let t=this.GetParticleCount();for(let e=0;e<t;++e)this.m_indexByExpirationTimeBuffer.data[e]=e}let n=e/this.m_def.lifetimeGranularity,s=n>0?this.GetQuantizedTimeElapsed()+n:n;s!==this.m_expirationTimeBuffer.data[t]&&(this.m_expirationTimeBuffer.data[t]=s,this.m_expirationTimeBufferRequiresSorting=!0)}GetParticleLifetime(t){return this.ValidateParticleIndex(t),this.ExpirationTimeToLifetime(this.GetExpirationTimeBuffer()[t])}SetDestructionByAge(t){t&&this.GetExpirationTimeBuffer(),this.m_def.destroyByAge=t}GetDestructionByAge(){return this.m_def.destroyByAge}GetExpirationTimeBuffer(){return this.m_expirationTimeBuffer.data=this.RequestBuffer(this.m_expirationTimeBuffer.data),this.m_expirationTimeBuffer.data}ExpirationTimeToLifetime(t){return(t>0?t-this.GetQuantizedTimeElapsed():t)*this.m_def.lifetimeGranularity}GetIndexByExpirationTimeBuffer(){return this.GetParticleCount()?this.SetParticleLifetime(0,this.GetParticleLifetime(0)):this.m_indexByExpirationTimeBuffer.data=this.RequestBuffer(this.m_indexByExpirationTimeBuffer.data),this.m_indexByExpirationTimeBuffer.data}ParticleApplyLinearImpulse(t,e){this.ApplyLinearImpulse(t,t+1,e)}ApplyLinearImpulse(t,e,i){let n=this.m_velocityBuffer.data,s=(e-t)*this.GetParticleMass(),r=i.Clone().SelfMul(1/s);for(let i=t;i<e;i++)n[i].SelfAdd(r)}static IsSignificantForce(t){return 0!==t.x||0!==t.y}ParticleApplyForce(t,e){ki.IsSignificantForce(e)&&this.ForceCanBeApplied(this.m_flagsBuffer.data[t])&&(this.PrepareForceBuffer(),this.m_forceBuffer[t].SelfAdd(e))}ApplyForce(t,e,i){let n=i.Clone().SelfMul(1/(e-t));if(ki.IsSignificantForce(n)){this.PrepareForceBuffer();for(let i=t;i<e;i++)this.m_forceBuffer[i].SelfAdd(n)}}GetNext(){return this.m_next}QueryAABB(t,e){if(0===this.m_proxyBuffer.count)return;let i=this.m_proxyBuffer.count,n=yi(this.m_proxyBuffer.data,0,i,ki.computeTag(this.m_inverseDiameter*e.lowerBound.x,this.m_inverseDiameter*e.lowerBound.y),ki.Proxy.CompareProxyTag),s=xi(this.m_proxyBuffer.data,n,i,ki.computeTag(this.m_inverseDiameter*e.upperBound.x,this.m_inverseDiameter*e.upperBound.y),ki.Proxy.CompareTagProxy),r=this.m_positionBuffer.data;for(let i=n;i<s;++i){let n=this.m_proxyBuffer.data[i].index,s=r[n];if(e.lowerBound.x<s.x&&s.x<e.upperBound.x&&e.lowerBound.y<s.y&&s.y<e.upperBound.y&&!t.ReportParticle(this,n))break}}QueryShapeAABB(t,e,i,n=0){let s=ki.QueryShapeAABB_s_aabb;e.ComputeAABB(s,i,n),this.QueryAABB(t,s)}QueryPointAABB(t,e,i=s.v){let n=ki.QueryPointAABB_s_aabb;n.lowerBound.Set(e.x-i,e.y-i),n.upperBound.Set(e.x+i,e.y+i),this.QueryAABB(t,n)}RayCast(t,e,i){let n=ki.RayCast_s_aabb,s=ki.RayCast_s_p,o=ki.RayCast_s_v,a=ki.RayCast_s_n,l=ki.RayCast_s_point;if(0===this.m_proxyBuffer.count)return;let c=this.m_positionBuffer.data,u=n;r.A.MinV(e,i,u.lowerBound),r.A.MaxV(e,i,u.upperBound);let h,d=1,m=r.A.SubVV(i,e,o),p=r.A.DotVV(m,m),f=this.GetInsideBoundsEnumerator(u);for(;(h=f.GetNext())>=0;){let i=r.A.SubVV(e,c[h],s),n=r.A.DotVV(i,m),o=n*n-p*(r.A.DotVV(i,i)-this.m_squaredDiameter);if(o>=0){let s=Object(r.w)(o),c=(-n-s)/p;if(c>d)continue;if(c<0&&((c=(-n+s)/p)<0||c>d))continue;let u=r.A.AddVMulSV(i,c,m,a);u.Normalize();let f=t.ReportParticle(this,h,r.A.AddVMulSV(e,c,m,l),u,c);if((d=Object(r.n)(d,f))<=0)break}}}ComputeAABB(t){let e=this.GetParticleCount();t.lowerBound.x=+s.x,t.lowerBound.y=+s.x,t.upperBound.x=-s.x,t.upperBound.y=-s.x;let i=this.m_positionBuffer.data;for(let n=0;n<e;n++){let e=i[n];r.A.MinV(t.lowerBound,e,t.lowerBound),r.A.MaxV(t.upperBound,e,t.upperBound)}t.lowerBound.x-=this.m_particleDiameter,t.lowerBound.y-=this.m_particleDiameter,t.upperBound.x+=this.m_particleDiameter,t.upperBound.y+=this.m_particleDiameter}FreeBuffer(t,e){null!==t&&(t.length=0)}FreeUserOverridableBuffer(t){0===t.userSuppliedCapacity&&this.FreeBuffer(t.data,this.m_internalAllocatedCapacity)}ReallocateBuffer3(t,e,i){let n=t?t.slice():[];return n.length=i,n}ReallocateBuffer5(t,e,i,n,s){return s&&!t||e||(t=this.ReallocateBuffer3(t,i,n)),t}ReallocateBuffer4(t,e,i,n){return this.ReallocateBuffer5(t.data,t.userSuppliedCapacity,e,i,n)}RequestBuffer(t){return t||(0===this.m_internalAllocatedCapacity&&this.ReallocateInternalAllocatedBuffers(s.M),(t=[]).length=this.m_internalAllocatedCapacity),t}ReallocateHandleBuffers(t){this.m_internalAllocatedCapacity,this.m_handleIndexBuffer.data=this.ReallocateBuffer4(this.m_handleIndexBuffer,this.m_internalAllocatedCapacity,t,!0)}ReallocateInternalAllocatedBuffers(t){function e(t,e){return e&&t>e?e:t}if(t=e(t=e(t=e(t=e(t=e(t=e(t,this.m_def.maxCount),this.m_flagsBuffer.userSuppliedCapacity),this.m_positionBuffer.userSuppliedCapacity),this.m_velocityBuffer.userSuppliedCapacity),this.m_colorBuffer.userSuppliedCapacity),this.m_userDataBuffer.userSuppliedCapacity),this.m_internalAllocatedCapacity<t){this.ReallocateHandleBuffers(t),this.m_flagsBuffer.data=this.ReallocateBuffer4(this.m_flagsBuffer,this.m_internalAllocatedCapacity,t,!1);let e=this.m_stuckThreshold>0;this.m_lastBodyContactStepBuffer.data=this.ReallocateBuffer4(this.m_lastBodyContactStepBuffer,this.m_internalAllocatedCapacity,t,e),this.m_bodyContactCountBuffer.data=this.ReallocateBuffer4(this.m_bodyContactCountBuffer,this.m_internalAllocatedCapacity,t,e),this.m_consecutiveContactStepsBuffer.data=this.ReallocateBuffer4(this.m_consecutiveContactStepsBuffer,this.m_internalAllocatedCapacity,t,e),this.m_positionBuffer.data=this.ReallocateBuffer4(this.m_positionBuffer,this.m_internalAllocatedCapacity,t,!1),this.m_velocityBuffer.data=this.ReallocateBuffer4(this.m_velocityBuffer,this.m_internalAllocatedCapacity,t,!1),this.m_forceBuffer=this.ReallocateBuffer5(this.m_forceBuffer,0,this.m_internalAllocatedCapacity,t,!1),this.m_weightBuffer=this.ReallocateBuffer5(this.m_weightBuffer,0,this.m_internalAllocatedCapacity,t,!1),this.m_staticPressureBuffer=this.ReallocateBuffer5(this.m_staticPressureBuffer,0,this.m_internalAllocatedCapacity,t,!0),this.m_accumulationBuffer=this.ReallocateBuffer5(this.m_accumulationBuffer,0,this.m_internalAllocatedCapacity,t,!1),this.m_accumulation2Buffer=this.ReallocateBuffer5(this.m_accumulation2Buffer,0,this.m_internalAllocatedCapacity,t,!0),this.m_depthBuffer=this.ReallocateBuffer5(this.m_depthBuffer,0,this.m_internalAllocatedCapacity,t,!0),this.m_colorBuffer.data=this.ReallocateBuffer4(this.m_colorBuffer,this.m_internalAllocatedCapacity,t,!0),this.m_groupBuffer=this.ReallocateBuffer5(this.m_groupBuffer,0,this.m_internalAllocatedCapacity,t,!1),this.m_userDataBuffer.data=this.ReallocateBuffer4(this.m_userDataBuffer,this.m_internalAllocatedCapacity,t,!0),this.m_expirationTimeBuffer.data=this.ReallocateBuffer4(this.m_expirationTimeBuffer,this.m_internalAllocatedCapacity,t,!0),this.m_indexByExpirationTimeBuffer.data=this.ReallocateBuffer4(this.m_indexByExpirationTimeBuffer,this.m_internalAllocatedCapacity,t,!1),this.m_internalAllocatedCapacity=t}}CreateParticleForGroup(t,e,i){let n=new ai;n.flags=t.flags,r.z.MulXV(e,i,n.position),r.A.AddVV(t.linearVelocity,r.A.CrossSV(t.angularVelocity,r.A.SubVV(n.position,t.position,r.A.s_t0),r.A.s_t0),n.velocity),n.color.Copy(t.color),n.lifetime=t.lifetime,n.userData=t.userData,this.CreateParticle(n)}CreateParticlesStrokeShapeForGroup(t,e,i){let n=ki.CreateParticlesStrokeShapeForGroup_s_edge,s=ki.CreateParticlesStrokeShapeForGroup_s_d,o=ki.CreateParticlesStrokeShapeForGroup_s_p,a=e.stride;0===a&&(a=this.GetParticleStride());let l=0,c=t.GetChildCount();for(let u=0;u<c;u++){let c=null;t.GetType()===Gt.c.e_edgeShape?c=t:(t.GetType(),Gt.c.e_chainShape,c=n,t.GetChildEdge(c,u));let h=r.A.SubVV(c.m_vertex2,c.m_vertex1,s),d=h.Length();for(;l<d;){let t=r.A.AddVMulSV(c.m_vertex1,l/d,h,o);this.CreateParticleForGroup(e,i,t),l+=a}l-=d}}CreateParticlesFillShapeForGroup(t,e,i){let n=ki.CreateParticlesFillShapeForGroup_s_aabb,s=ki.CreateParticlesFillShapeForGroup_s_p,o=e.stride;0===o&&(o=this.GetParticleStride());let a=r.z.IDENTITY,l=n;t.GetChildCount(),t.ComputeAABB(l,a,0);for(let n=Math.floor(l.lowerBound.y/o)*o;n<l.upperBound.y;n+=o)for(let r=Math.floor(l.lowerBound.x/o)*o;r<l.upperBound.x;r+=o){let o=s.Set(r,n);t.TestPoint(a,o)&&this.CreateParticleForGroup(e,i,o)}}CreateParticlesWithShapeForGroup(t,e,i){switch(t.GetType()){case Gt.c.e_edgeShape:case Gt.c.e_chainShape:this.CreateParticlesStrokeShapeForGroup(t,e,i);break;case Gt.c.e_polygonShape:case Gt.c.e_circleShape:this.CreateParticlesFillShapeForGroup(t,e,i)}}CreateParticlesWithShapesForGroup(t,e,i,n){let s=new ki.CompositeShape(t,e);this.CreateParticlesFillShapeForGroup(s,i,n)}CloneParticle(t,e){let i=new ai;i.flags=this.m_flagsBuffer.data[t],i.position.Copy(this.m_positionBuffer.data[t]),i.velocity.Copy(this.m_velocityBuffer.data[t]),this.m_colorBuffer.data&&i.color.Copy(this.m_colorBuffer.data[t]),this.m_userDataBuffer.data&&(i.userData=this.m_userDataBuffer.data[t]),i.group=e;let n=this.CreateParticle(i);if(this.m_handleIndexBuffer.data){let e=this.m_handleIndexBuffer.data[t];e&&e.SetIndex(n),this.m_handleIndexBuffer.data[n]=e,this.m_handleIndexBuffer.data[t]=null}return this.m_lastBodyContactStepBuffer.data&&(this.m_lastBodyContactStepBuffer.data[n]=this.m_lastBodyContactStepBuffer.data[t]),this.m_bodyContactCountBuffer.data&&(this.m_bodyContactCountBuffer.data[n]=this.m_bodyContactCountBuffer.data[t]),this.m_consecutiveContactStepsBuffer.data&&(this.m_consecutiveContactStepsBuffer.data[n]=this.m_consecutiveContactStepsBuffer.data[t]),this.m_hasForce&&this.m_forceBuffer[n].Copy(this.m_forceBuffer[t]),this.m_staticPressureBuffer&&(this.m_staticPressureBuffer[n]=this.m_staticPressureBuffer[t]),this.m_depthBuffer&&(this.m_depthBuffer[n]=this.m_depthBuffer[t]),this.m_expirationTimeBuffer.data&&(this.m_expirationTimeBuffer.data[n]=this.m_expirationTimeBuffer.data[t]),n}DestroyParticlesInGroup(t,e=!1){for(let i=t.m_firstIndex;i<t.m_lastIndex;i++)this.DestroyParticle(i,e)}DestroyParticleGroup(t){this.m_groupCount,this.m_world.m_destructionListener&&this.m_world.m_destructionListener.SayGoodbyeParticleGroup(t),this.SetGroupFlags(t,0);for(let e=t.m_firstIndex;e<t.m_lastIndex;e++)this.m_groupBuffer[e]=null;t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t===this.m_groupList&&(this.m_groupList=t.m_next),--this.m_groupCount}static ParticleCanBeConnected(t,e){return 0!=(t&(ri.b2_wallParticle|ri.b2_springParticle|ri.b2_elasticParticle))||null!==e&&0!=(e.GetGroupFlags()&oi.b2_rigidParticleGroup)}UpdatePairsAndTriads(t,e,i){let n=ki.UpdatePairsAndTriads_s_dab,o=ki.UpdatePairsAndTriads_s_dbc,a=ki.UpdatePairsAndTriads_s_dca,l=this.m_positionBuffer.data,c=0;for(let i=t;i<e;i++)c|=this.m_flagsBuffer.data[i];if(c&ki.k_pairFlags)for(let n=0;n<this.m_contactBuffer.count;n++){let s=this.m_contactBuffer.data[n],o=s.indexA,a=s.indexB,c=this.m_flagsBuffer.data[o],u=this.m_flagsBuffer.data[a],h=this.m_groupBuffer[o],d=this.m_groupBuffer[a];if(o>=t&&o<e&&a>=t&&a<e&&!((c|u)&ri.b2_zombieParticle)&&(c|u)&ki.k_pairFlags&&(i.IsNecessary(o)||i.IsNecessary(a))&&ki.ParticleCanBeConnected(c,h)&&ki.ParticleCanBeConnected(u,d)&&i.ShouldCreatePair(o,a)){let t=this.m_pairBuffer.data[this.m_pairBuffer.Append()];t.indexA=o,t.indexB=a,t.flags=s.flags,t.strength=Object(r.n)(h?h.m_strength:1,d?d.m_strength:1),t.distance=r.A.DistanceVV(l[o],l[a])}gi(this.m_pairBuffer.data,0,this.m_pairBuffer.count,ki.ComparePairIndices),this.m_pairBuffer.Unique(ki.MatchPairIndices)}if(c&ki.k_triadFlags){let c=new mi(e-t);for(let n=t;n<e;n++){let t=this.m_flagsBuffer.data[n],e=this.m_groupBuffer[n];t&ri.b2_zombieParticle||!ki.ParticleCanBeConnected(t,e)||c.AddGenerator(l[n],n,i.IsNecessary(n))}let u=this.GetParticleStride();c.Generate(u/2,2*u);const h=this;let d=(t,e,c)=>{let u=h.m_flagsBuffer.data[t],d=h.m_flagsBuffer.data[e],m=h.m_flagsBuffer.data[c];if((u|d|m)&ki.k_triadFlags&&i.ShouldCreateTriad(t,e,c)){let i=l[t],p=l[e],f=l[c],_=r.A.SubVV(i,p,n),g=r.A.SubVV(p,f,o),v=r.A.SubVV(f,i,a),y=s.L*h.m_squaredDiameter;if(r.A.DotVV(_,_)>y||r.A.DotVV(g,g)>y||r.A.DotVV(v,v)>y)return;let x=h.m_groupBuffer[t],b=h.m_groupBuffer[e],A=h.m_groupBuffer[c],w=h.m_triadBuffer.data[h.m_triadBuffer.Append()];w.indexA=t,w.indexB=e,w.indexC=c,w.flags=u|d|m,w.strength=Object(r.n)(Object(r.n)(x?x.m_strength:1,b?b.m_strength:1),A?A.m_strength:1);let S=(i.x+p.x+f.x)/3,C=(i.y+p.y+f.y)/3;w.pa.x=i.x-S,w.pa.y=i.y-C,w.pb.x=p.x-S,w.pb.y=p.y-C,w.pc.x=f.x-S,w.pc.y=f.y-C,w.ka=-r.A.DotVV(v,_),w.kb=-r.A.DotVV(_,g),w.kc=-r.A.DotVV(g,v),w.s=r.A.CrossVV(i,p)+r.A.CrossVV(p,f)+r.A.CrossVV(f,i)}};c.GetNodes(d),gi(this.m_triadBuffer.data,0,this.m_triadBuffer.count,ki.CompareTriadIndices),this.m_triadBuffer.Unique(ki.MatchTriadIndices)}}UpdatePairsAndTriadsWithReactiveParticles(){let t=new ki.ReactiveFilter(this.m_flagsBuffer);this.UpdatePairsAndTriads(0,this.m_count,t);for(let t=0;t<this.m_count;t++)this.m_flagsBuffer.data[t]&=~ri.b2_reactiveParticle;this.m_allParticleFlags&=~ri.b2_reactiveParticle}static ComparePairIndices(t,e){let i=t.indexA-e.indexA;return 0!==i?i<0:t.indexB<e.indexB}static MatchPairIndices(t,e){return t.indexA===e.indexA&&t.indexB===e.indexB}static CompareTriadIndices(t,e){let i=t.indexA-e.indexA;if(0!==i)return i<0;let n=t.indexB-e.indexB;return 0!==n?n<0:t.indexC<e.indexC}static MatchTriadIndices(t,e){return t.indexA===e.indexA&&t.indexB===e.indexB&&t.indexC===e.indexC}static InitializeParticleLists(t,e){let i=t.GetBufferIndex(),n=t.GetParticleCount();for(let t=0;t<n;t++){let n=e[t];n.list=n,n.next=null,n.count=1,n.index=t+i}}MergeParticleListsInContact(t,e){let i=t.GetBufferIndex();for(let n=0;n<this.m_contactBuffer.count;n++){let s=this.m_contactBuffer.data[n],r=s.indexA,o=s.indexB;if(!t.ContainsParticle(r)||!t.ContainsParticle(o))continue;let a=e[r-i].list,l=e[o-i].list;if(a!==l){if(a.count<l.count){let t=a;a=l,l=t}a.count,l.count,ki.MergeParticleLists(a,l)}}}static MergeParticleLists(t,e){for(let i=e;;){i.list=t;let e=i.next;if(!e){i.next=t.next;break}i=e}t.next=e,t.count+=e.count,e.count=0}static FindLongestParticleList(t,e){let i=t.GetParticleCount(),n=e[0];for(let t=0;t<i;t++){let i=e[t];n.count<i.count&&(n=i)}return n}MergeZombieParticleListNodes(t,e,i){let n=t.GetParticleCount();for(let t=0;t<n;t++){let n=e[t];n!==i&&this.m_flagsBuffer.data[n.index]&ri.b2_zombieParticle&&ki.MergeParticleListAndNode(i,n)}}static MergeParticleListAndNode(t,e){e.list,e.count,e.list=t,e.next=t.next,t.next=e,t.count++,e.count=0}CreateParticleGroupsFromParticleList(t,e,i){let n=t.GetParticleCount(),s=new ui;s.groupFlags=t.GetGroupFlags(),s.userData=t.GetUserData();for(let t=0;t<n;t++){let n=e[t];if(!n.count||n===i)continue;n.list;let r=this.CreateParticleGroup(s);for(let t=n;t;t=t.next){let e=t.index;this.m_flagsBuffer.data[e];ri.b2_zombieParticle;let i=this.CloneParticle(e,r);this.m_flagsBuffer.data[e]|=ri.b2_zombieParticle,t.index=i}}}UpdatePairsAndTriadsWithParticleList(t,e){let i=t.GetBufferIndex();for(let n=0;n<this.m_pairBuffer.count;n++){let s=this.m_pairBuffer.data[n],r=s.indexA,o=s.indexB;t.ContainsParticle(r)&&(s.indexA=e[r-i].index),t.ContainsParticle(o)&&(s.indexB=e[o-i].index)}for(let n=0;n<this.m_triadBuffer.count;n++){let s=this.m_triadBuffer.data[n],r=s.indexA,o=s.indexB,a=s.indexC;t.ContainsParticle(r)&&(s.indexA=e[r-i].index),t.ContainsParticle(o)&&(s.indexB=e[o-i].index),t.ContainsParticle(a)&&(s.indexC=e[a-i].index)}}ComputeDepth(){let t=[],e=0;for(let i=0;i<this.m_contactBuffer.count;i++){let n=this.m_contactBuffer.data[i],s=n.indexA,r=n.indexB,o=this.m_groupBuffer[s],a=this.m_groupBuffer[r];o&&o===a&&o.m_groupFlags&oi.b2_particleGroupNeedsUpdateDepth&&(t[e++]=n)}let i=[],n=0;for(let t=this.m_groupList;t;t=t.GetNext())if(t.m_groupFlags&oi.b2_particleGroupNeedsUpdateDepth){i[n++]=t,this.SetGroupFlags(t,t.m_groupFlags&~oi.b2_particleGroupNeedsUpdateDepth);for(let e=t.m_firstIndex;e<t.m_lastIndex;e++)this.m_accumulationBuffer[e]=0}for(let i=0;i<e;i++){let e=t[i],n=e.indexA,s=e.indexB,r=e.weight;this.m_accumulationBuffer[n]+=r,this.m_accumulationBuffer[s]+=r}this.m_depthBuffer;for(let t=0;t<n;t++){let e=i[t];for(let t=e.m_firstIndex;t<e.m_lastIndex;t++){let e=this.m_accumulationBuffer[t];this.m_depthBuffer[t]=e<.8?0:s.x}}let o=Object(r.w)(this.m_count)>>0;for(let i=0;i<o;i++){let i=!1;for(let n=0;n<e;n++){let e=t[n],s=e.indexA,r=e.indexB,o=1-e.weight,a=this.m_depthBuffer[s],l=this.m_depthBuffer[r],c=l+o,u=a+o;a>c&&(this.m_depthBuffer[s]=c,i=!0),l>u&&(this.m_depthBuffer[r]=u,i=!0)}if(!i)break}for(let t=0;t<n;t++){let e=i[t];for(let t=e.m_firstIndex;t<e.m_lastIndex;t++)this.m_depthBuffer[t]<s.x?this.m_depthBuffer[t]*=this.m_particleDiameter:this.m_depthBuffer[t]=0}}GetInsideBoundsEnumerator(t){let e=ki.computeTag(this.m_inverseDiameter*t.lowerBound.x-1,this.m_inverseDiameter*t.lowerBound.y-1),i=ki.computeTag(this.m_inverseDiameter*t.upperBound.x+1,this.m_inverseDiameter*t.upperBound.y+1),n=this.m_proxyBuffer.count,s=yi(this.m_proxyBuffer.data,0,n,e,ki.Proxy.CompareProxyTag),r=xi(this.m_proxyBuffer.data,0,n,i,ki.Proxy.CompareTagProxy);return new ki.InsideBoundsEnumerator(this,e,i,s,r)}UpdateAllParticleFlags(){this.m_allParticleFlags=0;for(let t=0;t<this.m_count;t++)this.m_allParticleFlags|=this.m_flagsBuffer.data[t];this.m_needsUpdateAllParticleFlags=!1}UpdateAllGroupFlags(){this.m_allGroupFlags=0;for(let t=this.m_groupList;t;t=t.GetNext())this.m_allGroupFlags|=t.m_groupFlags;this.m_needsUpdateAllGroupFlags=!1}AddContact(t,e,i){let n=ki.AddContact_s_d,s=this.m_positionBuffer.data;this.m_contactBuffer;let o=r.A.SubVV(s[e],s[t],n),a=r.A.DotVV(o,o);if(a<this.m_squaredDiameter){let i=Object(r.h)(a);isFinite(i)||(i=198177537e11);let n=this.m_contactBuffer.data[this.m_contactBuffer.Append()];n.indexA=t,n.indexB=e,n.flags=this.m_flagsBuffer.data[t]|this.m_flagsBuffer.data[e],n.weight=1-a*i*this.m_inverseDiameter,r.A.MulSV(i,o,n.normal)}}FindContacts_Reference(t){this.m_contactBuffer;let e=this.m_proxyBuffer.count;this.m_contactBuffer.count=0;for(let t=0,i=0;t<e;t++){let n=ki.computeRelativeTag(this.m_proxyBuffer.data[t].tag,1,0);for(let i=t+1;i<e&&!(n<this.m_proxyBuffer.data[i].tag);i++)this.AddContact(this.m_proxyBuffer.data[t].index,this.m_proxyBuffer.data[i].index,this.m_contactBuffer);let s=ki.computeRelativeTag(this.m_proxyBuffer.data[t].tag,-1,1);for(;i<e&&!(s<=this.m_proxyBuffer.data[i].tag);i++);let r=ki.computeRelativeTag(this.m_proxyBuffer.data[t].tag,1,1);for(let n=i;n<e&&!(r<this.m_proxyBuffer.data[n].tag);n++)this.AddContact(this.m_proxyBuffer.data[t].index,this.m_proxyBuffer.data[n].index,this.m_contactBuffer)}}FindContacts(t){this.FindContacts_Reference(t)}UpdateProxies_Reference(t){this.m_proxyBuffer;let e=this.m_positionBuffer.data,i=this.m_inverseDiameter;for(let t=0;t<this.m_proxyBuffer.count;++t){let n=this.m_proxyBuffer.data[t],s=e[n.index];n.tag=ki.computeTag(i*s.x,i*s.y)}}UpdateProxies(t){this.UpdateProxies_Reference(t)}SortProxies(t){this.m_proxyBuffer,_i(this.m_proxyBuffer.data,0,this.m_proxyBuffer.count,ki.Proxy.CompareProxyProxy)}FilterContacts(t){let e=this.GetParticleContactFilter();if(null===e)return;this.m_contactBuffer;const i=this;this.m_contactBuffer.RemoveIf(t=>t.flags&ri.b2_particleContactFilterParticle&&!e.ShouldCollideParticleParticle(i,t.indexA,t.indexB))}NotifyContactListenerPreContact(t){if(null!==this.GetParticleContactListener())throw t.Initialize(this.m_contactBuffer,this.m_flagsBuffer),new Error}NotifyContactListenerPostContact(t){let e=this.GetParticleContactListener();if(null!==e){for(let i=0;i<this.m_contactBuffer.count;++i){let n=this.m_contactBuffer.data[i],s=-1;s>=0?t.Invalidate(s):e.BeginContactParticleParticle(this,n)}throw new Error}}static b2ParticleContactIsZombie(t){return(t.flags&ri.b2_zombieParticle)===ri.b2_zombieParticle}UpdateContacts(t){this.UpdateProxies(this.m_proxyBuffer),this.SortProxies(this.m_proxyBuffer);let e=new ki.b2ParticlePairSet;this.NotifyContactListenerPreContact(e),this.FindContacts(this.m_contactBuffer),this.FilterContacts(this.m_contactBuffer),this.NotifyContactListenerPostContact(e),t&&this.m_contactBuffer.RemoveIf(ki.b2ParticleContactIsZombie)}NotifyBodyContactListenerPreContact(t){if(null!==this.GetFixtureContactListener())throw t.Initialize(this.m_bodyContactBuffer,this.m_flagsBuffer),new Error}NotifyBodyContactListenerPostContact(t){let e=this.GetFixtureContactListener();if(null!==e){for(let i=0;i<this.m_bodyContactBuffer.count;i++){let n=this.m_bodyContactBuffer.data[i],s=-1;s>=0?t.Invalidate(s):e.BeginContactFixtureParticle(this,n)}throw new Error}}UpdateBodyContacts(){let t=ki.UpdateBodyContacts_s_aabb,e=new ki.FixtureParticleSet;if(this.NotifyBodyContactListenerPreContact(e),this.m_stuckThreshold>0){let t=this.GetParticleCount();for(let e=0;e<t;e++)this.m_bodyContactCountBuffer.data[e]=0,this.m_timestamp>this.m_lastBodyContactStepBuffer.data[e]+1&&(this.m_consecutiveContactStepsBuffer.data[e]=0)}this.m_bodyContactBuffer.SetCount(0),this.m_stuckParticleBuffer.SetCount(0);let i=t;this.ComputeAABB(i);let n=new ki.UpdateBodyContactsCallback(this,this.GetFixtureContactFilter());this.m_world.QueryAABB(n,i),this.m_def.strictContactCheck&&this.RemoveSpuriousBodyContacts(),this.NotifyBodyContactListenerPostContact(e)}Solve(t){let e=ki.Solve_s_subStep;if(0!==this.m_count&&(this.m_expirationTimeBuffer.data&&this.SolveLifetimes(t),this.m_allParticleFlags&ri.b2_zombieParticle&&this.SolveZombie(),this.m_needsUpdateAllParticleFlags&&this.UpdateAllParticleFlags(),this.m_needsUpdateAllGroupFlags&&this.UpdateAllGroupFlags(),!this.m_paused))for(this.m_iterationIndex=0;this.m_iterationIndex<t.particleIterations;this.m_iterationIndex++){++this.m_timestamp;let i=e.Copy(t);i.dt/=t.particleIterations,i.inv_dt*=t.particleIterations,this.UpdateContacts(!1),this.UpdateBodyContacts(),this.ComputeWeight(),this.m_allGroupFlags&oi.b2_particleGroupNeedsUpdateDepth&&this.ComputeDepth(),this.m_allParticleFlags&ri.b2_reactiveParticle&&this.UpdatePairsAndTriadsWithReactiveParticles(),this.m_hasForce&&this.SolveForce(i),this.m_allParticleFlags&ri.b2_viscousParticle&&this.SolveViscous(),this.m_allParticleFlags&ri.b2_repulsiveParticle&&this.SolveRepulsive(i),this.m_allParticleFlags&ri.b2_powderParticle&&this.SolvePowder(i),this.m_allParticleFlags&ri.b2_tensileParticle&&this.SolveTensile(i),this.m_allGroupFlags&oi.b2_solidParticleGroup&&this.SolveSolid(i),this.m_allParticleFlags&ri.b2_colorMixingParticle&&this.SolveColorMixing(),this.SolveGravity(i),this.m_allParticleFlags&ri.b2_staticPressureParticle&&this.SolveStaticPressure(i),this.SolvePressure(i),this.SolveDamping(i),this.m_allParticleFlags&ki.k_extraDampingFlags&&this.SolveExtraDamping(),this.m_allParticleFlags&ri.b2_elasticParticle&&this.SolveElastic(i),this.m_allParticleFlags&ri.b2_springParticle&&this.SolveSpring(i),this.LimitVelocity(i),this.m_allGroupFlags&oi.b2_rigidParticleGroup&&this.SolveRigidDamping(),this.m_allParticleFlags&ri.b2_barrierParticle&&this.SolveBarrier(i),this.SolveCollision(i),this.m_allGroupFlags&oi.b2_rigidParticleGroup&&this.SolveRigid(i),this.m_allParticleFlags&ri.b2_wallParticle&&this.SolveWall();for(let t=0;t<this.m_count;t++)this.m_positionBuffer.data[t].SelfMulAdd(i.dt,this.m_velocityBuffer.data[t])}}SolveCollision(t){let e=ki.SolveCollision_s_aabb,i=this.m_positionBuffer.data,n=this.m_velocityBuffer.data,o=e;o.lowerBound.x=+s.x,o.lowerBound.y=+s.x,o.upperBound.x=-s.x,o.upperBound.y=-s.x;for(let e=0;e<this.m_count;e++){let s=n[e],a=i[e],l=a.x+t.dt*s.x,c=a.y+t.dt*s.y;o.lowerBound.x=Object(r.n)(o.lowerBound.x,Object(r.n)(a.x,l)),o.lowerBound.y=Object(r.n)(o.lowerBound.y,Object(r.n)(a.y,c)),o.upperBound.x=Object(r.m)(o.upperBound.x,Object(r.m)(a.x,l)),o.upperBound.y=Object(r.m)(o.upperBound.y,Object(r.m)(a.y,c))}let a=new ki.SolveCollisionCallback(this,t);this.m_world.QueryAABB(a,o)}LimitVelocity(t){let e=this.m_velocityBuffer.data,i=this.GetCriticalVelocitySquared(t);for(let t=0;t<this.m_count;t++){let n=e[t],s=r.A.DotVV(n,n);s>i&&n.SelfMul(Object(r.w)(i/s))}}SolveGravity(t){let e=ki.SolveGravity_s_gravity,i=this.m_velocityBuffer.data,n=r.A.MulSV(t.dt*this.m_def.gravityScale,this.m_world.GetGravity(),e);for(let t=0;t<this.m_count;t++)i[t].SelfAdd(n)}SolveBarrier(t){let e=ki.SolveBarrier_s_aabb,i=ki.SolveBarrier_s_va,n=ki.SolveBarrier_s_vb,o=ki.SolveBarrier_s_pba,a=ki.SolveBarrier_s_vba,l=ki.SolveBarrier_s_vc,c=ki.SolveBarrier_s_pca,u=ki.SolveBarrier_s_vca,h=ki.SolveBarrier_s_qba,d=ki.SolveBarrier_s_qca,m=ki.SolveBarrier_s_dv,p=ki.SolveBarrier_s_f,f=this.m_positionBuffer.data,_=this.m_velocityBuffer.data;for(let t=0;t<this.m_count;t++){0!=(this.m_flagsBuffer.data[t]&ki.k_barrierWallFlags)&&_[t].SetZero()}let g=s.o*t.dt,v=this.GetParticleMass();for(let s=0;s<this.m_pairBuffer.count;s++){let y=this.m_pairBuffer.data[s];if(y.flags&ri.b2_barrierParticle){let s=y.indexA,x=y.indexB,b=f[s],A=f[x],w=e;r.A.MinV(b,A,w.lowerBound),r.A.MaxV(b,A,w.upperBound);let S,C=this.m_groupBuffer[s],B=this.m_groupBuffer[x],V=this.GetLinearVelocity(C,s,b,i),M=this.GetLinearVelocity(B,x,A,n),k=r.A.SubVV(A,b,o),P=r.A.SubVV(M,V,a),I=this.GetInsideBoundsEnumerator(w);for(;(S=I.GetNext())>=0;){let e=f[S],i=this.m_groupBuffer[S];if(C!==i&&B!==i){let n,s,o=this.GetLinearVelocity(i,S,e,l),a=r.A.SubVV(e,b,c),f=r.A.SubVV(o,V,u),y=r.A.CrossVV(P,f),x=r.A.CrossVV(k,f)-r.A.CrossVV(a,P),A=r.A.CrossVV(k,a),w=h,C=d;if(0===y){if(0===x)continue;if(!((s=-A/x)>=0&&s<g))continue;if(r.A.AddVMulSV(k,s,P,w),r.A.AddVMulSV(a,s,f,C),!((n=r.A.DotVV(w,C)/r.A.DotVV(w,w))>=0&&n<=1))continue}else{let t=x*x-4*A*y;if(t<0)continue;let e=Object(r.w)(t),i=(-x-e)/(2*y),o=(-x+e)/(2*y);if(i>o){let t=i;i=o,o=t}if(s=i,r.A.AddVMulSV(k,s,P,w),r.A.AddVMulSV(a,s,f,C),n=r.A.DotVV(w,C)/r.A.DotVV(w,w),!(s>=0&&s<g&&n>=0&&n<=1)){if(!((s=o)>=0&&s<g))continue;if(r.A.AddVMulSV(k,s,P,w),r.A.AddVMulSV(a,s,f,C),!((n=r.A.DotVV(w,C)/r.A.DotVV(w,w))>=0&&n<=1))continue}}let B=m;B.x=V.x+n*P.x-o.x,B.y=V.y+n*P.y-o.y;let M=r.A.MulSV(v,B,p);if(this.IsRigidGroup(i)){let t=i.GetMass(),n=i.GetInertia();t>0&&i.m_linearVelocity.SelfMulAdd(1/t,M),n>0&&(i.m_angularVelocity+=r.A.CrossVV(r.A.SubVV(e,i.GetCenter(),r.A.s_t0),M)/n)}else _[S].SelfAdd(B);this.ParticleApplyForce(S,M.SelfMul(-t.inv_dt))}}}}}SolveStaticPressure(t){this.m_staticPressureBuffer=this.RequestBuffer(this.m_staticPressureBuffer);let e=this.GetCriticalPressure(t),i=this.m_def.staticPressureStrength*e,n=s.C*e,o=this.m_def.staticPressureRelaxation;for(let t=0;t<this.m_def.staticPressureIterations;t++){for(let t=0;t<this.m_count;t++)this.m_accumulationBuffer[t]=0;for(let t=0;t<this.m_contactBuffer.count;t++){let e=this.m_contactBuffer.data[t];if(e.flags&ri.b2_staticPressureParticle){let t=e.indexA,i=e.indexB,n=e.weight;this.m_accumulationBuffer[t]+=n*this.m_staticPressureBuffer[i],this.m_accumulationBuffer[i]+=n*this.m_staticPressureBuffer[t]}}for(let t=0;t<this.m_count;t++){let e=this.m_weightBuffer[t];if(this.m_flagsBuffer.data[t]&ri.b2_staticPressureParticle){let a=(this.m_accumulationBuffer[t]+i*(e-s.N))/(e+o);this.m_staticPressureBuffer[t]=Object(r.e)(a,0,n)}else this.m_staticPressureBuffer[t]=0}}}ComputeWeight(){for(let t=0;t<this.m_count;t++)this.m_weightBuffer[t]=0;for(let t=0;t<this.m_bodyContactBuffer.count;t++){let e=this.m_bodyContactBuffer.data[t],i=e.index,n=e.weight;this.m_weightBuffer[i]+=n}for(let t=0;t<this.m_contactBuffer.count;t++){let e=this.m_contactBuffer.data[t],i=e.indexA,n=e.indexB,s=e.weight;this.m_weightBuffer[i]+=s,this.m_weightBuffer[n]+=s}}SolvePressure(t){let e=ki.SolvePressure_s_f,i=this.m_positionBuffer.data,n=this.m_velocityBuffer.data,o=this.GetCriticalPressure(t),a=this.m_def.pressureStrength*o,l=s.C*o;for(let t=0;t<this.m_count;t++){let e=this.m_weightBuffer[t],i=a*Object(r.m)(0,e-s.N);this.m_accumulationBuffer[t]=Object(r.n)(i,l)}if(this.m_allParticleFlags&ki.k_noPressureFlags)for(let t=0;t<this.m_count;t++)this.m_flagsBuffer.data[t]&ki.k_noPressureFlags&&(this.m_accumulationBuffer[t]=0);if(this.m_allParticleFlags&ri.b2_staticPressureParticle){this.m_staticPressureBuffer;for(let t=0;t<this.m_count;t++)this.m_flagsBuffer.data[t]&ri.b2_staticPressureParticle&&(this.m_accumulationBuffer[t]+=this.m_staticPressureBuffer[t])}let c=t.dt/(this.m_def.density*this.m_particleDiameter),u=this.GetParticleInvMass();for(let t=0;t<this.m_bodyContactBuffer.count;t++){let s=this.m_bodyContactBuffer.data[t],o=s.index,l=s.body,h=s.weight,d=s.mass,m=s.normal,p=i[o],f=this.m_accumulationBuffer[o]+a*h,_=r.A.MulSV(c*h*d*f,m,e);n[o].SelfMulSub(u,_),l.ApplyLinearImpulse(_,p,!0)}for(let t=0;t<this.m_contactBuffer.count;t++){let i=this.m_contactBuffer.data[t],s=i.indexA,o=i.indexB,a=i.weight,l=i.normal,u=this.m_accumulationBuffer[s]+this.m_accumulationBuffer[o],h=r.A.MulSV(c*a*u,l,e);n[s].SelfSub(h),n[o].SelfAdd(h)}}SolveDamping(t){let e=ki.SolveDamping_s_v,i=ki.SolveDamping_s_f,n=this.m_positionBuffer.data,s=this.m_velocityBuffer.data,o=this.m_def.dampingStrength,a=1/this.GetCriticalVelocity(t),l=this.GetParticleInvMass();for(let t=0;t<this.m_bodyContactBuffer.count;t++){let c=this.m_bodyContactBuffer.data[t],u=c.index,h=c.body,d=c.weight,m=c.mass,p=c.normal,f=n[u],_=r.A.SubVV(h.GetLinearVelocityFromWorldPoint(f,r.A.s_t0),s[u],e),g=r.A.DotVV(_,p);if(g<0){let t=Object(r.m)(o*d,Object(r.n)(-a*g,.5)),e=r.A.MulSV(t*m*g,p,i);s[u].SelfMulAdd(l,e),h.ApplyLinearImpulse(e.SelfNeg(),f,!0)}}for(let t=0;t<this.m_contactBuffer.count;t++){let n=this.m_contactBuffer.data[t],l=n.indexA,c=n.indexB,u=n.weight,h=n.normal,d=r.A.SubVV(s[c],s[l],e),m=r.A.DotVV(d,h);if(m<0){let t=Object(r.m)(o*u,Object(r.n)(-a*m,.5)),e=r.A.MulSV(t*m,h,i);s[l].SelfAdd(e),s[c].SelfSub(e)}}}SolveRigidDamping(){let t=ki.SolveRigidDamping_s_t0,e=ki.SolveRigidDamping_s_t1,i=ki.SolveRigidDamping_s_p,n=ki.SolveRigidDamping_s_v,s=[0],o=[0],a=[0],l=[0],c=[0],u=[0],h=this.m_positionBuffer.data,d=this.m_def.dampingStrength;for(let i=0;i<this.m_bodyContactBuffer.count;i++){let m=this.m_bodyContactBuffer.data[i],p=m.index,f=this.m_groupBuffer[p];if(this.IsRigidGroup(f)){let i=m.body,_=m.normal,g=m.weight,v=h[p],y=r.A.SubVV(i.GetLinearVelocityFromWorldPoint(v,t),f.GetLinearVelocityFromWorldPoint(v,e),n),x=r.A.DotVV(y,_);if(x<0){this.InitDampingParameterWithRigidGroupOrParticle(s,o,a,!0,f,p,v,_),this.InitDampingParameter(l,c,u,i.GetMass(),i.GetInertia()-i.GetMass()*i.GetLocalCenter().LengthSquared(),i.GetWorldCenter(),v,_);let t=d*Object(r.n)(g,1)*this.ComputeDampingImpulse(s[0],o[0],a[0],l[0],c[0],u[0],x);this.ApplyDamping(s[0],o[0],a[0],!0,f,p,t,_),i.ApplyLinearImpulse(r.A.MulSV(-t,_,r.A.s_t0),v,!0)}}}for(let m=0;m<this.m_contactBuffer.count;m++){let p=this.m_contactBuffer.data[m],f=p.indexA,_=p.indexB,g=p.normal,v=p.weight,y=this.m_groupBuffer[f],x=this.m_groupBuffer[_],b=this.IsRigidGroup(y),A=this.IsRigidGroup(x);if(y!==x&&(b||A)){let m=r.A.MidVV(h[f],h[_],i),p=r.A.SubVV(this.GetLinearVelocity(x,_,m,t),this.GetLinearVelocity(y,f,m,e),n),w=r.A.DotVV(p,g);if(w<0){this.InitDampingParameterWithRigidGroupOrParticle(s,o,a,b,y,f,m,g),this.InitDampingParameterWithRigidGroupOrParticle(l,c,u,A,x,_,m,g);let t=d*v*this.ComputeDampingImpulse(s[0],o[0],a[0],l[0],c[0],u[0],w);this.ApplyDamping(s[0],o[0],a[0],b,y,f,t,g),this.ApplyDamping(l[0],c[0],u[0],A,x,_,-t,g)}}}}SolveExtraDamping(){let t=ki.SolveExtraDamping_s_v,e=ki.SolveExtraDamping_s_f,i=this.m_velocityBuffer.data,n=this.m_positionBuffer.data,s=this.GetParticleInvMass();for(let o=0;o<this.m_bodyContactBuffer.count;o++){let a=this.m_bodyContactBuffer.data[o],l=a.index;if(this.m_flagsBuffer.data[l]&ki.k_extraDampingFlags){let o=a.body,c=a.mass,u=a.normal,h=n[l],d=r.A.SubVV(o.GetLinearVelocityFromWorldPoint(h,r.A.s_t0),i[l],t),m=r.A.DotVV(d,u);if(m<0){let t=r.A.MulSV(.5*c*m,u,e);i[l].SelfMulAdd(s,t),o.ApplyLinearImpulse(t.SelfNeg(),h,!0)}}}}SolveWall(){let t=this.m_velocityBuffer.data;for(let e=0;e<this.m_count;e++)this.m_flagsBuffer.data[e]&ri.b2_wallParticle&&t[e].SetZero()}SolveRigid(t){let e=ki.SolveRigid_s_position,i=ki.SolveRigid_s_rotation,n=ki.SolveRigid_s_transform,s=ki.SolveRigid_s_velocityTransform,o=this.m_positionBuffer.data,a=this.m_velocityBuffer.data;for(let l=this.m_groupList;l;l=l.GetNext())if(l.m_groupFlags&oi.b2_rigidParticleGroup){l.UpdateStatistics();let c=i;c.SetAngle(t.dt*l.m_angularVelocity);let u=r.A.AddVV(l.m_center,r.A.SubVV(r.A.MulSV(t.dt,l.m_linearVelocity,r.A.s_t0),r.t.MulRV(c,l.m_center,r.A.s_t1),r.A.s_t0),e),h=n;h.SetPositionRotation(u,c),r.z.MulXX(h,l.m_transform,l.m_transform);let d=s;d.p.x=t.inv_dt*h.p.x,d.p.y=t.inv_dt*h.p.y,d.q.s=t.inv_dt*h.q.s,d.q.c=t.inv_dt*(h.q.c-1);for(let t=l.m_firstIndex;t<l.m_lastIndex;t++)r.z.MulXV(d,o[t],a[t])}}SolveElastic(t){let e=ki.SolveElastic_s_pa,i=ki.SolveElastic_s_pb,n=ki.SolveElastic_s_pc,s=ki.SolveElastic_s_r,o=ki.SolveElastic_s_t0,a=this.m_positionBuffer.data,l=this.m_velocityBuffer.data,c=t.inv_dt*this.m_def.elasticStrength;for(let u=0;u<this.m_triadBuffer.count;u++){let h=this.m_triadBuffer.data[u];if(h.flags&ri.b2_elasticParticle){let u=h.indexA,d=h.indexB,m=h.indexC,p=h.pa,f=h.pb,_=h.pc,g=e.Copy(a[u]),v=i.Copy(a[d]),y=n.Copy(a[m]),x=l[u],b=l[d],A=l[m];g.SelfMulAdd(t.dt,x),v.SelfMulAdd(t.dt,b),y.SelfMulAdd(t.dt,A);let w=(g.x+v.x+y.x)/3,S=(g.y+v.y+y.y)/3;g.x-=w,g.y-=S,v.x-=w,v.y-=S,y.x-=w,y.y-=S;let C=s;C.s=r.A.CrossVV(p,g)+r.A.CrossVV(f,v)+r.A.CrossVV(_,y),C.c=r.A.DotVV(p,g)+r.A.DotVV(f,v)+r.A.DotVV(_,y);let B=C.s*C.s+C.c*C.c,V=Object(r.h)(B);isFinite(V)||(V=198177537e11),C.s*=V,C.c*=V;let M=c*h.strength;r.t.MulRV(C,p,o),r.A.SubVV(o,g,o),r.A.MulSV(M,o,o),x.SelfAdd(o),r.t.MulRV(C,f,o),r.A.SubVV(o,v,o),r.A.MulSV(M,o,o),b.SelfAdd(o),r.t.MulRV(C,_,o),r.A.SubVV(o,y,o),r.A.MulSV(M,o,o),A.SelfAdd(o)}}}SolveSpring(t){let e=ki.SolveSpring_s_pa,i=ki.SolveSpring_s_pb,n=ki.SolveSpring_s_d,s=ki.SolveSpring_s_f,o=this.m_positionBuffer.data,a=this.m_velocityBuffer.data,l=t.inv_dt*this.m_def.springStrength;for(let c=0;c<this.m_pairBuffer.count;c++){let u=this.m_pairBuffer.data[c];if(u.flags&ri.b2_springParticle){let c=u.indexA,h=u.indexB,d=e.Copy(o[c]),m=i.Copy(o[h]),p=a[c],f=a[h];d.SelfMulAdd(t.dt,p),m.SelfMulAdd(t.dt,f);let _=r.A.SubVV(m,d,n),g=u.distance,v=_.Length(),y=l*u.strength,x=r.A.MulSV(y*(g-v)/v,_,s);p.SelfSub(x),f.SelfAdd(x)}}}SolveTensile(t){let e=ki.SolveTensile_s_weightedNormal,i=ki.SolveTensile_s_s,n=ki.SolveTensile_s_f,o=this.m_velocityBuffer.data;this.m_accumulation2Buffer;for(let t=0;t<this.m_count;t++)this.m_accumulation2Buffer[t]=new r.A,this.m_accumulation2Buffer[t].SetZero();for(let t=0;t<this.m_contactBuffer.count;t++){let i=this.m_contactBuffer.data[t];if(i.flags&ri.b2_tensileParticle){let t=i.indexA,n=i.indexB,s=i.weight,o=i.normal,a=r.A.MulSV((1-s)*s,o,e);this.m_accumulation2Buffer[t].SelfSub(a),this.m_accumulation2Buffer[n].SelfAdd(a)}}let a=this.GetCriticalVelocity(t),l=this.m_def.surfaceTensionPressureStrength*a,c=this.m_def.surfaceTensionNormalStrength*a,u=s.A*a;for(let t=0;t<this.m_contactBuffer.count;t++){let e=this.m_contactBuffer.data[t];if(e.flags&ri.b2_tensileParticle){let t=e.indexA,s=e.indexB,a=e.weight,h=e.normal,d=this.m_weightBuffer[t]+this.m_weightBuffer[s],m=r.A.SubVV(this.m_accumulation2Buffer[s],this.m_accumulation2Buffer[t],i),p=Object(r.n)(l*(d-2)+c*r.A.DotVV(m,h),u)*a,f=r.A.MulSV(p,h,n);o[t].SelfSub(f),o[s].SelfAdd(f)}}}SolveViscous(){let t=ki.SolveViscous_s_v,e=ki.SolveViscous_s_f,i=this.m_positionBuffer.data,n=this.m_velocityBuffer.data,s=this.m_def.viscousStrength,o=this.GetParticleInvMass();for(let a=0;a<this.m_bodyContactBuffer.count;a++){let l=this.m_bodyContactBuffer.data[a],c=l.index;if(this.m_flagsBuffer.data[c]&ri.b2_viscousParticle){let a=l.body,u=l.weight,h=l.mass,d=i[c],m=r.A.SubVV(a.GetLinearVelocityFromWorldPoint(d,r.A.s_t0),n[c],t),p=r.A.MulSV(s*h*u,m,e);n[c].SelfMulAdd(o,p),a.ApplyLinearImpulse(p.SelfNeg(),d,!0)}}for(let i=0;i<this.m_contactBuffer.count;i++){let o=this.m_contactBuffer.data[i];if(o.flags&ri.b2_viscousParticle){let i=o.indexA,a=o.indexB,l=o.weight,c=r.A.SubVV(n[a],n[i],t),u=r.A.MulSV(s*l,c,e);n[i].SelfAdd(u),n[a].SelfSub(u)}}}SolveRepulsive(t){let e=ki.SolveRepulsive_s_f,i=this.m_velocityBuffer.data,n=this.m_def.repulsiveStrength*this.GetCriticalVelocity(t);for(let t=0;t<this.m_contactBuffer.count;t++){let s=this.m_contactBuffer.data[t];if(s.flags&ri.b2_repulsiveParticle){let t=s.indexA,o=s.indexB;if(this.m_groupBuffer[t]!==this.m_groupBuffer[o]){let a=s.weight,l=s.normal,c=r.A.MulSV(n*a,l,e);i[t].SelfSub(c),i[o].SelfAdd(c)}}}}SolvePowder(t){let e=ki.SolvePowder_s_f,i=this.m_positionBuffer.data,n=this.m_velocityBuffer.data,o=this.m_def.powderStrength*this.GetCriticalVelocity(t),a=1-s.O,l=this.GetParticleInvMass();for(let t=0;t<this.m_bodyContactBuffer.count;t++){let s=this.m_bodyContactBuffer.data[t],c=s.index;if(this.m_flagsBuffer.data[c]&ri.b2_powderParticle){let t=s.weight;if(t>a){let u=s.body,h=s.mass,d=i[c],m=s.normal,p=r.A.MulSV(o*h*(t-a),m,e);n[c].SelfMulSub(l,p),u.ApplyLinearImpulse(p,d,!0)}}}for(let t=0;t<this.m_contactBuffer.count;t++){let i=this.m_contactBuffer.data[t];if(i.flags&ri.b2_powderParticle){let t=i.weight;if(t>a){let s=i.indexA,l=i.indexB,c=i.normal,u=r.A.MulSV(o*(t-a),c,e);n[s].SelfSub(u),n[l].SelfAdd(u)}}}}SolveSolid(t){let e=ki.SolveSolid_s_f,i=this.m_velocityBuffer.data;this.m_depthBuffer=this.RequestBuffer(this.m_depthBuffer);let n=t.inv_dt*this.m_def.ejectionStrength;for(let t=0;t<this.m_contactBuffer.count;t++){let s=this.m_contactBuffer.data[t],o=s.indexA,a=s.indexB;if(this.m_groupBuffer[o]!==this.m_groupBuffer[a]){let t=s.weight,l=s.normal,c=this.m_depthBuffer[o]+this.m_depthBuffer[a],u=r.A.MulSV(n*c*t,l,e);i[o].SelfSub(u),i[a].SelfAdd(u)}}}SolveForce(t){let e=this.m_velocityBuffer.data,i=t.dt*this.GetParticleInvMass();for(let t=0;t<this.m_count;t++)e[t].SelfMulAdd(i,this.m_forceBuffer[t]);this.m_hasForce=!1}SolveColorMixing(){this.m_colorBuffer.data;const t=.5*this.m_def.colorMixingStrength;if(t)for(let e=0;e<this.m_contactBuffer.count;e++){let i=this.m_contactBuffer.data[e],n=i.indexA,s=i.indexB;if(this.m_flagsBuffer.data[n]&this.m_flagsBuffer.data[s]&ri.b2_colorMixingParticle){let e=this.m_colorBuffer.data[n],i=this.m_colorBuffer.data[s];o.MixColors(e,i,t)}}}SolveZombie(){let t=0,e=[];for(let t=0;t<this.m_count;t++)e[t]=s.t;e.length,this.m_count;let i=0;for(let n=0;n<this.m_count;n++){let r=this.m_flagsBuffer.data[n];if(r&ri.b2_zombieParticle){let t=this.m_world.m_destructionListener;if(r&ri.b2_destructionListenerParticle&&t&&t.SayGoodbyeParticle(this,n),this.m_handleIndexBuffer.data){let t=this.m_handleIndexBuffer.data[n];t&&(t.SetIndex(s.t),this.m_handleIndexBuffer.data[n]=null)}e[n]=s.t}else{if(e[n]=t,n!==t){if(this.m_handleIndexBuffer.data){let e=this.m_handleIndexBuffer.data[n];e&&e.SetIndex(t),this.m_handleIndexBuffer.data[t]=e}this.m_flagsBuffer.data[t]=this.m_flagsBuffer.data[n],this.m_lastBodyContactStepBuffer.data&&(this.m_lastBodyContactStepBuffer.data[t]=this.m_lastBodyContactStepBuffer.data[n]),this.m_bodyContactCountBuffer.data&&(this.m_bodyContactCountBuffer.data[t]=this.m_bodyContactCountBuffer.data[n]),this.m_consecutiveContactStepsBuffer.data&&(this.m_consecutiveContactStepsBuffer.data[t]=this.m_consecutiveContactStepsBuffer.data[n]),this.m_positionBuffer.data[t].Copy(this.m_positionBuffer.data[n]),this.m_velocityBuffer.data[t].Copy(this.m_velocityBuffer.data[n]),this.m_groupBuffer[t]=this.m_groupBuffer[n],this.m_hasForce&&this.m_forceBuffer[t].Copy(this.m_forceBuffer[n]),this.m_staticPressureBuffer&&(this.m_staticPressureBuffer[t]=this.m_staticPressureBuffer[n]),this.m_depthBuffer&&(this.m_depthBuffer[t]=this.m_depthBuffer[n]),this.m_colorBuffer.data&&this.m_colorBuffer.data[t].Copy(this.m_colorBuffer.data[n]),this.m_userDataBuffer.data&&(this.m_userDataBuffer.data[t]=this.m_userDataBuffer.data[n]),this.m_expirationTimeBuffer.data&&(this.m_expirationTimeBuffer.data[t]=this.m_expirationTimeBuffer.data[n])}t++,i|=r}}let n=t=>t.index<0,o=t=>t.indexA<0||t.indexB<0,a=t=>t.index<0,l=t=>t.indexA<0||t.indexB<0,c=t=>t.indexA<0||t.indexB<0||t.indexC<0;for(let t=0;t<this.m_proxyBuffer.count;t++){let i=this.m_proxyBuffer.data[t];i.index=e[i.index]}this.m_proxyBuffer.RemoveIf(n);for(let t=0;t<this.m_contactBuffer.count;t++){let i=this.m_contactBuffer.data[t];i.indexA=e[i.indexA],i.indexB=e[i.indexB]}this.m_contactBuffer.RemoveIf(o);for(let t=0;t<this.m_bodyContactBuffer.count;t++){let i=this.m_bodyContactBuffer.data[t];i.index=e[i.index]}this.m_bodyContactBuffer.RemoveIf(a);for(let t=0;t<this.m_pairBuffer.count;t++){let i=this.m_pairBuffer.data[t];i.indexA=e[i.indexA],i.indexB=e[i.indexB]}this.m_pairBuffer.RemoveIf(l);for(let t=0;t<this.m_triadBuffer.count;t++){let i=this.m_triadBuffer.data[t];i.indexA=e[i.indexA],i.indexB=e[i.indexB],i.indexC=e[i.indexC]}if(this.m_triadBuffer.RemoveIf(c),this.m_indexByExpirationTimeBuffer.data){let t=0;for(let i=0;i<this.m_count;i++){let n=e[this.m_indexByExpirationTimeBuffer.data[i]];n!==s.t&&(this.m_indexByExpirationTimeBuffer.data[t++]=n)}}for(let i=this.m_groupList;i;i=i.GetNext()){let n=t,s=0,o=!1;for(let t=i.m_firstIndex;t<i.m_lastIndex;t++){let i=e[t];i>=0?(n=Object(r.n)(n,i),s=Object(r.m)(s,i+1)):o=!0}n<s?(i.m_firstIndex=n,i.m_lastIndex=s,o&&i.m_groupFlags&oi.b2_solidParticleGroup&&this.SetGroupFlags(i,i.m_groupFlags|oi.b2_particleGroupNeedsUpdateDepth)):(i.m_firstIndex=0,i.m_lastIndex=0,i.m_groupFlags&oi.b2_particleGroupCanBeEmpty||this.SetGroupFlags(i,i.m_groupFlags|oi.b2_particleGroupWillBeDestroyed))}this.m_count=t,this.m_allParticleFlags=i,this.m_needsUpdateAllParticleFlags=!1;for(let t=this.m_groupList;t;){let e=t.GetNext();t.m_groupFlags&oi.b2_particleGroupWillBeDestroyed&&this.DestroyParticleGroup(t),t=e}}SolveLifetimes(t){this.m_expirationTimeBuffer.data,this.m_indexByExpirationTimeBuffer.data,this.m_timeElapsed=this.LifetimeToExpirationTime(t.dt);let e=this.GetQuantizedTimeElapsed(),i=this.m_expirationTimeBuffer.data,n=this.m_indexByExpirationTimeBuffer.data,s=this.GetParticleCount();if(this.m_expirationTimeBufferRequiresSorting){_i(n,0,s,(t,e)=>{let n=i[t],s=i[e],r=n<=0;return r===s<=0?n>s:r}),this.m_expirationTimeBufferRequiresSorting=!1}for(let t=s-1;t>=0;--t){let s=n[t],r=i[s];if(e<r||r<=0)break;this.DestroyParticle(s)}}RotateBuffer(t,e,i){if(t!==e&&e!==i){if(bi(this.m_flagsBuffer.data,t,e,i),this.m_lastBodyContactStepBuffer.data&&bi(this.m_lastBodyContactStepBuffer.data,t,e,i),this.m_bodyContactCountBuffer.data&&bi(this.m_bodyContactCountBuffer.data,t,e,i),this.m_consecutiveContactStepsBuffer.data&&bi(this.m_consecutiveContactStepsBuffer.data,t,e,i),bi(this.m_positionBuffer.data,t,e,i),bi(this.m_velocityBuffer.data,t,e,i),bi(this.m_groupBuffer,t,e,i),this.m_hasForce&&bi(this.m_forceBuffer,t,e,i),this.m_staticPressureBuffer&&bi(this.m_staticPressureBuffer,t,e,i),this.m_depthBuffer&&bi(this.m_depthBuffer,t,e,i),this.m_colorBuffer.data&&bi(this.m_colorBuffer.data,t,e,i),this.m_userDataBuffer.data&&bi(this.m_userDataBuffer.data,t,e,i),this.m_handleIndexBuffer.data){bi(this.m_handleIndexBuffer.data,t,e,i);for(let e=t;e<i;++e){let t=this.m_handleIndexBuffer.data[e];t&&t.SetIndex(n(t.GetIndex()))}}if(this.m_expirationTimeBuffer.data){bi(this.m_expirationTimeBuffer.data,t,e,i);let s=this.GetParticleCount(),r=this.m_indexByExpirationTimeBuffer.data;for(let t=0;t<s;++t)r[t]=n(r[t])}for(let t=0;t<this.m_proxyBuffer.count;t++){let e=this.m_proxyBuffer.data[t];e.index=n(e.index)}for(let t=0;t<this.m_contactBuffer.count;t++){let e=this.m_contactBuffer.data[t];e.indexA=n(e.indexA),e.indexB=n(e.indexB)}for(let t=0;t<this.m_bodyContactBuffer.count;t++){let e=this.m_bodyContactBuffer.data[t];e.index=n(e.index)}for(let t=0;t<this.m_pairBuffer.count;t++){let e=this.m_pairBuffer.data[t];e.indexA=n(e.indexA),e.indexB=n(e.indexB)}for(let t=0;t<this.m_triadBuffer.count;t++){let e=this.m_triadBuffer.data[t];e.indexA=n(e.indexA),e.indexB=n(e.indexB),e.indexC=n(e.indexC)}for(let t=this.m_groupList;t;t=t.GetNext())t.m_firstIndex=n(t.m_firstIndex),t.m_lastIndex=n(t.m_lastIndex-1)+1}function n(n){return n<t?n:n<e?n+i-e:n<i?n+t-e:n}}GetCriticalVelocity(t){return this.m_particleDiameter*t.inv_dt}GetCriticalVelocitySquared(t){let e=this.GetCriticalVelocity(t);return e*e}GetCriticalPressure(t){return this.m_def.density*this.GetCriticalVelocitySquared(t)}GetParticleStride(){return s.O*this.m_particleDiameter}GetParticleMass(){let t=this.GetParticleStride();return this.m_def.density*t*t}GetParticleInvMass(){let t=this.m_inverseDiameter*(1/s.O);return this.m_inverseDensity*t*t}GetFixtureContactFilter(){return this.m_allParticleFlags&ri.b2_fixtureContactFilterParticle?this.m_world.m_contactManager.m_contactFilter:null}GetParticleContactFilter(){return this.m_allParticleFlags&ri.b2_particleContactFilterParticle?this.m_world.m_contactManager.m_contactFilter:null}GetFixtureContactListener(){return this.m_allParticleFlags&ri.b2_fixtureContactListenerParticle?this.m_world.m_contactManager.m_contactListener:null}GetParticleContactListener(){return this.m_allParticleFlags&ri.b2_particleContactListenerParticle?this.m_world.m_contactManager.m_contactListener:null}SetUserOverridableBuffer(t,e,i){t.data=e,t.userSuppliedCapacity=i}SetGroupFlags(t,e){let i=t.m_groupFlags;(i^e)&oi.b2_solidParticleGroup&&(e|=oi.b2_particleGroupNeedsUpdateDepth),i&~e&&(this.m_needsUpdateAllGroupFlags=!0),~this.m_allGroupFlags&e&&(e&oi.b2_solidParticleGroup&&(this.m_depthBuffer=this.RequestBuffer(this.m_depthBuffer)),this.m_allGroupFlags|=e),t.m_groupFlags=e}static BodyContactCompare(t,e){return t.index===e.index?t.weight>e.weight:t.index<e.index}RemoveSpuriousBodyContacts(){_i(this.m_bodyContactBuffer.data,0,this.m_bodyContactBuffer.count,ki.BodyContactCompare);let t=ki.RemoveSpuriousBodyContacts_s_n,e=ki.RemoveSpuriousBodyContacts_s_pos,i=ki.RemoveSpuriousBodyContacts_s_normal;const n=this;let o=-1,a=0;this.m_bodyContactBuffer.count=vi(this.m_bodyContactBuffer.data,l=>{if(l.index!==o&&(a=0,o=l.index),a++>3)return!0;let c=t.Copy(l.normal);c.SelfMul(n.m_particleDiameter*(1-l.weight));let u=r.A.AddVV(n.m_positionBuffer.data[l.index],c,e);if(!l.fixture.TestPoint(u)){let t=l.fixture.GetShape().GetChildCount();for(let e=0;e<t;e++){let t=i;if(l.fixture.ComputeDistance(u,t,e)<s.v)return!1}return!0}return!1},this.m_bodyContactBuffer.count)}DetectStuckParticle(t){this.m_stuckThreshold<=0||(++this.m_bodyContactCountBuffer.data[t],2===this.m_bodyContactCountBuffer.data[t]&&(++this.m_consecutiveContactStepsBuffer.data[t],this.m_consecutiveContactStepsBuffer.data[t]>this.m_stuckThreshold&&(this.m_stuckParticleBuffer.data[this.m_stuckParticleBuffer.Append()]=t)),this.m_lastBodyContactStepBuffer.data[t]=this.m_timestamp)}ValidateParticleIndex(t){return t>=0&&t<this.GetParticleCount()&&t!==s.t}GetQuantizedTimeElapsed(){return Math.floor(this.m_timeElapsed/4294967296)}LifetimeToExpirationTime(t){return this.m_timeElapsed+Math.floor(t/this.m_def.lifetimeGranularity*4294967296)}ForceCanBeApplied(t){return!(t&ri.b2_wallParticle)}PrepareForceBuffer(){if(!this.m_hasForce){for(let t=0;t<this.m_count;t++)this.m_forceBuffer[t].SetZero();this.m_hasForce=!0}}IsRigidGroup(t){return null!==t&&0!=(t.m_groupFlags&oi.b2_rigidParticleGroup)}GetLinearVelocity(t,e,i,n){return this.IsRigidGroup(t)?t.GetLinearVelocityFromWorldPoint(i,n):n.Copy(this.m_velocityBuffer.data[e])}InitDampingParameter(t,e,i,n,s,o,a,l){t[0]=n>0?1/n:0,e[0]=s>0?1/s:0,i[0]=r.A.CrossVV(r.A.SubVV(a,o,r.A.s_t0),l)}InitDampingParameterWithRigidGroupOrParticle(t,e,i,n,s,r,o,a){if(n)this.InitDampingParameter(t,e,i,s.GetMass(),s.GetInertia(),s.GetCenter(),o,a);else{let n=this.m_flagsBuffer.data[r];this.InitDampingParameter(t,e,i,n&ri.b2_wallParticle?0:this.GetParticleMass(),0,o,o,a)}}ComputeDampingImpulse(t,e,i,n,s,r,o){let a=t+e*i*i+n+s*r*r;return a>0?o/a:0}ApplyDamping(t,e,i,n,s,r,o,a){n?(s.m_linearVelocity.SelfMulAdd(o*t,a),s.m_angularVelocity+=o*i*e):this.m_velocityBuffer.data[r].SelfMulAdd(o*t,a)}}ki.xTruncBits=12,ki.yTruncBits=12,ki.tagBits=32,ki.yOffset=1<<ki.yTruncBits-1,ki.yShift=ki.tagBits-ki.yTruncBits,ki.xShift=ki.tagBits-ki.yTruncBits-ki.xTruncBits,ki.xScale=1<<ki.xShift,ki.xOffset=ki.xScale*(1<<ki.xTruncBits-1),ki.yMask=(1<<ki.yTruncBits)-1<<ki.yShift,ki.xMask=~ki.yMask,ki.DestroyParticlesInShape_s_aabb=new m.a,ki.CreateParticleGroup_s_transform=new r.z,ki.ComputeCollisionEnergy_s_v=new r.A,ki.QueryShapeAABB_s_aabb=new m.a,ki.QueryPointAABB_s_aabb=new m.a,ki.RayCast_s_aabb=new m.a,ki.RayCast_s_p=new r.A,ki.RayCast_s_v=new r.A,ki.RayCast_s_n=new r.A,ki.RayCast_s_point=new r.A,ki.k_pairFlags=ri.b2_springParticle,ki.k_triadFlags=ri.b2_elasticParticle,ki.k_noPressureFlags=ri.b2_powderParticle|ri.b2_tensileParticle,ki.k_extraDampingFlags=ri.b2_staticPressureParticle,ki.k_barrierWallFlags=ri.b2_barrierParticle|ri.b2_wallParticle,ki.CreateParticlesStrokeShapeForGroup_s_edge=new zt,ki.CreateParticlesStrokeShapeForGroup_s_d=new r.A,ki.CreateParticlesStrokeShapeForGroup_s_p=new r.A,ki.CreateParticlesFillShapeForGroup_s_aabb=new m.a,ki.CreateParticlesFillShapeForGroup_s_p=new r.A,ki.UpdatePairsAndTriads_s_dab=new r.A,ki.UpdatePairsAndTriads_s_dbc=new r.A,ki.UpdatePairsAndTriads_s_dca=new r.A,ki.AddContact_s_d=new r.A,ki.UpdateBodyContacts_s_aabb=new m.a,ki.Solve_s_subStep=new Je,ki.SolveCollision_s_aabb=new m.a,ki.SolveGravity_s_gravity=new r.A,ki.SolveBarrier_s_aabb=new m.a,ki.SolveBarrier_s_va=new r.A,ki.SolveBarrier_s_vb=new r.A,ki.SolveBarrier_s_pba=new r.A,ki.SolveBarrier_s_vba=new r.A,ki.SolveBarrier_s_vc=new r.A,ki.SolveBarrier_s_pca=new r.A,ki.SolveBarrier_s_vca=new r.A,ki.SolveBarrier_s_qba=new r.A,ki.SolveBarrier_s_qca=new r.A,ki.SolveBarrier_s_dv=new r.A,ki.SolveBarrier_s_f=new r.A,ki.SolvePressure_s_f=new r.A,ki.SolveDamping_s_v=new r.A,ki.SolveDamping_s_f=new r.A,ki.SolveRigidDamping_s_t0=new r.A,ki.SolveRigidDamping_s_t1=new r.A,ki.SolveRigidDamping_s_p=new r.A,ki.SolveRigidDamping_s_v=new r.A,ki.SolveExtraDamping_s_v=new r.A,ki.SolveExtraDamping_s_f=new r.A,ki.SolveRigid_s_position=new r.A,ki.SolveRigid_s_rotation=new r.t,ki.SolveRigid_s_transform=new r.z,ki.SolveRigid_s_velocityTransform=new r.z,ki.SolveElastic_s_pa=new r.A,ki.SolveElastic_s_pb=new r.A,ki.SolveElastic_s_pc=new r.A,ki.SolveElastic_s_r=new r.t,ki.SolveElastic_s_t0=new r.A,ki.SolveSpring_s_pa=new r.A,ki.SolveSpring_s_pb=new r.A,ki.SolveSpring_s_d=new r.A,ki.SolveSpring_s_f=new r.A,ki.SolveTensile_s_weightedNormal=new r.A,ki.SolveTensile_s_s=new r.A,ki.SolveTensile_s_f=new r.A,ki.SolveViscous_s_v=new r.A,ki.SolveViscous_s_f=new r.A,ki.SolveRepulsive_s_f=new r.A,ki.SolvePowder_s_f=new r.A,ki.SolveSolid_s_f=new r.A,ki.RemoveSpuriousBodyContacts_s_n=new r.A,ki.RemoveSpuriousBodyContacts_s_pos=new r.A,ki.RemoveSpuriousBodyContacts_s_normal=new r.A,function(t){t.UserOverridableBuffer=class{constructor(){this.data=null,this.userSuppliedCapacity=0}};t.Proxy=class{constructor(){this.index=s.t,this.tag=0}static CompareProxyProxy(t,e){return t.tag<e.tag}static CompareTagProxy(t,e){return t<e.tag}static CompareProxyTag(t,e){return t.tag<e}};t.InsideBoundsEnumerator=class{constructor(e,i,n,s,r){this.m_system=e,this.m_xLower=(i&t.xMask)>>>0,this.m_xUpper=(n&t.xMask)>>>0,this.m_yLower=(i&t.yMask)>>>0,this.m_yUpper=(n&t.yMask)>>>0,this.m_first=s,this.m_last=r,this.m_first,this.m_last}GetNext(){for(;this.m_first<this.m_last;){let e=(this.m_system.m_proxyBuffer.data[this.m_first].tag&t.xMask)>>>0;if(e>=this.m_xLower&&e<=this.m_xUpper)return this.m_system.m_proxyBuffer.data[this.m_first++].index;this.m_first++}return s.t}};t.ParticleListNode=class{constructor(){this.list=null,this.next=null,this.count=0,this.index=0}};t.FixedSetAllocator=class{Allocate(t,e){return e}Clear(){}GetCount(){return 0}Invalidate(t){}GetValidBuffer(){return[]}GetBuffer(){return[]}SetCount(t){}};t.FixtureParticle=class{constructor(t,e){this.second=s.t,this.first=t,this.second=e}};t.FixtureParticleSet=class extends t.FixedSetAllocator{Initialize(t,e){}Find(t){return s.t}};t.ParticlePair=class{constructor(t,e){this.first=s.t,this.second=s.t,this.first=t,this.second=e}};t.b2ParticlePairSet=class extends t.FixedSetAllocator{Initialize(t,e){}Find(t){return s.t}};t.ConnectionFilter=class{IsNecessary(t){return!0}ShouldCreatePair(t,e){return!0}ShouldCreateTriad(t,e,i){return!0}};t.DestroyParticlesInShapeCallback=class extends ze{constructor(t,e,i,n){super(),this.m_callDestructionListener=!1,this.m_destroyed=0,this.m_system=t,this.m_shape=e,this.m_xf=i,this.m_callDestructionListener=n,this.m_destroyed=0}ReportFixture(t){return!1}ReportParticle(t,e){return t===this.m_system&&(e>=0&&this.m_system.m_count,this.m_shape.TestPoint(this.m_xf,this.m_system.m_positionBuffer.data[e])&&(this.m_system.DestroyParticle(e,this.m_callDestructionListener),this.m_destroyed++),!0)}Destroyed(){return this.m_destroyed}};t.JoinParticleGroupsFilter=class extends t.ConnectionFilter{constructor(t){super(),this.m_threshold=0,this.m_threshold=t}ShouldCreatePair(t,e){return t<this.m_threshold&&this.m_threshold<=e||e<this.m_threshold&&this.m_threshold<=t}ShouldCreateTriad(t,e,i){return(t<this.m_threshold||e<this.m_threshold||i<this.m_threshold)&&(this.m_threshold<=t||this.m_threshold<=e||this.m_threshold<=i)}};t.CompositeShape=class extends Gt.b{constructor(t,e=t.length){super(Gt.c.e_unknown,0),this.m_shapeCount=0,this.m_shapes=t,this.m_shapeCount=e}Clone(){throw new Error}GetChildCount(){return 1}TestPoint(t,e){for(let i=0;i<this.m_shapeCount;i++)if(this.m_shapes[i].TestPoint(t,e))return!0;return!1}ComputeDistance(t,e,i,n){return 0}RayCast(t,e,i,n){return!1}ComputeAABB(t,e,i){let n=new m.a;t.lowerBound.x=+s.x,t.lowerBound.y=+s.x,t.upperBound.x=-s.x,t.upperBound.y=-s.x;for(let i=0;i<this.m_shapeCount;i++){let s=this.m_shapes[i].GetChildCount();for(let r=0;r<s;r++){let s=n;this.m_shapes[i].ComputeAABB(s,e,r),t.Combine1(s)}}}ComputeMass(t,e){}SetupDistanceProxy(t,e){}ComputeSubmergedArea(t,e,i,n){return 0}Dump(t){}};t.ReactiveFilter=class extends t.ConnectionFilter{constructor(t){super(),this.m_flagsBuffer=t}IsNecessary(t){return 0!=(this.m_flagsBuffer.data[t]&ri.b2_reactiveParticle)}};class e extends wi{constructor(t,e){super(t),this.m_contactFilter=e}ShouldCollideFixtureParticle(t,e,i){if(this.m_contactFilter){if(this.m_system.GetFlagsBuffer()[i]&ri.b2_fixtureContactFilterParticle)return this.m_contactFilter.ShouldCollideFixtureParticle(t,this.m_system,i)}return!0}ReportFixtureAndParticle(e,i,n){let s=t.UpdateBodyContactsCallback.ReportFixtureAndParticle_s_n,o=t.UpdateBodyContactsCallback.ReportFixtureAndParticle_s_rp,a=this.m_system.m_positionBuffer.data[n],l=s,c=e.ComputeDistance(a,l,i);if(c<this.m_system.m_particleDiameter&&this.ShouldCollideFixtureParticle(e,this.m_system,n)){let t=e.GetBody(),i=t.GetWorldCenter(),s=t.GetMass(),u=t.GetInertia()-s*t.GetLocalCenter().LengthSquared(),h=s>0?1/s:0,d=u>0?1/u:0,m=this.m_system.m_flagsBuffer.data[n]&ri.b2_wallParticle?0:this.m_system.GetParticleInvMass(),p=r.A.SubVV(a,i,o),f=r.A.CrossVV(p,l),_=m+h+d*f*f,g=this.m_system.m_bodyContactBuffer.data[this.m_system.m_bodyContactBuffer.Append()];g.index=n,g.body=t,g.fixture=e,g.weight=1-c*this.m_system.m_inverseDiameter,g.normal.Copy(l.SelfNeg()),g.mass=_>0?1/_:0,this.m_system.DetectStuckParticle(n)}}}e.ReportFixtureAndParticle_s_n=new r.A,e.ReportFixtureAndParticle_s_rp=new r.A,t.UpdateBodyContactsCallback=e;class i extends wi{constructor(t,e){super(t),this.m_step=e}ReportFixtureAndParticle(e,i,n){let o=t.SolveCollisionCallback.ReportFixtureAndParticle_s_p1,a=t.SolveCollisionCallback.ReportFixtureAndParticle_s_output,l=t.SolveCollisionCallback.ReportFixtureAndParticle_s_input,c=t.SolveCollisionCallback.ReportFixtureAndParticle_s_p,u=t.SolveCollisionCallback.ReportFixtureAndParticle_s_v,h=t.SolveCollisionCallback.ReportFixtureAndParticle_s_f,d=e.GetBody(),m=this.m_system.m_positionBuffer.data[n],p=this.m_system.m_velocityBuffer.data[n],f=a,_=l;if(0===this.m_system.m_iterationIndex){let t=r.z.MulTXV(d.m_xf0,m,o);e.GetShape().GetType()===Gt.c.e_circleShape&&(t.SelfSub(d.GetLocalCenter()),r.t.MulRV(d.m_xf0.q,t,t),r.t.MulTRV(d.m_xf.q,t,t),t.SelfAdd(d.GetLocalCenter())),r.z.MulXV(d.m_xf,t,_.p1)}else _.p1.Copy(m);if(r.A.AddVMulSV(m,this.m_step.dt,p,_.p2),_.maxFraction=1,e.RayCast(f,_,i)){let t=f.normal,e=c;e.x=(1-f.fraction)*_.p1.x+f.fraction*_.p2.x+s.v*t.x,e.y=(1-f.fraction)*_.p1.y+f.fraction*_.p2.y+s.v*t.y;let i=u;i.x=this.m_step.inv_dt*(e.x-m.x),i.y=this.m_step.inv_dt*(e.y-m.y),this.m_system.m_velocityBuffer.data[n].Copy(i);let r=h;r.x=this.m_step.inv_dt*this.m_system.GetParticleMass()*(p.x-i.x),r.y=this.m_step.inv_dt*this.m_system.GetParticleMass()*(p.y-i.y),this.m_system.ParticleApplyForce(n,r)}}ReportParticle(t,e){return!1}}i.ReportFixtureAndParticle_s_p1=new r.A,i.ReportFixtureAndParticle_s_output=new m.m,i.ReportFixtureAndParticle_s_input=new m.l,i.ReportFixtureAndParticle_s_p=new r.A,i.ReportFixtureAndParticle_s_v=new r.A,i.ReportFixtureAndParticle_s_f=new r.A,t.SolveCollisionCallback=i}(ki||(ki={}));class Pi{constructor(t){this.m_newFixture=!1,this.m_locked=!1,this.m_clearForces=!0,this.m_contactManager=new Ue,this.m_bodyList=null,this.m_jointList=null,this.m_particleSystemList=null,this.m_bodyCount=0,this.m_jointCount=0,this.m_gravity=new r.A,this.m_allowSleep=!0,this.m_destructionListener=null,this.m_debugDraw=null,this.m_inv_dt0=0,this.m_warmStarting=!0,this.m_continuousPhysics=!0,this.m_subStepping=!1,this.m_stepComplete=!0,this.m_profile=new We,this.m_island=new si,this.s_stack=[],this.m_controllerList=null,this.m_controllerCount=0,this.m_gravity.Copy(t)}SetDestructionListener(t){this.m_destructionListener=t}SetContactFilter(t){this.m_contactManager.m_contactFilter=t}SetContactListener(t){this.m_contactManager.m_contactListener=t}SetDebugDraw(t){this.m_debugDraw=t}CreateBody(t){if(this.IsLocked())return null;const e=new Qt(t,this);return e.m_prev=null,e.m_next=this.m_bodyList,this.m_bodyList&&(this.m_bodyList.m_prev=e),this.m_bodyList=e,++this.m_bodyCount,e}DestroyBody(t){if(this.IsLocked())return;let e=t.m_jointList;for(;e;){const i=e;e=e.next,this.m_destructionListener&&this.m_destructionListener.SayGoodbyeJoint(i.joint),this.DestroyJoint(i.joint),t.m_jointList=e}t.m_jointList=null;let i=t.m_controllerList;for(;i;){const e=i;i=i.nextController,e.controller.RemoveBody(t)}let n=t.m_contactList;for(;n;){const t=n;n=n.next,this.m_contactManager.Destroy(t.contact)}t.m_contactList=null;let s=t.m_fixtureList;for(;s;){const e=s;s=s.m_next,this.m_destructionListener&&this.m_destructionListener.SayGoodbyeFixture(e),e.DestroyProxies(this.m_contactManager.m_broadPhase),e.Destroy(),t.m_fixtureList=s,t.m_fixtureCount-=1}t.m_fixtureList=null,t.m_fixtureCount=0,t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t===this.m_bodyList&&(this.m_bodyList=t.m_next),--this.m_bodyCount}CreateJoint(t){if(this.IsLocked())return null;const e=Be.Create(t,null);e.m_prev=null,e.m_next=this.m_jointList,this.m_jointList&&(this.m_jointList.m_prev=e),this.m_jointList=e,++this.m_jointCount,e.m_edgeA.prev=null,e.m_edgeA.next=e.m_bodyA.m_jointList,e.m_bodyA.m_jointList&&(e.m_bodyA.m_jointList.prev=e.m_edgeA),e.m_bodyA.m_jointList=e.m_edgeA,e.m_edgeB.prev=null,e.m_edgeB.next=e.m_bodyB.m_jointList,e.m_bodyB.m_jointList&&(e.m_bodyB.m_jointList.prev=e.m_edgeB),e.m_bodyB.m_jointList=e.m_edgeB;const i=t.bodyA,n=t.bodyB;if(!t.collideConnected){let t=n.GetContactList();for(;t;)t.other===i&&t.contact.FlagForFiltering(),t=t.next}return e}DestroyJoint(t){if(this.IsLocked())return;const e=t.m_collideConnected;t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t===this.m_jointList&&(this.m_jointList=t.m_next);const i=t.m_bodyA,n=t.m_bodyB;if(i.SetAwake(!0),n.SetAwake(!0),t.m_edgeA.prev&&(t.m_edgeA.prev.next=t.m_edgeA.next),t.m_edgeA.next&&(t.m_edgeA.next.prev=t.m_edgeA.prev),t.m_edgeA===i.m_jointList&&(i.m_jointList=t.m_edgeA.next),t.m_edgeA.prev=null,t.m_edgeA.next=null,t.m_edgeB.prev&&(t.m_edgeB.prev.next=t.m_edgeB.next),t.m_edgeB.next&&(t.m_edgeB.next.prev=t.m_edgeB.prev),t.m_edgeB===n.m_jointList&&(n.m_jointList=t.m_edgeB.next),t.m_edgeB.prev=null,t.m_edgeB.next=null,Be.Destroy(t,null),--this.m_jointCount,!e){let t=n.GetContactList();for(;t;)t.other===i&&t.contact.FlagForFiltering(),t=t.next}}CreateParticleSystem(t){if(this.IsLocked())return null;const e=new ki(t,this);return e.m_prev=null,e.m_next=this.m_particleSystemList,this.m_particleSystemList&&(this.m_particleSystemList.m_prev=e),this.m_particleSystemList=e,e}DestroyParticleSystem(t){this.IsLocked()||(t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),t===this.m_particleSystemList&&(this.m_particleSystemList=t.m_next))}CalculateReasonableParticleIterations(t){if(null===this.m_particleSystemList)return 1;return li(this.m_gravity.Length(),function(t){let e=s.x;for(let i=t.GetParticleSystemList();null!==i;i=i.m_next)e=Object(r.n)(e,i.GetRadius());return e}(this),t)}Step(t,e,i,n=this.CalculateReasonableParticleIterations(t)){const s=Pi.Step_s_stepTimer.Reset();this.m_newFixture&&(this.m_contactManager.FindNewContacts(),this.m_newFixture=!1),this.m_locked=!0;const r=Pi.Step_s_step;r.dt=t,r.velocityIterations=e,r.positionIterations=i,r.particleIterations=n,r.inv_dt=t>0?1/t:0,r.dtRatio=this.m_inv_dt0*t,r.warmStarting=this.m_warmStarting;const o=Pi.Step_s_timer.Reset();if(this.m_contactManager.Collide(),this.m_profile.collide=o.GetMilliseconds(),this.m_stepComplete&&r.dt>0){const t=Pi.Step_s_timer.Reset();for(let t=this.m_particleSystemList;t;t=t.m_next)t.Solve(r);this.Solve(r),this.m_profile.solve=t.GetMilliseconds()}if(this.m_continuousPhysics&&r.dt>0){const t=Pi.Step_s_timer.Reset();this.SolveTOI(r),this.m_profile.solveTOI=t.GetMilliseconds()}r.dt>0&&(this.m_inv_dt0=r.inv_dt),this.m_clearForces&&this.ClearForces(),this.m_locked=!1,this.m_profile.step=s.GetMilliseconds()}ClearForces(){for(let t=this.m_bodyList;t;t=t.m_next)t.m_force.SetZero(),t.m_torque=0}DrawParticleSystem(t){const e=t.GetParticleCount();if(e){const i=t.GetRadius(),n=t.GetPositionBuffer();if(t.m_colorBuffer.data){const s=t.GetColorBuffer();this.m_debugDraw.DrawParticles(n,i,s,e)}else this.m_debugDraw.DrawParticles(n,i,null,e)}}DrawDebugData(){if(null===this.m_debugDraw)return;const t=this.m_debugDraw.GetFlags(),e=Pi.DrawDebugData_s_color.SetRGB(0,0,0);if(t&n.e_shapeBit)for(let t=this.m_bodyList;t;t=t.m_next){const i=t.m_xf;this.m_debugDraw.PushTransform(i);for(let i=t.GetFixtureList();i;i=i.m_next)t.IsActive()?t.GetType()===Ut.b2_staticBody?(e.SetRGB(.5,.9,.5),this.DrawShape(i,e)):t.GetType()===Ut.b2_kinematicBody?(e.SetRGB(.5,.5,.9),this.DrawShape(i,e)):t.IsAwake()?(e.SetRGB(.9,.7,.7),this.DrawShape(i,e)):(e.SetRGB(.6,.6,.6),this.DrawShape(i,e)):(e.SetRGB(.5,.5,.3),this.DrawShape(i,e));this.m_debugDraw.PopTransform(i)}if(t&n.e_particleBit)for(let t=this.m_particleSystemList;t;t=t.m_next)this.DrawParticleSystem(t);if(t&n.e_jointBit)for(let t=this.m_jointList;t;t=t.m_next)this.DrawJoint(t);if(t&n.e_aabbBit){e.SetRGB(.9,.3,.9);const t=this.m_contactManager.m_broadPhase,i=Pi.DrawDebugData_s_vs;for(let n=this.m_bodyList;n;n=n.m_next)if(n.IsActive())for(let s=n.GetFixtureList();s;s=s.m_next)for(let n=0;n<s.m_proxyCount;++n){const r=s.m_proxies[n],o=t.GetFatAABB(r.treeNode);i[0].Set(o.lowerBound.x,o.lowerBound.y),i[1].Set(o.upperBound.x,o.lowerBound.y),i[2].Set(o.upperBound.x,o.upperBound.y),i[3].Set(o.lowerBound.x,o.upperBound.y),this.m_debugDraw.DrawPolygon(i,4,e)}}if(t&n.e_centerOfMassBit)for(let t=this.m_bodyList;t;t=t.m_next){const e=Pi.DrawDebugData_s_xf;e.q.Copy(t.m_xf.q),e.p.Copy(t.GetWorldCenter()),this.m_debugDraw.DrawTransform(e)}if(t&n.e_controllerBit)for(let t=this.m_controllerList;t;t=t.m_next)t.Draw(this.m_debugDraw)}QueryAABB(t,e){const i=this.m_contactManager.m_broadPhase;if(i.Query(function(e){const n=i.GetUserData(e).fixture;return t instanceof ze?t.ReportFixture(n):t(n)},e),t instanceof ze)for(let i=this.m_particleSystemList;i;i=i.m_next)t.ShouldQueryParticleSystem(i)&&i.QueryAABB(t,e)}QueryShape(t,e,i){const n=this.m_contactManager.m_broadPhase;const s=Pi.QueryShape_s_aabb;if(e.ComputeAABB(s,i,0),n.Query(function(s){const r=n.GetUserData(s).fixture;return!Object(m.o)(e,0,r.GetShape(),0,i,r.GetBody().GetTransform())||(t instanceof ze?t.ReportFixture(r):t(r))},s),t instanceof ze)for(let e=this.m_particleSystemList;e;e=e.m_next)t.ShouldQueryParticleSystem(e)&&e.QueryAABB(t,s)}QueryPoint(t,e){const i=this.m_contactManager.m_broadPhase;const n=Pi.QueryPoint_s_aabb;if(n.lowerBound.Set(e.x-s.v,e.y-s.v),n.upperBound.Set(e.x+s.v,e.y+s.v),i.Query(function(n){const s=i.GetUserData(n).fixture;return!s.TestPoint(e)||(t instanceof ze?t.ReportFixture(s):t(s))},n),t instanceof ze)for(let e=this.m_particleSystemList;e;e=e.m_next)t.ShouldQueryParticleSystem(e)&&e.QueryAABB(t,n)}RayCast(t,e,i){const n=this.m_contactManager.m_broadPhase;const s=Pi.RayCast_s_input;if(s.maxFraction=1,s.p1.Copy(e),s.p2.Copy(i),n.RayCast(function(s,r){const o=n.GetUserData(r),a=o.fixture,l=o.childIndex,c=Pi.RayCast_s_output;if(a.RayCast(c,s,l)){const n=c.fraction,s=Pi.RayCast_s_point;return s.Set((1-n)*e.x+n*i.x,(1-n)*e.y+n*i.y),t instanceof He?t.ReportFixture(a,s,c.normal,n):t(a,s,c.normal,n)}return s.maxFraction},s),t instanceof He)for(let n=this.m_particleSystemList;n;n=n.m_next)t.ShouldQueryParticleSystem(n)&&n.RayCast(t,e,i)}RayCastOne(t,e){let i=null,n=1;return this.RayCast(function(t,e,s,r){return r<n&&(n=r,i=t),n},t,e),i}RayCastAll(t,e,i=[]){return this.RayCast(function(t,e,n,s){return i.push(t),1},t,e),i}GetBodyList(){return this.m_bodyList}GetJointList(){return this.m_jointList}GetParticleSystemList(){return this.m_particleSystemList}GetContactList(){return this.m_contactManager.m_contactList}SetAllowSleeping(t){if(t!==this.m_allowSleep&&(this.m_allowSleep=t,!this.m_allowSleep))for(let t=this.m_bodyList;t;t=t.m_next)t.SetAwake(!0)}GetAllowSleeping(){return this.m_allowSleep}SetWarmStarting(t){this.m_warmStarting=t}GetWarmStarting(){return this.m_warmStarting}SetContinuousPhysics(t){this.m_continuousPhysics=t}GetContinuousPhysics(){return this.m_continuousPhysics}SetSubStepping(t){this.m_subStepping=t}GetSubStepping(){return this.m_subStepping}GetProxyCount(){return this.m_contactManager.m_broadPhase.GetProxyCount()}GetBodyCount(){return this.m_bodyCount}GetJointCount(){return this.m_jointCount}GetContactCount(){return this.m_contactManager.m_contactCount}GetTreeHeight(){return this.m_contactManager.m_broadPhase.GetTreeHeight()}GetTreeBalance(){return this.m_contactManager.m_broadPhase.GetTreeBalance()}GetTreeQuality(){return this.m_contactManager.m_broadPhase.GetTreeQuality()}SetGravity(t,e=!0){if(!r.A.IsEqualToV(this.m_gravity,t)&&(this.m_gravity.Copy(t),e))for(let t=this.m_bodyList;t;t=t.m_next)t.SetAwake(!0)}GetGravity(){return this.m_gravity}IsLocked(){return this.m_locked}SetAutoClearForces(t){this.m_clearForces=t}GetAutoClearForces(){return this.m_clearForces}ShiftOrigin(t){if(!this.IsLocked()){for(let e=this.m_bodyList;e;e=e.m_next)e.m_xf.p.SelfSub(t),e.m_sweep.c0.SelfSub(t),e.m_sweep.c.SelfSub(t);for(let e=this.m_jointList;e;e=e.m_next)e.ShiftOrigin(t);this.m_contactManager.m_broadPhase.ShiftOrigin(t)}}GetContactManager(){return this.m_contactManager}GetProfile(){return this.m_profile}Dump(t){if(this.m_locked)return;t("const g: b2Vec2 = new b2Vec2(%.15f, %.15f);\n",this.m_gravity.x,this.m_gravity.y),t("this.m_world.SetGravity(g);\n"),t("const bodies: b2Body[] = [];\n"),t("const joints: b2Joint[] = [];\n");let e=0;for(let i=this.m_bodyList;i;i=i.m_next)i.m_islandIndex=e,i.Dump(t),++e;e=0;for(let t=this.m_jointList;t;t=t.m_next)t.m_index=e,++e;for(let e=this.m_jointList;e;e=e.m_next)e.m_type!==Wt.e_gearJoint&&(t("{\n"),e.Dump(t),t("}\n"));for(let e=this.m_jointList;e;e=e.m_next)e.m_type===Wt.e_gearJoint&&(t("{\n"),e.Dump(t),t("}\n"))}DrawJoint(t){const e=t.GetBodyA(),i=t.GetBodyB(),n=e.m_xf,s=i.m_xf,r=n.p,o=s.p,a=t.GetAnchorA(Pi.DrawJoint_s_p1),l=t.GetAnchorB(Pi.DrawJoint_s_p2),c=Pi.DrawJoint_s_color.SetRGB(.5,.8,.8);switch(t.m_type){case Wt.e_distanceJoint:this.m_debugDraw.DrawSegment(a,l,c);break;case Wt.e_pulleyJoint:{const e=t,i=e.GetGroundAnchorA(),n=e.GetGroundAnchorB();this.m_debugDraw.DrawSegment(i,a,c),this.m_debugDraw.DrawSegment(n,l,c),this.m_debugDraw.DrawSegment(i,n,c)}break;case Wt.e_mouseJoint:this.m_debugDraw.DrawSegment(a,l,c);break;default:this.m_debugDraw.DrawSegment(r,a,c),this.m_debugDraw.DrawSegment(a,l,c),this.m_debugDraw.DrawSegment(o,l,c)}}DrawShape(t,e){const i=t.GetShape();switch(i.m_type){case Gt.c.e_circleShape:{const t=i,n=t.m_p,s=t.m_radius,o=r.A.UNITX;this.m_debugDraw.DrawSolidCircle(n,s,o,e)}break;case Gt.c.e_edgeShape:{const t=i,n=t.m_vertex1,s=t.m_vertex2;this.m_debugDraw.DrawSegment(n,s,e)}break;case Gt.c.e_chainShape:{const t=i,n=t.m_count,s=t.m_vertices;let r=s[0];this.m_debugDraw.DrawCircle(r,.05,e);for(let t=1;t<n;++t){const i=s[t];this.m_debugDraw.DrawSegment(r,i,e),this.m_debugDraw.DrawCircle(i,.05,e),r=i}}break;case Gt.c.e_polygonShape:{const t=i,n=t.m_count,s=t.m_vertices;this.m_debugDraw.DrawSolidPolygon(s,n,e)}}}Solve(t){for(let t=this.m_bodyList;t;t=t.m_next)t.m_xf0.Copy(t.m_xf);for(let e=this.m_controllerList;e;e=e.m_next)e.Step(t);this.m_profile.solveInit=0,this.m_profile.solveVelocity=0,this.m_profile.solvePosition=0;const e=this.m_island;e.Initialize(this.m_bodyCount,this.m_contactManager.m_contactCount,this.m_jointCount,null,this.m_contactManager.m_contactListener);for(let t=this.m_bodyList;t;t=t.m_next)t.m_islandFlag=!1;for(let t=this.m_contactManager.m_contactList;t;t=t.m_next)t.m_islandFlag=!1;for(let t=this.m_jointList;t;t=t.m_next)t.m_islandFlag=!1;const i=this.s_stack;for(let n=this.m_bodyList;n;n=n.m_next){if(n.m_islandFlag)continue;if(!n.IsAwake()||!n.IsActive())continue;if(n.GetType()===Ut.b2_staticBody)continue;e.Clear();let s=0;for(i[s++]=n,n.m_islandFlag=!0;s>0;){const t=i[--s];if(e.AddBody(t),t.SetAwake(!0),t.GetType()!==Ut.b2_staticBody){for(let n=t.m_contactList;n;n=n.next){const t=n.contact;if(t.m_islandFlag)continue;if(!t.IsEnabled()||!t.IsTouching())continue;const r=t.m_fixtureA.m_isSensor,o=t.m_fixtureB.m_isSensor;if(r||o)continue;e.AddContact(t),t.m_islandFlag=!0;const a=n.other;a.m_islandFlag||(i[s++]=a,a.m_islandFlag=!0)}for(let n=t.m_jointList;n;n=n.next){if(n.joint.m_islandFlag)continue;const t=n.other;t.IsActive()&&(e.AddJoint(n.joint),n.joint.m_islandFlag=!0,t.m_islandFlag||(i[s++]=t,t.m_islandFlag=!0))}}}const r=new We;e.Solve(r,t,this.m_gravity,this.m_allowSleep),this.m_profile.solveInit+=r.solveInit,this.m_profile.solveVelocity+=r.solveVelocity,this.m_profile.solvePosition+=r.solvePosition;for(let t=0;t<e.m_bodyCount;++t){const i=e.m_bodies[t];i.GetType()===Ut.b2_staticBody&&(i.m_islandFlag=!1)}}for(let t=0;t<i.length&&i[t];++t)i[t]=null;const n=new l;for(let t=this.m_bodyList;t;t=t.m_next)t.m_islandFlag&&t.GetType()!==Ut.b2_staticBody&&t.SynchronizeFixtures();this.m_contactManager.FindNewContacts(),this.m_profile.broadphase=n.GetMilliseconds()}SolveTOI(t){const e=this.m_island;if(e.Initialize(2*s.H,s.H,0,null,this.m_contactManager.m_contactListener),this.m_stepComplete){for(let t=this.m_bodyList;t;t=t.m_next)t.m_islandFlag=!1,t.m_sweep.alpha0=0;for(let t=this.m_contactManager.m_contactList;t;t=t.m_next)t.m_toiFlag=!1,t.m_islandFlag=!1,t.m_toiCount=0,t.m_toi=1}for(;;){let i=null,n=1;for(let t=this.m_contactManager.m_contactList;t;t=t.m_next){if(!t.IsEnabled())continue;if(t.m_toiCount>s.G)continue;let e=1;if(t.m_toiFlag)e=t.m_toi;else{const i=t.GetFixtureA(),n=t.GetFixtureB();if(i.IsSensor()||n.IsSensor())continue;const s=i.GetBody(),o=n.GetBody(),a=s.m_type,l=o.m_type,c=s.IsAwake()&&a!==Ut.b2_staticBody,u=o.IsAwake()&&l!==Ut.b2_staticBody;if(!c&&!u)continue;const h=s.IsBullet()||a!==Ut.b2_dynamicBody,d=o.IsBullet()||l!==Ut.b2_dynamicBody;if(!h&&!d)continue;let m=s.m_sweep.alpha0;s.m_sweep.alpha0<o.m_sweep.alpha0?(m=o.m_sweep.alpha0,s.m_sweep.Advance(m)):o.m_sweep.alpha0<s.m_sweep.alpha0&&(m=s.m_sweep.alpha0,o.m_sweep.Advance(m));const p=t.GetChildIndexA(),f=t.GetChildIndexB(),_=Pi.SolveTOI_s_toi_input;_.proxyA.SetShape(i.GetShape(),p),_.proxyB.SetShape(n.GetShape(),f),_.sweepA.Copy(s.m_sweep),_.sweepB.Copy(o.m_sweep),_.tMax=1;const g=Pi.SolveTOI_s_toi_output;X(g,_);const v=g.t;e=g.state===R.e_touching?Object(r.n)(m+(1-m)*v,1):1,t.m_toi=e,t.m_toiFlag=!0}e<n&&(i=t,n=e)}if(null===i||1-10*s.r<n){this.m_stepComplete=!0;break}const o=i.GetFixtureA(),a=i.GetFixtureB(),l=o.GetBody(),c=a.GetBody(),u=Pi.SolveTOI_s_backup1.Copy(l.m_sweep),h=Pi.SolveTOI_s_backup2.Copy(c.m_sweep);if(l.Advance(n),c.Advance(n),i.Update(this.m_contactManager.m_contactListener),i.m_toiFlag=!1,++i.m_toiCount,!i.IsEnabled()||!i.IsTouching()){i.SetEnabled(!1),l.m_sweep.Copy(u),c.m_sweep.Copy(h),l.SynchronizeTransform(),c.SynchronizeTransform();continue}l.SetAwake(!0),c.SetAwake(!0),e.Clear(),e.AddBody(l),e.AddBody(c),e.AddContact(i),l.m_islandFlag=!0,c.m_islandFlag=!0,i.m_islandFlag=!0;for(let t=0;t<2;++t){const i=0===t?l:c;if(i.m_type===Ut.b2_dynamicBody)for(let t=i.m_contactList;t&&e.m_bodyCount!==e.m_bodyCapacity&&e.m_contactCount!==e.m_contactCapacity;t=t.next){const s=t.contact;if(s.m_islandFlag)continue;const r=t.other;if(r.m_type===Ut.b2_dynamicBody&&!i.IsBullet()&&!r.IsBullet())continue;const o=s.m_fixtureA.m_isSensor,a=s.m_fixtureB.m_isSensor;if(o||a)continue;const l=Pi.SolveTOI_s_backup.Copy(r.m_sweep);r.m_islandFlag||r.Advance(n),s.Update(this.m_contactManager.m_contactListener),s.IsEnabled()&&s.IsTouching()?(s.m_islandFlag=!0,e.AddContact(s),r.m_islandFlag||(r.m_islandFlag=!0,r.m_type!==Ut.b2_staticBody&&r.SetAwake(!0),e.AddBody(r))):(r.m_sweep.Copy(l),r.SynchronizeTransform())}}const d=Pi.SolveTOI_s_subStep;d.dt=(1-n)*t.dt,d.inv_dt=1/d.dt,d.dtRatio=1,d.positionIterations=20,d.velocityIterations=t.velocityIterations,d.particleIterations=t.particleIterations,d.warmStarting=!1,e.SolveTOI(d,l.m_islandIndex,c.m_islandIndex);for(let t=0;t<e.m_bodyCount;++t){const i=e.m_bodies[t];if(i.m_islandFlag=!1,i.m_type===Ut.b2_dynamicBody){i.SynchronizeFixtures();for(let t=i.m_contactList;t;t=t.next)t.contact.m_toiFlag=!1,t.contact.m_islandFlag=!1}}if(this.m_contactManager.FindNewContacts(),this.m_subStepping){this.m_stepComplete=!1;break}}}AddController(t){return t.m_world=this,t.m_next=this.m_controllerList,t.m_prev=null,this.m_controllerList&&(this.m_controllerList.m_prev=t),this.m_controllerList=t,++this.m_controllerCount,t}RemoveController(t){return t.m_prev&&(t.m_prev.m_next=t.m_next),t.m_next&&(t.m_next.m_prev=t.m_prev),this.m_controllerList===t&&(this.m_controllerList=t.m_next),--this.m_controllerCount,t.m_prev=null,t.m_next=null,t.m_world=null,t}}Pi.Step_s_step=new Je,Pi.Step_s_stepTimer=new l,Pi.Step_s_timer=new l,Pi.DrawDebugData_s_color=new o(0,0,0),Pi.DrawDebugData_s_vs=r.A.MakeArray(4),Pi.DrawDebugData_s_xf=new r.z,Pi.QueryShape_s_aabb=new m.a,Pi.QueryPoint_s_aabb=new m.a,Pi.RayCast_s_input=new m.l,Pi.RayCast_s_output=new m.m,Pi.RayCast_s_point=new r.A,Pi.DrawJoint_s_p1=new r.A,Pi.DrawJoint_s_p2=new r.A,Pi.DrawJoint_s_color=new o(.5,.8,.8),Pi.SolveTOI_s_subStep=new Je,Pi.SolveTOI_s_backup=new r.y,Pi.SolveTOI_s_backup1=new r.y,Pi.SolveTOI_s_backup2=new r.y,Pi.SolveTOI_s_toi_input=new L,Pi.SolveTOI_s_toi_output=new O;class Ii{constructor(){this.vertices=[],this.count=0,this.masses=[],this.gravity=new r.A(0,0),this.damping=.1,this.k2=.9,this.k3=.1}}class Di{constructor(){this.m_count=0,this.m_ps=null,this.m_p0s=null,this.m_vs=null,this.m_ims=null,this.m_Ls=null,this.m_as=null,this.m_gravity=new r.A,this.m_damping=0,this.m_k2=1,this.m_k3=.1}GetVertexCount(){return this.m_count}GetVertices(){return this.m_ps}Initialize(t){this.m_count=t.count,this.m_ps=r.A.MakeArray(this.m_count),this.m_p0s=r.A.MakeArray(this.m_count),this.m_vs=r.A.MakeArray(this.m_count),this.m_ims=Object(s.g)(this.m_count);for(let e=0;e<this.m_count;++e){this.m_ps[e].Copy(t.vertices[e]),this.m_p0s[e].Copy(t.vertices[e]),this.m_vs[e].SetZero();const i=t.masses[e];this.m_ims[e]=i>0?1/i:0}const e=this.m_count-1,i=this.m_count-2;this.m_Ls=Object(s.g)(e),this.m_as=Object(s.g)(i);for(let t=0;t<e;++t){const e=this.m_ps[t],i=this.m_ps[t+1];this.m_Ls[t]=r.A.DistanceVV(e,i)}for(let t=0;t<i;++t){const e=this.m_ps[t],i=this.m_ps[t+1],n=this.m_ps[t+2],s=r.A.SubVV(i,e,r.A.s_t0),o=r.A.SubVV(n,i,r.A.s_t1),a=r.A.CrossVV(s,o),l=r.A.DotVV(s,o);this.m_as[t]=Object(r.d)(a,l)}this.m_gravity.Copy(t.gravity),this.m_damping=t.damping,this.m_k2=t.k2,this.m_k3=t.k3}Step(t,e){if(0===t)return;const i=Math.exp(-t*this.m_damping);for(let e=0;e<this.m_count;++e)this.m_p0s[e].Copy(this.m_ps[e]),this.m_ims[e]>0&&this.m_vs[e].SelfMulAdd(t,this.m_gravity),this.m_vs[e].SelfMul(i),this.m_ps[e].SelfMulAdd(t,this.m_vs[e]);for(let t=0;t<e;++t)this.SolveC2(),this.SolveC3(),this.SolveC2();const n=1/t;for(let t=0;t<this.m_count;++t)r.A.MulSV(n,r.A.SubVV(this.m_ps[t],this.m_p0s[t],r.A.s_t0),this.m_vs[t])}SolveC2(){const t=this.m_count-1;for(let e=0;e<t;++e){const t=this.m_ps[e],i=this.m_ps[e+1],n=r.A.SubVV(i,t,Di.s_d),s=n.Normalize(),o=this.m_ims[e],a=this.m_ims[e+1];if(o+a===0)continue;const l=o/(o+a),c=a/(o+a);t.SelfMulSub(this.m_k2*l*(this.m_Ls[e]-s),n),i.SelfMulAdd(this.m_k2*c*(this.m_Ls[e]-s),n)}}SetAngle(t){const e=this.m_count-2;for(let i=0;i<e;++i)this.m_as[i]=t}SolveC3(){const t=this.m_count-2;for(let e=0;e<t;++e){const t=this.m_ps[e],i=this.m_ps[e+1],n=this.m_ps[e+2],o=this.m_ims[e],a=this.m_ims[e+1],l=this.m_ims[e+2],c=r.A.SubVV(i,t,Di.s_d1),u=r.A.SubVV(n,i,Di.s_d2),h=c.LengthSquared(),d=u.LengthSquared();if(h*d==0)continue;const m=r.A.CrossVV(c,u),p=r.A.DotVV(c,u);let f=Object(r.d)(m,p);const _=r.A.MulSV(-1/h,c.SelfSkew(),Di.s_Jd1),g=r.A.MulSV(1/d,u.SelfSkew(),Di.s_Jd2),v=r.A.NegV(_,Di.s_J1),y=r.A.SubVV(_,g,Di.s_J2),x=g;let b=o*r.A.DotVV(v,v)+a*r.A.DotVV(y,y)+l*r.A.DotVV(x,x);if(0===b)continue;b=1/b;let A=f-this.m_as[e];for(;A>s.P;)A=(f-=2*s.P)-this.m_as[e];for(;A<-s.P;)A=(f+=2*s.P)-this.m_as[e];const w=-this.m_k3*b*A;t.SelfMulAdd(o*w,v),i.SelfMulAdd(a*w,y),n.SelfMulAdd(l*w,x)}}Draw(t){const e=new o(.4,.5,.7);for(let i=0;i<this.m_count-1;++i)t.DrawSegment(this.m_ps[i],this.m_ps[i+1],e)}}Di.s_d=new r.A,Di.s_d1=new r.A,Di.s_d2=new r.A,Di.s_Jd1=new r.A,Di.s_Jd2=new r.A,Di.s_J1=new r.A,Di.s_J2=new r.A,i.d(e,"b2Assert",function(){return s.b}),i.d(e,"b2_maxFloat",function(){return s.x}),i.d(e,"b2_epsilon",function(){return s.r}),i.d(e,"b2_epsilon_sq",function(){return s.s}),i.d(e,"b2_pi",function(){return s.P}),i.d(e,"b2_maxManifoldPoints",function(){return s.z}),i.d(e,"b2_maxPolygonVertices",function(){return s.D}),i.d(e,"b2_aabbExtension",function(){return s.k}),i.d(e,"b2_aabbMultiplier",function(){return s.l}),i.d(e,"b2_linearSlop",function(){return s.v}),i.d(e,"b2_angularSlop",function(){return s.n}),i.d(e,"b2_polygonRadius",function(){return s.Q}),i.d(e,"b2_maxSubSteps",function(){return s.G}),i.d(e,"b2_maxTOIContacts",function(){return s.H}),i.d(e,"b2_velocityThreshold",function(){return s.T}),i.d(e,"b2_maxLinearCorrection",function(){return s.y}),i.d(e,"b2_maxAngularCorrection",function(){return s.w}),i.d(e,"b2_maxTranslation",function(){return s.I}),i.d(e,"b2_maxTranslationSquared",function(){return s.J}),i.d(e,"b2_maxRotation",function(){return s.E}),i.d(e,"b2_maxRotationSquared",function(){return s.F}),i.d(e,"b2_baumgarte",function(){return s.p}),i.d(e,"b2_toiBaumgarte",function(){return s.S}),i.d(e,"b2_invalidParticleIndex",function(){return s.t}),i.d(e,"b2_maxParticleIndex",function(){return s.B}),i.d(e,"b2_particleStride",function(){return s.O}),i.d(e,"b2_minParticleWeight",function(){return s.N}),i.d(e,"b2_maxParticlePressure",function(){return s.C}),i.d(e,"b2_maxParticleForce",function(){return s.A}),i.d(e,"b2_maxTriadDistance",function(){return s.K}),i.d(e,"b2_maxTriadDistanceSquared",function(){return s.L}),i.d(e,"b2_minParticleSystemBufferCapacity",function(){return s.M}),i.d(e,"b2_barrierCollisionTime",function(){return s.o}),i.d(e,"b2_timeToSleep",function(){return s.R}),i.d(e,"b2_linearSleepTolerance",function(){return s.u}),i.d(e,"b2_angularSleepTolerance",function(){return s.m}),i.d(e,"b2Alloc",function(){return s.a}),i.d(e,"b2Free",function(){return s.c}),i.d(e,"b2Log",function(){return s.d}),i.d(e,"b2Version",function(){return s.j}),i.d(e,"b2_version",function(){return s.U}),i.d(e,"b2_changelist",function(){return s.q}),i.d(e,"b2ParseInt",function(){return s.h}),i.d(e,"b2ParseUInt",function(){return s.i}),i.d(e,"b2MakeArray",function(){return s.e}),i.d(e,"b2MakeNullArray",function(){return s.f}),i.d(e,"b2MakeNumberArray",function(){return s.g}),i.d(e,"b2_pi_over_180",function(){return r.E}),i.d(e,"b2_180_over_pi",function(){return r.D}),i.d(e,"b2_two_pi",function(){return r.F}),i.d(e,"b2Abs",function(){return r.a}),i.d(e,"b2Min",function(){return r.n}),i.d(e,"b2Max",function(){return r.m}),i.d(e,"b2Clamp",function(){return r.e}),i.d(e,"b2Swap",function(){return r.x}),i.d(e,"b2IsValid",function(){return r.j}),i.d(e,"b2Sq",function(){return r.v}),i.d(e,"b2InvSqrt",function(){return r.h}),i.d(e,"b2Sqrt",function(){return r.w}),i.d(e,"b2Pow",function(){return r.p}),i.d(e,"b2DegToRad",function(){return r.g}),i.d(e,"b2RadToDeg",function(){return r.q}),i.d(e,"b2Cos",function(){return r.f}),i.d(e,"b2Sin",function(){return r.u}),i.d(e,"b2Acos",function(){return r.b}),i.d(e,"b2Asin",function(){return r.c}),i.d(e,"b2Atan2",function(){return r.d}),i.d(e,"b2NextPowerOfTwo",function(){return r.o}),i.d(e,"b2IsPowerOfTwo",function(){return r.i}),i.d(e,"b2Random",function(){return r.r}),i.d(e,"b2RandomRange",function(){return r.s}),i.d(e,"b2Vec2",function(){return r.A}),i.d(e,"b2Vec2_zero",function(){return r.B}),i.d(e,"b2Vec3",function(){return r.C}),i.d(e,"b2Mat22",function(){return r.k}),i.d(e,"b2Mat33",function(){return r.l}),i.d(e,"b2Rot",function(){return r.t}),i.d(e,"b2Transform",function(){return r.z}),i.d(e,"b2Sweep",function(){return r.y}),i.d(e,"b2Color",function(){return o}),i.d(e,"b2DrawFlags",function(){return n}),i.d(e,"b2Draw",function(){return a}),i.d(e,"b2Timer",function(){return l}),i.d(e,"b2Counter",function(){return c}),i.d(e,"b2GrowableStack",function(){return u}),i.d(e,"b2BlockAllocator",function(){return h}),i.d(e,"b2StackAllocator",function(){return d}),i.d(e,"b2ContactFeatureType",function(){return m.e}),i.d(e,"b2ContactFeature",function(){return m.d}),i.d(e,"b2ContactID",function(){return m.f}),i.d(e,"b2ManifoldPoint",function(){return m.i}),i.d(e,"b2ManifoldType",function(){return m.j}),i.d(e,"b2Manifold",function(){return m.h}),i.d(e,"b2WorldManifold",function(){return m.p}),i.d(e,"b2PointState",function(){return m.k}),i.d(e,"b2GetPointStates",function(){return m.g}),i.d(e,"b2ClipVertex",function(){return m.c}),i.d(e,"b2RayCastInput",function(){return m.l}),i.d(e,"b2RayCastOutput",function(){return m.m}),i.d(e,"b2AABB",function(){return m.a}),i.d(e,"b2TestOverlapAABB",function(){return m.n}),i.d(e,"b2ClipSegmentToLine",function(){return m.b}),i.d(e,"b2TestOverlapShape",function(){return m.o}),i.d(e,"b2DistanceProxy",function(){return p.d}),i.d(e,"b2SimplexCache",function(){return p.f}),i.d(e,"b2DistanceInput",function(){return p.b}),i.d(e,"b2DistanceOutput",function(){return p.c}),i.d(e,"b2_gjkCalls",function(){return p.h}),i.d(e,"b2_gjkIters",function(){return p.i}),i.d(e,"b2_gjkMaxIters",function(){return p.j}),i.d(e,"b2_gjk_reset",function(){return p.k}),i.d(e,"b2SimplexVertex",function(){return p.g}),i.d(e,"b2Simplex",function(){return p.e}),i.d(e,"b2Distance",function(){return p.a}),i.d(e,"b2Pair",function(){return v}),i.d(e,"b2BroadPhase",function(){return y}),i.d(e,"b2PairLessThan",function(){return x}),i.d(e,"b2TreeNode",function(){return _}),i.d(e,"b2DynamicTree",function(){return g}),i.d(e,"b2_toiTime",function(){return b}),i.d(e,"b2_toiMaxTime",function(){return A}),i.d(e,"b2_toiCalls",function(){return w}),i.d(e,"b2_toiIters",function(){return S}),i.d(e,"b2_toiMaxIters",function(){return C}),i.d(e,"b2_toiRootIters",function(){return B}),i.d(e,"b2_toiMaxRootIters",function(){return V}),i.d(e,"b2_toi_reset",function(){return M}),i.d(e,"b2TOIInput",function(){return L}),i.d(e,"b2TOIOutputState",function(){return R}),i.d(e,"b2TOIOutput",function(){return O}),i.d(e,"b2SeparationFunctionType",function(){return F}),i.d(e,"b2SeparationFunction",function(){return j}),i.d(e,"b2TimeOfImpact",function(){return X}),i.d(e,"b2CollideCircles",function(){return K}),i.d(e,"b2CollidePolygonAndCircle",function(){return nt}),i.d(e,"b2CollidePolygons",function(){return Bt}),i.d(e,"b2CollideEdgeAndCircle",function(){return $t}),i.d(e,"b2CollideEdgeAndPolygon",function(){return jt}),i.d(e,"b2MassData",function(){return Gt.a}),i.d(e,"b2ShapeType",function(){return Gt.c}),i.d(e,"b2Shape",function(){return Gt.b}),i.d(e,"b2CircleShape",function(){return Nt}),i.d(e,"b2PolygonShape",function(){return qt}),i.d(e,"b2EdgeShape",function(){return zt}),i.d(e,"b2ChainShape",function(){return Ht}),i.d(e,"b2Filter",function(){return Yt.a}),i.d(e,"b2FixtureDef",function(){return Yt.c}),i.d(e,"b2FixtureProxy",function(){return Yt.d}),i.d(e,"b2Fixture",function(){return Yt.b}),i.d(e,"b2BodyType",function(){return Ut}),i.d(e,"b2BodyDef",function(){return Xt}),i.d(e,"b2Body",function(){return Qt}),i.d(e,"b2World",function(){return Pi}),i.d(e,"b2DestructionListener",function(){return je}),i.d(e,"b2ContactFilter",function(){return Ge}),i.d(e,"b2ContactImpulse",function(){return Ne}),i.d(e,"b2ContactListener",function(){return qe}),i.d(e,"b2QueryCallback",function(){return ze}),i.d(e,"b2RayCastCallback",function(){return He}),i.d(e,"b2Island",function(){return si}),i.d(e,"b2Profile",function(){return We}),i.d(e,"b2TimeStep",function(){return Je}),i.d(e,"b2Position",function(){return Ye}),i.d(e,"b2Velocity",function(){return Xe}),i.d(e,"b2SolverData",function(){return Qe}),i.d(e,"b2ContactManager",function(){return Ue}),i.d(e,"b2MixFriction",function(){return Ve}),i.d(e,"b2MixRestitution",function(){return Me}),i.d(e,"b2ContactEdge",function(){return ke}),i.d(e,"b2Contact",function(){return Pe}),i.d(e,"b2ContactRegister",function(){return Fe}),i.d(e,"b2ContactFactory",function(){return Oe}),i.d(e,"b2VelocityConstraintPoint",function(){return Ze}),i.d(e,"b2ContactVelocityConstraint",function(){return Ke}),i.d(e,"b2ContactPositionConstraint",function(){return ti}),i.d(e,"b2ContactSolverDef",function(){return ei}),i.d(e,"b2PositionSolverManifold",function(){return ii}),i.d(e,"b2ContactSolver",function(){return ni}),i.d(e,"b2CircleContact",function(){return Ie}),i.d(e,"b2PolygonContact",function(){return De}),i.d(e,"b2PolygonAndCircleContact",function(){return Te}),i.d(e,"b2EdgeAndCircleContact",function(){return Ee}),i.d(e,"b2EdgeAndPolygonContact",function(){return $e}),i.d(e,"b2ChainAndCircleContact",function(){return Le}),i.d(e,"b2ChainAndPolygonContact",function(){return Re}),i.d(e,"b2JointType",function(){return Wt}),i.d(e,"b2LimitState",function(){return Jt}),i.d(e,"b2Jacobian",function(){return Zt}),i.d(e,"b2JointEdge",function(){return Kt}),i.d(e,"b2JointDef",function(){return te}),i.d(e,"b2Joint",function(){return ee}),i.d(e,"b2JointFactory",function(){return Be}),i.d(e,"b2AreaJointDef",function(){return se}),i.d(e,"b2AreaJoint",function(){return re}),i.d(e,"b2DistanceJointDef",function(){return ie}),i.d(e,"b2DistanceJoint",function(){return ne}),i.d(e,"b2FrictionJointDef",function(){return oe}),i.d(e,"b2FrictionJoint",function(){return ae}),i.d(e,"b2GearJointDef",function(){return le}),i.d(e,"b2GearJoint",function(){return ce}),i.d(e,"b2MotorJointDef",function(){return ue}),i.d(e,"b2MotorJoint",function(){return he}),i.d(e,"b2MouseJointDef",function(){return de}),i.d(e,"b2MouseJoint",function(){return me}),i.d(e,"b2PrismaticJointDef",function(){return pe}),i.d(e,"b2PrismaticJoint",function(){return fe}),i.d(e,"b2_minPulleyLength",function(){return 2}),i.d(e,"b2PulleyJointDef",function(){return _e}),i.d(e,"b2PulleyJoint",function(){return ge}),i.d(e,"b2RevoluteJointDef",function(){return ve}),i.d(e,"b2RevoluteJoint",function(){return ye}),i.d(e,"b2RopeJointDef",function(){return xe}),i.d(e,"b2RopeJoint",function(){return be}),i.d(e,"b2WeldJointDef",function(){return Ae}),i.d(e,"b2WeldJoint",function(){return we}),i.d(e,"b2WheelJointDef",function(){return Se}),i.d(e,"b2WheelJoint",function(){return Ce}),i.d(e,"b2ParticleFlag",function(){return ri}),i.d(e,"b2ParticleDef",function(){return ai}),i.d(e,"b2CalculateParticleIterations",function(){return li}),i.d(e,"b2ParticleHandle",function(){return ci}),i.d(e,"b2ParticleGroupFlag",function(){return oi}),i.d(e,"b2ParticleGroupDef",function(){return ui}),i.d(e,"b2ParticleGroup",function(){return hi}),i.d(e,"b2GrowableBuffer",function(){return Ai}),i.d(e,"b2FixtureParticleQueryCallback",function(){return wi}),i.d(e,"b2ParticleContact",function(){return Si}),i.d(e,"b2ParticleBodyContact",function(){return Ci}),i.d(e,"b2ParticlePair",function(){return Bi}),i.d(e,"b2ParticleTriad",function(){return Vi}),i.d(e,"b2ParticleSystemDef",function(){return Mi}),i.d(e,"b2ParticleSystem",function(){return ki}),i.d(e,"b2RopeDef",function(){return Ii}),i.d(e,"b2Rope",function(){return Di})},function(t,e){},function(t,e){},function(t,e,i){"use strict";i.r(e),i.d(e,"FairyDustBall",function(){return a}),i.d(e,"FairyDustBallHit",function(){return l}),i.d(e,"FairyDust",function(){return c}),i.d(e,"_FairyDust",function(){return u});var n=i(6),s=(i(47),i(66)),r=i(91);class o extends r.b{constructor(){super(),this.scale=0}}class a extends r.a{constructor(t,e){super(t,e),this.x=1e3,this.y=-80,this.renderer=e["ball"+t.scale].clone()}create(t){this.$physics={state:{}},super.create(t)}get _BallDefinition(){return o}}class l extends s.a{constructor(t,e){super()}}class c extends r.c{constructor(t,e){super(t,e)}invoke(){const t=this._raw.s,e=this._raw.s2,i=this._raw.v,s=this._raw.v2,r=this._raw.w,o=this._raw.w2,l=this._raw.u;let c=this._raw.x;for(let u=0,h=n.a.randInt(r,r+o);u<h;u++){c+=n.a.nextInt(c);let r=new a({scale:n.a.nextInt(3),createDelay:l,moveSpeed:i+n.a.nextInt(s),angle:c+n.a.randInt(t,e)},this.animations);$gv.SceneObjectMgr.addToScene(10,r)}}get _anima_name_list(){return["ball0","ball1","ball2"]}get _base_path(){return"/Skill/MobSkill/238/level"}}class u extends c{constructor(t,e){super(t,e)}load(t){this._raw||this._url||(this._raw=window.MOB_SKILL_RAW[238].level[t],this._url=[this._base_path,t].join("/")),super.load(t)}}},function(t,e,i){i(189),t.exports=i(477)},function(t,e,i){"use strict";var n=i(166);i.n(n).a},function(t,e,i){(t.exports=i(22)(!1)).push([t.i,"\n.c1[data-v-06654c7d] {\r\n\tbackground: rgba(255, 0, 0, 0.25);\n}\n.c2[data-v-06654c7d] {\r\n\tbackground: rgba(0, 255, 0, 0.25);\n}\n.c3[data-v-06654c7d] {\r\n\tbackground: rgba(0, 0, 255, 0.25);\n}\n.outline[data-v-06654c7d] {\r\n\toutline: auto blue;\n}\n.block[data-v-06654c7d] {\r\n\twidth: calc(16em * 1.2);\r\n\theight: calc(9em * 1.2);\n}\n.block-sm[data-v-06654c7d] {\r\n\twidth: calc(16em * 0.6);\r\n\theight: calc(9em * 0.6);\n}\n.center_text_hr[data-v-06654c7d] {\r\n\ttext-align: center;\n}\n.center_frame[data-v-06654c7d] {\r\n\tposition: relative;\r\n\twidth: 100%;\r\n\theight: 100%;\n}\n.center[data-v-06654c7d] {\r\n\tposition: absolute;\r\n\tleft: 50%;\r\n\ttop: 50%;\r\n\ttransform: translate(-50%, -50%);\n}\n.center_frame_hr[data-v-06654c7d] {\r\n\tposition: relative;\r\n\twidth: 100%;\n}\n.center_hr[data-v-06654c7d] {\r\n\tposition: absolute;\r\n\tleft: 50%;\r\n\ttransform: translate(-50%, 0);\n}\n.text-fff-334[data-v-06654c7d] {\r\n\tfont-size: 13px;\r\n\tcolor: white;\r\n\ttext-shadow: 0 0 1px #334, -1px -1px #334, 1px -1px #334, -1px 1px #334, 1px 1px #334;\n}\n.table[data-v-06654c7d] {\r\n\tborder-collapse: collapse;\r\n\tborder-spacing: 0px;\r\n\tpadding: 0;\n}\n.table td[data-v-06654c7d] {\r\n\tpadding: 0;\n}\n.table.view[data-v-06654c7d] {\r\n\tline-height: 16px;\r\n\tborder-collapse: separate;\r\n\tborder-spacing: 1px;\r\n\tpadding: 1px;\n}\n.table.view td[data-v-06654c7d] {\r\n\tpadding: 1px;\n}\n.view-s[data-v-06654c7d] {\r\n\tposition: sticky;\r\n\ttop: 0px;\n}\n.chat-text[data-v-06654c7d] {\r\n\tline-height: initial;\r\n\tpadding-bottom: 0.2em;\r\n\tpadding-left: 4px;\r\n\theight: 1.2em;\r\n\tcolor: white;\r\n\tfont-family: monospace;\n}\r\n\r\n",""])},function(t,e,i){"use strict";var n=i(167);i.n(n).a},function(t,e,i){(t.exports=i(22)(!1)).push([t.i,"\n.ui-draggable {\n\tposition: absolute;\n\tdisplay: inline-block;\n\tuser-select: none;\n}\n",""])},function(t,e,i){"use strict";var n=i(168);i.n(n).a},function(t,e,i){(t.exports=i(22)(!1)).push([t.i,"\n.ui-dialog {\n\tborder-radius: 4px;\n}\n.ui-dialog > * {\n\t/*padding: 0.5em 1em;*/\n\t/*display: inline-block;*/\n\t/*width: 100%;*/\n}\n.ui-dialog > .header {\n\t/*cursor: default;*/\n\tpadding: 0.25em 0.5em;\n\tuser-select: none;\n\tbackground: #e9e9e9;\n\tborder: 1px solid #dddddd;\n\t/*border-top-left-radius: 4px;*/\n\t/*border-top-right-radius: 4px;*/\n\ttext-align: left;\n\tbox-sizing: border-box;\n}\n.ui-dialog > .header .header-buttons {\n\tdisplay: inline;\n\tright: 0.5em;\n\tmargin-right: 1px;\n\tposition: absolute;\n}\n.ui-dialog > .header .header-buttons > * {\n\tpadding: 0;\n\tborder: none;\n\tbackground: transparent;\n}\n.ui-dialog > .header .header-buttons > .header-button {\n}\n.ui-dialog > .header .header-buttons > .header-button:hover {\n\tbackground: lightgray;\n}\n.ui-dialog > .header .header-buttons > .header-button:active {\n\tbackground: lightblue;\n}\n.ui-dialog > .content {\n\tposition: relative;\n\tbackground: white;\n\tborder-left: 1px solid #dddddd;\n\tborder-right: 1px solid #dddddd;\n\tmin-width: 16em;\n\tmin-height: 10em;\n\t/*width: auto;*/\n\t/*height: auto;*/\n\toverflow: auto;\n\tbox-sizing: border-box;\n}\n.ui-dialog > .footer {\n\tpadding: 0.1em 0.25em;\n\tuser-select: none;\n\tbackground: #e9e9e9;\n\tborder: 1px solid #dddddd;\n\t/*border-bottom-left-radius: 4px;*/\n\t/*border-bottom-right-radius: 4px;*/\n\tbox-sizing: border-box;\n}\n",""])},function(t,e,i){"use strict";var n=i(169);i.n(n).a},function(t,e,i){(t.exports=i(22)(!1)).push([t.i,"\n.ui-dialog[data-v-66062b27] {\n\tborder: 0;\n\tborder-radius: 11px;\n\tbackground: transparent;\n}\n.header[data-v-66062b27] {\n\tpadding: 0;\n\tborder: 0;\n\tborder-radius: 11px;\n\tbackground: transparent;\n}\n.content[data-v-66062b27] {\n\tpadding: 0;\n\tborder: 0;\n\tbackground: transparent;\n}\n.footer[data-v-66062b27] {\n\tpadding: 0;\n\tborder: 0;\n\theight: 0;\n\tbackground: transparent;\n}\n",""])},function(t,e,i){"use strict";var n=i(170);i.n(n).a},function(t,e,i){(t.exports=i(22)(!1)).push([t.i,"\n.wnd-item-sn {\n\tdisplay: none;\n\tposition: absolute;\n\tright: 0;\n\tbottom: 0;\n\tcolor: #133;\n}\n",""])},function(t,e,i){"use strict";var n=i(171);i.n(n).a},function(t,e,i){(t.exports=i(22)(!1)).push([t.i,"\n.vscr-viewport[data-v-0eba351b] {\n\tposition: absolute;\n\tleft: 0;\n\ttop: 0;\n\twidth: 24em;\n\theight: 20em;\n\toverflow: hidden;\n}\n.vscr-container[data-v-0eba351b] {\n\twidth: 100%;\n\theight: 100%;\n\toverflow-y: scroll;\n\tbox-sizing: content-box;\n\tpadding-right: 11px;\n\tposition: absolute;\n}\n.vscr-scrollbar[data-v-0eba351b] {\n\tposition: absolute;\n\tright: 0;\n\ttop: 0;\n\twidth: 11px;\n\theight: 100%;\n}\n.vscr-track[data-v-0eba351b] {\n\tposition: absolute;\n\tleft: 0px;\n\ttop: 12px;\n\twidth: 11px;\n\theight: calc(100% - 24px);\n}\n.vscr-thumb[data-v-0eba351b] {\n\toutline: none;\n\tborder: none;\n\tpadding: 0;\n\twidth: 11px;\n\theight: 26px;\n}\n.vscr-decrement[data-v-0eba351b] {\n\toutline: none;\n\tborder: none;\n\tpadding: 0;\n\tposition: absolute;\n\tleft: 0px !important;\n\ttop: 0px !important;\n\twidth: 11px;\n\theight: 12px;\n}\n.vscr-increment[data-v-0eba351b] {\n\toutline: none;\n\tborder: none;\n\tpadding: 0;\n\tposition: absolute;\n\tleft: 0px !important;\n\ttop: unset !important;\n\tbottom: 0px !important;\n\twidth: 11px;\n\theight: 12px;\n}\n",""])},function(t,e,i){"use strict";var n=i(172);i.n(n).a},function(t,e,i){(t.exports=i(22)(!1)).push([t.i,"\n.wnd-item-slot-num[data-v-6b78163c] {\n\tcolor: gray;\n}\n.slots-viewport[data-v-6b78163c] {\n\tposition: absolute;\n\tleft: 0;\n\ttop: 0;\n\toverflow: hidden;\n}\n.slots-container[data-v-6b78163c] {\n\twidth: 100%;\n\theight: 100%;\n\toverflow-y: scroll;\n\tbox-sizing: content-box;\n\tpadding-right: 11px;\n\tposition: absolute;\n}\n.slot-menu[data-v-6b78163c] {\n\twidth: 80px;\n\theight: 48px;\n}\n.Bt[data-v-6b78163c] {\n\toutline: none;\n\tborder: none;\n}\n.BtRebate[data-v-6b78163c] {\n\tposition: absolute;\n\tleft: 0px;\n\ttop: 0px;\n\twidth: 61px;\n\theight: 16px;\n}\n.BtDelete[data-v-6b78163c] {\n\tposition: absolute;\n\tleft: 0px;\n\ttop: 0px;\n\twidth: 61px;\n\theight: 16px;\n}\n",""])},function(t,e,i){"use strict";var n=i(173);i.n(n).a},function(t,e,i){(t.exports=i(22)(!1)).push([t.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n/*.c1 {\n\tbackground: rgba(255,0,128,0.5);\n}\n.c2 {\n\tbackground: rgba(128,255,0,0.5);\n}\n.c3 {\n\tbackground: rgba(0,128,255,0.5);\n}*/\n#UIToolTip {\n\tdisplay: inline-block;\n\tz-index: 9999;\n}\n.UIToolTip {\n\tfont-family: PMingLiU !important;\n\tfont-size: 12px;\n\tcolor: #FFF;\n}\n.UIToolTip.frame {\n\tposition: relative;\n\twidth: 261px;\n\t/*height: 200px;*/\n\tdisplay: inline-block;\n}\n.UIToolTip.frame table, .UIToolTip.frame thead, .UIToolTip.frame tbody, .UIToolTip.frame tfoot, .UIToolTip.frame tr, .UIToolTip.frame td {\n\tborder-spacing: 0;\n\tborder-collapse: collapse;\n\tmargin: 0px;\n\tpadding: 0px;\n}\n.UIToolTip.border-head {\n\twidth: 261px;\n\theight: 13px;\n\tbackground: url(/images/UI/UIToolTip/Item/Frame/top);\n}\n.UIToolTip.border-left {\n\twidth: 13px;\n\theight: 3px;\n\tbackground-repeat: repeat-y;\n\tbackground: url(/images/UI/UIToolTip/Item/Frame2/w);\n}\n.UIToolTip.container {\n\twidth: 235px;\n\theight: auto;\n\tbackground: url(/images/UI/UIToolTip/Item/Frame2/c);\n}\n.UIToolTip.border-right {\n\twidth: 13px;\n\theight: 3px;\n\tbackground-repeat: repeat-y;\n\tbackground: url(/images/UI/UIToolTip/Item/Frame2/e);\n}\n.UIToolTip.border-foot {\n\twidth: 261px;\n\theight: 13px;\n\tbackground: url(/images/UI/UIToolTip/Item/Frame/bottom);\n}\n.UIToolTip.Item-Frame-cover {\n\tposition: absolute;\n\ttop: 3px;\n\tleft: 3px;\n\twidth: 100%;\n\theight: 100%;\n\tbackground: url(/images/UI/UIToolTip/Item/Frame/cover);\n\tbackground-repeat: no-repeat;\n}\n.UIToolTip.content {\n\tposition: relative;\n\tleft: 0;\n\ttop: 0;\n\twidth: 261px;\n\t/*height: 658px;*/\n\t/*background: url(/bg_UIToolTip.png);*/\n}\n.UIToolTip.title {\n\tfont-weight: bold;\n\tfont-size: 15px;\n\tletter-spacing: -0px;\n}\n.UIToolTip.dotline {\n\tbackground: url(/images/UI/UIToolTip/Item/Frame/dotline);\n\tbackground-repeat: no-repeat;\n}\n.UIToolTip.attack-digit {\n\tfloat: right;\n\tposition: relative;\n\ttop: 3px;\n}\n.UIToolTip.attack-digit > img {\n\tmargin-left: -3px;\n\tmargin-top: 1px;\n}\n.UIToolTip.attribute {\n\tmargin-left: 12px;\n\tmargin-right: 12px;\n}\n.UIToolTip.attribute > div {\n\tposition: relative;\n\twidth: 100%;\n\theight: 16px;\n}\n.UIToolTip.req-job img {\n\tposition: absolute;\n\tleft: 0px;\n\ttop: 0px;\n}\n.UIToolTip.attrLeft .UIToolTip.req-digit {\n\tposition: absolute;\n\tright: -1px;\n\twidth: 20px;\n\tdisplay: flex;\n\tflex-direction: row;\n}\n.UIToolTip.attrRight .UIToolTip.req-digit {\n\tposition: absolute;\n\tright: 1px;\n\twidth: 20px;\n}\n.UIToolTip.equip-req {\n\tposition: relative;\n\twidth: 100%;\n\theight: 6px;\n\tmargin-left: 2px;\n}\n.UIToolTip.equip-req > img {\n\tposition: absolute;\n}\n.UIToolTip.attrLeft .UIToolTip.req-digit > img {\n\tfloat: right;\n\tmargin-left: 1px;\n}\n.UIToolTip.attrRight .UIToolTip.req-digit > img {\n\tfloat: left;\n}\n.UIToolTip.equip-icon {\n\tposition: absolute;\n\tleft: 0px;\n\ttop: 0px;\n\tmargin: auto;\n\tbottom: 0;\n\tright: 0;\n}\n.debug-info {\n\tposition: absolute;\n\ttop: 0;\n\tright: 0;\n\ttransform: translateX(100%);\n\tdisplay: inline-block;\n\n\tbackground: rgba(255,255,255,0.7) !important;\n\tcolor: black !important;\n\n\tborder: double rgba(0,0,0,0.6);\n\tborder-radius: 10px;\n\tpadding: 0.5em 0.25em;\n\n\t/*\n\tfont-size: 1.2em;\n\ttext-shadow: rgb(255, 255, 255) 0 0 16px, rgb(255, 255, 255) 0 0 12px, rgb(255, 255, 255) 0 0 5px, rgb(255, 255, 255) 0 0 2px, rgba(0, 0, 0, 0.5) 0 0 1px;\n\t*/\n\ttext-shadow: 0 0 1px rgba(255, 255, 255, 0.5);\n\n\tfont-family: monospace;\n}\n.text-stroke {\n\ttext-shadow: -1px -1px black, 0px -1px black, 1px -1px black, -1px 0px black, 1px 0px black, -1px 1px black, -1px 0px black, 1px 1px black, 0 0 1px black;\n}\n",""])},function(t,e,i){"use strict";var n=i(174);i.n(n).a},function(t,e,i){(t.exports=i(22)(!1)).push([t.i,"\n.frame[data-v-40c717aa] {\n\tposition: relative;\n\tdisplay: inline-block;\n}\n.frame-warp[data-v-40c717aa] {\n\tposition: absolute;\n\twidth: 100%;\n\theight: 100%;\n\tline-height: 0;\n}\n.frame-inner[data-v-40c717aa] {\n\tborder-collapse: collapse;\n\tborder-spacing: 0;\n\twidth: 100%;\n\theight: 100%;\n}\n.frame-inner tr[data-v-40c717aa], .frame-inner td[data-v-40c717aa] {\n\tpadding: 0;\n}\n.content[data-v-40c717aa] {\n\tposition: relative;\n\tpadding: 7px;\n\tcolor: white;\n}\n.z1[data-v-40c717aa] {\n\tz-index: 1;\n}\n.z2[data-v-40c717aa] {\n    position: absolute;\n\tz-index: 2;\n}\n",""])},function(t,e,i){"use strict";var n=i(175);i.n(n).a},function(t,e,i){(t.exports=i(22)(!1)).push([t.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},function(t,e,i){"use strict";var n=i(176);i.n(n).a},function(t,e,i){(t.exports=i(22)(!1)).push([t.i,"\ndiv[data-v-550d0e17] {\n\tmargin: 0;\n\tpadding: 0;\n}\n.active[data-v-550d0e17] {\n\tbackground: linear-gradient(to bottom, #ffec64 5%, #ffab23 100%);\n\tbackground-color: #ffec64;\n}\n",""])},function(t,e,i){"use strict";var n=i(177);i.n(n).a},function(t,e,i){(t.exports=i(22)(!1)).push([t.i,"\n.menu-frame {\n\tuser-select: none;\n\tposition: absolute;\n\toverflow: hidden;\n}\n.menu {\n\tlist-style: none;\n\tmargin: 0;\n\tpadding: 0em 0em;\n\tbackground: #f0f9ff;\n\tborder: 1px solid darkgray;\n\tbox-shadow: 0.2em 0.2em 0.2em darkgray;\n}\n.menu > *:not(hr) {\n\tdisplay: block;\n\tpadding: 0.25em 1em 0.25em 1em;\n\tbackground: #f0f9ff;\n\tcursor: pointer;\n}\n.menu > *.disable {\n\tcursor: not-allowed;\n\tcolor: darkgray;\n}\n.menu > *:not(.disable):not(hr):hover {\n\tbackground: linear-gradient(to bottom, #4096ee 0%,#4096ee 100%);\n\tbox-shadow: inset 0 0 1px #1e69de;\n}\n.menu > *:not(.disable):not(hr):active {\n\tbackground: linear-gradient(to bottom, #6db3f2 0%,#54a3ee 50%,#3690f0 51%,#1e69de 100%);\n\tbox-shadow: inset 0 0 1px #1e69de;\n}\n.menu > hr {\n\tmargin: 0.2em 0;\n}\n.menu-enter-active {\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\twhite-space: nowrap;\n\twidth: 100%;\n\theight: 5em;\n\ttransition: .3s;\n}\n.menu-enter {\n\topacity: 0;\n\theight: 0;\n\twidth: 0;\n}\n.menu-leave-active {\n\ttransition: .4s;\n}\n.menu-leave-to {\n\topacity: 0;\n}\n",""])},function(t,e,i){"use strict";var n=i(178);i.n(n).a},function(t,e,i){(t.exports=i(22)(!1)).push([t.i,'\n.ui-button-group input[type="radio"] {\n\tdisplay: none;\n}\n.ui-button-group {\n\tdisplay: flex;\n}\n.ui-button-group button {\n\tflex: 1;\n\tpadding: 0;\n\toutline: none;\n}\n/*.ui-button-group button > * {\n\twidth: 100%;\n\theight: 100%;\n}*/\n',""])},function(t,e,i){"use strict";var n=i(179);i.n(n).a},function(t,e,i){(t.exports=i(22)(!1)).push([t.i,"\n.ui-equip-box .header {\n\ttext-align: left;\n}\n.ui-equip-box .header.btn-group, .ui-equip-box .header .pagination {\n\ttext-align: center;\n}\n.ui-equip-box .pagination {\n\theight: 2em;\n\toverflow: auto;\n\tfont-size: initial;\n}\n.ui-equip-box .item-list {\n\tlist-style: none;\n\tmargin: auto;\n\tpadding: 1px;\n}\n.ui-equip-box .item-list-sm {\n\tmargin: auto;\n\tpadding: 1px;\n\tline-height: 0;\n\ttext-align: center;\n}\n.ui-equip-box .item-detail {\n\twidth: 100%;\n\tborder-spacing: 1px;\n}\n.ui-equip-box .list-item, .ui-equip-box .list-item-sm {\n\tborder: 1px solid black;\n\tborder-bottom: none;\n\tbackground: linear-gradient(to bottom, rgba(240,249,255,0.9) 0%,rgba(203,235,255,0.9) 30%,rgba(201,234,255,0.9) 50%,rgba(203,235,255,0.9) 70%,rgba(203,235,255,0.9) 70%,rgba(203,235,255,0.9) 75%,rgba(240,249,255,0.9) 100%);\n}\n.ui-equip-box .list-item-sm {\n\tdisplay: inline-block;\n\tborder: none;\n\toutline: 1px solid black;\n\tbox-shadow: inset 1px 1px 0 lightblue;\n}\n.ui-equip-box .list-item:target, .ui-equip-box .list-item-sm:target {\n\tbox-shadow: inset 0 0 0 1px red;\n\toutline: 1px solid red;\n\tposition: relative;\n}\n.ui-equip-box .list-item:last-child {\n\tborder-bottom: 1px solid black;\n}\n.ui-equip-box .list-item:hover, .ui-equip-box .list-item-sm:hover {\n\tbackground: aliceblue;\n}\n.ui-equip-box .list-item:active, .ui-equip-box .list-item-sm:active {\n\tbackground: lightgray;\n}\n.ui-equip-box .item-name {\n\tuser-select: text;\n\twidth: 12em;\n\twhite-space: nowrap;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n}\n.ui-equip-box .list-item:target .item-name {\n\tcolor: red;\n\tfont-weight: bold;\n}\n.ui-equip-box .item-id {\n\tuser-select: text;\n}\n.ui-equip-box .item-icon-outer-frame {\n\tposition: relative;\n\twidth: 48px;\n\theight: 48px;\n\tuser-select: none;\n}\n.ui-equip-box .item-icon-frame > img, .ui-equip-box .item-icon-frame-sm > img {\n\tmax-width: 48px;\n\tmax-height: 48px;\n\tdisplay: block;\n\tmargin: auto;\n}\n.ui-equip-box .filters button:hover {\n\tborder: 1px solid blue;\n\tborder-radius: 3px;\n\tbackground: rgba(240, 249, 255, 0.9);\n}\n.ui-equip-box .filters button:hover, .face_color button:hover, .hair_color button:hover {\n\tfilter: contrast(150%) brightness(110%);\n}\n.ui-equip-box .filters button.active {\n\tborder-radius: 3px;\n\tbackground-color: hsl(203, 0%, 70%);\n}\n.ui-equip-box .filters button.active img {\n\tfilter: grayscale(100%) brightness(90%) contrast(150%);\n}\n.ui-equip-box .filters button.active:hover {\n\tborder: 1px solid blue;\n\tbackground: rgba(240, 249, 255, 0.9);\n}\n.ui-equip-box .filters button.active:hover {\n\tfilter: contrast(150%) grayscale(100%) brightness(110%);\n}\n.ui-equip-box .face_color, hair_color {\n\tborder: 1px solid transparent;\n\ttext-shadow: 0 0 5px white, 0 0 10px white, 0 0 1px black;\n}\n.ui-equip-box .face_color button.active, .hair_color button.active {\n\tborder: 1px solid white;\n\tbox-shadow: 0 0 0.5em 0 blue, 0 0 1em 0 yellow;\n\tcolor: white;\n\ttext-shadow: 0 0 0.1em black, 0 0 0.5em black;\n\tz-index: 1;\n}\n.ui-equip-box .button-area > * {\n\tpadding-top: 1px;\n}\n.ui-equip-box .button-area {\n\tuser-select: none;\n}\n.ui-equip-box .button-area button {\n\ttext-align: center;\n\tcursor: pointer;\n\tborder: 1px solid transparent;\n\ttext-shadow: 0 0 5px white, 0 0 10px white, 0 0 1px black;\n\tfont-family: 微軟正黑體;\n\tfont-weight: bold;\n\tfont-size: 1em;\n}\n.ui-equip-box .button-area button > img {\n\tdisplay: block;\n\tmargin: auto;\n}\n",""])},function(t,e,i){"use strict";var n=i(180);i.n(n).a},function(t,e,i){(t.exports=i(22)(!1)).push([t.i,"\ndiv.frame[data-v-678b2630] {\n\tdisplay: inline-block;\n\tposition: relative;\n\twidth: 64px;\n\theight: 96px;\n\n\tuser-select: none;\n\tbackground-position: 0px 0px, 10px 10px;\n\tbackground-size: 20px 20px;\n\tbackground-image: linear-gradient(45deg, #eee 25%, transparent 25%, transparent 75%, #eee 75%, #eee 100%),linear-gradient(45deg, #eee 25%, white 25%, white 75%, #eee 75%, #eee 100%);\n}\ndiv.center[data-v-678b2630] {\n\tposition: absolute;\n\tleft: 32px;\n\ttop: 96px;\n}\nimg[data-v-678b2630] {\n\tposition: absolute;\n}\n",""])},function(t,e,i){"use strict";var n=i(181);i.n(n).a},function(t,e,i){(t.exports=i(22)(!1)).push([t.i,"\n.ui-character-frame {\n\tdisplay: inline-block;\n\tposition: relative;\n\twidth: 64px;\n\theight: 96px;\n\n\tuser-select: none;\n\tbackground-position: 0px 0px, 10px 10px;\n\tbackground-size: 20px 20px;\n\tbackground-image: linear-gradient(45deg, #eee 25%, transparent 25%, transparent 75%, #eee 75%, #eee 100%),linear-gradient(45deg, #eee 25%, white 25%, white 75%, #eee 75%, #eee 100%);\n}\n.ui-character-center {\n\tposition: absolute;\n\tleft: 0;\n\ttop: 0;\n\twidth: 100%;\n\theight: 100%;\n\tbackground: rgba(0,0,0,0.2);\n\toverflow: hidden;\n\ttext-align: center;\n}\n.ui-character-text {\n\ttext-align: center;\n\tposition: absolute;\n\ttop: calc(50% - 0.5em);\n\tfont-weight: bold;\n\tcolor: white;\n\ttext-shadow: 0 0 1px black, 0 0 2px black, 0 0 5px black;\n}\n",""])},function(t,e,i){"use strict";var n=i(182);i.n(n).a},function(t,e,i){(t.exports=i(22)(!1)).push([t.i,"\n.UIEditCharacterAttribute td > *[data-v-a60da6e2] {\n\twidth: 100%;\n}\n.btn[data-v-a60da6e2] {\n\tmargin: auto;\n\tpadding: 0;\n\tuser-select: none;\n}\n.chara_ear[data-v-a60da6e2] {\n\twidth: 100%;\n\tdisplay: block;\n}\n.equip-icon[data-v-a60da6e2] {\n\tmargin: auto;\n\tmax-width: 32px;\n\tmax-height: 32px;\n\twidth: auto !important;\n\theight: auto !important;\n}\n",""])},function(t,e,i){"use strict";i.r(e),i.d(e,"FlowerTrapBall",function(){return o}),i.d(e,"FlowerTrap",function(){return a});var n=i(6),s=(i(47),i(66),i(91));class r extends s.b{constructor(){super(),this.size=0}}class o extends s.a{constructor(t,e){super(t,e),this.renderer=e[t.size].clone()}create(t){this.$physics={state:{}},super.create(t)}get _BallDefinition(){return r}}class a extends s.c{constructor(t,e){super(t,e),this.patterns={}}_invoke(t,e,i,n){const s=this._raw["pattern"+t];for(let t=0;t in s;++t){const r=s[t];let a,l,c;a=e+(n?-r.pos.x:r.pos.x),l=i+r.pos.y,c=r.angle-90;let u=new o({x:a,y:l,angle:c,size:r.size,createDelay:r.createDelay,collisionDelay:r.collisionDelay,duration:r.duration},this.animations);$gv.SceneObjectMgr.addToScene(10,u)}}invoke(){this._invoke(n.a.nextInt(3),1e3,48,n.a.nextBoolean())}get _anima_name_list(){return["XL","L","M","S"]}get _base_path(){return"/Skill/MobSkill/238/level"}}},function(t,e,i){"use strict";var n=i(183);i.n(n).a},function(t,e,i){(t.exports=i(22)(!1)).push([t.i,"\n.ui-life-list[data-v-ea11de16] {\r\n\tpadding: 0 1px;\n}\ntable[data-v-ea11de16] {\r\n    border-collapse: collapse;\r\n    border-spacing: 0;\n}\ntr.new-item[data-v-ea11de16] {\r\n\tbackground: lightgray;\n}\ntr.item[data-v-ea11de16]:hover {\r\n\tbackground: lightblue;\r\n\toutline: 1px auto rgb(77, 144, 254);\n}\n.button[data-v-ea11de16] {\r\n\twidth: 100%;\n}\n.input[data-v-ea11de16] {\r\n  width: 2.7em;\n}\n.input[type=text][data-v-ea11de16] {\r\n  width: 4em;\n}\n.input[type=number][data-v-ea11de16] {\r\n  width: 4em;\n}\n.input[type=checkbox][data-v-ea11de16] {\r\n  width: 1em;\n}\n.input-mobid[type=number][data-v-ea11de16] {\r\n  width: 5em;\n}\r\n\r\n",""])},function(t,e,i){"use strict";var n=i(184);i.n(n).a},function(t,e,i){(t.exports=i(22)(!1)).push([t.i,"\n.sticky[data-v-6e4fb2d8] {\r\n\tposition: sticky;\r\n\tleft: 0;\r\n\ttop: 0;\n}\n.info[data-v-6e4fb2d8] {\r\n\tbackground: #f5f5f5;\n}\n.view[data-v-6e4fb2d8] {\r\n\tdisplay: flex;\n}\n.view > div[data-v-6e4fb2d8] {\r\n\tflex: 100;\n}\n.imgbox[data-v-6e4fb2d8] {\r\n\tflex: 80;\n}\n.table[data-v-6e4fb2d8] {\r\n\tborder-collapse: collapse;\r\n\tborder-spacing: 0;\n}\n.input[data-v-6e4fb2d8] {\r\n\twidth: 5em;\n}\n.input-xy[data-v-6e4fb2d8] {\r\n\twidth: 8em;\n}\n.input-xy > *[data-v-6e4fb2d8] {\r\n\twidth: 4em;\n}\n.img[data-v-6e4fb2d8] {\r\n\tmax-width: 25vh;\r\n\tmax-height: 25vh;\r\n\tborder-bottom: 1px solid red;\r\n\tborder-left: 1px solid green;\n}\n.text[data-v-6e4fb2d8] {\r\n\tuser-select: text;\n}\n.red-text[data-v-6e4fb2d8] {\r\n\tcolor: red;\n}\n.tb[data-v-6e4fb2d8], .tb td[data-v-6e4fb2d8] {\r\n\tborder: 1px solid black;\r\n\tborder-collapse: collapse;\r\n\tborder-spacing: 0;\r\n\tuser-select: text;\n}\r\n\r\n",""])},function(t,e,i){"use strict";i.r(e),i.d(e,"$RequestPacket_SelectChara",function(){return n}),i.d(e,"$ResponsePacket_SelectChara",function(){return s});i(121);class n{constructor(){this.charaId=void 0}}class s{constructor(){this.charaData=null,this.remoteCharacters=null}}},function(t,e,i){"use strict";i.r(e),i.d(e,"$Packet_CharacterChat",function(){return n});class n{constructor(){this.type=null,this.$style=null,this.text=null}}},function(t,e,i){"use strict";i.r(e),i.d(e,"$Packet_CharacterMove",function(){return s});var n=i(162);class s{constructor(){this.id=void 0,this.path=[],this.stamp=(new Date).getTime()}capture(t){const e=t.$physics,i=e.body;let s=new n.a;{const e=t.renderer;s.action=e.action,s.emotion=e.emotion}if(s.isAwake=i.IsAwake(),s.isAwake){let t=e.getPosition(),n=i.GetLinearVelocity();s.x=t.x,s.y=t.y,s.vx=n.x,s.vy=n.y,s.pState=e.state,s.elapsed=(new Date).getTime()-this.stamp}this.path.push(s)}}},function(t,e,i){"use strict";var n=i(185);i.n(n).a},function(t,e,i){(t.exports=i(22)(!1)).push([t.i,"\n.dialog-group[data-v-22edcf98] {\n\tposition: fixed;\n\tleft: 0;\n\ttop: 0;\n\twidth: 100%;\n\theight: 100%;\n}\n.ui-dialog .ui-equip-box-dialog.ui-dialog-content[data-v-22edcf98] {\n\tpadding: 0;\n\twidth: 100% !important;\n}\n\n/*li.active {\n\tbackground-color: lightcyan;\n}\n*/\n.ui-character-list .active[data-v-22edcf98] {\n\tbackground: linear-gradient(to bottom, #ffec64 5%, #ffab23 100%);\n\tbackground-color: #ffec64;\n}\n.ui-character-list[data-v-22edcf98] {\n\tlist-style: none;\n\tpadding: 0;\n}\n.ui-character-list > li[data-v-22edcf98] {\n\twidth: 16em;\n}\n.ui-character-list table[data-v-22edcf98] {\n\twidth: 100%;\n\t/*border-collapse: collapse;*/\n}\n.ui-character-list td[data-v-22edcf98]:nth-child(1) {\n\t/*border: 1px solid black;*/\n\twidth: 20%;\n}\n.ui-character-list td[data-v-22edcf98]:nth-child(2) {\n\t/*border: 1px solid black;*/\n\twidth: 50%;\n}\n\n/*\n.ui-character-list td:first-child {\n}\n*/\n\n/*.ui-character-list td:last-child {\n\tfloat: right;\n}*/\n.chara-ls-btn-group[data-v-22edcf98] {\n\tdisplay: inline;\n\tfloat: right;\n}\n.chara-ls-btn[data-v-22edcf98] {\n    display: inline-flex;\n\twidth: 20px;\n\theight: 20px;\n\tpadding: 0;\n}\n.chara-ls-btn > *[data-v-22edcf98] {\n\tmargin: auto;\n\tpadding: 0;\n}\n.loading[data-v-22edcf98] {\n\tposition: absolute;\n\ttop:0;\n\tleft:0;\n\twidth: 100%;\n\theight: 100%;\n\tbackground: rgba(100, 100, 100, 0.5);\n\ttext-shadow: 1px 1px 0 white, 0 0 1px white;\n\t\n\tdisplay:flex;\n\talign-items:center;\n\tjustify-content:center;\n}\n\n/*\n\thttp://www.oxxostudio.tw/articles/201408/sticky-ball.html\n*/\n",""])},function(t,e,i){"use strict";var n=i(186);i.n(n).a},function(t,e,i){(t.exports=i(22)(!1)).push([t.i,"\n.fade-enter-active, .fade-leave-active {\n\ttransition: opacity .25s;\n}\n.fade-enter, .fade-leave-to /* .fade-leave-active in below version 2.1.8 */ {\n\topacity: 0;\n}\n.fade400-enter-active, .fade400-leave-active {\n\ttransition: opacity .5s;\n}\n.fade400-enter, .fade400-leave-to /* .fade400-leave-active in below version 2.1.8 */ {\n\topacity: 0;\n}\n.app-menu {\n\tz-index: 1;\n\tposition: absolute;\n}\n.scene-editor {\n\tz-index: 0;\n}\n",""])},,,function(t,e,i){"use strict";i.r(e);var n=i(21),s=i.n(n),r=i(48),o=i(88),a=(i(165),new r.a.Store({state:{root:{},loadingTasks:[]},mutations:{_beforeLoad:function(t,e){e&&e.task&&t.loadingTasks.push(e.task)},_onload:function(t,e){let i=t.loadingTasks.indexOf(e.task);i>=0&&t.loadingTasks.splice(i,1);const n=e.path.split("/");if(n){let i=0,r=t.root;for(;i<n.length-1;++i){let t=n[i];r=s.a.set(r,t,r[t]||{})}let o=e.data,a=r[n[i]];if(a&&"object"==typeof a)for(let t in o)s.a.set(a,t,o[t]||a[t]);else void 0!==o&&s.a.set(r,n[i],e.data)}}},actions:{waitAllLoaded:async function(t,e){await Promise.all(t.state.loadingTasks),t.state.loadingTasks=[]},loadData:async function(t,e){let i=$get.data(e.path);t.commit("_beforeLoad",{task:i});let n=await i;return t.commit("_onload",{path:e.path,task:i,data:n}),n}}}));let l={template:"<div :data-p='p' @mouseenter='mouseenter($event)' @mouseleave='mouseleave($event)' @mousedown='mousedown($event)' @mouseup='mouseup($event)' @mousemove='mousemove($event)' @click='click($event)'><slot/></div>",store:a,props:["p"],computed:{path:function(){let t,e=this._getPathArray();for(e=[].concat(...e.map(t=>t.split("/")));(t=e.indexOf(".."))>0;)e.splice(t-1,2);return e.join("/")},_path:function(){let t,e=this._getPathArray();for(e=[].concat(...e.map(t=>t.split("/")));(t=e.indexOf(".."))>0;)e.splice(t-1,2);return e.join("/")}},methods:{_getPathArray:function(){let t=[];for(let e=this.$parent;e;e=e.$parent){const i=e.path;if(i){t.unshift(i);break}}return this.p&&"."!=this.p&&t.push(this.p),t},getGuiParent:function(){let t;for(t=this.$parent;t;t=t.$parent)if(null!=t.p||null!=t.m_data)return t},__getData:function(){const t=this.path.split("/");let e=this.$store.state.root[""],i=[];for(let n in t){const s=t[n];if(i[n]=e,s in e&&!(e=e[s]))return}return e},_getData:function(t,e){let i=t.getData();return e.split("/").reduce((e,i)=>{if(null!=e&&i){if("."==i)return t._getData(t.getGuiParent(),t.p);if(".."==i){const e=t.getGuiParent();return e._getData(e.getGuiParent(),e.p)}return e[i]}},i)},getData:function(){return this.__getData()||{}},mouseenter:function(t){this.$emit("mouseenter",t)},mouseleave:function(t){this.$emit("mouseleave",t)},mousedown:function(t){this.$emit("mousedown",t)},mouseup:function(t){this.$emit("mouseup",t)},mousemove:function(t){this.$emit("mouseup",t)},click:function(t){this.$emit("click",t)}}},c=s.a.extend({mixins:[l,{template:"<div :data-p='p' @mouseenter='mouseenter($event)' @mouseleave='mouseleave($event)' @mousedown='mousedown($event)' @mouseup='mouseup($event)' @mousemove='mousemove($event)' @click='click($event)'><slot v-if='m_data' /></div>",data:function(){return{_$promise:null,m_data:null}},methods:{getData:function(){return this.m_data}},created:function(){this._$promise=this.$store.dispatch("loadData",{path:this.path}),this._$promise.then(t=>{this.m_data=t})}}]}),u=(s.a.extend({name:"gui-view",template:"<table class='view' ><tr><td :title='`(object)`+propName' :rowspan='entries.length+1'><div class='view-s'><button @click='collapsed=!collapsed'><span v-if='collapsed'>-</span><span v-else>+</span></button><span style='padding: 0 4px;'>{{propName}}</span></div></td><td></td></tr><tr v-if='collapsed' v-for='(d, i) in entries'><template v-if='d[0]==``'><td title='(image)'>(image)</td><td><img :src='d[1]'/></td></template><td v-else-if='typeof d[1] == `object`'><gui-view :p='encodeURI(d[0])' /></td><template v-else><td title='(property)'>{{d[0]}}</td><td :title='`(${typeof d[1]})`'>{{d[1]}}</td></template></tr></table>",data:function(){return{collapsed:!1}},methods:{},computed:{propName:function(){return decodeURI(this.p)},entries:function(){return Object.entries(this.getData())}},mixins:[l]}),{template:"<div :data-p='p' :style='style_frame'><div :style='style'><img :data-src='img_path' :src='img' :style='img_style' /><slot /></div></div>",data:function(){return{}},computed:{img_path:function(){return $get.imageUrl(this._path)},data_path:function(){return"data"+this._path},style_frame:function(){let t={zIndex:this.z};const e=-this.origin.x,i=-this.origin.y;return t.marginLeft=e+"px",t.marginTop=i+"px",t},style:function(){this.origin.x,this.origin.y;return{position:"relative"}},img_style:function(){return{display:"inline-block",width:this.width+"px",height:this.height+"px"}},texture:function(){return this.getData()},img:function(){let t=this.texture;return $get.imageUrl(t[""]?t[""]:"/warning")},width:function(){let t=this.texture;return t.__w?t.__w:0},height:function(){let t=this.texture;return t.__h?t.__h:0},origin:function(){let t=this.texture;return t.origin?t.origin:{x:0,y:0}},z:function(){let t=this.texture;return t.z?t.z:0}}}),h=s.a.extend({mixins:[l,u]}),d=s.a.extend({mixins:[l,u,{template:"<div :data-src='img_path' @mouseenter='mouseenter($event)' @mouseleave='mouseleave($event)' @mousedown='mousedown($event)' @mouseup='mouseup($event)' @mousemove='mousemove($event)' @click='click($event)' :style='img_style'><slot /></div>",computed:{img_style:function(){const t=-this.origin.x,e=-this.origin.y;return{background:`url(${this.img}) no-repeat`,position:"absolute",left:t+"px",top:e+"px",width:this.width+"px",height:this.height+"px"}}}}]}),m=s.a.extend({mixins:[h,{template:"<div :data-src='img_path' @mouseenter='mouseenter($event)' @mouseleave='mouseleave($event)' @mousedown='mousedown($event)' @mouseup='mouseup($event)' @mousemove='mousemove($event)' @click='click($event)' :style='{ background:`url(${img}) no-repeat` }'><slot /></div>"}]}),p=s.a.extend({mixins:[h,{template:"<div :data-src='img_path' @mouseenter='mouseenter($event)' @mouseleave='mouseleave($event)' @mousedown='mousedown($event)' @mouseup='mouseup($event)' @mousemove='mousemove($event)' @click='click($event)' :style='{ background:`url(${img})` }'><slot /></div>"}]}),f=s.a.extend({mixins:[h,{template:"<div :style='{ background:`url(${img})` }'><input :data-src='img_path' style='border: none; outline: none; background: transparent;' /><slot /></div>"}]}),_=s.a.extend({mixins:[h,{template:"<div :data-p='p' :style='style_frame'><div :style='style'><slot :path='img_path' :img='img' :width='width' :height='height' /></div></div>"}]}),g=s.a.extend({mixins:[d,{template:"<div :data-src='img_path' @mouseenter='mouseenter($event)' @mouseleave='mouseleave($event)' @mousedown='mousedown($event)' @mouseup='mouseup($event)' @mousemove='mousemove($event)' @click='click($event)' :style='img_style'><slot /></div>",computed:{img_style:function(){return{position:"absolute",left:-this.origin.x+"px",top:-this.origin.y+"px",width:this.width+"px",height:this.height+"px"}}}}]}),v=s.a.extend({mixins:[l,{template:"<div @mouseenter='mouseenter($event)' @mouseleave='mouseleave($event)' @mousedown='mousedown($event)' @mouseup='mouseup($event)' @mousemove='mousemove($event)' @click='click($event)' :data-p='p'><gui-texture :p='bp' style='display: inline-block;'></gui-texture></div>",props:{enabled:{type:Boolean,default:!0}},data:function(){return{m_state:"normal",aniFrame:0,stateMap:{normal:"normal",pressed:"pressed",disabled:"disabled",mouseOver:"mouseOver"}}},computed:{state:{get:function(){return this.m_state},set:function(t){if(this.enabled){this.stateMap[t]&&(this.m_state=t)}else this.m_state="disabled"}},bp:function(){return this.enabled?this.stateMap[this.m_state]+"/"+this.aniFrame:this.stateMap.disabled+"/"+this.aniFrame}},methods:{mouseenter:function(t){this.state="mouseOver",this.$emit("mouseenter",t)},mouseleave:function(t){this.state="normal",this.$emit("mouseleave",t)},mousedown:function(t){this.state="pressed",this.$emit("mousedown",t)},mouseup:function(t){this.state="mouseOver",this.$emit("mouseup",t)},click:function(t){this.$emit("click",t)}},watch:{disabled:function(t){}},components:{"gui-texture":h}}]});function y(t,e,i,n,s,r,o,a){var l,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=i,c._compiled=!0),n&&(c.functional=!0),r&&(c._scopeId="data-v-"+r),o?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(o)},c._ssrRegister=l):s&&(l=a?function(){s.call(this,this.$root.$options.shadowRoot)}:s),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(t,e){return l.call(e),u(t,e)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,l):[l]}return{exports:t,options:c}}var x=y({store:a,components:{gui:l,"gui-root":c,"gui-texture":h,"gui-texture-s":d,"gui-background":m,"gui-extend-bg":p,"gui-frame":_,"gui-frame-s":g,"gui-button":v,"gui-button-s":s.a.extend({mixins:[v,{template:"<gui-texture-s :p='bp' @mouseenter='mouseenter($event)' @mouseleave='mouseleave($event)' @mousedown='mousedown($event)' @mouseup='mouseup($event)' @click='click($event)'></gui-texture-s>",components:{"gui-texture-s":d}}]}),"gui-input":f,center:{template:'<div class="c2 center_frame"><div class="c3 center"><slot/></div></div>'},"center-hr":{template:'<div class="c2 center_frame_hr"><div class="c3 center_hr"><slot/></div></div>'}}},function(){var t=this.$createElement;return(this._self._c||t)("div")},[],!1,null,null,null).exports,b=i(121);var A={props:["chara"],data:function(){return{system:{resolution:{x:1366,y:768},optionMenu:{resolution:{"1366 x 768":{x:1366,y:768},"1024 x 720":{x:1366,y:768},"800 x 600":{x:1366,y:768}}},_$window_resize:null},ui:{quickSlotFold:!0,chat:{displayInput:!0,inputText:"",size:"max",maxHistory:10,history:[],inputHistory:[]}}}},computed:{stat:{get:function(){return this.chara&&this.chara.stat?this.chara.stat:new b.CharacterStat},set:function(){this.$forceUpdate()}}},methods:{trigger_editor_mode:function(){$gv.m_editor_mode=!$gv.m_editor_mode,app.vue.editor_mode=$gv.m_editor_mode},enterChatText:async function(t){const e=this.chara;await e.say(t)&&(this.pushChatHistory(0,e.chatCtrl.style,e.id+" : "+t),this.ui.chat.inputText="")},pushChatHistory:function(t,e,i){this.ui.chat.history.push(new class{constructor(t,e,i){this.type=t,this.style=e,this.text=i}}(t,e,i)),this.ui.chat.history.length>this.ui.chat.maxHistory&&this.ui.chat.history.shift()},_window_onresize:function(t){const e=window.innerHeight;this.system.resolution.y=e,this.updatePosition()},updatePosition:function(){this.$refs.status&&$(this.$refs.status.$el).position({my:"center bottom",at:"center top+33",of:$(this.$refs.expBar.$el)}),this.$refs.menu&&$(this.$refs.menu.$el).position({my:"left bottom",at:"center+110 top+33",of:$(this.$refs.expBar.$el)})},myUpdate:function(){this.$nextTick(async()=>{this.updatePosition()})}},mounted:function(){window.$statusBar=this,this.system._$window_resize=this._window_onresize.bind(this),window.addEventListener("resize",this.system._$window_resize),this._window_onresize()},beforeDestroy:function(){window.removeEventListener("resize",this.system._$window_resize)},updated:function(){this.myUpdate()},mixins:[x]},w=(i(429),y(A,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{position:"absolute",left:"0",top:"0"}},[i("div",{style:{position:"relative",width:t.system.resolution.x+"px",height:t.system.resolution.y+"px","line-height":0}},[i("gui-root",{attrs:{p:"/UI/StatusBar3"}},[i("gui",{attrs:{p:"mainBar"}},[i("div",{staticStyle:{position:"absolute",bottom:"0",width:"100%"}},[i("gui",{ref:"expBar",staticStyle:{position:"absolute",bottom:"0"},attrs:{p:"EXPBar"}},[i("gui",{attrs:{p:String(t.system.resolution.x)}},[i("gui-texture",{staticStyle:{position:"relative",top:"0"},attrs:{p:"layer:back"}}),t._v(" "),i("gui-frame",{staticStyle:{position:"absolute",top:"0"},attrs:{p:"layer:gauge"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.img,s=e.path;return[i("img",{style:{display:"inline-block","clip-path":"polygon(0% 0%, "+t.stat.getExpPercentS()+"% 0%, "+t.stat.getExpPercentS()+"% 100%, 0% 100%)"},attrs:{"data-src":s,src:n}}),t._v(" "),i("div",{style:{position:"absolute",height:"100%",top:"0",left:t.stat.getExpPercentS()+"%"}},[i("gui-texture",{staticStyle:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},attrs:{p:"../../layer:effect"}})],1)]}}])}),t._v(" "),i("gui-texture",{staticStyle:{position:"absolute",top:"0"},attrs:{p:"layer:cover"}})],1)],1),t._v(" "),i("gui",{ref:"status",staticStyle:{position:"relative",display:"inline-block","padding-bottom":"10px"},attrs:{p:"status"}},[i("gui-texture",{staticStyle:{position:"absolute"},attrs:{p:"backgrnd"}}),t._v(" "),i("gui-frame",{staticStyle:{position:"absolute"},attrs:{p:"gauge/hp/layer:0"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.img,s=e.path;return[i("img",{style:{display:"inline-block","clip-path":"polygon(0% 0%, "+t.stat.getHpPercentS()+"% 0%, "+t.stat.getHpPercentS()+"% 100%, 0% 100%)"},attrs:{"data-src":s,src:n}}),t._v(" "),i("div",{staticStyle:{position:"absolute",margin:"auto",bottom:"2px"}},[i("table",{staticClass:"table"},[i("tr",[i("td",{staticStyle:{width:"50%"}},[i("div",{staticStyle:{float:"right",display:"inline-flex"}},t._l(String(t.stat.hp),function(t,e){return i("gui-texture",{key:e,staticStyle:{flex:"1"},attrs:{p:"../../number/"+t}})}))]),t._v(" "),i("td",{attrs:{width:"1"}},[i("gui-texture",{attrs:{p:"../../number/%5c"}})],1),t._v(" "),i("td",{staticStyle:{width:"50%"}},[i("div",{staticStyle:{display:"inline-flex"}},t._l(String(t.stat.mhp),function(t,e){return i("gui-texture",{key:e,staticStyle:{flex:"1"},attrs:{p:"../../number/"+t}})}))])])])])]}}])}),t._v(" "),i("gui-frame",{staticStyle:{position:"absolute"},attrs:{p:"gauge/mp/layer:0"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.img,s=e.path;return[i("img",{style:{display:"inline-block","clip-path":"polygon(0% 0%, "+t.stat.getMpPercentS()+"% 0%, "+t.stat.getMpPercentS()+"% 100%, 0% 100%)"},attrs:{"data-src":s,src:n}}),t._v(" "),i("div",{staticStyle:{position:"absolute",margin:"auto",bottom:"2px"}},[i("table",{staticClass:"table"},[i("tr",[i("td",{staticStyle:{width:"50%"}},[i("div",{staticStyle:{float:"right",display:"inline-flex"}},t._l(String(t.stat.mp),function(t,e){return i("gui-texture",{key:e,staticStyle:{flex:"1"},attrs:{p:"../../number/"+t}})}))]),t._v(" "),i("td",{attrs:{width:"1"}},[i("gui-texture",{attrs:{p:"../../number/%5c"}})],1),t._v(" "),i("td",{staticStyle:{width:"50%"}},[i("div",{staticStyle:{display:"inline-flex"}},t._l(String(t.stat.mmp),function(t,e){return i("gui-texture",{key:e,staticStyle:{flex:"1"},attrs:{p:"../../number/"+t}})}))])])])])]}}])}),t._v(" "),i("gui-texture",{staticStyle:{position:"relative"},attrs:{p:"layer:cover"}}),t._v(" "),i("gui-texture",{staticStyle:{position:"absolute",top:"0"},attrs:{p:"layer:Lv"}},[i("div",{staticStyle:{display:"inline-flex"}},t._l(String(t.stat.level),function(t,e){return i("gui-texture",{key:e,staticStyle:{flex:"1"},attrs:{p:"../lvNumber/"+t}})})),t._v(" "),i("div",{staticClass:"text-fff-334",staticStyle:{"z-index":"20","margin-left":"19px",display:"inline-block",transform:"translateY(-2px)"}},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.chara?t.chara.id:"")+"\n\t\t\t\t\t\t\t")])])],1),t._v(" "),t.ui.quickSlotFold?i("gui",{ref:"menu",staticStyle:{position:"relative",display:"inline-block","padding-bottom":"10px"},attrs:{p:"menu"}},[i("gui-button",{staticStyle:{position:"relative"},attrs:{p:"button:Menu"},on:{click:function(e){t.trigger_editor_mode()}}}),t._v(" "),i("gui-button",{staticStyle:{position:"absolute",top:"0"},attrs:{p:"button:Setting"},on:{click:function(e){t.trigger_editor_mode()}}}),t._v(" "),i("gui-button",{staticStyle:{position:"absolute",top:"0"},attrs:{p:"button:Community"},on:{click:function(e){t.trigger_editor_mode()}}}),t._v(" "),i("gui-button",{staticStyle:{position:"absolute",top:"0"},attrs:{p:"button:Character"},on:{click:function(e){t.trigger_editor_mode()}}}),t._v(" "),i("gui-button",{staticStyle:{position:"absolute",top:"0"},attrs:{p:"button:Event"},on:{click:function(e){t.trigger_editor_mode()}}}),t._v(" "),i("gui-button",{staticStyle:{position:"absolute",top:"0"},attrs:{p:"button:CashShop"},on:{click:function(e){t.trigger_editor_mode()}}})],1):t._e(),t._v(" "),i("gui",{style:{position:"absolute",bottom:0,"padding-bottom":"13px",right:t.ui.quickSlotFold?"-208px":"3px"},attrs:{p:"quickSlot"}},[i("gui-frame",{staticStyle:{position:"relative",left:"0",top:"0"},attrs:{p:"backgrnd"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.img,s=e.path;return[i("img",{style:t.ui.quickSlotFold?{"clip-path":"polygon(0% 0%, 350px 0%, 350px 100%, 0% 100%)"}:{},attrs:{"data-src":s,src:n}})]}}])}),t._v(" "),i("gui-frame",{staticStyle:{position:"absolute",left:"0",top:"0"},attrs:{p:"layer:cover"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.img,s=e.path;return[i("img",{style:t.ui.quickSlotFold?{"clip-path":"polygon(0% 0%, 350px 0%, 350px 100%, 0% 100%)"}:{},attrs:{"data-src":s,src:n}})]}}])}),t._v(" "),t.ui.quickSlotFold?[i("gui-button",{staticStyle:{position:"absolute",left:"0",top:"0"},attrs:{p:"button:Extend"},on:{click:function(e){t.ui.quickSlotFold=!1}}})]:[i("gui-button",{staticStyle:{position:"absolute",left:"0",top:"0"},attrs:{p:"button:Fold"},on:{click:function(e){t.ui.quickSlotFold=!0}}})]],2)],1)]),t._v(" "),i("gui",{staticStyle:{position:"absolute",left:"0",bottom:"0","padding-bottom":"13px"},attrs:{p:"chat"}},[i("div",{staticStyle:{position:"relative"}},[i("gui",{staticStyle:{position:"relative",width:"100%",height:"100%"},attrs:{p:"ingame/view/"+t.ui.chat.size}},[i("gui-frame",{attrs:{p:"top"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.img,s=e.path,r=e.width,o=e.height;return[i("img",{style:{width:r+"px",height:o+"px"},attrs:{"data-src":s,src:n}}),t._v(" "),i("div",{style:{position:"absolute",left:0,top:0,width:r+"px",height:o+"px"}},[i("gui",{attrs:{p:"../.."}},["max"==t.ui.chat.size?[i("gui-button",{staticStyle:{position:"absolute",left:"3px",top:"3px"},attrs:{p:"drag"}}),t._v(" "),i("gui-button",{staticStyle:{position:"absolute",right:"3px",top:"3px"},attrs:{p:"btMin"},on:{click:function(e){t.ui.chat.size="min"}}})]:t._e()],2)],1)]}}])}),t._v(" "),"max"==t.ui.chat.size?i("table",{staticClass:"table",staticStyle:{width:"100%"}},[i("tr",{staticStyle:{height:"100%","line-height":"0"}},[i("td",[i("gui-extend-bg",{staticStyle:{height:"100%"},attrs:{p:"center"}},[i("table",{staticClass:"table",staticStyle:{width:"calc(100% - 16px)"}},[t._l(t.ui.chat.history,function(e){return i("tr",[i("td",[i("div",{staticClass:"chat-text"},[t._v(t._s(e.text))])])])}),t._v(" "),t._l(t.ui.chat.maxHistory-t.ui.chat.history.length,function(t){return i("tr",[i("td",[i("div",{staticClass:"chat-text"})])])})],2)])],1)])]):t._e(),t._v(" "),i("gui-frame",{attrs:{p:"bottom"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.img,s=e.path,r=e.width,o=e.height;return[i("img",{style:{width:r+"px",height:o+"px"},attrs:{"data-src":s,src:n}}),t._v(" "),i("div",{style:{position:"absolute",left:0,top:0,width:r+"px",height:o+"px"}},["max"!=t.ui.chat.size?[i("gui-button",{staticStyle:{position:"absolute",right:"3px",bottom:"8px"},attrs:{p:"../../btMax"},on:{click:function(e){t.ui.chat.size="max"}}})]:t._e()],2)]}}])}),t._v(" "),"max"!=t.ui.chat.size&&t.ui.chat.history.length>0?i("div",{staticStyle:{position:"absolute",left:"0",top:"8px"}},[i("gui-button",{staticStyle:{display:"block",position:"relative",left:"3px",top:"3px"},attrs:{p:"ingame/view/drag"}}),t._v(" "),i("div",{staticClass:"chat-text"},[t._v(t._s(t.ui.chat.history[t.ui.chat.history.length-1].text))])],1):t._e()],1)],1),t._v(" "),t.ui.chat.displayInput?i("div",{staticStyle:{position:"relative"}},[i("gui-texture",{attrs:{p:"ingame/input/layer:backgrnd"}}),t._v(" "),i("div",{staticStyle:{position:"absolute",top:"0",width:"0px","margin-left":"4px","margin-top":"5px"}},[i("gui-button",{attrs:{p:"common/chatTarget/all"}})],1),t._v(" "),i("gui-frame",{staticStyle:{position:"absolute",top:"0",display:"inline-block","font-family":"monospace"},attrs:{p:"ingame/input/layer:chatEnter"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.img,s=(e.path,e.width),r=e.height;return[i("div",{style:{width:s+"px",height:r+"px",background:"url("+n+")"},attrs:{"data-src":n}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.ui.chat.inputText,expression:"ui.chat.inputText"}],staticStyle:{width:"100%",padding:"2px","padding-left":"5px",border:"none",outline:"none",color:"white",background:"transparent"},attrs:{type:"text"},domProps:{value:t.ui.chat.inputText},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.enterChatText(t.ui.chat.inputText.slice(0,70))},input:function(e){e.target.composing||t.$set(t.ui.chat,"inputText",e.target.value)}}})])]}}])})],1):t._e()])],1)],1)])},[],!1,null,"06654c7d",null).exports),S=i(4);function C(){$gv.mouse_move=0,$gv.mouse_x=0,$gv.mouse_y=0,$gv.mouse_dl=0,$gv.mouse_ul=0,$gv.mouse_dm=0,$gv.mouse_um=0,$gv.mouse_dr=0,$gv.mouse_ur=0}var B={props:{handle:{type:String,default:"header",description:"class only"},zIndex:{type:Number,default:0},position:{default:function(){return{x:0,y:0}},required:!1}},data:function(){return{mouse_x0:0,mouse_y0:0,origin_x:0,origin_y:0,old_width:0,old_height:0,handle_mousemove:null,handle_mouseup:null}},methods:{mousemove:function(){if(C(),1==event.which){let t=this.$el,e=event.clientX-this.mouse_x0,i=event.clientY-this.mouse_y0;t.style.left=Math.max(e,0)+"px",t.style.top=Math.max(i,0)+"px";let n=t.parentElement.offsetWidth,s=t.parentElement.offsetHeight,r=t.offsetLeft,o=t.offsetTop,a=this.old_width,l=this.old_height;r<0&&(t.style.left="0px"),r+a>=n&&(t.style.left=n-a+"px"),o>=0&&(l<s?o+l>=s&&(t.style.top=s-l+"px"):t.style.top=-this.origin_y+"px"),o<0&&(t.style.top="0px")}else this.mouseup()},mousedown:function(t){if(C(),!t.target.classList.contains(this.handle))return;t.target.focus();let e=this.get_relative_position();if(this.mouse_x0=t.clientX-e.x,this.mouse_y0=t.clientY-e.y,1==t.which){let t=this.$el;this.old_width=t.offsetWidth,this.old_height=t.offsetHeight}let i=this;this.handle_mousemove=function(t){i.mousemove(t)},this.handle_mouseup=function(){i.mouseup()},window.addEventListener("mousemove",i.handle_mousemove),window.addEventListener("mouseup",i.handle_mouseup)},mouseup:function(){C(),window.removeEventListener("mousemove",this.handle_mousemove),window.removeEventListener("mouseup",this.handle_mouseup),this.$emit("update:position",this.get_relative_position())},get_relative_position:function(){return{x:this.$el.offsetLeft,y:this.$el.offsetTop}}},mounted:function(){let t,e,i=this.$el;if(t=this.position.x,e=this.position.y,this.position.x||this.position.y)this.$el.style.left=t+"px",this.$el.style.top=e+"px",this.origin_x=t,this.origin_y=e;else{let t=function(t){let e,i,n=t.style.left,s=t.style.top;return t.style.left="0px",e=t.offsetLeft,t.style.left=n,t.style.top="0px",i=t.offsetTop,t.style.top=s,{x:e,y:i}}(i);this.origin_x=t.x,this.origin_y=t.y}},watch:{zIndex:function(t){this.$el.style.zIndex=t},"position.x":function(t){this.$el.style.left=t+"px"},"position.y":function(t){this.$el.style.top=t+"px"}}},V=(i(431),y(B,function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"ui-draggable",on:{mousedown:function(e){t.mousedown(e)}}},[t._t("default")],2)},[],!1,null,null,null).exports);let M=[];var k={props:{width:{default:""},height:{default:""},position:{required:!1}},data:function(){return{content_style:{},header_style:{},minimum:!1,zIndex:1}},computed:{},methods:{updateDialogPosition:function(t){this.$emit("update:position",t)},onCollapsed:function(){let t=this.$children[0].$children;for(let e=0;e<t.length;++e)t[e].$emit("onCollapsed")},compute_width:function(){return this.width},compute_height:function(){return this.height},show:function(){let t=$(this.$el);t.show.apply(t,arguments)},hide:function(){let t=$(this.$el);t.hide.apply(t,arguments)},requireOrder:function(){const t=M.indexOf(this);if(t>=0){M.splice(t,1)[0],M.push(this);for(let t=0;t<M.length;++t)M[t].__set_z_index(t+1)}},__set_z_index:function(t){this.zIndex=t},reset_content_style:function(){let t={};if(this.$refs.content){let e=this.compute_width();if(this.minimum)t.height="0px",t["min-height"]="0px",t["max-height"]="0px";else{let e=this.compute_height();t["max-height"]="number"==typeof e?parseFloat(e)+"px":e}t.width="number"==typeof e?parseFloat(e)+"px":e,t["max-width"]="number"==typeof e?parseFloat(e)+"px":e}this.content_style=t,this.header_style.width=this.content_style.width,this.header_style["max-width"]=this.content_style["max-width"]}},watch:{width:function(){this.reset_content_style()},height:function(){this.reset_content_style()},minimum:function(){this.reset_content_style()}},mounted:function(){M.push(this),this.zIndex=M.length,this.reset_content_style()},updated:function(){},components:{"ui-draggable":V}},P=(i(433),y(k,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ui-draggable",{staticClass:"ui-dialog",attrs:{zIndex:t.zIndex,position:t.position},on:{"update:position":t.updateDialogPosition}},[i("div",{ref:"header",staticClass:"header",style:t.header_style,on:{mousedown:function(e){return"button"in e||!t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?"button"in e&&0!==e.button?null:void t.requireOrder(e):null}}},[t._t("header"),t._v(" "),i("div",{staticClass:"header-buttons"},[t.minimum?i("button",{staticClass:"header-button",on:{click:function(e){t.minimum=!1}}},[i("span",{staticClass:"ui-icon ui-icon-plus"})]):i("button",{staticClass:"header-button",on:{click:function(e){t.minimum=!0,t.onCollapsed()}}},[i("span",{staticClass:"ui-icon ui-icon-minus"})])])],2),t._v(" "),i("div",{ref:"content",staticClass:"content",style:t.content_style,on:{mousedown:function(e){return"button"in e||!t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?"button"in e&&0!==e.button?null:void t.requireOrder(e):null}}},[t._t("content"),t._v(" "),t._t("default")],2),t._v(" "),t.minimum?t._e():i("div",{ref:"footer",staticClass:"footer",on:{mousedown:function(e){return"button"in e||!t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?"button"in e&&0!==e.button?null:void t.requireOrder(e):null}}},[t._t("footer")],2)])},[],!1,null,null,null).exports),I={components:{"ui-draggable":V,"ui-dialog":P},mixins:[P]},D=(i(435),y(I,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ui-draggable",{staticClass:"ui-dialog",attrs:{zIndex:t.zIndex,position:t.position},on:{"update:position":t.updateDialogPosition}},[i("div",{ref:"header",staticClass:"header",style:t.content_style,on:{mousedown:function(e){return"button"in e||!t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?"button"in e&&0!==e.button?null:void t.requireOrder(e):null}}},[t._t("header"),t._v(" "),t._t("content"),t._v(" "),t._t("default")],2),t._v(" "),i("div",{ref:"footer",staticClass:"footer",on:{mousedown:function(e){return"button"in e||!t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?"button"in e&&0!==e.button?null:void t.requireOrder(e):null}}},[t._t("footer")],2)])},[],!1,null,"66062b27",null).exports);let T={Equip:{1:"cap",2:"accessoryFace",3:"accessoryEyes",4:"accessoryEars",5:"coat",5:"longcoat",6:"pants",7:"shoes",8:"glove",9:"cape",10:"shield",11:"weapon"},Cash:{}};Object.keys(T.Equip).forEach(t=>{T.Cash[t+100]=T.Equip[t]}),window.$WND_EQUIP_SLOT_MAP=T;var E=y({name:"equip-slot",props:{chara:{required:!0}},data:function(){return{guiData:null,sType:"Equip",wndStyle:{width:0,height:0},typeList:[]}},methods:{alert:function(t){},getCharaEquipIconPos:function(t){if(this.chara&&this.chara.renderer){let e=this.chara.renderer.slots[t];if(e&&e._raw&&e._raw.info&&e._raw.info.icon&&e._raw.info.icon.origin){const t=this.slot_imgWidth,i=this.slot_imgHeight;e._raw.info.icon.origin;let n=e._raw.info.icon;return{x:(t-n.__w)/2,y:(i-n.__h)/2}}}return{x:0,y:0}},getCharaEquipIconUrl:function(t){if(this.chara&&this.chara.renderer){let e=this.chara.renderer.slots[t];if(e)return e.getIconUrl()}return""}},computed:{slotMap:{get:function(){return T},set:function(t){T=t}}},mounted:async function(){if(this.guiData=await this.$refs.gui_root._$promise,this.typeList.length=0,this.guiData)for(let t in this.guiData)switch(t){case"Zero_Cash":case"Angel_Cash":case"totem":break;case"backgrnd":case"backgrnd2":case"tabbar":case"Tab":break;default:this.typeList.push(t)}this.slot_imgWidth=this.guiData.Equip.Slots[1].__w,this.slot_imgHeight=this.guiData.Equip.Slots[1].__h,this.wndStyle.width=this.guiData.backgrnd.__w+"px",this.wndStyle.height=this.guiData.backgrnd.__h+"px"},components:{"window-base":D},mixins:[x]},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("window-base",[i("template",{slot:"content"},[i("div",{style:t.wndStyle},[i("gui-root",{ref:"gui_root",attrs:{p:"/UI/UIWindow4/Equip"}},[i("gui-texture-s",{attrs:{p:"backgrnd"}}),t._v(" "),i("gui-texture-s",{attrs:{p:"backgrnd2"}}),t._v(" "),i("gui-texture-s",{attrs:{p:"tabbar"}}),t._v(" "),i("gui-frame-s",{staticClass:"header",attrs:{p:"backgrnd"}}),t._v(" "),i("gui-frame-s",{attrs:{p:"backgrnd2"}}),t._v(" "),t.guiData?[t._l(t.guiData.Tab.disabled,function(e,n){return[t.typeList[n]!=t.sType?[i("gui-texture-s",{staticClass:"ui-clickable",attrs:{p:"Tab/disabled/"+n},on:{click:function(e){t.sType=t.typeList[n]}}})]:t._e()]}),t._v(" "),t.typeList.indexOf(t.sType)>=0?[i("gui-texture-s",{attrs:{p:"Tab/enabled/"+t.typeList.indexOf(t.sType)}})]:t._e(),t._v(" "),t.sType?[i("gui-texture-s",{attrs:{p:t.sType+"/backgrnd"}}),t._v(" "),t._l(t.guiData[t.sType].Slots,function(e,n){return[i("div",{attrs:{title:n},on:{click:function(e){t.alert(n)}}},[i("gui-texture-s",{attrs:{p:t.sType+"/Slots/"+n}}),t._v(" "),t.slotMap[t.sType]?i("img",{style:{position:"absolute",left:t.getCharaEquipIconPos(t.slotMap[t.sType][n]).x-e.origin.x+"px",top:t.getCharaEquipIconPos(t.slotMap[t.sType][n]).y-e.origin.y+"px"},attrs:{src:t.getCharaEquipIconUrl(t.slotMap[t.sType][n])}}):t._e()],1)]})]:t._e()]:t._e(),t._v(" "),i("select",{directives:[{name:"model",rawName:"v-model",value:t.sType,expression:"sType"}],staticStyle:{position:"absolute",left:"1em",bottom:"1.5em"},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.sType=e.target.multiple?i:i[0]}}},t._l(t.typeList,function(e){return i("option",{domProps:{value:e}},[t._v("\n\t\t\t\t\t\t"+t._s(e)+"\n\t\t\t\t\t")])}))],2)],1)])],2)},[],!1,null,null,null).exports,L=i(17);class R{}let F={};window.$loadedItem=F;class O{constructor(t,e){this._raw=null,this.id=null,Object.defineProperties(this,{_raw:{value:e},id:{value:t}}),this._raw.info,this._raw.info.id=t,this._raw.info.name="<loading>",this._raw.info.desc="<loading>",this._raw.info.__v=window.DATA_TAG+window.DATA_VERSION;let i=S.c.isItem(t);i||(this._raw.info.icon={},this._raw.info.iconRaw={}),this._raw.info.icon[""]=S.c.getIconUrl(t),this._raw.info.iconRaw[""]=S.c.getIconRawUrl(t),i?this._load():(this._raw.info.name=t,this._raw.info.desc="<not item>")}async _load(){let t=await S.c.loadString(this.id);this._raw.info.name=t.name,this._raw.info.desc=t.desc}}class j extends O{}j.prototype.$test_proto_prop=123;class G extends R{constructor(t,e,i,n){super(),this.SN=e,this.slot=t,this.amount=n,this.data=i}assign(t,e,i,n){this.SN=e,this.slot=t,this.amount=n,this.data=i}_clear(){this.data=null,this.amount=0}isEmpty(){return!this.data&&!this.amount}getData(){return this.data}setData(t){this.data=t}static parse(t){if(t.__proto__==String.prototype){let e=new G,i=JSON.parse(t);return Object.assign(e,i),e}throw new TypeError}}var N={props:{itemSlot:{required:!0},slots:{required:!0}},methods:{drag:function(t,e){t.dataTransfer.setData("text/x-item",JSON.stringify(e))},allowDrop:function(t,e){[...t.dataTransfer.types].includes("text/x-item")&&t.preventDefault()},drop:function(t,e){t.preventDefault();let i=G.parse(t.dataTransfer.getData("text/x-item")),n=this.slots[i.slot],s=n.slot;{let t=this.slots[e];t&&(t.slot=s),n.slot=e,this.$set(this.slots,n.slot,n),t?this.$set(this.slots,t.slot,t):this.slots[s]=null}},onPickItem:function(t,e){this.onMouseleaveItem(t,e.data._raw.info),this.$emit("pickItem",{event:t,itemSlot:e})},onUseItem:function(t,e){this.onMouseleaveItem(t,e.data._raw.info),this.$emit("useItem",{event:t,itemSlot:e})},onHoverItem:function(t,e){t.buttons?this.onMouseleaveItem(t,e):this.$emit("hoverItem",{event:t,equip:e})},onMouseleaveItem:function(t,e){this.$emit("mouseleaveItem",{event:t,equip:e})},getSlotStyle:function(t){return{position:"absolute",left:36*Math.trunc(t%4)+"px",top:36*Math.trunc(t/4)+"px",width:"32px",height:"32px"}},getItemIconUrl:function(t){let e=t.data;return S.c.getIconUrl(e.id)},getItemIconStyle:function(t){let e=t.data._raw.info.icon;return{position:"absolute",left:(32-e.__w)/2+"px",top:(32-e.__h)/2+"px"}}}},q=(i(437),y(N,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{style:t.getSlotStyle(t.itemSlot.slot),attrs:{draggable:"true"},on:{dragstart:function(e){t.drag(e,t.itemSlot)},dragover:function(e){t.allowDrop(e,t.itemSlot.slot)},drop:function(e){t.drop(e,t.itemSlot.slot)},mousedown:[function(e){return"button"in e||!t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?"button"in e&&0!==e.button?null:void t.onPickItem(e,t.itemSlot):null},function(e){return"button"in e||!t._k(e.keyCode,"right",39,e.key,["Right","ArrowRight"])?"button"in e&&2!==e.button?null:void t.$emit("showMenu",e,t.itemSlot):null}],dblclick:function(e){return"button"in e||!t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?"button"in e&&0!==e.button?null:void t.onUseItem(e,t.itemSlot):null},mousemove:function(e){t.onHoverItem(e,t.itemSlot.data._raw.info)},mouseleave:function(e){t.onMouseleaveItem(e,t.itemSlot.data._raw.info)},contextmenu:function(t){t.preventDefault()}}},[i("img",{style:t.getItemIconStyle(t.itemSlot),attrs:{src:t.getItemIconUrl(t.itemSlot)}}),t._v(" "),i("span",{staticClass:"wnd-item-sn"},[t._v(t._s(t.itemSlot.SN))])])},[],!1,null,null,null).exports);let z=s.a.extend({mixins:[x.components["gui-button-s"],{props:["sp"],data:function(){return{m_state:"normal",stateMap:{normal:"0",mouseOver:"1",pressed:"2"}}},computed:{bp:function(){return this.enabled?this.sp+this.stateMap[this.m_state]:this.sp}}}]});var H={props:{target:{},step:{type:Number,default:1},enabled:{type:Boolean,default:!0}},data:function(){return{thumbStyle:{position:"absolute",left:0,top:"0"},_mouse_y:0,_onscroll_target:null,_track_mouse_listener:null}},computed:{maxHeight:function(){return this.$refs.track.$el.offsetHeight},thumbY:{get:function(){return parseFloat(this.thumbStyle.top)},set:function(t){t=Math.max(t,0),t=Math.min(t,this.maxHeight-26),this.thumbStyle.top=t+"px",this.$emit("scroll",t)}}},methods:{_getMousePosY:function(t){return t.target.classList.contains("track")?t.offsetY:-this.target.getBoundingClientRect().top+t.clientY-13},_calcThumbY:function(t){let e=t-13;if(this.step){const t=this.target;let i=t.offsetHeight,n=this.maxHeight,s=Math.trunc(t.scrollHeight/n)*n,r=e/i*s;e=(r=Math.trunc(r/this.step)*this.step)/s*i}this.thumbY=e,this._scrollTo(e)},moveStep:function(t){if(this.step){let e=t*this.step;this._scroll(e),this._onscroll()}},_onmousemove:function(t){if(1==t.buttons){let e=this._getMousePosY(t);this._calcThumbY(e),this._set_tracking_mousemove()}},_set_tracking_mousemove:function(){this._track_mouse_listener||(this._track_mouse_listener=(t=>{1==t.buttons?this._onmousemove(t):(window.removeEventListener("mousemove",this._track_mouse_listener),this._track_mouse_listener=null)}),window.addEventListener("mousemove",this._track_mouse_listener))},_onmousewheel:function(t){let e;this.step?(t.preventDefault(),e=Math.sign(t.deltaY)*this.step):e=t.deltaY,this._scroll(e),this._onscroll()},_scroll:function(t){const e=this.target;let i=e.scrollTop+t;e.scrollTo(0,i)},_scrollTo:function(t){const e=this.target;let i=e.offsetHeight,n=this.maxHeight,s=Math.trunc(e.scrollHeight/n)*n;e.scrollTo(0,t/i*s)},_onscroll:function(t){const e=this.target;let i=e.offsetHeight,n=this.maxHeight,s=Math.trunc(e.scrollHeight/n)*n,r=e.scrollTop/s*i;this.thumbY=r},_bindScrollEvent:function(){const t=this.target;t&&(this._onscroll_target&&t.removeEventListener("scroll",this._onscroll_target),this.step?(this._onscroll_target=this._onmousewheel.bind(this),t.addEventListener("mousewheel",this._onscroll_target)):(this._onscroll_target=this._onscroll.bind(this),t.addEventListener("scroll",this._onscroll_target)))}},mounted:function(){this._bindScrollEvent()},beforeDestroy:function(){this.target.removeEventListener("scroll",this._onscroll_target),this._track_mouse_listener&&window.removeEventListener("mousemove",this._track_mouse_listener)},watch:{target:function(t){this._bindScrollEvent()}},mixins:[x],components:{"vscr-button":z}},U=(i(439),i(425)),W=i.n(U),J=y(H,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("gui-root",{attrs:{p:"/UI/Basic/VScr9"}},[i("gui",{attrs:{p:t.enabled?"enabled":"disabled"}},[i("div",{staticClass:"vscr-scrollbar",on:{mousewheel:t._onmousewheel}},[i("vscr-button",{staticClass:"vscr-decrement",attrs:{enabled:t.enabled,sp:"prev"},on:{click:function(e){t.moveStep(-1)}}}),t._v(" "),i("vscr-button",{staticClass:"vscr-increment",attrs:{enabled:t.enabled,sp:"next"},on:{click:function(e){t.moveStep(1)}}}),t._v(" "),i("gui-extend-bg",{ref:"track",staticClass:"vscr-track",attrs:{p:"base"},on:{mousedown:t._onmousemove,mousemove:t._onmousemove}},[i("div",{style:t.thumbStyle},[i("vscr-button",{staticClass:"vscr-thumb",attrs:{enabled:t.enabled,p:"../../enabled",sp:"thumb"}})],1)])],1)])],1)},[],!1,null,"0eba351b",null);"function"==typeof W.a&&W()(J);var Y=J.exports;var X={name:"item-slot",props:{chara:{required:!0}},data:function(){return{guiData:null,isCollapsed:!0,sType:0,typeList:[0,1,2,3,4],typeNameList:["裝備","消耗","其他","裝飾","特殊"],wndStyle:{width:0,height:0},pageStyle:{position:"absolute",left:"10px",top:"50px",width:"153px",height:"212px"},slotsPanelStyle:{width:"140px",height:"1148px"},scrollStep:36,is_show_menu:!1,menu_style:{position:"fixed",left:"0px",top:"0px"},current_slotItem:null}},computed:{slots:function(){return this.chara.items[this.sType]}},methods:{showMenu:function(t,e){this.current_slotItem=e,this.menu_style.left=t.clientX+"px",this.menu_style.top=t.clientY-18+"px",this.is_show_menu=!0;let i=this.closeMenu.bind(this);window.addEventListener("click",i,{once:!0,passive:!0,capture:!0})},closeMenu:function(t){this.is_show_menu=!1},removeItem:function(){this.chara.removeItem(this.sType,this.current_slotItem.slot)},allowDrop:function(t,e){return q.methods.allowDrop.call(this,t,e)},drop:function(t,e){return q.methods.drop.call(this,t,e)},getSlotStyle:function(t){return q.methods.getSlotStyle.call(this,t)},onPickItem:function(){return this.$emit("pickItem",...arguments)},onUseItem:function(t){let e=t.event,i=t.itemSlot;const n=i.data.id;if(170!=S.c.isCashWeapon(n))return this.chara.useItem(n),this.$emit("useItem",{event:e,itemSlot:i});{let t=i.data._raw.info;console.groupCollapsed("沒有設定職業，無法使用點裝武器"),console.log("click cash weapon: [%s] %s %o",t.id,t.name,t),console.groupEnd()}},onHoverItem:function(){return this.$emit("hoverItem",...arguments)},onMouseleaveItem:function(){return this.$emit("mouseleaveItem",...arguments)}},mounted:async function(){this.guiData=await this.$refs.gui_root._$promise,this.isCollapsed?(this.wndStyle.width=this.guiData.backgrnd.__w+"px",this.wndStyle.height=this.guiData.backgrnd.__h+"px"):(this.wndStyle.width=this.guiData.FullBackgrnd.__w+"px",this.wndStyle.height=this.guiData.FullBackgrnd.__h+"px")},components:{"window-base":D,"ui-slot-item":q,"ui-v-scrollbar":Y},mixins:[x]},Q=(i(441),y(X,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("window-base",[i("template",{slot:"content"},[i("div",{style:t.wndStyle},[i("gui-root",{ref:"gui_root",attrs:{p:"/UI/UIWindow2/Item"}},[[t.isCollapsed?i("div",[i("gui-texture-s",{attrs:{p:"backgrnd"}}),t._v(" "),i("gui-texture-s",{attrs:{p:"backgrnd2"}}),t._v(" "),i("gui-texture-s",{attrs:{p:"backgrnd3"}}),t._v(" "),i("gui-frame-s",{staticClass:"header",attrs:{p:"backgrnd"}}),t._v(" "),i("gui-frame-s",{attrs:{p:"backgrnd2"}})],1):i("div",[i("gui-texture-s",{attrs:{p:"FullBackgrnd"}}),t._v(" "),i("gui-texture-s",{attrs:{p:"FullBackgrnd2"}}),t._v(" "),i("gui-texture-s",{attrs:{p:"FullBackgrnd3"}}),t._v(" "),i("gui-frame-s",{staticClass:"header",attrs:{p:"FullBackgrnd"}}),t._v(" "),i("gui-frame-s",{attrs:{p:"FullBackgrnd2"}})],1)],t._v(" "),t.guiData?[t.typeList.indexOf(t.sType)>=0?[i("gui-texture-s",{attrs:{p:"Tab/enabled/"+t.typeList.indexOf(t.sType)}})]:t._e(),t._v(" "),t._l(t.guiData.Tab.disabled,function(e,n){return[t.typeList[n]!=t.sType?[i("gui-texture-s",{staticClass:"ui-clickable",attrs:{p:"Tab/disabled/"+n},on:{click:function(e){t.sType=t.typeList[n]}}})]:t._e()]})]:t._e()],2),t._v(" "),i("div",{staticClass:"slots-viewport",style:t.pageStyle},[i("div",{ref:"slots_panel",staticClass:"slots-container"},[i("div",[t._l(128,function(e){return[i("div",{style:t.getSlotStyle(e-1),on:{dragover:function(i){t.allowDrop(i,e-1)},drop:function(i){t.drop(i,e-1)}}},[i("span",{staticClass:"wnd-item-slot-num"},[t._v(t._s(e-1))])])]})],2),t._v(" "),t.chara&&t.chara.items?i("div",{style:t.slotsPanelStyle},[t._l(t.chara.items[t.sType].filter(function(t){return!!t}),function(e){return[e.data?[i("ui-slot-item",{attrs:{itemSlot:e,slots:t.slots},on:{pickItem:t.onPickItem,useItem:t.onUseItem,hoverItem:t.onHoverItem,mouseleaveItem:t.onMouseleaveItem,showMenu:t.showMenu}})]:t._e()]})],2):t._e()]),t._v(" "),i("ui-v-scrollbar",{attrs:{target:t.$refs.slots_panel,step:t.scrollStep}})],1)],1)]),t._v(" "),t.is_show_menu?i("template",{slot:"footer"},[i("gui-root",{attrs:{p:"/UI/CashShop/CSLockerNew/Normal"}},[i("div",{staticClass:"slot-menu",style:t.menu_style,on:{mouseout:function(e){if(e.target!==e.currentTarget)return null;t.closeMenu(e)},contextmenu:function(t){t.preventDefault()}}},[i("gui-texture",{attrs:{p:"backgrnd"}}),t._v(" "),i("gui-button-s",{staticClass:"Bt BtRebate",attrs:{p:"BtRebate",enabled:!1}}),t._v(" "),i("gui-button-s",{staticClass:"Bt BtDelete",attrs:{p:"BtDelete"},on:{click:t.removeItem}})],1)])],1):t._e()],2)},[],!1,null,"6b78163c",null).exports);class Z{static baseJob(t){return Number((t%500).toString()[0])}}const K={template:'<img v-data="src"></img>',props:{origin:{type:String,default:"",required:!1},flip:{type:String,default:"",required:!1},scale:{type:Array,default:null,required:!1},src:{type:String,default:"",required:!1}},directives:{data:function(t,e,i){const n=e.value,s=i.context;t.src=n,s.scale&&function(e){t.onload=function(t){let i=t.target.naturalWidth*e[0],n=t.target.naturalHeight*e[1];t.target.style.width=`${i}px`,t.target.style.height=`${n}px`}}(s.scale),(n.startsWith("/")||n.startsWith("http"))&&function(t,e){if(e.src.indexOf("maplestory.io")>=0)return;let i=e.src.replace("images/","/data/");$get(i).then(function(n){try{let s=JSON.parse(n);e.style.transform="","-"==t.origin&&(e.style.transform=" scale(-1, -1)"),e.style.transform+=` translate3d(${s.origin.x}px, ${s.origin.y}px, ${0|s.z})`,"-"==t.origin&&(e.style.transform+=" scale(-1, -1)")}catch(t){console.warn("path to JSON ?: "+i),console.warn("JSON ?: "+n),console.warn(t)}})}(s,t)}}};class tt{constructor(){this.components={texture:K},this.props=["attrName","equip","stat"],this.methods={getReqState:this.getReqState,digitCharArray:this.digitCharArray,getReqAttrName:this.getReqAttrName},this.render=function(t){let e=this.getReqState(),i=this.digitCharArray(),n=this.getReqAttrName();return t("div",{class:{c3:!0,"UIToolTip ":!0,"equip-req":!0}},[t("texture",{attrs:{src:`images/UI/UIToolTip/Item/Equip/${tt.prototype.getReqState.call(this)}/req${n}`}}),t("div",{class:{UIToolTip:!0,"req-digit":!0}},[t("texture",{attrs:{src:`images/UI/UIToolTip/Item/Equip/${e}/${i[0]}`}}),t("texture",{attrs:{src:`images/UI/UIToolTip/Item/Equip/${e}/${i[1]}`}}),t("texture",{attrs:{src:`images/UI/UIToolTip/Item/Equip/${e}/${i[2]}`}})])])}}getReqAttrName(){return this.attrName.toUpperCase()}getReqState(){const t=this.equip[`req${this.attrName}`],e=this.stat[this.attrName.toLowerCase()];return 0!=t&&null!=t&&null!=e?e>=t?"Can":"Cannot":"Disabled"}digitCharArray(){const t=0|this.equip[`req${this.attrName}`];return Number(t).toFixed(0).padStart(3,"0")}data(){return{imgUrl:"images/UI/UIToolTip/Item/Equip/"}}}var et={props:{equip:{required:!1},chara:{required:!1},state:{required:!1},isShow:{default:!0},isShowDebug:{default:!0}},computed:{stat:{get:function(){return this.chara&&this.chara.stat?this.chara.stat:new b.CharacterStat},set:function(){this.$forceUpdate()}}},methods:{_update_frame:function(){let t=$(this.$el).children(".frame"),e=t.children(".content").height();t.innerHeight(e)},canUseEquip:function(){return class{constructor(t,e){}static isUnlimited(t){return 0==t}static isBeginner(t){return-1==t}static isWarrior(t){return 1==t}static isMagician(t){return 2==t}static isBowman(t){return 4==t}static isThief(t){return 8==t}static isPirate(t){return 16==t}static canUseEquip(t,e){let i=1<<Z.baseJob(t)-1;return e>0?i&&e:0==e||null==e||(-1==e?(consolw.error("Not implement beginner job"),!0):void 0)}}.canUseEquip(this.stat._job,this.equip.reqJob)},adjAttr:function(t){return t>0?"+"+t:t.toString()},getEquipCategoryName:function(){return S.c.get(this.equip.id).categoryName},hasPotential:()=>!1,shouldShowAttr(t){return null!=this.equip[t]&&this.equip[t]>0},isEquip:t=>S.c.isEquip(t),onload_icon(t){const e=t.target;e.style.width=2*e.naturalWidth+"px",e.style.height=2*e.naturalHeight+"px"}},updated:function(){this._update_frame()},mounted:function(){$(this.$el).draggable(),this._update_frame()},watch:{"state.display":function(t){if(t)$(this.$el).stop().show();else $(this.$el).hide()},"state.position":function(t){this.state.display&&t&&$(this.$el).position(t)}},components:{texture:K,"equip-req":new tt,"equip-req-level":new class extends tt{constructor(){super()}getReqAttrName(){return"LEV"}getReqState(){const t=this.equip[`req${this.attrName}`],e=this.stat[this.attrName.toLowerCase()];return 0!=t&&null!=t&&null!=e?e>=t?"YellowNumber":"Cannot":"Disabled"}}}},it=(i(443),y(et,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"UIToolTip"},[null!=t.chara&&null!=t.stat&&null!=t.equip?[t.isShow?i("div",{staticClass:"UIToolTip frame",staticStyle:{"/*height":"658px"}},[t._m(0),t._v(" "),t._m(1),t._v(" "),i("div",{staticClass:"UIToolTip content"},[i("div",{staticClass:"c1",staticStyle:{position:"relative",width:"100%",height:"13px"}}),t._v(" "),t.equip.max_start<=15?i("div",[i("div",{staticClass:"c2",staticStyle:{position:"relative",width:"100%",height:"10px"}}),t._v(" "),i("div",{staticClass:"c3",staticStyle:{position:"relative",width:"100%",height:"8px"}})]):t._e(),t._v(" "),t.equip.max_start>15?i("div",[i("div",{staticClass:"c1",staticStyle:{position:"relative",width:"100%",height:"10px"}}),t._v(" "),i("div",{staticClass:"c2",staticStyle:{position:"relative",width:"100%",height:"7px"}})]):t._e(),t._v(" "),i("div",{staticClass:"c3 UIToolTip title",staticStyle:{"z-index":"2",position:"relative",width:"100%",height:"22px","text-align":"center","text-shadow":"1px 1px 0 black, 0 0 1px white"}},[i("span",{style:t.equip.$foreign?"color: red":""},[t._v(t._s(t.equip.name))])]),t._v(" "),i("div",[i("div",{staticClass:"c2",staticStyle:{position:"relative",width:"100%",height:"2px","font-size":"12px","text-align":"center"}}),t._v(" "),t.hasPotential()?i("div",[i("div",{staticClass:"c1",staticStyle:{position:"relative",width:"100%",height:"16px","text-align":"center"}},[t._v("(稀有道具)")])]):t._e(),t._v(" "),t.equip["無法交換"]?i("div",[i("div",{staticClass:"c2",staticStyle:{position:"relative",width:"100%",height:"16px","font-size":"12px","text-align":"center"}},[t._v("無法交換")])]):t._e()]),t._v(" "),i("div",{staticClass:"c3",staticStyle:{position:"relative",width:"100%",height:"8px"}}),t._v(" "),i("div",{staticClass:"c2 UIToolTip dotline",staticStyle:{position:"relative",width:"100%",height:"2px"}}),t._v(" "),i("div",{staticClass:"c1",staticStyle:{position:"relative",width:"100%",height:"6px"}}),t._v(" "),i("div",{staticClass:"c2",staticStyle:{position:"relative",width:"100%",height:"85px"}},[i("div",{staticStyle:{float:"left",position:"relative",width:"12px",height:"100%"}}),t._v(" "),i("div",{staticStyle:{float:"left",position:"relative",width:"83px",height:"100%"}},[i("texture",{staticStyle:{position:"absolute",top:"2px"},attrs:{src:"images/UI/UIToolTip/Item/ItemIcon/base"}}),t._v(" "),t.hasPotential()?i("div",[i("texture",{staticStyle:{position:"absolute",left:"2px",top:"4px"},attrs:{src:"images/UI/UIToolTip/Item/ItemIcon/"+t.equip.potential_level}})],1):t._e(),t._v(" "),"icon"in t.equip?i("img",{staticClass:"UIToolTip equip-icon",attrs:{src:t.equip.icon[""]},on:{load:function(e){t.onload_icon(e)}}}):t._e(),t._v(" "),i("texture",{staticStyle:{position:"absolute",left:"8px",top:"10px"},attrs:{src:"images/UI/UIToolTip/Item/ItemIcon/cover"}})],1),t._v(" "),i("div",{staticStyle:{float:"left",position:"relative",top:"1px",width:"160px",height:"100%"}},[i("div",{staticClass:"c1",staticStyle:{position:"relative",width:"155px",height:"50px"}},[i("div",{staticStyle:{position:"relative",float:"right"}},[t._v("攻擊力增加量")]),t._v(" "),i("div",{staticClass:"UIToolTip attack-digit",staticStyle:{clear:"right"}},[i("texture",{attrs:{src:"images/UI/UIToolTip/Item/Equip/Summary/incline/0"}})],1)]),t._v(" "),i("div",{staticClass:"UIToolTip attrLeft",staticStyle:{float:"left",width:"50%"}},[i("equip-req-level",{attrs:{"attr-name":"Level",equip:t.equip,stat:t.stat}}),t._v(" "),i("div",{staticClass:"c1",staticStyle:{position:"relative",width:"100%",height:"9px","margin-left":"2px"}}),t._v(" "),i("equip-req",{attrs:{"attr-name":"STR",equip:t.equip,stat:t.stat}}),t._v(" "),i("div",{staticClass:"c1",staticStyle:{position:"relative",width:"100%",height:"3px","margin-left":"2px"}}),t._v(" "),i("equip-req",{attrs:{"attr-name":"DEX",equip:t.equip,stat:t.stat}})],1),t._v(" "),i("div",{staticClass:"UIToolTip attrRight",staticStyle:{float:"left",width:"50%"}},[i("div",{staticClass:"c1",staticStyle:{position:"relative",width:"100%",height:"15px","margin-left":"2px"}}),t._v(" "),i("equip-req",{attrs:{"attr-name":"LUK",equip:t.equip,stat:t.stat}}),t._v(" "),i("div",{staticClass:"c1",staticStyle:{position:"relative",width:"100%",height:"3px","margin-left":"2px"}}),t._v(" "),i("equip-req",{attrs:{"attr-name":"INT",equip:t.equip,stat:t.stat}})],1)])]),t._v(" "),i("div",{staticClass:"c3",staticStyle:{position:"relative",width:"100%",height:"20px"}}),t._v(" "),i("div",{staticClass:"c1 UIToolTip req-job",staticStyle:{position:"relative",width:"100%",height:"30px"}},[i("div",{staticStyle:{position:"relative",left:"13px"}},[i("texture",{attrs:{src:"images/UI/UIToolTip/Item/Equip/Job/normal"}}),t._v(" "),t.equip.reqJob<0?i("texture",{attrs:{src:"images/UI/UIToolTip/Item/Equip/Job/enable/0",origin:"-"}}):0==t.equip.reqJob||null==t.equip.reqJob?i("div",[i("texture",{attrs:{src:"images/UI/UIToolTip/Item/Equip/Job/enable/0",origin:"-"}}),t._v(" "),i("texture",{attrs:{src:"images/UI/UIToolTip/Item/Equip/Job/enable/1",origin:"-"}}),t._v(" "),i("texture",{attrs:{src:"images/UI/UIToolTip/Item/Equip/Job/enable/2",origin:"-"}}),t._v(" "),i("texture",{attrs:{src:"images/UI/UIToolTip/Item/Equip/Job/enable/3",origin:"-"}}),t._v(" "),i("texture",{attrs:{src:"images/UI/UIToolTip/Item/Equip/Job/enable/4",origin:"-"}}),t._v(" "),i("texture",{attrs:{src:"images/UI/UIToolTip/Item/Equip/Job/enable/5",origin:"-"}})],1):i("div",[1&t.equip.reqJob?i("texture",{attrs:{src:"images/UI/UIToolTip/Item/Equip/Job/"+(t.canUseEquip()?"enable":"disable")+"/1",origin:"-"}}):t._e(),t._v(" "),2&t.equip.reqJob?i("texture",{attrs:{src:"images/UI/UIToolTip/Item/Equip/Job/"+(t.canUseEquip()?"enable":"disable")+"/2",origin:"-"}}):t._e(),t._v(" "),4&t.equip.reqJob?i("texture",{attrs:{src:"images/UI/UIToolTip/Item/Equip/Job/"+(t.canUseEquip()?"enable":"disable")+"/3",origin:"-"}}):t._e(),t._v(" "),8&t.equip.reqJob?i("texture",{attrs:{src:"images/UI/UIToolTip/Item/Equip/Job/"+(t.canUseEquip()?"enable":"disable")+"/4",origin:"-"}}):t._e(),t._v(" "),16&t.equip.reqJob?i("texture",{attrs:{src:"images/UI/UIToolTip/Item/Equip/Job/"+(t.canUseEquip()?"enable":"disable")+"/5",origin:"-"}}):t._e()],1)],1),t._v(" "),"reqSpecJob"in t.equip?i("div"):t._e()]),t._v(" "),i("div",{staticClass:"c2",staticStyle:{position:"relative",width:"100%",height:"4px"}}),t._v(" "),i("div",{staticClass:"c1 UIToolTip dotline",staticStyle:{position:"relative",width:"100%",height:"2px"}}),t._v(" "),i("div",{staticClass:"c3",staticStyle:{position:"relative",width:"100%",height:"5px"}}),t._v(" "),i("div",{staticClass:"UIToolTip attribute"},[t.isEquip(t.equip.id)?i("div",[i("div",{staticClass:"c1"},[i("span",[t._v("裝備分類 : "+t._s(t.getEquipCategoryName()))])])]):t._e(),t._v(" "),t.shouldShowAttr("incSTR")?i("div",{staticClass:"c2"},[i("span",[t._v("力量 :\t  \t   "+t._s(t.adjAttr(t.equip.incSTR)))])]):t._e(),t._v(" "),t.shouldShowAttr("incSTRr")?i("div",{staticClass:"c3"},[i("span",[t._v("力量 :\t\t   "+t._s(t.adjAttr(t.equip.incSTRr))+"%")])]):t._e(),t._v(" "),t.shouldShowAttr("incDEX")?i("div",{staticClass:"c3"},[i("span",[t._v("敏捷 :\t\t   "+t._s(t.adjAttr(t.equip.incDEX)))])]):t._e(),t._v(" "),t.shouldShowAttr("incDEXr")?i("div",{staticClass:"c3"},[i("span",[t._v("敏捷 :\t\t   "+t._s(t.adjAttr(t.equip.incDEXr))+"%")])]):t._e(),t._v(" "),t.shouldShowAttr("incINT")?i("div",{staticClass:"c3"},[i("span",[t._v("智力 :\t\t   "+t._s(t.adjAttr(t.equip.incINT)))])]):t._e(),t._v(" "),t.shouldShowAttr("incINTr")?i("div",{staticClass:"c3"},[i("span",[t._v("智力 :\t\t   "+t._s(t.adjAttr(t.equip.incINTr))+"%")])]):t._e(),t._v(" "),t.shouldShowAttr("incLUK")?i("div",{staticClass:"c3"},[i("span",[t._v("幸運 :\t\t   "+t._s(t.adjAttr(t.equip.incLUK)))])]):t._e(),t._v(" "),t.shouldShowAttr("incLUKr")?i("div",{staticClass:"c3"},[i("span",[t._v("幸運 :\t\t   "+t._s(t.adjAttr(t.equip.incLUKr))+"%")])]):t._e(),t._v(" "),t.shouldShowAttr("incAllStat")?i("div",{staticClass:"c3"},[i("span",[t._v("所有属性 :\t   "+t._s(t.adjAttr(t.equip.incAllStat)))])]):t._e(),t._v(" "),t.shouldShowAttr("incMHP")?i("div",{staticClass:"c3"},[i("span",[t._v("MaxHP :\t  \t   "+t._s(t.adjAttr(t.equip.incMHP)))])]):t._e(),t._v(" "),t.shouldShowAttr("incMHPr")?i("div",{staticClass:"c3"},[i("span",[t._v("MaxHP :\t\t   "+t._s(t.adjAttr(t.equip.incMHPr))+"%")])]):t._e(),t._v(" "),t.shouldShowAttr("incMMP")?i("div",{staticClass:"c3"},[i("span",[t._v("MaxMP :\t  \t   "+t._s(t.adjAttr(t.equip.incMMP)))])]):t._e(),t._v(" "),t.shouldShowAttr("incMMPr")?i("div",{staticClass:"c3"},[i("span",[t._v("MaxMP :\t\t   "+t._s(t.adjAttr(t.equip.incMMPr))+"%")])]):t._e(),t._v(" "),t.shouldShowAttr("incMDF")?i("div",{staticClass:"c3"},[i("span",[t._v("MaxDF :\t\t   "+t._s(t.adjAttr(t.equip.incMDF)))])]):t._e(),t._v(" "),t.shouldShowAttr("incPAD")?i("div",{staticClass:"c3"},[i("span",[t._v("攻擊力 :\t\t   "+t._s(t.adjAttr(t.equip.incPAD)))])]):t._e(),t._v(" "),t.shouldShowAttr("incPADr")?i("div",{staticClass:"c3"},[i("span",[t._v("攻擊力 :\t\t   "+t._s(t.adjAttr(t.equip.incPADr))+"%")])]):t._e(),t._v(" "),t.shouldShowAttr("incMAD")?i("div",{staticClass:"c3"},[i("span",[t._v("魔法力 :\t\t   "+t._s(t.adjAttr(t.equip.incMAD)))])]):t._e(),t._v(" "),t.shouldShowAttr("incMADr")?i("div",{staticClass:"c3"},[i("span",[t._v("魔法力 :\t\t   "+t._s(t.adjAttr(t.equip.incMADr))+"%")])]):t._e(),t._v(" "),t.shouldShowAttr("incPDD")?i("div",{staticClass:"c3"},[i("span",[t._v("物理防禦力 :     "+t._s(t.adjAttr(t.equip.incPDD)))])]):t._e(),t._v(" "),t.shouldShowAttr("incPDDr")?i("div",{staticClass:"c3"},[i("span",[t._v("物理防禦力 :     "+t._s(t.adjAttr(t.equip.incPDDr))+"%")])]):t._e(),t._v(" "),t.shouldShowAttr("incMDD")?i("div",{staticClass:"c3"},[i("span",[t._v("魔法防禦力 :     "+t._s(t.adjAttr(t.equip.incMDD)))])]):t._e(),t._v(" "),t.shouldShowAttr("incMDDr")?i("div",{staticClass:"c3"},[i("span",[t._v("魔法防禦力 :     "+t._s(t.adjAttr(t.equip.incMDDr))+"%")])]):t._e(),t._v(" "),t.shouldShowAttr("incACC")?i("div",{staticClass:"c3"},[i("span",[t._v("命中值 :\t\t   "+t._s(t.adjAttr(t.equip.incACC)))])]):t._e(),t._v(" "),t.shouldShowAttr("incACCr")?i("div",{staticClass:"c3"},[i("span",[t._v("命中值 :\t\t   "+t._s(t.adjAttr(t.equip.incACCr))+"%")])]):t._e(),t._v(" "),t.shouldShowAttr("incEVA")?i("div",{staticClass:"c3"},[i("span",[t._v("回避值 :\t\t   "+t._s(t.adjAttr(t.equip.incEVA)))])]):t._e(),t._v(" "),t.shouldShowAttr("incEVAr")?i("div",{staticClass:"c3"},[i("span",[t._v("回避值 :\t\t   "+t._s(t.adjAttr(t.equip.incEVAr))+"%")])]):t._e(),t._v(" "),t.shouldShowAttr("incSpeed")?i("div",{staticClass:"c3"},[i("span",[t._v("移动速度 :\t\t   "+t._s(t.adjAttr(t.equip.incSpeed)))])]):t._e(),t._v(" "),t.shouldShowAttr("incJump")?i("div",{staticClass:"c3"},[i("span",[t._v("跳跃力 :\t\t   "+t._s(t.adjAttr(t.equip.incJump)))])]):t._e(),t._v(" "),t.shouldShowAttr("incCraft")?i("div",{staticClass:"c3"},[i("span",[t._v("手技 :\t\t   "+t._s(t.adjAttr(t.equip.incCraft)))])]):t._e(),t._v(" "),t.shouldShowAttr("damR")?i("div",{staticClass:"c3"},[i("span",[t._v("总伤害 :  \t\t   "+t._s(t.adjAttr(t.equip.damR)))])]):t._e(),t._v(" "),t.shouldShowAttr("incDAMr")?i("div",{staticClass:"c3"},[i("span",[t._v("总伤害 :\t  \t   "+t._s(t.adjAttr(t.equip.incDAMr))+"%")])]):t._e(),t._v(" "),t.shouldShowAttr("incCr")?i("div",{staticClass:"c3"},[i("span",[t._v("爆击率 :\t\t   "+t._s(t.adjAttr(t.equip.incCr))+"%")])]):t._e(),t._v(" "),t.shouldShowAttr("incPVPDamage")?i("div",{staticClass:"c3"},[i("span",[t._v("大乱斗时追加攻击力"+t._s(t.adjAttr(t.equip.incPVPDamage))+"%")])]):t._e(),t._v(" "),t.shouldShowAttr("incPQEXPr")?i("div",{staticClass:"c3"},[i("span",[t._v("组队任务经验值增加"+t._s(t.equip.incPQEXPr)+"%")])]):t._e(),t._v(" "),t.shouldShowAttr("incBDR")?i("div",{staticClass:"c3"},[i("span",[t._v("攻击BOSS怪物时，伤害+"+t._s(t.equip.incBDR)+"%")])]):t._e(),t._v(" "),t.shouldShowAttr("bdR")?i("div",{staticClass:"c3"},[i("span",[t._v("攻击BOSS怪物时，伤害+"+t._s(t.equip.bdR)+"%")])]):t._e(),t._v(" "),t.shouldShowAttr("incIMDR")?i("div",{staticClass:"c3"},[i("span",[t._v("無視怪物防禦力"+t._s(t.equip.incIMDR)+"%")])]):t._e(),t._v(" "),t.shouldShowAttr("imdR")?i("div",{staticClass:"c3"},[i("span",[t._v("無視怪物防禦力"+t._s(t.equip.imdR)+"%")])]):t._e(),t._v(" "),t.shouldShowAttr("limitBreak")?i("div",{staticClass:"c3"},[i("span",[t._v("伤害上限突破至"+t._s(t.equip.limitBreak)+"。")])]):t._e(),t._v(" "),t.shouldShowAttr("reduceReq")?i("div",{staticClass:"c3"},[i("span",[t._v("装备等级降低 : -"+t._s(t.equip.reduceReq)+"。")])]):t._e(),t._v(" "),t.shouldShowAttr("knockback")?i("div",{staticClass:"c3"},[i("span",[t._v("直接攻击时"+t._s(t.equip.knockback)+"的比率发生后退现象。")])]):t._e(),t._v(" "),t.shouldShowAttr("tuc")?i("div",{staticClass:"c1"},[i("span",[t._v("可使用捲軸次數 : "+t._s(t.equip.tuc))])]):t._e()]),t._v(" "),i("div",{staticClass:"c3",staticStyle:{position:"relative",width:"100%",height:"9px"}}),t._v(" "),t.hasPotential()?i("div",[i("div",{staticClass:"c2 UIToolTip dotline",staticStyle:{position:"relative",width:"100%",height:"2px"}}),t._v(" "),i("div",{staticClass:"c3",staticStyle:{position:"relative",width:"100%",height:"22px"}}),t._v(" "),t._m(2)]):t._e(),t._v(" "),t.equip.desc?i("div",[i("div",{staticClass:"c2 UIToolTip dotline",staticStyle:{position:"relative",width:"100%",height:"2px"}}),t._v(" "),i("div",{staticClass:"c1",staticStyle:{position:"relative",width:"100%",height:"5px"}}),t._v(" "),i("div",{staticStyle:{"padding-left":"12px"}},[t._v("\n\t\t\t\t\t\t"+t._s(t.equip.desc)+"\n\t\t\t\t\t\t"),i("div",{staticClass:"c3",staticStyle:{position:"relative",width:"100%",height:"13px"}})])]):t._e(),t._v(" "),t._e()])]):t._e(),t._v(" "),t.isShowDebug?i("div",{staticClass:"debug-info"},[i("div",{attrs:{contenteditable:"true",spellcheck:"false"}},[i("span",[t._v("id   : ")]),t._v(t._s(t.equip.id))]),t._v(" "),t.equip._name?i("div",{attrs:{contenteditable:"true",spellcheck:"false"}},[i("span",[t._v("nameEn: ")]),t._v(t._s(t.equip._name))]):i("div",{attrs:{contenteditable:"true",spellcheck:"false"}},[i("span",[t._v("name : ")]),t._v(t._s(t.equip.name))]),t._v(" "),i("div",[t._v("Added in: "+t._s(t.equip.__v))]),t._v(" "),i("div",{attrs:{contenteditable:"true",spellcheck:"false"}},[i("span",[t._v("islot: ")]),t._v(t._s(t.equip.islot))]),t._v(" "),i("div",{attrs:{contenteditable:"true",spellcheck:"false"}},[i("span",[t._v("vslot: ")]),t._v(t._s(t.equip.vslot))])]):t._e()]:t._e()],2)},[function(){var t=this.$createElement,e=this._self._c||t;return e("table",{staticStyle:{position:"absolute",left:"0px",top:"0px",width:"100%",height:"100%"}},[e("thead",[e("tr",[e("td",{staticClass:"UIToolTip border-head",attrs:{colspan:"3"}})])]),this._v(" "),e("tbody",{staticStyle:{height:"auto"}},[e("tr",[e("td",{staticClass:"UIToolTip border-left"}),this._v(" "),e("td",{staticClass:"UIToolTip container"}),this._v(" "),e("td",{staticClass:"UIToolTip border-right"})])]),this._v(" "),e("tfoot",[e("tr",[e("td",{staticClass:"UIToolTip border-foot",attrs:{colspan:"3"}})])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"custom-fixed"},[e("div",{staticClass:"UIToolTip Item-Frame-cover"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"UIToolTip attribute",staticStyle:{height:"48px","font-size":"11px"}},[e("div",{staticClass:"c1",staticStyle:{position:"relative",width:"100%",height:"33%"}},[this._v("DEX : +6%")]),this._v(" "),e("div",{staticClass:"c2",staticStyle:{position:"relative",width:"100%",height:"33%"}},[this._v("STR : +3%")]),this._v(" "),e("div",{staticClass:"c3",staticStyle:{position:"relative",width:"100%",height:"33%"}},[this._v("DEX : +12")])])}],!1,null,null,null).exports),nt={mixins:[P,x],data:function(){return{html:[],is_show:!1,guiData:null}},methods:{_getImgStyle:function(t,e,i,n){let s,r,o=this.guiData,a={};return o&&(r=o[t])&&(s=r[""])?(e&&(a.width=r.__w+"px"),i&&(a.height=r.__h+"px"),a.background=`url(${s}) ${n?"repeat":"no-repeat"}`,a):a},show:function(t){this.is_show=!0,t&&this.$nextTick(function(){t()})},hide:function(t){this.is_show=!1,t&&this.$nextTick(function(){t()})},$position:function(...t){let e;t.length>1&&(e=t.pop()),$(this.$el).position(...t),e&&this.$nextTick(function(){e()})},setPosition:function(...t){let e;t.length>1&&(e=t.pop()),$(this.$el).position(...t),e&&this.$nextTick(function(){e()})}},mounted:async function(){this.hide(),this.guiData=await this.$refs.gui_root._$promise},components:{"ui-draggable":V}},st=(i(445),i(426)),rt=i.n(st),ot=y(nt,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ui-draggable",{attrs:{zIndex:t.zIndex,position:t.position}},[i("gui-root",{ref:"gui_root",attrs:{p:"/UI/UIToolTip/Item/Frame2"}},[t.is_show?i("div",{staticClass:"header frame",on:{mousedown:function(e){return"button"in e||!t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?"button"in e&&0!==e.button?null:void t.requireOrder(e):null}}},[t.guiData?i("div",{staticClass:"frame-warp"},[i("table",{staticClass:"frame-inner"},[i("tr",[i("td",{style:t._getImgStyle("nw",!0,!0,!1)}),t._v(" "),i("td",{style:t._getImgStyle("n",!1,!0,!0)}),t._v(" "),i("td",{style:t._getImgStyle("ne",!0,!0,!1)})]),t._v(" "),i("tr",[i("td",{style:t._getImgStyle("w",!0,!1,!0)}),t._v(" "),i("td",{style:t._getImgStyle("c",!1,!1,!0)}),t._v(" "),i("td",{style:t._getImgStyle("e",!0,!1,!0)})]),t._v(" "),i("tr",[i("td",{style:t._getImgStyle("sw",!0,!0,!1)}),t._v(" "),i("td",{style:t._getImgStyle("s",!1,!0,!0)}),t._v(" "),i("td",{style:t._getImgStyle("se",!0,!0,!1)})])])]):t._e(),t._v(" "),i("div",{ref:"content",staticClass:"header content"},[t._l([].concat(t.html).reverse(),function(e,n){return i("div",{class:"z"+(t.html.length-n),domProps:{innerHTML:t._s(e)}})}),t._v(" "),t._t("default")],2)]):t._e()])],1)},[],!1,null,"40c717aa",null);"function"==typeof rt.a&&rt()(ot);var at=ot.exports,lt={props:["items"],methods:{getValue:function(){let t=$(this.$el).sortable("toArray");if(t.length!=this.items.length)throw new Error("Can't get value before update.");let e={};for(let i=0;i<t.length;++i)e[t[i]]=i;let i=[];for(let n=0;n<t.length;++n){const s=t[n];i[n]=this.items[e[s]]}this.$emit("update:items",i),this.$emit("input",i)}},mounted:function(){let t=$(this.$el);t.sortable({update:this.getValue.bind(this)}),t.disableSelection()},beforeUpdate:function(){this.$nextTick(function(){if(!this.items)return;let t=$(this.$el),e=[];for(let t=0;t<this.items.length;++t){const i=this.items[t].id;(e[t]=$("#"+i)).remove()}for(let i=0;i<e.length;++i)t.append(e);t.sortable()})},updated:function(){$(this.$el).sortable()},watch:{items:function(t){}}},ct=(i(447),y(lt,function(){var t=this,e=t.$createElement;return(t._self._c||e)("ul",[t._l(t.items,function(e,i){return t._t("default",null,{item:e,index:i})})],2)},[],!1,null,null,null).exports),ut={data:function(){return{active:!1}}},ht=(i(449),y(ut,function(){var t=this.$createElement;return(this._self._c||t)("div",{class:this.active?"active":""},[this._t("default")],2)},[],!1,null,"550d0e17",null).exports);var dt={mixins:[{props:{position:{default:function(){return{x:0,y:0,my:"left top",at:"left top",collision:"flip"}}}},methods:{calcPosition:function(t){let e,i=Object.assign({x:0,y:0,my:"left top",at:"left top",collision:"flip"},this.position);if((e=i.my.replace(/[+-\d]/g,"").split(" ")).length>=2){let n=t.x||i.x,s=t.y||i.y;n>0?e[0]+="+"+n||"":n<0&&(e[0]+=n||""),s>0?e[1]+="+"+s||"":s<0&&(e[1]+=s||""),e=e.join(" ")}return i.my=e,i},setPosition:function(t){$(this.$el).position(t)}},watch:{position:{handler:function(t){let e=this.calcPosition(t);e.of?alert("JQueryUI.position(option)\nlost option.of:selector"):this.setPosition(e)},deep:!0}}}],props:{show:!0},data:function(){return{_cp_onclick:null}},methods:{},watch:{show:function(t){t?this._cp_onclick||(this._cp_onclick=function(){this.$emit("close")}.bind(this),$(window).on("mousedown",this._cp_onclick)):($(window).off("mousedown",this._cp_onclick),this._cp_onclick=null)}}},mt=(i(451),y(dt,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"menu-frame"},[e("transition",{attrs:{name:"menu"}},[this.show?e("div",{staticClass:"menu"},[this._t("default")],2):this._e()])],1)},[],!1,null,null,null).exports),pt=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{display:"inline-flex",width:"100%"}},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.selected_category,expression:"selected_category"}],staticStyle:{flex:"1"},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selected_category=e.target.multiple?i:i[0]}}},[t._l(t.categoryGroupList,function(e,n){return[e.length>1?[i("optgroup",{attrs:{label:n}},t._l(e,function(e){return i("option",{domProps:{value:e.id_prefix}},[t._v(t._s(e.categoryName))])}))]:[i("option",{domProps:{value:e[0].id_prefix}},[t._v(t._s(e[0].categoryName))])]]})],2),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.search_text,expression:"search_text"}],ref:"input_search",attrs:{type:"search",list:"search_param"},domProps:{value:t.search_text},on:{keydown:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.searchNextText(e):null},input:function(e){e.target.composing||(t.search_text=e.target.value)}}}),t._v(" "),i("datalist",{attrs:{id:"search_param"}},[i("option",{attrs:{value:"劍"}},[t._v("item Name")]),t._v(" "),i("option",{attrs:{value:"01302000"}},[t._v("item ID")]),t._v(" "),i("option",{attrs:{value:"<attr>:/<regexp>/"}}),t._v(" "),i("option",{attrs:{value:"$style:/21158/"}},[t._v("face | hair")]),t._v(" "),i("option",{attrs:{value:"$foreign:/true/"}},[t._v("external resource")]),t._v(" "),i("option",{domProps:{value:"__v:/"+t.DATA_TAG_VERSION+"/"}},[t._v("current version")])]),t._v(" "),i("div",{staticStyle:{position:"relative",display:"inline-block"}},[i("button",{directives:[{name:"ui",rawName:"v-ui:show.mouseenter",value:200,expression:"200",arg:"show",modifiers:{mouseenter:!0}},{name:"ui",rawName:"v-ui:hide.mouseleave",value:200,expression:"200",arg:"hide",modifiers:{mouseleave:!0}},{name:"ui",rawName:"v-ui:ref",value:"setting",expression:"'setting'",arg:"ref"}],staticStyle:{padding:"0"}},[i("span",{staticClass:"ui-icon ui-icon-gear"})]),t._v(" "),i("div",{directives:[{name:"ui",rawName:"v-ui:hide",arg:"hide"},{name:"ui",rawName:"v-ui:show.mouseenter",value:200,expression:"200",arg:"show",modifiers:{mouseenter:!0}},{name:"ui",rawName:"v-ui:hide.mouseleave",value:200,expression:"200",arg:"hide",modifiers:{mouseleave:!0}},{name:"ui",rawName:"v-ui:ref",value:"setting",expression:"'setting'",arg:"ref"}],ref:"setting",staticStyle:{position:"absolute",left:"0",top:"0",background:"#e9e9e9",border:"1px solid #ddd",width:"12em","text-align":"left",padding:"0.25em 0.5em"}},[i("div",[i("label",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.onlyShowSearchResult,expression:"onlyShowSearchResult"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.onlyShowSearchResult)?t._i(t.onlyShowSearchResult,null)>-1:t.onlyShowSearchResult},on:{change:function(e){var i=t.onlyShowSearchResult,n=e.target,s=!!n.checked;if(Array.isArray(i)){var r=t._i(i,null);n.checked?r<0&&(t.onlyShowSearchResult=i.concat([null])):r>-1&&(t.onlyShowSearchResult=i.slice(0,r).concat(i.slice(r+1)))}else t.onlyShowSearchResult=s}}}),t._v("Only show result of search")])]),t._v(" "),i("div",[i("label",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.displayMode,expression:"displayMode"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.displayMode)?t._i(t.displayMode,null)>-1:t.displayMode},on:{change:function(e){var i=t.displayMode,n=e.target,s=!!n.checked;if(Array.isArray(i)){var r=t._i(i,null);n.checked?r<0&&(t.displayMode=i.concat([null])):r>-1&&(t.displayMode=i.slice(0,r).concat(i.slice(r+1)))}else t.displayMode=s}}}),t._v("display: "+t._s(t.displayMode?"plain":"list"))])])])])])}],ft={props:{buttons:{type:Array,required:!0},type:{type:String,default:"checkbox"},active:{type:[Number,Array],required:!1}},methods:{onclick:function(t){let e;if("checkbox"==this.type){const i=this.active.indexOf(t);i>=0?(e=[...this.active]).splice(i,1):e=[...this.active,t];const n=this.buttons;let s=e.map(function(t){return n[t]});this.$emit("update:active",e),this.$emit("change",s)}else this.$emit("update:active",t),this.$emit("change",this.buttons[t])},_update_element:function(){let t;if("checkbox"==this.type){if(!this.active)return;t=this.active}else{if(!Number.isInteger(this.active))return;t=[this.active]}let e=this.$el;[...this.$el.querySelectorAll(".active")].forEach(function(t){t.classList.remove("active")});t.forEach(function(t){let i=e.querySelector(`[data-id="${t}"]`);i&&i.classList.toggle("active")})}},watch:{active:function(){this._update_element()}},mounted:function(){this._update_element()}},_t=(i(453),y(ft,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ui-button-group"},t._l(t.buttons,function(e,n){return i("button",{style:e.style,attrs:{"data-id":n},on:{click:function(e){t.onclick(n)}}},[t._t("default",null,{text:e.text,value:e.value,index:n})],2)}))},[],!1,null,null,null).exports);let gt=[{text:"Cash",value:"cash",style:{}},{text:"Standard",value:"standard",style:{}},{text:"Female",value:"female",style:{}},{text:"Male",value:"male",style:{}},{text:"Universal",value:"neutral",style:{}},{text:"Unlimited",value:"unlimited",style:{}},{text:"Beginner",value:"beginner",style:{}},{text:"Warrior",value:"warrior",style:{}},{text:"Magician",value:"magician",style:{}},{text:"Bowman",value:"bowman",style:{}},{text:"Thief",value:"thief",style:{}},{text:"Pirate",value:"pirate",style:{}}];const vt=[{text:"黑",value:"0",style:{background:"#333333"}},{text:"藍",value:"1",style:{background:"#0000ff"}},{text:"紅",value:"2",style:{background:"#ff0000"}},{text:"綠",value:"3",style:{background:"#00ff00"}},{text:"棕",value:"4",style:{background:"#804040"}},{text:"青",value:"5",style:{background:"#00ffc0"}},{text:"紫",value:"6",style:{background:"#8000ff"}},{text:"粉",value:"7",style:{background:"#ff00ff"}},{text:"銀",value:"8",style:{background:"#C0C0C0"}}],yt=[{text:"黑",value:"0",style:{background:"#333333"}},{text:"紅",value:"1",style:{background:"#ff0000"}},{text:"橙",value:"2",style:{background:"#ff8040"}},{text:"黃",value:"3",style:{background:"#ffff00"}},{text:"綠",value:"4",style:{background:"#00ff00"}},{text:"藍",value:"5",style:{background:"#0000ff"}},{text:"紫",value:"6",style:{background:"#8000ff"}},{text:"棕",value:"7",style:{background:"#804040"}}];class xt{static cash(t){return t.cash>0}static standard(t){return null==t.cash||0==t.cash}static female(t){return 1==t.gender}static male(t){return 0==t.gender}static neutral(t){return 2==t.gender}static unlimited(t){return 0==t.reqJob||null==t.reqJob}static beginner(t){return-1==t.reqJob}static warrior(t){return t.reqJob>0&&1&t.reqJob}static magician(t){return t.reqJob>0&&2&t.reqJob}static bowman(t){return t.reqJob>0&&4&t.reqJob}static thief(t){return t.reqJob>0&&8&t.reqJob}static pirate(t){return t.reqJob>0&&16&t.reqJob}}xt.list=[];for(let t=0;t<gt.length;++t){let e=xt[gt[t].value];xt.list[t]=e}const bt=new class{constructor(){this.pageSize=100}calcPage(t){return Math.trunc(t/this.pageSize)}};var At={data:function(){return{search_text:"",search_next:-1,column_count:5,loaded_equip_list:[],loaded_category:null,equip_list:[],search_equip_result:[],selected_category:"0000",filters:[],face_color:0,hair_color:0,hair_color2:0,hair_mix2:0,page:0,face_names:null,hair_names:null,onlyShowSearchResult:!0,displayMode:!0}},computed:{DATA_TAG_VERSION:()=>window.DATA_TAG+window.DATA_VERSION,categoryGroupList:function(){let t={},e={};return Object.values(S.c._info).forEach(i=>{let n=i.slot.match(/^[0-9a-z]+/),s=n?n[0].toLocaleLowerCase():i.slot;t[s]||(t[s]=[]);let r=i.categoryName||i.listPath;e[r]||(t[s].push(i),e[r]=1)}),t},filter_buttons:()=>gt,face_color_buttons:()=>vt,hair_color_buttons:()=>yt,__count_of_item_in_page:function(){const t=this.page*bt.pageSize,e=Math.min(t+bt.pageSize,this.equip_list.length)-t;return Math.min(Math.max(0,e),this.equip_list.length)},__count_of_page:function(){return Math.ceil(this.equip_list.length/bt.pageSize)}},methods:{getHairMixColor1CSS(){return Object.assign({"clip-path":"polygon(50% 0%, 0% 20%, 0% 90%, 100% 90%, 100% 20%)"},yt[this.hair_color].style)},getHairMixColor2CSS(){return Object.assign({"clip-path":"polygon(0% 10%, 0% 80%, 50% 100%, 100% 80%, 100% 10%)"},null!=this.hair_color2?yt[this.hair_color2].style:{})},copyImageUrl:function(t,e){let i=t.currentTarget.querySelector("img");if(i)if(i.src.startsWith("data:image/")){if(window.confirm("圖示可能不存在，確定要複製圖示位置？")){let t=S.c.getIconRawUrl(e);copyToClipboard(t)}}else copyToClipboard(i.src)},copyInnerText:function(t){let e=t.currentTarget,i=e.innerText;copyToClipboard(i),SelectText(e)},copyText:function(t,e){copyToClipboard(e)},search_equip:async function(t){if(this.clearSearch(),!t||""==t)return this.search_equip_result=[],void(this.onlyShowSearchResult&&await this.loadList());{await this.loadList();let e=this.search_equip_result;this.search_equip_result=[];try{let i=t.match(/^(.+):\/(.+)\/$/);if(i)try{let t=i[1];if("$style"==t&&Number.isSafeInteger(Number(i[2]))){let t=i[2];if(this._is_category_hair()){let e=S.a.getColorHairID(String(t),0);this.search_equip_result=this.equip_list.filter(function(t,i){let n=null==t.id||S.a.getColorHairID(t.id,0);if(n&&-1!=n.indexOf(e))return t.$page=bt.calcPage(i),!0})}else if(this._is_category_face()){let e=S.a.getColorFaceID(String(t),0);this.search_equip_result=this.equip_list.filter(function(t,i){let n=null==t.id||S.a.getColorFaceID(t.id,0);if(n&&-1!=n.indexOf(e))return t.$page=bt.calcPage(i),!0})}}if(0==this.search_equip_result.length){let e=RegExp(i[2]);this.search_equip_result=this.equip_list.filter(function(i,n){if(null!=i[t]&&e.test(i[t]))return i.$page=bt.calcPage(n),!0}),this.search_equip_result&&this.search_equip_result[0]&&this.search_equip_result[0][t]&&this.search_equip_result[0][t].localeCompare&&this.search_equip_result.sort(function(e,i){let n=e[t],s=i[t];return n.localeCompare(s)})}}catch(t){return void(this.search_equip_result=[])}else this.search_equip_result=this.equip_list.filter(function(e,i){if(e.id&&e.id.indexOf(t)>=0||e.name&&(e.name.indexOf(t)>=0||e.name.toLowerCase().indexOf(t.toLowerCase())>=0))return e.$page=bt.calcPage(i),!0}),this.search_equip_result.sort(function(t,e){return t.name&&e.name?t.name.localeCompare(e.name):0})}catch(t){this.search_equip_result=e}e=null,this.search_equip_result.length?this.searchNextText():console.log("no search: "+t)}this.onlyShowSearchResult&&(this.page=0,this.equip_list=this.search_equip_result)},searchNextText:function(t){if(this.onlyShowSearchResult)return;let e=(this.search_next+1)%this.search_equip_result.length,i=this.search_equip_result[e];if(i){const t=i.$page;this.change_page(t),this.$nextTick(function(){window.location.hash="item"+i.id,this.$refs.input_search.focus()}),this.search_next=e}},clearSearch:function(){this.search_next=-1,window.location.hash=""},change_page:function(t){this.page!=t&&(this.$refs.content.scrollTop=0),this.page=t,this.clearSearch()},__get_category_slot:function(){const t=S.c.get(this.selected_category);return t?t.slot:null},_is_category_face:function(){return"face"==this.__get_category_slot()},_is_category_hair:function(){return"hair"==this.__get_category_slot()},__get_color:function(){return this._is_category_face()?this.face_color:this._is_category_hair()?this.hair_color:""},loadList:async function(){if(null==this.selected_category)return;this.clearSearch();const t=this.selected_category,e=S.c.get(t),i=e.listPath||e.path||e.slot,n=i+this.__get_color();let s=[];if(n!=this.loaded_category||0==this.loaded_equip_list.length){if(!(s=JSON.parse(await $get.asset(`equips/${n}.json`)))||!s.length)return void alert("? "+n);if(await concat_external_resource(n,s),"weapon"==e.slot){let e=JSON.parse(await $get.asset("equips/0170.json")),i=t.slice(2,4),n=e.filter(t=>t.__t.indexOf(i)>=0);s=s.concat(n)}s.forEach(S.b[i]||S.b._equip),this.loaded_equip_list=s,this.loaded_category=n}else s=[...this.loaded_equip_list];if(s.length>0){let t=this.__get_filter();t&&(s=s.filter(t))}if(this.equip_list=s,s.length>0){const t=this.__count_of_page;t>0?this.page>=t&&(this.page=t-1):this.page=0,s.sort((t,e)=>t.id-e.id)}this.equip_list=s},__get_filter:function(){if(!this.filters.length)return null;const t=xt.list,e=this.filters.map(function(e){return i=>!t[e](i)});return e.length?function(t){return e.every(function(e){return e(t)})}:void 0},__get_item:function(t){const e=this.page*bt.pageSize;return this.equip_list[e+t]},__get_item_id:function(t){return this.__get_item(t).id},__get_item_name:function(t){return this.__get_item(t).name||"[null]"},__get_item_name_ex:function(t){return this.__get_item(t)._name||"[null]"},__get_item_icon_url:function(t){let e=this.__get_item(t);return e.icon&&e.icon[""]?e.icon[""]:"images/warning.png"},__face_or_hair_img_onerror:async function(t){let e=this.__get_item(t);if(e){if(e.icon&&e.icon[""]){let t=e.icon[""];if(t.startsWith("images/")){let i=t.split("/"),n=i.splice(i.length-1,1);i[1]="ls";let s=JSON.parse(await $get(i.join("/"))),r=s.indexOf(n)+1;if(r<s.length)return n=s[r],i[1]="images",void(e.icon[""]=i.join("/")+"/"+n)}}e.icon[""]="images/warning.png"}else alert("error: this.__get_item(index)\nindex="+t)},clickItem:function(t,e){if("0170"==this.selected_category){let t=this.__get_item(e);console.groupCollapsed("沒有設定職業，無法使用點裝武器"),console.log("click cash weapon: [%s] %s %o",t.id,t.name,t),console.groupEnd()}else{let i=this.__get_item(e);this.$emit("clickItem",{event:t,id:i.id,category:this.selected_category,equip:i}),console.log("Use equip: [%s] %s %o",i.id,i.name,i)}},hoverItem:function(t,e){let i=this.__get_item(e);this.$emit("hoverItem",{event:t,id:i.id,category:this.selected_category,equip:i})},mouseleaveItem:function(t,e){let i=this.__get_item(e);this.$emit("mouseleaveItem",{event:t,id:i.id,category:this.selected_category,equip:i})},selected_category_onchange:function(t){"0002"==t?this.face_color=Number(window.chara.renderer.faceColor):"0003"!=t&&"0004"!=t||(this.hair_color=Number(window.chara.renderer.hairColor),window.chara.renderer.slots.hairColor2&&window.chara.renderer.slots.hairMix2&&(this.hair_color2=Number(window.chara.renderer.slots.hairColor2),this.hair_mix2=Math.trunc(100*Number(window.chara.renderer.slots.hairMix2)))),this.search_equip(this.search_text)}},watch:{search_text:function(t,e){this.search_equip(t)},onlyShowSearchResult:async function(t){t?this.search_equip(this.search_text):this.search_text&&await this.loadList()},selected_category:function(t){this.selected_category_onchange(t)},filters:async function(){await this.loadList()},face_color:async function(){this.$emit("faceColor",{color:this.face_color}),await this.loadList()},hair_color:async function(){this.$emit("hairColor",{color:this.hair_color}),await this.loadList()},hair_color2:async function(){this.$emit("hairColor2",{color:this.hair_color2,mix:this.hair_mix2/100})},hair_mix2:async function(){this.$emit("hairMix2",{color:this.hair_color2,mix:this.hair_mix2/100})}},mounted:function(){this.selected_category="0000",this.selected_category_onchange(this.selected_category)},directives:{focus:{inserted:function(t){t.focus()}}},components:{"ui-draggable":V,"ui-button-group":_t},mixins:[P]},wt=(i(455),y(At,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ui-draggable",{staticClass:"ui-dialog ui-equip-box",attrs:{zIndex:t.zIndex,position:t.position}},[t.minimum?i("div",{staticClass:"header",style:t.header_style,on:{mousedown:function(e){return"button"in e||!t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?"button"in e&&0!==e.button?null:void t.requireOrder(e):null}}},[t._v("\n\t\tEquip box\n\t\t"),i("div",{staticClass:"header-buttons"},[i("button",{staticClass:"header-button",on:{click:function(e){t.minimum=!t.minimum}}},[i("span",{staticClass:"ui-icon ui-icon-plus"})])])]):i("div",{staticClass:"header btn-group",style:t.header_style,on:{mousedown:function(e){return"button"in e||!t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?"button"in e&&0!==e.button?null:void t.requireOrder(e):null}}},[i("div",{staticClass:"header",staticStyle:{"text-align":"left"}},[t._v("\n\t\t\tEquip box\n\t\t\t"),i("div",{staticClass:"header-buttons"},[i("button",{staticClass:"header-button",on:{click:function(e){t.minimum=!t.minimum}}},[i("span",{staticClass:"ui-icon ui-icon-minus"})])])]),t._v(" "),i("div",[t._m(0)]),t._v(" "),i("div",{staticClass:"button-area",staticStyle:{background:"lightgray"}},[i("ui-button-group",{staticClass:"filters",attrs:{type:"checkbox",buttons:t.filter_buttons,active:t.filters},on:{"update:active":function(e){t.filters=e}},scopedSlots:t._u([{key:"default",fn:function(t){var e=t.text,n=t.value;return[i("img",{attrs:{src:"images/toolstrip_"+n+".png",alt:e}})]}}])}),t._v(" "),t._is_category_face()?i("ui-button-group",{staticClass:"face_color",attrs:{type:"radio",buttons:t.face_color_buttons,active:t.face_color},on:{"update:active":function(e){t.face_color=e}},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.text,s=e.value;return[i("span",{style:{background:"#"+s},attrs:{value:s,title:s+". "+n+"色臉型"}},[t._v(t._s(n))])]}}])}):t._e(),t._v(" "),t._is_category_hair()?[i("ui-button-group",{staticClass:"hair_color",attrs:{type:"radio",buttons:t.hair_color_buttons,active:t.hair_color},on:{"update:active":function(e){t.hair_color=e}},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.text,s=e.value;return[i("span",{style:{background:"#"+s},attrs:{value:s,title:s+". "+n+"色髮型 ("+s+")"}},[t._v(t._s(n))])]}}])}),t._v(" "),i("table",{staticClass:"hair_color",staticStyle:{"font-family":"monospace","text-shadow":"0 0 5px white","border-spacing":"1px"}},[i("tr",[i("td",{style:t.getHairMixColor1CSS()},[i("span",{staticStyle:{width:"3em",display:"inline-block"}},[t._v(t._s(String(100-t.hair_mix2))+"%")])]),t._v(" "),i("td",{staticStyle:{width:"100%"}},[i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.hair_mix2,expression:"hair_mix2",modifiers:{number:!0}}],staticStyle:{width:"100%"},attrs:{type:"range",min:"0",max:"100",step:"1"},domProps:{value:t.hair_mix2},on:{__r:function(e){t.hair_mix2=t._n(e.target.value)},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),i("td",{style:t.getHairMixColor2CSS()},[i("span",{staticStyle:{width:"3em",display:"inline-block"}},[t._v(t._s(String(t.hair_mix2))+"%")])])])]),t._v(" "),i("ui-button-group",{staticClass:"hair_color",attrs:{type:"radio",buttons:t.hair_color_buttons,active:t.hair_color2},on:{"update:active":function(e){t.hair_color2=e}},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.text,s=e.value;return[i("span",{style:{background:"#"+s},attrs:{value:s,title:s+". "+n+"色髮型 ("+s+")"}},[t._v(t._s(n))])]}}])})]:t._e()],2),t._v(" "),t.__count_of_item_in_page>0?i("div",{staticClass:"header pagination top"},[t._l(t.__count_of_page,function(e){return[t.page==e-1?i("a",{staticClass:"active",attrs:{title:e-1}},[t._v(t._s(e))]):i("a",{attrs:{title:e-1,href:"#"},on:{click:function(i){i.preventDefault(),t.change_page(e-1)}}},[t._v(t._s(e))])]})],2):t._e()]),t._v(" "),i("div",{ref:"content",staticClass:"content",style:t.content_style,on:{mousedown:function(e){return"button"in e||!t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?"button"in e&&0!==e.button?null:void t.requireOrder(e):null}}},[t.__count_of_item_in_page>0?[0==t.displayMode?[i("ul",{staticClass:"item-list",staticStyle:{width:"calc(6*48px)"}},[t._l(t.__count_of_item_in_page,function(e){return[i("li",{key:t.__get_item_id(e-1),staticClass:"list-item",attrs:{id:"item"+t.__get_item_id(e-1)},on:{click:function(i){return"button"in i||!t._k(i.keyCode,"left",37,i.key,["Left","ArrowLeft"])?"button"in i&&0!==i.button?null:void t.clickItem(i,e-1):null},mousemove:function(i){t.hoverItem(i,e-1)},mouseleave:function(i){t.mouseleaveItem(i,e-1)}}},[i("table",{staticClass:"item-detail",on:{contextmenu:function(t){t.preventDefault()}}},[i("tr",[i("td",{staticClass:"item-icon-outer-frame",attrs:{rowspan:"2"}},[i("div",{staticClass:"item-icon-frame",on:{mousedown:function(i){return"button"in i||!t._k(i.keyCode,"right",39,i.key,["Right","ArrowRight"])?"button"in i&&2!==i.button?null:void t.copyImageUrl(i,t.__get_item_id(e-1)):null}}},[i("img",{attrs:{src:t.__get_item_icon_url(e-1)},on:{error:function(i){t.__face_or_hair_img_onerror(e-1)}}})])]),t._v(" "),i("td",{on:{mousedown:function(e){return"button"in e||!t._k(e.keyCode,"right",39,e.key,["Right","ArrowRight"])?"button"in e&&2!==e.button?null:void t.copyInnerText(e):null}}},[i("div",{staticClass:"item-name",style:t.__get_item(e-1).$foreign?"color: red":""},[t._v(t._s(t.__get_item_name(e-1)))])])]),t._v(" "),i("tr",[i("td",{staticClass:"item-id",on:{mousedown:function(e){return"button"in e||!t._k(e.keyCode,"right",39,e.key,["Right","ArrowRight"])?"button"in e&&2!==e.button?null:void t.copyInnerText(e):null}}},[t._v(t._s(t.__get_item_id(e-1)))])])])])]})],2)]:[i("div",{staticClass:"item-list-sm",style:{width:"calc("+(t.column_count+1)+"*48px)"}},[t._l(t.__count_of_item_in_page,function(e){return[i("div",{key:t.__get_item_id(e-1),staticClass:"list-item-sm",attrs:{id:"item"+t.__get_item_id(e-1)},on:{contextmenu:function(t){t.preventDefault()},click:function(i){return"button"in i||!t._k(i.keyCode,"left",37,i.key,["Left","ArrowLeft"])?"button"in i&&0!==i.button?null:void t.clickItem(i,e-1):null},mousemove:function(i){t.hoverItem(i,e-1)},mouseleave:function(i){t.mouseleaveItem(i,e-1)}}},[i("table",{staticClass:"item-detail"},[i("tr",[i("td",{staticClass:"item-icon-outer-frame"},[i("div",{staticClass:"item-icon-frame-sm",on:{mousedown:[function(i){return"button"in i||!t._k(i.keyCode,"right",39,i.key,["Right","ArrowRight"])?"button"in i&&2!==i.button?null:void t.copyText(i,t.__get_item_name(e-1)):null},function(i){if("button"in i&&1!==i.button)return null;i.preventDefault(),t.copyText(i,t.__get_item_id(e-1))}]}},[i("img",{attrs:{src:t.__get_item_icon_url(e-1)},on:{error:function(i){t.__face_or_hair_img_onerror(e-1)}}})])])])])])]})],2)]]:[i("div",{pre:!0,attrs:{style:"cursor: default;"}},[t._v("\n\t\t\t\tNo search item\n\t\t\t")])]],2),t._v(" "),t.minimum?t._e():i("div",{staticClass:"footer",style:t.header_style,on:{mousedown:function(e){return"button"in e||!t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?"button"in e&&0!==e.button?null:void t.requireOrder(e):null}}},[t.minimum?t._e():i("div",{staticStyle:{"text-align":"center"}},[t.__count_of_item_in_page>0?i("div",{staticClass:"pagination bottom"},[t._l(t.__count_of_page,function(e){return[t.page==e-1?i("a",{staticClass:"active",attrs:{title:e-1}},[t._v(t._s(e))]):i("a",{attrs:{title:e-1,href:"#"},on:{click:function(i){i.preventDefault(),t.change_page(e-1)}}},[t._v(t._s(e))])]})],2):t._e()])])])},pt,!1,null,null,null).exports),St={props:["chara"],computed:{frag_list:{get:function(){let t=[];this.chara.__forceUpdate();for(let e in this.chara.__frag_list){let i=this.chara.__frag_list[e];i.texture&&(t.push(i),i.graph2&&i.graph2.texture&&t.push(i.graph2),i.graph3&&i.graph3.texture&&t.push(i.graph3))}return t},set:function(t){}}},methods:{get_ft_src:function(t){return t.texture.src},get_ft_style:function(t){return{left:t.relative.x+"px",top:t.relative.y+"px",opacity:t.opacity,width:t.width+"px",height:t.height+"px",filter:t.filter.toString()}}}},Ct=(i(457),y(St,function(){var t=this,e=t.$createElement,i=t._self._c||e;return null!=t.chara?i("div",{staticClass:"frame"},[i("div",{staticClass:"center"},[t._l(t.frag_list,function(e){return[i("img",{class:e.classList,style:t.get_ft_style(e),attrs:{src:t.get_ft_src(e)}})]})],2)]):t._e()},[],!1,null,"678b2630",null).exports),Bt={props:["chara"],computed:{frag_list:{get:function(){let t=[];this.chara.__forceUpdate();for(let e in this.chara.__frag_list){let i=this.chara.__frag_list[e];i.texture&&(t.push(i),i.graph2&&i.graph2.texture&&t.push(i.graph2),i.graph3&&i.graph3.texture&&t.push(i.graph3))}return t},set:function(t){}}},data:function(){return{is_loading:!1,is_processing:!1}},methods:{get_ft_src:function(t){return t.texture.src},get_ft_style:function(t){return{left:t.relative.x+"px",top:t.relative.y+"px",opacity:t.opacity,width:t.width+"px",height:t.height+"px",filter:t.filter.toString()}},fake:function(){let t=this;t.is_processing=!0,setTimeout(function(){t.is_processing=!1},1e3)},download2:function(){let t="data:image/svg+xml;utf8,"+this.$el.innerHTML;window.open(t)}},update:function(){this.$el.style.cursor="not-allowed",this.is_loading=!0},updated:function(){this.$el.style.cursor="default",this.is_loading=!1}},Vt=(i(459),y(Bt,function(){var t=this,e=t.$createElement,i=t._self._c||e;return null!=t.chara?i("div",{staticClass:"ui-character-frame"},[i("svg",{attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0",y:"0",width:"64",height:"96"}},[i("g",{attrs:{transform:"translate(32, 96)"}},[t._l(t.frag_list,function(e){return[i("image",{class:e.classList,attrs:{x:e.relative.x,y:e.relative.y,width:e.width,height:e.height,opacity:e.opacity,"xlink:href":t.get_ft_src(e)}})]})],2)]),t._v(" "),i("transition",{attrs:{name:"fade"}},[t.is_loading?i("div",{staticClass:"ui-character-center"},[i("div",{staticClass:"ui-character-text"},[t._v("\n\t\t\t\tloading...\n\t\t\t")])]):t._e()]),t._v(" "),i("transition",{attrs:{name:"fade"}},[t.is_processing?i("div",{staticClass:"ui-character-center"},[i("div",{staticClass:"ui-character-text"},[t._v("\n\t\t\t\tprocess...\n\t\t\t")])]):t._e()])],1):t._e()},[],!1,null,null,null).exports),Mt={props:["sceneChara"],data:function(){return{isShowDebug:!1,isShowEquipImageFilter:[]}},computed:{actions:()=>character_action_list,emotions:()=>character_emotion_list,chara:function(){return this.sceneChara.renderer},chara_angle:{get:function(){return Math.round(Math.degrees(this.sceneChara.renderer.angle))},set:function(t){this.sceneChara.renderer.angle=Math.radians(t)}}},methods:{pauseAnimation:function(){this.chara.speed=this.chara.speed?0:1},isEquip:function(t){return S.c.isEquip(t)},getEquipCategoryName:function(t){return S.c.get(t.id).categoryName}}},kt=(i(461),y(Mt,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"UIEditCharacterAttribute",staticStyle:{display:"inline-block"}},[i("div",{staticStyle:{display:"inline-block","vertical-align":"top"}},[i("table",{staticStyle:{"border-collapse":"collapse","border-spacing":"0px"}},[i("tr",[i("td",[t.chara.speed?[i("button",{attrs:{title:"pause animation"},on:{click:t.pauseAnimation}},[i("img",{attrs:{src:"images/player_pause.png",alt:"pause"}})])]:[i("button",{attrs:{title:"play animation"},on:{click:t.pauseAnimation}},[i("img",{attrs:{src:"images/player_play.png",alt:"play"}})])]],2),t._v(" "),i("td",{attrs:{title:"animation speed"}},[i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.chara.speed,expression:"chara.speed",modifiers:{number:!0}}],attrs:{type:"number",min:"0",max:"5",step:"0.01"},domProps:{value:t.chara.speed},on:{input:function(e){e.target.composing||t.$set(t.chara,"speed",t._n(e.target.value))},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),i("td",[t.sceneChara.enablePhysics?i("button",{on:{click:function(e){t.sceneChara.enablePhysics=!1}}},[t._v("禁用物理")]):i("button",{on:{click:function(e){t.sceneChara.enablePhysics=!0}}},[t._v("啟用物理")])]),t._v(" "),i("td",[i("button",{on:{click:function(e){t.isShowDebug=!t.isShowDebug}}},[t._v("細節")])])]),t._v(" "),i("tr",[i("th",[t._v("動作")]),t._v(" "),i("td",[i("select",{directives:[{name:"model",rawName:"v-model",value:t.chara.action,expression:"chara.action"}],on:{clicl:function(e){t.update_frame_list("action")},change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.chara,"action",e.target.multiple?i:i[0])}}},[t.actions.length?t._l(t.actions,function(e){return i("option",[t._v(t._s(e))])}):i("option",{attrs:{disabled:"",value:""}},[t._v("請選擇")])],2)]),t._v(" "),i("td",[i("select",{directives:[{name:"model",rawName:"v-model.number",value:t.chara.action_frame,expression:"chara.action_frame",modifiers:{number:!0}}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(e){var i="_value"in e?e._value:e.value;return t._n(i)});t.$set(t.chara,"action_frame",e.target.multiple?i:i[0])}}},[t.actions.length?t._l(t.chara.action_frame_count,function(e){return i("option",{domProps:{value:e-1}},[t._v(t._s(e-1))])}):i("option",{attrs:{disabled:""}},[t._v(" ---- ")])],2)])]),t._v(" "),i("tr",[i("th",[t._v("表情")]),t._v(" "),i("td",[i("select",{directives:[{name:"model",rawName:"v-model",value:t.chara.emotion,expression:"chara.emotion"}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.chara,"emotion",e.target.multiple?i:i[0])}}},[t.emotions.length?t._l(t.emotions,function(e){return i("option",[t._v(t._s(e))])}):i("option",{attrs:{disabled:"",value:""}},[t._v("請選擇")])],2)]),t._v(" "),i("td",[i("select",{directives:[{name:"model",rawName:"v-model.number",value:t.chara.emotion_frame,expression:"chara.emotion_frame",modifiers:{number:!0}}],on:{clicl:function(e){t.update_frame_list("emotion")},change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(e){var i="_value"in e?e._value:e.value;return t._n(i)});t.$set(t.chara,"emotion_frame",e.target.multiple?i:i[0])}}},[t.emotions.length?t._l(t.chara.emotion_frame_count,function(e){return i("option",{domProps:{value:e-1}},[t._v(t._s(e-1))])}):i("option",{attrs:{disabled:""}},[t._v(" ---- ")])],2)])]),t._v(" "),i("tr",{attrs:{title:"禁用物理後可設定角色的位置"}},[i("th",[t._v("位置")]),t._v(" "),i("td",{staticStyle:{display:"flex",position:"absolute"},attrs:{colspan:"3"}},[i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.chara.x,expression:"chara.x",modifiers:{number:!0}}],attrs:{disabled:t.sceneChara.enablePhysics,type:"number",min:"-9999",max:"9999"},domProps:{value:t.chara.x},on:{input:function(e){e.target.composing||t.$set(t.chara,"x",t._n(e.target.value))},blur:function(e){t.$forceUpdate()}}}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.chara.y,expression:"chara.y",modifiers:{number:!0}}],attrs:{disabled:t.sceneChara.enablePhysics,type:"number",min:"-9999",max:"9999"},domProps:{value:t.chara.y},on:{input:function(e){e.target.composing||t.$set(t.chara,"y",t._n(e.target.value))},blur:function(e){t.$forceUpdate()}}}),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.sceneChara.$layer,expression:"sceneChara.$layer",modifiers:{number:!0}}],attrs:{disabled:t.sceneChara.enablePhysics,type:"number",min:"0",max:"7"},domProps:{value:t.sceneChara.$layer},on:{input:function(e){e.target.composing||t.$set(t.sceneChara,"$layer",t._n(e.target.value))},blur:function(e){t.$forceUpdate()}}})])]),t._v(" "),i("tr",{attrs:{title:"禁用物理後可設定角色的旋轉和方向"}},[i("td",{attrs:{colspan:"4"}},[i("label",[t._v("旋轉：\n\t\t\t\t\t\t"),i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.chara_angle,expression:"chara_angle",modifiers:{number:!0}}],attrs:{disabled:t.sceneChara.enablePhysics,type:"number",min:"-180",max:"180",step:"10"},domProps:{value:t.chara_angle},on:{input:function(e){e.target.composing||(t.chara_angle=t._n(e.target.value))},blur:function(e){t.$forceUpdate()}}}),t._v("°\n\t\t\t\t\t")]),t._v(" "),i("label",[t._v("方向：\n\t\t\t\t\t\t"),i("select",{directives:[{name:"model",rawName:"v-model.number",value:t.chara.front,expression:"chara.front",modifiers:{number:!0}}],attrs:{disabled:t.sceneChara.enablePhysics},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(e){var i="_value"in e?e._value:e.value;return t._n(i)});t.$set(t.chara,"front",e.target.multiple?i:i[0])}}},[i("option",{attrs:{value:"1"}},[t._v("右")]),t._v(" "),i("option",{attrs:{value:"-1"}},[t._v("左")])])])])]),t._v(" "),i("tr",[i("th",{attrs:{rowspan:"2"}},[t._v("耳朵")]),t._v(" "),i("td",[i("label",{staticClass:"chara_ear"},[t._v("人類"),i("input",{directives:[{name:"model",rawName:"v-model",value:t.chara.ear,expression:"chara.ear"}],attrs:{type:"radio",name:"chara_ear",value:"human",checked:""},domProps:{checked:t._q(t.chara.ear,"human")},on:{change:function(e){t.$set(t.chara,"ear","human")}}})])]),t._v(" "),i("td",[i("label",{staticClass:"chara_ear"},[t._v("妖精"),i("input",{directives:[{name:"model",rawName:"v-model",value:t.chara.ear,expression:"chara.ear"}],attrs:{type:"radio",name:"chara_ear",value:"elf"},domProps:{checked:t._q(t.chara.ear,"elf")},on:{change:function(e){t.$set(t.chara,"ear","elf")}}})])]),t._v(" "),i("td",[i("label",{staticClass:"chara_ear"},[t._v("木雷普"),i("input",{directives:[{name:"model",rawName:"v-model",value:t.chara.ear,expression:"chara.ear"}],attrs:{type:"radio",name:"chara_ear",value:"lef"},domProps:{checked:t._q(t.chara.ear,"lef")},on:{change:function(e){t.$set(t.chara,"ear","lef")}}})])])]),t._v(" "),i("tr",[i("td",[i("label",{staticClass:"chara_ear"},[t._v("亥雷普"),i("input",{directives:[{name:"model",rawName:"v-model",value:t.chara.ear,expression:"chara.ear"}],attrs:{type:"radio",name:"chara_ear",value:"highlef"},domProps:{checked:t._q(t.chara.ear,"highlef")},on:{change:function(e){t.$set(t.chara,"ear","highlef")}}})])])])])]),t._v(" "),t.isShowDebug?i("div",{staticStyle:{width:"100%",display:"inline-block","user-select":"text"}},[i("hr"),t._v(" "),i("table",{staticStyle:{"border-spacing":"0px","border-collapse":"collapse",width:"100%"}},[t._l(t.chara.slots._ordered_slot,function(e,n){return[e?[i("tr",{on:{mouseover:function(e){t.isShowEquipImageFilter[n]=!0},mouseleave:function(e){t.isShowEquipImageFilter[n]=!1}}},[i("td",[t._v("\n\t\t\t\t\t\t\t"+t._s(t.getEquipCategoryName(e))+"\n\t\t\t\t\t\t")]),t._v(" "),i("td",{staticStyle:{width:"32px",height:"32px"}},[i("img",{staticClass:"equip-icon",attrs:{src:e.getIconUrl()}})]),t._v(" "),i("td",[i("div",[t._v(t._s(e.name))]),t._v(" "),i("div",[t._v(t._s(e.id))])]),t._v(" "),i("td")]),t._v(" "),i("transition",{attrs:{name:"fade"}},[i("tr",{directives:[{name:"show",rawName:"v-show",value:t.isShowEquipImageFilter[n],expression:"isShowEquipImageFilter[index]"}],on:{mouseover:function(e){t.isShowEquipImageFilter[n]=!0},mouseleave:function(e){t.isShowEquipImageFilter[n]=!1}}},[i("td"),t._v(" "),i("td",[t._v("opacity")]),t._v(" "),i("td",[i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.opacity,expression:"equip.opacity",modifiers:{number:!0}}],attrs:{type:"range",min:"0.01",max:"1",step:"0.01"},domProps:{value:e.opacity},on:{__r:function(i){t.$set(e,"opacity",t._n(i.target.value))},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),i("td",[i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.opacity,expression:"equip.opacity",modifiers:{number:!0}}],attrs:{type:"number",min:"0.01",max:"1",step:"0.01"},domProps:{value:e.opacity},on:{input:function(i){i.target.composing||t.$set(e,"opacity",t._n(i.target.value))},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),i("td",[i("button",{staticClass:"btn",on:{click:function(t){e.opacity=1}}},[t._v("×")])])])]),t._v(" "),i("transition",{attrs:{name:"fade"}},[i("tr",{directives:[{name:"show",rawName:"v-show",value:t.isShowEquipImageFilter[n],expression:"isShowEquipImageFilter[index]"}],on:{mouseover:function(e){t.isShowEquipImageFilter[n]=!0},mouseleave:function(e){t.isShowEquipImageFilter[n]=!1}}},[i("td"),t._v(" "),i("td",[t._v("hue")]),t._v(" "),i("td",[i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.filter.hue,expression:"equip.filter.hue",modifiers:{number:!0}}],attrs:{type:"range",min:"0",max:"359"},domProps:{value:e.filter.hue},on:{__r:function(i){t.$set(e.filter,"hue",t._n(i.target.value))},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),i("td",[i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.filter.hue,expression:"equip.filter.hue",modifiers:{number:!0}}],attrs:{type:"number",min:"0",max:"359"},domProps:{value:e.filter.hue},on:{input:function(i){i.target.composing||t.$set(e.filter,"hue",t._n(i.target.value))},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),i("td",[i("button",{staticClass:"btn",on:{click:function(t){e.filter.hue=0}}},[t._v("×")])])])]),t._v(" "),i("transition",{attrs:{name:"fade"}},[i("tr",{directives:[{name:"show",rawName:"v-show",value:t.isShowEquipImageFilter[n],expression:"isShowEquipImageFilter[index]"}],on:{mouseover:function(e){t.isShowEquipImageFilter[n]=!0},mouseleave:function(e){t.isShowEquipImageFilter[n]=!1}}},[i("td"),t._v(" "),i("td",[t._v("sat")]),t._v(" "),i("td",[i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.filter.sat,expression:"equip.filter.sat",modifiers:{number:!0}}],attrs:{type:"range",min:"0",max:"999"},domProps:{value:e.filter.sat},on:{__r:function(i){t.$set(e.filter,"sat",t._n(i.target.value))},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),i("td",[i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.filter.sat,expression:"equip.filter.sat",modifiers:{number:!0}}],attrs:{type:"number",min:"0",max:"999"},domProps:{value:e.filter.sat},on:{input:function(i){i.target.composing||t.$set(e.filter,"sat",t._n(i.target.value))},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),i("td",[i("button",{staticClass:"btn",on:{click:function(t){e.filter.sat=100}}},[t._v("×")])])])]),t._v(" "),i("transition",{attrs:{name:"fade"}},[i("tr",{directives:[{name:"show",rawName:"v-show",value:t.isShowEquipImageFilter[n],expression:"isShowEquipImageFilter[index]"}],on:{mouseover:function(e){t.isShowEquipImageFilter[n]=!0},mouseleave:function(e){t.isShowEquipImageFilter[n]=!1}}},[i("td"),t._v(" "),i("td",[t._v("bri")]),t._v(" "),i("td",[i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.filter.bri,expression:"equip.filter.bri",modifiers:{number:!0}}],attrs:{type:"range",min:"0",max:"999"},domProps:{value:e.filter.bri},on:{__r:function(i){t.$set(e.filter,"bri",t._n(i.target.value))},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),i("td",[i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.filter.bri,expression:"equip.filter.bri",modifiers:{number:!0}}],attrs:{type:"number",min:"0",max:"999"},domProps:{value:e.filter.bri},on:{input:function(i){i.target.composing||t.$set(e.filter,"bri",t._n(i.target.value))},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),i("td",[i("button",{staticClass:"btn",on:{click:function(t){e.filter.bri=100}}},[t._v("×")])])])]),t._v(" "),i("transition",{attrs:{name:"fade"}},[i("tr",{directives:[{name:"show",rawName:"v-show",value:t.isShowEquipImageFilter[n],expression:"isShowEquipImageFilter[index]"}],on:{mouseover:function(e){t.isShowEquipImageFilter[n]=!0},mouseleave:function(e){t.isShowEquipImageFilter[n]=!1}}},[i("td"),t._v(" "),i("td",[t._v("contrast")]),t._v(" "),i("td",[i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.filter.contrast,expression:"equip.filter.contrast",modifiers:{number:!0}}],attrs:{type:"range",min:"0",max:"999"},domProps:{value:e.filter.contrast},on:{__r:function(i){t.$set(e.filter,"contrast",t._n(i.target.value))},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),i("td",[i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.filter.contrast,expression:"equip.filter.contrast",modifiers:{number:!0}}],attrs:{type:"number",min:"0",max:"999"},domProps:{value:e.filter.contrast},on:{input:function(i){i.target.composing||t.$set(e.filter,"contrast",t._n(i.target.value))},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),i("td",[i("button",{staticClass:"btn",on:{click:function(t){e.filter.contrast=100}}},[t._v("×")])])])])]:t._e()]})],2)]):t._e()])},[],!1,null,"a60da6e2",null).exports),Pt=i(87);var It={store:new r.a.Store({state:{},actions:{}}),data:function(){return{spawns:[],m:{type:"m",id:8880141,x:0,y:0,mobTime:0,f:0,hide:0,fh:1,cy:0,rx0:0,rx1:0},is_clear:!0}},computed:{},methods:{onCollapsed:function(){this.hidePreview()},showPreview:async function(t,e){let i=t.currentTarget,n="m"==e.type?"Mob":"Npc",s=this.$root.$refs.smallTip,r=await Pt.b.loadLifeDesc(e),o=$get.imageUrl(`/${n}/${e.id}/stand/0`);s.html=["<div>"+r.name+"</div>"+`<img src="${o}" />`],s.show(function(){s.setPosition({my:"right center",at:"left center",of:i,collision:"fit"})})},hidePreview:function(t){this.$root.$refs.smallTip.hide()},addSpawn:function(){if(scene_map&&scene_map.lifeMgr){this.m.type.match(/m|n/)||window.alert("life type: 'm' or 'n'");let t=new Pt.a(this.m);t.y=t.cy,scene_map.lifeMgr.spawnPoints.push(t)}this.reload()},reload:function(){const t=scene_map.lifeMgr.spawnPoints;this.spawns=new Array(t.length);for(let e=0;e<t.length;++e)this.$set(this.spawns,e,t[e]);this.is_clear=!1,this.$emit("resize")},removeAll:function(){this.is_clear=!0,this.spawns=[],this.$emit("resize")},killAll:function(){scene_map.lifeMgr.entities.forEach(t=>t.die())}},mounted:function(){this.$on("onCollapsed",this.onCollapsed)}},Dt=(i(464),y(It,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"ui-life-list"},[i("table",[i("thead",[i("tr",[i("td",{attrs:{colspan:"9"}},[i("button",{staticStyle:{float:"right"},attrs:{title:"Issues: not work"},on:{click:t.removeAll}},[t._v("Remove all")]),t._v(" "),i("button",{staticStyle:{float:"right"},attrs:{title:"Issues: not work ??"},on:{click:t.reload}},[t._v("reload")]),t._v(" "),i("button",{staticStyle:{float:"right"},on:{click:t.killAll}},[t._v("Kill all")])])]),t._v(" "),t._m(0),t._v(" "),i("tr",{staticClass:"item new-item",on:{mouseover:function(e){t.showPreview(e,t.m)},mouseleave:t.hidePreview}},[i("td",[i("button",{staticClass:"input",on:{click:t.addSpawn}},[t._v("add")])]),t._v(" "),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.m.id,expression:"m.id"}],staticClass:"input-mobid",attrs:{type:"number",id:"mob-id",min:"1",max:"9999999"},domProps:{value:t.m.id},on:{input:function(e){e.target.composing||t.$set(t.m,"id",e.target.value)}}})]),t._v(" "),i("td",[i("select",{directives:[{name:"model",rawName:"v-model",value:t.m.type,expression:"m.type"}],attrs:{id:"mob-type"},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.m,"type",e.target.multiple?i:i[0])}}},[i("option",{attrs:{value:"m"}},[t._v("Mob")]),t._v(" "),i("option",{attrs:{value:"n"}},[t._v("Npc")])])]),t._v(" "),i("td",[i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.m.x,expression:"m.x",modifiers:{number:!0}}],staticClass:"input",attrs:{type:"number",id:"mob-x"},domProps:{value:t.m.x},on:{input:function(e){e.target.composing||t.$set(t.m,"x",t._n(e.target.value))},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),i("td",[i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.m.cy,expression:"m.cy",modifiers:{number:!0}}],staticClass:"input",attrs:{type:"number",id:"mob-y"},domProps:{value:t.m.cy},on:{input:function(e){e.target.composing||t.$set(t.m,"cy",t._n(e.target.value))},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.m.f,expression:"m.f"}],staticClass:"input",attrs:{type:"checkbox",id:"mob-flip"},domProps:{checked:Array.isArray(t.m.f)?t._i(t.m.f,null)>-1:t.m.f},on:{change:function(e){var i=t.m.f,n=e.target,s=!!n.checked;if(Array.isArray(i)){var r=t._i(i,null);n.checked?r<0&&t.$set(t.m,"f",i.concat([null])):r>-1&&t.$set(t.m,"f",i.slice(0,r).concat(i.slice(r+1)))}else t.$set(t.m,"f",s)}}})]),t._v(" "),i("td",[i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.m.fh,expression:"m.fh",modifiers:{number:!0}}],staticClass:"input",attrs:{type:"number",id:"mob-fh"},domProps:{value:t.m.fh},on:{input:function(e){e.target.composing||t.$set(t.m,"fh",t._n(e.target.value))},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),i("td",[i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.m.rx0,expression:"m.rx0",modifiers:{number:!0}}],staticClass:"input",attrs:{type:"number",id:"mob-rx0"},domProps:{value:t.m.rx0},on:{input:function(e){e.target.composing||t.$set(t.m,"rx0",t._n(e.target.value))},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),i("td",[i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.m.rx1,expression:"m.rx1",modifiers:{number:!0}}],staticClass:"input",attrs:{type:"number",id:"mob-rx1"},domProps:{value:t.m.rx1},on:{input:function(e){e.target.composing||t.$set(t.m,"rx1",t._n(e.target.value))},blur:function(e){t.$forceUpdate()}}})])])]),t._v(" "),i("tbody",t._l(t.spawns,function(e,n){return i("tr",{staticClass:"item",on:{mouseover:function(i){t.showPreview(i,e)},mouseleave:t.hidePreview}},[i("td",[i("button",{staticClass:"input",staticStyle:{"text-align":"center"},attrs:{title:"preview"}},[t._v(t._s(n))])]),t._v(" "),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.id,expression:"spawn.id"}],staticClass:"input-mobid",attrs:{type:"number",min:"1",max:"9999999"},domProps:{value:e.id},on:{input:function(i){i.target.composing||t.$set(e,"id",i.target.value)}}})]),t._v(" "),i("td",[i("select",{directives:[{name:"model",rawName:"v-model",value:e.type,expression:"spawn.type"}],on:{change:function(i){var n=Array.prototype.filter.call(i.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(e,"type",i.target.multiple?n:n[0])}}},[i("option",{attrs:{value:"m"}},[t._v("Mob")]),t._v(" "),i("option",{attrs:{value:"n"}},[t._v("Npc")])])]),t._v(" "),i("td",[i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.x,expression:"spawn.x",modifiers:{number:!0}}],staticClass:"input",attrs:{type:"number"},domProps:{value:e.x},on:{input:function(i){i.target.composing||t.$set(e,"x",t._n(i.target.value))},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),i("td",[i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.cy,expression:"spawn.cy",modifiers:{number:!0}}],staticClass:"input",attrs:{type:"number"},domProps:{value:e.cy},on:{input:function(i){i.target.composing||t.$set(e,"cy",t._n(i.target.value))},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),i("td",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.f,expression:"spawn.f"}],staticClass:"input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.f)?t._i(e.f,null)>-1:e.f},on:{change:function(i){var n=e.f,s=i.target,r=!!s.checked;if(Array.isArray(n)){var o=t._i(n,null);s.checked?o<0&&t.$set(e,"f",n.concat([null])):o>-1&&t.$set(e,"f",n.slice(0,o).concat(n.slice(o+1)))}else t.$set(e,"f",r)}}})]),t._v(" "),i("td",[i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.fh,expression:"spawn.fh",modifiers:{number:!0}}],staticClass:"input",attrs:{type:"number"},domProps:{value:e.fh},on:{input:function(i){i.target.composing||t.$set(e,"fh",t._n(i.target.value))},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),i("td",[i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.rx0,expression:"spawn.rx0",modifiers:{number:!0}}],staticClass:"input",attrs:{type:"number"},domProps:{value:e.rx0},on:{input:function(i){i.target.composing||t.$set(e,"rx0",t._n(i.target.value))},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),i("td",[i("input",{directives:[{name:"model",rawName:"v-model.number",value:e.rx1,expression:"spawn.rx1",modifiers:{number:!0}}],staticClass:"input",attrs:{type:"number"},domProps:{value:e.rx1},on:{input:function(i){i.target.composing||t.$set(e,"rx1",t._n(i.target.value))},blur:function(e){t.$forceUpdate()}}})])])}))])])},[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tr",[i("td",[i("label",{attrs:{for:"mob-preview"}},[t._v("\n\t\t\t\t\t\t#\n\t\t\t\t\t")])]),t._v(" "),i("td",[i("label",{attrs:{for:"mob-id"}},[t._v("ID")])]),t._v(" "),i("td",[i("label",{attrs:{for:"mob-type"}},[t._v("type")])]),t._v(" "),i("td",[i("label",{attrs:{for:"mob-x"}},[t._v("x")])]),t._v(" "),i("td",[i("label",{attrs:{for:"mob-y"}},[t._v("y")])]),t._v(" "),i("td",[i("label",{attrs:{for:"mob-flip"}},[t._v("flip")])]),t._v(" "),i("td",[i("label",{attrs:{for:"mob-fh"}},[t._v("fh")])]),t._v(" "),i("td",[i("label",{attrs:{for:"mob-rx0"}},[t._v("rx0")])]),t._v(" "),i("td",[i("label",{attrs:{for:"mob-rx1"}},[t._v("rx1")])])])}],!1,null,"ea11de16",null).exports),Tt={props:["objs","displayMode"],data:function(){return{aaaa:0}},methods:{isShowRX:function(t){return 4==t||5==t},isShowRY:function(t){return 5==t||7==t},isShowCX:function(t){return 1==t||3==t||4==t||6==t||7==t},isShowCY:function(t){return 2==t||3==t||5==t||6==t||7==t},get_ObjPath_style:function(t){let e=t.display_aabb?{background:t.aabb_color}:{};return e["border-bottom"]="1px solid black",e},scrollIntoView:function(t,e){const i=e.aabb.center;$gv.m_viewRect.setCenter(i.x,i.y),e.$select(),t.currentTarget.scrollIntoView(),this.aaaa++},fupdate:function(){this.$forceUpdate()},copyToClipboard:function(t,e){window.SelectText(t.currentTarget)}}},Et=(i(466),y(Tt,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{staticStyle:{display:"none"}},[t._v(t._s(t.aaaa))]),t._v(" "),t._l(t.objs,function(e,n){return[i("div",[i("div",{staticClass:"info sticky",style:t.get_ObjPath_style(e),attrs:{title:"select it and scroll into view"},on:{click:function(i){t.scrollIntoView(i,e)}}},[i("span",[t._v("["+t._s(n)+"]")]),t._v(" "),i("span",{staticClass:"text",on:{contextmenu:function(i){i.preventDefault(),t.copyToClipboard(i,e._url)}}},[t._v(t._s(e._url))])]),t._v(" "),i("div",{staticClass:"view"},[2!=t.displayMode?i("div",{staticClass:"info"},[i("table",{staticClass:"table"},[i("tr",[i("td",[t._v("type(sign)")]),t._v(" "),i("td",[i("input-number",{staticClass:"input",attrs:{type:"number"},model:{value:e.type,callback:function(i){t.$set(e,"type",t._n(i))},expression:"obj.type"}})],1)]),t._v(" "),i("tr",[i("td",[t._v("x")]),t._v(" "),i("td",[i("input-number",{staticClass:"input",attrs:{type:"number"},model:{value:e.x,callback:function(i){t.$set(e,"x",t._n(i))},expression:"obj.x"}})],1)]),t._v(" "),i("tr",[i("td",[t._v("y")]),t._v(" "),i("td",[i("input-number",{staticClass:"input",attrs:{type:"number"},model:{value:e.y,callback:function(i){t.$set(e,"y",t._n(i))},expression:"obj.y"}})],1)]),t._v(" "),i("tr",[i("td",[t._v("z")]),t._v(" "),i("td",[i("input-number",{staticClass:"input",attrs:{type:"number"},model:{value:e.z,callback:function(i){t.$set(e,"z",t._n(i))},expression:"obj.z"}})],1)]),t._v(" "),i("tr",[i("td",[t._v("zM")]),t._v(" "),i("td",[i("input-number",{staticClass:"input",attrs:{type:"number"},model:{value:e.zM,callback:function(i){t.$set(e,"zM",t._n(i))},expression:"obj.zM"}})],1)]),t._v(" "),i("tr",[i("td",[t._v("flip")]),t._v(" "),i("td",[i("input-number",{staticClass:"input",attrs:{type:"number",min:"0",max:"1"},model:{value:e.f,callback:function(i){t.$set(e,"f",t._n(i))},expression:"obj.f"}})],1)]),t._v(" "),null!=e.typeb?[i("tr",[i("td",[t._v("typeb")]),t._v(" "),i("td",[i("input-select",{staticClass:"input",model:{value:e.typeb,callback:function(i){t.$set(e,"typeb",t._n(i))},expression:"obj.typeb"}},[i("option",{attrs:{value:"0",title:""}},[t._v("default")]),t._v(" "),i("option",{attrs:{value:"1",title:"horizontal fill"}},[t._v("repeat-x")]),t._v(" "),i("option",{attrs:{value:"2",title:"vertical fill"}},[t._v("repeat-y")]),t._v(" "),i("option",{attrs:{value:"3",title:"fill"}},[t._v("fill")]),t._v(" "),i("option",{attrs:{value:"4",title:"horizontal roll"}},[t._v("roll-x")]),t._v(" "),i("option",{attrs:{value:"5",title:"vertical roll"}},[t._v("roll-y")]),t._v(" "),i("option",{attrs:{value:"6",title:"horizontal fill roll"}},[t._v("fill roll-x")]),t._v(" "),i("option",{attrs:{value:"7",title:"vertical fill roll"}},[t._v("fill roll-y")])])],1)]),t._v(" "),i("tr",[i("td",[t._v("a")]),t._v(" "),i("td",[i("input-number",{staticClass:"input",attrs:{min:"0",max:"255",type:"number"},model:{value:e.a,callback:function(i){t.$set(e,"a",t._n(i))},expression:"obj.a"}})],1)]),t._v(" "),t.isShowRX(e.typeb)?i("tr",[i("td",[t._v("rx")]),t._v(" "),i("td",[i("input-number",{staticClass:"input",attrs:{type:"number",title:"橫向滾動速度"},model:{value:e.rx,callback:function(i){t.$set(e,"rx",t._n(i))},expression:"obj.rx"}})],1)]):t._e(),t._v(" "),t.isShowRY(e.typeb)?i("tr",[i("td",[t._v("ry")]),t._v(" "),i("td",[i("input-number",{staticClass:"input",attrs:{type:"number",title:"縱向滾動速度"},model:{value:e.ry,callback:function(i){t.$set(e,"ry",t._n(i))},expression:"obj.ry"}})],1)]):t._e(),t._v(" "),t.isShowCX(e.typeb)?i("tr",[i("td",[t._v("cx")]),t._v(" "),i("td",[i("input-number",{staticClass:"input",attrs:{type:"number",min:"0",title:"橫向間隔"},model:{value:e.cx,callback:function(i){t.$set(e,"cx",t._n(i))},expression:"obj.cx"}})],1)]):t._e(),t._v(" "),t.isShowCY(e.typeb)?i("tr",[i("td",[t._v("cy")]),t._v(" "),i("td",[i("input-number",{staticClass:"input",attrs:{type:"number",min:"0",title:"縱向間隔"},model:{value:e.cy,callback:function(i){t.$set(e,"cy",t._n(i))},expression:"obj.cy"}})],1)]):t._e()]:t._e()],2)]):i("div",{staticClass:"info"},[i("div",[t._v(t._s(e.constructor.name))]),t._v(" "),i("div",[i("table",{staticClass:"tb"},t._l(e._raw,function(e,n){return i("tr",[i("td",[t._v(t._s(n))]),t._v(" "),i("td",[t._v(t._s(e))])])}))])]),t._v(" "),e.textures.length&&e.textures[e.frame].texture?i("div",{staticClass:"imgbox"},[i("div",{staticClass:"info"},[e.textures[e.frame]._url.length>300?[i("a",[t._v("...")])]:[i("a",{attrs:{href:e.textures[e.frame]._url}},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e._texture_base_path)),"MapBackBase"!=e.constructor.name?i("span",{staticClass:"red-text"},[t._v("/"+t._s(e.frame))]):t._e()])]],2),t._v(" "),i("div",[i("img",{staticClass:"img",attrs:{src:e.textures[e.frame].texture.src}})])]):t._e(),t._v(" "),1==t.displayMode?i("div",{staticClass:"info"},[e.textures.length&&e.textures[e.frame].texture?i("table",{staticClass:"table"},[i("tr",[i("td",[t._v("frame")]),t._v(" "),i("td",[i("input-number",{staticClass:"input-sm",attrs:{min:0,max:e.textures.length-1,type:"number"},on:{input:t.fupdate},model:{value:e.frame,callback:function(i){t.$set(e,"frame",t._n(i))},expression:"obj.frame"}}),t._v(" / "+t._s(e.textures.length-1))],1)]),t._v(" "),i("tr",[i("td",[t._v("center:")]),t._v(" "),i("td",[i("div",{staticClass:"input-xy"},[i("input-number",{attrs:{type:"number"},model:{value:e.textures[e.frame].x,callback:function(i){t.$set(e.textures[e.frame],"x",t._n(i))},expression:"obj.textures[obj.frame].x"}}),t._v(" "),i("input-number",{attrs:{type:"number"},model:{value:e.textures[e.frame].y,callback:function(i){t.$set(e.textures[e.frame],"y",t._n(i))},expression:"obj.textures[obj.frame].y"}})],1)])]),t._v(" "),i("tr",[i("td",[t._v("size:")]),t._v(" "),i("td",[t._v(t._s(e.textures[e.frame]._raw.__h)+" * "+t._s(e.textures[e.frame]._raw.__h))])]),t._v(" "),i("tr",[i("td",[t._v("opacity")]),t._v(" "),i("td",[i("div",{staticClass:"input-xy"},[i("input-number",{staticClass:"input",attrs:{type:"number"},model:{value:e.textures[e.frame].a0,callback:function(i){t.$set(e.textures[e.frame],"a0",t._n(i))},expression:"obj.textures[obj.frame].a0"}}),t._v(" "),i("input-number",{staticClass:"input",attrs:{type:"number"},model:{value:e.textures[e.frame].a1,callback:function(i){t.$set(e.textures[e.frame],"a1",t._n(i))},expression:"obj.textures[obj.frame].a1"}})],1)])]),t._v(" "),i("tr",[i("td",[t._v("delay")]),t._v(" "),i("td",[i("input-number",{staticClass:"input",attrs:{type:"number"},model:{value:e.textures[e.frame].delay,callback:function(i){t.$set(e.textures[e.frame],"delay",t._n(i))},expression:"obj.textures[obj.frame].delay"}})],1)]),t._v(" "),i("tr",[i("td",[t._v("move")]),t._v(" "),i("td",[i("input-select",{staticClass:"input",model:{value:e.textures[e.frame].movetype,callback:function(i){t.$set(e.textures[e.frame],"movetype",t._n(i))},expression:"obj.textures[obj.frame].movetype"}},[i("option",{attrs:{value:"0",title:""}},[t._v("static")]),t._v(" "),i("option",{attrs:{value:"1",title:""}},[t._v("橫向移動")]),t._v(" "),i("option",{attrs:{value:"2",title:""}},[t._v("縱向移動")]),t._v(" "),i("option",{attrs:{value:"3",title:""}},[t._v("旋轉")])])],1)]),t._v(" "),1==e.textures[e.frame].movetype?i("tr",[i("td",[t._v("moveW")]),t._v(" "),i("td",[i("input-number",{staticClass:"input",attrs:{type:"number",title:"移動寬"},model:{value:e.textures[e.frame].movew,callback:function(i){t.$set(e.textures[e.frame],"movew",t._n(i))},expression:"obj.textures[obj.frame].movew"}})],1)]):2==e.textures[e.frame].movetype?i("tr",[i("td",[t._v("moveH")]),t._v(" "),i("td",[i("input-number",{staticClass:"input",attrs:{type:"number",title:"移動高"},model:{value:e.textures[e.frame].moveh,callback:function(i){t.$set(e.textures[e.frame],"moveh",t._n(i))},expression:"obj.textures[obj.frame].moveh"}})],1)]):t._e(),t._v(" "),3==e.textures[e.frame].movetype?i("tr",[i("td",[t._v("moveR")]),t._v(" "),i("td",[i("input-number",{staticClass:"input",attrs:{type:"number",title:"旋轉週期(ms/π)"},model:{value:e.textures[e.frame].mover,callback:function(i){t.$set(e.textures[e.frame],"mover",t._n(i))},expression:"obj.textures[obj.frame].mover"}})],1)]):0!=e.textures[e.frame].movetype?i("tr",[i("td",[t._v("moveP")]),t._v(" "),i("td",[i("input-number",{staticClass:"input",attrs:{type:"number",title:"移動週期"},model:{value:e.textures[e.frame].movep,callback:function(i){t.$set(e.textures[e.frame],"movep",t._n(i))},expression:"obj.textures[obj.frame].movep"}})],1)]):t._e(),t._v(" "),t._m(0,!0)]):t._e()]):t._e(),t._v(" "),2==t.displayMode||e.constructor.name.endsWith("SkeletalAnim")?i("div",{staticClass:"info"},[i("table",{staticClass:"tb"},t._l(e._raw,function(e,n){return i("tr",[i("td",[t._v(t._s(n))]),t._v(" "),i("td",[t._v(t._s(e))])])}))]):t._e()])]),t._v(" "),i("hr")]})],2)},[function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("td"),this._v(" "),e("td")])}],!1,null,"6e4fb2d8",null).exports),$t=i(18),Lt=i(66),Rt=i(120),Ft=i(122),Ot=(i(65),i(47)),jt=(i(90),i(119),i(6),i(3));class Gt{constructor(){this.allAttack=[],this.skill=null}}const Nt=Symbol("targetObject");class qt{constructor(){this[Nt]=null,this.allDamage=[]}getTargetObject(){return this[Nt]}setTargetObject(t){this[Nt]=t}get objectid(){return this[Nt].$objectid}set objectid(t){if(Number.isSafeInteger(t)){let e=scene_map.lifeMgr.entities[t];this.setTargetObject(e)}}addDamage(t,e){this.allDamage.push(new zt(t,e))}}class zt{constructor(t,e){this.realDamage=t,this.critical=e}_validating(){return Number.isSafeInteger(this.realDamage)}_draw(t){const e=t.ctx;Number.isSafeInteger(this.realDamage)||(e.filter="gray-scale(1)",e.filter="none")}}var Ht=i(59);class Ut{constructor(t,e,i){t&&e&&i||alert("new PBullet(owner, skill)"),this.owner=t,this.body=null,this.skill=e,this.bulletRenderer=i,this.bulletMoveFunc=null,this.front=1}_create(t){const e=this.owner.body.GetWorld();let i=new jt.b2BodyDef,n=new jt.b2FixtureDef,s=new jt.b2PolygonShape;const r=.5*this.bulletRenderer.textures[0]._raw.__w/$gv.CANVAS_SCALE,o=.5*this.bulletRenderer.textures[0]._raw.__h/$gv.CANVAS_SCALE;let{x:a,y:l}=this.owner.body.GetWorldCenter();const c=this.owner.state.front;i.type=jt.b2BodyType.b2_kinematicBody,c>0?i.position.Set(a+r,l):c<0?i.position.Set(a-r,l):i.position.Set(a,l),i.angle=0,i.gravityScale=0,i.allowSleep=!1,i.bullet=!0,i.fixedRotation=!0,i.userData=this,this.body=e.CreateBody(i),s.SetAsBox(r,o),n.shape=s,n.filter.Copy(Ht.FilterHelper.get("bullet")),n.userData=this;let u=this.body.CreateFixture(n);return t?Object.keys(jt.FixtureContactListener.prototype).forEach(e=>u[e]=t[e]):u.preSolve=Wt,this}getPosition(){return this.body.GetPosition()}launch(t,e,i){t?(this.bulletMoveFunc=t,this.body.addStep(t.Step.bind(t,this)),this.body.addAfterStep(t.AfterStep.bind(t,this))):this.body.m_linearVelocity.Set(e,i)}destroy(){this.body&&(this.body.m_world.DestroyBody(this.body),this.body=null)}}function Wt(t,e,i,n){const s=n.m_userData;if(!s)return;const r=s.chara;if(!r)return;const o=i.m_userData;o.owner!=s&&(o.skill.addAttack(r),t.SetEnabled(!1),o.bulletRenderer.destroy(),o.destroy())}class Jt extends Ot.a{constructor(t,e){super(t,e),this.x=0,this.y=0,this.targetRenderer=null,this.$physics=null,this.is_loop=!1,this.opacity=1}load(t){if(!this._raw)throw new Error("Not implement. skill data is loaded");Array.isArray(this._raw[0])?this.textures=this._raw[t]:this.textures=this._raw}destroy(){super.destroy(),this.$physics=null}update(t){this.$physics?this.update_p(t):this.targetRenderer&&this.update_r(t)}render(t){this.$physics?this.render_p(t):this.targetRenderer&&this.render_r(t)}update_p(t){super.update(t)}render_p(t){const e=this.$physics.getPosition(),i=this.$physics.front,n=e.x*$gv.CANVAS_SCALE,s=e.y*$gv.CANVAS_SCALE;this.x=n,this.y=s,t.globalAlpha=this.opacity,this.draw(t,n,s,0,i>0)}update_r(t){t*=this.targetRenderer.getSpeed(),super.update(t)}render_r(t){this.x=this.targetRenderer.x+this.targetRenderer.tx,this.y=this.targetRenderer.y+this.targetRenderer.ty,t.globalAlpha=this.opacity,this.draw(t,this.x,this.y,0,this.targetRenderer.front>0)}}class Yt extends Jt{constructor(t,e){super(t,e)}}class Xt{constructor(){}static AddEffect(t){t.update(0),Xt._effects.push(t)}static Update(t){const e=Xt._effects;Xt._effects=e.filter(function(e){return e.isEnd()||e.update(t),!e.isEnd()||(e.destroy(),!1)})}static Render(t){t.pushGlobalAlpha();const e=Xt._effects;for(let i=0;i<e.length;++i)e[i].render(t);t.popGlobalAlpha()}}Xt._effects=[],window.$EffectManager=Xt;class Qt{constructor(){this.data=null,this.url=null,this.skillId=null,this.actType=0,this._owner=null,this._crr=null,this._actani=null,this.type=0,this._$is_end=!1,this.is_launch=!1,this.state=null}_init(){this._applyDefaultAction()}get is_end(){return this._$is_end}set is_end(t){this._$is_end=t,t&&(this.owner.$physics.state.invokeSkill=!1)}get owner(){return this._owner}set owner(t){t&&(this._owner=t,this._crr=t.renderer,this._crr&&(this._actani=this._crr.actani,this._actani))}get _owner_player(){return this._owner}set _owner_player(t){this.owner=t}_applyAction(t){if(this._actani&&this.data){this.data.action;this._actani.reload(t),this._actani.loop=!1,this.owner.$physics.state.invokeSkill=!0}}_applyDefaultAction(){const t=this.data.action;this._applyAction(t[this.actType])}async _load(t){const e=/^(\d+)\d{4}$/.exec(t)[1],i=`${this.constructor._base_path}/${e}/skill/${t}`,n=await $get.data(i);n?(this.data=n,this.url=i,this.skillId=t,this.type=this.data.info&&this.data.info.type||0,this.__proto__=this._decide_type().prototype,this._loadTexture(n),this._init()):alert("SkillAnimationBase")}_assign(t,e){this.data=t.data,this.url=t.url,this.skillId=t.skillId,this.type=t.type,this.__proto__=this._decide_type().prototype,this._init()}_loadTexture(){for(let e of this._effect_names){let i=this.data[e];i&&(this.data[e]=t(i,[this.url,e].join("/")))}function t(t){return"0"in t[0]?function(t){let e=[];for(let i=0;i in t;++i){let n=t[i];e[i]=[];for(let t=0;t in n;++t){let s=n[t],r=new L.a(s);e[i][t]=r}e[i].action=n.action}return e}(t):function(t){let e=[];for(let i=0;i in t;++i){let n=t[i],s=new L.a(n);e[i]=s}return e.action=t.action,e}(t)}}reset(){this._actani.reset(),this.is_launch=!1}control(t,e,i){}update(t){this.$promise||(this.is_launch=!0,this.is_end=!0,console.warn("Skill not implement: "+this.skillId))}_default_update(t){if(this._actani){if(this._actani.delay)return;this.is_launch||(this._addEffect(),this.is_launch=!0),this._actani.isEnd()&&(this.is_end=!0)}else this.is_launch=!0,this.is_end=!0}isEnd(){return this.is_end}addAttack(t){this._owner;let e=new qt;e.setTargetObject(t),e.allDamage.length=this.data.common.attackCount,this.attackInfo.allAttack.push(e)}createBullet(t){let e,i;return(e=this._addEffect(t)).is_loop=!0,(i=new Ut(this.owner.$physics,this,e))._create(),i.launch(null,this.owner.$physics.state.front*(32|window.$BULLET_SPEED),0),e.$physics=i,i}_addDefaultEffect(t){this._applyDefaultAction(),this._addEffect("effect",t)}_addEffect(t="effect",e){let i=this.data[t].action;i&&this._applyAction(i);try{const i=this.actType;let n=new Jt(this.data[t],[this.url,t].join("/"));return e||(n.targetRenderer=this._crr),n.load(i),Xt.AddEffect(n),n}catch(t){}}_addHitEffect(t,e,i,n){let s=new Yt;s.target=i,s.load(this.url+"/hit/"+n,this.data.hit,n),Xt.AddEffect(s)}_decide_type(){const t=this.data.info;switch(this.type){case 1:case 2:if(t.rapidAttack)return Kt;break;case 40:if(t.casterMove&&t.avaliableInJumpingState)return te}return Zt}get _effect_names(){return["effect","hit"]}static get _base_path(){return"/Skill"}}class Zt extends Qt{constructor(){throw super(),new TypeError("constructor")}_init(){this._applyDefaultAction()}update(t){this._default_update(t)}}class Kt extends Qt{constructor(){throw super(),new TypeError("constructor")}_init(){this._applyDefaultAction(),this.state="prepare",this._state_func=this._prepare,this.current_effect=this._addEffect(this.state),this.time=0,this.tick=0,this.fadeTotalTime=this._actani.getTotalTime(),this._crr.fixed_speed=!0}_prepare(){this.current_effect.opacity=this.time/this.fadeTotalTime,this.current_effect.opacity>1&&(this.current_effect.opacity=1),this._actani.isEnd()&&(this.current_effect.opacity=0,this.current_effect.destroy(),this.state="keydown",this._state_func=this._keydown,this.current_effect=this._addEffect(this.state),this._actani.loop=!0,this.current_effect.is_loop=!0,this.time=0)}_keydown(){this._actani.isEnd()&&(this.time=0)}_keydownend(){this.current_effect.opacity=1-this.time/this.fadeTotalTime,this.current_effect.opacity<0&&(this.current_effect.opacity=0),this._actani.isEnd()&&(this.current_effect.opacity=0,this.current_effect.destroy(),this._crr.fixed_speed=!1,this.is_launch=!0,this.is_end=!0)}control(t,e,i){switch(this.state){case"prepare":case"keydown":e&&!i||(this.current_effect.opacity=0,this.current_effect.destroy(),this.state="keydownend",this._state_func=this._keydownend,this.current_effect=this._addEffect(this.state),this.fadeTotalTime=this._actani.getTotalTime(),this._actani.loop=!1,this.time=0)}}update(t){t*=this._crr.getSpeed(),this.time+=t,++this.tick,this._state_func(),this.tick%(3|window.$FIRE_BULLET_T)==(2|window.$FIRE_BULLET_T2)&&"keydownend"!=this.state&&this.createBullet("ball")}get _effect_names(){return["prepare","keydown","keydownend","hit","ball"]}}class te extends Qt{constructor(){throw super(),new TypeError("constructor")}_init(){this.jump_max_count=window.jump_max_count||2}jump2(){const t=this._crr;this._owner_player.$physics.body.ConstantVelocityWorldCenter2((window.$NJmpX||40)*t.front,window.$NJmpY||0),this._addDefaultEffect()}control(t,e,i){if(!this._owner)return;const n=this._owner.$physics;if(0==n.state.jump_count){if(1!=e||!n.state.jump)return t.jump=t.jump?Math.max(e,t.jump):e,!1;this.jump2(),n.state.jump_count+=2}else n.state.jump&&1==e&&n.state.jump_count<this.jump_max_count&&(this.jump2(),n.state.jump_count+=1)}update(t){const e=this._owner.$physics;e.state.jump_count>1?(e.$foothold||this._actani.isEnd())&&(this.is_end=!0):e.$foothold?//!$physics._isCanJump()
this._actani.isEnd()?this.is_end=!0:$gv.m_editor_mode&&(this.is_end=!0):this._actani.isEnd()&&(this.is_end=!0)}}class ee extends Qt{constructor(){super(),this.attackInfo=new Gt}load(t,e){if(this.owner=e,!t)throw new Error("1 argument required");if(String(t).length<=4)throw new Error("skill ID format");this.attackInfo.skill=t;let i=ee.__loaded_skill[t];if(!i||!i.data){let i=this._load(t,e);return this.$promise=i,ee.__loaded_skill[t]=this,i.then(()=>{delete this.$promise}),i}this._assign(i)}}ee.__loaded_skill={},window.$SceneSkill=ee;i(162);var ie=i(164);class ne{constructor(t,e){this.type=t,this.data=e}}class se extends R{constructor(t){super(),this.action=t}}class re extends R{constructor(t){super(),this.skill_id=t}}class oe{constructor(){this.opacity=1}destroy(){}isEnd(){}update(t){throw new Error}render(t){throw new Error}}class ae{constructor(){this.objects=[],this.opacity=1}add(t){this.objects.push(t)}update(t){this.objects=this.objects.filter(function(e){return e.isEnd()?(e.destroy(),!1):(e.update(t),!0)})}render(t){if(this.opacity>0){const e=this.opacity;t.pushGlobalAlpha(),this.objects.forEach(function(i){t.globalAlpha=i.opacity*e,i.render(t)}),t.popGlobalAlpha()}}}const le={};class ce{constructor(){for(let t=0;t<=9;++t)this[t]=null;this.addedCanvasH=0}async _load(t){const e=await $get.data(t);Object.keys(e).forEach(i=>{let n=new L.a(e[i]);n._url=[t,i].join("/"),this[i]=n}),this.addedCanvasH=0|e.addedCanvasH}}function ue(t){return 3*t.width/4}function he(t,e,i){t.strokeStyle="#F00",t.beginPath(),t.moveTo(e,i),t.lineTo(e,i+10),t.stroke(),t.strokeStyle="#0F0",t.beginPath(),t.moveTo(e,i),t.lineTo(e+10,i),t.stroke()}ce.prototype.Miss=null,ce.prototype.guard=null,ce.prototype.shot=null,ce.prototype.effect=null;class de{constructor(){this._url=null,this.style=null,this.skin=null,this.textures=[],this.rand_y=[0];for(let t=1,e=Math.random()>.5?-1:1;t<de.max_display_digit;++t)this.rand_y[t]=Math.random()*de.max_rand_y*e,e*=-1}_copy(t){this._url=t._url,this.skin=t.skin,this.style=t.style,this.textures=t.textures,this._$promise&&(this._$promise=t._$promise)}async _load(t,e){let i,n=[];i="default"==t?this._default_base_path+e:this._skin_base_path+[t,e].join("/"),le[t]||(le[t]={}),le[t][e]=this,this._url=i,this.skin=t,this.style=e;for(let t=0;t<=1;++t){const e=i+t;this.textures[t]=new ce,n[t]=this.textures[t]._load(e)}return await Promise.all(n),this}async load(t,e){let i;return le[t]&&(i=le[t][e]),i?this._copy(t,i):(this._$promise=this._load(t,e),await this._$promise,delete this._$promise),this}draw(t,e,i,n,s){let r,o=e.toFixed(0),a=0;a+=-(r=this.textures[1][o[0]]).x,a+=ue(r);for(let t=1;t<o.length-1;++t)a+=ue(r=this.textures[0][o[t]]);{let t=n-a/2;(r=this.textures[1][o[0]]).draw2(t,s),t+=ue(r);for(let e=1;e<o.length;++e)(r=this.textures[0][o[e]]).draw2(t,s+this.rand_y[e]),t+=ue(r)}if(this._display_axis){const e=t.ctx;let i=n-a/2;r=this.textures[1][o[0]],he(e,i,s),i+=ue(r);for(let t=1;t<o.length;++t)r=this.textures[0][o[t]],he(e,i,s+this.rand_y[t]),i+=ue(r)}}get _default_base_path(){return"/Effect/BasicEff"}get _skin_base_path(){return"/Effect/BasicEff/damageSkin/"}}de.loaded_skin=le,de.max_display_digit=Math.trunc(Math.log10(Number.MAX_SAFE_INTEGER)+1),de.max_rand_y=5;class me extends oe{constructor(t,e,i,n,s,r){super(),this.x=n,this.y=s,this.vy=me.move_y/me.time_tt,this.delay=r,this.time=0,this.state=0,this.damagePair=i,this.renderer,this._load(t,e)}_load(t,e,i){let n;le[t]&&(n=le[t][e]),n?(this.renderer=n,this._$promise=this.renderer._$promise):(this.renderer=new de,this._$promise=this.renderer.load(t,e)),this._$promise&&(this.render=this.$noRender,this._$promise.then(()=>{delete this.render,delete this._$promise}).catch(()=>{if(delete this._$promise,console.error(`Can't load damageSkin[${t}][${e}]`),i)throw Error();console.log(`try load damageSkin["default"][${e}]`),this._load("default",e,1)}))}$noRender(){}destroy(){this.state=2}isEnd(){return this.state>=1&&this.time>1e3}update(t){this.time+=t,this.delay&&this.time>=this.delay?(this.time=0,this.delay=0):(this.y+=this.vy*t,0==this.state?(this.vy=this.vy*me.move_avy,this.time>me.time_d1&&(this.time=0,this.state=1)):1==this.state&&(this.vy=this.vy*me.move_avy2,this.time<me.time_d2?this.opacity=1-this.time/me.time_d2:this.opacity=0))}render(t){this.renderer.draw(t,this.damagePair.realDamage,this.damagePair.critical,this.x,this.y)}}me.time_d1=1e3,me.time_d2=1e3,me.time_tt=me.time_d1+me.time_d2,me.move_y=-300,me.move_avy=1.001,me.move_avy2=.99;class pe extends me{update(t){}isEnd(){return this.is_end}}const fe=new class extends ae{_addTest(t=9876543210,e=!1,i=0,n=0,s=0,r=null,o="NoRed"){this.objects.push(new me(r,o,new zt(t,e),i,n,s))}_addTest2(t=9876543210,e=!1,i=0,n=0,s=0,r=null,o="NoRed"){this.objects.push(new pe(r,o,new zt(t,e),i,n,s))}_addAttack(t,e,i){i.allAttack.forEach(i=>{let n=i.getTargetObject();if(n){const s=n.$physics.getPosition();let r,o;r=s.x*$gv.CANVAS_SCALE,o=s.y*$gv.CANVAS_SCALE-70,i.allDamage.forEach(i=>{this.addDamagePair(t,e,i,r,o)})}})}addDamagePair(t,e,i,n,s,r=0){this.objects.push(new me(t,e,i,n,s,r))}};window.$damageNumberLayer=fe,window.$DamageNumber=me,window.$DamageNumberTest=pe,window.$DamageNumberRenderer=de;window.$addItem_repeatEquip=!1,window.$Character_ChatBalloon_DisplayDuration=5e3;class _e{constructor(){this.style=0,this.text="",this.$outputText=null,this.elapsed=0,this._isDisplay=!1}enter(t){this.text=String(t),this.$outputText=null,this.isDisplay=!0}update(t){const e=this.displayDuration;this.elapsed>e?this.isDisplay=!1:this.elapsed+=t}async draw(t,e){if(this._isDisplay){const i=this.style||$gv.ChatBalloon_default_style;let n=Ft.a.cache[i];n||(n=new Ft.a,await n.load(i));const s=this.colon,r=e.renderer,o=r._boundBox;this.$outputText||(this.$outputText=e.id+s+this.text),n.draw(t,this.$outputText,r.x,r.y-o.height)}}get isDisplay(){return this._isDisplay}set isDisplay(t){this._isDisplay=!!t,this.elapsed=0}get colon(){return" : "}get $maxLength(){return 70}get displayDuration(){return $gv.ChatBalloon_DisplayDuration}}const ge=[{ArrowUp:new ne("Action",new se("up")),ArrowLeft:new ne("Action",new se("left")),ArrowDown:new ne("Action",new se("down")),ArrowRight:new ne("Action",new se("right")),z:new ne("Skill",new re("23001002")),x:new ne("Skill",new re("1001005")),c:new ne("Skill",new re("64120000")),v:new ne("Skill",new re("23121000"))},{w:new ne("Action",new se("up")),a:new ne("Action",new se("left")),s:new ne("Action",new se("down")),d:new ne("Action",new se("right")),q:new ne("Action",new se("jump")),f:new ne("Skill",new re("23001002")),x:new ne("Skill",new re("1001005")),c:new ne("Skill",new re("64120000")),v:new ne("Skill",new re("23121000"))}];class ve extends Lt.a{constructor(){super(),this.renderer=null,this.$layer=5,this.name=null,this.stat=new b.CharacterStat,this.activeSkills=new Map,this.chatCtrl=new _e,this.$inPacket={},this.$inPacket.move=null,this.$outPacket={},this.$outPacket.move=null}get id(){return this.name}set id(t){this.name=t}get $objectid(){return this.name}set $objectid(t){this.name=t}damage(t,e){console.log("Player("+this.$objectid+") 被 "+t.$objectid+" 攻擊，減少 "+e+" HP")}knockback(t,e,i){this.$physics.knockback(e,i,1e3)}$move(t){let e=t||this.$inPacket.move;this.$inPacket.move=e}_remote_control(){let t=this.$inPacket.move;if(t&&t.path&&t.path.length){const e=this.renderer;let i=t.path.shift();i.isAwake&&(this.$physics.moveTo(i),this.$physics.state=i.pState,e.front=i.pState.front),i.action&&(e.action=i.action),i.emotion&&(e.emotion=i.emotion)}}$moveItem(t,e,i){}invokeSkill(t){let e=new ee;return e.load(t,this),this.activeSkills.set(t,e),e}update(t){const e=this.renderer;if(this.chatCtrl.update(t),this.activeSkills.forEach(e=>{e&&(e.isEnd()?this.activeSkills.delete(e.skillId):e.update(t,this),this._handleAttack(),e.attackInfo.allAttack.length=0)}),this._player_control(),$gv.m_editor_mode?e.speed>0&&this.$physics&&this.enablePhysics&&this._applyState({front:this.$physics.state.front}):this.$physics&&this._applyState(this.$physics.state),this.$physics&&e&&this.enablePhysics){const t=this.$physics.getPosition(),i=Math.trunc(t.x*$gv.CANVAS_SCALE+.5),n=Math.trunc(t.y*$gv.CANVAS_SCALE+.5);e.x=i,e.y=n,this.$physics.body.GetAngle()||this.$physics.body.GetAngularVelocity()?e.angle=this.$physics.body.GetAngle():e.angle=0,this.$layer=this.$physics.getLayer()}e.update(t)}_$drawName(t){const e=this.id;this.__drawName(t,e)}_$drawChatBalloon(t){this.chatCtrl.draw(t,this)}_player_control(){}_applyState(t){const e=this.renderer,i=this.$physics.state;if(!i.invokeSkill){const{front:n,jump:s,walk:r,prone:o,fly:a,ladder:l}=t,c=chara.enablePhysics;null!=n&&(e.front=n),l?c&&this.$physics.ladder&&(this.$physics.ladder.isLadder()?e.action="ladder":e.action="rope",i.ladder_move_dir?chara.renderer.actani.isEnd()&&(chara.renderer.actani.reset(),e.actani.loop=!1):e.actani._is_end=!0):s?(e.action="jump",e.actani.loop=!1):r?(e.action="walk1",e.actani.loop=!0):o?(e.action="prone",e.actani.loop=!1):a?(e.action="fly",e.actani.loop=!0):(e.action="stand1",e.actani.loop=!0);for(let t=0;t<=9;++t)if($gv.input_keyDown[t]){let i=["blink","hit","smile","troubled","cry","angry","bewildered","stunned","vomit","oops"],n=i[t%i.length];e.emotion=n}}}_handleAttack(){if(window.$io)throw new Error("未完成");this.activeSkills.forEach(t=>{const e=t.attackInfo;for(let t=0;t<e.allAttack.length;++t){const i=e.allAttack[t],n=i.getTargetObject();for(let t=0;t<i.allDamage.length;++t){let e,s=this.stat.getCurrentMaxBaseDamage()-this.stat.getCurrentMinBaseDamage(),r=this.stat.getCurrentMinBaseDamage()+Math.random()*s,o=i.allDamage[t]=new zt;Math.trunc(100*Math.random())<this.stat.critRate&&(r*=1+this.stat.critDamage/100,o.critical=!0),r=Math.trunc(r),o.realDamage=r,n.damage(this,r),e=o.critical?"NoCri":"NoRed",fe.addDamagePair(this.m_damageSkin||"default",e,o,n.x+(i.allDamage.length>1?25-25*(1-t&1):0),n.y,100*t)}n.knockback(this,16,16)}})}}var ye=i(7);var xe={store:new r.a.Store({state:{charaList:[],chara:null,selected:null,_last_id:0,progressValue:0,progressMaximum:0},getters:{lastId:function(t,e){return"chara_"+t._last_id}},mutations:{clear:function(t){t.charaList=[]},increaseId(t){t._last_id+=1},increaseProgress:function(t,e){t.progressValue+=e.amount,t.progressValue>=t.progressMaximum&&(t.progressValue=0,t.progressMaximum=0)},increaseProgressMax:function(t,e){t.progressMaximum+=e.amount}},actions:{isIdExist:function(t,e){const i=t.state;if(e&&e.id){const t=e.id;for(let e=0;e<i.charaList.length;++e){if(i.charaList[e].id==t)return!0}}return!1},sortCharaById:function(t,e){const i=t.state;i.charaList=i.charaList.sort((t,e)=>{return i(t.id)-i(e.id);function i(e){if(!t)return 0;return 0|Number(e).split("_")[1]}})},selectChara:function(t,e){const i=t.state,n=e.id;let s=-1;for(let t=0;t<i.charaList.length;++t){if(i.charaList[t].id==n){s=t;break}}if(s>=0){const t=i.charaList[s];if(t.$remote)return;try{if(i.chara&&(i.chara.enablePhysics=!1),t.enablePhysics=!0,t.$physics){const e=t.renderer.x/$gv.CANVAS_SCALE,i=t.renderer.y/$gv.CANVAS_SCALE;t.$physics.setPosition(e,i,!0)}}catch(t){}return window.chara=i.chara=t,i.selected=n,n}},_addChara:async function(t,e){const i=t.state;if(e&&e.chara instanceof ve){const n=e.chara;return await n.renderer.__synchronize(),i.charaList.push(n),t.dispatch("selectChara",{id:n.id}),t.commit("increaseProgress",{amount:1}),n}},_createChara:async function(t,e){window.$io&&e&&e.remote_chara&&(e.emplace=e.remote_chara);t.state;t.commit("increaseId");const i=t.getters.lastId;let n;(n=e&&e.remote_chara?new class extends ve{constructor(t){super(),this.renderer=new Rt.a,this.$physics=t.controller.$createPlayer(this,this.renderer)}get $remote(){return!0}_player_control(){this._remote_control()}}(window.scene_map):new class extends ve{constructor(t){super(),this.renderer=new Rt.a,this.$physics=t.controller.$createPlayer(this,this.renderer),this.$layer=5,this.id=null,this.items=new Array(5);for(let t=0;t<5;++t){this.items[t]=new Array(128);for(let e=0;e<128;++e)this.items[t][e]=new G(e,null,null,0)}this.stat.onJobChange(this._onJobChange.bind(this))}_onJobChange(){const t=this.stat.job;console.log("Player("+this.$objectid+") change job: "+t)}_applyState(t){super._applyState(t),this.$recMove()}_player_control(){if(!this.$physics)return;const t=ge[$gv.m_editor_mode?1:0];let e={},i=0==this.activeSkills.size;for(let i in t){const n=t[i];if(!n)continue;const s=$gv.input_keyDown[i];switch($gv.input_keyUp[i],n.type){case"Command":break;case"Action":s&&(e[n.data.action]=s);break;case"Item":if(s){const t=n.data;this.useItem(t.data.id)}}}for(let n in t){const s=t[n];if(!s)continue;const r=$gv.input_keyDown[n],o=$gv.input_keyUp[n];if("Skill"==s.type){const t=s.data,n=t.skill_id;let a=this.activeSkills.get(n);r&&i&&(a=this.invokeSkill(t.skill_id)),a&&a.control(e,r,o)}}this.$physics.control(e)}addItem(t,e){if(window.$io)throw new Error("未完成");(async function(t,...e){let i,n;switch(t[0]){case"0":n=j;break;default:throw new Error("未完成")}i=S.c.getDataPath(t);let s=await $get.data(i);if(!s)return console.warn("item not exist: "+t),null;F[t]=s;let r=new n(t,s);return e&&e.length&&Object.assign(r,...e),r})(t,{incDEXr:Math.trunc(3*Math.random()),timeLimited:Date()}).then(t=>{this._addItem(t,e)})}_addItem(t,e){let i,n=t.id;switch(n[0]){case"0":i=0;break;default:return console.info(`~give ${this.id}: ${n} * ${e}`),!1}for(let s=0;s<this.items[i].length;++s)if(this.items[i][s].isEmpty()){if(window.$addItem_repeatEquip)return this.items[i][s].assign(s,123,t,i?e:1),console.info(`give ${this.id}: ${n} * ${e}`),!0;if(0!=i)return this.items[i][s].assign(s,123,t,e),console.info(`give ${this.id}: ${n} * ${e}`),!0;if(this.items[i][s].assign(s,123,t,1),0==--e)return console.info(`repeat give ${this.id}: ${n}`),!0}return!1}async removeItem(t,e){if(window.$io)throw new Error("未完成");return this._removeItem(t,e)}_removeItem(t,e){this.items[t][e]._clear()}moveItemToSlot(t,e){}findItem(t){for(let e=0;e<this.items.length;++e)for(let i=0;i<this.items[e].length;++i){let n=this.items[e][i];if(n&&n.data&&n.data.id==t)return{typeName:S.c.typeName[e],itemSlot:n}}return{typeName:null,itemSlot:null}}useItem(t){if(window.$io)window.$io.emit("useItem",{itemId:t});else{function e(){this.renderer.use(t)}this.findItem(t).itemSlot?($gv.m_editor_mode?console.log(`使用道具：${t}。`):(console.log(`消耗道具：${t}。未完成`),this._consume(t,1)),e.call(this)):$gv.m_editor_mode?(this.addItem(t,1),e.call(this)):console.log("無法使用不存在的道具。")}}async say(t){if(window.$io){let e=await window.$io.emit("chat",{$style:this.chatCtrl.style,text:t});return e&&this.chatCtrl.enter(t),e}return this.chatCtrl.enter(t),!0}$emit(t){if(this.$outPacket.move)t.emit("charaMove",this.$outPacket.move),this.$outPacket.move=null;else{let e=new ie.$Packet_CharacterMove;e.capture(this),t.emit("charaMove",e)}this.$outPacket.move=null}$recMove(){let t=this.$outPacket.move||new ie.$Packet_CharacterMove;t.capture(this),this.$outPacket.move=t}}(window.scene_map)).id=i,await n.renderer.load(),t.commit("increaseProgress",{amount:1}),e?e.chara instanceof ve?(n.renderer._parse(e.chara.renderer._stringify(!1)),n.renderer.x=e.chara.renderer.x,n.renderer.y=e.chara.renderer.y):e.emplace&&(n.id=e.emplace.id,n.renderer._parse(e.emplace.code)):n.renderer._setup_test();let s=await t.dispatch("_addChara",{chara:n});try{window.scene_map&&window.scene_map.addChara(s)}catch(t){console.error(t)}return s},createChara:async function(t,e){return t.commit("increaseProgressMax",{amount:2}),await t.dispatch("_createChara",e)},loadCharacters:async function(t){t.state;let e=JSON.parse(window.localStorage.getItem("chara_list"));if(e){t.commit("clear"),t.commit("increaseProgressMax",{amount:2*e.length});for(let i=0;i<e.length;++i){const n=e[i];await t.dispatch("isIdExist",{id:n.id})?console.log("character: "+n.id+"is exist"):(console.log("load character["+i+"]: "+n.id),await t.dispatch("_createChara",{emplace:{id:n.id,code:n.code}}))}}},saveCharacters:function(t){let e=[];t.state.charaList.forEach(function(t,i){const n=t.id,s=t.renderer._stringify(!1);e[i]={id:n,code:s}}),window.localStorage.setItem("chara_list",JSON.stringify(e))}}}),data:function(){let t=window.innerWidth/1366,e=window.innerHeight/768;return{dirty:0,is_show_chara_dl_menu:!1,mapEditorMode:"layeredObject",displayMode:0,selectedLayer:0,wnd_debug_style:{background:"#ffffff",padding:"0 0.5em"},wnds:{menu:{name:"$menu",visable:!0,pos:{x:0,y:0}},character_list:{name:"Characters",visable:!0,pos:{x:900*t,y:220*e}},character_attribute:{name:"Character attribute",visable:!0,pos:{x:900*t,y:0*e}},equip_box:{name:"Equip box",visable:!0,pos:{x:0*t,y:50*e}},spawnpoint:{name:"Spawn point",visable:!1,pos:{x:350*t,y:0*e}},debug_window:{name:"Map editor (Debug)",visable:!1,pos:{x:0*t,y:100*e}}}}},computed:Object.assign(r.a.mapState({charaList:"charaList",selected:"selected",chara:"chara",progressValue:"progressValue",progressMaximum:"progressMaximum"}),{$gv:()=>$gv}),methods:{scene_map:function(){return window.scene_map},loadCharacters:function(){console.log("load character"),this.$store.dispatch("loadCharacters")},saveCharacters:function(){console.log("save characters"),alert("save characters"),this.$store.dispatch("saveCharacters")},selectChara:function(t){console.log("select character: "+t),this.$store.dispatch("selectChara",{id:t})},addNewChara:function(){console.log("create new character"),this.$store.dispatch("createChara")},addCloneChara:function(){this.chara&&(console.log("clone character: "+this.chara.id),this.$store.dispatch("createChara",{chara:this.chara}))},oninput_sort:function(t){this.$store.state.charaList=t},faceColor:async function({color:t}){this.chara&&this.chara&&null!=t&&(this.$store.commit("increaseProgressMax",{amount:2}),this.chara.renderer.faceColor=t,this.$store.commit("increaseProgress",{amount:1}),await this.chara.renderer.__synchronize(0),this.$store.commit("increaseProgress",{amount:1}),app.updateScreen())},hairColor:async function({color:t}){this.chara&&this.chara&&null!=t&&(this.$store.commit("increaseProgressMax",{amount:2}),this.chara.renderer.hairColor=t,this.$store.commit("increaseProgress",{amount:1}),await this.chara.renderer.__synchronize(0),this.$store.commit("increaseProgress",{amount:1}),app.updateScreen())},$hairMixColor2:function({color:t,mix:e}){const i=this;this.$store.commit("increaseProgressMax",{amount:1}),this.chara.renderer.slots.hairColor2=t,Promise.all([this.chara.renderer.slots.hair.$promise_hair2,this.chara.renderer.slots.hair.$promise_hair3]).then(async function(t,n){await i.chara.renderer.__synchronize(0),i.chara.renderer.slots.hairMix2=e,app.updateScreen(),i.$store.commit("increaseProgress",{amount:1})}).catch(function(t){i.$store.commit("increaseProgress",{amount:1})})},hairColor2:function(t){this.$hairMixColor2(t)},hairMix2:function(t){this.$hairMixColor2(t)},clickItem:function(t){let{id:e,category:i,equip:n}=t;if(this.chara){if(window.$io)return this.chara.useItem(e,i).then(function(t){console.log("can't use item: "+e)});if(!this.chara.renderer.unuse(e)){this.$store.commit("increaseProgressMax",{amount:2});try{this.chara.useItem(e,i,n)}catch(t){throw this.$store.commit("increaseProgressMax",{amount:-2}),t}this.$store.commit("increaseProgress",{amount:1});try{this.chara.renderer.__synchronize(0).then(()=>{this.$store.commit("increaseProgress",{amount:1}),app.updateScreen()})}catch(t){throw this.$store.commit("increaseProgress",{amount:1}),app.updateScreen(),t}}}},hoverItem:function(t){this.$emit("hoverItem",t)},mouseleaveItem:function(t){this.$emit("mouseleaveItem",t)},openCharacterDLMenu:function(t,e){let i=this;i.$store.dispatch("selectChara",{id:e}).then(function(){i.is_show_chara_dl_menu=!0,i.$nextTick(function(){i.$refs.chara_dl_menu.setPosition({my:"left top",of:t})})})},closeCharacterDLMenu:function(){this.is_show_chara_dl_menu=!1},copyCharaCode:function(){let t=this.chara.renderer._stringify(!1);copyToClipboard(t)},_save_as_png:function(){this.chara.renderer._save_as_png(ye.b,this.chara.id)}},mounted:function(){let t=document.getElementById("bgm");this.$refs.bgm_outer.appendChild(t)},components:{"ui-draggable":V,"ui-dialog":P,"ui-sortable":ct,"ui-trigger":ht,"ui-menu":mt,"ui-character":Ct,"ui-character-svg":Vt,"ui-character-attribute":kt,"ui-equip-box":wt,"ui-mob-list":Dt,"ui-map-editor":Et}},be=(i(471),y(xe,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dialog-group Editor",on:{contextmenu:function(t){if(t.target!==t.currentTarget)return null;t.preventDefault()}}},[i("ui-dialog",{attrs:{position:t.wnds.menu.pos,width:"302px"}},[i("template",{slot:"header"},[t._v("\n\t\t\tMenu\n\t\t")]),t._v(" "),i("details",{attrs:{open:""}},[i("summary",[t._v("bgm")]),t._v(" "),i("div",{ref:"bgm_outer"})]),t._v(" "),i("details",{attrs:{open:""}},[i("summary",[t._v("window")]),t._v(" "),i("p"),t._l(t.wnds,function(e,n){return e.name.startsWith("$")?t._e():i("div",[i("label",[i("input",{directives:[{name:"model",rawName:"v-model",value:e.visable,expression:"wnd.visable"}],attrs:{type:"checkbox",checked:""},domProps:{checked:Array.isArray(e.visable)?t._i(e.visable,null)>-1:e.visable},on:{click:function(e){t.$refs[n]&&t.$refs[n].requireOrder(e)},change:function(i){var n=e.visable,s=i.target,r=!!s.checked;if(Array.isArray(n)){var o=t._i(n,null);s.checked?o<0&&t.$set(e,"visable",n.concat([null])):o>-1&&t.$set(e,"visable",n.slice(0,o).concat(n.slice(o+1)))}else t.$set(e,"visable",r)}}}),t._v(" "+t._s(e.name)+"\n\t\t\t\t\t")])])}),t._v(" "),i("p")],2),t._v(" "),i("details",[i("summary",[t._v("scene")]),t._v(" "),i("p"),i("div",[i("label",[t._v("\n\t\t\t\t\t\tMap "),i("input",{on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.$gv.scene_map.load(e.target.value.padStart(9,"0"))}}})])]),t._v(" "),i("div",[i("fieldset",[i("legend",[t._v("map")]),t._v(" "),i("label",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.$gv.m_is_rendering_map,expression:"$gv.m_is_rendering_map"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.$gv.m_is_rendering_map)?t._i(t.$gv.m_is_rendering_map,null)>-1:t.$gv.m_is_rendering_map},on:{change:function(e){var i=t.$gv.m_is_rendering_map,n=e.target,s=!!n.checked;if(Array.isArray(i)){var r=t._i(i,null);n.checked?r<0&&t.$set(t.$gv,"m_is_rendering_map",i.concat([null])):r>-1&&t.$set(t.$gv,"m_is_rendering_map",i.slice(0,r).concat(i.slice(r+1)))}else t.$set(t.$gv,"m_is_rendering_map",s)}}}),t._v("Map")]),t._v(" "),i("label",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.$gv.m_display_back,expression:"$gv.m_display_back"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.$gv.m_display_back)?t._i(t.$gv.m_display_back,null)>-1:t.$gv.m_display_back},on:{change:function(e){var i=t.$gv.m_display_back,n=e.target,s=!!n.checked;if(Array.isArray(i)){var r=t._i(i,null);n.checked?r<0&&t.$set(t.$gv,"m_display_back",i.concat([null])):r>-1&&t.$set(t.$gv,"m_display_back",i.slice(0,r).concat(i.slice(r+1)))}else t.$set(t.$gv,"m_display_back",s)}}}),t._v("back")]),t._v(" "),i("label",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.$gv.m_display_front,expression:"$gv.m_display_front"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.$gv.m_display_front)?t._i(t.$gv.m_display_front,null)>-1:t.$gv.m_display_front},on:{change:function(e){var i=t.$gv.m_display_front,n=e.target,s=!!n.checked;if(Array.isArray(i)){var r=t._i(i,null);n.checked?r<0&&t.$set(t.$gv,"m_display_front",i.concat([null])):r>-1&&t.$set(t.$gv,"m_display_front",i.slice(0,r).concat(i.slice(r+1)))}else t.$set(t.$gv,"m_display_front",s)}}}),t._v("front")]),t._v(" "),i("label",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.$gv.m_display_mapobj,expression:"$gv.m_display_mapobj"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.$gv.m_display_mapobj)?t._i(t.$gv.m_display_mapobj,null)>-1:t.$gv.m_display_mapobj},on:{change:function(e){var i=t.$gv.m_display_mapobj,n=e.target,s=!!n.checked;if(Array.isArray(i)){var r=t._i(i,null);n.checked?r<0&&t.$set(t.$gv,"m_display_mapobj",i.concat([null])):r>-1&&t.$set(t.$gv,"m_display_mapobj",i.slice(0,r).concat(i.slice(r+1)))}else t.$set(t.$gv,"m_display_mapobj",s)}}}),t._v("object")]),t._v(" "),i("label",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.$gv.m_display_maptile,expression:"$gv.m_display_maptile"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.$gv.m_display_maptile)?t._i(t.$gv.m_display_maptile,null)>-1:t.$gv.m_display_maptile},on:{change:function(e){var i=t.$gv.m_display_maptile,n=e.target,s=!!n.checked;if(Array.isArray(i)){var r=t._i(i,null);n.checked?r<0&&t.$set(t.$gv,"m_display_maptile",i.concat([null])):r>-1&&t.$set(t.$gv,"m_display_maptile",i.slice(0,r).concat(i.slice(r+1)))}else t.$set(t.$gv,"m_display_maptile",s)}}}),t._v("tile")]),t._v(" "),i("label",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.$gv.m_display_portal,expression:"$gv.m_display_portal"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.$gv.m_display_portal)?t._i(t.$gv.m_display_portal,null)>-1:t.$gv.m_display_portal},on:{change:function(e){var i=t.$gv.m_display_portal,n=e.target,s=!!n.checked;if(Array.isArray(i)){var r=t._i(i,null);n.checked?r<0&&t.$set(t.$gv,"m_display_portal",i.concat([null])):r>-1&&t.$set(t.$gv,"m_display_portal",i.slice(0,r).concat(i.slice(r+1)))}else t.$set(t.$gv,"m_display_portal",s)}}}),t._v("portal")])]),t._v(" "),i("fieldset",[i("legend",[t._v("map")]),t._v(" "),i("label",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.$gv.m_display_particle_system,expression:"$gv.m_display_particle_system"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.$gv.m_display_particle_system)?t._i(t.$gv.m_display_particle_system,null)>-1:t.$gv.m_display_particle_system},on:{change:function(e){var i=t.$gv.m_display_particle_system,n=e.target,s=!!n.checked;if(Array.isArray(i)){var r=t._i(i,null);n.checked?r<0&&t.$set(t.$gv,"m_display_particle_system",i.concat([null])):r>-1&&t.$set(t.$gv,"m_display_particle_system",i.slice(0,r).concat(i.slice(r+1)))}else t.$set(t.$gv,"m_display_particle_system",s)}}}),t._v("particle system")]),t._v(" "),i("label",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.$gv.m_display_skeletal_anim,expression:"$gv.m_display_skeletal_anim"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.$gv.m_display_skeletal_anim)?t._i(t.$gv.m_display_skeletal_anim,null)>-1:t.$gv.m_display_skeletal_anim},on:{change:function(e){var i=t.$gv.m_display_skeletal_anim,n=e.target,s=!!n.checked;if(Array.isArray(i)){var r=t._i(i,null);n.checked?r<0&&t.$set(t.$gv,"m_display_skeletal_anim",i.concat([null])):r>-1&&t.$set(t.$gv,"m_display_skeletal_anim",i.slice(0,r).concat(i.slice(r+1)))}else t.$set(t.$gv,"m_display_skeletal_anim",s)}}}),t._v("skeletal animation")])]),t._v(" "),i("fieldset",[i("legend",[t._v("life")]),t._v(" "),i("label",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.$gv.m_display_life,expression:"$gv.m_display_life"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.$gv.m_display_life)?t._i(t.$gv.m_display_life,null)>-1:t.$gv.m_display_life},on:{change:function(e){var i=t.$gv.m_display_life,n=e.target,s=!!n.checked;if(Array.isArray(i)){var r=t._i(i,null);n.checked?r<0&&t.$set(t.$gv,"m_display_life",i.concat([null])):r>-1&&t.$set(t.$gv,"m_display_life",i.slice(0,r).concat(i.slice(r+1)))}else t.$set(t.$gv,"m_display_life",s)}}}),t._v("life")]),t._v(" "),i("label",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.$gv.m_display_player,expression:"$gv.m_display_player"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.$gv.m_display_player)?t._i(t.$gv.m_display_player,null)>-1:t.$gv.m_display_player},on:{change:function(e){var i=t.$gv.m_display_player,n=e.target,s=!!n.checked;if(Array.isArray(i)){var r=t._i(i,null);n.checked?r<0&&t.$set(t.$gv,"m_display_player",i.concat([null])):r>-1&&t.$set(t.$gv,"m_display_player",i.slice(0,r).concat(i.slice(r+1)))}else t.$set(t.$gv,"m_display_player",s)}}}),t._v("player")]),t._v(" "),i("label",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.$gv.m_display_other_player,expression:"$gv.m_display_other_player"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.$gv.m_display_other_player)?t._i(t.$gv.m_display_other_player,null)>-1:t.$gv.m_display_other_player},on:{change:function(e){var i=t.$gv.m_display_other_player,n=e.target,s=!!n.checked;if(Array.isArray(i)){var r=t._i(i,null);n.checked?r<0&&t.$set(t.$gv,"m_display_other_player",i.concat([null])):r>-1&&t.$set(t.$gv,"m_display_other_player",i.slice(0,r).concat(i.slice(r+1)))}else t.$set(t.$gv,"m_display_other_player",s)}}}),t._v("other player")])])]),t._v(" "),i("p")]),t._v(" "),i("details",[i("summary",[t._v("editor")]),t._v(" "),i("p",[i("label",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.$gv.m_display_foothold,expression:"$gv.m_display_foothold"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.$gv.m_display_foothold)?t._i(t.$gv.m_display_foothold,null)>-1:t.$gv.m_display_foothold},on:{change:function(e){var i=t.$gv.m_display_foothold,n=e.target,s=!!n.checked;if(Array.isArray(i)){var r=t._i(i,null);n.checked?r<0&&t.$set(t.$gv,"m_display_foothold",i.concat([null])):r>-1&&t.$set(t.$gv,"m_display_foothold",i.slice(0,r).concat(i.slice(r+1)))}else t.$set(t.$gv,"m_display_foothold",s)}}}),t._v(" foothold")]),t._v(" "),i("label",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.$gv.m_display_selected_object,expression:"$gv.m_display_selected_object"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.$gv.m_display_selected_object)?t._i(t.$gv.m_display_selected_object,null)>-1:t.$gv.m_display_selected_object},on:{change:function(e){var i=t.$gv.m_display_selected_object,n=e.target,s=!!n.checked;if(Array.isArray(i)){var r=t._i(i,null);n.checked?r<0&&t.$set(t.$gv,"m_display_selected_object",i.concat([null])):r>-1&&t.$set(t.$gv,"m_display_selected_object",i.slice(0,r).concat(i.slice(r+1)))}else t.$set(t.$gv,"m_display_selected_object",s)}}}),t._v(" selected object")])])]),t._v(" "),i("details",[i("summary",[t._v("debug")]),t._v(" "),i("p",[i("label",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.$gv.m_display_physics_debug,expression:"$gv.m_display_physics_debug"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.$gv.m_display_physics_debug)?t._i(t.$gv.m_display_physics_debug,null)>-1:t.$gv.m_display_physics_debug},on:{change:function(e){var i=t.$gv.m_display_physics_debug,n=e.target,s=!!n.checked;if(Array.isArray(i)){var r=t._i(i,null);n.checked?r<0&&t.$set(t.$gv,"m_display_physics_debug",i.concat([null])):r>-1&&t.$set(t.$gv,"m_display_physics_debug",i.slice(0,r).concat(i.slice(r+1)))}else t.$set(t.$gv,"m_display_physics_debug",s)}}}),t._v(" physics debug")]),t._v(" "),i("label",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.$gv.m_display_debug_info,expression:"$gv.m_display_debug_info"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.$gv.m_display_debug_info)?t._i(t.$gv.m_display_debug_info,null)>-1:t.$gv.m_display_debug_info},on:{change:function(e){var i=t.$gv.m_display_debug_info,n=e.target,s=!!n.checked;if(Array.isArray(i)){var r=t._i(i,null);n.checked?r<0&&t.$set(t.$gv,"m_display_debug_info",i.concat([null])):r>-1&&t.$set(t.$gv,"m_display_debug_info",i.slice(0,r).concat(i.slice(r+1)))}else t.$set(t.$gv,"m_display_debug_info",s)}}}),t._v(" debug info")])])])],2),t._v(" "),i("transition",{attrs:{name:"fade"}},[i("ui-dialog",{directives:[{name:"show",rawName:"v-show",value:t.wnds.character_list.visable,expression:"wnds.character_list.visable"}],ref:"character_list",attrs:{position:t.wnds.character_list.pos,width:"16.1em",height:"50vh"}},[i("template",{slot:"header"},[t._v("\n\t\t\t\tCharacters\n\t\t\t\t"),t.progressMaximum?[t._v("\n\t\t\t\t\t[loading: "+t._s(t.progressValue)+" / "+t._s(t.progressMaximum)+"]\n\t\t\t\t")]:t._e()],2),t._v(" "),i("template",{slot:"content"},[i("div",{style:{filter:"blur("+(t.progressMaximum?3:0)+"px)"}},[i("div",[i("span",[t._v(t._s(t.charaList.length)+" characters")]),t._v(" "),i("div",{staticClass:"chara-ls-btn-group"},[i("button",{staticClass:"chara-ls-btn",attrs:{title:"Add new"},on:{click:t.addNewChara}},[i("img",{attrs:{src:"images/toolstrip_character.png",alt:"Add new"}})]),t._v(" "),i("button",{staticClass:"chara-ls-btn",attrs:{title:"Add clone"},on:{click:t.addCloneChara}},[i("img",{attrs:{src:"images/toolstrip_duplicate.png",alt:"Add clone"}})]),t._v(" "),i("button",{staticClass:"chara-ls-btn",attrs:{title:"Load"},on:{click:t.loadCharacters}},[i("span",{staticClass:"ui-icon ui-icon-folder-open",attrs:{alt:"📂"}})]),t._v(" "),i("button",{staticClass:"chara-ls-btn",attrs:{title:"Save all"},on:{click:t.saveCharacters}},[i("img",{attrs:{src:"images/toolstrip_save_all.png",alt:"Save all"}})])])]),t._v(" "),i("ui-sortable",{staticClass:"ui-character-list",attrs:{items:t.charaList},on:{input:t.oninput_sort},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.item,s=e.index;return[i("li",{key:n.id,class:[t.selected==n.id?"active":"",n.id].join(" "),attrs:{id:n.id,title:n.id},on:{mousedown:function(e){return"button"in e||!t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?"button"in e&&0!==e.button?null:void t.selectChara(n.id):null}}},[i("table",{staticStyle:{width:"100%"}},[i("tr",{on:{contextmenu:function(e){e.preventDefault(),t.openCharacterDLMenu(e,n.id)}}},[i("td",[t._v(t._s(s))]),t._v(" "),i("td",[t._v(t._s(n.id))]),t._v(" "),i("td",{staticStyle:{position:"relative"}},[i("ui-character",{attrs:{chara:n.renderer}})],1)])])])]}}])})],1),t._v(" "),t.progressMaximum?i("div",{staticClass:"loading"},[i("div",[i("progress",{attrs:{max:t.progressMaximum},domProps:{value:t.progressValue}}),t._v(" "),i("div",[t._v("loading ["+t._s(t.progressValue)+" / "+t._s(t.progressMaximum)+"]")])])]):t._e()])],2)],1),t._v(" "),i("transition",{attrs:{name:"fade"}},[i("ui-dialog",{directives:[{name:"show",rawName:"v-show",value:t.wnds.character_attribute.visable,expression:"wnds.character_attribute.visable"}],ref:"character_list",attrs:{position:t.wnds.character_attribute.pos,width:"20em",height:"50vh"}},[i("template",{slot:"header"},[t._v("\n\t\t\t\tCharacter attribute\n\t\t\t")]),t._v(" "),i("template",{slot:"content"},[null!=t.chara?i("div",[i("ui-character-attribute",{attrs:{sceneChara:t.chara}})],1):t._e()])],2)],1),t._v(" "),i("transition",{attrs:{name:"fade"}},[i("ui-dialog",{directives:[{name:"show",rawName:"v-show",value:t.wnds.spawnpoint.visable,expression:"wnds.spawnpoint.visable"}],ref:"spawnpoint",attrs:{position:t.wnds.spawnpoint.pos,height:"50vh"},on:{"update:position":function(e){t.$set(t.wnds.spawnpoint,"pos",e)}}},[i("template",{slot:"header"},[t._v("\n\t\t\t\tSpawn point\n\t\t\t")]),t._v(" "),i("template",{slot:"content"},[i("ui-mob-list",{on:{resize:function(e){t.$refs.spawnpoint.reset_content_style()}}})],1)],2)],1),t._v(" "),i("transition",{attrs:{name:"fade"}},[i("ui-equip-box",{directives:[{name:"show",rawName:"v-show",value:t.wnds.equip_box.visable,expression:"wnds.equip_box.visable"}],ref:"equip_box",attrs:{position:t.wnds.equip_box.pos,width:"20em",height:400},on:{clickItem:t.clickItem,hoverItem:t.hoverItem,mouseleaveItem:t.mouseleaveItem,faceColor:t.faceColor,hairColor:t.hairColor,hairColor2:t.hairColor2,hairMix2:t.hairMix2}})],1),t._v(" "),i("transition",{attrs:{name:"fade"}},[t.mapEditorMode.startsWith("layered")?[i("ui-dialog",{directives:[{name:"show",rawName:"v-show",value:t.wnds.debug_window.visable,expression:"wnds.debug_window.visable"}],attrs:{position:t.wnds.debug_window.pos,width:"40vw",height:"70vh"}},[i("template",{slot:"header"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.mapEditorMode,expression:"mapEditorMode"}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.mapEditorMode=e.target.multiple?i:i[0]}}},[i("option",{attrs:{value:"background"}},[t._v("background")]),t._v(" "),i("option",{attrs:{value:"frontground"}},[t._v("frontground")]),t._v(" "),i("option",{attrs:{value:"layeredObject"}},[t._v("layered object")]),t._v(" "),i("option",{attrs:{value:"layeredTile"}},[t._v("layered tile")])]),t._v("\n\t\t\t\t\tmode "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.displayMode,expression:"displayMode"}],staticStyle:{width:"1.8em"},attrs:{type:"number",min:"0",max:"2"},domProps:{value:t.displayMode},on:{input:function(e){e.target.composing||(t.displayMode=e.target.value)}}}),t._v(" "),i("button",{on:{click:function(e){t.dirty++}}},[t._v(t._s(t.dirty))])]),t._v(" "),i("template",{slot:"content"},[t.scene_map()&&t.scene_map()[t.mapEditorMode].length?i("div",{style:t.wnd_debug_style},[i("div",{staticStyle:{background:"white"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.wnd_debug_style.background,expression:"wnd_debug_style.background"}],attrs:{type:"color",title:"window background color"},domProps:{value:t.wnd_debug_style.background},on:{input:function(e){e.target.composing||t.$set(t.wnd_debug_style,"background",e.target.value)}}}),t._v(" "),i("label",[t._v("layer "),i("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedLayer,expression:"selectedLayer"}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.selectedLayer=e.target.multiple?i:i[0]}}},t._l(t.scene_map()[t.mapEditorMode].length,function(e){return i("option",[t._v(t._s(e-1))])}))]),t._v(" "),i("span",[t._v(t._s(t.scene_map()[t.mapEditorMode][t.selectedLayer].length)+" objs")])]),t._v(" "),i("hr"),t._v(" "),i("ui-map-editor",{attrs:{objs:t.scene_map()[t.mapEditorMode][t.selectedLayer],displayMode:t.displayMode}})],1):t._e()])],2)]:[i("ui-dialog",{directives:[{name:"show",rawName:"v-show",value:t.wnds.debug_window.visable,expression:"wnds.debug_window.visable"}],attrs:{position:t.wnds.debug_window.pos,width:"40vw",height:"70vh"}},[i("template",{slot:"header"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.mapEditorMode,expression:"mapEditorMode"}],on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.mapEditorMode=e.target.multiple?i:i[0]}}},[i("option",{attrs:{value:"background"}},[t._v("background")]),t._v(" "),i("option",{attrs:{value:"frontground"}},[t._v("frontground")]),t._v(" "),i("option",{attrs:{value:"layeredObject"}},[t._v("layered object")]),t._v(" "),i("option",{attrs:{value:"layeredTile"}},[t._v("layered tile")])]),t._v("\n\t\t\t\t\ttex info "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.displayMode,expression:"displayMode"}],staticStyle:{width:"1.8em"},attrs:{type:"number",min:"0",max:"2"},domProps:{value:t.displayMode},on:{input:function(e){e.target.composing||(t.displayMode=e.target.value)}}}),t._v(" "),i("button",{on:{click:function(e){t.dirty--}}},[t._v(t._s(t.dirty))])]),t._v(" "),i("template",{slot:"content"},[t.scene_map()&&t.scene_map()[t.mapEditorMode].length?i("div",{style:t.wnd_debug_style},[i("div",{staticStyle:{background:"white"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.wnd_debug_style.background,expression:"wnd_debug_style.background"}],attrs:{type:"color"},domProps:{value:t.wnd_debug_style.background},on:{input:function(e){e.target.composing||t.$set(t.wnd_debug_style,"background",e.target.value)}}})]),t._v(" "),i("hr"),t._v(" "),i("ui-map-editor",{attrs:{objs:t.scene_map()[t.mapEditorMode],displayMode:t.displayMode}})],1):t._e()])],2)]],2),t._v(" "),i("transition",{attrs:{name:"fade"}},[i("ui-menu",{ref:"chara_dl_menu",staticStyle:{position:"absolute",width:"8em","z-index":"99999"},attrs:{show:t.is_show_chara_dl_menu},on:{close:t.closeCharacterDLMenu}},[t.chara?[i("a",{on:{click:t._save_as_png}},[t._v("Save as PNG")]),t._v(" "),i("a",{on:{click:function(e){t.chara.renderer._save_as_svg()}}},[t._v("Save as SVG")]),t._v(" "),0==t.progressMaximum||t.progressValue>=t.progressMaximum?[i("a",{attrs:{href:t.chara.renderer._outlink()}},[t._v("Outlink")])]:[i("div",{attrs:{title:"loading..."}},[t._v("Outlink")])],t._v(" "),i("a",{on:{click:t.copyCharaCode}},[t._v("Copy code")])]:[i("a",{staticClass:"disable"},[t._v("Save as SVG")]),t._v(" "),i("a",{staticClass:"disable",attrs:{href:"javascript:void(0)"}},[t._v("Outlink")]),t._v(" "),i("a",{staticClass:"disable"},[t._v("Copy code")])]],2)],1)],1)},[],!1,null,"22edcf98",null).exports);function Ae(t,e,i){return t.data.directives.filter(function(t){return t.name==e&&t.arg==i})}function we(t,e,i){let n=i.context;const s=Object.keys(e.modifiers);s.length?s.forEach(function(s){$(t).off(s),$(t).on(s,function(){let t=Ae(i,"ui","ref");if(t[0]){let i=n.$refs[t[0].value];$(i).stop()[e.arg](e.value)}})}):"ref"!=e.arg&&n.$nextTick(function(){let t=Ae(i,"ui","ref");if(t[0]){let i=n.$refs[t[0].value];$(i).stop()[e.arg](e.value)}})}s.a.config.productionTip=!1,s.a.use(r.a),s.a.directive("ui",{bind:we,componentUpdated:we,unbind:function(t,e,i){const n=Object.keys(e.modifiers);n.length&&n.forEach(function(e){$(t).off(e)})}}),s.a.directive("declare",{bind:function(t,e,i){let n=i.context;for(let t in e.modifiers)s.a.set(n[e.arg],t,e.value)}}),s.a.component("input-number",{template:"<input :value='value' :step='step' :min='min' :max='max' @input='update($event.target.value)' @wheel.stop.prevent='wheel' type='number' />",props:["value","step","min","max"],methods:{update:function(t){t=Math.max(this.min||-1/0,Math.min(t,this.max||1/0)),this.$emit("input",t),this.$parent.$forceUpdate()},wheel:function(t){let e=null!=this.step?this.step:1,i=Number(t.target.value);t.deltaY<0?i+=e:t.deltaY>0&&(i-=e),this.update(i)}}}),s.a.component("input-select",{template:"<select ref='input' :value='value' @input='update($event.target.value)' @wheel.stop.prevent='wheel'><slot></slot></select>",props:["value"],methods:{update:function(t){this.$emit("input",t),this.$parent.$forceUpdate()},wheel:function(t){const e=[...this.$el.children].map(t=>t.value),i=e.length;let n=e.indexOf(t.target.value);t.deltaY<0?n-=1:t.deltaY>0&&(n+=1),n=n>=0?n%i:i-1,this.update(e[n])}}});var Se={store:be.store,data:function(){return{$gv:window.$gv,equip:null,isShowEquipTip:!0,isShowUIEquipWnd:!1,isShowUIItemWnd:!1,m_is_always_show_tip:!1,ItemTip_state:{display:!1,position:null},onkeydown:null}},computed:{chara:{get:function(){return this.$store.state.chara},set:function(){this.$forceUpdate()}},editor_mode:{get:function(){return $gv.m_editor_mode},set:function(t){$gv.m_editor_mode=t}}},methods:{showItemTip:function(t){if(t){let{event:e,equip:i}=t;this.equip=i,this.ItemTip_state.display=!0,this.m_is_always_show_tip?this.ItemTip_state.position=null:this.ItemTip_state.position={my:"left top",at:`left+${e.clientX+1} top+${e.clientY+1}`,of:document.body,collision:"fit",using:function(t){let e=$(this).stop().animate(t,300,"easeOutExpo").offset().top;e<0&&$(this).css("top",t.top-e)}}}else this.ItemTip_state.display=!0,this.m_is_always_show_tip&&(this.ItemTip_state.position=null)},hideItemTip:function(t){this.m_is_always_show_tip||(this.ItemTip_state.display=!1)},_onkeydown:function(t){switch(t.key){case"e":this.isShowUIEquipWnd=!this.isShowUIEquipWnd;break;case"i":this.isShowUIItemWnd=!this.isShowUIItemWnd}}},watch:{editor_mode:function(t){!t&&this.$refs.statusBar&&(this.$refs.statusBar.$forceUpdate(),this.$refs.statusBar.updated&&this.$refs.statusBar.updated())}},mounted:function(){let t=this;this.onkeydown=function(e){"INPUT"!=e.target.tagName&&t._onkeydown(e)},window.addEventListener("keydown",this.onkeydown),document.getElementById("m_is_always_show_tip").addEventListener("change",function(e){e=e||event,t.m_is_always_show_tip=!!e.target.checked,t.m_is_always_show_tip?t.showItemTip():t.hideItemTip()}),t.m_is_always_show_tip?t.showItemTip():t.hideItemTip()},beforeDestroy:function(){window.removeEventListener("keydown",this.onkeydown)},components:{editor:be,"ui-tool-tip":it,"frame-2":at,"status-bar":w,"ui-window-equip":E,"ui-window-item":Q}},Ce=(i(473),y(Se,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{position:"absolute",width:"100%",height:"100%",top:"0px",left:"0px","user-select":"none"}},[i("transition",{staticStyle:{position:"absolute"},attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:t.editor_mode,expression:"editor_mode"}],staticClass:"scene-editor;"},[i("editor",{ref:"editor",on:{hoverItem:function(e){t.showItemTip.apply(void 0,arguments)},mouseleaveItem:function(e){t.hideItemTip.apply(void 0,arguments)}}})],1)]),t._v(" "),i("transition",{staticStyle:{position:"absolute"},attrs:{name:"fade"}},[i("status-bar",{directives:[{name:"show",rawName:"v-show",value:!t.editor_mode,expression:"!editor_mode"}],ref:"statusBar",attrs:{chara:t.chara}})],1),t._v(" "),i("transition",{staticStyle:{position:"absolute"},attrs:{name:"fade"}},[i("ui-window-equip",{directives:[{name:"show",rawName:"v-show",value:t.isShowUIEquipWnd,expression:"isShowUIEquipWnd"}],attrs:{chara:t.chara},on:{hoverItem:function(e){t.showItemTip.apply(void 0,arguments)},mouseleaveItem:function(e){t.hideItemTip.apply(void 0,arguments)}}})],1),t._v(" "),i("transition",{staticStyle:{position:"absolute"},attrs:{name:"fade"}},[i("ui-window-item",{directives:[{name:"show",rawName:"v-show",value:t.isShowUIItemWnd,expression:"isShowUIItemWnd"}],attrs:{chara:t.chara},on:{hoverItem:function(e){t.showItemTip.apply(void 0,arguments)},mouseleaveItem:function(e){t.hideItemTip.apply(void 0,arguments)}}})],1),t._v(" "),i("div",{staticClass:"gui",staticStyle:{"z-index":"100",position:"absolute",width:"0",height:"0"},on:{contextmenu:function(t){t.preventDefault()}}},[t.isShowEquipTip?i("ui-tool-tip",{attrs:{isShow:t.isShowEquipTip,equip:t.equip,chara:t.chara,state:t.ItemTip_state}}):t._e()],1),t._v(" "),i("frame-2",{ref:"smallTip",staticStyle:{position:"absolute"}})],1)},[],!1,null,null,null).exports);class Be{constructor(){this.socket=this._conn(),window.$io=this.socket,this.charaMap={}}_findChara(t,e){let i=this.charaMap[t];i&&e.call(this,i)}_addRemoteCharaPacketListener(t,e){this.socket.on(t,(...t)=>{let i=t[0].id,n=this.charaMap[i];n&&e.call(this,n,...t)})}_conn(){let t;if(null!=window.io){let e=new URL(window.location);e.port=8787;const i=(t=io(e.href)).emit;t.emit=function(e,n){return new Promise(function(s,r){i.call(t,e,n,function(){s.apply(this,arguments)})})}}else t={emit:()=>!0,on:()=>!0,once:()=>!0};return t}get $scene_map(){return window.scene_map}async login(t,e){await this.socket.emit("login",{account:"aaa",password:"aaa"})?console.info("login"):console.info("login failed")}async selectWorld(t,e){await this.socket.emit("selectWorld",{world:0,channel:0})?console.info("selectWorld"):console.info("selectWorld failed")}async selectChara(t){new ie.$RequestPacket_SelectChara;let e=await this.socket.emit("selectChara",{id:123});const i=e.charaData,n=e.remoteCharacters;if(i)try{this._CreateMyCharacter(i),this.onEnterRemoteChara(n)}catch(t){alert(err.message),console.error(err)}else alert("selectChara: chara not exist")}async _CreateMyCharacter(t){let e=await Te.store.dispatch("_createChara",{emplace:{id:t.id,code:t.equips_code}});this.chara=e,this.$scene_map.load(t.mapId),e._$data=e._$data||{guildId:"",partyId:""}}static async _CreateMyCharacter(t){let e=await Te.store.dispatch("_createChara",{emplace:{id:t.id,code:t.equips_code}});return(e=e)._$data=e._$data||{guildId:"",partyId:""},e}onEnterRemoteChara(t){let e=t.map(t=>Te.store.dispatch("_createChara",{remote_chara:{id:t.id,code:t.equips_code}}).then(t=>{try{const e=this.$scene_map.controller;let i=t;i.$physics=e.$createRemotePlayer(i,i.$$renderer),this.charaMap[i.id]=i}catch(t){alert(err.message),console.error(err)}}));return Promise.all(e)}onRemoteChat(t,e,i){t.chatCtrl.style=e.style,t.chatCtrl.enter(e.text),app.vue.$refs.statusBar.pushChatHistory(e.type,e.style,e.text)}onRemoteCharaMove(t,e,i){t.$move(e)}onRemoteCharaAnim(t,e,i){t.$anim(e)}onRemoteCharaSkill(t,e,i){t.invokeSkill(e.skillId)}onRemoteAvatarModified(t,e,i){t.renderer.use(e.itemId)}async $test(){this.socket.on("enterRemoteChara",this.onEnterRemoteChara.bind(this)),this._addRemoteCharaPacketListener("remoteChat",this.onRemoteChat),this._addRemoteCharaPacketListener("remoteCharaMove",this.onRemoteCharaMove),this._addRemoteCharaPacketListener("remoteCharaAnim",this.onRemoteCharaAnim),this._addRemoteCharaPacketListener("remoteCharaSkill",this.onRemoteCharaSkill),this._addRemoteCharaPacketListener("remoteAvatarModified",this.onRemoteAvatarModified),await this.login("aaa","aaa"),await this.selectWorld(0,0),await this.selectChara(0)}}class Ve{constructor(){throw new Error("")}static PushState(t,e){if(!t)return;let i={},n="?map="+t.map_id;i.map_id=t.map_id,e&&e.renderer&&(i.chara=e.renderer._stringify(!1),n+="&chara="+i.chara),history.pushState(i,t._window_title,n),document.title=t._window_title}static PushStateString(t,e){if(!t)return;let i={},n="?map="+t;i.map_id=t,e&&(i.chara=e,n+="&chara="+i.chara),history.pushState(i,scene._window_title,n),document.title=scene._window_title}static async PopState(t){if(t){if(t.chara&&window.chara&&window.chara.renderer){let e=window.chara.renderer._stringify(!1);t.chara!=e&&window.chara.renderer._parse(t.chara)}else Be._CreateMyCharacter({id:"chara_1",equips_code:t.chara});scene_map&&scene_map.map_id!=t.map_id&&await scene_map.load(t.map_id)}}}i(427);class Me{constructor(){this.url=null,this.x=0,this.y=0,this.delay=0}}class ke{constructor(){this.frames=[],this.duration=0}async addFrameFromUrl(t){let e=await $get.data(t);return this.addFrame("images"+t,e.origin.x,e.origin.y,e.delay)}addFrame(t,e,i,n){if(!t)throw new TypeError;const s=this.frames.length;let r=new Me;return r.url=t,r.x=0|e,r.y=0|i,r.delay=0|n,this.frames.push(r),this.duration+=r.delay,s}async load(t){let e=await $get.data(t);for(let i=0,n=e[i];n;n=e[++i]){this.addFrame(["images",t,i].join("/"),n.origin.x,n.origin.y,n.delay)}}}class Pe{constructor(){}static createToCSS(t,e,i){const n="Cursor"+Math.trunc(4294967295*Math.random()).toString(16),{frames:s,duration:r}=t;let o=`${e}:hover {\n`;if(o+=`cursor: url(${s[0].url}) ${s[0].x} ${s[0].y}, ${i};\n`,r){o+=`animation-name: ${n}_keyframes;\n`,o+=`animation-duration: ${r}ms;\n`,o+="animation-iteration-count: infinite;\n",o+="}\n";let t=0;o+=`@keyframes ${n}_keyframes {\n`;for(let e=0;e<s.length;++e){const n=s[e];o+=`${Math.trunc(t/r*100)}% { cursor: url(${s[e].url}) ${s[e].x} ${s[e].y}, ${i}; }\n`,t+=n.delay}o+="}\n"}else o+="}";var a=document.createElement("STYLE"),l=document.createTextNode(o);return a.id=n,a.appendChild(l),document.head.appendChild(a),a}}window.SCREEN_PRINTLN=function(t,e){2==arguments.length?window._SCREEN_PRINTLN.push({getText:t,getValue:e}):1==arguments.length&&window._SCREEN_PRINTLN.push(arguments[0])},window._SCREEN_PRINTLN=[];window.addEventListener("popstate",function(t){Ve.PopState(t.state)}),function(){let t=new ke,e=t.addFrameFromUrl("/UI/Basic/Cursor/0/0").then(function(e){t.frames[e].delay=200}),i=t.addFrameFromUrl("/UI/Basic/Cursor/12/0").then(function(e){t.frames[e].delay=200});Promise.all([e,i]).then(function(){t.duration=400,Pe.createToCSS(t,".ui-clickable","pointer")})}(),window.onkeydown=function(t){if(t.target!=document.body)return;let e=t.key;null==e||$gv.input_keyDown[e]||(null!=$gv.input_keyDown[e]?++$gv.input_keyDown[e]:$gv.input_keyDown[e]=1),"Space"==t.code&&$("#m_is_run").click(),"F2"==t.code&&($gv.m_editor_mode=!$gv.m_editor_mode)},window.onkeyup=function(t){if(t.target!=document.body)return;let e=t.key;null!=e&&$gv.input_keyDown[e]&&($gv.input_keyDown[e]=0,$gv.input_keyUp[e]=1)},Object.defineProperty(window,"$m_is_run",{get:function(){return $("#m_is_run").attr("checked")},set:function(t){$("#m_is_run").attr("checked",!t),$("#m_is_run").click()}}),window.onmousedown=function(t){$gv.m_editor_mode&&!t.target.classList.contains("Editor")||(1==t.which?($gv.mouse_dl=1,$gv.mouse_ul=0):2==t.which?($gv.mouse_dm=1,$gv.mouse_um=0):3==t.which&&($gv.mouse_dr=1,$gv.mouse_ur=0),$gv.mouse_x=t.pageX,$gv.mouse_y=t.pageY)},window.onmouseup=function(t){$gv.m_editor_mode&&!t.target.classList.contains("Editor")||(1==t.which?($gv.mouse_dl=0,$gv.mouse_ul=1):2==t.which?($gv.mouse_dm=0,$gv.mouse_um=1):3==t.which&&($gv.mouse_dr=0,$gv.mouse_ur=1),$gv.mouse_x=t.pageX,$gv.mouse_y=t.pageY)},window.onmousemove=function(t){$gv.m_editor_mode&&!t.target.classList.contains("Editor")||($gv.mouse_x=t.pageX,$gv.mouse_y=t.pageY,$gv.mouse_move=1)};class Ie{constructor(){this.timer=0,this.timer_=0,this._dTimer=0,this.fps_arr=[],this.frame_s_arr=[],this.scene_map=new Pt.c,window.scene_map=this.scene_map,$gv.scene_map=window,scene_map.onload=function(){Ve.PushState(this,window.chara)},this._loop=this._loop.bind(this),document.getElementById("m_is_run").onchange=function(t){this.m_is_run=!!t.target.checked,this.m_is_run&&(requestAnimationFrame(this._loop),document.getElementById("Screenshot").innerHTML="")}.bind(this),this._$moveViewportSpeed=10}moveViewport(t){const e=this.scene_map,i=$gv.input_keyDown.z?10*this._$moveViewportSpeed:this._$moveViewportSpeed;$gv.input_keyDown.ArrowLeft>0&&($gv.m_viewRect.left-=i),$gv.input_keyDown.ArrowRight>0&&($gv.m_viewRect.left+=i),$gv.input_keyDown.ArrowUp>0&&($gv.m_viewRect.top-=i),$gv.input_keyDown.ArrowDown>0&&($gv.m_viewRect.top+=i);let{left:n,top:s,right:r,bottom:o}=e.mapBound;t&&($gv.m_viewRect.left<n&&($gv.m_viewRect.left=n),$gv.m_viewRect.right>r&&($gv.m_viewRect.left=r-$gv.m_viewRect.width),$gv.m_viewRect.top<s&&($gv.m_viewRect.top=s),$gv.m_viewRect.bottom>o&&($gv.m_viewRect.top=o-$gv.m_viewRect.height))}async _$startClient(){if(scene_map)if(null!=window.io){let t=new Be;Te.client=t,t.$test()}else{let t,e=function(){let t=decodeURIComponent(window.location.search.substring(1)).split("&"),e={};for(let i=0;i<t.length;++i){let n=t[i].split("=");e[n[0]]=n[1]}return e}();t=e.map||window.DEFAULT_MAP_ID;let i=e.chara||"c,00002012,00012012,00026509|00026509,00034873|00034873,01051429,01072392";Ve.PopState({map_id:t,chara:i})}}get _isMapReady(){const t=this.scene_map;return t&&t.isLoaded()}async run(){console.log("begin render"),this._loop(0)}async forceUpdateScreen(){const t=this.chara;if(t.renderer.__forceUpdate(0),this.m_is_run)return await t.renderer.waitLoaded(),void(t.renderer.__require_update=!0);await t.renderer.waitLoaded(),await t.renderer._waitFrameTexturesLoaded(),await $t.b.waitAllLoaded(),document.getElementById("Screenshot").innerHTML="",t.renderer.__require_update=!0,this._loop(0)}_calcFPS(t){try{if(this.timer-this.timer_>=1e3){if(this.fps_arr.length){let t=this.fps_arr.reduce(function(t,e){return t+e})/this.fps_arr.length;document.getElementById("FPS").innerHTML=t.toFixed(2)}if(this.frame_s_arr.length){let t=this.frame_s_arr.reduce(function(t,e){return t+e})/this.frame_s_arr.length;document.getElementById("frame").innerHTML=t.toFixed(2)}this.frame_s_arr=[],this.fps_arr=[],this.timer_=this.timer}else t>0&&Number.isFinite(t)&&(this.fps_arr.push(1e3/t),this.frame_s_arr.push(t))}catch(t){document.getElementById("FPS").innerHTML="-",document.getElementById("frame").innerHTML="-",this.fps_arr=[],this.frame_s_arr=[]}}_requestNextFrame(){this.m_is_run?requestAnimationFrame(this._loop):setTimeout(function(){let t=new Image;t.src=ye.b._canvas.toDataURL(),ye.b.ctx.clearRect(0,0,ye.b.ctx.width,ye.b.ctx.height),document.getElementById("Screenshot").appendChild(t)},0)}_updateScene(t){this.chara;const e=this.charaList;this._isMapReady&&scene_map.update(t);for(let i=0;i<e.length;++i)e[i].update(t);$gv.SceneObjectMgr.Update(t),Xt.Update(t);{const t=Te.client;if(t&&t.chara){const e=t.chara;e.$emit(window.$io),e.$recMove()}}fe.update(t)}_renderScene(){const t=this.chara,e=this.charaList;if(ye.b.beginScene(),ye.b.loadIdentity(),ye.b.clearDrawScreen(),$gv.m_viewRect.size=ye.b.screen_size,!$gv.m_editor_mode)if(t&&t.renderer)$gv.m_viewRect.setCenter(t.renderer.x,t.renderer.y);else if(scene_map.controller.player){const t=scene_map.controller.player.getPosition(),e=Math.trunc(t.x*$gv.CANVAS_SCALE+.5),i=Math.trunc(t.y*$gv.CANVAS_SCALE+.5);$gv.m_viewRect.setCenter(e,i)}if($gv.m_is_rendering_map&&this._isMapReady){$gv.m_editor_mode&&this.moveViewport(!1),scene_map.beginRender(ye.b),scene_map.renderBackground(ye.b);for(let i=0;i<scene_map.layeredObject.length;++i){if(scene_map.renderLayeredObject(ye.b,i),scene_map.renderLayeredTile(ye.b,i),scene_map.applyCamera(ye.b),$gv.m_display_other_player)for(let n=0;n<e.length;++n)e[n]!=t&&e[n].$layer==i&&e[n].render(ye.b);scene_map.renderLife(ye.b,i),$gv.m_display_player&&t&&(null!=t.$layer&&t.$layer!=i||!t.renderer||t.render(ye.b)),$gv.SceneObjectMgr.RenderLayer(ye.b,i)}scene_map.applyCamera(ye.b);for(let t=scene_map.layeredObject.length;t<12;++t)$gv.SceneObjectMgr.RenderLayer(ye.b,t);scene_map.endRender(ye.b)}else if($gv.m_display_other_player||$gv.m_display_player){scene_map.applyCamera(ye.b);for(let i=0;i<e.length;++i)e[i]!=t&&$gv.m_display_other_player&&e[i].render(ye.b);$gv.m_display_player&&t&&t.render(ye.b),Xt.Render(ye.b)}fe.render(ye.b);for(let t=0;t<e.length;++t)e[t]._$drawName(ye.b);for(let t=0;t<e.length;++t)e[t]._$drawChatBalloon(ye.b);if($gv.m_is_rendering_map&&this._isMapReady&&(scene_map.beginRender(ye.b),scene_map.applyCamera(ye.b),scene_map.renderPortal(ye.b),scene_map.renderFrontground(ye.b),scene_map.endRender(ye.b),scene_map.renderParticle(ye.b),scene_map.applyCamera(ye.b),Xt.Render(ye.b),ye.b.loadIdentity()),scene_map.applyCamera(ye.b),$gv.m_display_debug_info){const t=ye.b.ctx;t.beginPath(),t.fillStyle="white",t.fillRect(0,0,96,50),t.fillStyle="black",t.fillText("map origin",5,14,96),t.fillText("view-x: "+$gv.m_viewRect.x.toFixed(0),5,30,96),t.fillText("view-y: "+$gv.m_viewRect.y.toFixed(0),5,46,96)}scene_map.controller.render(ye.b),ye.b.loadIdentity(),$gv.m_display_debug_info&&this._render_debug_info(),ye.b.endScene()}_render_debug_info(){if(this._isMapReady&&scene_map.controller&&scene_map.controller.player){const t=ye.b.ctx,e=t.textAlign,i=t.textBaseline,n=t.lineWidth;t.textBaseline="top",t.lineWidth=2.5,t.strokeStyle="#000";let s=400,r=5;for(let e of window._SCREEN_PRINTLN){const i=e.getValue(),n=e.getText();if(t.fillStyle="#FFF",t.textAlign="right",t.strokeText(n,s-2,r),t.fillText(n,s-2,r),t.textAlign="center",t.strokeText(":",s,r),t.fillText(":",s,r),t.textAlign="left",t.strokeText(i,s+2,r),t.fillText(i,s+2,r),"_val"in e){let o;e._val!=i?(o=e._val,e.__val=e._val,e._val=i):o=e.__val,o!=i&&(t.fillStyle="#0FF"),t.fillStyle="#FFF",t.textAlign="right",t.strokeText(n,s-2+200,r),t.fillText(n,s-2+200,r),t.textAlign="center",t.strokeText(":",s+200,r),t.fillText(":",s+200,r),t.textAlign="left",t.strokeText(o,s+2+200,r),t.fillText(o,s+2+200,r)}else e.__val=i,e._val=i;r+=16}t.textAlign=e,t.textBaseline=i,t.lineWidth=n}}_loop(t){this.scene_map;let e=t-this.timer;this.timer=t,this._requestNextFrame(),this._calcFPS(e),this._updateScene(e),this._renderScene();for(let t in $gv.input_keyDown)$gv.input_keyDown[t]>0&&++$gv.input_keyDown[t];for(let t in $gv.input_keyUp)$gv.input_keyUp[t]=0}get chara(){return window.chara}get charaList(){return Te.store.state.charaList}get m_is_run(){return window.m_is_run}set m_is_run(t){window.m_is_run=t}}const De=new class{constructor(){this.vue=null,this.game=null}async start(t){this.store=be.store;let e=s.a.extend(Ce);this.vue=new e({el:t}),await Object(o.b)(),this.game=new Ie,this.game._$startClient(),this.game.run()}updateScreen(){return this.game.forceUpdateScreen()}};window.app=De;var Te=De;Te.start("#vue")}]);
//# sourceMappingURL=index.js.map